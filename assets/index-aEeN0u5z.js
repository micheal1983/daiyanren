const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CiIrj9uw.js","assets/webworkerAll-Dzxix2g-.js","assets/colorToUniform-C2GHuDhf.js","assets/WebGPURenderer-DvoJqVa8.js","assets/SharedSystems-Btr9XnbY.js","assets/WebGLRenderer-B8Dhp8-H.js"])))=>i.map(i=>d[i]);
(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))E(C);new MutationObserver(C=>{for(const P of C)if(P.type==="childList")for(const I of P.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&E(I)}).observe(document,{childList:!0,subtree:!0});function T(C){const P={};return C.integrity&&(P.integrity=C.integrity),C.referrerPolicy&&(P.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?P.credentials="include":C.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function E(C){if(C.ep)return;C.ep=!0;const P=T(C);fetch(C.href,P)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(A){const _=Object.create(null);for(const T of A.split(","))_[T]=1;return T=>T in _}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP$1=()=>{},NO=()=>!1,isOn=A=>A.charCodeAt(0)===111&&A.charCodeAt(1)===110&&(A.charCodeAt(2)>122||A.charCodeAt(2)<97),isModelListener=A=>A.startsWith("onUpdate:"),extend=Object.assign,remove=(A,_)=>{const T=A.indexOf(_);T>-1&&A.splice(T,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(A,_)=>hasOwnProperty$1.call(A,_),isArray$1=Array.isArray,isMap=A=>toTypeString(A)==="[object Map]",isSet=A=>toTypeString(A)==="[object Set]",isRegExp=A=>toTypeString(A)==="[object RegExp]",isFunction=A=>typeof A=="function",isString=A=>typeof A=="string",isSymbol=A=>typeof A=="symbol",isObject=A=>A!==null&&typeof A=="object",isPromise=A=>(isObject(A)||isFunction(A))&&isFunction(A.then)&&isFunction(A.catch),objectToString=Object.prototype.toString,toTypeString=A=>objectToString.call(A),toRawType=A=>toTypeString(A).slice(8,-1),isPlainObject=A=>toTypeString(A)==="[object Object]",isIntegerKey=A=>isString(A)&&A!=="NaN"&&A[0]!=="-"&&""+parseInt(A,10)===A,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=A=>{const _=Object.create(null);return T=>_[T]||(_[T]=A(T))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(A=>A.replace(camelizeRE,(_,T)=>T?T.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(A=>A.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(A=>A.charAt(0).toUpperCase()+A.slice(1)),toHandlerKey=cacheStringFunction(A=>A?`on${capitalize(A)}`:""),hasChanged=(A,_)=>!Object.is(A,_),invokeArrayFns=(A,..._)=>{for(let T=0;T<A.length;T++)A[T](..._)},def=(A,_,T,E=!1)=>{Object.defineProperty(A,_,{configurable:!0,enumerable:!1,writable:E,value:T})},looseToNumber=A=>{const _=parseFloat(A);return isNaN(_)?A:_};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(A){if(isArray$1(A)){const _={};for(let T=0;T<A.length;T++){const E=A[T],C=isString(E)?parseStringStyle(E):normalizeStyle(E);if(C)for(const P in C)_[P]=C[P]}return _}else if(isString(A)||isObject(A))return A}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(A){const _={};return A.replace(styleCommentRE,"").split(listDelimiterRE).forEach(T=>{if(T){const E=T.split(propertyDelimiterRE);E.length>1&&(_[E[0].trim()]=E[1].trim())}}),_}function normalizeClass(A){let _="";if(isString(A))_=A;else if(isArray$1(A))for(let T=0;T<A.length;T++){const E=normalizeClass(A[T]);E&&(_+=E+" ")}else if(isObject(A))for(const T in A)A[T]&&(_+=T+" ");return _.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(A){return!!A||A===""}const isRef$1=A=>!!(A&&A.__v_isRef===!0),toDisplayString=A=>isString(A)?A:A==null?"":isArray$1(A)||isObject(A)&&(A.toString===objectToString||!isFunction(A.toString))?isRef$1(A)?toDisplayString(A.value):JSON.stringify(A,replacer,2):String(A),replacer=(A,_)=>isRef$1(_)?replacer(A,_.value):isMap(_)?{[`Map(${_.size})`]:[..._.entries()].reduce((T,[E,C],P)=>(T[stringifySymbol(E,P)+" =>"]=C,T),{})}:isSet(_)?{[`Set(${_.size})`]:[..._.values()].map(T=>stringifySymbol(T))}:isSymbol(_)?stringifySymbol(_):isObject(_)&&!isArray$1(_)&&!isPlainObject(_)?String(_):_,stringifySymbol=(A,_="")=>{var T;return isSymbol(A)?`Symbol(${(T=A.description)!=null?T:_})`:A};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(_=!1){this.detached=_,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!_&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let _,T;if(this.scopes)for(_=0,T=this.scopes.length;_<T;_++)this.scopes[_].pause();for(_=0,T=this.effects.length;_<T;_++)this.effects[_].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let _,T;if(this.scopes)for(_=0,T=this.scopes.length;_<T;_++)this.scopes[_].resume();for(_=0,T=this.effects.length;_<T;_++)this.effects[_].resume()}}run(_){if(this._active){const T=activeEffectScope;try{return activeEffectScope=this,_()}finally{activeEffectScope=T}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(_){if(this._active){this._active=!1;let T,E;for(T=0,E=this.effects.length;T<E;T++)this.effects[T].stop();for(this.effects.length=0,T=0,E=this.cleanups.length;T<E;T++)this.cleanups[T]();if(this.cleanups.length=0,this.scopes){for(T=0,E=this.scopes.length;T<E;T++)this.scopes[T].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!_){const C=this.parent.scopes.pop();C&&C!==this&&(this.parent.scopes[this.index]=C,C.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(_){this.fn=_,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const _=activeSub,T=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=_,shouldTrack=T,this.flags&=-3}}stop(){if(this.flags&1){for(let _=this.deps;_;_=_.nextDep)removeSub(_);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(A,_=!1){if(A.flags|=8,_){A.next=batchedComputed,batchedComputed=A;return}A.next=batchedSub,batchedSub=A}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let _=batchedComputed;for(batchedComputed=void 0;_;){const T=_.next;_.next=void 0,_.flags&=-9,_=T}}let A;for(;batchedSub;){let _=batchedSub;for(batchedSub=void 0;_;){const T=_.next;if(_.next=void 0,_.flags&=-9,_.flags&1)try{_.trigger()}catch(E){A||(A=E)}_=T}}if(A)throw A}function prepareDeps(A){for(let _=A.deps;_;_=_.nextDep)_.version=-1,_.prevActiveLink=_.dep.activeLink,_.dep.activeLink=_}function cleanupDeps(A){let _,T=A.depsTail,E=T;for(;E;){const C=E.prevDep;E.version===-1?(E===T&&(T=C),removeSub(E),removeDep(E)):_=E,E.dep.activeLink=E.prevActiveLink,E.prevActiveLink=void 0,E=C}A.deps=_,A.depsTail=T}function isDirty(A){for(let _=A.deps;_;_=_.nextDep)if(_.dep.version!==_.version||_.dep.computed&&(refreshComputed(_.dep.computed)||_.dep.version!==_.version))return!0;return!!A._dirty}function refreshComputed(A){if(A.flags&4&&!(A.flags&16)||(A.flags&=-17,A.globalVersion===globalVersion))return;A.globalVersion=globalVersion;const _=A.dep;if(A.flags|=2,_.version>0&&!A.isSSR&&A.deps&&!isDirty(A)){A.flags&=-3;return}const T=activeSub,E=shouldTrack;activeSub=A,shouldTrack=!0;try{prepareDeps(A);const C=A.fn(A._value);(_.version===0||hasChanged(C,A._value))&&(A._value=C,_.version++)}catch(C){throw _.version++,C}finally{activeSub=T,shouldTrack=E,cleanupDeps(A),A.flags&=-3}}function removeSub(A,_=!1){const{dep:T,prevSub:E,nextSub:C}=A;if(E&&(E.nextSub=C,A.prevSub=void 0),C&&(C.prevSub=E,A.nextSub=void 0),T.subs===A&&(T.subs=E,!E&&T.computed)){T.computed.flags&=-5;for(let P=T.computed.deps;P;P=P.nextDep)removeSub(P,!0)}!_&&!--T.sc&&T.map&&T.map.delete(T.key)}function removeDep(A){const{prevDep:_,nextDep:T}=A;_&&(_.nextDep=T,A.prevDep=void 0),T&&(T.prevDep=_,A.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const A=trackStack.pop();shouldTrack=A===void 0?!0:A}function cleanupEffect(A){const{cleanup:_}=A;if(A.cleanup=void 0,_){const T=activeSub;activeSub=void 0;try{_()}finally{activeSub=T}}}let globalVersion=0;class Link{constructor(_,T){this.sub=_,this.dep=T,this.version=T.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(_){this.computed=_,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(_){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let T=this.activeLink;if(T===void 0||T.sub!==activeSub)T=this.activeLink=new Link(activeSub,this),activeSub.deps?(T.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=T,activeSub.depsTail=T):activeSub.deps=activeSub.depsTail=T,addSub(T);else if(T.version===-1&&(T.version=this.version,T.nextDep)){const E=T.nextDep;E.prevDep=T.prevDep,T.prevDep&&(T.prevDep.nextDep=E),T.prevDep=activeSub.depsTail,T.nextDep=void 0,activeSub.depsTail.nextDep=T,activeSub.depsTail=T,activeSub.deps===T&&(activeSub.deps=E)}return T}trigger(_){this.version++,globalVersion++,this.notify(_)}notify(_){startBatch();try{for(let T=this.subs;T;T=T.prevSub)T.sub.notify()&&T.sub.dep.notify()}finally{endBatch()}}}function addSub(A){if(A.dep.sc++,A.sub.flags&4){const _=A.dep.computed;if(_&&!A.dep.subs){_.flags|=20;for(let E=_.deps;E;E=E.nextDep)addSub(E)}const T=A.dep.subs;T!==A&&(A.prevSub=T,T&&(T.nextSub=A)),A.dep.subs=A}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(A,_,T){if(shouldTrack&&activeSub){let E=targetMap.get(A);E||targetMap.set(A,E=new Map);let C=E.get(T);C||(E.set(T,C=new Dep),C.map=E,C.key=T),C.track()}}function trigger(A,_,T,E,C,P){const I=targetMap.get(A);if(!I){globalVersion++;return}const F=R=>{R&&R.trigger()};if(startBatch(),_==="clear")I.forEach(F);else{const R=isArray$1(A),B=R&&isIntegerKey(T);if(R&&T==="length"){const O=Number(E);I.forEach((V,L)=>{(L==="length"||L===ARRAY_ITERATE_KEY||!isSymbol(L)&&L>=O)&&F(V)})}else switch((T!==void 0||I.has(void 0))&&F(I.get(T)),B&&F(I.get(ARRAY_ITERATE_KEY)),_){case"add":R?B&&F(I.get("length")):(F(I.get(ITERATE_KEY)),isMap(A)&&F(I.get(MAP_KEY_ITERATE_KEY)));break;case"delete":R||(F(I.get(ITERATE_KEY)),isMap(A)&&F(I.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(A)&&F(I.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(A){const _=toRaw(A);return _===A?_:(track(_,"iterate",ARRAY_ITERATE_KEY),isShallow(A)?_:_.map(toReactive))}function shallowReadArray(A){return track(A=toRaw(A),"iterate",ARRAY_ITERATE_KEY),A}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...A){return reactiveReadArray(this).concat(...A.map(_=>isArray$1(_)?reactiveReadArray(_):_))},entries(){return iterator(this,"entries",A=>(A[1]=toReactive(A[1]),A))},every(A,_){return apply(this,"every",A,_,void 0,arguments)},filter(A,_){return apply(this,"filter",A,_,T=>T.map(toReactive),arguments)},find(A,_){return apply(this,"find",A,_,toReactive,arguments)},findIndex(A,_){return apply(this,"findIndex",A,_,void 0,arguments)},findLast(A,_){return apply(this,"findLast",A,_,toReactive,arguments)},findLastIndex(A,_){return apply(this,"findLastIndex",A,_,void 0,arguments)},forEach(A,_){return apply(this,"forEach",A,_,void 0,arguments)},includes(...A){return searchProxy(this,"includes",A)},indexOf(...A){return searchProxy(this,"indexOf",A)},join(A){return reactiveReadArray(this).join(A)},lastIndexOf(...A){return searchProxy(this,"lastIndexOf",A)},map(A,_){return apply(this,"map",A,_,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...A){return noTracking(this,"push",A)},reduce(A,..._){return reduce(this,"reduce",A,_)},reduceRight(A,..._){return reduce(this,"reduceRight",A,_)},shift(){return noTracking(this,"shift")},some(A,_){return apply(this,"some",A,_,void 0,arguments)},splice(...A){return noTracking(this,"splice",A)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(A){return reactiveReadArray(this).toSorted(A)},toSpliced(...A){return reactiveReadArray(this).toSpliced(...A)},unshift(...A){return noTracking(this,"unshift",A)},values(){return iterator(this,"values",toReactive)}};function iterator(A,_,T){const E=shallowReadArray(A),C=E[_]();return E!==A&&!isShallow(A)&&(C._next=C.next,C.next=()=>{const P=C._next();return P.value&&(P.value=T(P.value)),P}),C}const arrayProto=Array.prototype;function apply(A,_,T,E,C,P){const I=shallowReadArray(A),F=I!==A&&!isShallow(A),R=I[_];if(R!==arrayProto[_]){const V=R.apply(A,P);return F?toReactive(V):V}let B=T;I!==A&&(F?B=function(V,L){return T.call(this,toReactive(V),L,A)}:T.length>2&&(B=function(V,L){return T.call(this,V,L,A)}));const O=R.call(I,B,E);return F&&C?C(O):O}function reduce(A,_,T,E){const C=shallowReadArray(A);let P=T;return C!==A&&(isShallow(A)?T.length>3&&(P=function(I,F,R){return T.call(this,I,F,R,A)}):P=function(I,F,R){return T.call(this,I,toReactive(F),R,A)}),C[_](P,...E)}function searchProxy(A,_,T){const E=toRaw(A);track(E,"iterate",ARRAY_ITERATE_KEY);const C=E[_](...T);return(C===-1||C===!1)&&isProxy(T[0])?(T[0]=toRaw(T[0]),E[_](...T)):C}function noTracking(A,_,T=[]){pauseTracking(),startBatch();const E=toRaw(A)[_].apply(A,T);return endBatch(),resetTracking(),E}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(A=>A!=="arguments"&&A!=="caller").map(A=>Symbol[A]).filter(isSymbol));function hasOwnProperty(A){isSymbol(A)||(A=String(A));const _=toRaw(this);return track(_,"has",A),_.hasOwnProperty(A)}class BaseReactiveHandler{constructor(_=!1,T=!1){this._isReadonly=_,this._isShallow=T}get(_,T,E){if(T==="__v_skip")return _.__v_skip;const C=this._isReadonly,P=this._isShallow;if(T==="__v_isReactive")return!C;if(T==="__v_isReadonly")return C;if(T==="__v_isShallow")return P;if(T==="__v_raw")return E===(C?P?shallowReadonlyMap:readonlyMap:P?shallowReactiveMap:reactiveMap).get(_)||Object.getPrototypeOf(_)===Object.getPrototypeOf(E)?_:void 0;const I=isArray$1(_);if(!C){let R;if(I&&(R=arrayInstrumentations[T]))return R;if(T==="hasOwnProperty")return hasOwnProperty}const F=Reflect.get(_,T,isRef(_)?_:E);return(isSymbol(T)?builtInSymbols.has(T):isNonTrackableKeys(T))||(C||track(_,"get",T),P)?F:isRef(F)?I&&isIntegerKey(T)?F:F.value:isObject(F)?C?readonly(F):reactive(F):F}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(_=!1){super(!1,_)}set(_,T,E,C){let P=_[T];if(!this._isShallow){const R=isReadonly(P);if(!isShallow(E)&&!isReadonly(E)&&(P=toRaw(P),E=toRaw(E)),!isArray$1(_)&&isRef(P)&&!isRef(E))return R?!1:(P.value=E,!0)}const I=isArray$1(_)&&isIntegerKey(T)?Number(T)<_.length:hasOwn(_,T),F=Reflect.set(_,T,E,isRef(_)?_:C);return _===toRaw(C)&&(I?hasChanged(E,P)&&trigger(_,"set",T,E):trigger(_,"add",T,E)),F}deleteProperty(_,T){const E=hasOwn(_,T);_[T];const C=Reflect.deleteProperty(_,T);return C&&E&&trigger(_,"delete",T,void 0),C}has(_,T){const E=Reflect.has(_,T);return(!isSymbol(T)||!builtInSymbols.has(T))&&track(_,"has",T),E}ownKeys(_){return track(_,"iterate",isArray$1(_)?"length":ITERATE_KEY),Reflect.ownKeys(_)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(_=!1){super(!0,_)}set(_,T){return!0}deleteProperty(_,T){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=A=>A,getProto$1=A=>Reflect.getPrototypeOf(A);function createIterableMethod(A,_,T){return function(...E){const C=this.__v_raw,P=toRaw(C),I=isMap(P),F=A==="entries"||A===Symbol.iterator&&I,R=A==="keys"&&I,B=C[A](...E),O=T?toShallow:_?toReadonly:toReactive;return!_&&track(P,"iterate",R?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:V,done:L}=B.next();return L?{value:V,done:L}:{value:F?[O(V[0]),O(V[1])]:O(V),done:L}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(A){return function(..._){return A==="delete"?!1:A==="clear"?void 0:this}}function createInstrumentations(A,_){const T={get(C){const P=this.__v_raw,I=toRaw(P),F=toRaw(C);A||(hasChanged(C,F)&&track(I,"get",C),track(I,"get",F));const{has:R}=getProto$1(I),B=_?toShallow:A?toReadonly:toReactive;if(R.call(I,C))return B(P.get(C));if(R.call(I,F))return B(P.get(F));P!==I&&P.get(C)},get size(){const C=this.__v_raw;return!A&&track(toRaw(C),"iterate",ITERATE_KEY),Reflect.get(C,"size",C)},has(C){const P=this.__v_raw,I=toRaw(P),F=toRaw(C);return A||(hasChanged(C,F)&&track(I,"has",C),track(I,"has",F)),C===F?P.has(C):P.has(C)||P.has(F)},forEach(C,P){const I=this,F=I.__v_raw,R=toRaw(F),B=_?toShallow:A?toReadonly:toReactive;return!A&&track(R,"iterate",ITERATE_KEY),F.forEach((O,V)=>C.call(P,B(O),B(V),I))}};return extend(T,A?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(C){!_&&!isShallow(C)&&!isReadonly(C)&&(C=toRaw(C));const P=toRaw(this);return getProto$1(P).has.call(P,C)||(P.add(C),trigger(P,"add",C,C)),this},set(C,P){!_&&!isShallow(P)&&!isReadonly(P)&&(P=toRaw(P));const I=toRaw(this),{has:F,get:R}=getProto$1(I);let B=F.call(I,C);B||(C=toRaw(C),B=F.call(I,C));const O=R.call(I,C);return I.set(C,P),B?hasChanged(P,O)&&trigger(I,"set",C,P):trigger(I,"add",C,P),this},delete(C){const P=toRaw(this),{has:I,get:F}=getProto$1(P);let R=I.call(P,C);R||(C=toRaw(C),R=I.call(P,C)),F&&F.call(P,C);const B=P.delete(C);return R&&trigger(P,"delete",C,void 0),B},clear(){const C=toRaw(this),P=C.size!==0,I=C.clear();return P&&trigger(C,"clear",void 0,void 0),I}}),["keys","values","entries",Symbol.iterator].forEach(C=>{T[C]=createIterableMethod(C,A,_)}),T}function createInstrumentationGetter(A,_){const T=createInstrumentations(A,_);return(E,C,P)=>C==="__v_isReactive"?!A:C==="__v_isReadonly"?A:C==="__v_raw"?E:Reflect.get(hasOwn(T,C)&&C in E?T:E,C,P)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(A){switch(A){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(A){return A.__v_skip||!Object.isExtensible(A)?0:targetTypeMap(toRawType(A))}function reactive(A){return isReadonly(A)?A:createReactiveObject(A,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(A){return createReactiveObject(A,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(A){return createReactiveObject(A,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(A){return createReactiveObject(A,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(A,_,T,E,C){if(!isObject(A)||A.__v_raw&&!(_&&A.__v_isReactive))return A;const P=C.get(A);if(P)return P;const I=getTargetType(A);if(I===0)return A;const F=new Proxy(A,I===2?E:T);return C.set(A,F),F}function isReactive(A){return isReadonly(A)?isReactive(A.__v_raw):!!(A&&A.__v_isReactive)}function isReadonly(A){return!!(A&&A.__v_isReadonly)}function isShallow(A){return!!(A&&A.__v_isShallow)}function isProxy(A){return A?!!A.__v_raw:!1}function toRaw(A){const _=A&&A.__v_raw;return _?toRaw(_):A}function markRaw(A){return!hasOwn(A,"__v_skip")&&Object.isExtensible(A)&&def(A,"__v_skip",!0),A}const toReactive=A=>isObject(A)?reactive(A):A,toReadonly=A=>isObject(A)?readonly(A):A;function isRef(A){return A?A.__v_isRef===!0:!1}function ref$1(A){return createRef(A,!1)}function shallowRef(A){return createRef(A,!0)}function createRef(A,_){return isRef(A)?A:new RefImpl(A,_)}class RefImpl{constructor(_,T){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=T?_:toRaw(_),this._value=T?_:toReactive(_),this.__v_isShallow=T}get value(){return this.dep.track(),this._value}set value(_){const T=this._rawValue,E=this.__v_isShallow||isShallow(_)||isReadonly(_);_=E?_:toRaw(_),hasChanged(_,T)&&(this._rawValue=_,this._value=E?_:toReactive(_),this.dep.trigger())}}function unref(A){return isRef(A)?A.value:A}const shallowUnwrapHandlers={get:(A,_,T)=>_==="__v_raw"?A:unref(Reflect.get(A,_,T)),set:(A,_,T,E)=>{const C=A[_];return isRef(C)&&!isRef(T)?(C.value=T,!0):Reflect.set(A,_,T,E)}};function proxyRefs(A){return isReactive(A)?A:new Proxy(A,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(_,T,E){this.fn=_,this.setter=T,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!T,this.isSSR=E}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const _=this.dep.track();return refreshComputed(this),_&&(_.version=this.dep.version),this._value}set value(_){this.setter&&this.setter(_)}}function computed$1(A,_,T=!1){let E,C;return isFunction(A)?E=A:(E=A.get,C=A.set),new ComputedRefImpl(E,C,T)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(A,_=!1,T=activeWatcher){if(T){let E=cleanupMap.get(T);E||cleanupMap.set(T,E=[]),E.push(A)}}function watch$1(A,_,T=EMPTY_OBJ){const{immediate:E,deep:C,once:P,scheduler:I,augmentJob:F,call:R}=T,B=q=>C?q:isShallow(q)||C===!1||C===0?traverse(q,1):traverse(q);let O,V,L,D,U=!1,G=!1;if(isRef(A)?(V=()=>A.value,U=isShallow(A)):isReactive(A)?(V=()=>B(A),U=!0):isArray$1(A)?(G=!0,U=A.some(q=>isReactive(q)||isShallow(q)),V=()=>A.map(q=>{if(isRef(q))return q.value;if(isReactive(q))return B(q);if(isFunction(q))return R?R(q,2):q()})):isFunction(A)?_?V=R?()=>R(A,2):A:V=()=>{if(L){pauseTracking();try{L()}finally{resetTracking()}}const q=activeWatcher;activeWatcher=O;try{return R?R(A,3,[D]):A(D)}finally{activeWatcher=q}}:V=NOOP$1,_&&C){const q=V,K=C===!0?1/0:C;V=()=>traverse(q(),K)}const X=getCurrentScope(),z=()=>{O.stop(),X&&X.active&&remove(X.effects,O)};if(P&&_){const q=_;_=(...K)=>{q(...K),z()}}let Y=G?new Array(A.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const W=q=>{if(!(!(O.flags&1)||!O.dirty&&!q))if(_){const K=O.run();if(C||U||(G?K.some((J,Z)=>hasChanged(J,Y[Z])):hasChanged(K,Y))){L&&L();const J=activeWatcher;activeWatcher=O;try{const Z=[K,Y===INITIAL_WATCHER_VALUE?void 0:G&&Y[0]===INITIAL_WATCHER_VALUE?[]:Y,D];R?R(_,3,Z):_(...Z),Y=K}finally{activeWatcher=J}}}else O.run()};return F&&F(W),O=new ReactiveEffect(V),O.scheduler=I?()=>I(W,!1):W,D=q=>onWatcherCleanup(q,!1,O),L=O.onStop=()=>{const q=cleanupMap.get(O);if(q){if(R)R(q,4);else for(const K of q)K();cleanupMap.delete(O)}},_?E?W(!0):Y=O.run():I?I(W.bind(null,!0),!0):O.run(),z.pause=O.pause.bind(O),z.resume=O.resume.bind(O),z.stop=z,z}function traverse(A,_=1/0,T){if(_<=0||!isObject(A)||A.__v_skip||(T=T||new Set,T.has(A)))return A;if(T.add(A),_--,isRef(A))traverse(A.value,_,T);else if(isArray$1(A))for(let E=0;E<A.length;E++)traverse(A[E],_,T);else if(isSet(A)||isMap(A))A.forEach(E=>{traverse(E,_,T)});else if(isPlainObject(A)){for(const E in A)traverse(A[E],_,T);for(const E of Object.getOwnPropertySymbols(A))Object.prototype.propertyIsEnumerable.call(A,E)&&traverse(A[E],_,T)}return A}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(A,..._){if(isWarning)return;isWarning=!0,pauseTracking();const T=stack.length?stack[stack.length-1].component:null,E=T&&T.appContext.config.warnHandler,C=getComponentTrace();if(E)callWithErrorHandling(E,T,11,[A+_.map(P=>{var I,F;return(F=(I=P.toString)==null?void 0:I.call(P))!=null?F:JSON.stringify(P)}).join(""),T&&T.proxy,C.map(({vnode:P})=>`at <${formatComponentName(T,P.type)}>`).join(`
`),C]);else{const P=[`[Vue warn]: ${A}`,..._];C.length&&P.push(`
`,...formatTrace(C)),console.warn(...P)}resetTracking(),isWarning=!1}function getComponentTrace(){let A=stack[stack.length-1];if(!A)return[];const _=[];for(;A;){const T=_[0];T&&T.vnode===A?T.recurseCount++:_.push({vnode:A,recurseCount:0});const E=A.component&&A.component.parent;A=E&&E.vnode}return _}function formatTrace(A){const _=[];return A.forEach((T,E)=>{_.push(...E===0?[]:[`
`],...formatTraceEntry(T))}),_}function formatTraceEntry({vnode:A,recurseCount:_}){const T=_>0?`... (${_} recursive calls)`:"",E=A.component?A.component.parent==null:!1,C=` at <${formatComponentName(A.component,A.type,E)}`,P=">"+T;return A.props?[C,...formatProps(A.props),P]:[C+P]}function formatProps(A){const _=[],T=Object.keys(A);return T.slice(0,3).forEach(E=>{_.push(...formatProp(E,A[E]))}),T.length>3&&_.push(" ..."),_}function formatProp(A,_,T){return isString(_)?(_=JSON.stringify(_),T?_:[`${A}=${_}`]):typeof _=="number"||typeof _=="boolean"||_==null?T?_:[`${A}=${_}`]:isRef(_)?(_=formatProp(A,toRaw(_.value),!0),T?_:[`${A}=Ref<`,_,">"]):isFunction(_)?[`${A}=fn${_.name?`<${_.name}>`:""}`]:(_=toRaw(_),T?_:[`${A}=`,_])}function callWithErrorHandling(A,_,T,E){try{return E?A(...E):A()}catch(C){handleError(C,_,T)}}function callWithAsyncErrorHandling(A,_,T,E){if(isFunction(A)){const C=callWithErrorHandling(A,_,T,E);return C&&isPromise(C)&&C.catch(P=>{handleError(P,_,T)}),C}if(isArray$1(A)){const C=[];for(let P=0;P<A.length;P++)C.push(callWithAsyncErrorHandling(A[P],_,T,E));return C}}function handleError(A,_,T,E=!0){const C=_?_.vnode:null,{errorHandler:P,throwUnhandledErrorInProduction:I}=_&&_.appContext.config||EMPTY_OBJ;if(_){let F=_.parent;const R=_.proxy,B=`https://vuejs.org/error-reference/#runtime-${T}`;for(;F;){const O=F.ec;if(O){for(let V=0;V<O.length;V++)if(O[V](A,R,B)===!1)return}F=F.parent}if(P){pauseTracking(),callWithErrorHandling(P,null,10,[A,R,B]),resetTracking();return}}logError(A,T,C,E,I)}function logError(A,_,T,E=!0,C=!1){if(C)throw A;console.error(A)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(A){const _=currentFlushPromise||resolvedPromise;return A?_.then(this?A.bind(this):A):_}function findInsertionIndex$1(A){let _=flushIndex+1,T=queue.length;for(;_<T;){const E=_+T>>>1,C=queue[E],P=getId(C);P<A||P===A&&C.flags&2?_=E+1:T=E}return _}function queueJob(A){if(!(A.flags&1)){const _=getId(A),T=queue[queue.length-1];!T||!(A.flags&2)&&_>=getId(T)?queue.push(A):queue.splice(findInsertionIndex$1(_),0,A),A.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(A){isArray$1(A)?pendingPostFlushCbs.push(...A):activePostFlushCbs&&A.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,A):A.flags&1||(pendingPostFlushCbs.push(A),A.flags|=1),queueFlush()}function flushPreFlushCbs(A,_,T=flushIndex+1){for(;T<queue.length;T++){const E=queue[T];if(E&&E.flags&2){if(A&&E.id!==A.uid)continue;queue.splice(T,1),T--,E.flags&4&&(E.flags&=-2),E(),E.flags&4||(E.flags&=-2)}}}function flushPostFlushCbs(A){if(pendingPostFlushCbs.length){const _=[...new Set(pendingPostFlushCbs)].sort((T,E)=>getId(T)-getId(E));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(..._);return}for(activePostFlushCbs=_,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const T=activePostFlushCbs[postFlushIndex];T.flags&4&&(T.flags&=-2),T.flags&8||T(),T.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=A=>A.id==null?A.flags&2?-1:1/0:A.id;function flushJobs(A){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const _=queue[flushIndex];_&&!(_.flags&8)&&(_.flags&4&&(_.flags&=-2),callWithErrorHandling(_,_.i,_.i?15:14),_.flags&4||(_.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const _=queue[flushIndex];_&&(_.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(A){const _=currentRenderingInstance;return currentRenderingInstance=A,currentScopeId=A&&A.type.__scopeId||null,_}function withCtx(A,_=currentRenderingInstance,T){if(!_||A._n)return A;const E=(...C)=>{E._d&&setBlockTracking(-1);const P=setCurrentRenderingInstance(_);let I;try{I=A(...C)}finally{setCurrentRenderingInstance(P),E._d&&setBlockTracking(1)}return I};return E._n=!0,E._c=!0,E._d=!0,E}function invokeDirectiveHook(A,_,T,E){const C=A.dirs,P=_&&_.dirs;for(let I=0;I<C.length;I++){const F=C[I];P&&(F.oldValue=P[I].value);let R=F.dir[E];R&&(pauseTracking(),callWithAsyncErrorHandling(R,T,8,[A.el,F,A,_]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=A=>A.__isTeleport;function setTransitionHooks(A,_){A.shapeFlag&6&&A.component?(A.transition=_,setTransitionHooks(A.component.subTree,_)):A.shapeFlag&128?(A.ssContent.transition=_.clone(A.ssContent),A.ssFallback.transition=_.clone(A.ssFallback)):A.transition=_}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(A,_){return isFunction(A)?extend({name:A.name},_,{setup:A}):A}function markAsyncBoundary(A){A.ids=[A.ids[0]+A.ids[2]+++"-",0,0]}function setRef(A,_,T,E,C=!1){if(isArray$1(A)){A.forEach((U,G)=>setRef(U,_&&(isArray$1(_)?_[G]:_),T,E,C));return}if(isAsyncWrapper(E)&&!C){E.shapeFlag&512&&E.type.__asyncResolved&&E.component.subTree.component&&setRef(A,_,T,E.component.subTree);return}const P=E.shapeFlag&4?getComponentPublicInstance(E.component):E.el,I=C?null:P,{i:F,r:R}=A,B=_&&_.r,O=F.refs===EMPTY_OBJ?F.refs={}:F.refs,V=F.setupState,L=toRaw(V),D=V===EMPTY_OBJ?()=>!1:U=>hasOwn(L,U);if(B!=null&&B!==R&&(isString(B)?(O[B]=null,D(B)&&(V[B]=null)):isRef(B)&&(B.value=null)),isFunction(R))callWithErrorHandling(R,F,12,[I,O]);else{const U=isString(R),G=isRef(R);if(U||G){const X=()=>{if(A.f){const z=U?D(R)?V[R]:O[R]:R.value;C?isArray$1(z)&&remove(z,P):isArray$1(z)?z.includes(P)||z.push(P):U?(O[R]=[P],D(R)&&(V[R]=O[R])):(R.value=[P],A.k&&(O[A.k]=R.value))}else U?(O[R]=I,D(R)&&(V[R]=I)):G&&(R.value=I,A.k&&(O[A.k]=I))};I?(X.id=-1,queuePostRenderEffect(X,T)):X()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=A=>!!A.type.__asyncLoader,isKeepAlive=A=>A.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(A,{slots:_}){const T=getCurrentInstance(),E=T.ctx;if(!E.renderer)return()=>{const Y=_.default&&_.default();return Y&&Y.length===1?Y[0]:Y};const C=new Map,P=new Set;let I=null;const F=T.suspense,{renderer:{p:R,m:B,um:O,o:{createElement:V}}}=E,L=V("div");E.activate=(Y,W,q,K,J)=>{const Z=Y.component;B(Y,W,q,0,F),R(Z.vnode,Y,W,q,Z,F,K,Y.slotScopeIds,J),queuePostRenderEffect(()=>{Z.isDeactivated=!1,Z.a&&invokeArrayFns(Z.a);const se=Y.props&&Y.props.onVnodeMounted;se&&invokeVNodeHook(se,Z.parent,Y)},F)},E.deactivate=Y=>{const W=Y.component;invalidateMount(W.m),invalidateMount(W.a),B(Y,L,null,1,F),queuePostRenderEffect(()=>{W.da&&invokeArrayFns(W.da);const q=Y.props&&Y.props.onVnodeUnmounted;q&&invokeVNodeHook(q,W.parent,Y),W.isDeactivated=!0},F)};function D(Y){resetShapeFlag(Y),O(Y,T,F,!0)}function U(Y){C.forEach((W,q)=>{const K=getComponentName(W.type);K&&!Y(K)&&G(q)})}function G(Y){const W=C.get(Y);W&&(!I||!isSameVNodeType(W,I))?D(W):I&&resetShapeFlag(I),C.delete(Y),P.delete(Y)}watch(()=>[A.include,A.exclude],([Y,W])=>{Y&&U(q=>matches(Y,q)),W&&U(q=>!matches(W,q))},{flush:"post",deep:!0});let X=null;const z=()=>{X!=null&&(isSuspense(T.subTree.type)?queuePostRenderEffect(()=>{C.set(X,getInnerChild(T.subTree))},T.subTree.suspense):C.set(X,getInnerChild(T.subTree)))};return onMounted(z),onUpdated(z),onBeforeUnmount(()=>{C.forEach(Y=>{const{subTree:W,suspense:q}=T,K=getInnerChild(W);if(Y.type===K.type&&Y.key===K.key){resetShapeFlag(K);const J=K.component.da;J&&queuePostRenderEffect(J,q);return}D(Y)})}),()=>{if(X=null,!_.default)return I=null;const Y=_.default(),W=Y[0];if(Y.length>1)return I=null,Y;if(!isVNode(W)||!(W.shapeFlag&4)&&!(W.shapeFlag&128))return I=null,W;let q=getInnerChild(W);if(q.type===Comment)return I=null,q;const K=q.type,J=getComponentName(isAsyncWrapper(q)?q.type.__asyncResolved||{}:K),{include:Z,exclude:se,max:ae}=A;if(Z&&(!J||!matches(Z,J))||se&&J&&matches(se,J))return q.shapeFlag&=-257,I=q,W;const ue=q.key==null?K:q.key,ce=C.get(ue);return q.el&&(q=cloneVNode(q),W.shapeFlag&128&&(W.ssContent=q)),X=ue,ce?(q.el=ce.el,q.component=ce.component,q.transition&&setTransitionHooks(q,q.transition),q.shapeFlag|=512,P.delete(ue),P.add(ue)):(P.add(ue),ae&&P.size>parseInt(ae,10)&&G(P.values().next().value)),q.shapeFlag|=256,I=q,isSuspense(W.type)?W:q}}},KeepAlive=KeepAliveImpl;function matches(A,_){return isArray$1(A)?A.some(T=>matches(T,_)):isString(A)?A.split(",").includes(_):isRegExp(A)?(A.lastIndex=0,A.test(_)):!1}function onActivated(A,_){registerKeepAliveHook(A,"a",_)}function onDeactivated(A,_){registerKeepAliveHook(A,"da",_)}function registerKeepAliveHook(A,_,T=currentInstance){const E=A.__wdc||(A.__wdc=()=>{let C=T;for(;C;){if(C.isDeactivated)return;C=C.parent}return A()});if(injectHook(_,E,T),T){let C=T.parent;for(;C&&C.parent;)isKeepAlive(C.parent.vnode)&&injectToKeepAliveRoot(E,_,T,C),C=C.parent}}function injectToKeepAliveRoot(A,_,T,E){const C=injectHook(_,A,E,!0);onUnmounted(()=>{remove(E[_],C)},T)}function resetShapeFlag(A){A.shapeFlag&=-257,A.shapeFlag&=-513}function getInnerChild(A){return A.shapeFlag&128?A.ssContent:A}function injectHook(A,_,T=currentInstance,E=!1){if(T){const C=T[A]||(T[A]=[]),P=_.__weh||(_.__weh=(...I)=>{pauseTracking();const F=setCurrentInstance(T),R=callWithAsyncErrorHandling(_,T,A,I);return F(),resetTracking(),R});return E?C.unshift(P):C.push(P),P}}const createHook=A=>(_,T=currentInstance)=>{(!isInSSRComponentSetup||A==="sp")&&injectHook(A,(...E)=>_(...E),T)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(A,_=currentInstance){injectHook("ec",A,_)}const COMPONENTS="components";function resolveComponent(A,_){return resolveAsset(COMPONENTS,A,!0,_)||A}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveAsset(A,_,T=!0,E=!1){const C=currentRenderingInstance||currentInstance;if(C){const P=C.type;{const F=getComponentName(P,!1);if(F&&(F===_||F===camelize(_)||F===capitalize(camelize(_))))return P}const I=resolve(C[A]||P[A],_)||resolve(C.appContext[A],_);return!I&&E?P:I}}function resolve(A,_){return A&&(A[_]||A[camelize(_)]||A[capitalize(camelize(_))])}function renderList(A,_,T,E){let C;const P=T,I=isArray$1(A);if(I||isString(A)){const F=I&&isReactive(A);let R=!1;F&&(R=!isShallow(A),A=shallowReadArray(A)),C=new Array(A.length);for(let B=0,O=A.length;B<O;B++)C[B]=_(R?toReactive(A[B]):A[B],B,void 0,P)}else if(typeof A=="number"){C=new Array(A);for(let F=0;F<A;F++)C[F]=_(F+1,F,void 0,P)}else if(isObject(A))if(A[Symbol.iterator])C=Array.from(A,(F,R)=>_(F,R,void 0,P));else{const F=Object.keys(A);C=new Array(F.length);for(let R=0,B=F.length;R<B;R++){const O=F[R];C[R]=_(A[O],O,R,P)}}else C=[];return C}const getPublicInstance=A=>A?isStatefulComponent(A)?getComponentPublicInstance(A):getPublicInstance(A.parent):null,publicPropertiesMap=extend(Object.create(null),{$:A=>A,$el:A=>A.vnode.el,$data:A=>A.data,$props:A=>A.props,$attrs:A=>A.attrs,$slots:A=>A.slots,$refs:A=>A.refs,$parent:A=>getPublicInstance(A.parent),$root:A=>getPublicInstance(A.root),$host:A=>A.ce,$emit:A=>A.emit,$options:A=>resolveMergedOptions(A),$forceUpdate:A=>A.f||(A.f=()=>{queueJob(A.update)}),$nextTick:A=>A.n||(A.n=nextTick.bind(A.proxy)),$watch:A=>instanceWatch.bind(A)}),hasSetupBinding=(A,_)=>A!==EMPTY_OBJ&&!A.__isScriptSetup&&hasOwn(A,_),PublicInstanceProxyHandlers={get({_:A},_){if(_==="__v_skip")return!0;const{ctx:T,setupState:E,data:C,props:P,accessCache:I,type:F,appContext:R}=A;let B;if(_[0]!=="$"){const D=I[_];if(D!==void 0)switch(D){case 1:return E[_];case 2:return C[_];case 4:return T[_];case 3:return P[_]}else{if(hasSetupBinding(E,_))return I[_]=1,E[_];if(C!==EMPTY_OBJ&&hasOwn(C,_))return I[_]=2,C[_];if((B=A.propsOptions[0])&&hasOwn(B,_))return I[_]=3,P[_];if(T!==EMPTY_OBJ&&hasOwn(T,_))return I[_]=4,T[_];shouldCacheAccess&&(I[_]=0)}}const O=publicPropertiesMap[_];let V,L;if(O)return _==="$attrs"&&track(A.attrs,"get",""),O(A);if((V=F.__cssModules)&&(V=V[_]))return V;if(T!==EMPTY_OBJ&&hasOwn(T,_))return I[_]=4,T[_];if(L=R.config.globalProperties,hasOwn(L,_))return L[_]},set({_:A},_,T){const{data:E,setupState:C,ctx:P}=A;return hasSetupBinding(C,_)?(C[_]=T,!0):E!==EMPTY_OBJ&&hasOwn(E,_)?(E[_]=T,!0):hasOwn(A.props,_)||_[0]==="$"&&_.slice(1)in A?!1:(P[_]=T,!0)},has({_:{data:A,setupState:_,accessCache:T,ctx:E,appContext:C,propsOptions:P}},I){let F;return!!T[I]||A!==EMPTY_OBJ&&hasOwn(A,I)||hasSetupBinding(_,I)||(F=P[0])&&hasOwn(F,I)||hasOwn(E,I)||hasOwn(publicPropertiesMap,I)||hasOwn(C.config.globalProperties,I)},defineProperty(A,_,T){return T.get!=null?A._.accessCache[_]=0:hasOwn(T,"value")&&this.set(A,_,T.value,null),Reflect.defineProperty(A,_,T)}};function normalizePropsOrEmits(A){return isArray$1(A)?A.reduce((_,T)=>(_[T]=null,_),{}):A}let shouldCacheAccess=!0;function applyOptions(A){const _=resolveMergedOptions(A),T=A.proxy,E=A.ctx;shouldCacheAccess=!1,_.beforeCreate&&callHook(_.beforeCreate,A,"bc");const{data:C,computed:P,methods:I,watch:F,provide:R,inject:B,created:O,beforeMount:V,mounted:L,beforeUpdate:D,updated:U,activated:G,deactivated:X,beforeDestroy:z,beforeUnmount:Y,destroyed:W,unmounted:q,render:K,renderTracked:J,renderTriggered:Z,errorCaptured:se,serverPrefetch:ae,expose:ue,inheritAttrs:ce,components:he,directives:pe,filters:ye}=_;if(B&&resolveInjections(B,E,null),I)for(const re in I){const Q=I[re];isFunction(Q)&&(E[re]=Q.bind(T))}if(C){const re=C.call(T,T);isObject(re)&&(A.data=reactive(re))}if(shouldCacheAccess=!0,P)for(const re in P){const Q=P[re],te=isFunction(Q)?Q.bind(T,T):isFunction(Q.get)?Q.get.bind(T,T):NOOP$1,ne=!isFunction(Q)&&isFunction(Q.set)?Q.set.bind(T):NOOP$1,ie=computed({get:te,set:ne});Object.defineProperty(E,re,{enumerable:!0,configurable:!0,get:()=>ie.value,set:fe=>ie.value=fe})}if(F)for(const re in F)createWatcher(F[re],E,T,re);if(R){const re=isFunction(R)?R.call(T):R;Reflect.ownKeys(re).forEach(Q=>{provide(Q,re[Q])})}O&&callHook(O,A,"c");function ee(re,Q){isArray$1(Q)?Q.forEach(te=>re(te.bind(T))):Q&&re(Q.bind(T))}if(ee(onBeforeMount,V),ee(onMounted,L),ee(onBeforeUpdate,D),ee(onUpdated,U),ee(onActivated,G),ee(onDeactivated,X),ee(onErrorCaptured,se),ee(onRenderTracked,J),ee(onRenderTriggered,Z),ee(onBeforeUnmount,Y),ee(onUnmounted,q),ee(onServerPrefetch,ae),isArray$1(ue))if(ue.length){const re=A.exposed||(A.exposed={});ue.forEach(Q=>{Object.defineProperty(re,Q,{get:()=>T[Q],set:te=>T[Q]=te})})}else A.exposed||(A.exposed={});K&&A.render===NOOP$1&&(A.render=K),ce!=null&&(A.inheritAttrs=ce),he&&(A.components=he),pe&&(A.directives=pe),ae&&markAsyncBoundary(A)}function resolveInjections(A,_,T=NOOP$1){isArray$1(A)&&(A=normalizeInject(A));for(const E in A){const C=A[E];let P;isObject(C)?"default"in C?P=inject(C.from||E,C.default,!0):P=inject(C.from||E):P=inject(C),isRef(P)?Object.defineProperty(_,E,{enumerable:!0,configurable:!0,get:()=>P.value,set:I=>P.value=I}):_[E]=P}}function callHook(A,_,T){callWithAsyncErrorHandling(isArray$1(A)?A.map(E=>E.bind(_.proxy)):A.bind(_.proxy),_,T)}function createWatcher(A,_,T,E){let C=E.includes(".")?createPathGetter(T,E):()=>T[E];if(isString(A)){const P=_[A];isFunction(P)&&watch(C,P)}else if(isFunction(A))watch(C,A.bind(T));else if(isObject(A))if(isArray$1(A))A.forEach(P=>createWatcher(P,_,T,E));else{const P=isFunction(A.handler)?A.handler.bind(T):_[A.handler];isFunction(P)&&watch(C,P,A)}}function resolveMergedOptions(A){const _=A.type,{mixins:T,extends:E}=_,{mixins:C,optionsCache:P,config:{optionMergeStrategies:I}}=A.appContext,F=P.get(_);let R;return F?R=F:!C.length&&!T&&!E?R=_:(R={},C.length&&C.forEach(B=>mergeOptions$1(R,B,I,!0)),mergeOptions$1(R,_,I)),isObject(_)&&P.set(_,R),R}function mergeOptions$1(A,_,T,E=!1){const{mixins:C,extends:P}=_;P&&mergeOptions$1(A,P,T,!0),C&&C.forEach(I=>mergeOptions$1(A,I,T,!0));for(const I in _)if(!(E&&I==="expose")){const F=internalOptionMergeStrats[I]||T&&T[I];A[I]=F?F(A[I],_[I]):_[I]}return A}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(A,_){return _?A?function(){return extend(isFunction(A)?A.call(this,this):A,isFunction(_)?_.call(this,this):_)}:_:A}function mergeInject(A,_){return mergeObjectOptions(normalizeInject(A),normalizeInject(_))}function normalizeInject(A){if(isArray$1(A)){const _={};for(let T=0;T<A.length;T++)_[A[T]]=A[T];return _}return A}function mergeAsArray(A,_){return A?[...new Set([].concat(A,_))]:_}function mergeObjectOptions(A,_){return A?extend(Object.create(null),A,_):_}function mergeEmitsOrPropsOptions(A,_){return A?isArray$1(A)&&isArray$1(_)?[...new Set([...A,..._])]:extend(Object.create(null),normalizePropsOrEmits(A),normalizePropsOrEmits(_??{})):_}function mergeWatchOptions(A,_){if(!A)return _;if(!_)return A;const T=extend(Object.create(null),A);for(const E in _)T[E]=mergeAsArray(A[E],_[E]);return T}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1$1=0;function createAppAPI(A,_){return function(E,C=null){isFunction(E)||(E=extend({},E)),C!=null&&!isObject(C)&&(C=null);const P=createAppContext(),I=new WeakSet,F=[];let R=!1;const B=P.app={_uid:uid$1$1++,_component:E,_props:C,_container:null,_context:P,_instance:null,version,get config(){return P.config},set config(O){},use(O,...V){return I.has(O)||(O&&isFunction(O.install)?(I.add(O),O.install(B,...V)):isFunction(O)&&(I.add(O),O(B,...V))),B},mixin(O){return P.mixins.includes(O)||P.mixins.push(O),B},component(O,V){return V?(P.components[O]=V,B):P.components[O]},directive(O,V){return V?(P.directives[O]=V,B):P.directives[O]},mount(O,V,L){if(!R){const D=B._ceVNode||createVNode(E,C);return D.appContext=P,L===!0?L="svg":L===!1&&(L=void 0),A(D,O,L),R=!0,B._container=O,O.__vue_app__=B,getComponentPublicInstance(D.component)}},onUnmount(O){F.push(O)},unmount(){R&&(callWithAsyncErrorHandling(F,B._instance,16),A(null,B._container),delete B._container.__vue_app__)},provide(O,V){return P.provides[O]=V,B},runWithContext(O){const V=currentApp;currentApp=B;try{return O()}finally{currentApp=V}}};return B}}let currentApp=null;function provide(A,_){if(currentInstance){let T=currentInstance.provides;const E=currentInstance.parent&&currentInstance.parent.provides;E===T&&(T=currentInstance.provides=Object.create(E)),T[A]=_}}function inject(A,_,T=!1){const E=currentInstance||currentRenderingInstance;if(E||currentApp){const C=currentApp?currentApp._context.provides:E?E.parent==null?E.vnode.appContext&&E.vnode.appContext.provides:E.parent.provides:void 0;if(C&&A in C)return C[A];if(arguments.length>1)return T&&isFunction(_)?_.call(E&&E.proxy):_}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=A=>Object.getPrototypeOf(A)===internalObjectProto;function initProps(A,_,T,E=!1){const C={},P=createInternalObject();A.propsDefaults=Object.create(null),setFullProps(A,_,C,P);for(const I in A.propsOptions[0])I in C||(C[I]=void 0);T?A.props=E?C:shallowReactive(C):A.type.props?A.props=C:A.props=P,A.attrs=P}function updateProps(A,_,T,E){const{props:C,attrs:P,vnode:{patchFlag:I}}=A,F=toRaw(C),[R]=A.propsOptions;let B=!1;if((E||I>0)&&!(I&16)){if(I&8){const O=A.vnode.dynamicProps;for(let V=0;V<O.length;V++){let L=O[V];if(isEmitListener(A.emitsOptions,L))continue;const D=_[L];if(R)if(hasOwn(P,L))D!==P[L]&&(P[L]=D,B=!0);else{const U=camelize(L);C[U]=resolvePropValue(R,F,U,D,A,!1)}else D!==P[L]&&(P[L]=D,B=!0)}}}else{setFullProps(A,_,C,P)&&(B=!0);let O;for(const V in F)(!_||!hasOwn(_,V)&&((O=hyphenate(V))===V||!hasOwn(_,O)))&&(R?T&&(T[V]!==void 0||T[O]!==void 0)&&(C[V]=resolvePropValue(R,F,V,void 0,A,!0)):delete C[V]);if(P!==F)for(const V in P)(!_||!hasOwn(_,V))&&(delete P[V],B=!0)}B&&trigger(A.attrs,"set","")}function setFullProps(A,_,T,E){const[C,P]=A.propsOptions;let I=!1,F;if(_)for(let R in _){if(isReservedProp(R))continue;const B=_[R];let O;C&&hasOwn(C,O=camelize(R))?!P||!P.includes(O)?T[O]=B:(F||(F={}))[O]=B:isEmitListener(A.emitsOptions,R)||(!(R in E)||B!==E[R])&&(E[R]=B,I=!0)}if(P){const R=toRaw(T),B=F||EMPTY_OBJ;for(let O=0;O<P.length;O++){const V=P[O];T[V]=resolvePropValue(C,R,V,B[V],A,!hasOwn(B,V))}}return I}function resolvePropValue(A,_,T,E,C,P){const I=A[T];if(I!=null){const F=hasOwn(I,"default");if(F&&E===void 0){const R=I.default;if(I.type!==Function&&!I.skipFactory&&isFunction(R)){const{propsDefaults:B}=C;if(T in B)E=B[T];else{const O=setCurrentInstance(C);E=B[T]=R.call(null,_),O()}}else E=R;C.ce&&C.ce._setProp(T,E)}I[0]&&(P&&!F?E=!1:I[1]&&(E===""||E===hyphenate(T))&&(E=!0))}return E}const mixinPropsCache=new WeakMap;function normalizePropsOptions(A,_,T=!1){const E=T?mixinPropsCache:_.propsCache,C=E.get(A);if(C)return C;const P=A.props,I={},F=[];let R=!1;if(!isFunction(A)){const O=V=>{R=!0;const[L,D]=normalizePropsOptions(V,_,!0);extend(I,L),D&&F.push(...D)};!T&&_.mixins.length&&_.mixins.forEach(O),A.extends&&O(A.extends),A.mixins&&A.mixins.forEach(O)}if(!P&&!R)return isObject(A)&&E.set(A,EMPTY_ARR),EMPTY_ARR;if(isArray$1(P))for(let O=0;O<P.length;O++){const V=camelize(P[O]);validatePropName(V)&&(I[V]=EMPTY_OBJ)}else if(P)for(const O in P){const V=camelize(O);if(validatePropName(V)){const L=P[O],D=I[V]=isArray$1(L)||isFunction(L)?{type:L}:extend({},L),U=D.type;let G=!1,X=!0;if(isArray$1(U))for(let z=0;z<U.length;++z){const Y=U[z],W=isFunction(Y)&&Y.name;if(W==="Boolean"){G=!0;break}else W==="String"&&(X=!1)}else G=isFunction(U)&&U.name==="Boolean";D[0]=G,D[1]=X,(G||hasOwn(D,"default"))&&F.push(V)}}const B=[I,F];return isObject(A)&&E.set(A,B),B}function validatePropName(A){return A[0]!=="$"&&!isReservedProp(A)}const isInternalKey=A=>A[0]==="_"||A==="$stable",normalizeSlotValue=A=>isArray$1(A)?A.map(normalizeVNode):[normalizeVNode(A)],normalizeSlot$1=(A,_,T)=>{if(_._n)return _;const E=withCtx((...C)=>normalizeSlotValue(_(...C)),T);return E._c=!1,E},normalizeObjectSlots=(A,_,T)=>{const E=A._ctx;for(const C in A){if(isInternalKey(C))continue;const P=A[C];if(isFunction(P))_[C]=normalizeSlot$1(C,P,E);else if(P!=null){const I=normalizeSlotValue(P);_[C]=()=>I}}},normalizeVNodeSlots=(A,_)=>{const T=normalizeSlotValue(_);A.slots.default=()=>T},assignSlots=(A,_,T)=>{for(const E in _)(T||E!=="_")&&(A[E]=_[E])},initSlots=(A,_,T)=>{const E=A.slots=createInternalObject();if(A.vnode.shapeFlag&32){const C=_._;C?(assignSlots(E,_,T),T&&def(E,"_",C,!0)):normalizeObjectSlots(_,E)}else _&&normalizeVNodeSlots(A,_)},updateSlots=(A,_,T)=>{const{vnode:E,slots:C}=A;let P=!0,I=EMPTY_OBJ;if(E.shapeFlag&32){const F=_._;F?T&&F===1?P=!1:assignSlots(C,_,T):(P=!_.$stable,normalizeObjectSlots(_,C)),I=_}else _&&(normalizeVNodeSlots(A,_),I={default:1});if(P)for(const F in C)!isInternalKey(F)&&I[F]==null&&delete C[F]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(A){return baseCreateRenderer(A)}function baseCreateRenderer(A,_){const T=getGlobalThis();T.__VUE__=!0;const{insert:E,remove:C,patchProp:P,createElement:I,createText:F,createComment:R,setText:B,setElementText:O,parentNode:V,nextSibling:L,setScopeId:D=NOOP$1,insertStaticContent:U}=A,G=(oe,le,de,ve=null,xe=null,Ce=null,Fe=void 0,ke=null,Be=!!le.dynamicChildren)=>{if(oe===le)return;oe&&!isSameVNodeType(oe,le)&&(ve=ge(oe),fe(oe,xe,Ce,!0),oe=null),le.patchFlag===-2&&(Be=!1,le.dynamicChildren=null);const{type:Re,ref:Le,shapeFlag:$e}=le;switch(Re){case Text:X(oe,le,de,ve);break;case Comment:z(oe,le,de,ve);break;case Static:oe==null&&Y(le,de,ve,Fe);break;case Fragment:he(oe,le,de,ve,xe,Ce,Fe,ke,Be);break;default:$e&1?K(oe,le,de,ve,xe,Ce,Fe,ke,Be):$e&6?pe(oe,le,de,ve,xe,Ce,Fe,ke,Be):($e&64||$e&128)&&Re.process(oe,le,de,ve,xe,Ce,Fe,ke,Be,Ae)}Le!=null&&xe&&setRef(Le,oe&&oe.ref,Ce,le||oe,!le)},X=(oe,le,de,ve)=>{if(oe==null)E(le.el=F(le.children),de,ve);else{const xe=le.el=oe.el;le.children!==oe.children&&B(xe,le.children)}},z=(oe,le,de,ve)=>{oe==null?E(le.el=R(le.children||""),de,ve):le.el=oe.el},Y=(oe,le,de,ve)=>{[oe.el,oe.anchor]=U(oe.children,le,de,ve,oe.el,oe.anchor)},W=({el:oe,anchor:le},de,ve)=>{let xe;for(;oe&&oe!==le;)xe=L(oe),E(oe,de,ve),oe=xe;E(le,de,ve)},q=({el:oe,anchor:le})=>{let de;for(;oe&&oe!==le;)de=L(oe),C(oe),oe=de;C(le)},K=(oe,le,de,ve,xe,Ce,Fe,ke,Be)=>{le.type==="svg"?Fe="svg":le.type==="math"&&(Fe="mathml"),oe==null?J(le,de,ve,xe,Ce,Fe,ke,Be):ae(oe,le,xe,Ce,Fe,ke,Be)},J=(oe,le,de,ve,xe,Ce,Fe,ke)=>{let Be,Re;const{props:Le,shapeFlag:$e,transition:Oe,dirs:Ve}=oe;if(Be=oe.el=I(oe.type,Ce,Le&&Le.is,Le),$e&8?O(Be,oe.children):$e&16&&se(oe.children,Be,null,ve,xe,resolveChildrenNamespace(oe,Ce),Fe,ke),Ve&&invokeDirectiveHook(oe,null,ve,"created"),Z(Be,oe,oe.scopeId,Fe,ve),Le){for(const Ge in Le)Ge!=="value"&&!isReservedProp(Ge)&&P(Be,Ge,null,Le[Ge],Ce,ve);"value"in Le&&P(Be,"value",null,Le.value,Ce),(Re=Le.onVnodeBeforeMount)&&invokeVNodeHook(Re,ve,oe)}Ve&&invokeDirectiveHook(oe,null,ve,"beforeMount");const De=needTransition(xe,Oe);De&&Oe.beforeEnter(Be),E(Be,le,de),((Re=Le&&Le.onVnodeMounted)||De||Ve)&&queuePostRenderEffect(()=>{Re&&invokeVNodeHook(Re,ve,oe),De&&Oe.enter(Be),Ve&&invokeDirectiveHook(oe,null,ve,"mounted")},xe)},Z=(oe,le,de,ve,xe)=>{if(de&&D(oe,de),ve)for(let Ce=0;Ce<ve.length;Ce++)D(oe,ve[Ce]);if(xe){let Ce=xe.subTree;if(le===Ce||isSuspense(Ce.type)&&(Ce.ssContent===le||Ce.ssFallback===le)){const Fe=xe.vnode;Z(oe,Fe,Fe.scopeId,Fe.slotScopeIds,xe.parent)}}},se=(oe,le,de,ve,xe,Ce,Fe,ke,Be=0)=>{for(let Re=Be;Re<oe.length;Re++){const Le=oe[Re]=ke?cloneIfMounted(oe[Re]):normalizeVNode(oe[Re]);G(null,Le,le,de,ve,xe,Ce,Fe,ke)}},ae=(oe,le,de,ve,xe,Ce,Fe)=>{const ke=le.el=oe.el;let{patchFlag:Be,dynamicChildren:Re,dirs:Le}=le;Be|=oe.patchFlag&16;const $e=oe.props||EMPTY_OBJ,Oe=le.props||EMPTY_OBJ;let Ve;if(de&&toggleRecurse(de,!1),(Ve=Oe.onVnodeBeforeUpdate)&&invokeVNodeHook(Ve,de,le,oe),Le&&invokeDirectiveHook(le,oe,de,"beforeUpdate"),de&&toggleRecurse(de,!0),($e.innerHTML&&Oe.innerHTML==null||$e.textContent&&Oe.textContent==null)&&O(ke,""),Re?ue(oe.dynamicChildren,Re,ke,de,ve,resolveChildrenNamespace(le,xe),Ce):Fe||Q(oe,le,ke,null,de,ve,resolveChildrenNamespace(le,xe),Ce,!1),Be>0){if(Be&16)ce(ke,$e,Oe,de,xe);else if(Be&2&&$e.class!==Oe.class&&P(ke,"class",null,Oe.class,xe),Be&4&&P(ke,"style",$e.style,Oe.style,xe),Be&8){const De=le.dynamicProps;for(let Ge=0;Ge<De.length;Ge++){const He=De[Ge],We=$e[He],je=Oe[He];(je!==We||He==="value")&&P(ke,He,We,je,xe,de)}}Be&1&&oe.children!==le.children&&O(ke,le.children)}else!Fe&&Re==null&&ce(ke,$e,Oe,de,xe);((Ve=Oe.onVnodeUpdated)||Le)&&queuePostRenderEffect(()=>{Ve&&invokeVNodeHook(Ve,de,le,oe),Le&&invokeDirectiveHook(le,oe,de,"updated")},ve)},ue=(oe,le,de,ve,xe,Ce,Fe)=>{for(let ke=0;ke<le.length;ke++){const Be=oe[ke],Re=le[ke],Le=Be.el&&(Be.type===Fragment||!isSameVNodeType(Be,Re)||Be.shapeFlag&70)?V(Be.el):de;G(Be,Re,Le,null,ve,xe,Ce,Fe,!0)}},ce=(oe,le,de,ve,xe)=>{if(le!==de){if(le!==EMPTY_OBJ)for(const Ce in le)!isReservedProp(Ce)&&!(Ce in de)&&P(oe,Ce,le[Ce],null,xe,ve);for(const Ce in de){if(isReservedProp(Ce))continue;const Fe=de[Ce],ke=le[Ce];Fe!==ke&&Ce!=="value"&&P(oe,Ce,ke,Fe,xe,ve)}"value"in de&&P(oe,"value",le.value,de.value,xe)}},he=(oe,le,de,ve,xe,Ce,Fe,ke,Be)=>{const Re=le.el=oe?oe.el:F(""),Le=le.anchor=oe?oe.anchor:F("");let{patchFlag:$e,dynamicChildren:Oe,slotScopeIds:Ve}=le;Ve&&(ke=ke?ke.concat(Ve):Ve),oe==null?(E(Re,de,ve),E(Le,de,ve),se(le.children||[],de,Le,xe,Ce,Fe,ke,Be)):$e>0&&$e&64&&Oe&&oe.dynamicChildren?(ue(oe.dynamicChildren,Oe,de,xe,Ce,Fe,ke),(le.key!=null||xe&&le===xe.subTree)&&traverseStaticChildren(oe,le,!0)):Q(oe,le,de,Le,xe,Ce,Fe,ke,Be)},pe=(oe,le,de,ve,xe,Ce,Fe,ke,Be)=>{le.slotScopeIds=ke,oe==null?le.shapeFlag&512?xe.ctx.activate(le,de,ve,Fe,Be):ye(le,de,ve,xe,Ce,Fe,Be):_e(oe,le,Be)},ye=(oe,le,de,ve,xe,Ce,Fe)=>{const ke=oe.component=createComponentInstance(oe,ve,xe);if(isKeepAlive(oe)&&(ke.ctx.renderer=Ae),setupComponent(ke,!1,Fe),ke.asyncDep){if(xe&&xe.registerDep(ke,ee,Fe),!oe.el){const Be=ke.subTree=createVNode(Comment);z(null,Be,le,de)}}else ee(ke,oe,le,de,xe,Ce,Fe)},_e=(oe,le,de)=>{const ve=le.component=oe.component;if(shouldUpdateComponent(oe,le,de))if(ve.asyncDep&&!ve.asyncResolved){re(ve,le,de);return}else ve.next=le,ve.update();else le.el=oe.el,ve.vnode=le},ee=(oe,le,de,ve,xe,Ce,Fe)=>{const ke=()=>{if(oe.isMounted){let{next:$e,bu:Oe,u:Ve,parent:De,vnode:Ge}=oe;{const et=locateNonHydratedAsyncRoot(oe);if(et){$e&&($e.el=Ge.el,re(oe,$e,Fe)),et.asyncDep.then(()=>{oe.isUnmounted||ke()});return}}let He=$e,We;toggleRecurse(oe,!1),$e?($e.el=Ge.el,re(oe,$e,Fe)):$e=Ge,Oe&&invokeArrayFns(Oe),(We=$e.props&&$e.props.onVnodeBeforeUpdate)&&invokeVNodeHook(We,De,$e,Ge),toggleRecurse(oe,!0);const je=renderComponentRoot(oe),Ke=oe.subTree;oe.subTree=je,G(Ke,je,V(Ke.el),ge(Ke),oe,xe,Ce),$e.el=je.el,He===null&&updateHOCHostEl(oe,je.el),Ve&&queuePostRenderEffect(Ve,xe),(We=$e.props&&$e.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(We,De,$e,Ge),xe)}else{let $e;const{el:Oe,props:Ve}=le,{bm:De,m:Ge,parent:He,root:We,type:je}=oe,Ke=isAsyncWrapper(le);toggleRecurse(oe,!1),De&&invokeArrayFns(De),!Ke&&($e=Ve&&Ve.onVnodeBeforeMount)&&invokeVNodeHook($e,He,le),toggleRecurse(oe,!0);{We.ce&&We.ce._injectChildStyle(je);const et=oe.subTree=renderComponentRoot(oe);G(null,et,de,ve,oe,xe,Ce),le.el=et.el}if(Ge&&queuePostRenderEffect(Ge,xe),!Ke&&($e=Ve&&Ve.onVnodeMounted)){const et=le;queuePostRenderEffect(()=>invokeVNodeHook($e,He,et),xe)}(le.shapeFlag&256||He&&isAsyncWrapper(He.vnode)&&He.vnode.shapeFlag&256)&&oe.a&&queuePostRenderEffect(oe.a,xe),oe.isMounted=!0,le=de=ve=null}};oe.scope.on();const Be=oe.effect=new ReactiveEffect(ke);oe.scope.off();const Re=oe.update=Be.run.bind(Be),Le=oe.job=Be.runIfDirty.bind(Be);Le.i=oe,Le.id=oe.uid,Be.scheduler=()=>queueJob(Le),toggleRecurse(oe,!0),Re()},re=(oe,le,de)=>{le.component=oe;const ve=oe.vnode.props;oe.vnode=le,oe.next=null,updateProps(oe,le.props,ve,de),updateSlots(oe,le.children,de),pauseTracking(),flushPreFlushCbs(oe),resetTracking()},Q=(oe,le,de,ve,xe,Ce,Fe,ke,Be=!1)=>{const Re=oe&&oe.children,Le=oe?oe.shapeFlag:0,$e=le.children,{patchFlag:Oe,shapeFlag:Ve}=le;if(Oe>0){if(Oe&128){ne(Re,$e,de,ve,xe,Ce,Fe,ke,Be);return}else if(Oe&256){te(Re,$e,de,ve,xe,Ce,Fe,ke,Be);return}}Ve&8?(Le&16&&Me(Re,xe,Ce),$e!==Re&&O(de,$e)):Le&16?Ve&16?ne(Re,$e,de,ve,xe,Ce,Fe,ke,Be):Me(Re,xe,Ce,!0):(Le&8&&O(de,""),Ve&16&&se($e,de,ve,xe,Ce,Fe,ke,Be))},te=(oe,le,de,ve,xe,Ce,Fe,ke,Be)=>{oe=oe||EMPTY_ARR,le=le||EMPTY_ARR;const Re=oe.length,Le=le.length,$e=Math.min(Re,Le);let Oe;for(Oe=0;Oe<$e;Oe++){const Ve=le[Oe]=Be?cloneIfMounted(le[Oe]):normalizeVNode(le[Oe]);G(oe[Oe],Ve,de,null,xe,Ce,Fe,ke,Be)}Re>Le?Me(oe,xe,Ce,!0,!1,$e):se(le,de,ve,xe,Ce,Fe,ke,Be,$e)},ne=(oe,le,de,ve,xe,Ce,Fe,ke,Be)=>{let Re=0;const Le=le.length;let $e=oe.length-1,Oe=Le-1;for(;Re<=$e&&Re<=Oe;){const Ve=oe[Re],De=le[Re]=Be?cloneIfMounted(le[Re]):normalizeVNode(le[Re]);if(isSameVNodeType(Ve,De))G(Ve,De,de,null,xe,Ce,Fe,ke,Be);else break;Re++}for(;Re<=$e&&Re<=Oe;){const Ve=oe[$e],De=le[Oe]=Be?cloneIfMounted(le[Oe]):normalizeVNode(le[Oe]);if(isSameVNodeType(Ve,De))G(Ve,De,de,null,xe,Ce,Fe,ke,Be);else break;$e--,Oe--}if(Re>$e){if(Re<=Oe){const Ve=Oe+1,De=Ve<Le?le[Ve].el:ve;for(;Re<=Oe;)G(null,le[Re]=Be?cloneIfMounted(le[Re]):normalizeVNode(le[Re]),de,De,xe,Ce,Fe,ke,Be),Re++}}else if(Re>Oe)for(;Re<=$e;)fe(oe[Re],xe,Ce,!0),Re++;else{const Ve=Re,De=Re,Ge=new Map;for(Re=De;Re<=Oe;Re++){const qe=le[Re]=Be?cloneIfMounted(le[Re]):normalizeVNode(le[Re]);qe.key!=null&&Ge.set(qe.key,Re)}let He,We=0;const je=Oe-De+1;let Ke=!1,et=0;const ft=new Array(je);for(Re=0;Re<je;Re++)ft[Re]=0;for(Re=Ve;Re<=$e;Re++){const qe=oe[Re];if(We>=je){fe(qe,xe,Ce,!0);continue}let Te;if(qe.key!=null)Te=Ge.get(qe.key);else for(He=De;He<=Oe;He++)if(ft[He-De]===0&&isSameVNodeType(qe,le[He])){Te=He;break}Te===void 0?fe(qe,xe,Ce,!0):(ft[Te-De]=Re+1,Te>=et?et=Te:Ke=!0,G(qe,le[Te],de,null,xe,Ce,Fe,ke,Be),We++)}const mt=Ke?getSequence(ft):EMPTY_ARR;for(He=mt.length-1,Re=je-1;Re>=0;Re--){const qe=De+Re,Te=le[qe],we=qe+1<Le?le[qe+1].el:ve;ft[Re]===0?G(null,Te,de,we,xe,Ce,Fe,ke,Be):Ke&&(He<0||Re!==mt[He]?ie(Te,de,we,2):He--)}}},ie=(oe,le,de,ve,xe=null)=>{const{el:Ce,type:Fe,transition:ke,children:Be,shapeFlag:Re}=oe;if(Re&6){ie(oe.component.subTree,le,de,ve);return}if(Re&128){oe.suspense.move(le,de,ve);return}if(Re&64){Fe.move(oe,le,de,Ae);return}if(Fe===Fragment){E(Ce,le,de);for(let $e=0;$e<Be.length;$e++)ie(Be[$e],le,de,ve);E(oe.anchor,le,de);return}if(Fe===Static){W(oe,le,de);return}if(ve!==2&&Re&1&&ke)if(ve===0)ke.beforeEnter(Ce),E(Ce,le,de),queuePostRenderEffect(()=>ke.enter(Ce),xe);else{const{leave:$e,delayLeave:Oe,afterLeave:Ve}=ke,De=()=>E(Ce,le,de),Ge=()=>{$e(Ce,()=>{De(),Ve&&Ve()})};Oe?Oe(Ce,De,Ge):Ge()}else E(Ce,le,de)},fe=(oe,le,de,ve=!1,xe=!1)=>{const{type:Ce,props:Fe,ref:ke,children:Be,dynamicChildren:Re,shapeFlag:Le,patchFlag:$e,dirs:Oe,cacheIndex:Ve}=oe;if($e===-2&&(xe=!1),ke!=null&&setRef(ke,null,de,oe,!0),Ve!=null&&(le.renderCache[Ve]=void 0),Le&256){le.ctx.deactivate(oe);return}const De=Le&1&&Oe,Ge=!isAsyncWrapper(oe);let He;if(Ge&&(He=Fe&&Fe.onVnodeBeforeUnmount)&&invokeVNodeHook(He,le,oe),Le&6)Pe(oe.component,de,ve);else{if(Le&128){oe.suspense.unmount(de,ve);return}De&&invokeDirectiveHook(oe,null,le,"beforeUnmount"),Le&64?oe.type.remove(oe,le,de,Ae,ve):Re&&!Re.hasOnce&&(Ce!==Fragment||$e>0&&$e&64)?Me(Re,le,de,!1,!0):(Ce===Fragment&&$e&384||!xe&&Le&16)&&Me(Be,le,de),ve&&me(oe)}(Ge&&(He=Fe&&Fe.onVnodeUnmounted)||De)&&queuePostRenderEffect(()=>{He&&invokeVNodeHook(He,le,oe),De&&invokeDirectiveHook(oe,null,le,"unmounted")},de)},me=oe=>{const{type:le,el:de,anchor:ve,transition:xe}=oe;if(le===Fragment){be(de,ve);return}if(le===Static){q(oe);return}const Ce=()=>{C(de),xe&&!xe.persisted&&xe.afterLeave&&xe.afterLeave()};if(oe.shapeFlag&1&&xe&&!xe.persisted){const{leave:Fe,delayLeave:ke}=xe,Be=()=>Fe(de,Ce);ke?ke(oe.el,Ce,Be):Be()}else Ce()},be=(oe,le)=>{let de;for(;oe!==le;)de=L(oe),C(oe),oe=de;C(le)},Pe=(oe,le,de)=>{const{bum:ve,scope:xe,job:Ce,subTree:Fe,um:ke,m:Be,a:Re}=oe;invalidateMount(Be),invalidateMount(Re),ve&&invokeArrayFns(ve),xe.stop(),Ce&&(Ce.flags|=8,fe(Fe,oe,le,de)),ke&&queuePostRenderEffect(ke,le),queuePostRenderEffect(()=>{oe.isUnmounted=!0},le),le&&le.pendingBranch&&!le.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===le.pendingId&&(le.deps--,le.deps===0&&le.resolve())},Me=(oe,le,de,ve=!1,xe=!1,Ce=0)=>{for(let Fe=Ce;Fe<oe.length;Fe++)fe(oe[Fe],le,de,ve,xe)},ge=oe=>{if(oe.shapeFlag&6)return ge(oe.component.subTree);if(oe.shapeFlag&128)return oe.suspense.next();const le=L(oe.anchor||oe.el),de=le&&le[TeleportEndKey];return de?L(de):le};let Se=!1;const Ee=(oe,le,de)=>{oe==null?le._vnode&&fe(le._vnode,null,null,!0):G(le._vnode||null,oe,le,null,null,null,de),le._vnode=oe,Se||(Se=!0,flushPreFlushCbs(),flushPostFlushCbs(),Se=!1)},Ae={p:G,um:fe,m:ie,r:me,mt:ye,mc:se,pc:Q,pbc:ue,n:ge,o:A};return{render:Ee,hydrate:void 0,createApp:createAppAPI(Ee)}}function resolveChildrenNamespace({type:A,props:_},T){return T==="svg"&&A==="foreignObject"||T==="mathml"&&A==="annotation-xml"&&_&&_.encoding&&_.encoding.includes("html")?void 0:T}function toggleRecurse({effect:A,job:_},T){T?(A.flags|=32,_.flags|=4):(A.flags&=-33,_.flags&=-5)}function needTransition(A,_){return(!A||A&&!A.pendingBranch)&&_&&!_.persisted}function traverseStaticChildren(A,_,T=!1){const E=A.children,C=_.children;if(isArray$1(E)&&isArray$1(C))for(let P=0;P<E.length;P++){const I=E[P];let F=C[P];F.shapeFlag&1&&!F.dynamicChildren&&((F.patchFlag<=0||F.patchFlag===32)&&(F=C[P]=cloneIfMounted(C[P]),F.el=I.el),!T&&F.patchFlag!==-2&&traverseStaticChildren(I,F)),F.type===Text&&(F.el=I.el)}}function getSequence(A){const _=A.slice(),T=[0];let E,C,P,I,F;const R=A.length;for(E=0;E<R;E++){const B=A[E];if(B!==0){if(C=T[T.length-1],A[C]<B){_[E]=C,T.push(E);continue}for(P=0,I=T.length-1;P<I;)F=P+I>>1,A[T[F]]<B?P=F+1:I=F;B<A[T[P]]&&(P>0&&(_[E]=T[P-1]),T[P]=E)}}for(P=T.length,I=T[P-1];P-- >0;)T[P]=I,I=_[I];return T}function locateNonHydratedAsyncRoot(A){const _=A.subTree.component;if(_)return _.asyncDep&&!_.asyncResolved?_:locateNonHydratedAsyncRoot(_)}function invalidateMount(A){if(A)for(let _=0;_<A.length;_++)A[_].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(A,_,T){return doWatch(A,_,T)}function doWatch(A,_,T=EMPTY_OBJ){const{immediate:E,deep:C,flush:P,once:I}=T,F=extend({},T),R=_&&E||!_&&P!=="post";let B;if(isInSSRComponentSetup){if(P==="sync"){const D=useSSRContext();B=D.__watcherHandles||(D.__watcherHandles=[])}else if(!R){const D=()=>{};return D.stop=NOOP$1,D.resume=NOOP$1,D.pause=NOOP$1,D}}const O=currentInstance;F.call=(D,U,G)=>callWithAsyncErrorHandling(D,O,U,G);let V=!1;P==="post"?F.scheduler=D=>{queuePostRenderEffect(D,O&&O.suspense)}:P!=="sync"&&(V=!0,F.scheduler=(D,U)=>{U?D():queueJob(D)}),F.augmentJob=D=>{_&&(D.flags|=4),V&&(D.flags|=2,O&&(D.id=O.uid,D.i=O))};const L=watch$1(A,_,F);return isInSSRComponentSetup&&(B?B.push(L):R&&L()),L}function instanceWatch(A,_,T){const E=this.proxy,C=isString(A)?A.includes(".")?createPathGetter(E,A):()=>E[A]:A.bind(E,E);let P;isFunction(_)?P=_:(P=_.handler,T=_);const I=setCurrentInstance(this),F=doWatch(C,P.bind(E),T);return I(),F}function createPathGetter(A,_){const T=_.split(".");return()=>{let E=A;for(let C=0;C<T.length&&E;C++)E=E[T[C]];return E}}const getModelModifiers=(A,_)=>_==="modelValue"||_==="model-value"?A.modelModifiers:A[`${_}Modifiers`]||A[`${camelize(_)}Modifiers`]||A[`${hyphenate(_)}Modifiers`];function emit(A,_,...T){if(A.isUnmounted)return;const E=A.vnode.props||EMPTY_OBJ;let C=T;const P=_.startsWith("update:"),I=P&&getModelModifiers(E,_.slice(7));I&&(I.trim&&(C=T.map(O=>isString(O)?O.trim():O)),I.number&&(C=T.map(looseToNumber)));let F,R=E[F=toHandlerKey(_)]||E[F=toHandlerKey(camelize(_))];!R&&P&&(R=E[F=toHandlerKey(hyphenate(_))]),R&&callWithAsyncErrorHandling(R,A,6,C);const B=E[F+"Once"];if(B){if(!A.emitted)A.emitted={};else if(A.emitted[F])return;A.emitted[F]=!0,callWithAsyncErrorHandling(B,A,6,C)}}function normalizeEmitsOptions(A,_,T=!1){const E=_.emitsCache,C=E.get(A);if(C!==void 0)return C;const P=A.emits;let I={},F=!1;if(!isFunction(A)){const R=B=>{const O=normalizeEmitsOptions(B,_,!0);O&&(F=!0,extend(I,O))};!T&&_.mixins.length&&_.mixins.forEach(R),A.extends&&R(A.extends),A.mixins&&A.mixins.forEach(R)}return!P&&!F?(isObject(A)&&E.set(A,null),null):(isArray$1(P)?P.forEach(R=>I[R]=null):extend(I,P),isObject(A)&&E.set(A,I),I)}function isEmitListener(A,_){return!A||!isOn(_)?!1:(_=_.slice(2).replace(/Once$/,""),hasOwn(A,_[0].toLowerCase()+_.slice(1))||hasOwn(A,hyphenate(_))||hasOwn(A,_))}function markAttrsAccessed(){}function renderComponentRoot(A){const{type:_,vnode:T,proxy:E,withProxy:C,propsOptions:[P],slots:I,attrs:F,emit:R,render:B,renderCache:O,props:V,data:L,setupState:D,ctx:U,inheritAttrs:G}=A,X=setCurrentRenderingInstance(A);let z,Y;try{if(T.shapeFlag&4){const q=C||E,K=q;z=normalizeVNode(B.call(K,q,O,V,D,L,U)),Y=F}else{const q=_;z=normalizeVNode(q.length>1?q(V,{attrs:F,slots:I,emit:R}):q(V,null)),Y=_.props?F:getFunctionalFallthrough(F)}}catch(q){blockStack.length=0,handleError(q,A,1),z=createVNode(Comment)}let W=z;if(Y&&G!==!1){const q=Object.keys(Y),{shapeFlag:K}=W;q.length&&K&7&&(P&&q.some(isModelListener)&&(Y=filterModelListeners(Y,P)),W=cloneVNode(W,Y,!1,!0))}return T.dirs&&(W=cloneVNode(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(T.dirs):T.dirs),T.transition&&setTransitionHooks(W,T.transition),z=W,setCurrentRenderingInstance(X),z}const getFunctionalFallthrough=A=>{let _;for(const T in A)(T==="class"||T==="style"||isOn(T))&&((_||(_={}))[T]=A[T]);return _},filterModelListeners=(A,_)=>{const T={};for(const E in A)(!isModelListener(E)||!(E.slice(9)in _))&&(T[E]=A[E]);return T};function shouldUpdateComponent(A,_,T){const{props:E,children:C,component:P}=A,{props:I,children:F,patchFlag:R}=_,B=P.emitsOptions;if(_.dirs||_.transition)return!0;if(T&&R>=0){if(R&1024)return!0;if(R&16)return E?hasPropsChanged(E,I,B):!!I;if(R&8){const O=_.dynamicProps;for(let V=0;V<O.length;V++){const L=O[V];if(I[L]!==E[L]&&!isEmitListener(B,L))return!0}}}else return(C||F)&&(!F||!F.$stable)?!0:E===I?!1:E?I?hasPropsChanged(E,I,B):!0:!!I;return!1}function hasPropsChanged(A,_,T){const E=Object.keys(_);if(E.length!==Object.keys(A).length)return!0;for(let C=0;C<E.length;C++){const P=E[C];if(_[P]!==A[P]&&!isEmitListener(T,P))return!0}return!1}function updateHOCHostEl({vnode:A,parent:_},T){for(;_;){const E=_.subTree;if(E.suspense&&E.suspense.activeBranch===A&&(E.el=A.el),E===A)(A=_.vnode).el=T,_=_.parent;else break}}const isSuspense=A=>A.__isSuspense;function queueEffectWithSuspense(A,_){_&&_.pendingBranch?isArray$1(A)?_.effects.push(...A):_.effects.push(A):queuePostFlushCb(A)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(A=!1){blockStack.push(currentBlock=A?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(A,_=!1){isBlockTreeEnabled+=A,A<0&&currentBlock&&_&&(currentBlock.hasOnce=!0)}function setupBlock(A){return A.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(A),A}function createElementBlock(A,_,T,E,C,P){return setupBlock(createBaseVNode(A,_,T,E,C,P,!0))}function createBlock(A,_,T,E,C){return setupBlock(createVNode(A,_,T,E,C,!0))}function isVNode(A){return A?A.__v_isVNode===!0:!1}function isSameVNodeType(A,_){return A.type===_.type&&A.key===_.key}const normalizeKey=({key:A})=>A??null,normalizeRef=({ref:A,ref_key:_,ref_for:T})=>(typeof A=="number"&&(A=""+A),A!=null?isString(A)||isRef(A)||isFunction(A)?{i:currentRenderingInstance,r:A,k:_,f:!!T}:A:null);function createBaseVNode(A,_=null,T=null,E=0,C=null,P=A===Fragment?0:1,I=!1,F=!1){const R={__v_isVNode:!0,__v_skip:!0,type:A,props:_,key:_&&normalizeKey(_),ref:_&&normalizeRef(_),scopeId:currentScopeId,slotScopeIds:null,children:T,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:P,patchFlag:E,dynamicProps:C,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return F?(normalizeChildren(R,T),P&128&&A.normalize(R)):T&&(R.shapeFlag|=isString(T)?8:16),isBlockTreeEnabled>0&&!I&&currentBlock&&(R.patchFlag>0||P&6)&&R.patchFlag!==32&&currentBlock.push(R),R}const createVNode=_createVNode;function _createVNode(A,_=null,T=null,E=0,C=null,P=!1){if((!A||A===NULL_DYNAMIC_COMPONENT)&&(A=Comment),isVNode(A)){const F=cloneVNode(A,_,!0);return T&&normalizeChildren(F,T),isBlockTreeEnabled>0&&!P&&currentBlock&&(F.shapeFlag&6?currentBlock[currentBlock.indexOf(A)]=F:currentBlock.push(F)),F.patchFlag=-2,F}if(isClassComponent(A)&&(A=A.__vccOpts),_){_=guardReactiveProps(_);let{class:F,style:R}=_;F&&!isString(F)&&(_.class=normalizeClass(F)),isObject(R)&&(isProxy(R)&&!isArray$1(R)&&(R=extend({},R)),_.style=normalizeStyle(R))}const I=isString(A)?1:isSuspense(A)?128:isTeleport(A)?64:isObject(A)?4:isFunction(A)?2:0;return createBaseVNode(A,_,T,E,C,I,P,!0)}function guardReactiveProps(A){return A?isProxy(A)||isInternalObject(A)?extend({},A):A:null}function cloneVNode(A,_,T=!1,E=!1){const{props:C,ref:P,patchFlag:I,children:F,transition:R}=A,B=_?mergeProps(C||{},_):C,O={__v_isVNode:!0,__v_skip:!0,type:A.type,props:B,key:B&&normalizeKey(B),ref:_&&_.ref?T&&P?isArray$1(P)?P.concat(normalizeRef(_)):[P,normalizeRef(_)]:normalizeRef(_):P,scopeId:A.scopeId,slotScopeIds:A.slotScopeIds,children:F,target:A.target,targetStart:A.targetStart,targetAnchor:A.targetAnchor,staticCount:A.staticCount,shapeFlag:A.shapeFlag,patchFlag:_&&A.type!==Fragment?I===-1?16:I|16:I,dynamicProps:A.dynamicProps,dynamicChildren:A.dynamicChildren,appContext:A.appContext,dirs:A.dirs,transition:R,component:A.component,suspense:A.suspense,ssContent:A.ssContent&&cloneVNode(A.ssContent),ssFallback:A.ssFallback&&cloneVNode(A.ssFallback),el:A.el,anchor:A.anchor,ctx:A.ctx,ce:A.ce};return R&&E&&setTransitionHooks(O,R.clone(O)),O}function createTextVNode(A=" ",_=0){return createVNode(Text,null,A,_)}function createStaticVNode(A,_){const T=createVNode(Static,null,A);return T.staticCount=_,T}function createCommentVNode(A="",_=!1){return _?(openBlock(),createBlock(Comment,null,A)):createVNode(Comment,null,A)}function normalizeVNode(A){return A==null||typeof A=="boolean"?createVNode(Comment):isArray$1(A)?createVNode(Fragment,null,A.slice()):isVNode(A)?cloneIfMounted(A):createVNode(Text,null,String(A))}function cloneIfMounted(A){return A.el===null&&A.patchFlag!==-1||A.memo?A:cloneVNode(A)}function normalizeChildren(A,_){let T=0;const{shapeFlag:E}=A;if(_==null)_=null;else if(isArray$1(_))T=16;else if(typeof _=="object")if(E&65){const C=_.default;C&&(C._c&&(C._d=!1),normalizeChildren(A,C()),C._c&&(C._d=!0));return}else{T=32;const C=_._;!C&&!isInternalObject(_)?_._ctx=currentRenderingInstance:C===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?_._=1:(_._=2,A.patchFlag|=1024))}else isFunction(_)?(_={default:_,_ctx:currentRenderingInstance},T=32):(_=String(_),E&64?(T=16,_=[createTextVNode(_)]):T=8);A.children=_,A.shapeFlag|=T}function mergeProps(...A){const _={};for(let T=0;T<A.length;T++){const E=A[T];for(const C in E)if(C==="class")_.class!==E.class&&(_.class=normalizeClass([_.class,E.class]));else if(C==="style")_.style=normalizeStyle([_.style,E.style]);else if(isOn(C)){const P=_[C],I=E[C];I&&P!==I&&!(isArray$1(P)&&P.includes(I))&&(_[C]=P?[].concat(P,I):I)}else C!==""&&(_[C]=E[C])}return _}function invokeVNodeHook(A,_,T,E=null){callWithAsyncErrorHandling(A,_,7,[T,E])}const emptyAppContext=createAppContext();let uid$2=0;function createComponentInstance(A,_,T){const E=A.type,C=(_?_.appContext:A.appContext)||emptyAppContext,P={uid:uid$2++,vnode:A,type:E,parent:_,appContext:C,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:_?_.provides:Object.create(C.provides),ids:_?_.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(E,C),emitsOptions:normalizeEmitsOptions(E,C),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:E.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:T,suspenseId:T?T.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return P.ctx={_:P},P.root=_?_.root:P,P.emit=emit.bind(null,P),A.ce&&A.ce(P),P}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const A=getGlobalThis(),_=(T,E)=>{let C;return(C=A[T])||(C=A[T]=[]),C.push(E),P=>{C.length>1?C.forEach(I=>I(P)):C[0](P)}};internalSetCurrentInstance=_("__VUE_INSTANCE_SETTERS__",T=>currentInstance=T),setInSSRSetupState=_("__VUE_SSR_SETTERS__",T=>isInSSRComponentSetup=T)}const setCurrentInstance=A=>{const _=currentInstance;return internalSetCurrentInstance(A),A.scope.on(),()=>{A.scope.off(),internalSetCurrentInstance(_)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(A){return A.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(A,_=!1,T=!1){_&&setInSSRSetupState(_);const{props:E,children:C}=A.vnode,P=isStatefulComponent(A);initProps(A,E,P,_),initSlots(A,C,T);const I=P?setupStatefulComponent(A,_):void 0;return _&&setInSSRSetupState(!1),I}function setupStatefulComponent(A,_){const T=A.type;A.accessCache=Object.create(null),A.proxy=new Proxy(A.ctx,PublicInstanceProxyHandlers);const{setup:E}=T;if(E){pauseTracking();const C=A.setupContext=E.length>1?createSetupContext(A):null,P=setCurrentInstance(A),I=callWithErrorHandling(E,A,0,[A.props,C]),F=isPromise(I);if(resetTracking(),P(),(F||A.sp)&&!isAsyncWrapper(A)&&markAsyncBoundary(A),F){if(I.then(unsetCurrentInstance,unsetCurrentInstance),_)return I.then(R=>{handleSetupResult(A,R)}).catch(R=>{handleError(R,A,0)});A.asyncDep=I}else handleSetupResult(A,I)}else finishComponentSetup(A)}function handleSetupResult(A,_,T){isFunction(_)?A.type.__ssrInlineRender?A.ssrRender=_:A.render=_:isObject(_)&&(A.setupState=proxyRefs(_)),finishComponentSetup(A)}function finishComponentSetup(A,_,T){const E=A.type;A.render||(A.render=E.render||NOOP$1);{const C=setCurrentInstance(A);pauseTracking();try{applyOptions(A)}finally{resetTracking(),C()}}}const attrsProxyHandlers={get(A,_){return track(A,"get",""),A[_]}};function createSetupContext(A){const _=T=>{A.exposed=T||{}};return{attrs:new Proxy(A.attrs,attrsProxyHandlers),slots:A.slots,emit:A.emit,expose:_}}function getComponentPublicInstance(A){return A.exposed?A.exposeProxy||(A.exposeProxy=new Proxy(proxyRefs(markRaw(A.exposed)),{get(_,T){if(T in _)return _[T];if(T in publicPropertiesMap)return publicPropertiesMap[T](A)},has(_,T){return T in _||T in publicPropertiesMap}})):A.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=A=>A.replace(classifyRE,_=>_.toUpperCase()).replace(/[-_]/g,"");function getComponentName(A,_=!0){return isFunction(A)?A.displayName||A.name:A.name||_&&A.__name}function formatComponentName(A,_,T=!1){let E=getComponentName(_);if(!E&&_.__file){const C=_.__file.match(/([^/\\]+)\.\w+$/);C&&(E=C[1])}if(!E&&A&&A.parent){const C=P=>{for(const I in P)if(P[I]===_)return I};E=C(A.components||A.parent.type.components)||C(A.appContext.components)}return E?classify(E):T?"App":"Anonymous"}function isClassComponent(A){return isFunction(A)&&"__vccOpts"in A}const computed=(A,_)=>computed$1(A,_,isInSSRComponentSetup);function h$1(A,_,T){const E=arguments.length;return E===2?isObject(_)&&!isArray$1(_)?isVNode(_)?createVNode(A,null,[_]):createVNode(A,_):createVNode(A,null,_):(E>3?T=Array.prototype.slice.call(arguments,2):E===3&&isVNode(T)&&(T=[T]),createVNode(A,_,T))}const version="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:A=>A})}catch{}const unsafeToTrustedHTML=policy?A=>policy.createHTML(A):A=>A,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(A,_,T)=>{_.insertBefore(A,T||null)},remove:A=>{const _=A.parentNode;_&&_.removeChild(A)},createElement:(A,_,T,E)=>{const C=_==="svg"?doc.createElementNS(svgNS,A):_==="mathml"?doc.createElementNS(mathmlNS,A):T?doc.createElement(A,{is:T}):doc.createElement(A);return A==="select"&&E&&E.multiple!=null&&C.setAttribute("multiple",E.multiple),C},createText:A=>doc.createTextNode(A),createComment:A=>doc.createComment(A),setText:(A,_)=>{A.nodeValue=_},setElementText:(A,_)=>{A.textContent=_},parentNode:A=>A.parentNode,nextSibling:A=>A.nextSibling,querySelector:A=>doc.querySelector(A),setScopeId(A,_){A.setAttribute(_,"")},insertStaticContent(A,_,T,E,C,P){const I=T?T.previousSibling:_.lastChild;if(C&&(C===P||C.nextSibling))for(;_.insertBefore(C.cloneNode(!0),T),!(C===P||!(C=C.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(E==="svg"?`<svg>${A}</svg>`:E==="mathml"?`<math>${A}</math>`:A);const F=templateContainer.content;if(E==="svg"||E==="mathml"){const R=F.firstChild;for(;R.firstChild;)F.appendChild(R.firstChild);F.removeChild(R)}_.insertBefore(F,T)}return[I?I.nextSibling:_.firstChild,T?T.previousSibling:_.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(A,_,T){const E=A[vtcKey];E&&(_=(_?[_,...E]:[...E]).join(" ")),_==null?A.removeAttribute("class"):T?A.setAttribute("class",_):A.className=_}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(A,_,T){const E=A.style,C=isString(T);let P=!1;if(T&&!C){if(_)if(isString(_))for(const I of _.split(";")){const F=I.slice(0,I.indexOf(":")).trim();T[F]==null&&setStyle(E,F,"")}else for(const I in _)T[I]==null&&setStyle(E,I,"");for(const I in T)I==="display"&&(P=!0),setStyle(E,I,T[I])}else if(C){if(_!==T){const I=E[CSS_VAR_TEXT];I&&(T+=";"+I),E.cssText=T,P=displayRE.test(T)}}else _&&A.removeAttribute("style");vShowOriginalDisplay in A&&(A[vShowOriginalDisplay]=P?E.display:"",A[vShowHidden]&&(E.display="none"))}const importantRE=/\s*!important$/;function setStyle(A,_,T){if(isArray$1(T))T.forEach(E=>setStyle(A,_,E));else if(T==null&&(T=""),_.startsWith("--"))A.setProperty(_,T);else{const E=autoPrefix(A,_);importantRE.test(T)?A.setProperty(hyphenate(E),T.replace(importantRE,""),"important"):A[E]=T}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(A,_){const T=prefixCache[_];if(T)return T;let E=camelize(_);if(E!=="filter"&&E in A)return prefixCache[_]=E;E=capitalize(E);for(let C=0;C<prefixes.length;C++){const P=prefixes[C]+E;if(P in A)return prefixCache[_]=P}return _}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(A,_,T,E,C,P=isSpecialBooleanAttr(_)){E&&_.startsWith("xlink:")?T==null?A.removeAttributeNS(xlinkNS,_.slice(6,_.length)):A.setAttributeNS(xlinkNS,_,T):T==null||P&&!includeBooleanAttr(T)?A.removeAttribute(_):A.setAttribute(_,P?"":isSymbol(T)?String(T):T)}function patchDOMProp(A,_,T,E,C){if(_==="innerHTML"||_==="textContent"){T!=null&&(A[_]=_==="innerHTML"?unsafeToTrustedHTML(T):T);return}const P=A.tagName;if(_==="value"&&P!=="PROGRESS"&&!P.includes("-")){const F=P==="OPTION"?A.getAttribute("value")||"":A.value,R=T==null?A.type==="checkbox"?"on":"":String(T);(F!==R||!("_value"in A))&&(A.value=R),T==null&&A.removeAttribute(_),A._value=T;return}let I=!1;if(T===""||T==null){const F=typeof A[_];F==="boolean"?T=includeBooleanAttr(T):T==null&&F==="string"?(T="",I=!0):F==="number"&&(T=0,I=!0)}try{A[_]=T}catch{}I&&A.removeAttribute(C||_)}function addEventListener(A,_,T,E){A.addEventListener(_,T,E)}function removeEventListener(A,_,T,E){A.removeEventListener(_,T,E)}const veiKey=Symbol("_vei");function patchEvent(A,_,T,E,C=null){const P=A[veiKey]||(A[veiKey]={}),I=P[_];if(E&&I)I.value=E;else{const[F,R]=parseName(_);if(E){const B=P[_]=createInvoker(E,C);addEventListener(A,F,B,R)}else I&&(removeEventListener(A,F,I,R),P[_]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(A){let _;if(optionsModifierRE.test(A)){_={};let E;for(;E=A.match(optionsModifierRE);)A=A.slice(0,A.length-E[0].length),_[E[0].toLowerCase()]=!0}return[A[2]===":"?A.slice(3):hyphenate(A.slice(2)),_]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(A,_){const T=E=>{if(!E._vts)E._vts=Date.now();else if(E._vts<=T.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(E,T.value),_,5,[E])};return T.value=A,T.attached=getNow(),T}function patchStopImmediatePropagation(A,_){if(isArray$1(_)){const T=A.stopImmediatePropagation;return A.stopImmediatePropagation=()=>{T.call(A),A._stopped=!0},_.map(E=>C=>!C._stopped&&E&&E(C))}else return _}const isNativeOn=A=>A.charCodeAt(0)===111&&A.charCodeAt(1)===110&&A.charCodeAt(2)>96&&A.charCodeAt(2)<123,patchProp=(A,_,T,E,C,P)=>{const I=C==="svg";_==="class"?patchClass(A,E,I):_==="style"?patchStyle(A,T,E):isOn(_)?isModelListener(_)||patchEvent(A,_,T,E,P):(_[0]==="."?(_=_.slice(1),!0):_[0]==="^"?(_=_.slice(1),!1):shouldSetAsProp(A,_,E,I))?(patchDOMProp(A,_,E),!A.tagName.includes("-")&&(_==="value"||_==="checked"||_==="selected")&&patchAttr(A,_,E,I,P,_!=="value")):A._isVueCE&&(/[A-Z]/.test(_)||!isString(E))?patchDOMProp(A,camelize(_),E,P,_):(_==="true-value"?A._trueValue=E:_==="false-value"&&(A._falseValue=E),patchAttr(A,_,E,I))};function shouldSetAsProp(A,_,T,E){if(E)return!!(_==="innerHTML"||_==="textContent"||_ in A&&isNativeOn(_)&&isFunction(T));if(_==="spellcheck"||_==="draggable"||_==="translate"||_==="form"||_==="list"&&A.tagName==="INPUT"||_==="type"&&A.tagName==="TEXTAREA")return!1;if(_==="width"||_==="height"){const C=A.tagName;if(C==="IMG"||C==="VIDEO"||C==="CANVAS"||C==="SOURCE")return!1}return isNativeOn(_)&&isString(T)?!1:_ in A}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...A)=>{const _=ensureRenderer().createApp(...A),{mount:T}=_;return _.mount=E=>{const C=normalizeContainer(E);if(!C)return;const P=_._component;!isFunction(P)&&!P.render&&!P.template&&(P.template=C.innerHTML),C.nodeType===1&&(C.textContent="");const I=T(C,!1,resolveRootNamespace(C));return C instanceof Element&&(C.removeAttribute("v-cloak"),C.setAttribute("data-v-app","")),I},_};function resolveRootNamespace(A){if(A instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&A instanceof MathMLElement)return"mathml"}function normalizeContainer(A){return isString(A)?document.querySelector(A):A}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(A){return typeof A=="object"||"displayName"in A||"props"in A||"__vccOpts"in A}function isESModule(A){return A.__esModule||A[Symbol.toStringTag]==="Module"||A.default&&isRouteComponent(A.default)}const assign=Object.assign;function applyToParams(A,_){const T={};for(const E in _){const C=_[E];T[E]=isArray(C)?C.map(A):A(C)}return T}const noop=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(A){return encodeURI(""+A).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(A){return commonEncode(A).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(A){return commonEncode(A).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(A){return encodeQueryValue(A).replace(EQUAL_RE,"%3D")}function encodePath(A){return commonEncode(A).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(A){return A==null?"":encodePath(A).replace(SLASH_RE,"%2F")}function decode(A){try{return decodeURIComponent(""+A)}catch{}return""+A}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=A=>A.replace(TRAILING_SLASH_RE,"");function parseURL(A,_,T="/"){let E,C={},P="",I="";const F=_.indexOf("#");let R=_.indexOf("?");return F<R&&F>=0&&(R=-1),R>-1&&(E=_.slice(0,R),P=_.slice(R+1,F>-1?F:_.length),C=A(P)),F>-1&&(E=E||_.slice(0,F),I=_.slice(F,_.length)),E=resolveRelativePath(E??_,T),{fullPath:E+(P&&"?")+P+I,path:E,query:C,hash:decode(I)}}function stringifyURL(A,_){const T=_.query?A(_.query):"";return _.path+(T&&"?")+T+(_.hash||"")}function stripBase(A,_){return!_||!A.toLowerCase().startsWith(_.toLowerCase())?A:A.slice(_.length)||"/"}function isSameRouteLocation(A,_,T){const E=_.matched.length-1,C=T.matched.length-1;return E>-1&&E===C&&isSameRouteRecord(_.matched[E],T.matched[C])&&isSameRouteLocationParams(_.params,T.params)&&A(_.query)===A(T.query)&&_.hash===T.hash}function isSameRouteRecord(A,_){return(A.aliasOf||A)===(_.aliasOf||_)}function isSameRouteLocationParams(A,_){if(Object.keys(A).length!==Object.keys(_).length)return!1;for(const T in A)if(!isSameRouteLocationParamsValue(A[T],_[T]))return!1;return!0}function isSameRouteLocationParamsValue(A,_){return isArray(A)?isEquivalentArray(A,_):isArray(_)?isEquivalentArray(_,A):A===_}function isEquivalentArray(A,_){return isArray(_)?A.length===_.length&&A.every((T,E)=>T===_[E]):A.length===1&&A[0]===_}function resolveRelativePath(A,_){if(A.startsWith("/"))return A;if(!A)return _;const T=_.split("/"),E=A.split("/"),C=E[E.length-1];(C===".."||C===".")&&E.push("");let P=T.length-1,I,F;for(I=0;I<E.length;I++)if(F=E[I],F!==".")if(F==="..")P>1&&P--;else break;return T.slice(0,P).join("/")+"/"+E.slice(I).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(A){A.pop="pop",A.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(A){A.back="back",A.forward="forward",A.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(A){if(!A)if(isBrowser){const _=document.querySelector("base");A=_&&_.getAttribute("href")||"/",A=A.replace(/^\w+:\/\/[^\/]+/,"")}else A="/";return A[0]!=="/"&&A[0]!=="#"&&(A="/"+A),removeTrailingSlash(A)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(A,_){return A.replace(BEFORE_HASH_RE,"#")+_}function getElementPosition(A,_){const T=document.documentElement.getBoundingClientRect(),E=A.getBoundingClientRect();return{behavior:_.behavior,left:E.left-T.left-(_.left||0),top:E.top-T.top-(_.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(A){let _;if("el"in A){const T=A.el,E=typeof T=="string"&&T.startsWith("#"),C=typeof T=="string"?E?document.getElementById(T.slice(1)):document.querySelector(T):T;if(!C)return;_=getElementPosition(C,A)}else _=A;"scrollBehavior"in document.documentElement.style?window.scrollTo(_):window.scrollTo(_.left!=null?_.left:window.scrollX,_.top!=null?_.top:window.scrollY)}function getScrollKey(A,_){return(history.state?history.state.position-_:-1)+A}const scrollPositions=new Map;function saveScrollPosition(A,_){scrollPositions.set(A,_)}function getSavedScrollPosition(A){const _=scrollPositions.get(A);return scrollPositions.delete(A),_}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(A,_){const{pathname:T,search:E,hash:C}=_,P=A.indexOf("#");if(P>-1){let F=C.includes(A.slice(P))?A.slice(P).length:1,R=C.slice(F);return R[0]!=="/"&&(R="/"+R),stripBase(R,"")}return stripBase(T,A)+E+C}function useHistoryListeners(A,_,T,E){let C=[],P=[],I=null;const F=({state:L})=>{const D=createCurrentLocation(A,location),U=T.value,G=_.value;let X=0;if(L){if(T.value=D,_.value=L,I&&I===U){I=null;return}X=G?L.position-G.position:0}else E(D);C.forEach(z=>{z(T.value,U,{delta:X,type:NavigationType.pop,direction:X?X>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function R(){I=T.value}function B(L){C.push(L);const D=()=>{const U=C.indexOf(L);U>-1&&C.splice(U,1)};return P.push(D),D}function O(){const{history:L}=window;L.state&&L.replaceState(assign({},L.state,{scroll:computeScrollPosition()}),"")}function V(){for(const L of P)L();P=[],window.removeEventListener("popstate",F),window.removeEventListener("beforeunload",O)}return window.addEventListener("popstate",F),window.addEventListener("beforeunload",O,{passive:!0}),{pauseListeners:R,listen:B,destroy:V}}function buildState(A,_,T,E=!1,C=!1){return{back:A,current:_,forward:T,replaced:E,position:window.history.length,scroll:C?computeScrollPosition():null}}function useHistoryStateNavigation(A){const{history:_,location:T}=window,E={value:createCurrentLocation(A,T)},C={value:_.state};C.value||P(E.value,{back:null,current:E.value,forward:null,position:_.length-1,replaced:!0,scroll:null},!0);function P(R,B,O){const V=A.indexOf("#"),L=V>-1?(T.host&&document.querySelector("base")?A:A.slice(V))+R:createBaseLocation()+A+R;try{_[O?"replaceState":"pushState"](B,"",L),C.value=B}catch(D){console.error(D),T[O?"replace":"assign"](L)}}function I(R,B){const O=assign({},_.state,buildState(C.value.back,R,C.value.forward,!0),B,{position:C.value.position});P(R,O,!0),E.value=R}function F(R,B){const O=assign({},C.value,_.state,{forward:R,scroll:computeScrollPosition()});P(O.current,O,!0);const V=assign({},buildState(E.value,R,null),{position:O.position+1},B);P(R,V,!1),E.value=R}return{location:E,state:C,push:F,replace:I}}function createWebHistory(A){A=normalizeBase(A);const _=useHistoryStateNavigation(A),T=useHistoryListeners(A,_.state,_.location,_.replace);function E(P,I=!0){I||T.pauseListeners(),history.go(P)}const C=assign({location:"",base:A,go:E,createHref:createHref.bind(null,A)},_,T);return Object.defineProperty(C,"location",{enumerable:!0,get:()=>_.location.value}),Object.defineProperty(C,"state",{enumerable:!0,get:()=>_.state.value}),C}function isRouteLocation(A){return typeof A=="string"||A&&typeof A=="object"}function isRouteName(A){return typeof A=="string"||typeof A=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(A){A[A.aborted=4]="aborted",A[A.cancelled=8]="cancelled",A[A.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(A,_){return assign(new Error,{type:A,[NavigationFailureSymbol]:!0},_)}function isNavigationFailure(A,_){return A instanceof Error&&NavigationFailureSymbol in A&&(_==null||!!(A.type&_))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(A,_){const T=assign({},BASE_PATH_PARSER_OPTIONS,_),E=[];let C=T.start?"^":"";const P=[];for(const B of A){const O=B.length?[]:[90];T.strict&&!B.length&&(C+="/");for(let V=0;V<B.length;V++){const L=B[V];let D=40+(T.sensitive?.25:0);if(L.type===0)V||(C+="/"),C+=L.value.replace(REGEX_CHARS_RE,"\\$&"),D+=40;else if(L.type===1){const{value:U,repeatable:G,optional:X,regexp:z}=L;P.push({name:U,repeatable:G,optional:X});const Y=z||BASE_PARAM_PATTERN;if(Y!==BASE_PARAM_PATTERN){D+=10;try{new RegExp(`(${Y})`)}catch(q){throw new Error(`Invalid custom RegExp for param "${U}" (${Y}): `+q.message)}}let W=G?`((?:${Y})(?:/(?:${Y}))*)`:`(${Y})`;V||(W=X&&B.length<2?`(?:/${W})`:"/"+W),X&&(W+="?"),C+=W,D+=20,X&&(D+=-8),G&&(D+=-20),Y===".*"&&(D+=-50)}O.push(D)}E.push(O)}if(T.strict&&T.end){const B=E.length-1;E[B][E[B].length-1]+=.7000000000000001}T.strict||(C+="/?"),T.end?C+="$":T.strict&&!C.endsWith("/")&&(C+="(?:/|$)");const I=new RegExp(C,T.sensitive?"":"i");function F(B){const O=B.match(I),V={};if(!O)return null;for(let L=1;L<O.length;L++){const D=O[L]||"",U=P[L-1];V[U.name]=D&&U.repeatable?D.split("/"):D}return V}function R(B){let O="",V=!1;for(const L of A){(!V||!O.endsWith("/"))&&(O+="/"),V=!1;for(const D of L)if(D.type===0)O+=D.value;else if(D.type===1){const{value:U,repeatable:G,optional:X}=D,z=U in B?B[U]:"";if(isArray(z)&&!G)throw new Error(`Provided param "${U}" is an array but it is not repeatable (* or + modifiers)`);const Y=isArray(z)?z.join("/"):z;if(!Y)if(X)L.length<2&&(O.endsWith("/")?O=O.slice(0,-1):V=!0);else throw new Error(`Missing required param "${U}"`);O+=Y}}return O||"/"}return{re:I,score:E,keys:P,parse:F,stringify:R}}function compareScoreArray(A,_){let T=0;for(;T<A.length&&T<_.length;){const E=_[T]-A[T];if(E)return E;T++}return A.length<_.length?A.length===1&&A[0]===80?-1:1:A.length>_.length?_.length===1&&_[0]===80?1:-1:0}function comparePathParserScore(A,_){let T=0;const E=A.score,C=_.score;for(;T<E.length&&T<C.length;){const P=compareScoreArray(E[T],C[T]);if(P)return P;T++}if(Math.abs(C.length-E.length)===1){if(isLastScoreNegative(E))return 1;if(isLastScoreNegative(C))return-1}return C.length-E.length}function isLastScoreNegative(A){const _=A[A.length-1];return A.length>0&&_[_.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(A){if(!A)return[[]];if(A==="/")return[[ROOT_TOKEN]];if(!A.startsWith("/"))throw new Error(`Invalid path "${A}"`);function _(D){throw new Error(`ERR (${T})/"${B}": ${D}`)}let T=0,E=T;const C=[];let P;function I(){P&&C.push(P),P=[]}let F=0,R,B="",O="";function V(){B&&(T===0?P.push({type:0,value:B}):T===1||T===2||T===3?(P.length>1&&(R==="*"||R==="+")&&_(`A repeatable param (${B}) must be alone in its segment. eg: '/:ids+.`),P.push({type:1,value:B,regexp:O,repeatable:R==="*"||R==="+",optional:R==="*"||R==="?"})):_("Invalid state to consume buffer"),B="")}function L(){B+=R}for(;F<A.length;){if(R=A[F++],R==="\\"&&T!==2){E=T,T=4;continue}switch(T){case 0:R==="/"?(B&&V(),I()):R===":"?(V(),T=1):L();break;case 4:L(),T=E;break;case 1:R==="("?T=2:VALID_PARAM_RE.test(R)?L():(V(),T=0,R!=="*"&&R!=="?"&&R!=="+"&&F--);break;case 2:R===")"?O[O.length-1]=="\\"?O=O.slice(0,-1)+R:T=3:O+=R;break;case 3:V(),T=0,R!=="*"&&R!=="?"&&R!=="+"&&F--,O="";break;default:_("Unknown state");break}}return T===2&&_(`Unfinished custom RegExp for param "${B}"`),V(),I(),C}function createRouteRecordMatcher(A,_,T){const E=tokensToParser(tokenizePath(A.path),T),C=assign(E,{record:A,parent:_,children:[],alias:[]});return _&&!C.record.aliasOf==!_.record.aliasOf&&_.children.push(C),C}function createRouterMatcher(A,_){const T=[],E=new Map;_=mergeOptions({strict:!1,end:!0,sensitive:!1},_);function C(V){return E.get(V)}function P(V,L,D){const U=!D,G=normalizeRouteRecord(V);G.aliasOf=D&&D.record;const X=mergeOptions(_,V),z=[G];if("alias"in V){const q=typeof V.alias=="string"?[V.alias]:V.alias;for(const K of q)z.push(normalizeRouteRecord(assign({},G,{components:D?D.record.components:G.components,path:K,aliasOf:D?D.record:G})))}let Y,W;for(const q of z){const{path:K}=q;if(L&&K[0]!=="/"){const J=L.record.path,Z=J[J.length-1]==="/"?"":"/";q.path=L.record.path+(K&&Z+K)}if(Y=createRouteRecordMatcher(q,L,X),D?D.alias.push(Y):(W=W||Y,W!==Y&&W.alias.push(Y),U&&V.name&&!isAliasRecord(Y)&&I(V.name)),isMatchable(Y)&&R(Y),G.children){const J=G.children;for(let Z=0;Z<J.length;Z++)P(J[Z],Y,D&&D.children[Z])}D=D||Y}return W?()=>{I(W)}:noop}function I(V){if(isRouteName(V)){const L=E.get(V);L&&(E.delete(V),T.splice(T.indexOf(L),1),L.children.forEach(I),L.alias.forEach(I))}else{const L=T.indexOf(V);L>-1&&(T.splice(L,1),V.record.name&&E.delete(V.record.name),V.children.forEach(I),V.alias.forEach(I))}}function F(){return T}function R(V){const L=findInsertionIndex(V,T);T.splice(L,0,V),V.record.name&&!isAliasRecord(V)&&E.set(V.record.name,V)}function B(V,L){let D,U={},G,X;if("name"in V&&V.name){if(D=E.get(V.name),!D)throw createRouterError(1,{location:V});X=D.record.name,U=assign(paramsFromLocation(L.params,D.keys.filter(W=>!W.optional).concat(D.parent?D.parent.keys.filter(W=>W.optional):[]).map(W=>W.name)),V.params&&paramsFromLocation(V.params,D.keys.map(W=>W.name))),G=D.stringify(U)}else if(V.path!=null)G=V.path,D=T.find(W=>W.re.test(G)),D&&(U=D.parse(G),X=D.record.name);else{if(D=L.name?E.get(L.name):T.find(W=>W.re.test(L.path)),!D)throw createRouterError(1,{location:V,currentLocation:L});X=D.record.name,U=assign({},L.params,V.params),G=D.stringify(U)}const z=[];let Y=D;for(;Y;)z.unshift(Y.record),Y=Y.parent;return{name:X,path:G,params:U,matched:z,meta:mergeMetaFields(z)}}A.forEach(V=>P(V));function O(){T.length=0,E.clear()}return{addRoute:P,resolve:B,removeRoute:I,clearRoutes:O,getRoutes:F,getRecordMatcher:C}}function paramsFromLocation(A,_){const T={};for(const E of _)E in A&&(T[E]=A[E]);return T}function normalizeRouteRecord(A){const _={path:A.path,redirect:A.redirect,name:A.name,meta:A.meta||{},aliasOf:A.aliasOf,beforeEnter:A.beforeEnter,props:normalizeRecordProps(A),children:A.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in A?A.components||null:A.component&&{default:A.component}};return Object.defineProperty(_,"mods",{value:{}}),_}function normalizeRecordProps(A){const _={},T=A.props||!1;if("component"in A)_.default=T;else for(const E in A.components)_[E]=typeof T=="object"?T[E]:T;return _}function isAliasRecord(A){for(;A;){if(A.record.aliasOf)return!0;A=A.parent}return!1}function mergeMetaFields(A){return A.reduce((_,T)=>assign(_,T.meta),{})}function mergeOptions(A,_){const T={};for(const E in A)T[E]=E in _?_[E]:A[E];return T}function findInsertionIndex(A,_){let T=0,E=_.length;for(;T!==E;){const P=T+E>>1;comparePathParserScore(A,_[P])<0?E=P:T=P+1}const C=getInsertionAncestor(A);return C&&(E=_.lastIndexOf(C,E-1)),E}function getInsertionAncestor(A){let _=A;for(;_=_.parent;)if(isMatchable(_)&&comparePathParserScore(A,_)===0)return _}function isMatchable({record:A}){return!!(A.name||A.components&&Object.keys(A.components).length||A.redirect)}function parseQuery(A){const _={};if(A===""||A==="?")return _;const E=(A[0]==="?"?A.slice(1):A).split("&");for(let C=0;C<E.length;++C){const P=E[C].replace(PLUS_RE," "),I=P.indexOf("="),F=decode(I<0?P:P.slice(0,I)),R=I<0?null:decode(P.slice(I+1));if(F in _){let B=_[F];isArray(B)||(B=_[F]=[B]),B.push(R)}else _[F]=R}return _}function stringifyQuery(A){let _="";for(let T in A){const E=A[T];if(T=encodeQueryKey(T),E==null){E!==void 0&&(_+=(_.length?"&":"")+T);continue}(isArray(E)?E.map(P=>P&&encodeQueryValue(P)):[E&&encodeQueryValue(E)]).forEach(P=>{P!==void 0&&(_+=(_.length?"&":"")+T,P!=null&&(_+="="+P))})}return _}function normalizeQuery(A){const _={};for(const T in A){const E=A[T];E!==void 0&&(_[T]=isArray(E)?E.map(C=>C==null?null:""+C):E==null?E:""+E)}return _}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let A=[];function _(E){return A.push(E),()=>{const C=A.indexOf(E);C>-1&&A.splice(C,1)}}function T(){A=[]}return{add:_,list:()=>A.slice(),reset:T}}function guardToPromiseFn(A,_,T,E,C,P=I=>I()){const I=E&&(E.enterCallbacks[C]=E.enterCallbacks[C]||[]);return()=>new Promise((F,R)=>{const B=L=>{L===!1?R(createRouterError(4,{from:T,to:_})):L instanceof Error?R(L):isRouteLocation(L)?R(createRouterError(2,{from:_,to:L})):(I&&E.enterCallbacks[C]===I&&typeof L=="function"&&I.push(L),F())},O=P(()=>A.call(E&&E.instances[C],_,T,B));let V=Promise.resolve(O);A.length<3&&(V=V.then(B)),V.catch(L=>R(L))})}function extractComponentsGuards(A,_,T,E,C=P=>P()){const P=[];for(const I of A)for(const F in I.components){let R=I.components[F];if(!(_!=="beforeRouteEnter"&&!I.instances[F]))if(isRouteComponent(R)){const O=(R.__vccOpts||R)[_];O&&P.push(guardToPromiseFn(O,T,E,I,F,C))}else{let B=R();P.push(()=>B.then(O=>{if(!O)throw new Error(`Couldn't resolve component "${F}" at "${I.path}"`);const V=isESModule(O)?O.default:O;I.mods[F]=O,I.components[F]=V;const D=(V.__vccOpts||V)[_];return D&&guardToPromiseFn(D,T,E,I,F,C)()}))}}return P}function useLink(A){const _=inject(routerKey),T=inject(routeLocationKey),E=computed(()=>{const R=unref(A.to);return _.resolve(R)}),C=computed(()=>{const{matched:R}=E.value,{length:B}=R,O=R[B-1],V=T.matched;if(!O||!V.length)return-1;const L=V.findIndex(isSameRouteRecord.bind(null,O));if(L>-1)return L;const D=getOriginalPath(R[B-2]);return B>1&&getOriginalPath(O)===D&&V[V.length-1].path!==D?V.findIndex(isSameRouteRecord.bind(null,R[B-2])):L}),P=computed(()=>C.value>-1&&includesParams(T.params,E.value.params)),I=computed(()=>C.value>-1&&C.value===T.matched.length-1&&isSameRouteLocationParams(T.params,E.value.params));function F(R={}){if(guardEvent(R)){const B=_[unref(A.replace)?"replace":"push"](unref(A.to)).catch(noop);return A.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>B),B}return Promise.resolve()}return{route:E,href:computed(()=>E.value.href),isActive:P,isExactActive:I,navigate:F}}function preferSingleVNode(A){return A.length===1?A[0]:A}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink,setup(A,{slots:_}){const T=reactive(useLink(A)),{options:E}=inject(routerKey),C=computed(()=>({[getLinkClass(A.activeClass,E.linkActiveClass,"router-link-active")]:T.isActive,[getLinkClass(A.exactActiveClass,E.linkExactActiveClass,"router-link-exact-active")]:T.isExactActive}));return()=>{const P=_.default&&preferSingleVNode(_.default(T));return A.custom?P:h$1("a",{"aria-current":T.isExactActive?A.ariaCurrentValue:null,href:T.href,onClick:T.navigate,class:C.value},P)}}}),RouterLink=RouterLinkImpl;function guardEvent(A){if(!(A.metaKey||A.altKey||A.ctrlKey||A.shiftKey)&&!A.defaultPrevented&&!(A.button!==void 0&&A.button!==0)){if(A.currentTarget&&A.currentTarget.getAttribute){const _=A.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(_))return}return A.preventDefault&&A.preventDefault(),!0}}function includesParams(A,_){for(const T in _){const E=_[T],C=A[T];if(typeof E=="string"){if(E!==C)return!1}else if(!isArray(C)||C.length!==E.length||E.some((P,I)=>P!==C[I]))return!1}return!0}function getOriginalPath(A){return A?A.aliasOf?A.aliasOf.path:A.path:""}const getLinkClass=(A,_,T)=>A??_??T,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(A,{attrs:_,slots:T}){const E=inject(routerViewLocationKey),C=computed(()=>A.route||E.value),P=inject(viewDepthKey,0),I=computed(()=>{let B=unref(P);const{matched:O}=C.value;let V;for(;(V=O[B])&&!V.components;)B++;return B}),F=computed(()=>C.value.matched[I.value]);provide(viewDepthKey,computed(()=>I.value+1)),provide(matchedRouteKey,F),provide(routerViewLocationKey,C);const R=ref$1();return watch(()=>[R.value,F.value,A.name],([B,O,V],[L,D,U])=>{O&&(O.instances[V]=B,D&&D!==O&&B&&B===L&&(O.leaveGuards.size||(O.leaveGuards=D.leaveGuards),O.updateGuards.size||(O.updateGuards=D.updateGuards))),B&&O&&(!D||!isSameRouteRecord(O,D)||!L)&&(O.enterCallbacks[V]||[]).forEach(G=>G(B))},{flush:"post"}),()=>{const B=C.value,O=A.name,V=F.value,L=V&&V.components[O];if(!L)return normalizeSlot(T.default,{Component:L,route:B});const D=V.props[O],U=D?D===!0?B.params:typeof D=="function"?D(B):D:null,X=h$1(L,assign({},U,_,{onVnodeUnmounted:z=>{z.component.isUnmounted&&(V.instances[O]=null)},ref:R}));return normalizeSlot(T.default,{Component:X,route:B})||X}}});function normalizeSlot(A,_){if(!A)return null;const T=A(_);return T.length===1?T[0]:T}const RouterView=RouterViewImpl;function createRouter(A){const _=createRouterMatcher(A.routes,A),T=A.parseQuery||parseQuery,E=A.stringifyQuery||stringifyQuery,C=A.history,P=useCallbacks(),I=useCallbacks(),F=useCallbacks(),R=shallowRef(START_LOCATION_NORMALIZED);let B=START_LOCATION_NORMALIZED;isBrowser&&A.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const O=applyToParams.bind(null,ge=>""+ge),V=applyToParams.bind(null,encodeParam),L=applyToParams.bind(null,decode);function D(ge,Se){let Ee,Ae;return isRouteName(ge)?(Ee=_.getRecordMatcher(ge),Ae=Se):Ae=ge,_.addRoute(Ae,Ee)}function U(ge){const Se=_.getRecordMatcher(ge);Se&&_.removeRoute(Se)}function G(){return _.getRoutes().map(ge=>ge.record)}function X(ge){return!!_.getRecordMatcher(ge)}function z(ge,Se){if(Se=assign({},Se||R.value),typeof ge=="string"){const de=parseURL(T,ge,Se.path),ve=_.resolve({path:de.path},Se),xe=C.createHref(de.fullPath);return assign(de,ve,{params:L(ve.params),hash:decode(de.hash),redirectedFrom:void 0,href:xe})}let Ee;if(ge.path!=null)Ee=assign({},ge,{path:parseURL(T,ge.path,Se.path).path});else{const de=assign({},ge.params);for(const ve in de)de[ve]==null&&delete de[ve];Ee=assign({},ge,{params:V(de)}),Se.params=V(Se.params)}const Ae=_.resolve(Ee,Se),Ie=ge.hash||"";Ae.params=O(L(Ae.params));const oe=stringifyURL(E,assign({},ge,{hash:encodeHash(Ie),path:Ae.path})),le=C.createHref(oe);return assign({fullPath:oe,hash:Ie,query:E===stringifyQuery?normalizeQuery(ge.query):ge.query||{}},Ae,{redirectedFrom:void 0,href:le})}function Y(ge){return typeof ge=="string"?parseURL(T,ge,R.value.path):assign({},ge)}function W(ge,Se){if(B!==ge)return createRouterError(8,{from:Se,to:ge})}function q(ge){return Z(ge)}function K(ge){return q(assign(Y(ge),{replace:!0}))}function J(ge){const Se=ge.matched[ge.matched.length-1];if(Se&&Se.redirect){const{redirect:Ee}=Se;let Ae=typeof Ee=="function"?Ee(ge):Ee;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=Y(Ae):{path:Ae},Ae.params={}),assign({query:ge.query,hash:ge.hash,params:Ae.path!=null?{}:ge.params},Ae)}}function Z(ge,Se){const Ee=B=z(ge),Ae=R.value,Ie=ge.state,oe=ge.force,le=ge.replace===!0,de=J(Ee);if(de)return Z(assign(Y(de),{state:typeof de=="object"?assign({},Ie,de.state):Ie,force:oe,replace:le}),Se||Ee);const ve=Ee;ve.redirectedFrom=Se;let xe;return!oe&&isSameRouteLocation(E,Ae,Ee)&&(xe=createRouterError(16,{to:ve,from:Ae}),ie(Ae,Ae,!0,!1)),(xe?Promise.resolve(xe):ue(ve,Ae)).catch(Ce=>isNavigationFailure(Ce)?isNavigationFailure(Ce,2)?Ce:ne(Ce):Q(Ce,ve,Ae)).then(Ce=>{if(Ce){if(isNavigationFailure(Ce,2))return Z(assign({replace:le},Y(Ce.to),{state:typeof Ce.to=="object"?assign({},Ie,Ce.to.state):Ie,force:oe}),Se||ve)}else Ce=he(ve,Ae,!0,le,Ie);return ce(ve,Ae,Ce),Ce})}function se(ge,Se){const Ee=W(ge,Se);return Ee?Promise.reject(Ee):Promise.resolve()}function ae(ge){const Se=be.values().next().value;return Se&&typeof Se.runWithContext=="function"?Se.runWithContext(ge):ge()}function ue(ge,Se){let Ee;const[Ae,Ie,oe]=extractChangingRecords(ge,Se);Ee=extractComponentsGuards(Ae.reverse(),"beforeRouteLeave",ge,Se);for(const de of Ae)de.leaveGuards.forEach(ve=>{Ee.push(guardToPromiseFn(ve,ge,Se))});const le=se.bind(null,ge,Se);return Ee.push(le),Me(Ee).then(()=>{Ee=[];for(const de of P.list())Ee.push(guardToPromiseFn(de,ge,Se));return Ee.push(le),Me(Ee)}).then(()=>{Ee=extractComponentsGuards(Ie,"beforeRouteUpdate",ge,Se);for(const de of Ie)de.updateGuards.forEach(ve=>{Ee.push(guardToPromiseFn(ve,ge,Se))});return Ee.push(le),Me(Ee)}).then(()=>{Ee=[];for(const de of oe)if(de.beforeEnter)if(isArray(de.beforeEnter))for(const ve of de.beforeEnter)Ee.push(guardToPromiseFn(ve,ge,Se));else Ee.push(guardToPromiseFn(de.beforeEnter,ge,Se));return Ee.push(le),Me(Ee)}).then(()=>(ge.matched.forEach(de=>de.enterCallbacks={}),Ee=extractComponentsGuards(oe,"beforeRouteEnter",ge,Se,ae),Ee.push(le),Me(Ee))).then(()=>{Ee=[];for(const de of I.list())Ee.push(guardToPromiseFn(de,ge,Se));return Ee.push(le),Me(Ee)}).catch(de=>isNavigationFailure(de,8)?de:Promise.reject(de))}function ce(ge,Se,Ee){F.list().forEach(Ae=>ae(()=>Ae(ge,Se,Ee)))}function he(ge,Se,Ee,Ae,Ie){const oe=W(ge,Se);if(oe)return oe;const le=Se===START_LOCATION_NORMALIZED,de=isBrowser?history.state:{};Ee&&(Ae||le?C.replace(ge.fullPath,assign({scroll:le&&de&&de.scroll},Ie)):C.push(ge.fullPath,Ie)),R.value=ge,ie(ge,Se,Ee,le),ne()}let pe;function ye(){pe||(pe=C.listen((ge,Se,Ee)=>{if(!Pe.listening)return;const Ae=z(ge),Ie=J(Ae);if(Ie){Z(assign(Ie,{replace:!0,force:!0}),Ae).catch(noop);return}B=Ae;const oe=R.value;isBrowser&&saveScrollPosition(getScrollKey(oe.fullPath,Ee.delta),computeScrollPosition()),ue(Ae,oe).catch(le=>isNavigationFailure(le,12)?le:isNavigationFailure(le,2)?(Z(assign(Y(le.to),{force:!0}),Ae).then(de=>{isNavigationFailure(de,20)&&!Ee.delta&&Ee.type===NavigationType.pop&&C.go(-1,!1)}).catch(noop),Promise.reject()):(Ee.delta&&C.go(-Ee.delta,!1),Q(le,Ae,oe))).then(le=>{le=le||he(Ae,oe,!1),le&&(Ee.delta&&!isNavigationFailure(le,8)?C.go(-Ee.delta,!1):Ee.type===NavigationType.pop&&isNavigationFailure(le,20)&&C.go(-1,!1)),ce(Ae,oe,le)}).catch(noop)}))}let _e=useCallbacks(),ee=useCallbacks(),re;function Q(ge,Se,Ee){ne(ge);const Ae=ee.list();return Ae.length?Ae.forEach(Ie=>Ie(ge,Se,Ee)):console.error(ge),Promise.reject(ge)}function te(){return re&&R.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((ge,Se)=>{_e.add([ge,Se])})}function ne(ge){return re||(re=!ge,ye(),_e.list().forEach(([Se,Ee])=>ge?Ee(ge):Se()),_e.reset()),ge}function ie(ge,Se,Ee,Ae){const{scrollBehavior:Ie}=A;if(!isBrowser||!Ie)return Promise.resolve();const oe=!Ee&&getSavedScrollPosition(getScrollKey(ge.fullPath,0))||(Ae||!Ee)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Ie(ge,Se,oe)).then(le=>le&&scrollToPosition(le)).catch(le=>Q(le,ge,Se))}const fe=ge=>C.go(ge);let me;const be=new Set,Pe={currentRoute:R,listening:!0,addRoute:D,removeRoute:U,clearRoutes:_.clearRoutes,hasRoute:X,getRoutes:G,resolve:z,options:A,push:q,replace:K,go:fe,back:()=>fe(-1),forward:()=>fe(1),beforeEach:P.add,beforeResolve:I.add,afterEach:F.add,onError:ee.add,isReady:te,install(ge){const Se=this;ge.component("RouterLink",RouterLink),ge.component("RouterView",RouterView),ge.config.globalProperties.$router=Se,Object.defineProperty(ge.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(R)}),isBrowser&&!me&&R.value===START_LOCATION_NORMALIZED&&(me=!0,q(C.location).catch(Ie=>{}));const Ee={};for(const Ie in START_LOCATION_NORMALIZED)Object.defineProperty(Ee,Ie,{get:()=>R.value[Ie],enumerable:!0});ge.provide(routerKey,Se),ge.provide(routeLocationKey,shallowReactive(Ee)),ge.provide(routerViewLocationKey,R);const Ae=ge.unmount;be.add(ge),ge.unmount=function(){be.delete(ge),be.size<1&&(B=START_LOCATION_NORMALIZED,pe&&pe(),pe=null,R.value=START_LOCATION_NORMALIZED,me=!1,re=!1),Ae()}}};function Me(ge){return ge.reduce((Se,Ee)=>Se.then(()=>ae(Ee)),Promise.resolve())}return Pe}function extractChangingRecords(A,_){const T=[],E=[],C=[],P=Math.max(_.matched.length,A.matched.length);for(let I=0;I<P;I++){const F=_.matched[I];F&&(A.matched.find(B=>isSameRouteRecord(B,F))?E.push(F):T.push(F));const R=A.matched[I];R&&(_.matched.find(B=>isSameRouteRecord(B,R))||C.push(R))}return[T,E,C]}function useRoute(A){return inject(routeLocationKey)}const _export_sfc=(A,_)=>{const T=A.__vccOpts||A;for(const[E,C]of _)T[E]=C;return T},_hoisted_1$j={id:"tab_navigation"},_sfc_main$m={__name:"tab_navigation",setup(A){const _=useRoute(),T=[{name:"home",label:"home",path:"/",icon:"home"},{name:"reward",label:"reward",path:"/reward",icon:"reward"},{name:"promo",label:"promo",path:"/promo",icon:"tongits_btn"},{name:"wallet",label:"wallet",path:"/wallet",icon:"wallet"},{name:"account",label:"account",path:"/account",icon:"account"}];function E(C){return _.path===C}return(C,P)=>{const I=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$j,[(openBlock(),createElementBlock(Fragment,null,renderList(T,F=>createVNode(I,{key:F.name,to:F.path,class:normalizeClass(["item",[F.name,{focus:E(F.path)}]])},{default:withCtx(()=>[createTextVNode(toDisplayString(F.label),1)]),_:2},1032,["to","class"])),64))])}}},Tab_navigation=_export_sfc(_sfc_main$m,[["__scopeId","data-v-6cf7ab0a"]]),_sfc_main$l={__name:"App",setup(A){return(_,T)=>{const E=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[createVNode(E),createVNode(Tab_navigation)],64)}}};function useFetchImages(){const A=ref$1([]),_=ref$1(!1),T=ref$1(null);return{jsonData:A,fetchImages:async C=>{_.value=!0;try{const P=await fetch(C);if(P.ok){const I=await P.json();A.value=I.map(F=>({id:F[0],url:F[1]}))}else T.value=`HTTP : ${P.status}`}catch(P){T.value=P.message}finally{_.value=!1}},isLoading:_,error:T}}const _imports_0$8="/daiyanren/assets/logo-D8EmFC1i.webp",_imports_1$3="data:image/webp;base64,UklGRlYNAABXRUJQVlA4WAoAAAAwAAAAAgEAcgAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIRQEAAA2AUGvblOi1wd/Ar4E0mL+BmEBMwJDghwRqAiCBmGCwAdPgM8HQwH1fXveJiAnAXsW2jIDTWqdlhcPbtg9ijTStFOPiMNaBX+O3vSTbn3UgWZxNsj31PfAsTnq6BxmBa+uiaidJwbaMBvkOkoLwrBpsJSko70+KbX5AeproJgfWTdrZ4Pm0wfPjdSMQH451JQDzJkxWHHUICgAW5H8D6LIXArDsGcDDDfBRoHULuAnKLeDf///+//f/v/9fz6rcAKbNG0DlPQ3UleUP4zZ5GYDMN9zlAOo8pE4VAAaBYS7Bap2HxBX1GsS+x1uEjZ3UsBZhsw77pA1nWyCbOsrKAlvHDUdYOcSOccPRlWfYOR6PhKo6+cMeqyjoElVG2K/Gk9SSpIli79rT+Ev4KRPFQTWeiN/yDC21TqoCR1gWvxWMUKKosU8AVlA4IBoKAAAQMwCdASoDAXMAPm02l0ikIyUhIxYp8KANiWJu3/+NwAgRYJfxV8Jk1vg/xg9u+/P3X8CexH/M+gvTfmTcm/8j+qeq31XfdJ7gH6d9NXzAfsd+zvu3f4b9Vfc/+sXsAf07/L///1a/Yn9CT9yPTK/dD4P/65/1v289pj//xluongB2rN6EzD6A02JV3806HvQ5/cC6xRjdQkqiCum6rJcIvxrRnKL4rH0BJdbchigqrXGYtd7Fyf/7oUIrXjFBYqygcQg3nN8RISMALISqT/HD8KaMbwkXTTWOzqfKEIoTUuf/9QtISFrEtNBXdyW5guHrtnLg7BWATfFktUOJazSlcnAcMF8632P6kgzdJgm8j7Ee4ElCHt75SVC2Ubfne8X4Qh0qmFGBanlbyGtpUfRsA+RAFMjpnsWagrEATHaRMPSXLGjqXaAQfhJe1sFnd9HDsh/qJM1dqoAWcrsm5YIY4qmjAe21IrNmyJgR8KRguf6qZEXJQXRIXfhhtWnsn1ZK3rEuOY2m+4dPAwLQjqc41j66KHLdJr29YSxwNviZsAAA/v72Xf4QdmNd/3keE0SmBm0sOiQZds7Pz1YWlM8dh7iudIKOUGI1aQaZ1+/vWVAxlPljq2yBIK99NNyLQNAjATyVHR1k6tu6KvNRFoEJWJ4sjIwo+OB+fnEyai08qyCbw6I3dsdAv0TxZvysMvzfWt/QB87HmGw+4NhPp1VA26dRoX52md2Em2mdknAmFg/iShp51jf//qSVnuNubwVZkaFMNk712vwGwl+dUvDp+BBmeinQ2RIacqoKg2CnecxIM5wt47WXPXnNdrKqjOxO4qM7Yjo6G81JM0XMjnxQCudjxuqivEFe43WQwB8V1/gofqMgVL56TutUWvDxujDt57Zqnyu/cK1zPiURZKBlXNFItmJPKA/v/O1/rZOfStZQX+3rBKhnjGtCizUcPPuL1pUfhy6TlbiT7dlKslkJwRo7uuc/cyo4lY8xJCdwMnv8cxdXSCWEyZYsiqxfgk+hx/vmydZ/TvOij2eZKkZQP1qzFVTECYbMSDBFtvrAzH4CqQstN/xLGomh2YaA8YpHaLM9m/E+7JBX/7Lm1uUqUpXi4kEryK4A2AYzTEwbSG7YUw4Ai5wxf68Kobp/XuisR9oQE7U9qvdoukFDN7w6/Y8xbxGaGs+eV4DAqLAyeQkCtht+PGS/bY8mODa1DTp3q90FmLXg+CNVZIVfnim8lr763OE++UZrDvNK96LzgbKGzZ3SXR7iju6tc7eb3OVuQsLNnq75L0akVtGSHXsIHiLz1bFmBSBU0UXlqLiyp4VxlRKx7v3ZkWFp/tv7gdqBdXz/DqI+E2VFRNc1j3Cu7a1bT1p1QhKc3vym8Cx9BzT8z69HVZkd9/qSf4+hJHxK+964kivERDJmjnVqojnwnocCeDNkKIl9Tjsf+B2vDAOLzpkrsj4Nr2WERcY9DevDKvu/Mzyz8XJWiwkgI2T8HR4Xef3r0upW7/1GpciQHyU+RA0lCFbyU91dYF5g/pGIMwEQzvJEhqSlhDjfNY+da7fJ2zY9m01QBA317/CayZcaeG1NglG/Yvtbu9HvyhMCcAOuC9EJCfyGK5+SfQGvpmu5GEFUxB/acy89mqZIFJ/d1Dh82qVH/fvpdQfYhACrH54jUyS2JVOnkmbB1QD4t/tqbMsakrsMX7aizZAPhE3gU1nVnC5taP4l79j+Y3RWr13hHCYgdqKTTs3J+CNUSy4fzZIYf8u7cImMlHiAsuOH0fPbbs8IkLAdRdaq1nnmOWpDM2HEqFFtHS/MX5T76jhlzNVwbcK2rMXWJhGSVI8GHYZEq6RgTwyYDd54Ue98Vc1gdH6UTjsZ3efe301WPpQ/+va+8MDCxEiSA+09+I6iMg71cHVooH7MozRclizkeOKe/kDS5Xu1HpVefqkBIi4AI+UUMiwjwzliwTkgztJQo4SAqVz5N7yHvc70fl9i3WxqCSCJgXf9SXR30j9XluMQjzRQYDwvVN55poxqRQUTjlCewOl6JxBTEDd68OHl+9ii1IIemjIMHy/jJzl4kCDQITG6044vBzAJYP9jmODjVZbCfc5ImQkEi+qZFlPMcTcTNp56p39Z+s8k6KM+/jVz+0rA1yKmAuoBzrrb3/z2aXYNJAheRbkUf8NNM3wM3MayMpkve8yg6AIAWQqmJezYGuXRrkb4R00ffmnGPJXHJx9ktZP7A658Y0RQ6KKY3T7H1ZVklaQmoCSgQ5aeU4bH8wYnq8kqRcgiPl5NjJ9tsZQxIrJL/9unH88hRMH0m7pTXXF7PYfqKhJvLZFgQQIxl/sePpvyClALkjYBNV3ZTkA9os3GkSji3YD/Kv/Rg8hfe8iSp57v4LjmI/ya4k7/jgVOo9AfXInzLDREMdkFwqNPh4nfE1BajBjIAHmSIyWLD37glFNB0WjW1eatO3WIuVFPxhr6b5E7ZE+byrWDVFMRPhAx4nKlNwyL/X9xz3Pwh9/QSxBnetf/X7Be+C446G6aOnVeBJ5VyxdSvVhOUkQn2iUZJOamNxZFQ5L01S9AyxN6N0Zd2cP/25JrpTIYdq3xlXDVEjIPTyjdqe9Dpijaq026RhZnbUCQsZrtm0ns145ki62mCXmvjUZ9eETLJKU94KQdECBHGKnkkvFH6+XjahDnZiH8GGXb2HrID2+I7T+McKkR+Iygmgw6jCtNS9Tu7Yuc6wcp9Za1Qxm16y9WROMSE95Xgme7EKR97O/uezc+ORkj98oLMYbtcMuwBsFw+wK75r3fcTClAlg/RfuJ9o9/k27RFSojzDcfTrfgX3wik7yGj7jtPYClufRUbAVTSxZS77riXMnSQe/4z77I54FUrAEboHmdSM7eP4cKQ6Qd7W7oDXdHW6GML6LhebG1O2nf/8wHFHsJ6C+sEF7Z1BNdY4zSCxjEiaB+sqhSAcPMpLesyqbmaQzQNeGdBW+cV2TBCFmQwHbNRlhA/aSWfN5Adpao1hlPMpHX1alnofS+OwDYERtNB/hEMmN8lPeq583jcJ5ylCaoy927qaqoM07/5tgTMNdRT3a8EbZD0ypHzeO/Ay9tF1GzGp9JkrPJm5h4XrYYzzmvE7iZLxqU2i0Q/4GNzwinSfZSs6xDq+w4fkQ3Tk9Mrw5/Q2u15TKzrJ5YYhxzv0XFxJvJ8GWOcih5CdWi0tWE9qRJ/RxuV3/CGaWPQsn5FCa/TFaxOgsyOlto+VcZPvaBWCxdYSIagIXKc/m1kx1b1kabreWDwjFhJjZ7zheWUs/cGQmQCsjjBZnm7n+/XpDTxzj0uAfLP/s2/2C5QGgeAi2eAlI6WqvGpCDlMVrPs75c5BEAD5UhsyLn0rc2oL0jX3U+TFZFTBqz9UeEgfe/iHaBZZUkXajAAAAhpsV4r//4jhn5aZfSOZjfqpaaxMEbV0Urid64LKAAAAA=",_imports_2$3="/daiyanren/assets/btn-search-CDXuOXdW.webp",_imports_3$3="/daiyanren/assets/btn-service-C15TZCVT.webp",_hoisted_1$i={class:"popup"},_sfc_main$k={__name:"Popup",setup(A){const _=()=>{const T=new CustomEvent("close",{bubbles:!0});window.dispatchEvent(T)};return(T,E)=>(openBlock(),createElementBlock("div",_hoisted_1$i,[createBaseVNode("div",{class:"popup-overlay",onClick:_}),createBaseVNode("div",{class:"popup-content"},[E[0]||(E[0]=createBaseVNode("h2",null,"",-1)),E[1]||(E[1]=createBaseVNode("p",null,"",-1)),createBaseVNode("button",{onClick:_},"")])]))}},Popup=_export_sfc(_sfc_main$k,[["__scopeId","data-v-290eebdf"]]),_hoisted_1$h={id:"top"},_hoisted_2$5={class:"left"},_hoisted_3$4={id:"logo",class:"inline"},_sfc_main$j={__name:"top",props:{msg:String},setup(A){const _=ref$1(!1),T=()=>{_.value=!0},E=()=>{_.value=!1};return window.addEventListener("close",E),(C,P)=>{const I=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[_.value?(openBlock(),createBlock(Popup,{key:0,onClose:E})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$h,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$4,[createVNode(I,{to:"/"},{default:withCtx(()=>P[0]||(P[0]=[createBaseVNode("img",{src:_imports_0$8},null,-1)])),_:1})])]),createBaseVNode("div",{class:"right"},[createBaseVNode("div",{id:"btn-login",class:"inline top-btn",onClick:T},"Sign in"),P[1]||(P[1]=createStaticVNode('<div id="btn-reg" class="inline top-btn" data-v-77d3ea17><img src="'+_imports_1$3+'" width="100%" data-v-77d3ea17></div><div id="btn-search" class="inline top-btn" data-v-77d3ea17><img src="'+_imports_2$3+'" width="100%" data-v-77d3ea17></div><div id="btn-service" class="inline top-btn" data-v-77d3ea17><img src="'+_imports_3$3+'" width="100%" data-v-77d3ea17></div>',3))])])],64)}}},Top=_export_sfc(_sfc_main$j,[["__scopeId","data-v-77d3ea17"]]),_imports_0$7="/daiyanren/assets/bottom-BHzdyFlL.webp",_sfc_main$i={},_hoisted_1$g={id:"bottom"};function _sfc_render$5(A,_){return openBlock(),createElementBlock("div",_hoisted_1$g,_[0]||(_[0]=[createBaseVNode("img",{src:_imports_0$7,width:"100%"},null,-1)]))}const Bottom=_export_sfc(_sfc_main$i,[["render",_sfc_render$5],["__scopeId","data-v-5ededb55"]]),_hoisted_1$f={class:"fade-wrapper"},_hoisted_2$4=["src"],_hoisted_3$3={id:"page"},_sfc_main$h={__name:"Banner",setup(A){const _=["image1.webp","image2.webp","image3.webp"],T=ref$1(0),E=_.length;let C=null;const P=()=>{C=setInterval(()=>{T.value=(T.value+1)%E},5e3)},I=()=>clearInterval(C);let F=0,R=0;const B=L=>{I(),F=L.touches[0].clientX},O=L=>{R=L.touches[0].clientX-F},V=()=>{R>50?T.value=(T.value-1+E)%E:R<-50&&(T.value=(T.value+1)%E),P(),R=0};return onMounted(P),onUnmounted(I),(L,D)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{id:"banner",onTouchstart:B,onTouchmove:O,onTouchend:V},[createBaseVNode("div",_hoisted_1$f,[(openBlock(),createElementBlock(Fragment,null,renderList(_,(U,G)=>createBaseVNode("img",{key:G,src:`./images/${U}`,class:normalizeClass(["fade-image",{active:G===T.value}])},null,10,_hoisted_2$4)),64))])],32),createBaseVNode("div",_hoisted_3$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(E),(U,G)=>(openBlock(),createElementBlock("span",{key:G,class:normalizeClass({focus:G===T.value})},null,2))),128))])],64))}},Banner=_export_sfc(_sfc_main$h,[["__scopeId","data-v-8196a281"]]),_imports_0$6="data:image/webp;base64,UklGRkYIAABXRUJQVlA4WAoAAAAwAAAAQQAAQQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIhAIAAA2gVVvb9LbZz4fAEBQEMYOoCJIikIJgQOCWQYPANoLaCKowUBkIghg8F/+v6XfHu4iYAP+fbjdru+fd4e2sHmG9WT0/vZk/zK8efDu+jQdnbjc/vYnVlmbO/ebbW1hDo4Kv+90b2CCamH34dXmrFXRUZtb74+LWpuloM7F9WtyXGZqYff/n0lZ3c4Gmcb9f2ta0hA5hdVjaZtKkjTS4Oy7sHk1IG2/zC2IaNd7EGk1FJWa3ZxwP+9utIdJGnHw842519/T9eKPNRJNSoXHhavvx58NtPs1Eh6CGy1ePnw+3+GS2SVMRTaOZNDNWD58vWZ31YaaDEE2HEBqaGWu7s1aP56GSRqOGQEUIKvj621kPLg4dRJpKg1Q0dJi+//Os7WWaoBIijXQgGvOrw1nXDBppOjQ0odF0zF3x+8uJu9/pJNKBpmka0kTRsL9sfzx1T8yHNNGYDaIJflx2YaUxbVKCCg1i+nKjEDTSxOkmKjQOhxvRSRCNiqCS0sHOrTs0TdNAoAk6muD1ZtGBSBNNQ5yssLtZE9NKGR3QIB2wc/Ogo0nTFA2haUyfb6eRjoaIiIaOJg12CwgigkYjdDQR7N2+Yr4RUtHRgYYfC0gbmsZ86BB04GUBYtoBFUhFA4fDEhqklRoUhiamO0uMaRqqyYQ0HXhdQAMNmnSYNmhgt4CoQMRsGU7vLLCRJkqaIKhk5nkJEWmEBk1DaCa7JaAGjbQSce7eQgMpw3yDTH4sRUMHzUyHhoaXRTRmQweNaWg4HK714d2JIzRi2qEJommCnWtvP5yYhs50aMx2oOH1Ksc7V4xpiPkQ4bC/yvPmGtc/fHbVX959vFvK4fXJdY9fX49L+W8bVlA4IMwDAADQFgCdASpCAEIAPhkKg0EhBerVxAQAYS0AGnID72bj19a+5n7Gf5XqpiX9OP3v8wv7Z7KvsA8wD9Ov7XugP1V/4H+I9479QPY16AH6u+rF/ivYf/bv2AP4B/YPSZ/6P9f+CP9sPRl/6ucZ/0DtOb74RRQ84N10ZgYC66TR0MaqfHGx1zD8P5ibe03rxUCHjsI4msMnF/B/5Lugan3cL+VRIR2e0fieuXA+jOQz+bmSLHguOQbEN42hV07PBqjQgAD+/7sALf/mVmYmdFwAh0L2cvM8H3PEd528KXve8OX/3vg4oBviF4ilyC1mz/MHqIynXdpah2Xl4aZ4tfXbwc4x5rao4nqCQP/+C1sATwstPZZbLcS83xiIh3Gz/P4Uhf+ShJlos55gA3sFctZOnbg7VWpca9bcb2sinSLq8mslfSl6Jaq/v1RCixzt8S8xnzgD//mpsUl2ir1VN/JH5E8MMZMQEqysZHNyECmWCEXsuF9ePArGlA4/hoyptH/9OBKQZ1xGQnwLhOPcRFBuLaj3ONXHJeW7xXE2YN5B7y+hCZ75FsuC94A2xg0HPtCu6ZHMzRqxanM9GBpCNwBp7MzUXyOyqi1Oc+kICY93NGjVzJbvJo90WSFGptOeStf3v04+/QdDdjGTXxLE6yz7FW6w1OlrLDsMsyZylqlXTnWmFxh5g8OWLXdto+mv8rOZVowwibyDjfSnmF4x9Yf7LrkIk2D/zqe95JLCHO4ngzjP/C7UIYeIxl1xpA7+JTOGYlKkPX432oUhbGghJk/l/htOVXCczYKePbEsdJXre2ynk+9t3cyOkdl8bVG92lJZ7n4+mfaBtjB+S+1heoiDcyW23IPSRJAZ22rEIMi5LXHeoR5nS9sNK3aXE2xv/+UMkf5CxOV64oAkGWu5Novo8KBf0fXet+EsHm5J6rm0OM3ROB0yix2B8CAdc3D9+Paok6PxwVnhrd1y11lOy3UUaR6PCHKDJUcCvwyIf2QYHghuyytCxgpoTcb7Wn2gXuxCRpSrPhvQCBiG6ODPzPM4aiONFbB7oP//b2umuJ0yg41v+JTdhcMJJBnQbXZm7IJ1TgD/BHNS+yM5sw/KyqfC506GashqBhOA+to7OBMMw7BUSrjJn7uqrPaBu++JcPKzL4SH4E8CL7wX80RrELNB2ym4z4DGJpsdOIyqWIGgcBXsPan7E5CwBr/1H/GYS3rbCb+UaFQEveR69Q1KiPIEoaWebb4t6E7oODPHCwQ9JqtQpBzkhMZc70isV8etHKWpOpf/zVIjlyziOSgAAAA=",_hoisted_1$e={id:"recommend"},_hoisted_2$3={class:"scroll-content"},_hoisted_3$2=["src"],_sfc_main$g={__name:"recommend",setup(A){const _=ref$1(null),T=[new URL("/daiyanren/assets/Color%20Game-CSAes9Nt.webp",import.meta.url).href,new URL("/daiyanren/assets/JILI_Mines-d1_C-NHe.webp",import.meta.url).href,new URL("/daiyanren/assets/Jackpot%20Fishing-BKC4kSej.webp",import.meta.url).href,new URL("/daiyanren/assets/Texas-CC1orZST.webp",import.meta.url).href,new URL("/daiyanren/assets/Lucky9-BE_MNCbm.webp",import.meta.url).href,new URL("/daiyanren/assets/JILI_Color%20Game-CkgIPJI_.webp",import.meta.url).href],E=computed(()=>[...T,...T]);let C=null,P=!1,I=!1,F=null;function R(){const U=_.value;if(!U||P||I||U.scrollWidth===0)return;U.scrollLeft+=.5;const G=U.scrollWidth/2;U.scrollLeft>=G&&(U.scrollLeft-=G)}function B(){O(),C=setInterval(R,16)}function O(){clearInterval(C),C=null}function V(){P=!0,O()}function L(){P=!1,I=!0,clearTimeout(F),F=setTimeout(()=>{I=!1,B()},2e3)}function D(){var X;const U=((X=_.value)==null?void 0:X.querySelectorAll("img"))||[],G=Array.from(U).map(z=>new Promise(Y=>{if(z.complete)return Y();z.onload=Y,z.onerror=Y}));return Promise.all(G)}return onMounted(async()=>{await nextTick(),await D(),_.value.scrollLeft=1,B()}),onBeforeUnmount(()=>{O(),clearTimeout(F)}),(U,G)=>{const X=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$e,[G[0]||(G[0]=createBaseVNode("div",{id:"recommend-title"},[createBaseVNode("div",{class:"ico inline"},[createBaseVNode("img",{src:_imports_0$6,width:"100%"})]),createBaseVNode("div",{class:"title inline"},"Recommend")],-1)),createBaseVNode("div",{ref_key:"scrollEl",ref:_,class:"scroll-container",onPointerdown:V,onPointerup:L,onPointercancel:L,onPointerleave:L},[createBaseVNode("div",_hoisted_2$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,(z,Y)=>(openBlock(),createElementBlock("div",{key:Y,class:"item"},[createVNode(X,{to:"/game"},{default:withCtx(()=>[createBaseVNode("img",{src:z},null,8,_hoisted_3$2)]),_:2},1024)]))),128))])],544)])}}},Recommend=_export_sfc(_sfc_main$g,[["__scopeId","data-v-c1d35b18"]]),_imports_0$5="/daiyanren/assets/Tongits-9TwT1Tmq.webp",_imports_1$2="/daiyanren/assets/Poker-SqUmxJ-p.webp",_imports_2$2="/daiyanren/assets/Slot-XKikKsjy.webp",_imports_3$2="/daiyanren/assets/Casino-BYJ1f8RR.webp",_imports_4$2="/daiyanren/assets/Live-XZ_euehB.webp",_imports_5$1="/daiyanren/assets/Sports-DdY3vjwC.webp",_sfc_main$f={};function _sfc_render$4(A,_){return _[0]||(_[0]=createStaticVNode('<div id="mainenter" data-v-83929ad1><div id="a1" class="item" data-v-83929ad1><img src="'+_imports_0$5+'" width="100%" data-v-83929ad1></div><div id="a2" class="item" data-v-83929ad1><img src="'+_imports_1$2+'" width="100%" data-v-83929ad1></div><div id="a3" class="item" data-v-83929ad1><img src="'+_imports_2$2+'" width="100%" data-v-83929ad1></div><div id="a4" class="item" data-v-83929ad1><img src="'+_imports_3$2+'" width="100%" data-v-83929ad1></div><div id="a5" class="item" data-v-83929ad1><img src="'+_imports_4$2+'" width="100%" data-v-83929ad1></div><div id="a6" class="item" data-v-83929ad1><img src="'+_imports_5$1+'" width="100%" data-v-83929ad1></div></div><div class="clear" data-v-83929ad1></div>',2))}const Mainenter=_export_sfc(_sfc_main$f,[["render",_sfc_render$4],["__scopeId","data-v-83929ad1"]]),_imports_0$4="data:image/webp;base64,UklGRsIFAABXRUJQVlA4WAoAAAAwAAAAQQAAQQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIEAMAAA0kAUmKsoiIWFa27XkiRUIcTBxMHdBRACgoKPhR0KkCqAJAwRYFWxRsx0HGQVbBXmne7/2+smdzFBEOHMltG6ZIVDkfyaMfARDEf7mFiChFRES4H5qPT//DqipNUawcjs5P/e1VoUquG+d8NXaxkPgFkRzq2z2+ZqUwbitksGu2ybmz4BN2TQ7lJZN6vZlJSLKHk3Oh8BChtPNk6fnduhChVIfktjkVfBK7ccn5TNHAZTO41J01dqEzFBMqtD7a6Kyezo2VV7iEtuYTWSskZ/tz7t5kNuqECwJ0YhYEPMq5sWZ8mCBuHbPzMk2A2Rh9vu3JrpSFfSNNypfw9RdhzUJdTsm5x9rIqe1Fm8rA7IeLay1OmGabtW5gFMe/yb/XzJ2Cx4ojUSa9CXmqX9RH+po2bWCgH+z7O2gvm5IbfgILWyZDHRB0gTuJBzxX2o8lZwmoiBkeoNHiP89Bg8ke+BSl36DNIGUuTRUH3fiSmVhOJmmDiIHLrBPdVTnnPWRXHB7+FfsA2ZICZSMxbGQ+RZHzvRJjzghzY9bOnBlsHT6SDVlLS3cBKORnzgxlVaQlDfqNq2LFDUFLfvKILQQmimHYSKh1ws17AQrtcIeRI0vXKLNbn6L74xloTDjafAiMdsf3GykFB51wtPnQb4gDbLIAbe+FC45cxib3/QtuZdUyI66UBxG9bhjjWNy0vQYLqDpiORRQWK4HcE8+BBVUH3toTgvouUsQ2BT1ATO2h1apsRF0V3TiFrNi3lBFqILiq+i8V88jHZFuVYQqqOB4HfuIkmqO/LD9jwu4uTukFF2FIBq86Fr42VyWK29YKek4rhf5pd9YB9gCo+8K5TYXDKYJP0tT6STbBjPDWslWo4+WDIcFv30Za5bp2V7rjo+xoFyV8QUuC/M+iCbJZLTbVlDD+U40Rn3myYRusYJqkTwuMwV8F1CEWcYLKt21StYSxep2TWD8ZjOX6tlKBvcSH0/Y7V63YnJapNfP78Iu9RdGih+oD9VcEja3svM+vz8WsOpjMJLSyobU7EXOD/oB+QBWUDggvAAAANAHAJ0BKkIAQgA+ZSiQRaQioZo0cEAGRLOAalbYXZ92m7zDkVfQD6AAVY+Xcdsop1WGpzCIpXNeuPXSZydOk/dBXgnYvw4AAP7LQ+7AzpIOi28CKXetU23r9R+dvuBnWYFwy/Ouf8lgIDvDYmxSBLAr0jRewFbwlXQQ6X/45ZyJhgFOAaRJtx5haDeDEYkkh2QpMXPzyXw83925X8X07/yVv//eKVRSKn8t+8tTUJ28Ls3g28KE/+3qAAAA",_hoisted_1$d={class:"scrolling-warp"},_hoisted_2$2={class:"scrolling-title"},_hoisted_3$1={class:"title inline"},_hoisted_4$1={class:"all"},_hoisted_5={class:"scrolling-list"},_hoisted_6=["src"],_sfc_main$e={__name:"scrolling_home",props:{tit:String,items:Array},setup(A){return(_,T)=>{const E=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$2,[T[1]||(T[1]=createBaseVNode("div",{class:"ico inline"},[createBaseVNode("img",{src:_imports_0$4,width:"100%"})],-1)),createBaseVNode("div",_hoisted_3$1,toDisplayString(A.tit),1),createBaseVNode("div",_hoisted_4$1,[createVNode(E,{to:"/game_list"},{default:withCtx(()=>T[0]||(T[0]=[createTextVNode("All")])),_:1})])]),createBaseVNode("div",_hoisted_5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(A.items,(C,P)=>(openBlock(),createElementBlock("span",{key:C.id},[createVNode(E,{to:"/game"},{default:withCtx(()=>[createBaseVNode("img",{src:C.url,width:"100%",loading:"lazy"},null,8,_hoisted_6)]),_:2},1024)]))),128))])])}}},New_game=_export_sfc(_sfc_main$e,[["__scopeId","data-v-c2c0ce70"]]),_imports_0$3="/daiyanren/assets/Game%20Providers-r3AOSeam.webp",_sfc_main$d={},_hoisted_1$c={id:"game_providers"};function _sfc_render$3(A,_){return openBlock(),createElementBlock("div",_hoisted_1$c,_[0]||(_[0]=[createBaseVNode("img",{src:_imports_0$3,width:"100%"},null,-1)]))}const Game_providers=_export_sfc(_sfc_main$d,[["render",_sfc_render$3],["__scopeId","data-v-01dd73a2"]]),_imports_0$2="/daiyanren/assets/About%20GameZone-goSm_sgG.webp",_sfc_main$c={},_hoisted_1$b={id:"about_gamezone"};function _sfc_render$2(A,_){return openBlock(),createElementBlock("div",_hoisted_1$b,_[0]||(_[0]=[createBaseVNode("img",{src:_imports_0$2,width:"100%"},null,-1)]))}const About_gamezone=_export_sfc(_sfc_main$c,[["render",_sfc_render$2],["__scopeId","data-v-0b987486"]]),_imports_0$1="/daiyanren/assets/Biggest%20Winings-O4djG0wa.webp",_sfc_main$b={},_hoisted_1$a={id:"biggest_winings"};function _sfc_render$1(A,_){return openBlock(),createElementBlock("div",_hoisted_1$a,_[0]||(_[0]=[createBaseVNode("img",{src:_imports_0$1,width:"100%"},null,-1)]))}const Biggest_winings=_export_sfc(_sfc_main$b,[["render",_sfc_render$1],["__scopeId","data-v-9762e30a"]]),_hoisted_1$9={id:"wrap"},_sfc_main$a={__name:"home",setup(A){const{jsonData:_,fetchImages:T}=useFetchImages(),{jsonData:E,fetchImages:C}=useFetchImages(),{jsonData:P,fetchImages:I}=useFetchImages();return onMounted(()=>{T("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),C("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),I("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(F,R)=>(openBlock(),createElementBlock("div",_hoisted_1$9,[createVNode(Top,{msg:"Hello World"}),createVNode(Banner),createVNode(Recommend),createVNode(Mainenter),createVNode(New_game,{tit:"GZ Originals",items:unref(_)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Biggest_winings)],1024)),createVNode(New_game,{tit:"Table Game",items:unref(E)},null,8,["items"]),createVNode(New_game,{tit:"New Game",items:unref(P)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Game_providers)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(About_gamezone)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(Bottom)],1024))]))}},_imports_1$1="/daiyanren/assets/Color%20Game-CSAes9Nt.webp",_imports_2$1="/daiyanren/assets/green-joker-CB29A2If.webp",_imports_3$1="/daiyanren/assets/green-pusoy-CFVk24gc.webp",_imports_4$1="/daiyanren/assets/green-texas-33ZuLDm3.webp",_imports_5="/daiyanren/assets/green-tongits-DUg54LvJ.webp",_imports_6="/daiyanren/assets/Jackpot%20Bingo-BgahXjly.webp",_imports_7="/daiyanren/assets/Jackpot%20Fishing-BKC4kSej.webp",_imports_8="/daiyanren/assets/JILI_Color%20Game-CkgIPJI_.webp",_imports_9="/daiyanren/assets/JILI_Mines-d1_C-NHe.webp",_imports_10="/daiyanren/assets/Lucky%20Hilo-9ou0b5mH.webp",_imports_11="/daiyanren/assets/Lucky9-BE_MNCbm.webp",_imports_12="/daiyanren/assets/Mega%20Fishing-IwO63i97.webp",_imports_13="/daiyanren/assets/Mines-BF3GnRZO.webp",_imports_14="/daiyanren/assets/Piggy%20Tap-Bw9PV_ny.webp",_imports_15="/daiyanren/assets/Pusoy-BsfIYJFa.webp",_imports_16="/daiyanren/assets/Texas-CC1orZST.webp",_imports_17="/daiyanren/assets/Texas%20Plus-DiRujbbx.webp",_imports_18="/daiyanren/assets/Tongits%20Joker-CLici77f.webp",_imports_19="/daiyanren/assets/Tongits%20Plus-C_jT0bwB.webp",_sfc_main$9={},_hoisted_1$8={id:"all_game"};function _sfc_render(A,_){return openBlock(),createElementBlock("div",_hoisted_1$8,_[0]||(_[0]=[createStaticVNode('<div id="all_game-title" data-v-10b4c672><div class="ico inline" data-v-10b4c672><img src="'+_imports_0$4+'" width="100%" data-v-10b4c672></div><div class="title inline" data-v-10b4c672>All Game</div></div><div id="all_game-list" data-v-10b4c672><span data-v-10b4c672><img src="'+_imports_1$1+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_2$1+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_3$1+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_4$1+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_5+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_6+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_7+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_8+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_9+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_10+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_11+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_12+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_13+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_14+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_15+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_16+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_17+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_18+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+_imports_19+'" width="100%" data-v-10b4c672></span></div>',2)]))}const All_games=_export_sfc(_sfc_main$9,[["render",_sfc_render],["__scopeId","data-v-10b4c672"]]),_hoisted_1$7={id:"wrap",class:"content"},_sfc_main$8={__name:"game_list",setup(A){return(_,T)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[createVNode(Top,{msg:"Hello World"}),createVNode(Banner),createVNode(All_games),createVNode(Bottom)]))}},game_list=_export_sfc(_sfc_main$8,[["__scopeId","data-v-a4748cb0"]]),_hoisted_1$6={id:"wrap"},_sfc_main$7={__name:"reward",setup(A){const _=ref$1(!1),T=()=>{_.value=!1};window.addEventListener("close",T);const{jsonData:E,fetchImages:C}=useFetchImages(),{jsonData:P,fetchImages:I}=useFetchImages(),{jsonData:F,fetchImages:R}=useFetchImages();return onMounted(()=>{C("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),I("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),R("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(B,O)=>(openBlock(),createElementBlock(Fragment,null,[_.value?(openBlock(),createBlock(Popup,{key:0,onClose:T})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$6,[createVNode(Top,{msg:"Hello World"}),createVNode(Banner),createVNode(Recommend),createVNode(Mainenter),createVNode(New_game,{tit:"GZ Originals",items:unref(E)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Biggest_winings)],1024)),createVNode(New_game,{tit:"Table Game",items:unref(P)},null,8,["items"]),createVNode(New_game,{tit:"New Game",items:unref(F)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Game_providers)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(About_gamezone)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(Bottom)],1024))])],64))}},reward=_export_sfc(_sfc_main$7,[["__scopeId","data-v-7e6f536b"]]),_hoisted_1$5={id:"wrap"},_sfc_main$6={__name:"tongits",setup(A){const _=ref$1(!1),T=()=>{_.value=!1};window.addEventListener("close",T);const{jsonData:E,fetchImages:C}=useFetchImages(),{jsonData:P,fetchImages:I}=useFetchImages(),{jsonData:F,fetchImages:R}=useFetchImages();return onMounted(()=>{C("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),I("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),R("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(B,O)=>(openBlock(),createElementBlock(Fragment,null,[_.value?(openBlock(),createBlock(Popup,{key:0,onClose:T})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$5,[createVNode(Top,{msg:"Hello World"}),createVNode(Banner),createVNode(Recommend),createVNode(Mainenter),createVNode(New_game,{tit:"GZ Originals",items:unref(E)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Biggest_winings)],1024)),createVNode(New_game,{tit:"Table Game",items:unref(P)},null,8,["items"]),createVNode(New_game,{tit:"New Game",items:unref(F)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Game_providers)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(About_gamezone)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(Bottom)],1024))])],64))}},tongits=_export_sfc(_sfc_main$6,[["__scopeId","data-v-ee1531c1"]]),_hoisted_1$4={id:"wrap"},_sfc_main$5={__name:"wallet",setup(A){const _=ref$1(!1),T=()=>{_.value=!1};window.addEventListener("close",T);const{jsonData:E,fetchImages:C}=useFetchImages(),{jsonData:P,fetchImages:I}=useFetchImages(),{jsonData:F,fetchImages:R}=useFetchImages();return onMounted(()=>{C("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),I("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),R("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(B,O)=>(openBlock(),createElementBlock(Fragment,null,[_.value?(openBlock(),createBlock(Popup,{key:0,onClose:T})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$4,[createVNode(Top,{msg:"Hello World"}),createVNode(Banner),createVNode(Recommend),createVNode(Mainenter),createVNode(New_game,{tit:"GZ Originals",items:unref(E)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Biggest_winings)],1024)),createVNode(New_game,{tit:"Table Game",items:unref(P)},null,8,["items"]),createVNode(New_game,{tit:"New Game",items:unref(F)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Game_providers)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(About_gamezone)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(Bottom)],1024))])],64))}},wallet=_export_sfc(_sfc_main$5,[["__scopeId","data-v-312265d8"]]),_hoisted_1$3={id:"wrap"},_sfc_main$4={__name:"account",setup(A){const _=ref$1(!1),T=()=>{_.value=!1};window.addEventListener("close",T);const{jsonData:E,fetchImages:C}=useFetchImages(),{jsonData:P,fetchImages:I}=useFetchImages(),{jsonData:F,fetchImages:R}=useFetchImages();return onMounted(()=>{C("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),I("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),R("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(B,O)=>(openBlock(),createElementBlock(Fragment,null,[_.value?(openBlock(),createBlock(Popup,{key:0,onClose:T})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_1$3,[createVNode(Top,{msg:"Hello World"}),createVNode(Banner),createVNode(Recommend),createVNode(Mainenter),createVNode(New_game,{tit:"GZ Originals",items:unref(E)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Biggest_winings)],1024)),createVNode(New_game,{tit:"Table Game",items:unref(P)},null,8,["items"]),createVNode(New_game,{tit:"New Game",items:unref(F)},null,8,["items"]),(openBlock(),createBlock(KeepAlive,null,[createVNode(Game_providers)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(About_gamezone)],1024)),(openBlock(),createBlock(KeepAlive,null,[createVNode(Bottom)],1024))])],64))}},account=_export_sfc(_sfc_main$4,[["__scopeId","data-v-d6c444b9"]]),scriptRel="modulepreload",assetsURL=function(A){return"/daiyanren/"+A},seen={},__vitePreload=function(_,T,E){let C=Promise.resolve();if(T&&T.length>0){let I=function(B){return Promise.all(B.map(O=>Promise.resolve(O).then(V=>({status:"fulfilled",value:V}),V=>({status:"rejected",reason:V}))))};document.getElementsByTagName("link");const F=document.querySelector("meta[property=csp-nonce]"),R=(F==null?void 0:F.nonce)||(F==null?void 0:F.getAttribute("nonce"));C=I(T.map(B=>{if(B=assetsURL(B),B in seen)return;seen[B]=!0;const O=B.endsWith(".css"),V=O?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${B}"]${V}`))return;const L=document.createElement("link");if(L.rel=O?"stylesheet":scriptRel,O||(L.as="script"),L.crossOrigin="",L.href=B,R&&L.setAttribute("nonce",R),document.head.appendChild(L),O)return new Promise((D,U)=>{L.addEventListener("load",D),L.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${B}`)))})}))}function P(I){const F=new Event("vite:preloadError",{cancelable:!0});if(F.payload=I,window.dispatchEvent(F),!F.defaultPrevented)throw I}return C.then(I=>{for(const F of I||[])F.status==="rejected"&&P(F.reason);return _().catch(P)})};var ExtensionType$1=(A=>(A.Application="application",A.WebGLPipes="webgl-pipes",A.WebGLPipesAdaptor="webgl-pipes-adaptor",A.WebGLSystem="webgl-system",A.WebGPUPipes="webgpu-pipes",A.WebGPUPipesAdaptor="webgpu-pipes-adaptor",A.WebGPUSystem="webgpu-system",A.CanvasSystem="canvas-system",A.CanvasPipesAdaptor="canvas-pipes-adaptor",A.CanvasPipes="canvas-pipes",A.Asset="asset",A.LoadParser="load-parser",A.ResolveParser="resolve-parser",A.CacheParser="cache-parser",A.DetectionParser="detection-parser",A.MaskEffect="mask-effect",A.BlendMode="blend-mode",A.TextureSource="texture-source",A.Environment="environment",A.ShapeBuilder="shape-builder",A.Batcher="batcher",A))(ExtensionType$1||{});const normalizeExtension$1=A=>{if(typeof A=="function"||typeof A=="object"&&A.extension){if(!A.extension)throw new Error("Extension class must have an extension object");A={...typeof A.extension!="object"?{type:A.extension}:A.extension,ref:A}}if(typeof A=="object")A={...A};else throw new Error("Invalid extension type");return typeof A.type=="string"&&(A.type=[A.type]),A},normalizeExtensionPriority=(A,_)=>normalizeExtension$1(A).priority??_,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...A){return A.map(normalizeExtension$1).forEach(_=>{_.type.forEach(T=>{var E,C;return(C=(E=this._removeHandlers)[T])==null?void 0:C.call(E,_)})}),this},add(...A){return A.map(normalizeExtension$1).forEach(_=>{_.type.forEach(T=>{var P,I;const E=this._addHandlers,C=this._queue;E[T]?(I=E[T])==null||I.call(E,_):(C[T]=C[T]||[],(P=C[T])==null||P.push(_))})}),this},handle(A,_,T){var I;const E=this._addHandlers,C=this._removeHandlers;if(E[A]||C[A])throw new Error(`Extension type ${A} already has a handler`);E[A]=_,C[A]=T;const P=this._queue;return P[A]&&((I=P[A])==null||I.forEach(F=>_(F)),delete P[A]),this},handleByMap(A,_){return this.handle(A,T=>{T.name&&(_[T.name]=T.ref)},T=>{T.name&&delete _[T.name]})},handleByNamedList(A,_,T=-1){return this.handle(A,E=>{_.findIndex(P=>P.name===E.name)>=0||(_.push({name:E.name,value:E.ref}),_.sort((P,I)=>normalizeExtensionPriority(I.value,T)-normalizeExtensionPriority(P.value,T)))},E=>{const C=_.findIndex(P=>P.name===E.name);C!==-1&&_.splice(C,1)})},handleByList(A,_,T=-1){return this.handle(A,E=>{_.includes(E.ref)||(_.push(E.ref),_.sort((C,P)=>normalizeExtensionPriority(P,T)-normalizeExtensionPriority(C,T)))},E=>{const C=_.indexOf(E.ref);C!==-1&&_.splice(C,1)})},mixin(A,..._){for(const T of _)Object.defineProperties(A.prototype,Object.getOwnPropertyDescriptors(T))}},browserExt={extension:{type:ExtensionType$1.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await __vitePreload(()=>import("./browserAll-CiIrj9uw.js"),__vite__mapDeps([0,1,2]))}},webworkerExt={extension:{type:ExtensionType$1.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await __vitePreload(()=>import("./webworkerAll-Dzxix2g-.js"),__vite__mapDeps([1,2]))}};let ObservablePoint$1=class lr{constructor(_,T,E){this._x=T||0,this._y=E||0,this._observer=_}clone(_){return new lr(_??this._observer,this._x,this._y)}set(_=0,T=_){return(this._x!==_||this._y!==T)&&(this._x=_,this._y=T,this._observer._onUpdate(this)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this._observer._onUpdate(this)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this._observer._onUpdate(this))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this._observer._onUpdate(this))}};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}function getAugmentedNamespace(A){if(Object.prototype.hasOwnProperty.call(A,"__esModule"))return A;var _=A.default;if(typeof _=="function"){var T=function E(){return this instanceof E?Reflect.construct(_,arguments,this.constructor):_.apply(this,arguments)};T.prototype=_.prototype}else T={};return Object.defineProperty(T,"__esModule",{value:!0}),Object.keys(A).forEach(function(E){var C=Object.getOwnPropertyDescriptor(A,E);Object.defineProperty(T,E,C.get?C:{enumerable:!0,get:function(){return A[E]}})}),T}var eventemitter3$1={exports:{}},hasRequiredEventemitter3$1;function requireEventemitter3$1(){return hasRequiredEventemitter3$1||(hasRequiredEventemitter3$1=1,function(A){var _=Object.prototype.hasOwnProperty,T="~";function E(){}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(T=!1));function C(R,B,O){this.fn=R,this.context=B,this.once=O||!1}function P(R,B,O,V,L){if(typeof O!="function")throw new TypeError("The listener must be a function");var D=new C(O,V||R,L),U=T?T+B:B;return R._events[U]?R._events[U].fn?R._events[U]=[R._events[U],D]:R._events[U].push(D):(R._events[U]=D,R._eventsCount++),R}function I(R,B){--R._eventsCount===0?R._events=new E:delete R._events[B]}function F(){this._events=new E,this._eventsCount=0}F.prototype.eventNames=function(){var B=[],O,V;if(this._eventsCount===0)return B;for(V in O=this._events)_.call(O,V)&&B.push(T?V.slice(1):V);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(O)):B},F.prototype.listeners=function(B){var O=T?T+B:B,V=this._events[O];if(!V)return[];if(V.fn)return[V.fn];for(var L=0,D=V.length,U=new Array(D);L<D;L++)U[L]=V[L].fn;return U},F.prototype.listenerCount=function(B){var O=T?T+B:B,V=this._events[O];return V?V.fn?1:V.length:0},F.prototype.emit=function(B,O,V,L,D,U){var G=T?T+B:B;if(!this._events[G])return!1;var X=this._events[G],z=arguments.length,Y,W;if(X.fn){switch(X.once&&this.removeListener(B,X.fn,void 0,!0),z){case 1:return X.fn.call(X.context),!0;case 2:return X.fn.call(X.context,O),!0;case 3:return X.fn.call(X.context,O,V),!0;case 4:return X.fn.call(X.context,O,V,L),!0;case 5:return X.fn.call(X.context,O,V,L,D),!0;case 6:return X.fn.call(X.context,O,V,L,D,U),!0}for(W=1,Y=new Array(z-1);W<z;W++)Y[W-1]=arguments[W];X.fn.apply(X.context,Y)}else{var q=X.length,K;for(W=0;W<q;W++)switch(X[W].once&&this.removeListener(B,X[W].fn,void 0,!0),z){case 1:X[W].fn.call(X[W].context);break;case 2:X[W].fn.call(X[W].context,O);break;case 3:X[W].fn.call(X[W].context,O,V);break;case 4:X[W].fn.call(X[W].context,O,V,L);break;default:if(!Y)for(K=1,Y=new Array(z-1);K<z;K++)Y[K-1]=arguments[K];X[W].fn.apply(X[W].context,Y)}}return!0},F.prototype.on=function(B,O,V){return P(this,B,O,V,!1)},F.prototype.once=function(B,O,V){return P(this,B,O,V,!0)},F.prototype.removeListener=function(B,O,V,L){var D=T?T+B:B;if(!this._events[D])return this;if(!O)return I(this,D),this;var U=this._events[D];if(U.fn)U.fn===O&&(!L||U.once)&&(!V||U.context===V)&&I(this,D);else{for(var G=0,X=[],z=U.length;G<z;G++)(U[G].fn!==O||L&&!U[G].once||V&&U[G].context!==V)&&X.push(U[G]);X.length?this._events[D]=X.length===1?X[0]:X:I(this,D)}return this},F.prototype.removeAllListeners=function(B){var O;return B?(O=T?T+B:B,this._events[O]&&I(this,O)):(this._events=new E,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=T,F.EventEmitter=F,A.exports=F}(eventemitter3$1)),eventemitter3$1.exports}var eventemitter3Exports$1=requireEventemitter3$1();const EventEmitter$1=getDefaultExportFromCjs(eventemitter3Exports$1),PI_2$1=Math.PI*2,RAD_TO_DEG$1=180/Math.PI,DEG_TO_RAD$1=Math.PI/180;let Point$1=class hr{constructor(_=0,T=0){this.x=0,this.y=0,this.x=_,this.y=T}clone(){return new hr(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,T=_){return this.x=_,this.y=T,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return tempPoint$2.x=0,tempPoint$2.y=0,tempPoint$2}};const tempPoint$2=new Point$1;let Matrix$1=class cr{constructor(_=1,T=0,E=0,C=1,P=0,I=0){this.array=null,this.a=_,this.b=T,this.c=E,this.d=C,this.tx=P,this.ty=I}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,T,E,C,P,I){return this.a=_,this.b=T,this.c=E,this.d=C,this.tx=P,this.ty=I,this}toArray(_,T){this.array||(this.array=new Float32Array(9));const E=T||this.array;return _?(E[0]=this.a,E[1]=this.b,E[2]=0,E[3]=this.c,E[4]=this.d,E[5]=0,E[6]=this.tx,E[7]=this.ty,E[8]=1):(E[0]=this.a,E[1]=this.c,E[2]=this.tx,E[3]=this.b,E[4]=this.d,E[5]=this.ty,E[6]=0,E[7]=0,E[8]=1),E}apply(_,T){T=T||new Point$1;const E=_.x,C=_.y;return T.x=this.a*E+this.c*C+this.tx,T.y=this.b*E+this.d*C+this.ty,T}applyInverse(_,T){T=T||new Point$1;const E=this.a,C=this.b,P=this.c,I=this.d,F=this.tx,R=this.ty,B=1/(E*I+P*-C),O=_.x,V=_.y;return T.x=I*B*O+-P*B*V+(R*P-F*I)*B,T.y=E*B*V+-C*B*O+(-R*E+F*C)*B,T}translate(_,T){return this.tx+=_,this.ty+=T,this}scale(_,T){return this.a*=_,this.d*=T,this.c*=_,this.b*=T,this.tx*=_,this.ty*=T,this}rotate(_){const T=Math.cos(_),E=Math.sin(_),C=this.a,P=this.c,I=this.tx;return this.a=C*T-this.b*E,this.b=C*E+this.b*T,this.c=P*T-this.d*E,this.d=P*E+this.d*T,this.tx=I*T-this.ty*E,this.ty=I*E+this.ty*T,this}append(_){const T=this.a,E=this.b,C=this.c,P=this.d;return this.a=_.a*T+_.b*C,this.b=_.a*E+_.b*P,this.c=_.c*T+_.d*C,this.d=_.c*E+_.d*P,this.tx=_.tx*T+_.ty*C+this.tx,this.ty=_.tx*E+_.ty*P+this.ty,this}appendFrom(_,T){const E=_.a,C=_.b,P=_.c,I=_.d,F=_.tx,R=_.ty,B=T.a,O=T.b,V=T.c,L=T.d;return this.a=E*B+C*V,this.b=E*O+C*L,this.c=P*B+I*V,this.d=P*O+I*L,this.tx=F*B+R*V+T.tx,this.ty=F*O+R*L+T.ty,this}setTransform(_,T,E,C,P,I,F,R,B){return this.a=Math.cos(F+B)*P,this.b=Math.sin(F+B)*P,this.c=-Math.sin(F-R)*I,this.d=Math.cos(F-R)*I,this.tx=_-(E*this.a+C*this.c),this.ty=T-(E*this.b+C*this.d),this}prepend(_){const T=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const E=this.a,C=this.c;this.a=E*_.a+this.b*_.c,this.b=E*_.b+this.b*_.d,this.c=C*_.a+this.d*_.c,this.d=C*_.b+this.d*_.d}return this.tx=T*_.a+this.ty*_.c+_.tx,this.ty=T*_.b+this.ty*_.d+_.ty,this}decompose(_){const T=this.a,E=this.b,C=this.c,P=this.d,I=_.pivot,F=-Math.atan2(-C,P),R=Math.atan2(E,T),B=Math.abs(F+R);return B<1e-5||Math.abs(PI_2$1-B)<1e-5?(_.rotation=R,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=F,_.skew.y=R),_.scale.x=Math.sqrt(T*T+E*E),_.scale.y=Math.sqrt(C*C+P*P),_.position.x=this.tx+(I.x*T+I.y*C),_.position.y=this.ty+(I.x*E+I.y*P),_}invert(){const _=this.a,T=this.b,E=this.c,C=this.d,P=this.tx,I=_*C-T*E;return this.a=C/I,this.b=-T/I,this.c=-E/I,this.d=_/I,this.tx=(E*this.ty-C*P)/I,this.ty=-(_*this.ty-T*P)/I,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new cr;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}equals(_){return _.a===this.a&&_.b===this.b&&_.c===this.c&&_.d===this.d&&_.tx===this.tx&&_.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return identityMatrix$1.identity()}static get shared(){return tempMatrix$6.identity()}};const tempMatrix$6=new Matrix$1,identityMatrix$1=new Matrix$1,ux$1=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy$1=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx$1=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy$1=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley$1=[],rotationMatrices$1=[],signum$1=Math.sign;function init$1(){for(let A=0;A<16;A++){const _=[];rotationCayley$1.push(_);for(let T=0;T<16;T++){const E=signum$1(ux$1[A]*ux$1[T]+vx$1[A]*uy$1[T]),C=signum$1(uy$1[A]*ux$1[T]+vy$1[A]*uy$1[T]),P=signum$1(ux$1[A]*vx$1[T]+vx$1[A]*vy$1[T]),I=signum$1(uy$1[A]*vx$1[T]+vy$1[A]*vy$1[T]);for(let F=0;F<16;F++)if(ux$1[F]===E&&uy$1[F]===C&&vx$1[F]===P&&vy$1[F]===I){_.push(F);break}}}for(let A=0;A<16;A++){const _=new Matrix$1;_.set(ux$1[A],uy$1[A],vx$1[A],vy$1[A],0,0),rotationMatrices$1.push(_)}}init$1();const groupD8$1={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:A=>ux$1[A],uY:A=>uy$1[A],vX:A=>vx$1[A],vY:A=>vy$1[A],inv:A=>A&8?A&15:-A&7,add:(A,_)=>rotationCayley$1[A][_],sub:(A,_)=>rotationCayley$1[A][groupD8$1.inv(_)],rotate180:A=>A^4,isVertical:A=>(A&3)===2,byDirection:(A,_)=>Math.abs(A)*2<=Math.abs(_)?_>=0?groupD8$1.S:groupD8$1.N:Math.abs(_)*2<=Math.abs(A)?A>0?groupD8$1.E:groupD8$1.W:_>0?A>0?groupD8$1.SE:groupD8$1.SW:A>0?groupD8$1.NE:groupD8$1.NW,matrixAppendRotationInv:(A,_,T=0,E=0)=>{const C=rotationMatrices$1[groupD8$1.inv(_)];C.tx=T,C.ty=E,A.append(C)}},tempPoints$2=[new Point$1,new Point$1,new Point$1,new Point$1];let Rectangle$1=class Rt{constructor(_=0,T=0,E=0,C=0){this.type="rectangle",this.x=Number(_),this.y=Number(T),this.width=Number(E),this.height=Number(C)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Rt(0,0,0,0)}clone(){return new Rt(this.x,this.y,this.width,this.height)}copyFromBounds(_){return this.x=_.minX,this.y=_.minY,this.width=_.maxX-_.minX,this.height=_.maxY-_.minY,this}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.copyFrom(this),_}contains(_,T){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&T>=this.y&&T<this.y+this.height}strokeContains(_,T,E,C=.5){const{width:P,height:I}=this;if(P<=0||I<=0)return!1;const F=this.x,R=this.y,B=E*(1-C),O=E-B,V=F-B,L=F+P+B,D=R-B,U=R+I+B,G=F+O,X=F+P-O,z=R+O,Y=R+I-O;return _>=V&&_<=L&&T>=D&&T<=U&&!(_>G&&_<X&&T>z&&T<Y)}intersects(_,T){if(!T){const se=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=se)return!1;const ue=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>ue}const E=this.left,C=this.right,P=this.top,I=this.bottom;if(C<=E||I<=P)return!1;const F=tempPoints$2[0].set(_.left,_.top),R=tempPoints$2[1].set(_.left,_.bottom),B=tempPoints$2[2].set(_.right,_.top),O=tempPoints$2[3].set(_.right,_.bottom);if(B.x<=F.x||R.y<=F.y)return!1;const V=Math.sign(T.a*T.d-T.b*T.c);if(V===0||(T.apply(F,F),T.apply(R,R),T.apply(B,B),T.apply(O,O),Math.max(F.x,R.x,B.x,O.x)<=E||Math.min(F.x,R.x,B.x,O.x)>=C||Math.max(F.y,R.y,B.y,O.y)<=P||Math.min(F.y,R.y,B.y,O.y)>=I))return!1;const L=V*(R.y-F.y),D=V*(F.x-R.x),U=L*E+D*P,G=L*C+D*P,X=L*E+D*I,z=L*C+D*I;if(Math.max(U,G,X,z)<=L*F.x+D*F.y||Math.min(U,G,X,z)>=L*O.x+D*O.y)return!1;const Y=V*(F.y-B.y),W=V*(B.x-F.x),q=Y*E+W*P,K=Y*C+W*P,J=Y*E+W*I,Z=Y*C+W*I;return!(Math.max(q,K,J,Z)<=Y*F.x+W*F.y||Math.min(q,K,J,Z)>=Y*O.x+W*O.y)}pad(_=0,T=_){return this.x-=_,this.y-=T,this.width+=_*2,this.height+=T*2,this}fit(_){const T=Math.max(this.x,_.x),E=Math.min(this.x+this.width,_.x+_.width),C=Math.max(this.y,_.y),P=Math.min(this.y+this.height,_.y+_.height);return this.x=T,this.width=Math.max(E-T,0),this.y=C,this.height=Math.max(P-C,0),this}ceil(_=1,T=.001){const E=Math.ceil((this.x+this.width-T)*_)/_,C=Math.ceil((this.y+this.height-T)*_)/_;return this.x=Math.floor((this.x+T)*_)/_,this.y=Math.floor((this.y+T)*_)/_,this.width=E-this.x,this.height=C-this.y,this}enlarge(_){const T=Math.min(this.x,_.x),E=Math.max(this.x+this.width,_.x+_.width),C=Math.min(this.y,_.y),P=Math.max(this.y+this.height,_.y+_.height);return this.x=T,this.width=E-T,this.y=C,this.height=P-C,this}getBounds(_){return _||(_=new Rt),_.copyFrom(this),_}containsRect(_){if(this.width<=0||this.height<=0)return!1;const T=_.x,E=_.y,C=_.x+_.width,P=_.y+_.height;return T>=this.x&&T<this.x+this.width&&E>=this.y&&E<this.y+this.height&&C>=this.x&&C<this.x+this.width&&P>=this.y&&P<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};const uidCache={default:-1};function uid$1(A="default"){return uidCache[A]===void 0&&(uidCache[A]=-1),++uidCache[A]}const warnings$1={},v8_0_0="8.0.0",v8_3_4="8.3.4";function deprecation$1(A,_,T=3){if(warnings$1[_])return;let E=new Error().stack;typeof E>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${A}`):(E=E.split(`
`).splice(T).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${A}`),console.warn(E),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${A}`),console.warn(E))),warnings$1[_]=!0}const NOOP=()=>{};function nextPow2$1(A){return A+=A===0?1:0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A+1}function isPow2$1(A){return!(A&A-1)&&!!A}function definedProps(A){const _={};for(const T in A)A[T]!==void 0&&(_[T]=A[T]);return _}const idHash$1=Object.create(null);function createResourceIdFromString(A){const _=idHash$1[A];return _===void 0&&(idHash$1[A]=uid$1("resource")),_}const _TextureStyle=class ur extends EventEmitter$1{constructor(_={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,_={...ur.defaultOptions,..._},this.addressMode=_.addressMode,this.addressModeU=_.addressModeU??this.addressModeU,this.addressModeV=_.addressModeV??this.addressModeV,this.addressModeW=_.addressModeW??this.addressModeW,this.scaleMode=_.scaleMode,this.magFilter=_.magFilter??this.magFilter,this.minFilter=_.minFilter??this.minFilter,this.mipmapFilter=_.mipmapFilter??this.mipmapFilter,this.lodMinClamp=_.lodMinClamp,this.lodMaxClamp=_.lodMaxClamp,this.compare=_.compare,this.maxAnisotropy=_.maxAnisotropy??1}set addressMode(_){this.addressModeU=_,this.addressModeV=_,this.addressModeW=_}get addressMode(){return this.addressModeU}set wrapMode(_){deprecation$1(v8_0_0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=_}get wrapMode(){return this.addressMode}set scaleMode(_){this.magFilter=_,this.minFilter=_,this.mipmapFilter=_}get scaleMode(){return this.magFilter}set maxAnisotropy(_){this._maxAnisotropy=Math.min(_,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const _=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=createResourceIdFromString(_),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};_TextureStyle.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let TextureStyle=_TextureStyle;const _TextureSource=class dr extends EventEmitter$1{constructor(_={}){super(),this.options=_,this.uid=uid$1("textureSource"),this._resourceType="textureSource",this._resourceId=uid$1("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,_={...dr.defaultOptions,..._},this.label=_.label??"",this.resource=_.resource,this.autoGarbageCollect=_.autoGarbageCollect,this._resolution=_.resolution,_.width?this.pixelWidth=_.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,_.height?this.pixelHeight=_.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=_.format,this.dimension=_.dimensions,this.mipLevelCount=_.mipLevelCount,this.autoGenerateMipmaps=_.autoGenerateMipmaps,this.sampleCount=_.sampleCount,this.antialias=_.antialias,this.alphaMode=_.alphaMode,this.style=new TextureStyle(definedProps(_)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(_){var T,E;this.style!==_&&((T=this._style)==null||T.off("change",this._onStyleChange,this),this._style=_,(E=this._style)==null||E.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(_){this._style.addressMode=_}get repeatMode(){return this._style.addressMode}set repeatMode(_){this._style.addressMode=_}get magFilter(){return this._style.magFilter}set magFilter(_){this._style.magFilter=_}get minFilter(){return this._style.minFilter}set minFilter(_){this._style.minFilter=_}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(_){this._style.mipmapFilter=_}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(_){this._style.lodMinClamp=_}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(_){this._style.lodMaxClamp=_}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const _=this._resolution;if(this.resize(this.resourceWidth/_,this.resourceHeight/_))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=uid$1("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:_}=this;return _.naturalWidth||_.videoWidth||_.displayWidth||_.width}get resourceHeight(){const{resource:_}=this;return _.naturalHeight||_.videoHeight||_.displayHeight||_.height}get resolution(){return this._resolution}set resolution(_){this._resolution!==_&&(this._resolution=_,this.width=this.pixelWidth/_,this.height=this.pixelHeight/_)}resize(_,T,E){E||(E=this._resolution),_||(_=this.width),T||(T=this.height);const C=Math.round(_*E),P=Math.round(T*E);return this.width=C/E,this.height=P/E,this._resolution=E,this.pixelWidth===C&&this.pixelHeight===P?!1:(this._refreshPOT(),this.pixelWidth=C,this.pixelHeight=P,this.emit("resize",this),this._resourceId=uid$1("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(_){this._style.wrapMode=_}get wrapMode(){return this._style.wrapMode}set scaleMode(_){this._style.scaleMode=_}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=isPow2$1(this.pixelWidth)&&isPow2$1(this.pixelHeight)}static test(_){throw new Error("Unimplemented")}};_TextureSource.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let TextureSource=_TextureSource;class BufferImageSource extends TextureSource{constructor(_){const T=_.resource||new Float32Array(_.width*_.height*4);let E=_.format;E||(T instanceof Float32Array?E="rgba32float":T instanceof Int32Array||T instanceof Uint32Array?E="rgba32uint":T instanceof Int16Array||T instanceof Uint16Array?E="rgba16uint":(T instanceof Int8Array,E="bgra8unorm")),super({..._,resource:T,format:E}),this.uploadMethodId="buffer"}static test(_){return _ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}BufferImageSource.extension=ExtensionType$1.TextureSource;const tempMat$1=new Matrix$1;let TextureMatrix$1=class{constructor(_,T){this.mapCoord=new Matrix$1,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof T>"u"?this.clampMargin=_.width<10?0:.5:this.clampMargin=T,this.isSimple=!1,this.texture=_}get texture(){return this._texture}set texture(_){var T;this.texture!==_&&((T=this._texture)==null||T.removeListener("update",this.update,this),this._texture=_,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(_,T){T===void 0&&(T=_);const E=this.mapCoord;for(let C=0;C<_.length;C+=2){const P=_[C],I=_[C+1];T[C]=P*E.a+I*E.c+E.tx,T[C+1]=P*E.b+I*E.d+E.ty}return T}update(){const _=this._texture;this._updateID++;const T=_.uvs;this.mapCoord.set(T.x1-T.x0,T.y1-T.y0,T.x3-T.x0,T.y3-T.y0,T.x0,T.y0);const E=_.orig,C=_.trim;C&&(tempMat$1.set(E.width/C.width,0,0,E.height/C.height,-C.x/C.width,-C.y/C.height),this.mapCoord.append(tempMat$1));const P=_.source,I=this.uClampFrame,F=this.clampMargin/P._resolution,R=this.clampOffset/P._resolution;return I[0]=(_.frame.x+F+R)/P.width,I[1]=(_.frame.y+F+R)/P.height,I[2]=(_.frame.x+_.frame.width-F+R)/P.width,I[3]=(_.frame.y+_.frame.height-F+R)/P.height,this.uClampOffset[0]=this.clampOffset/P.pixelWidth,this.uClampOffset[1]=this.clampOffset/P.pixelHeight,this.isSimple=_.frame.width===P.width&&_.frame.height===P.height&&_.rotate===0,!0}},Texture$1=class extends EventEmitter$1{constructor({source:_,label:T,frame:E,orig:C,trim:P,defaultAnchor:I,defaultBorders:F,rotate:R,dynamic:B}={}){if(super(),this.uid=uid$1("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Rectangle$1,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=T,this.source=(_==null?void 0:_.source)??new TextureSource,this.noFrame=!E,E)this.frame.copyFrom(E);else{const{width:O,height:V}=this._source;this.frame.width=O,this.frame.height=V}this.orig=C||this.frame,this.trim=P,this.rotate=R??0,this.defaultAnchor=I,this.defaultBorders=F,this.destroyed=!1,this.dynamic=B||!1,this.updateUvs()}set source(_){this._source&&this._source.off("resize",this.update,this),this._source=_,_.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new TextureMatrix$1(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:_,frame:T}=this,{width:E,height:C}=this._source,P=T.x/E,I=T.y/C,F=T.width/E,R=T.height/C;let B=this.rotate;if(B){const O=F/2,V=R/2,L=P+O,D=I+V;B=groupD8$1.add(B,groupD8$1.NW),_.x0=L+O*groupD8$1.uX(B),_.y0=D+V*groupD8$1.uY(B),B=groupD8$1.add(B,2),_.x1=L+O*groupD8$1.uX(B),_.y1=D+V*groupD8$1.uY(B),B=groupD8$1.add(B,2),_.x2=L+O*groupD8$1.uX(B),_.y2=D+V*groupD8$1.uY(B),B=groupD8$1.add(B,2),_.x3=L+O*groupD8$1.uX(B),_.y3=D+V*groupD8$1.uY(B)}else _.x0=P,_.y0=I,_.x1=P+F,_.y1=I,_.x2=P+F,_.y2=I+R,_.x3=P,_.y3=I+R}destroy(_=!1){this._source&&_&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return deprecation$1(v8_0_0,"Texture.baseTexture is now Texture.source"),this._source}};Texture$1.EMPTY=new Texture$1({label:"EMPTY",source:new TextureSource({label:"EMPTY"})});Texture$1.EMPTY.destroy=NOOP;Texture$1.WHITE=new Texture$1({source:new BufferImageSource({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Texture$1.WHITE.destroy=NOOP;function updateQuadBounds(A,_,T){const{width:E,height:C}=T.orig,P=T.trim;if(P){const I=P.width,F=P.height;A.minX=P.x-_._x*E,A.maxX=A.minX+I,A.minY=P.y-_._y*C,A.maxY=A.minY+F}else A.minX=-_._x*E,A.maxX=A.minX+E,A.minY=-_._y*C,A.maxY=A.minY+C}const defaultMatrix=new Matrix$1;let Bounds$1=class fr{constructor(_=1/0,T=1/0,E=-1/0,C=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this.minX=_,this.minY=T,this.maxX=E,this.maxY=C}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Rectangle$1);const _=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(_.x=0,_.y=0,_.width=0,_.height=0):_.copyFromBounds(this),_}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this}set(_,T,E,C){this.minX=_,this.minY=T,this.maxX=E,this.maxY=C}addFrame(_,T,E,C,P){P||(P=this.matrix);const I=P.a,F=P.b,R=P.c,B=P.d,O=P.tx,V=P.ty;let L=this.minX,D=this.minY,U=this.maxX,G=this.maxY,X=I*_+R*T+O,z=F*_+B*T+V;X<L&&(L=X),z<D&&(D=z),X>U&&(U=X),z>G&&(G=z),X=I*E+R*T+O,z=F*E+B*T+V,X<L&&(L=X),z<D&&(D=z),X>U&&(U=X),z>G&&(G=z),X=I*_+R*C+O,z=F*_+B*C+V,X<L&&(L=X),z<D&&(D=z),X>U&&(U=X),z>G&&(G=z),X=I*E+R*C+O,z=F*E+B*C+V,X<L&&(L=X),z<D&&(D=z),X>U&&(U=X),z>G&&(G=z),this.minX=L,this.minY=D,this.maxX=U,this.maxY=G}addRect(_,T){this.addFrame(_.x,_.y,_.x+_.width,_.y+_.height,T)}addBounds(_,T){this.addFrame(_.minX,_.minY,_.maxX,_.maxY,T)}addBoundsMask(_){this.minX=this.minX>_.minX?this.minX:_.minX,this.minY=this.minY>_.minY?this.minY:_.minY,this.maxX=this.maxX<_.maxX?this.maxX:_.maxX,this.maxY=this.maxY<_.maxY?this.maxY:_.maxY}applyMatrix(_){const T=this.minX,E=this.minY,C=this.maxX,P=this.maxY,{a:I,b:F,c:R,d:B,tx:O,ty:V}=_;let L=I*T+R*E+O,D=F*T+B*E+V;this.minX=L,this.minY=D,this.maxX=L,this.maxY=D,L=I*C+R*E+O,D=F*C+B*E+V,this.minX=L<this.minX?L:this.minX,this.minY=D<this.minY?D:this.minY,this.maxX=L>this.maxX?L:this.maxX,this.maxY=D>this.maxY?D:this.maxY,L=I*T+R*P+O,D=F*T+B*P+V,this.minX=L<this.minX?L:this.minX,this.minY=D<this.minY?D:this.minY,this.maxX=L>this.maxX?L:this.maxX,this.maxY=D>this.maxY?D:this.maxY,L=I*C+R*P+O,D=F*C+B*P+V,this.minX=L<this.minX?L:this.minX,this.minY=D<this.minY?D:this.minY,this.maxX=L>this.maxX?L:this.maxX,this.maxY=D>this.maxY?D:this.maxY}fit(_){return this.minX<_.left&&(this.minX=_.left),this.maxX>_.right&&(this.maxX=_.right),this.minY<_.top&&(this.minY=_.top),this.maxY>_.bottom&&(this.maxY=_.bottom),this}fitBounds(_,T,E,C){return this.minX<_&&(this.minX=_),this.maxX>T&&(this.maxX=T),this.minY<E&&(this.minY=E),this.maxY>C&&(this.maxY=C),this}pad(_,T=_){return this.minX-=_,this.maxX+=_,this.minY-=T,this.maxY+=T,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new fr(this.minX,this.minY,this.maxX,this.maxY)}scale(_,T=_){return this.minX*=_,this.minY*=T,this.maxX*=_,this.maxY*=T,this}get x(){return this.minX}set x(_){const T=this.maxX-this.minX;this.minX=_,this.maxX=_+T}get y(){return this.minY}set y(_){const T=this.maxY-this.minY;this.minY=_,this.maxY=_+T}get width(){return this.maxX-this.minX}set width(_){this.maxX=this.minX+_}get height(){return this.maxY-this.minY}set height(_){this.maxY=this.minY+_}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(_,T,E,C){let P=this.minX,I=this.minY,F=this.maxX,R=this.maxY;C||(C=this.matrix);const B=C.a,O=C.b,V=C.c,L=C.d,D=C.tx,U=C.ty;for(let G=T;G<E;G+=2){const X=_[G],z=_[G+1],Y=B*X+V*z+D,W=O*X+L*z+U;P=Y<P?Y:P,I=W<I?W:I,F=Y>F?Y:F,R=W>R?W:R}this.minX=P,this.minY=I,this.maxX=F,this.maxY=R}containsPoint(_,T){return this.minX<=_&&this.minY<=T&&this.maxX>=_&&this.maxY>=T}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(_){return this.minX=_.minX,this.minY=_.minY,this.maxX=_.maxX,this.maxY=_.maxY,this}};var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(A){return typeof A=="string"?A.length>0:typeof A=="number"},n=function(A,_,T){return _===void 0&&(_=0),T===void 0&&(T=Math.pow(10,_)),Math.round(T*A)/T+0},e=function(A,_,T){return _===void 0&&(_=0),T===void 0&&(T=1),A>T?T:A>_?A:_},u=function(A){return(A=isFinite(A)?A%360:0)>0?A:A+360},a=function(A){return{r:e(A.r,0,255),g:e(A.g,0,255),b:e(A.b,0,255),a:e(A.a)}},o=function(A){return{r:n(A.r),g:n(A.g),b:n(A.b),a:n(A.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(A){var _=A.toString(16);return _.length<2?"0"+_:_},h=function(A){var _=A.r,T=A.g,E=A.b,C=A.a,P=Math.max(_,T,E),I=P-Math.min(_,T,E),F=I?P===_?(T-E)/I:P===T?2+(E-_)/I:4+(_-T)/I:0;return{h:60*(F<0?F+6:F),s:P?I/P*100:0,v:P/255*100,a:C}},b=function(A){var _=A.h,T=A.s,E=A.v,C=A.a;_=_/360*6,T/=100,E/=100;var P=Math.floor(_),I=E*(1-T),F=E*(1-(_-P)*T),R=E*(1-(1-_+P)*T),B=P%6;return{r:255*[E,F,I,I,R,E][B],g:255*[R,E,E,F,I,I][B],b:255*[I,I,R,E,E,F][B],a:C}},g=function(A){return{h:u(A.h),s:e(A.s,0,100),l:e(A.l,0,100),a:e(A.a)}},d=function(A){return{h:n(A.h),s:n(A.s),l:n(A.l),a:n(A.a,3)}},f=function(A){return b((T=(_=A).s,{h:_.h,s:(T*=((E=_.l)<50?E:100-E)/100)>0?2*T/(E+T)*100:0,v:E+T,a:_.a}));var _,T,E},c=function(A){return{h:(_=h(A)).h,s:(C=(200-(T=_.s))*(E=_.v)/100)>0&&C<200?T*E/100/(C<=100?C:200-C)*100:0,l:C/2,a:_.a};var _,T,E,C},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(A){var _=i.exec(A);return _?(A=_[1]).length<=4?{r:parseInt(A[0]+A[0],16),g:parseInt(A[1]+A[1],16),b:parseInt(A[2]+A[2],16),a:A.length===4?n(parseInt(A[3]+A[3],16)/255,2):1}:A.length===6||A.length===8?{r:parseInt(A.substr(0,2),16),g:parseInt(A.substr(2,2),16),b:parseInt(A.substr(4,2),16),a:A.length===8?n(parseInt(A.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(A){var _=v.exec(A)||m.exec(A);return _?_[2]!==_[4]||_[4]!==_[6]?null:a({r:Number(_[1])/(_[2]?100/255:1),g:Number(_[3])/(_[4]?100/255:1),b:Number(_[5])/(_[6]?100/255:1),a:_[7]===void 0?1:Number(_[7])/(_[8]?100:1)}):null},"rgb"],[function(A){var _=l.exec(A)||p.exec(A);if(!_)return null;var T,E,C=g({h:(T=_[1],E=_[2],E===void 0&&(E="deg"),Number(T)*(r[E]||1)),s:Number(_[3]),l:Number(_[4]),a:_[5]===void 0?1:Number(_[5])/(_[6]?100:1)});return f(C)},"hsl"]],object:[[function(A){var _=A.r,T=A.g,E=A.b,C=A.a,P=C===void 0?1:C;return t(_)&&t(T)&&t(E)?a({r:Number(_),g:Number(T),b:Number(E),a:Number(P)}):null},"rgb"],[function(A){var _=A.h,T=A.s,E=A.l,C=A.a,P=C===void 0?1:C;if(!t(_)||!t(T)||!t(E))return null;var I=g({h:Number(_),s:Number(T),l:Number(E),a:Number(P)});return f(I)},"hsl"],[function(A){var _=A.h,T=A.s,E=A.v,C=A.a,P=C===void 0?1:C;if(!t(_)||!t(T)||!t(E))return null;var I=function(F){return{h:u(F.h),s:e(F.s,0,100),v:e(F.v,0,100),a:e(F.a)}}({h:Number(_),s:Number(T),v:Number(E),a:Number(P)});return b(I)},"hsv"]]},N=function(A,_){for(var T=0;T<_.length;T++){var E=_[T][0](A);if(E)return[E,_[T][1]]}return[null,void 0]},x=function(A){return typeof A=="string"?N(A.trim(),y.string):typeof A=="object"&&A!==null?N(A,y.object):[null,void 0]},M=function(A,_){var T=c(A);return{h:T.h,s:e(T.s+100*_,0,100),l:T.l,a:T.a}},H=function(A){return(299*A.r+587*A.g+114*A.b)/1e3/255},$=function(A,_){var T=c(A);return{h:T.h,s:T.s,l:e(T.l+100*_,0,100),a:T.a}},j=function(){function A(_){this.parsed=x(_)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return A.prototype.isValid=function(){return this.parsed!==null},A.prototype.brightness=function(){return n(H(this.rgba),2)},A.prototype.isDark=function(){return H(this.rgba)<.5},A.prototype.isLight=function(){return H(this.rgba)>=.5},A.prototype.toHex=function(){return _=o(this.rgba),T=_.r,E=_.g,C=_.b,I=(P=_.a)<1?s(n(255*P)):"","#"+s(T)+s(E)+s(C)+I;var _,T,E,C,P,I},A.prototype.toRgb=function(){return o(this.rgba)},A.prototype.toRgbString=function(){return _=o(this.rgba),T=_.r,E=_.g,C=_.b,(P=_.a)<1?"rgba("+T+", "+E+", "+C+", "+P+")":"rgb("+T+", "+E+", "+C+")";var _,T,E,C,P},A.prototype.toHsl=function(){return d(c(this.rgba))},A.prototype.toHslString=function(){return _=d(c(this.rgba)),T=_.h,E=_.s,C=_.l,(P=_.a)<1?"hsla("+T+", "+E+"%, "+C+"%, "+P+")":"hsl("+T+", "+E+"%, "+C+"%)";var _,T,E,C,P},A.prototype.toHsv=function(){return _=h(this.rgba),{h:n(_.h),s:n(_.s),v:n(_.v),a:n(_.a,3)};var _},A.prototype.invert=function(){return w({r:255-(_=this.rgba).r,g:255-_.g,b:255-_.b,a:_.a});var _},A.prototype.saturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,_))},A.prototype.desaturate=function(_){return _===void 0&&(_=.1),w(M(this.rgba,-_))},A.prototype.grayscale=function(){return w(M(this.rgba,-1))},A.prototype.lighten=function(_){return _===void 0&&(_=.1),w($(this.rgba,_))},A.prototype.darken=function(_){return _===void 0&&(_=.1),w($(this.rgba,-_))},A.prototype.rotate=function(_){return _===void 0&&(_=15),this.hue(this.hue()+_)},A.prototype.alpha=function(_){return typeof _=="number"?w({r:(T=this.rgba).r,g:T.g,b:T.b,a:_}):n(this.rgba.a,3);var T},A.prototype.hue=function(_){var T=c(this.rgba);return typeof _=="number"?w({h:_,s:T.s,l:T.l,a:T.a}):n(T.h)},A.prototype.isEqual=function(_){return this.toHex()===w(_).toHex()},A}(),w=function(A){return A instanceof j?A:new j(A)},S=[],k=function(A){A.forEach(function(_){S.indexOf(_)<0&&(_(j,y),S.push(_))})};function namesPlugin(A,_){var T={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},E={};for(var C in T)E[T[C]]=C;var P={};A.prototype.toName=function(I){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var F,R,B=E[this.toHex()];if(B)return B;if(I!=null&&I.closest){var O=this.toRgb(),V=1/0,L="black";if(!P.length)for(var D in T)P[D]=new A(T[D]).toRgb();for(var U in T){var G=(F=O,R=P[U],Math.pow(F.r-R.r,2)+Math.pow(F.g-R.g,2)+Math.pow(F.b-R.b,2));G<V&&(V=G,L=U)}return L}},_.string.push([function(I){var F=I.toLowerCase(),R=F==="transparent"?"#0000":T[F];return R?new A(R).toRgb():null},"name"])}k([namesPlugin]);const _Color$2=class Et{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Et)this._value=this._cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,_))&&(this._value=this._cloneSource(_),this._normalize(this._value))}}get value(){return this._value}_cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}_isSourceEqual(_,T){const E=typeof _;if(E!==typeof T)return!1;if(E==="number"||E==="string"||_ instanceof Number)return _===T;if(Array.isArray(_)&&Array.isArray(T)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(T))return _.length!==T.length?!1:_.every((P,I)=>P===T[I]);if(_!==null&&T!==null){const P=Object.keys(_),I=Object.keys(T);return P.length!==I.length?!1:P.every(F=>_[F]===T[F])}return _===T}toRgba(){const[_,T,E,C]=this._components;return{r:_,g:T,b:E,a:C}}toRgb(){const[_,T,E]=this._components;return{r:_,g:T,b:E}}toRgbaString(){const[_,T,E]=this.toUint8RgbArray();return`rgba(${_},${T},${E},${this.alpha})`}toUint8RgbArray(_){const[T,E,C]=this._components;return this._arrayRgb||(this._arrayRgb=[]),_||(_=this._arrayRgb),_[0]=Math.round(T*255),_[1]=Math.round(E*255),_[2]=Math.round(C*255),_}toArray(_){this._arrayRgba||(this._arrayRgba=[]),_||(_=this._arrayRgba);const[T,E,C,P]=this._components;return _[0]=T,_[1]=E,_[2]=C,_[3]=P,_}toRgbArray(_){this._arrayRgb||(this._arrayRgb=[]),_||(_=this._arrayRgb);const[T,E,C]=this._components;return _[0]=T,_[1]=E,_[2]=C,_}toNumber(){return this._int}toBgrNumber(){const[_,T,E]=this.toUint8RgbArray();return(E<<16)+(T<<8)+_}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[T,E,C,P]=Et._temp.setValue(_)._components;return this._components[0]*=T,this._components[1]*=E,this._components[2]*=C,this._components[3]*=P,this._refreshInt(),this._value=null,this}premultiply(_,T=!0){return T&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this._refreshInt(),this._value=null,this}toPremultiplied(_,T=!0){if(_===1)return(255<<24)+this._int;if(_===0)return T?0:this._int;let E=this._int>>16&255,C=this._int>>8&255,P=this._int&255;return T&&(E=E*_+.5|0,C=C*_+.5|0,P=P*_+.5|0),(_*255<<24)+(E<<16)+(C<<8)+P}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const T=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-T.length)+T}setAlpha(_){return this._components[3]=this._clamp(_),this}_normalize(_){let T,E,C,P;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const I=_;T=(I>>16&255)/255,E=(I>>8&255)/255,C=(I&255)/255,P=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[T,E,C,P=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[T,E,C,P=255]=_,T/=255,E/=255,C/=255,P/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const F=Et.HEX_PATTERN.exec(_);F&&(_=`#${F[2]}`)}const I=w(_);I.isValid()&&({r:T,g:E,b:C,a:P}=I.rgba,T/=255,E/=255,C/=255)}if(T!==void 0)this._components[0]=T,this._components[1]=E,this._components[2]=C,this._components[3]=P,this._refreshInt();else throw new Error(`Unable to convert color ${_}`)}_refreshInt(){this._clamp(this._components);const[_,T,E]=this._components;this._int=(_*255<<16)+(T*255<<8)+(E*255|0)}_clamp(_,T=0,E=1){return typeof _=="number"?Math.min(Math.max(_,T),E):(_.forEach((C,P)=>{_[P]=Math.min(Math.max(C,T),E)}),_)}static isColorLike(_){return typeof _=="number"||typeof _=="string"||_ instanceof Number||_ instanceof Et||Array.isArray(_)||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Float32Array||_.r!==void 0&&_.g!==void 0&&_.b!==void 0||_.r!==void 0&&_.g!==void 0&&_.b!==void 0&&_.a!==void 0||_.h!==void 0&&_.s!==void 0&&_.l!==void 0||_.h!==void 0&&_.s!==void 0&&_.l!==void 0&&_.a!==void 0||_.h!==void 0&&_.s!==void 0&&_.v!==void 0||_.h!==void 0&&_.s!==void 0&&_.v!==void 0&&_.a!==void 0}};_Color$2.shared=new _Color$2;_Color$2._temp=new _Color$2;_Color$2.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color$2=_Color$2;const cullingMixin={cullArea:null,cullable:!1,cullableChildren:!0};class Pool{constructor(_,T){this._pool=[],this._count=0,this._index=0,this._classType=_,T&&this.prepopulate(T)}prepopulate(_){for(let T=0;T<_;T++)this._pool[this._index++]=new this._classType;this._count+=_}get(_){var E;let T;return this._index>0?T=this._pool[--this._index]:T=new this._classType,(E=T.init)==null||E.call(T,_),T}return(_){var T;(T=_.reset)==null||T.call(_),this._pool[this._index++]=_}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class PoolGroupClass{constructor(){this._poolsByClass=new Map}prepopulate(_,T){this.getPool(_).prepopulate(T)}get(_,T){return this.getPool(_).get(T)}return(_){this.getPool(_.constructor).return(_)}getPool(_){return this._poolsByClass.has(_)||this._poolsByClass.set(_,new Pool(_)),this._poolsByClass.get(_)}stats(){const _={};return this._poolsByClass.forEach(T=>{const E=_[T._classType.name]?T._classType.name+T._classType.ID:T._classType.name;_[E]={free:T.totalFree,used:T.totalUsed,size:T.totalSize}}),_}}const BigPool=new PoolGroupClass,cacheAsTextureMixin={get isCachedAsTexture(){var A;return!!((A=this.renderGroup)!=null&&A.isCachedAsTexture)},cacheAsTexture(A){typeof A=="boolean"&&A===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(A===!0?{}:A))},updateCacheTexture(){var A;(A=this.renderGroup)==null||A.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(A){deprecation$1("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(A)}};function removeItems$1(A,_,T){const E=A.length;let C;if(_>=E||T===0)return;T=_+T>E?E-_:T;const P=E-T;for(C=_;C<P;++C)A[C]=A[C+T];A.length=P}const childrenHelperMixin={allowChildren:!0,removeChildren(A=0,_){var P;const T=_??this.children.length,E=T-A,C=[];if(E>0&&E<=T){for(let F=T-1;F>=A;F--){const R=this.children[F];R&&(C.push(R),R.parent=null)}removeItems$1(this.children,A,T);const I=this.renderGroup||this.parentRenderGroup;I&&I.removeChildren(C);for(let F=0;F<C.length;++F){const R=C[F];(P=R.parentRenderLayer)==null||P.detach(R),this.emit("childRemoved",R,this,F),C[F].emit("removed",this)}return C.length>0&&this._didViewChangeTick++,C}else if(E===0&&this.children.length===0)return C;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(A){const _=this.getChildAt(A);return this.removeChild(_)},getChildAt(A){if(A<0||A>=this.children.length)throw new Error(`getChildAt: Index (${A}) does not exist.`);return this.children[A]},setChildIndex(A,_){if(_<0||_>=this.children.length)throw new Error(`The index ${_} supplied is out of bounds ${this.children.length}`);this.getChildIndex(A),this.addChildAt(A,_)},getChildIndex(A){const _=this.children.indexOf(A);if(_===-1)throw new Error("The supplied Container must be a child of the caller");return _},addChildAt(A,_){this.allowChildren||deprecation$1(v8_0_0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:T}=this;if(_<0||_>T.length)throw new Error(`${A}addChildAt: The index ${_} supplied is out of bounds ${T.length}`);if(A.parent){const C=A.parent.children.indexOf(A);if(A.parent===this&&C===_)return A;C!==-1&&A.parent.children.splice(C,1)}_===T.length?T.push(A):T.splice(_,0,A),A.parent=this,A.didChange=!0,A._updateFlags=15;const E=this.renderGroup||this.parentRenderGroup;return E&&E.addChild(A),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",A,this,_),A.emit("added",this),A},swapChildren(A,_){if(A===_)return;const T=this.getChildIndex(A),E=this.getChildIndex(_);this.children[T]=_,this.children[E]=A;const C=this.renderGroup||this.parentRenderGroup;C&&(C.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var A;(A=this.parent)==null||A.removeChild(this)},reparentChild(...A){return A.length===1?this.reparentChildAt(A[0],this.children.length):(A.forEach(_=>this.reparentChildAt(_,this.children.length)),A[0])},reparentChildAt(A,_){if(A.parent===this)return this.setChildIndex(A,_),A;const T=A.worldTransform.clone();A.removeFromParent(),this.addChildAt(A,_);const E=this.worldTransform.clone();return E.invert(),T.prepend(E),A.setFromMatrix(T),A}},collectRenderablesMixin={collectRenderables(A,_,T){this.parentRenderLayer&&this.parentRenderLayer!==T||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(A,_,T):this.renderGroup?_.renderPipes.renderGroup.addRenderGroup(this.renderGroup,A):this.collectRenderablesWithEffects(A,_,T))},collectRenderablesSimple(A,_,T){const E=this.children,C=E.length;for(let P=0;P<C;P++)E[P].collectRenderables(A,_,T)},collectRenderablesWithEffects(A,_,T){const{renderPipes:E}=_;for(let C=0;C<this.effects.length;C++){const P=this.effects[C];E[P.pipe].push(P,this,A)}this.collectRenderablesSimple(A,_,T);for(let C=this.effects.length-1;C>=0;C--){const P=this.effects[C];E[P.pipe].pop(P,this,A)}}};class FilterEffect{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let _=0;_<this.filters.length;_++)this.filters[_].destroy();this.filters=null,this.filterArea=null}}class MaskEffectManagerClass{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(_=>{this.add({test:_.test,maskClass:_})}))}add(_){this._tests.push(_)}getMaskEffect(_){this._initialized||this.init();for(let T=0;T<this._tests.length;T++){const E=this._tests[T];if(E.test(_))return BigPool.get(E.maskClass,_)}return _}returnMaskEffect(_){BigPool.return(_)}}const MaskEffectManager=new MaskEffectManagerClass;extensions$1.handleByList(ExtensionType$1.MaskEffect,MaskEffectManager._effectClasses);const effectsMixin={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const A=this.renderGroup||this.parentRenderGroup;A&&(A.structureDidChange=!0)},addEffect(A){this.effects.indexOf(A)===-1&&(this.effects.push(A),this.effects.sort((T,E)=>T.priority-E.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(A){const _=this.effects.indexOf(A);_!==-1&&(this.effects.splice(_,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(A){const _=this._maskEffect;(_==null?void 0:_.mask)!==A&&(_&&(this.removeEffect(_),MaskEffectManager.returnMaskEffect(_),this._maskEffect=null),A!=null&&(this._maskEffect=MaskEffectManager.getMaskEffect(A),this.addEffect(this._maskEffect)))},setMask(A){this._maskOptions={...this._maskOptions,...A},A.mask&&(this.mask=A.mask),this._markStructureAsChanged()},get mask(){var A;return(A=this._maskEffect)==null?void 0:A.mask},set filters(A){var P;!Array.isArray(A)&&A&&(A=[A]);const _=this._filterEffect||(this._filterEffect=new FilterEffect);A=A;const T=(A==null?void 0:A.length)>0,E=((P=_.filters)==null?void 0:P.length)>0,C=T!==E;A=Array.isArray(A)?A.slice(0):A,_.filters=Object.freeze(A),C&&(T?this.addEffect(_):(this.removeEffect(_),_.filters=A??null))},get filters(){var A;return(A=this._filterEffect)==null?void 0:A.filters},set filterArea(A){this._filterEffect||(this._filterEffect=new FilterEffect),this._filterEffect.filterArea=A},get filterArea(){var A;return(A=this._filterEffect)==null?void 0:A.filterArea}},findMixin={label:null,get name(){return deprecation$1(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label},set name(A){deprecation$1(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label=A},getChildByName(A,_=!1){return this.getChildByLabel(A,_)},getChildByLabel(A,_=!1){const T=this.children;for(let E=0;E<T.length;E++){const C=T[E];if(C.label===A||A instanceof RegExp&&A.test(C.label))return C}if(_)for(let E=0;E<T.length;E++){const P=T[E].getChildByLabel(A,!0);if(P)return P}return null},getChildrenByLabel(A,_=!1,T=[]){const E=this.children;for(let C=0;C<E.length;C++){const P=E[C];(P.label===A||A instanceof RegExp&&A.test(P.label))&&T.push(P)}if(_)for(let C=0;C<E.length;C++)E[C].getChildrenByLabel(A,!0,T);return T}},matrixPool=new Pool(Matrix$1),boundsPool=new Pool(Bounds$1),tempMatrix$5=new Matrix$1,getFastGlobalBoundsMixin={getFastGlobalBounds(A,_){_||(_=new Bounds$1),_.clear(),this._getGlobalBoundsRecursive(!!A,_,this.parentRenderLayer),_.isValid||_.set(0,0,0,0);const T=this.renderGroup||this.parentRenderGroup;return _.applyMatrix(T.worldTransform),_},_getGlobalBoundsRecursive(A,_,T){let E=_;if(A&&this.parentRenderLayer&&this.parentRenderLayer!==T||this.localDisplayStatus!==7||!this.measurable)return;const C=!!this.effects.length;if((this.renderGroup||C)&&(E=boundsPool.get().clear()),this.boundsArea)_.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const I=this.bounds;E.addFrame(I.minX,I.minY,I.maxX,I.maxY,this.groupTransform)}const P=this.children;for(let I=0;I<P.length;I++)P[I]._getGlobalBoundsRecursive(A,E,T)}if(C){let P=!1;const I=this.renderGroup||this.parentRenderGroup;for(let F=0;F<this.effects.length;F++)this.effects[F].addBounds&&(P||(P=!0,E.applyMatrix(I.worldTransform)),this.effects[F].addBounds(E,!0));P&&(E.applyMatrix(I.worldTransform.copyTo(tempMatrix$5).invert()),_.addBounds(E,this.relativeGroupTransform)),_.addBounds(E),boundsPool.return(E)}else this.renderGroup&&(_.addBounds(E,this.relativeGroupTransform),boundsPool.return(E))}};function getGlobalBounds(A,_,T){T.clear();let E,C;return A.parent?_?E=A.parent.worldTransform:(C=matrixPool.get().identity(),E=updateTransformBackwards(A,C)):E=Matrix$1.IDENTITY,_getGlobalBounds(A,T,E,_),C&&matrixPool.return(C),T.isValid||T.set(0,0,0,0),T}function _getGlobalBounds(A,_,T,E){var F,R;if(!A.visible||!A.measurable)return;let C;E?C=A.worldTransform:(A.updateLocalTransform(),C=matrixPool.get(),C.appendFrom(A.localTransform,T));const P=_,I=!!A.effects.length;if(I&&(_=boundsPool.get().clear()),A.boundsArea)_.addRect(A.boundsArea,C);else{A.bounds&&(_.matrix=C,_.addBounds(A.bounds));for(let B=0;B<A.children.length;B++)_getGlobalBounds(A.children[B],_,C,E)}if(I){for(let B=0;B<A.effects.length;B++)(R=(F=A.effects[B]).addBounds)==null||R.call(F,_);P.addBounds(_,Matrix$1.IDENTITY),boundsPool.return(_)}E||matrixPool.return(C)}function updateTransformBackwards(A,_){const T=A.parent;return T&&(updateTransformBackwards(T,_),T.updateLocalTransform(),_.append(T.localTransform)),_}function multiplyHexColors(A,_){if(A===16777215||!_)return _;if(_===16777215||!A)return A;const T=A>>16&255,E=A>>8&255,C=A&255,P=_>>16&255,I=_>>8&255,F=_&255,R=T*P/255|0,B=E*I/255|0,O=C*F/255|0;return(R<<16)+(B<<8)+O}const WHITE_BGR=16777215;function multiplyColors(A,_){return A===WHITE_BGR?_:_===WHITE_BGR?A:multiplyHexColors(A,_)}function bgr2rgb(A){return((A&255)<<16)+(A&65280)+(A>>16&255)}const getGlobalMixin={getGlobalAlpha(A){if(A)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let _=this.alpha,T=this.parent;for(;T;)_*=T.alpha,T=T.parent;return _},getGlobalTransform(A,_){if(_)return A.copyFrom(this.worldTransform);this.updateLocalTransform();const T=updateTransformBackwards(this,matrixPool.get().identity());return A.appendFrom(this.localTransform,T),matrixPool.return(T),A},getGlobalTint(A){if(A)return this.renderGroup?bgr2rgb(this.renderGroup.worldColor):this.parentRenderGroup?bgr2rgb(multiplyColors(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let _=this.localColor,T=this.parent;for(;T;)_=multiplyColors(_,T.localColor),T=T.parent;return bgr2rgb(_)}};let warnCount=0;const maxWarnings=500;function warn(...A){warnCount!==maxWarnings&&(warnCount++,warnCount===maxWarnings?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...A))}function getLocalBounds(A,_,T){return _.clear(),T||(T=Matrix$1.IDENTITY),_getLocalBounds(A,_,T,A,!0),_.isValid||_.set(0,0,0,0),_}function _getLocalBounds(A,_,T,E,C){var R,B;let P;if(C)P=matrixPool.get(),P=T.copyTo(P);else{if(!A.visible||!A.measurable)return;A.updateLocalTransform();const O=A.localTransform;P=matrixPool.get(),P.appendFrom(O,T)}const I=_,F=!!A.effects.length;if(F&&(_=boundsPool.get().clear()),A.boundsArea)_.addRect(A.boundsArea,P);else{A.renderPipeId&&(_.matrix=P,_.addBounds(A.bounds));const O=A.children;for(let V=0;V<O.length;V++)_getLocalBounds(O[V],_,P,E,!1)}if(F){for(let O=0;O<A.effects.length;O++)(B=(R=A.effects[O]).addLocalBounds)==null||B.call(R,_,E);I.addBounds(_,Matrix$1.IDENTITY),boundsPool.return(_)}matrixPool.return(P)}function checkChildrenDidChange(A,_){const T=A.children;for(let E=0;E<T.length;E++){const C=T[E],P=C.uid,I=(C._didViewChangeTick&65535)<<16|C._didContainerChangeTick&65535,F=_.index;(_.data[F]!==P||_.data[F+1]!==I)&&(_.data[_.index]=P,_.data[_.index+1]=I,_.didChange=!0),_.index=F+2,C.children.length&&checkChildrenDidChange(C,_)}return _.didChange}const tempMatrix$4=new Matrix$1,measureMixin={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(A,_){const T=Math.sign(this.scale.x)||1;_!==0?this.scale.x=A/_*T:this.scale.x=T},_setHeight(A,_){const T=Math.sign(this.scale.y)||1;_!==0?this.scale.y=A/_*T:this.scale.y=T},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bounds$1});const A=this._localBoundsCacheData;return A.index=1,A.didChange=!1,A.data[0]!==this._didViewChangeTick&&(A.didChange=!0,A.data[0]=this._didViewChangeTick),checkChildrenDidChange(this,A),A.didChange&&getLocalBounds(this,A.localBounds,tempMatrix$4),A.localBounds},getBounds(A,_){return getGlobalBounds(this,A,_||new Bounds$1)}},onRenderMixin={_onRender:null,set onRender(A){const _=this.renderGroup||this.parentRenderGroup;if(!A){this._onRender&&(_==null||_.removeOnRender(this)),this._onRender=null;return}this._onRender||_==null||_.addOnRender(this),this._onRender=A},get onRender(){return this._onRender}},sortMixin={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(A){this._zIndex!==A&&(this._zIndex=A,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(sortChildren$1))}};function sortChildren$1(A,_){return A._zIndex-_._zIndex}const toLocalGlobalMixin={getGlobalPosition(A=new Point$1,_=!1){return this.parent?this.parent.toGlobal(this._position,A,_):(A.x=this._position.x,A.y=this._position.y),A},toGlobal(A,_,T=!1){const E=this.getGlobalTransform(matrixPool.get(),T);return _=E.apply(A,_),matrixPool.return(E),_},toLocal(A,_,T,E){_&&(A=_.toGlobal(A,T,E));const C=this.getGlobalTransform(matrixPool.get(),E);return T=C.applyInverse(A,T),matrixPool.return(C),T}};class InstructionSet{constructor(){this.uid=uid$1("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(_){this.instructions[this.instructionSize++]=_}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let count=0;class TexturePoolClass{constructor(_){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1}createTexture(_,T,E){const C=new TextureSource({...this.textureOptions,width:_,height:T,resolution:1,antialias:E,autoGarbageCollect:!1});return new Texture$1({source:C,label:`texturePool_${count++}`})}getOptimalTexture(_,T,E=1,C){let P=Math.ceil(_*E-1e-6),I=Math.ceil(T*E-1e-6);P=nextPow2$1(P),I=nextPow2$1(I);const F=(P<<17)+(I<<1)+(C?1:0);this._texturePool[F]||(this._texturePool[F]=[]);let R=this._texturePool[F].pop();return R||(R=this.createTexture(P,I,C)),R.source._resolution=E,R.source.width=P/E,R.source.height=I/E,R.source.pixelWidth=P,R.source.pixelHeight=I,R.frame.x=0,R.frame.y=0,R.frame.width=_,R.frame.height=T,R.updateUvs(),this._poolKeyHash[R.uid]=F,R}getSameSizeTexture(_,T=!1){const E=_.source;return this.getOptimalTexture(_.width,_.height,E._resolution,T)}returnTexture(_){const T=this._poolKeyHash[_.uid];this._texturePool[T].push(_)}clear(_){if(_=_!==!1,_)for(const T in this._texturePool){const E=this._texturePool[T];if(E)for(let C=0;C<E.length;C++)E[C].destroy(!0)}this._texturePool={}}}const TexturePool=new TexturePoolClass;class RenderGroup{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Matrix$1,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new InstructionSet,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(_){this.root=_,_._onRender&&this.addOnRender(_),_.didChange=!0;const T=_.children;for(let E=0;E<T.length;E++){const C=T[E];C._updateFlags=15,this.addChild(C)}}enableCacheAsTexture(_={}){this.textureOptions=_,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(TexturePool.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const _ in this.childrenToUpdate){const T=this.childrenToUpdate[_];T.list.fill(null),T.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(_){_.renderGroupParent&&_.renderGroupParent._removeRenderGroupChild(_),_.renderGroupParent=this,this.renderGroupChildren.push(_)}_removeRenderGroupChild(_){const T=this.renderGroupChildren.indexOf(_);T>-1&&this.renderGroupChildren.splice(T,1),_.renderGroupParent=null}addChild(_){if(this.structureDidChange=!0,_.parentRenderGroup=this,_.updateTick=-1,_.parent===this.root?_.relativeRenderGroupDepth=1:_.relativeRenderGroupDepth=_.parent.relativeRenderGroupDepth+1,_.didChange=!0,this.onChildUpdate(_),_.renderGroup){this.addRenderGroupChild(_.renderGroup);return}_._onRender&&this.addOnRender(_);const T=_.children;for(let E=0;E<T.length;E++)this.addChild(T[E])}removeChild(_){if(this.structureDidChange=!0,_._onRender&&(_.renderGroup||this.removeOnRender(_)),_.parentRenderGroup=null,_.renderGroup){this._removeRenderGroupChild(_.renderGroup);return}const T=_.children;for(let E=0;E<T.length;E++)this.removeChild(T[E])}removeChildren(_){for(let T=0;T<_.length;T++)this.removeChild(_[T])}onChildUpdate(_){let T=this.childrenToUpdate[_.relativeRenderGroupDepth];T||(T=this.childrenToUpdate[_.relativeRenderGroupDepth]={index:0,list:[]}),T.list[T.index++]=_}updateRenderable(_){_.globalDisplayStatus<7||(this.instructionSet.renderPipes[_.renderPipeId].updateRenderable(_),_.didViewUpdate=!1)}onChildViewUpdate(_){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=_}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(_){this._onRenderContainers.push(_)}removeOnRender(_){this._onRenderContainers.splice(this._onRenderContainers.indexOf(_),1)}runOnRender(_){for(let T=0;T<this._onRenderContainers.length;T++)this._onRenderContainers[T]._onRender(_)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(_=[]){const T=this.root.children;for(let E=0;E<T.length;E++)this._getChildren(T[E],_);return _}_getChildren(_,T=[]){if(T.push(_),_.renderGroup)return T;const E=_.children;for(let C=0;C<E.length;C++)this._getChildren(E[C],T);return T}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Matrix$1),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Matrix$1),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const _=this._parentCacheAsTextureRenderGroup;return _?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Matrix$1),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(_.inverseWorldTransform).translate(-_._textureBounds.x,-_._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function assignWithIgnore(A,_,T={}){for(const E in _)!T[E]&&_[E]!==void 0&&(A[E]=_[E])}const defaultSkew=new ObservablePoint$1(null),defaultPivot=new ObservablePoint$1(null),defaultScale=new ObservablePoint$1(null,1,1),UPDATE_COLOR=1,UPDATE_BLEND=2,UPDATE_VISIBLE=4;let Container$1=class pr extends EventEmitter$1{constructor(_={}){var T,E;super(),this.uid=uid$1("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Matrix$1,this.relativeGroupTransform=new Matrix$1,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new ObservablePoint$1(this,0,0),this._scale=defaultScale,this._pivot=defaultPivot,this._skew=defaultSkew,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],assignWithIgnore(this,_,{children:!0,parent:!0,effects:!0}),(T=_.children)==null||T.forEach(C=>this.addChild(C)),(E=_.parent)==null||E.addChild(this)}static mixin(_){deprecation$1("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),extensions$1.mixin(pr,_)}set _didChangeId(_){this._didViewChangeTick=_>>12&4095,this._didContainerChangeTick=_&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(..._){if(this.allowChildren||deprecation$1(v8_0_0,"addChild: Only Containers will be allowed to add children in v8.0.0"),_.length>1){for(let C=0;C<_.length;C++)this.addChild(_[C]);return _[0]}const T=_[0],E=this.renderGroup||this.parentRenderGroup;return T.parent===this?(this.children.splice(this.children.indexOf(T),1),this.children.push(T),E&&(E.structureDidChange=!0),T):(T.parent&&T.parent.removeChild(T),this.children.push(T),this.sortableChildren&&(this.sortDirty=!0),T.parent=this,T.didChange=!0,T._updateFlags=15,E&&E.addChild(T),this.emit("childAdded",T,this,this.children.length-1),T.emit("added",this),this._didViewChangeTick++,T._zIndex!==0&&T.depthOfChildModified(),T)}removeChild(..._){if(_.length>1){for(let C=0;C<_.length;C++)this.removeChild(_[C]);return _[0]}const T=_[0],E=this.children.indexOf(T);return E>-1&&(this._didViewChangeTick++,this.children.splice(E,1),this.renderGroup?this.renderGroup.removeChild(T):this.parentRenderGroup&&this.parentRenderGroup.removeChild(T),T.parentRenderLayer&&T.parentRenderLayer.detach(T),T.parent=null,this.emit("childRemoved",T,this,E),T.emit("removed",this)),T}_onUpdate(_){_&&_===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(_){!!this.renderGroup!==_&&(_?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const _=this.parentRenderGroup;_==null||_.removeChild(this),this.renderGroup=BigPool.get(RenderGroup,this),this.groupTransform=Matrix$1.IDENTITY,_==null||_.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const _=this.parentRenderGroup;_==null||_.removeChild(this),BigPool.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,_==null||_.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Matrix$1),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(_){this._position.x=_}get y(){return this._position.y}set y(_){this._position.y=_}get position(){return this._position}set position(_){this._position.copyFrom(_)}get rotation(){return this._rotation}set rotation(_){this._rotation!==_&&(this._rotation=_,this._onUpdate(this._skew))}get angle(){return this.rotation*RAD_TO_DEG$1}set angle(_){this.rotation=_*DEG_TO_RAD$1}get pivot(){return this._pivot===defaultPivot&&(this._pivot=new ObservablePoint$1(this,0,0)),this._pivot}set pivot(_){this._pivot===defaultPivot&&(this._pivot=new ObservablePoint$1(this,0,0)),typeof _=="number"?this._pivot.set(_):this._pivot.copyFrom(_)}get skew(){return this._skew===defaultSkew&&(this._skew=new ObservablePoint$1(this,0,0)),this._skew}set skew(_){this._skew===defaultSkew&&(this._skew=new ObservablePoint$1(this,0,0)),this._skew.copyFrom(_)}get scale(){return this._scale===defaultScale&&(this._scale=new ObservablePoint$1(this,1,1)),this._scale}set scale(_){this._scale===defaultScale&&(this._scale=new ObservablePoint$1(this,0,0)),typeof _=="number"?this._scale.set(_):this._scale.copyFrom(_)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(_){const T=this.getLocalBounds().width;this._setWidth(_,T)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(_){const T=this.getLocalBounds().height;this._setHeight(_,T)}getSize(_){_||(_={});const T=this.getLocalBounds();return _.width=Math.abs(this.scale.x*T.width),_.height=Math.abs(this.scale.y*T.height),_}setSize(_,T){const E=this.getLocalBounds();typeof _=="object"?(T=_.height??_.width,_=_.width):T??(T=_),_!==void 0&&this._setWidth(_,E.width),T!==void 0&&this._setHeight(T,E.height)}_updateSkew(){const _=this._rotation,T=this._skew;this._cx=Math.cos(_+T._y),this._sx=Math.sin(_+T._y),this._cy=-Math.sin(_-T._x),this._sy=Math.cos(_-T._x)}updateTransform(_){return this.position.set(typeof _.x=="number"?_.x:this.position.x,typeof _.y=="number"?_.y:this.position.y),this.scale.set(typeof _.scaleX=="number"?_.scaleX||1:this.scale.x,typeof _.scaleY=="number"?_.scaleY||1:this.scale.y),this.rotation=typeof _.rotation=="number"?_.rotation:this.rotation,this.skew.set(typeof _.skewX=="number"?_.skewX:this.skew.x,typeof _.skewY=="number"?_.skewY:this.skew.y),this.pivot.set(typeof _.pivotX=="number"?_.pivotX:this.pivot.x,typeof _.pivotY=="number"?_.pivotY:this.pivot.y),this}setFromMatrix(_){_.decompose(this)}updateLocalTransform(){const _=this._didContainerChangeTick;if(this._didLocalTransformChangeId===_)return;this._didLocalTransformChangeId=_;const T=this.localTransform,E=this._scale,C=this._pivot,P=this._position,I=E._x,F=E._y,R=C._x,B=C._y;T.a=this._cx*I,T.b=this._sx*I,T.c=this._cy*F,T.d=this._sy*F,T.tx=P._x-(R*T.a+B*T.c),T.ty=P._y-(R*T.b+B*T.d)}set alpha(_){_!==this.localAlpha&&(this.localAlpha=_,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get alpha(){return this.localAlpha}set tint(_){const E=Color$2.shared.setValue(_??16777215).toBgrNumber();E!==this.localColor&&(this.localColor=E,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get tint(){return bgr2rgb(this.localColor)}set blendMode(_){this.localBlendMode!==_&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_BLEND,this.localBlendMode=_,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(_){const T=_?2:0;(this.localDisplayStatus&2)!==T&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(_){const T=_?0:4;(this.localDisplayStatus&4)!==T&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(_){const T=_?1:0;(this.localDisplayStatus&1)!==T&&(this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(_=!1){var C;if(this.destroyed)return;this.destroyed=!0;let T;if(this.children.length&&(T=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof _=="boolean"?_:_==null?void 0:_.children)&&T)for(let P=0;P<T.length;++P)T[P].destroy(_);(C=this.renderGroup)==null||C.destroy(),this.renderGroup=null}};extensions$1.mixin(Container$1,childrenHelperMixin,getFastGlobalBoundsMixin,toLocalGlobalMixin,onRenderMixin,measureMixin,effectsMixin,findMixin,sortMixin,cullingMixin,cacheAsTextureMixin,getGlobalMixin,collectRenderablesMixin);class ViewContainer extends Container$1{constructor(_){super(_),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Bounds$1(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(_){this._roundPixels=_?1:0}containsPoint(_){const T=this.bounds,{x:E,y:C}=_;return E>=T.minX&&E<=T.maxX&&C>=T.minY&&C<=T.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const _=this.renderGroup||this.parentRenderGroup;_&&_.onChildViewUpdate(this)}destroy(_){super.destroy(_),this._bounds=null}collectRenderablesSimple(_,T,E){const{renderPipes:C,renderableGC:P}=T;C.blendMode.setBlendMode(this,this.groupBlendMode,_),C[this.renderPipeId].addRenderable(this,_),P.addRenderable(this),this.didViewUpdate=!1;const F=this.children,R=F.length;for(let B=0;B<R;B++)F[B].collectRenderables(_,T,E)}}let Sprite$1=class zt extends ViewContainer{constructor(_=Texture$1.EMPTY){_ instanceof Texture$1&&(_={texture:_});const{texture:T=Texture$1.EMPTY,anchor:E,roundPixels:C,width:P,height:I,...F}=_;super({label:"Sprite",...F}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new ObservablePoint$1({_onUpdate:()=>{this.onViewUpdate()}}),E?this.anchor=E:T.defaultAnchor&&(this.anchor=T.defaultAnchor),this.texture=T,this.allowChildren=!1,this.roundPixels=C??!1,P!==void 0&&(this.width=P),I!==void 0&&(this.height=I)}static from(_,T=!1){return _ instanceof Texture$1?new zt(_):new zt(Texture$1.from(_,T))}set texture(_){_||(_=Texture$1.EMPTY);const T=this._texture;T!==_&&(T&&T.dynamic&&T.off("update",this.onViewUpdate,this),_.dynamic&&_.on("update",this.onViewUpdate,this),this._texture=_,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return updateQuadBounds(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return deprecation$1("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const _=this._anchor,T=this._texture,E=this._bounds,{width:C,height:P}=T.orig;E.minX=-_._x*C,E.maxX=E.minX+C,E.minY=-_._y*P,E.maxY=E.minY+P}destroy(_=!1){if(super.destroy(_),typeof _=="boolean"?_:_==null?void 0:_.texture){const E=typeof _=="boolean"?_:_==null?void 0:_.textureSource;this._texture.destroy(E)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(_){typeof _=="number"?this._anchor.set(_):this._anchor.copyFrom(_)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){this._setWidth(_,this._texture.orig.width),this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){this._setHeight(_,this._texture.orig.height),this._height=_}getSize(_){return _||(_={}),_.width=Math.abs(this.scale.x)*this._texture.orig.width,_.height=Math.abs(this.scale.y)*this._texture.orig.height,_}setSize(_,T){typeof _=="object"?(T=_.height??_.width,_=_.width):T??(T=_),_!==void 0&&this._setWidth(_,this._texture.orig.width),T!==void 0&&this._setHeight(T,this._texture.orig.height)}};const tempBounds=new Bounds$1;function addMaskBounds(A,_,T){const E=tempBounds;A.measurable=!0,getGlobalBounds(A,T,E),_.addBoundsMask(E),A.measurable=!1}function addMaskLocalBounds(A,_,T){const E=boundsPool.get();A.measurable=!0;const C=matrixPool.get().identity(),P=getMatrixRelativeToParent(A,T,C);getLocalBounds(A,E,P),A.measurable=!1,_.addBoundsMask(E),matrixPool.return(C),boundsPool.return(E)}function getMatrixRelativeToParent(A,_,T){return A?(A!==_&&(getMatrixRelativeToParent(A.parent,_,T),A.updateLocalTransform(),T.append(A.localTransform)),T):(warn("Mask bounds, renderable is not inside the root container"),T)}class AlphaMask{constructor(_){this.priority=0,this.inverse=!1,this.pipe="alphaMask",_!=null&&_.mask&&this.init(_.mask)}init(_){this.mask=_,this.renderMaskToTexture=!(_ instanceof Sprite$1),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(_,T){this.inverse||addMaskBounds(this.mask,_,T)}addLocalBounds(_,T){addMaskLocalBounds(this.mask,_,T)}containsPoint(_,T){const E=this.mask;return T(E,_)}destroy(){this.reset()}static test(_){return _ instanceof Sprite$1}}AlphaMask.extension=ExtensionType$1.MaskEffect;class ColorMask{constructor(_){this.priority=0,this.pipe="colorMask",_!=null&&_.mask&&this.init(_.mask)}init(_){this.mask=_}destroy(){}static test(_){return typeof _=="number"}}ColorMask.extension=ExtensionType$1.MaskEffect;class StencilMask{constructor(_){this.priority=0,this.pipe="stencilMask",_!=null&&_.mask&&this.init(_.mask)}init(_){this.mask=_,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(_,T){addMaskBounds(this.mask,_,T)}addLocalBounds(_,T){addMaskLocalBounds(this.mask,_,T)}containsPoint(_,T){const E=this.mask;return T(E,_)}destroy(){this.reset()}static test(_){return _ instanceof Container$1}}StencilMask.extension=ExtensionType$1.MaskEffect;const BrowserAdapter$1={createCanvas:(A,_)=>{const T=document.createElement("canvas");return T.width=A,T.height=_,T},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(A,_)=>fetch(A,_),parseXML:A=>new DOMParser().parseFromString(A,"text/xml")};let currentAdapter=BrowserAdapter$1;const DOMAdapter={get(){return currentAdapter},set(A){currentAdapter=A}};class CanvasSource extends TextureSource{constructor(_){_.resource||(_.resource=DOMAdapter.get().createCanvas()),_.width||(_.width=_.resource.width,_.autoDensity||(_.width/=_.resolution)),_.height||(_.height=_.resource.height,_.autoDensity||(_.height/=_.resolution)),super(_),this.uploadMethodId="image",this.autoDensity=_.autoDensity,this.resizeCanvas(),this.transparent=!!_.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(_=this.width,T=this.height,E=this._resolution){const C=super.resize(_,T,E);return C&&this.resizeCanvas(),C}static test(_){return globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&_ instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}CanvasSource.extension=ExtensionType$1.TextureSource;class ImageSource extends TextureSource{constructor(_){if(_.resource&&globalThis.HTMLImageElement&&_.resource instanceof HTMLImageElement){const T=DOMAdapter.get().createCanvas(_.resource.width,_.resource.height);T.getContext("2d").drawImage(_.resource,0,0,_.resource.width,_.resource.height),_.resource=T,warn("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(_),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(_){return globalThis.HTMLImageElement&&_ instanceof HTMLImageElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap||globalThis.VideoFrame&&_ instanceof VideoFrame}}ImageSource.extension=ExtensionType$1.TextureSource;var UPDATE_PRIORITY$1=(A=>(A[A.INTERACTION=50]="INTERACTION",A[A.HIGH=25]="HIGH",A[A.NORMAL=0]="NORMAL",A[A.LOW=-25]="LOW",A[A.UTILITY=-50]="UTILITY",A))(UPDATE_PRIORITY$1||{});let TickerListener$1=class{constructor(_,T=null,E=0,C=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=_,this._context=T,this.priority=E,this._once=C}match(_,T=null){return this._fn===_&&this._context===T}emit(_){this._fn&&(this._context?this._fn.call(this._context,_):this._fn(_));const T=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),T}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const T=this.next;return this.next=_?null:T,this.previous=null,T}};const _Ticker$1=class Je{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener$1(null,null,1/0),this.deltaMS=1/Je.targetFPMS,this.elapsedMS=1/Je.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,T,E=UPDATE_PRIORITY$1.NORMAL){return this._addListener(new TickerListener$1(_,T,E))}addOnce(_,T,E=UPDATE_PRIORITY$1.NORMAL){return this._addListener(new TickerListener$1(_,T,E,!0))}_addListener(_){let T=this._head.next,E=this._head;if(!T)_.connect(E);else{for(;T;){if(_.priority>T.priority){_.connect(E);break}E=T,T=T.next}_.previous||_.connect(E)}return this._startIfPossible(),this}remove(_,T){let E=this._head.next;for(;E;)E.match(_,T)?E=E.destroy():E=E.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,T=this._head;for(;T=T.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let T;if(_>this.lastTime){if(T=this.elapsedMS=_-this.lastTime,T>this._maxElapsedMS&&(T=this._maxElapsedMS),T*=this.speed,this._minElapsedMS){const P=_-this._lastFrame|0;if(P<this._minElapsedMS)return;this._lastFrame=_-P%this._minElapsedMS}this.deltaMS=T,this.deltaTime=this.deltaMS*Je.targetFPMS;const E=this._head;let C=E.next;for(;C;)C=C.emit(this);E.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const T=Math.min(this.maxFPS,_),E=Math.min(Math.max(0,T)/1e3,Je.targetFPMS);this._maxElapsedMS=1/E}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const T=Math.max(this.minFPS,_);this._minElapsedMS=1/(T/1e3)}}static get shared(){if(!Je._shared){const _=Je._shared=new Je;_.autoStart=!0,_._protected=!0}return Je._shared}static get system(){if(!Je._system){const _=Je._system=new Je;_.autoStart=!0,_._protected=!0}return Je._system}};_Ticker$1.targetFPMS=.06;let Ticker$1=_Ticker$1,promise$1;async function detectVideoAlphaMode$1(){return promise$1??(promise$1=(async()=>{var I;const _=document.createElement("canvas").getContext("webgl");if(!_)return"premultiply-alpha-on-upload";const T=await new Promise(F=>{const R=document.createElement("video");R.onloadeddata=()=>F(R),R.onerror=()=>F(null),R.autoplay=!1,R.crossOrigin="anonymous",R.preload="auto",R.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",R.load()});if(!T)return"premultiply-alpha-on-upload";const E=_.createTexture();_.bindTexture(_.TEXTURE_2D,E);const C=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,C),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,E,0),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),_.pixelStorei(_.UNPACK_COLORSPACE_CONVERSION_WEBGL,_.NONE),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,T);const P=new Uint8Array(4);return _.readPixels(0,0,1,1,_.RGBA,_.UNSIGNED_BYTE,P),_.deleteFramebuffer(C),_.deleteTexture(E),(I=_.getExtension("WEBGL_lose_context"))==null||I.loseContext(),P[0]<=P[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),promise$1}const _VideoSource=class mr extends TextureSource{constructor(_){super(_),this.isReady=!1,this.uploadMethodId="video",_={...mr.defaultOptions,..._},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=_.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=_.autoPlay!==!1,this.alphaMode=_.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),_.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const _=Ticker$1.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-_)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const _=this.resource,T=this.options;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(T.preload||_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlayThrough),_.addEventListener("error",this._onError,!0)),this.alphaMode=await detectVideoAlphaMode$1(),this._load=new Promise((E,C)=>{this.isValid?E(this):(this._resolve=E,this._reject=C,T.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${T.preloadTimeoutMs}ms`))})),_.load())}),this._load}_onError(_){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.resource;return!_.paused&&!_.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const _=this.resource;this.isValid&&(this.isReady=!0,this.resize(_.videoWidth,_.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const _=this.resource;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlayThrough),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker$1.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker$1.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker$1.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement}};_VideoSource.extension=ExtensionType$1.TextureSource;_VideoSource.defaultOptions={...TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};_VideoSource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoSource=_VideoSource;const convertToList$1=(A,_,T=!1)=>(Array.isArray(A)||(A=[A]),_?A.map(E=>typeof E=="string"||T?_(E):E):A);let CacheClass$1=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const T=this._cache.get(_);return T||warn(`[Assets] Asset id ${_} was not found in the Cache`),T}set(_,T){const E=convertToList$1(_);let C;for(let R=0;R<this.parsers.length;R++){const B=this.parsers[R];if(B.test(T)){C=B.getCacheableAssets(E,T);break}}const P=new Map(Object.entries(C||{}));C||E.forEach(R=>{P.set(R,T)});const I=[...P.keys()],F={cacheKeys:I,keys:E};E.forEach(R=>{this._cacheMap.set(R,F)}),I.forEach(R=>{const B=C?C[R]:T;this._cache.has(R)&&this._cache.get(R)!==B&&warn("[Cache] already has key:",R),this._cache.set(R,P.get(R))})}remove(_){if(!this._cacheMap.has(_)){warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const T=this._cacheMap.get(_);T.cacheKeys.forEach(C=>{this._cache.delete(C)}),T.keys.forEach(C=>{this._cacheMap.delete(C)})}get parsers(){return this._parsers}};const Cache$1=new CacheClass$1,sources=[];extensions$1.handleByList(ExtensionType$1.TextureSource,sources);function textureSourceFrom(A={}){const _=A&&A.resource,T=_?A.resource:A,E=_?A:{resource:A};for(let C=0;C<sources.length;C++){const P=sources[C];if(P.test(T))return new P(E)}throw new Error(`Could not find a source type for resource: ${E.resource}`)}function resourceToTexture(A={},_=!1){const T=A&&A.resource,E=T?A.resource:A,C=T?A:{resource:A};if(!_&&Cache$1.has(E))return Cache$1.get(E);const P=new Texture$1({source:textureSourceFrom(C)});return P.on("destroy",()=>{Cache$1.has(E)&&Cache$1.remove(E)}),_||Cache$1.set(E,P),P}function textureFrom(A,_=!1){return typeof A=="string"?Cache$1.get(A):A instanceof TextureSource?new Texture$1({source:A}):resourceToTexture(A,_)}Texture$1.from=textureFrom;TextureSource.from=textureSourceFrom;extensions$1.add(AlphaMask,ColorMask,StencilMask,VideoSource,ImageSource,CanvasSource,BufferImageSource);var LoaderParserPriority$1=(A=>(A[A.Low=0]="Low",A[A.Normal=1]="Normal",A[A.High=2]="High",A))(LoaderParserPriority$1||{});function assertPath$1(A){if(typeof A!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(A)}`)}function removeUrlParams$1(A){return A.split("?")[0].split("#")[0]}function escapeRegExp$1(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll$1(A,_,T){return A.replace(new RegExp(escapeRegExp$1(_),"g"),T)}function normalizeStringPosix$1(A,_){let T="",E=0,C=-1,P=0,I=-1;for(let F=0;F<=A.length;++F){if(F<A.length)I=A.charCodeAt(F);else{if(I===47)break;I=47}if(I===47){if(!(C===F-1||P===1))if(C!==F-1&&P===2){if(T.length<2||E!==2||T.charCodeAt(T.length-1)!==46||T.charCodeAt(T.length-2)!==46){if(T.length>2){const R=T.lastIndexOf("/");if(R!==T.length-1){R===-1?(T="",E=0):(T=T.slice(0,R),E=T.length-1-T.lastIndexOf("/")),C=F,P=0;continue}}else if(T.length===2||T.length===1){T="",E=0,C=F,P=0;continue}}}else T.length>0?T+=`/${A.slice(C+1,F)}`:T=A.slice(C+1,F),E=F-C-1;C=F,P=0}else I===46&&P!==-1?++P:P=-1}return T}const path$1={toPosix(A){return replaceAll$1(A,"\\","/")},isUrl(A){return/^https?:/.test(this.toPosix(A))},isDataUrl(A){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(A)},isBlobUrl(A){return A.startsWith("blob:")},hasProtocol(A){return/^[^/:]+:/.test(this.toPosix(A))},getProtocol(A){assertPath$1(A),A=this.toPosix(A);const _=/^file:\/\/\//.exec(A);if(_)return _[0];const T=/^[^/:]+:\/{0,2}/.exec(A);return T?T[0]:""},toAbsolute(A,_,T){if(assertPath$1(A),this.isDataUrl(A)||this.isBlobUrl(A))return A;const E=removeUrlParams$1(this.toPosix(_??DOMAdapter.get().getBaseUrl())),C=removeUrlParams$1(this.toPosix(T??this.rootname(E)));return A=this.toPosix(A),A.startsWith("/")?path$1.join(C,A.slice(1)):this.isAbsolute(A)?A:this.join(E,A)},normalize(A){if(assertPath$1(A),A.length===0)return".";if(this.isDataUrl(A)||this.isBlobUrl(A))return A;A=this.toPosix(A);let _="";const T=A.startsWith("/");this.hasProtocol(A)&&(_=this.rootname(A),A=A.slice(_.length));const E=A.endsWith("/");return A=normalizeStringPosix$1(A),A.length>0&&E&&(A+="/"),T?`/${A}`:_+A},isAbsolute(A){return assertPath$1(A),A=this.toPosix(A),this.hasProtocol(A)?!0:A.startsWith("/")},join(...A){if(A.length===0)return".";let _;for(let T=0;T<A.length;++T){const E=A[T];if(assertPath$1(E),E.length>0)if(_===void 0)_=E;else{const C=A[T-1]??"";this.joinExtensions.includes(this.extname(C).toLowerCase())?_+=`/../${E}`:_+=`/${E}`}}return _===void 0?".":this.normalize(_)},dirname(A){if(assertPath$1(A),A.length===0)return".";A=this.toPosix(A);let _=A.charCodeAt(0);const T=_===47;let E=-1,C=!0;const P=this.getProtocol(A),I=A;A=A.slice(P.length);for(let F=A.length-1;F>=1;--F)if(_=A.charCodeAt(F),_===47){if(!C){E=F;break}}else C=!1;return E===-1?T?"/":this.isUrl(I)?P+A:P:T&&E===1?"//":P+A.slice(0,E)},rootname(A){assertPath$1(A),A=this.toPosix(A);let _="";if(A.startsWith("/")?_="/":_=this.getProtocol(A),this.isUrl(A)){const T=A.indexOf("/",_.length);T!==-1?_=A.slice(0,T):_=A,_.endsWith("/")||(_+="/")}return _},basename(A,_){assertPath$1(A),_&&assertPath$1(_),A=removeUrlParams$1(this.toPosix(A));let T=0,E=-1,C=!0,P;if(_!==void 0&&_.length>0&&_.length<=A.length){if(_.length===A.length&&_===A)return"";let I=_.length-1,F=-1;for(P=A.length-1;P>=0;--P){const R=A.charCodeAt(P);if(R===47){if(!C){T=P+1;break}}else F===-1&&(C=!1,F=P+1),I>=0&&(R===_.charCodeAt(I)?--I===-1&&(E=P):(I=-1,E=F))}return T===E?E=F:E===-1&&(E=A.length),A.slice(T,E)}for(P=A.length-1;P>=0;--P)if(A.charCodeAt(P)===47){if(!C){T=P+1;break}}else E===-1&&(C=!1,E=P+1);return E===-1?"":A.slice(T,E)},extname(A){assertPath$1(A),A=removeUrlParams$1(this.toPosix(A));let _=-1,T=0,E=-1,C=!0,P=0;for(let I=A.length-1;I>=0;--I){const F=A.charCodeAt(I);if(F===47){if(!C){T=I+1;break}continue}E===-1&&(C=!1,E=I+1),F===46?_===-1?_=I:P!==1&&(P=1):_!==-1&&(P=-1)}return _===-1||E===-1||P===0||P===1&&_===E-1&&_===T+1?"":A.slice(_,E)},parse(A){assertPath$1(A);const _={root:"",dir:"",base:"",ext:"",name:""};if(A.length===0)return _;A=removeUrlParams$1(this.toPosix(A));let T=A.charCodeAt(0);const E=this.isAbsolute(A);let C;_.root=this.rootname(A),E||this.hasProtocol(A)?C=1:C=0;let P=-1,I=0,F=-1,R=!0,B=A.length-1,O=0;for(;B>=C;--B){if(T=A.charCodeAt(B),T===47){if(!R){I=B+1;break}continue}F===-1&&(R=!1,F=B+1),T===46?P===-1?P=B:O!==1&&(O=1):P!==-1&&(O=-1)}return P===-1||F===-1||O===0||O===1&&P===F-1&&P===I+1?F!==-1&&(I===0&&E?_.base=_.name=A.slice(1,F):_.base=_.name=A.slice(I,F)):(I===0&&E?(_.name=A.slice(1,P),_.base=A.slice(1,F)):(_.name=A.slice(I,P),_.base=A.slice(I,F)),_.ext=A.slice(P,F)),_.dir=this.dirname(A),_},sep:"/",delimiter:":",joinExtensions:[".html"]};function processX$1(A,_,T,E,C){const P=_[T];for(let I=0;I<P.length;I++){const F=P[I];T<_.length-1?processX$1(A.replace(E[T],F),_,T+1,E,C):C.push(A.replace(E[T],F))}}function createStringVariations$1(A){const _=/\{(.*?)\}/g,T=A.match(_),E=[];if(T){const C=[];T.forEach(P=>{const I=P.substring(1,P.length-1).split(",");C.push(I)}),processX$1(A,C,0,T,E)}else E.push(A);return E}const isSingleItem$1=A=>!Array.isArray(A);let Resolver$1=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,T)=>`${_}${this._bundleIdConnector}${T}`,extractAssetIdFromBundle:(_,T)=>T.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(T=>{this._preferredOrder.push(T),T.priority||(T.priority=Object.keys(T.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const T=_;this._defaultSearchParams=Object.keys(T).map(E=>`${encodeURIComponent(E)}=${encodeURIComponent(T[E])}`).join("&")}}getAlias(_){const{alias:T,src:E}=_;return convertToList$1(T||E,P=>typeof P=="string"?P:Array.isArray(P)?P.map(I=>(I==null?void 0:I.src)??I):P!=null&&P.src?P.src:P,!0)}addManifest(_){this._manifest&&warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(T=>{this.addBundle(T.name,T.assets)})}addBundle(_,T){const E=[];let C=T;Array.isArray(T)||(C=Object.entries(T).map(([P,I])=>typeof I=="string"||Array.isArray(I)?{alias:P,src:I}:{alias:P,...I})),C.forEach(P=>{const I=P.src,F=P.alias;let R;if(typeof F=="string"){const B=this._createBundleAssetId(_,F);E.push(B),R=[F,B]}else{const B=F.map(O=>this._createBundleAssetId(_,O));E.push(...B),R=[...F,...B]}this.add({...P,alias:R,src:I})}),this._bundles[_]=E}add(_){const T=[];Array.isArray(_)?T.push(..._):T.push(_);let E;E=P=>{this.hasKey(P)&&warn(`[Resolver] already has key: ${P} overwriting`)},convertToList$1(T).forEach(P=>{const{src:I}=P;let{data:F,format:R,loadParser:B}=P;const O=convertToList$1(I).map(D=>typeof D=="string"?createStringVariations$1(D):Array.isArray(D)?D:[D]),V=this.getAlias(P);Array.isArray(V)?V.forEach(E):E(V);const L=[];O.forEach(D=>{D.forEach(U=>{let G={};if(typeof U!="object"){G.src=U;for(let X=0;X<this._parsers.length;X++){const z=this._parsers[X];if(z.test(U)){G=z.parse(U);break}}}else F=U.data??F,R=U.format??R,B=U.loadParser??B,G={...G,...U};if(!V)throw new Error(`[Resolver] alias is undefined for this asset: ${G.src}`);G=this._buildResolvedAsset(G,{aliases:V,data:F,format:R,loadParser:B}),L.push(G)})}),V.forEach(D=>{this._assetMap[D]=L})})}resolveBundle(_){const T=isSingleItem$1(_);_=convertToList$1(_);const E={};return _.forEach(C=>{const P=this._bundles[C];if(P){const I=this.resolve(P),F={};for(const R in I){const B=I[R];F[this._extractAssetIdFromBundle(C,R)]=B}E[C]=F}}),T?E[_[0]]:E}resolveUrl(_){const T=this.resolve(_);if(typeof _!="string"){const E={};for(const C in T)E[C]=T[C].src;return E}return T.src}resolve(_){const T=isSingleItem$1(_);_=convertToList$1(_);const E={};return _.forEach(C=>{if(!this._resolverHash[C])if(this._assetMap[C]){let P=this._assetMap[C];const I=this._getPreferredOrder(P);I==null||I.priority.forEach(F=>{I.params[F].forEach(R=>{const B=P.filter(O=>O[F]?O[F]===R:!1);B.length&&(P=B)})}),this._resolverHash[C]=P[0]}else this._resolverHash[C]=this._buildResolvedAsset({alias:[C],src:C},{});E[C]=this._resolverHash[C]}),T?E[_[0]]:E}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let T=0;T<_.length;T++){const E=_[T],C=this._preferredOrder.find(P=>P.params.format.includes(E.format));if(C)return C}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const T=/\?/.test(_)?"&":"?";return`${_}${T}${this._defaultSearchParams}`}_buildResolvedAsset(_,T){const{aliases:E,data:C,loadParser:P,format:I}=T;return(this._basePath||this._rootPath)&&(_.src=path$1.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=E??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...C||{},..._.data},_.loadParser=P??_.loadParser,_.format=I??_.format??getUrlExtension(_.src),_}};Resolver$1.RETINA_PREFIX=/@([0-9\.]+)x/;function getUrlExtension(A){return A.split(".").pop().split("?").shift().split("#").shift()}const copySearchParams=(A,_)=>{const T=_.split("?")[1];return T&&(A+=`?${T}`),A},_Spritesheet=class St{constructor(_,T){this.linkedSheets=[],this._texture=_ instanceof Texture$1?_:null,this.textureSource=_.source,this.textures={},this.animations={},this.data=T;const E=parseFloat(T.meta.scale);E?(this.resolution=E,_.source.resolution=this.resolution):this.resolution=_.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(_=>{this._callback=_,this._batchIndex=0,this._frameKeys.length<=St.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(_){let T=_;const E=St.BATCH_SIZE;for(;T-_<E&&T<this._frameKeys.length;){const C=this._frameKeys[T],P=this._frames[C],I=P.frame;if(I){let F=null,R=null;const B=P.trimmed!==!1&&P.sourceSize?P.sourceSize:P.frame,O=new Rectangle$1(0,0,Math.floor(B.w)/this.resolution,Math.floor(B.h)/this.resolution);P.rotated?F=new Rectangle$1(Math.floor(I.x)/this.resolution,Math.floor(I.y)/this.resolution,Math.floor(I.h)/this.resolution,Math.floor(I.w)/this.resolution):F=new Rectangle$1(Math.floor(I.x)/this.resolution,Math.floor(I.y)/this.resolution,Math.floor(I.w)/this.resolution,Math.floor(I.h)/this.resolution),P.trimmed!==!1&&P.spriteSourceSize&&(R=new Rectangle$1(Math.floor(P.spriteSourceSize.x)/this.resolution,Math.floor(P.spriteSourceSize.y)/this.resolution,Math.floor(I.w)/this.resolution,Math.floor(I.h)/this.resolution)),this.textures[C]=new Texture$1({source:this.textureSource,frame:F,orig:O,trim:R,rotate:P.rotated?2:0,defaultAnchor:P.anchor,defaultBorders:P.borders,label:C.toString()})}T++}}_processAnimations(){const _=this.data.animations||{};for(const T in _){this.animations[T]=[];for(let E=0;E<_[T].length;E++){const C=_[T][E];this.animations[T].push(this.textures[C])}}}_parseComplete(){const _=this._callback;this._callback=null,this._batchIndex=0,_.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*St.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*St.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(_=!1){var T;for(const E in this.textures)this.textures[E].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,_&&((T=this._texture)==null||T.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function getCacheableAssets(A,_,T){const E={};if(A.forEach(C=>{E[C]=_}),Object.keys(_.textures).forEach(C=>{E[C]=_.textures[C]}),!T){const C=path$1.dirname(A[0]);_.linkedSheets.forEach((P,I)=>{const F=getCacheableAssets([`${C}/${_.data.meta.related_multi_packs[I]}`],P,!0);Object.assign(E,F)})}return E}const spritesheetAsset={extension:ExtensionType$1.Asset,cache:{test:A=>A instanceof Spritesheet,getCacheableAssets:(A,_)=>getCacheableAssets(A,_,!1)},resolver:{extension:{type:ExtensionType$1.ResolveParser,name:"resolveSpritesheet"},test:A=>{const T=A.split("?")[0].split("."),E=T.pop(),C=T.pop();return E==="json"&&validImages.includes(C)},parse:A=>{var T;const _=A.split(".");return{resolution:parseFloat(((T=Resolver$1.RETINA_PREFIX.exec(A))==null?void 0:T[1])??"1"),format:_[_.length-2],src:A}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.Normal,name:"spritesheetLoader"},async testParse(A,_){return path$1.extname(_.src).toLowerCase()===".json"&&!!A.frames},async parse(A,_,T){var O,V;const{texture:E,imageFilename:C,textureOptions:P}=(_==null?void 0:_.data)??{};let I=path$1.dirname(_.src);I&&I.lastIndexOf("/")!==I.length-1&&(I+="/");let F;if(E instanceof Texture$1)F=E;else{const L=copySearchParams(I+(C??A.meta.image),_.src);F=(await T.load([{src:L,data:P}]))[L]}const R=new Spritesheet(F.source,A);await R.parse();const B=(O=A==null?void 0:A.meta)==null?void 0:O.related_multi_packs;if(Array.isArray(B)){const L=[];for(const U of B){if(typeof U!="string")continue;let G=I+U;(V=_.data)!=null&&V.ignoreMultiPack||(G=copySearchParams(G,_.src),L.push(T.load({src:G,data:{textureOptions:P,ignoreMultiPack:!0}})))}const D=await Promise.all(L);R.linkedSheets=D,D.forEach(U=>{U.linkedSheets=[R].concat(R.linkedSheets.filter(G=>G!==U))})}return R},async unload(A,_,T){await T.unload(A.textureSource._sourceOrigin),A.destroy(!1)}}};extensions$1.add(spritesheetAsset);var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(A){return typeof A<"u"&&A.platform==="MacIntel"&&typeof A.maxTouchPoints=="number"&&A.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(A){return function(_){return _.test(A)}}function isMobile$1(A){var _={userAgent:"",platform:"",maxTouchPoints:0};!A&&typeof navigator<"u"?_={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof A=="string"?_.userAgent=A:A&&A.userAgent&&(_={userAgent:A.userAgent,platform:A.platform,maxTouchPoints:A.maxTouchPoints||0});var T=_.userAgent,E=T.split("[FBAN");typeof E[1]<"u"&&(T=E[0]),E=T.split("Twitter"),typeof E[1]<"u"&&(T=E[0]);var C=createMatch(T),P={apple:{phone:C(appleIphone)&&!C(windowsPhone),ipod:C(appleIpod),tablet:!C(appleIphone)&&(C(appleTablet)||isAppleTabletOnIos13(_))&&!C(windowsPhone),universal:C(appleUniversal),device:(C(appleIphone)||C(appleIpod)||C(appleTablet)||C(appleUniversal)||isAppleTabletOnIos13(_))&&!C(windowsPhone)},amazon:{phone:C(amazonPhone),tablet:!C(amazonPhone)&&C(amazonTablet),device:C(amazonPhone)||C(amazonTablet)},android:{phone:!C(windowsPhone)&&C(amazonPhone)||!C(windowsPhone)&&C(androidPhone),tablet:!C(windowsPhone)&&!C(amazonPhone)&&!C(androidPhone)&&(C(amazonTablet)||C(androidTablet)),device:!C(windowsPhone)&&(C(amazonPhone)||C(amazonTablet)||C(androidPhone)||C(androidTablet))||C(/\bokhttp\b/i)},windows:{phone:C(windowsPhone),tablet:C(windowsTablet),device:C(windowsPhone)||C(windowsTablet)},other:{blackberry:C(otherBlackBerry),blackberry10:C(otherBlackBerry10),opera:C(otherOpera),firefox:C(otherFirefox),chrome:C(otherChrome),device:C(otherBlackBerry)||C(otherBlackBerry10)||C(otherOpera)||C(otherFirefox)||C(otherChrome)},any:!1,phone:!1,tablet:!1};return P.any=P.apple.device||P.android.device||P.windows.device||P.other.device,P.phone=P.apple.phone||P.android.phone||P.windows.phone,P.tablet=P.apple.tablet||P.android.tablet||P.windows.tablet,P}const idCounts=Object.create(null),idHash=Object.create(null);function createIdFromString(A,_){let T=idHash[A];return T===void 0&&(idCounts[_]===void 0&&(idCounts[_]=1),idHash[A]=T=idCounts[_]++),T}let context$1;function getTestContext$1(){return(!context$1||context$1!=null&&context$1.isContextLost())&&(context$1=DOMAdapter.get().createCanvas().getContext("webgl",{})),context$1}let maxFragmentPrecision$1;function getMaxFragmentPrecision$1(){if(!maxFragmentPrecision$1){maxFragmentPrecision$1="mediump";const A=getTestContext$1();A&&A.getShaderPrecisionFormat&&(maxFragmentPrecision$1=A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT).precision?"highp":"mediump")}return maxFragmentPrecision$1}function addProgramDefines(A,_,T){return _?A:T?(A=A.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${A}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${A}
        `}function ensurePrecision(A,_,T){const E=T?_.maxSupportedFragmentPrecision:_.maxSupportedVertexPrecision;if(A.substring(0,9)!=="precision"){let C=T?_.requestedFragmentPrecision:_.requestedVertexPrecision;return C==="highp"&&E!=="highp"&&(C="mediump"),`precision ${C} float;
${A}`}else if(E!=="highp"&&A.substring(0,15)==="precision highp")return A.replace("precision highp","precision mediump");return A}function insertVersion(A,_){return _?`#version 300 es
${A}`:A}const fragmentNameCache={},VertexNameCache={};function setProgramName(A,{name:_="pixi-program"},T=!0){_=_.replace(/\s+/g,"-"),_+=T?"-fragment":"-vertex";const E=T?fragmentNameCache:VertexNameCache;return E[_]?(E[_]++,_+=`-${E[_]}`):E[_]=1,A.indexOf("#define SHADER_NAME")!==-1?A:`${`#define SHADER_NAME ${_}`}
${A}`}function stripVersion(A,_){return _?A.replace("#version 300 es",""):A}const processes={stripVersion,ensurePrecision,addProgramDefines,setProgramName,insertVersion},programCache$1=Object.create(null),_GlProgram=class Yt{constructor(_){_={...Yt.defaultOptions,..._};const T=_.fragment.indexOf("#version 300 es")!==-1,E={stripVersion:T,ensurePrecision:{requestedFragmentPrecision:_.preferredFragmentPrecision,requestedVertexPrecision:_.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:getMaxFragmentPrecision$1()},setProgramName:{name:_.name},addProgramDefines:T,insertVersion:T};let C=_.fragment,P=_.vertex;Object.keys(processes).forEach(I=>{const F=E[I];C=processes[I](C,F,!0),P=processes[I](P,F,!1)}),this.fragment=C,this.vertex=P,this.transformFeedbackVaryings=_.transformFeedbackVaryings,this._key=createIdFromString(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(_){const T=`${_.vertex}:${_.fragment}`;return programCache$1[T]||(programCache$1[T]=new Yt(_)),programCache$1[T]}};_GlProgram.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let GlProgram=_GlProgram;const attributeFormatData={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function getAttributeInfoFromFormat(A){return attributeFormatData[A]??attributeFormatData.float32}const WGSL_TO_VERTEX_TYPES={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function extractAttributesFromGpuProgram({source:A,entryPoint:_}){const T={},E=A.indexOf(`fn ${_}`);if(E!==-1){const C=A.indexOf("->",E);if(C!==-1){const P=A.substring(E,C),I=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let F;for(;(F=I.exec(P))!==null;){const R=WGSL_TO_VERTEX_TYPES[F[3]]??"float32";T[F[2]]={location:parseInt(F[1],10),format:R,stride:getAttributeInfoFromFormat(R).stride,offset:0,instance:!1,start:0}}}}return T}function extractStructAndGroups(A){var V,L;const _=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,T=/@group\((\d+)\)/,E=/@binding\((\d+)\)/,C=/var(<[^>]+>)? (\w+)/,P=/:\s*(\w+)/,I=/struct\s+(\w+)\s*{([^}]+)}/g,F=/(\w+)\s*:\s*([\w\<\>]+)/g,R=/struct\s+(\w+)/,B=(V=A.match(_))==null?void 0:V.map(D=>({group:parseInt(D.match(T)[1],10),binding:parseInt(D.match(E)[1],10),name:D.match(C)[2],isUniform:D.match(C)[1]==="<uniform>",type:D.match(P)[1]}));if(!B)return{groups:[],structs:[]};const O=((L=A.match(I))==null?void 0:L.map(D=>{const U=D.match(R)[1],G=D.match(F).reduce((X,z)=>{const[Y,W]=z.split(":");return X[Y.trim()]=W.trim(),X},{});return G?{name:U,members:G}:null}).filter(({name:D})=>B.some(U=>U.type===D)))??[];return{groups:B,structs:O}}var ShaderStage=(A=>(A[A.VERTEX=1]="VERTEX",A[A.FRAGMENT=2]="FRAGMENT",A[A.COMPUTE=4]="COMPUTE",A))(ShaderStage||{});function generateGpuLayoutGroups({groups:A}){const _=[];for(let T=0;T<A.length;T++){const E=A[T];_[E.group]||(_[E.group]=[]),E.isUniform?_[E.group].push({binding:E.binding,visibility:ShaderStage.VERTEX|ShaderStage.FRAGMENT,buffer:{type:"uniform"}}):E.type==="sampler"?_[E.group].push({binding:E.binding,visibility:ShaderStage.FRAGMENT,sampler:{type:"filtering"}}):E.type==="texture_2d"&&_[E.group].push({binding:E.binding,visibility:ShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return _}function generateLayoutHash({groups:A}){const _=[];for(let T=0;T<A.length;T++){const E=A[T];_[E.group]||(_[E.group]={}),_[E.group][E.name]=E.binding}return _}function removeStructAndGroupDuplicates(A,_){const T=new Set,E=new Set,C=[...A.structs,..._.structs].filter(I=>T.has(I.name)?!1:(T.add(I.name),!0)),P=[...A.groups,..._.groups].filter(I=>{const F=`${I.name}-${I.binding}`;return E.has(F)?!1:(E.add(F),!0)});return{structs:C,groups:P}}const programCache=Object.create(null);class GpuProgram{constructor(_){var F,R;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:T,vertex:E,layout:C,gpuLayout:P,name:I}=_;if(this.name=I,this.fragment=T,this.vertex=E,T.source===E.source){const B=extractStructAndGroups(T.source);this.structsAndGroups=B}else{const B=extractStructAndGroups(E.source),O=extractStructAndGroups(T.source);this.structsAndGroups=removeStructAndGroupDuplicates(B,O)}this.layout=C??generateLayoutHash(this.structsAndGroups),this.gpuLayout=P??generateGpuLayoutGroups(this.structsAndGroups),this.autoAssignGlobalUniforms=((F=this.layout[0])==null?void 0:F.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((R=this.layout[1])==null?void 0:R.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:_,fragment:T}=this,E=_.source+T.source+_.entryPoint+T.entryPoint;this._layoutKey=createIdFromString(E,"program")}get attributeData(){return this._attributeData??(this._attributeData=extractAttributesFromGpuProgram(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(_){const T=`${_.vertex.source}:${_.fragment.source}:${_.fragment.entryPoint}:${_.vertex.entryPoint}`;return programCache[T]||(programCache[T]=new GpuProgram(_)),programCache[T]}}const UNIFORM_TYPES_VALUES=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],UNIFORM_TYPES_MAP=UNIFORM_TYPES_VALUES.reduce((A,_)=>(A[_]=!0,A),{});function getDefaultUniformValue(A,_){switch(A){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*_);case"vec3<f32>":return new Float32Array(3*_);case"vec4<f32>":return new Float32Array(4*_);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const _UniformGroup=class gr{constructor(_,T){this._touched=0,this.uid=uid$1("uniform"),this._resourceType="uniformGroup",this._resourceId=uid$1("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,T={...gr.defaultOptions,...T},this.uniformStructures=_;const E={};for(const C in _){const P=_[C];if(P.name=C,P.size=P.size??1,!UNIFORM_TYPES_MAP[P.type])throw new Error(`Uniform type ${P.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(", ")}`);P.value??(P.value=getDefaultUniformValue(P.type,P.size)),E[C]=P.value}this.uniforms=E,this._dirtyId=1,this.ubo=T.ubo,this.isStatic=T.isStatic,this._signature=createIdFromString(Object.keys(E).map(C=>`${C}-${_[C].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};_UniformGroup.defaultOptions={ubo:!1,isStatic:!1};let UniformGroup$1=_UniformGroup;class BindGroup{constructor(_){this.resources=Object.create(null),this._dirty=!0;let T=0;for(const E in _){const C=_[E];this.setResource(C,T++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const _=[];let T=0;for(const E in this.resources)_[T++]=this.resources[E]._resourceId;this._key=_.join("|")}setResource(_,T){var C,P;const E=this.resources[T];_!==E&&(E&&((C=_.off)==null||C.call(_,"change",this.onResourceChange,this)),(P=_.on)==null||P.call(_,"change",this.onResourceChange,this),this.resources[T]=_,this._dirty=!0)}getResource(_){return this.resources[_]}_touch(_){const T=this.resources;for(const E in T)T[E]._touched=_}destroy(){var T;const _=this.resources;for(const E in _){const C=_[E];(T=C.off)==null||T.call(C,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(_){if(this._dirty=!0,_.destroyed){const T=this.resources;for(const E in T)T[E]===_&&(T[E]=null)}else this._updateKey()}}var RendererType=(A=>(A[A.WEBGL=1]="WEBGL",A[A.WEBGPU=2]="WEBGPU",A[A.BOTH=3]="BOTH",A))(RendererType||{});let Shader$1=class yr extends EventEmitter$1{constructor(_){super(),this.uid=uid$1("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:T,glProgram:E,groups:C,resources:P,compatibleRenderers:I,groupMap:F}=_;this.gpuProgram=T,this.glProgram=E,I===void 0&&(I=0,T&&(I|=RendererType.WEBGPU),E&&(I|=RendererType.WEBGL)),this.compatibleRenderers=I;const R={};if(!P&&!C&&(P={}),P&&C)throw new Error("[Shader] Cannot have both resources and groups");if(!T&&C&&!F)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!T&&C&&F)for(const B in F)for(const O in F[B]){const V=F[B][O];R[V]={group:B,binding:O,name:V}}else if(T&&C&&!F){const B=T.structsAndGroups.groups;F={},B.forEach(O=>{F[O.group]=F[O.group]||{},F[O.group][O.binding]=O.name,R[O.name]=O})}else if(P){C={},F={},T&&T.structsAndGroups.groups.forEach(V=>{F[V.group]=F[V.group]||{},F[V.group][V.binding]=V.name,R[V.name]=V});let B=0;for(const O in P)R[O]||(C[99]||(C[99]=new BindGroup,this._ownedBindGroups.push(C[99])),R[O]={group:99,binding:B,name:O},F[99]=F[99]||{},F[99][B]=O,B++);for(const O in P){const V=O;let L=P[O];!L.source&&!L._resourceType&&(L=new UniformGroup$1(L));const D=R[V];D&&(C[D.group]||(C[D.group]=new BindGroup,this._ownedBindGroups.push(C[D.group])),C[D.group].setResource(L,D.binding))}}this.groups=C,this._uniformBindMap=F,this.resources=this._buildResourceAccessor(C,R)}addResource(_,T,E){var C,P;(C=this._uniformBindMap)[T]||(C[T]={}),(P=this._uniformBindMap[T])[E]||(P[E]=_),this.groups[T]||(this.groups[T]=new BindGroup,this._ownedBindGroups.push(this.groups[T]))}_buildResourceAccessor(_,T){const E={};for(const C in T){const P=T[C];Object.defineProperty(E,P.name,{get(){return _[P.group].getResource(P.binding)},set(I){_[P.group].setResource(I,P.binding)}})}return E}destroy(_=!1){var T,E;this.emit("destroy",this),_&&((T=this.gpuProgram)==null||T.destroy(),(E=this.glProgram)==null||E.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(C=>{C.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(_){const{gpu:T,gl:E,...C}=_;let P,I;return T&&(P=GpuProgram.from(T)),E&&(I=GlProgram.from(E)),new yr({gpuProgram:P,glProgram:I,...C})}};const environments=[];extensions$1.handleByNamedList(ExtensionType$1.Environment,environments);async function loadEnvironmentExtensions(A){if(!A)for(let _=0;_<environments.length;_++){const T=environments[_];if(T.value.test()){await T.value.load();return}}}let unsafeEval$1;function unsafeEvalSupported$1(){if(typeof unsafeEval$1=="boolean")return unsafeEval$1;try{unsafeEval$1=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval$1=!1}return unsafeEval$1}var earcut$1={exports:{}},hasRequiredEarcut;function requireEarcut(){if(hasRequiredEarcut)return earcut$1.exports;hasRequiredEarcut=1,earcut$1.exports=A,earcut$1.exports.default=A;function A(ee,re,Q){Q=Q||2;var te=re&&re.length,ne=te?re[0]*Q:ee.length,ie=_(ee,0,ne,Q,!0),fe=[];if(!ie||ie.next===ie.prev)return fe;var me,be,Pe,Me,ge,Se,Ee;if(te&&(ie=R(ee,re,ie,Q)),ee.length>80*Q){me=Pe=ee[0],be=Me=ee[1];for(var Ae=Q;Ae<ne;Ae+=Q)ge=ee[Ae],Se=ee[Ae+1],ge<me&&(me=ge),Se<be&&(be=Se),ge>Pe&&(Pe=ge),Se>Me&&(Me=Se);Ee=Math.max(Pe-me,Me-be),Ee=Ee!==0?32767/Ee:0}return E(ie,fe,Q,me,be,Ee,0),fe}function _(ee,re,Q,te,ne){var ie,fe;if(ne===_e(ee,re,Q,te)>0)for(ie=re;ie<Q;ie+=te)fe=he(ie,ee[ie],ee[ie+1],fe);else for(ie=Q-te;ie>=re;ie-=te)fe=he(ie,ee[ie],ee[ie+1],fe);return fe&&q(fe,fe.next)&&(pe(fe),fe=fe.next),fe}function T(ee,re){if(!ee)return ee;re||(re=ee);var Q=ee,te;do if(te=!1,!Q.steiner&&(q(Q,Q.next)||W(Q.prev,Q,Q.next)===0)){if(pe(Q),Q=re=Q.prev,Q===Q.next)break;te=!0}else Q=Q.next;while(te||Q!==re);return re}function E(ee,re,Q,te,ne,ie,fe){if(ee){!fe&&ie&&D(ee,te,ne,ie);for(var me=ee,be,Pe;ee.prev!==ee.next;){if(be=ee.prev,Pe=ee.next,ie?P(ee,te,ne,ie):C(ee)){re.push(be.i/Q|0),re.push(ee.i/Q|0),re.push(Pe.i/Q|0),pe(ee),ee=Pe.next,me=Pe.next;continue}if(ee=Pe,ee===me){fe?fe===1?(ee=I(T(ee),re,Q),E(ee,re,Q,te,ne,ie,2)):fe===2&&F(ee,re,Q,te,ne,ie):E(T(ee),re,Q,te,ne,ie,1);break}}}}function C(ee){var re=ee.prev,Q=ee,te=ee.next;if(W(re,Q,te)>=0)return!1;for(var ne=re.x,ie=Q.x,fe=te.x,me=re.y,be=Q.y,Pe=te.y,Me=ne<ie?ne<fe?ne:fe:ie<fe?ie:fe,ge=me<be?me<Pe?me:Pe:be<Pe?be:Pe,Se=ne>ie?ne>fe?ne:fe:ie>fe?ie:fe,Ee=me>be?me>Pe?me:Pe:be>Pe?be:Pe,Ae=te.next;Ae!==re;){if(Ae.x>=Me&&Ae.x<=Se&&Ae.y>=ge&&Ae.y<=Ee&&z(ne,me,ie,be,fe,Pe,Ae.x,Ae.y)&&W(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.next}return!0}function P(ee,re,Q,te){var ne=ee.prev,ie=ee,fe=ee.next;if(W(ne,ie,fe)>=0)return!1;for(var me=ne.x,be=ie.x,Pe=fe.x,Me=ne.y,ge=ie.y,Se=fe.y,Ee=me<be?me<Pe?me:Pe:be<Pe?be:Pe,Ae=Me<ge?Me<Se?Me:Se:ge<Se?ge:Se,Ie=me>be?me>Pe?me:Pe:be>Pe?be:Pe,oe=Me>ge?Me>Se?Me:Se:ge>Se?ge:Se,le=G(Ee,Ae,re,Q,te),de=G(Ie,oe,re,Q,te),ve=ee.prevZ,xe=ee.nextZ;ve&&ve.z>=le&&xe&&xe.z<=de;){if(ve.x>=Ee&&ve.x<=Ie&&ve.y>=Ae&&ve.y<=oe&&ve!==ne&&ve!==fe&&z(me,Me,be,ge,Pe,Se,ve.x,ve.y)&&W(ve.prev,ve,ve.next)>=0||(ve=ve.prevZ,xe.x>=Ee&&xe.x<=Ie&&xe.y>=Ae&&xe.y<=oe&&xe!==ne&&xe!==fe&&z(me,Me,be,ge,Pe,Se,xe.x,xe.y)&&W(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;ve&&ve.z>=le;){if(ve.x>=Ee&&ve.x<=Ie&&ve.y>=Ae&&ve.y<=oe&&ve!==ne&&ve!==fe&&z(me,Me,be,ge,Pe,Se,ve.x,ve.y)&&W(ve.prev,ve,ve.next)>=0)return!1;ve=ve.prevZ}for(;xe&&xe.z<=de;){if(xe.x>=Ee&&xe.x<=Ie&&xe.y>=Ae&&xe.y<=oe&&xe!==ne&&xe!==fe&&z(me,Me,be,ge,Pe,Se,xe.x,xe.y)&&W(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function I(ee,re,Q){var te=ee;do{var ne=te.prev,ie=te.next.next;!q(ne,ie)&&K(ne,te,te.next,ie)&&ae(ne,ie)&&ae(ie,ne)&&(re.push(ne.i/Q|0),re.push(te.i/Q|0),re.push(ie.i/Q|0),pe(te),pe(te.next),te=ee=ie),te=te.next}while(te!==ee);return T(te)}function F(ee,re,Q,te,ne,ie){var fe=ee;do{for(var me=fe.next.next;me!==fe.prev;){if(fe.i!==me.i&&Y(fe,me)){var be=ce(fe,me);fe=T(fe,fe.next),be=T(be,be.next),E(fe,re,Q,te,ne,ie,0),E(be,re,Q,te,ne,ie,0);return}me=me.next}fe=fe.next}while(fe!==ee)}function R(ee,re,Q,te){var ne=[],ie,fe,me,be,Pe;for(ie=0,fe=re.length;ie<fe;ie++)me=re[ie]*te,be=ie<fe-1?re[ie+1]*te:ee.length,Pe=_(ee,me,be,te,!1),Pe===Pe.next&&(Pe.steiner=!0),ne.push(X(Pe));for(ne.sort(B),ie=0;ie<ne.length;ie++)Q=O(ne[ie],Q);return Q}function B(ee,re){return ee.x-re.x}function O(ee,re){var Q=V(ee,re);if(!Q)return re;var te=ce(Q,ee);return T(te,te.next),T(Q,Q.next)}function V(ee,re){var Q=re,te=ee.x,ne=ee.y,ie=-1/0,fe;do{if(ne<=Q.y&&ne>=Q.next.y&&Q.next.y!==Q.y){var me=Q.x+(ne-Q.y)*(Q.next.x-Q.x)/(Q.next.y-Q.y);if(me<=te&&me>ie&&(ie=me,fe=Q.x<Q.next.x?Q:Q.next,me===te))return fe}Q=Q.next}while(Q!==re);if(!fe)return null;var be=fe,Pe=fe.x,Me=fe.y,ge=1/0,Se;Q=fe;do te>=Q.x&&Q.x>=Pe&&te!==Q.x&&z(ne<Me?te:ie,ne,Pe,Me,ne<Me?ie:te,ne,Q.x,Q.y)&&(Se=Math.abs(ne-Q.y)/(te-Q.x),ae(Q,ee)&&(Se<ge||Se===ge&&(Q.x>fe.x||Q.x===fe.x&&L(fe,Q)))&&(fe=Q,ge=Se)),Q=Q.next;while(Q!==be);return fe}function L(ee,re){return W(ee.prev,ee,re.prev)<0&&W(re.next,ee,ee.next)<0}function D(ee,re,Q,te){var ne=ee;do ne.z===0&&(ne.z=G(ne.x,ne.y,re,Q,te)),ne.prevZ=ne.prev,ne.nextZ=ne.next,ne=ne.next;while(ne!==ee);ne.prevZ.nextZ=null,ne.prevZ=null,U(ne)}function U(ee){var re,Q,te,ne,ie,fe,me,be,Pe=1;do{for(Q=ee,ee=null,ie=null,fe=0;Q;){for(fe++,te=Q,me=0,re=0;re<Pe&&(me++,te=te.nextZ,!!te);re++);for(be=Pe;me>0||be>0&&te;)me!==0&&(be===0||!te||Q.z<=te.z)?(ne=Q,Q=Q.nextZ,me--):(ne=te,te=te.nextZ,be--),ie?ie.nextZ=ne:ee=ne,ne.prevZ=ie,ie=ne;Q=te}ie.nextZ=null,Pe*=2}while(fe>1);return ee}function G(ee,re,Q,te,ne){return ee=(ee-Q)*ne|0,re=(re-te)*ne|0,ee=(ee|ee<<8)&16711935,ee=(ee|ee<<4)&252645135,ee=(ee|ee<<2)&858993459,ee=(ee|ee<<1)&1431655765,re=(re|re<<8)&16711935,re=(re|re<<4)&252645135,re=(re|re<<2)&858993459,re=(re|re<<1)&1431655765,ee|re<<1}function X(ee){var re=ee,Q=ee;do(re.x<Q.x||re.x===Q.x&&re.y<Q.y)&&(Q=re),re=re.next;while(re!==ee);return Q}function z(ee,re,Q,te,ne,ie,fe,me){return(ne-fe)*(re-me)>=(ee-fe)*(ie-me)&&(ee-fe)*(te-me)>=(Q-fe)*(re-me)&&(Q-fe)*(ie-me)>=(ne-fe)*(te-me)}function Y(ee,re){return ee.next.i!==re.i&&ee.prev.i!==re.i&&!se(ee,re)&&(ae(ee,re)&&ae(re,ee)&&ue(ee,re)&&(W(ee.prev,ee,re.prev)||W(ee,re.prev,re))||q(ee,re)&&W(ee.prev,ee,ee.next)>0&&W(re.prev,re,re.next)>0)}function W(ee,re,Q){return(re.y-ee.y)*(Q.x-re.x)-(re.x-ee.x)*(Q.y-re.y)}function q(ee,re){return ee.x===re.x&&ee.y===re.y}function K(ee,re,Q,te){var ne=Z(W(ee,re,Q)),ie=Z(W(ee,re,te)),fe=Z(W(Q,te,ee)),me=Z(W(Q,te,re));return!!(ne!==ie&&fe!==me||ne===0&&J(ee,Q,re)||ie===0&&J(ee,te,re)||fe===0&&J(Q,ee,te)||me===0&&J(Q,re,te))}function J(ee,re,Q){return re.x<=Math.max(ee.x,Q.x)&&re.x>=Math.min(ee.x,Q.x)&&re.y<=Math.max(ee.y,Q.y)&&re.y>=Math.min(ee.y,Q.y)}function Z(ee){return ee>0?1:ee<0?-1:0}function se(ee,re){var Q=ee;do{if(Q.i!==ee.i&&Q.next.i!==ee.i&&Q.i!==re.i&&Q.next.i!==re.i&&K(Q,Q.next,ee,re))return!0;Q=Q.next}while(Q!==ee);return!1}function ae(ee,re){return W(ee.prev,ee,ee.next)<0?W(ee,re,ee.next)>=0&&W(ee,ee.prev,re)>=0:W(ee,re,ee.prev)<0||W(ee,ee.next,re)<0}function ue(ee,re){var Q=ee,te=!1,ne=(ee.x+re.x)/2,ie=(ee.y+re.y)/2;do Q.y>ie!=Q.next.y>ie&&Q.next.y!==Q.y&&ne<(Q.next.x-Q.x)*(ie-Q.y)/(Q.next.y-Q.y)+Q.x&&(te=!te),Q=Q.next;while(Q!==ee);return te}function ce(ee,re){var Q=new ye(ee.i,ee.x,ee.y),te=new ye(re.i,re.x,re.y),ne=ee.next,ie=re.prev;return ee.next=re,re.prev=ee,Q.next=ne,ne.prev=Q,te.next=Q,Q.prev=te,ie.next=te,te.prev=ie,te}function he(ee,re,Q,te){var ne=new ye(ee,re,Q);return te?(ne.next=te.next,ne.prev=te,te.next.prev=ne,te.next=ne):(ne.prev=ne,ne.next=ne),ne}function pe(ee){ee.next.prev=ee.prev,ee.prev.next=ee.next,ee.prevZ&&(ee.prevZ.nextZ=ee.nextZ),ee.nextZ&&(ee.nextZ.prevZ=ee.prevZ)}function ye(ee,re,Q){this.i=ee,this.x=re,this.y=Q,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}A.deviation=function(ee,re,Q,te){var ne=re&&re.length,ie=ne?re[0]*Q:ee.length,fe=Math.abs(_e(ee,0,ie,Q));if(ne)for(var me=0,be=re.length;me<be;me++){var Pe=re[me]*Q,Me=me<be-1?re[me+1]*Q:ee.length;fe-=Math.abs(_e(ee,Pe,Me,Q))}var ge=0;for(me=0;me<te.length;me+=3){var Se=te[me]*Q,Ee=te[me+1]*Q,Ae=te[me+2]*Q;ge+=Math.abs((ee[Se]-ee[Ae])*(ee[Ee+1]-ee[Se+1])-(ee[Se]-ee[Ee])*(ee[Ae+1]-ee[Se+1]))}return fe===0&&ge===0?0:Math.abs((ge-fe)/fe)};function _e(ee,re,Q,te){for(var ne=0,ie=re,fe=Q-te;ie<Q;ie+=te)ne+=(ee[fe]-ee[ie])*(ee[ie+1]+ee[fe+1]),fe=ie;return ne}return A.flatten=function(ee){for(var re=ee[0][0].length,Q={vertices:[],holes:[],dimensions:re},te=0,ne=0;ne<ee.length;ne++){for(var ie=0;ie<ee[ne].length;ie++)for(var fe=0;fe<re;fe++)Q.vertices.push(ee[ne][ie][fe]);ne>0&&(te+=ee[ne-1].length,Q.holes.push(te))}return Q},earcut$1.exports}var earcutExports=requireEarcut();const earcut=getDefaultExportFromCjs(earcutExports);var CLEAR=(A=>(A[A.NONE=0]="NONE",A[A.COLOR=16384]="COLOR",A[A.STENCIL=1024]="STENCIL",A[A.DEPTH=256]="DEPTH",A[A.COLOR_DEPTH=16640]="COLOR_DEPTH",A[A.COLOR_STENCIL=17408]="COLOR_STENCIL",A[A.DEPTH_STENCIL=1280]="DEPTH_STENCIL",A[A.ALL=17664]="ALL",A))(CLEAR||{});class SystemRunner{constructor(_){this.items=[],this._name=_}emit(_,T,E,C,P,I,F,R){const{name:B,items:O}=this;for(let V=0,L=O.length;V<L;V++)O[V][B](_,T,E,C,P,I,F,R);return this}add(_){return _[this._name]&&(this.remove(_),this.items.push(_)),this}remove(_){const T=this.items.indexOf(_);return T!==-1&&this.items.splice(T,1),this}contains(_){return this.items.indexOf(_)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const defaultRunners=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],_AbstractRenderer=class vr extends EventEmitter$1{constructor(_){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=_.type,this.name=_.name,this.config=_;const T=[...defaultRunners,...this.config.runners??[]];this._addRunners(...T),this._unsafeEvalCheck()}async init(_={}){const T=_.skipExtensionImports===!0?!0:_.manageImports===!1;await loadEnvironmentExtensions(T),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const E in this._systemsHash)_={...this._systemsHash[E].constructor.defaultOptions,..._};_={...vr.defaultOptions,..._},this._roundPixels=_.roundPixels?1:0;for(let E=0;E<this.runners.init.items.length;E++)await this.runners.init.items[E].init(_);this._initOptions=_}render(_,T){let E=_;if(E instanceof Container$1&&(E={container:E},T&&(deprecation$1(v8_0_0,"passing a second argument is deprecated, please use render options instead"),E.target=T.renderTexture)),E.target||(E.target=this.view.renderTarget),E.target===this.view.renderTarget&&(this._lastObjectRendered=E.container,E.clearColor??(E.clearColor=this.background.colorRgba),E.clear??(E.clear=this.background.clearBeforeRender)),E.clearColor){const C=Array.isArray(E.clearColor)&&E.clearColor.length===4;E.clearColor=C?E.clearColor:Color$2.shared.setValue(E.clearColor).toArray()}E.transform||(E.container.updateLocalTransform(),E.transform=E.container.localTransform),E.container.enableRenderGroup(),this.runners.prerender.emit(E),this.runners.renderStart.emit(E),this.runners.render.emit(E),this.runners.renderEnd.emit(E),this.runners.postrender.emit(E)}resize(_,T,E){const C=this.view.resolution;this.view.resize(_,T,E),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),E!==void 0&&E!==C&&this.runners.resolutionChange.emit(E)}clear(_={}){const T=this;_.target||(_.target=T.renderTarget.renderTarget),_.clearColor||(_.clearColor=this.background.colorRgba),_.clear??(_.clear=CLEAR.ALL);const{clear:E,clearColor:C,target:P}=_;Color$2.shared.setValue(C??this.background.colorRgba),T.renderTarget.clear(P,E,Color$2.shared.toArray())}get resolution(){return this.view.resolution}set resolution(_){this.view.resolution=_,this.runners.resolutionChange.emit(_)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(..._){_.forEach(T=>{this.runners[T]=new SystemRunner(T)})}_addSystems(_){let T;for(T in _){const E=_[T];this._addSystem(E.value,E.name)}}_addSystem(_,T){const E=new _(this);if(this[T])throw new Error(`Whoops! The name "${T}" is already in use`);this[T]=E,this._systemsHash[T]=E;for(const C in this.runners)this.runners[C].add(E);return this}_addPipes(_,T){const E=T.reduce((C,P)=>(C[P.name]=P.value,C),{});_.forEach(C=>{const P=C.value,I=C.name,F=E[I];this.renderPipes[I]=new P(this,F?new F:null)})}destroy(_=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(_),Object.values(this.runners).forEach(T=>{T.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(_){return this.textureGenerator.generateTexture(_)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!unsafeEvalSupported$1())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};_AbstractRenderer.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let AbstractRenderer=_AbstractRenderer,_isWebGLSupported;function isWebGLSupported$1(A){return _isWebGLSupported!==void 0||(_isWebGLSupported=(()=>{var T;const _={stencil:!0,failIfMajorPerformanceCaveat:A??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat};try{if(!DOMAdapter.get().getWebGLRenderingContext())return!1;let C=DOMAdapter.get().createCanvas().getContext("webgl",_);const P=!!((T=C==null?void 0:C.getContextAttributes())!=null&&T.stencil);if(C){const I=C.getExtension("WEBGL_lose_context");I&&I.loseContext()}return C=null,P}catch{return!1}})()),_isWebGLSupported}let _isWebGPUSupported;async function isWebGPUSupported(A={}){return _isWebGPUSupported!==void 0||(_isWebGPUSupported=await(async()=>{const _=DOMAdapter.get().getNavigator().gpu;if(!_)return!1;try{return await(await _.requestAdapter(A)).requestDevice(),!0}catch{return!1}})()),_isWebGPUSupported}const renderPriority=["webgl","webgpu","canvas"];async function autoDetectRenderer(A){let _=[];A.preference?(_.push(A.preference),renderPriority.forEach(P=>{P!==A.preference&&_.push(P)})):_=renderPriority.slice();let T,E={};for(let P=0;P<_.length;P++){const I=_[P];if(I==="webgpu"&&await isWebGPUSupported()){const{WebGPURenderer:F}=await __vitePreload(async()=>{const{WebGPURenderer:R}=await import("./WebGPURenderer-DvoJqVa8.js");return{WebGPURenderer:R}},__vite__mapDeps([3,2,4]));T=F,E={...A,...A.webgpu};break}else if(I==="webgl"&&isWebGLSupported$1(A.failIfMajorPerformanceCaveat??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:F}=await __vitePreload(async()=>{const{WebGLRenderer:R}=await import("./WebGLRenderer-B8Dhp8-H.js");return{WebGLRenderer:R}},__vite__mapDeps([5,2,4]));T=F,E={...A,...A.webgl};break}else if(I==="canvas")throw E={...A},new Error("CanvasRenderer is not yet implemented")}if(delete E.webgpu,delete E.webgl,!T)throw new Error("No available renderer for the current environment");const C=new T;return await C.init(E),C}const VERSION="8.9.2";class ApplicationInitHook{static init(){var _;(_=globalThis.__PIXI_APP_INIT__)==null||_.call(globalThis,this,VERSION)}static destroy(){}}ApplicationInitHook.extension=ExtensionType$1.Application;class RendererInitHook{constructor(_){this._renderer=_}init(){var _;(_=globalThis.__PIXI_RENDERER_INIT__)==null||_.call(globalThis,this._renderer,VERSION)}destroy(){this._renderer=null}}RendererInitHook.extension={type:[ExtensionType$1.WebGLSystem,ExtensionType$1.WebGPUSystem],name:"initHook",priority:-10};const _Application=class Xt{constructor(..._){this.stage=new Container$1,_[0]!==void 0&&deprecation$1(v8_0_0,"Application constructor options are deprecated, please use Application.init() instead.")}async init(_){_={..._},this.renderer=await autoDetectRenderer(_),Xt._plugins.forEach(T=>{T.init.call(this,_)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return deprecation$1(v8_0_0,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(_=!1,T=!1){const E=Xt._plugins.slice(0);E.reverse(),E.forEach(C=>{C.destroy.call(this)}),this.stage.destroy(T),this.stage=null,this.renderer.destroy(_),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType$1.Application,Application._plugins);extensions$1.add(ApplicationInitHook);class AbstractBitmapFont extends EventEmitter$1{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return deprecation$1(v8_0_0,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return deprecation$1(v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return deprecation$1(v8_0_0,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return deprecation$1(v8_0_0,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return deprecation$1(v8_0_0,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(_=!1){var T;this.emit("destroy",this),this.removeAllListeners();for(const E in this.chars)(T=this.chars[E].texture)==null||T.destroy();this.chars=null,_&&(this.pages.forEach(E=>E.texture.destroy(!0)),this.pages=null)}}const emptyColorStops=[{offset:0,color:"white"},{offset:1,color:"black"}],_FillGradient=class Wt{constructor(..._){this.uid=uid$1("fillGradient"),this.type="linear",this.colorStops=[];let T=ensureGradientOptions(_);T={...T.type==="radial"?Wt.defaultRadialOptions:Wt.defaultLinearOptions,...definedProps(T)},this._textureSize=T.textureSize,this._wrapMode=T.wrapMode,T.type==="radial"?(this.center=T.center,this.outerCenter=T.outerCenter??this.center,this.innerRadius=T.innerRadius,this.outerRadius=T.outerRadius,this.scale=T.scale,this.rotation=T.rotation):(this.start=T.start,this.end=T.end),this.textureSpace=T.textureSpace,this.type=T.type,T.colorStops.forEach(C=>{this.addColorStop(C.offset,C.color)})}addColorStop(_,T){return this.colorStops.push({offset:_,color:Color$2.shared.setValue(T).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:_,y:T}=this.start,{x:E,y:C}=this.end,P=E-_,I=C-T;const F=P<0||I<0;if(this._wrapMode==="clamp-to-edge"){if(P<0){const X=_;_=E,E=X,P*=-1}if(I<0){const X=T;T=C,C=X,I*=-1}}const R=this.colorStops.length?this.colorStops:emptyColorStops,B=this._textureSize,{canvas:O,context:V}=getCanvas(B,1),L=F?V.createLinearGradient(this._textureSize,0,0,0):V.createLinearGradient(0,0,this._textureSize,0);addColorStops(L,R),V.fillStyle=L,V.fillRect(0,0,B,1),this.texture=new Texture$1({source:new ImageSource({resource:O,addressMode:this._wrapMode})});const D=Math.sqrt(P*P+I*I),U=Math.atan2(I,P),G=new Matrix$1;G.scale(D/B,1),G.rotate(U),G.translate(_,T),this.textureSpace==="local"&&G.scale(B,B),this.transform=G}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const _=this.colorStops.length?this.colorStops:emptyColorStops,T=this._textureSize,{canvas:E,context:C}=getCanvas(T,T),{x:P,y:I}=this.center,{x:F,y:R}=this.outerCenter,B=this.innerRadius,O=this.outerRadius,V=F-O,L=R-O,D=T/(O*2),U=(P-V)*D,G=(I-L)*D,X=C.createRadialGradient(U,G,B*D,(F-V)*D,(R-L)*D,O*D);addColorStops(X,_),C.fillStyle=_[_.length-1].color,C.fillRect(0,0,T,T),C.fillStyle=X,C.translate(U,G),C.rotate(this.rotation),C.scale(1,this.scale),C.translate(-U,-G),C.fillRect(0,0,T,T),this.texture=new Texture$1({source:new ImageSource({resource:E,addressMode:this._wrapMode})});const z=new Matrix$1;z.scale(1/D,1/D),z.translate(V,L),this.textureSpace==="local"&&z.scale(T,T),this.transform=z}get styleKey(){return this.uid}destroy(){var _;(_=this.texture)==null||_.destroy(!0),this.texture=null}};_FillGradient.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};_FillGradient.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let FillGradient=_FillGradient;function addColorStops(A,_){for(let T=0;T<_.length;T++){const E=_[T];A.addColorStop(E.offset,E.color)}}function getCanvas(A,_){const T=DOMAdapter.get().createCanvas(A,_),E=T.getContext("2d");return{canvas:T,context:E}}function ensureGradientOptions(A){let _=A[0]??{};return(typeof _=="number"||A[1])&&(deprecation$1("8.5.2","use options object instead"),_={type:"linear",start:{x:A[0],y:A[1]},end:{x:A[2],y:A[3]},textureSpace:A[4],textureSize:A[5]??FillGradient.defaultLinearOptions.textureSize}),_}const repetitionMap={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class FillPattern{constructor(_,T){this.uid=uid$1("fillPattern"),this.transform=new Matrix$1,this._styleKey=null,this.texture=_,this.transform.scale(1/_.frame.width,1/_.frame.height),T&&(_.source.style.addressModeU=repetitionMap[T].addressModeU,_.source.style.addressModeV=repetitionMap[T].addressModeV)}setTransform(_){const T=this.texture;this.transform.copyFrom(_),this.transform.invert(),this.transform.scale(1/T.frame.width,1/T.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var parseSvgPath,hasRequiredParseSvgPath;function requireParseSvgPath(){if(hasRequiredParseSvgPath)return parseSvgPath;hasRequiredParseSvgPath=1,parseSvgPath=T;var A={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},_=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function T(P){var I=[];return P.replace(_,function(F,R,B){var O=R.toLowerCase();for(B=C(B),O=="m"&&B.length>2&&(I.push([R].concat(B.splice(0,2))),O="l",R=R=="m"?"l":"L");;){if(B.length==A[O])return B.unshift(R),I.push(B);if(B.length<A[O])throw new Error("malformed path data");I.push([R].concat(B.splice(0,A[O])))}}),I}var E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function C(P){var I=P.match(E);return I?I.map(Number):[]}return parseSvgPath}var parseSvgPathExports=requireParseSvgPath();const parse$1=getDefaultExportFromCjs(parseSvgPathExports);function parseSVGPath(A,_){const T=parse$1(A),E=[];let C=null,P=0,I=0;for(let F=0;F<T.length;F++){const R=T[F],B=R[0],O=R;switch(B){case"M":P=O[1],I=O[2],_.moveTo(P,I);break;case"m":P+=O[1],I+=O[2],_.moveTo(P,I);break;case"H":P=O[1],_.lineTo(P,I);break;case"h":P+=O[1],_.lineTo(P,I);break;case"V":I=O[1],_.lineTo(P,I);break;case"v":I+=O[1],_.lineTo(P,I);break;case"L":P=O[1],I=O[2],_.lineTo(P,I);break;case"l":P+=O[1],I+=O[2],_.lineTo(P,I);break;case"C":P=O[5],I=O[6],_.bezierCurveTo(O[1],O[2],O[3],O[4],P,I);break;case"c":_.bezierCurveTo(P+O[1],I+O[2],P+O[3],I+O[4],P+O[5],I+O[6]),P+=O[5],I+=O[6];break;case"S":P=O[3],I=O[4],_.bezierCurveToShort(O[1],O[2],P,I);break;case"s":_.bezierCurveToShort(P+O[1],I+O[2],P+O[3],I+O[4]),P+=O[3],I+=O[4];break;case"Q":P=O[3],I=O[4],_.quadraticCurveTo(O[1],O[2],P,I);break;case"q":_.quadraticCurveTo(P+O[1],I+O[2],P+O[3],I+O[4]),P+=O[3],I+=O[4];break;case"T":P=O[1],I=O[2],_.quadraticCurveToShort(P,I);break;case"t":P+=O[1],I+=O[2],_.quadraticCurveToShort(P,I);break;case"A":P=O[6],I=O[7],_.arcToSvg(O[1],O[2],O[3],O[4],O[5],P,I);break;case"a":P+=O[6],I+=O[7],_.arcToSvg(O[1],O[2],O[3],O[4],O[5],P,I);break;case"Z":case"z":_.closePath(),E.length>0&&(C=E.pop(),C?(P=C.startX,I=C.startY):(P=0,I=0)),C=null;break;default:warn(`Unknown SVG path command: ${B}`)}B!=="Z"&&B!=="z"&&C===null&&(C={startX:P,startY:I},E.push(C))}return _}let Circle$1=class xr{constructor(_=0,T=0,E=0){this.type="circle",this.x=_,this.y=T,this.radius=E}clone(){return new xr(this.x,this.y,this.radius)}contains(_,T){if(this.radius<=0)return!1;const E=this.radius*this.radius;let C=this.x-_,P=this.y-T;return C*=C,P*=P,C+P<=E}strokeContains(_,T,E,C=.5){if(this.radius===0)return!1;const P=this.x-_,I=this.y-T,F=this.radius,R=(1-C)*E,B=Math.sqrt(P*P+I*I);return B<=F+R&&B>F-(E-R)}getBounds(_){return _||(_=new Rectangle$1),_.x=this.x-this.radius,_.y=this.y-this.radius,_.width=this.radius*2,_.height=this.radius*2,_}copyFrom(_){return this.x=_.x,this.y=_.y,this.radius=_.radius,this}copyTo(_){return _.copyFrom(this),_}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},Ellipse$1=class _r{constructor(_=0,T=0,E=0,C=0){this.type="ellipse",this.x=_,this.y=T,this.halfWidth=E,this.halfHeight=C}clone(){return new _r(this.x,this.y,this.halfWidth,this.halfHeight)}contains(_,T){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let E=(_-this.x)/this.halfWidth,C=(T-this.y)/this.halfHeight;return E*=E,C*=C,E+C<=1}strokeContains(_,T,E,C=.5){const{halfWidth:P,halfHeight:I}=this;if(P<=0||I<=0)return!1;const F=E*(1-C),R=E-F,B=P-R,O=I-R,V=P+F,L=I+F,D=_-this.x,U=T-this.y,G=D*D/(B*B)+U*U/(O*O),X=D*D/(V*V)+U*U/(L*L);return G>1&&X<=1}getBounds(_){return _||(_=new Rectangle$1),_.x=this.x-this.halfWidth,_.y=this.y-this.halfHeight,_.width=this.halfWidth*2,_.height=this.halfHeight*2,_}copyFrom(_){return this.x=_.x,this.y=_.y,this.halfWidth=_.halfWidth,this.halfHeight=_.halfHeight,this}copyTo(_){return _.copyFrom(this),_}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};function squaredDistanceToLineSegment(A,_,T,E,C,P){const I=A-T,F=_-E,R=C-T,B=P-E,O=I*R+F*B,V=R*R+B*B;let L=-1;V!==0&&(L=O/V);let D,U;L<0?(D=T,U=E):L>1?(D=C,U=P):(D=T+L*R,U=E+L*B);const G=A-D,X=_-U;return G*G+X*X}let tempRect$4,tempRect2$1,Polygon$1=class Ar{constructor(..._){this.type="polygon";let T=Array.isArray(_[0])?_[0]:_;if(typeof T[0]!="number"){const E=[];for(let C=0,P=T.length;C<P;C++)E.push(T[C].x,T[C].y);T=E}this.points=T,this.closePath=!0}isClockwise(){let _=0;const T=this.points,E=T.length;for(let C=0;C<E;C+=2){const P=T[C],I=T[C+1],F=T[(C+2)%E],R=T[(C+3)%E];_+=(F-P)*(R+I)}return _<0}containsPolygon(_){const T=this.getBounds(tempRect$4),E=_.getBounds(tempRect2$1);if(!T.containsRect(E))return!1;const C=_.points;for(let P=0;P<C.length;P+=2){const I=C[P],F=C[P+1];if(!this.contains(I,F))return!1}return!0}clone(){const _=this.points.slice(),T=new Ar(_);return T.closePath=this.closePath,T}contains(_,T){let E=!1;const C=this.points.length/2;for(let P=0,I=C-1;P<C;I=P++){const F=this.points[P*2],R=this.points[P*2+1],B=this.points[I*2],O=this.points[I*2+1];R>T!=O>T&&_<(B-F)*((T-R)/(O-R))+F&&(E=!E)}return E}strokeContains(_,T,E,C=.5){const P=E*E,I=P*(1-C),F=P-I,{points:R}=this,B=R.length-(this.closePath?0:2);for(let O=0;O<B;O+=2){const V=R[O],L=R[O+1],D=R[(O+2)%R.length],U=R[(O+3)%R.length],G=squaredDistanceToLineSegment(_,T,V,L,D,U),X=Math.sign((D-V)*(T-L)-(U-L)*(_-V));if(G<=(X<0?F:I))return!0}return!1}getBounds(_){_||(_=new Rectangle$1);const T=this.points;let E=1/0,C=-1/0,P=1/0,I=-1/0;for(let F=0,R=T.length;F<R;F+=2){const B=T[F],O=T[F+1];E=B<E?B:E,C=B>C?B:C,P=O<P?O:P,I=O>I?O:I}return _.x=E,_.width=C-E,_.y=P,_.height=I-P,_}copyFrom(_){return this.points=_.points.slice(),this.closePath=_.closePath,this}copyTo(_){return _.copyFrom(this),_}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((_,T)=>`${_}, ${T}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}};const isCornerWithinStroke=(A,_,T,E,C,P,I)=>{const F=A-T,R=_-E,B=Math.sqrt(F*F+R*R);return B>=C-P&&B<=C+I};let RoundedRectangle$1=class br{constructor(_=0,T=0,E=0,C=0,P=20){this.type="roundedRectangle",this.x=_,this.y=T,this.width=E,this.height=C,this.radius=P}getBounds(_){return _||(_=new Rectangle$1),_.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}clone(){return new br(this.x,this.y,this.width,this.height,this.radius)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.copyFrom(this),_}contains(_,T){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&T>=this.y&&T<=this.y+this.height){const E=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(T>=this.y+E&&T<=this.y+this.height-E||_>=this.x+E&&_<=this.x+this.width-E)return!0;let C=_-(this.x+E),P=T-(this.y+E);const I=E*E;if(C*C+P*P<=I||(C=_-(this.x+this.width-E),C*C+P*P<=I)||(P=T-(this.y+this.height-E),C*C+P*P<=I)||(C=_-(this.x+E),C*C+P*P<=I))return!0}return!1}strokeContains(_,T,E,C=.5){const{x:P,y:I,width:F,height:R,radius:B}=this,O=E*(1-C),V=E-O,L=P+B,D=I+B,U=F-B*2,G=R-B*2,X=P+F,z=I+R;return(_>=P-O&&_<=P+V||_>=X-V&&_<=X+O)&&T>=D&&T<=D+G||(T>=I-O&&T<=I+V||T>=z-V&&T<=z+O)&&_>=L&&_<=L+U?!0:_<L&&T<D&&isCornerWithinStroke(_,T,L,D,B,V,O)||_>X-B&&T<D&&isCornerWithinStroke(_,T,X-B,D,B,V,O)||_>X-B&&T>z-B&&isCornerWithinStroke(_,T,X-B,z-B,B,V,O)||_<L&&T>z-B&&isCornerWithinStroke(_,T,L,z-B,B,V,O)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc$1(A){let _="";for(let T=0;T<A;++T)T>0&&(_+=`
else `),T<A-1&&(_+=`if(test == ${T}.0){}`);return _}function checkMaxIfStatementsInShader$1(A,_){if(A===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const T=_.createShader(_.FRAGMENT_SHADER);try{for(;;){const E=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc$1(A));if(_.shaderSource(T,E),_.compileShader(T),!_.getShaderParameter(T,_.COMPILE_STATUS))A=A/2|0;else break}}finally{_.deleteShader(T)}return A}let maxTexturesPerBatchCache=null;function getMaxTexturesPerBatch(){var _;if(maxTexturesPerBatchCache)return maxTexturesPerBatchCache;const A=getTestContext$1();return maxTexturesPerBatchCache=A.getParameter(A.MAX_TEXTURE_IMAGE_UNITS),maxTexturesPerBatchCache=checkMaxIfStatementsInShader$1(maxTexturesPerBatchCache,A),(_=A.getExtension("WEBGL_lose_context"))==null||_.loseContext(),maxTexturesPerBatchCache}const cachedGroups={};function getTextureBatchBindGroup(A,_){let T=2166136261;for(let E=0;E<_;E++)T^=A[E].uid,T=Math.imul(T,16777619),T>>>=0;return cachedGroups[T]||generateTextureBatchBindGroup(A,_,T)}let maxTextures=0;function generateTextureBatchBindGroup(A,_,T){const E={};let C=0;maxTextures||(maxTextures=getMaxTexturesPerBatch());for(let I=0;I<maxTextures;I++){const F=I<_?A[I]:Texture$1.EMPTY.source;E[C++]=F.source,E[C++]=F.style}const P=new BindGroup(E);return cachedGroups[T]=P,P}let ViewableBuffer$1=class{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}};function fastCopy(A,_){const T=A.byteLength/8|0,E=new Float64Array(A,0,T);new Float64Array(_,0,T).set(E);const P=A.byteLength-T*8;if(P>0){const I=new Uint8Array(A,T*8,P);new Uint8Array(_,T*8,P).set(I)}}const BLEND_TO_NPM={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var STENCIL_MODES=(A=>(A[A.DISABLED=0]="DISABLED",A[A.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",A[A.MASK_ACTIVE=2]="MASK_ACTIVE",A[A.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",A[A.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",A[A.NONE=5]="NONE",A))(STENCIL_MODES||{});function getAdjustedBlendModeBlend(A,_){return _.alphaMode==="no-premultiply-alpha"&&BLEND_TO_NPM[A]||A}let BatchTextureArray$1=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let _=0;_<this.count;_++){const T=this.textures[_];this.textures[_]=null,this.ids[T.uid]=null}this.count=0}};class Batch{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new BatchTextureArray$1,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const batchPool=[];let batchPoolIndex=0;function getBatchFromPool(){return batchPoolIndex>0?batchPool[--batchPoolIndex]:new Batch}function returnBatchToPool(A){batchPool[batchPoolIndex++]=A}let BATCH_TICK=0;const _Batcher=class It{constructor(_={}){this.uid=uid$1("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],It.defaultOptions.maxTextures=It.defaultOptions.maxTextures??getMaxTexturesPerBatch(),_={...It.defaultOptions,..._};const{maxTextures:T,attributesInitialSize:E,indicesInitialSize:C}=_;this.attributeBuffer=new ViewableBuffer$1(E*4),this.indexBuffer=new Uint16Array(C),this.maxTextures=T}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let _=0;_<this.batchIndex;_++)returnBatchToPool(this.batches[_]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(_){this._elements[this.elementSize++]=_,_._indexStart=this.indexSize,_._attributeStart=this.attributeSize,_._batcher=this,this.indexSize+=_.indexSize,this.attributeSize+=_.attributeSize*this.vertexSize}checkAndUpdateTexture(_,T){const E=_._batch.textures.ids[T._source.uid];return!E&&E!==0?!1:(_._textureId=E,_.texture=T,!0)}updateElement(_){this.dirty=!0;const T=this.attributeBuffer;_.packAsQuad?this.packQuadAttributes(_,T.float32View,T.uint32View,_._attributeStart,_._textureId):this.packAttributes(_,T.float32View,T.uint32View,_._attributeStart,_._textureId)}break(_){const T=this._elements;if(!T[this.elementStart])return;let E=getBatchFromPool(),C=E.textures;C.clear();const P=T[this.elementStart];let I=getAdjustedBlendModeBlend(P.blendMode,P.texture._source),F=P.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const R=this.attributeBuffer.float32View,B=this.attributeBuffer.uint32View,O=this.indexBuffer;let V=this._batchIndexSize,L=this._batchIndexStart,D="startBatch";const U=this.maxTextures;for(let G=this.elementStart;G<this.elementSize;++G){const X=T[G];T[G]=null;const Y=X.texture._source,W=getAdjustedBlendModeBlend(X.blendMode,Y),q=I!==W||F!==X.topology;if(Y._batchTick===BATCH_TICK&&!q){X._textureId=Y._textureBindLocation,V+=X.indexSize,X.packAsQuad?(this.packQuadAttributes(X,R,B,X._attributeStart,X._textureId),this.packQuadIndex(O,X._indexStart,X._attributeStart/this.vertexSize)):(this.packAttributes(X,R,B,X._attributeStart,X._textureId),this.packIndex(X,O,X._indexStart,X._attributeStart/this.vertexSize)),X._batch=E;continue}Y._batchTick=BATCH_TICK,(C.count>=U||q)&&(this._finishBatch(E,L,V-L,C,I,F,_,D),D="renderBatch",L=V,I=W,F=X.topology,E=getBatchFromPool(),C=E.textures,C.clear(),++BATCH_TICK),X._textureId=Y._textureBindLocation=C.count,C.ids[Y.uid]=C.count,C.textures[C.count++]=Y,X._batch=E,V+=X.indexSize,X.packAsQuad?(this.packQuadAttributes(X,R,B,X._attributeStart,X._textureId),this.packQuadIndex(O,X._indexStart,X._attributeStart/this.vertexSize)):(this.packAttributes(X,R,B,X._attributeStart,X._textureId),this.packIndex(X,O,X._indexStart,X._attributeStart/this.vertexSize))}C.count>0&&(this._finishBatch(E,L,V-L,C,I,F,_,D),L=V,++BATCH_TICK),this.elementStart=this.elementSize,this._batchIndexStart=L,this._batchIndexSize=V}_finishBatch(_,T,E,C,P,I,F,R){_.gpuBindGroup=null,_.bindGroup=null,_.action=R,_.batcher=this,_.textures=C,_.blendMode=P,_.topology=I,_.start=T,_.size=E,++BATCH_TICK,this.batches[this.batchIndex++]=_,F.add(_)}finish(_){this.break(_)}ensureAttributeBuffer(_){_*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(_*4)}ensureIndexBuffer(_){_<=this.indexBuffer.length||this._resizeIndexBuffer(_)}_resizeAttributeBuffer(_){const T=Math.max(_,this.attributeBuffer.size*2),E=new ViewableBuffer$1(T);fastCopy(this.attributeBuffer.rawBinaryData,E.rawBinaryData),this.attributeBuffer=E}_resizeIndexBuffer(_){const T=this.indexBuffer;let E=Math.max(_,T.length*1.5);E+=E%2;const C=E>65535?new Uint32Array(E):new Uint16Array(E);if(C.BYTES_PER_ELEMENT!==T.BYTES_PER_ELEMENT)for(let P=0;P<T.length;P++)C[P]=T[P];else fastCopy(T.buffer,C.buffer);this.indexBuffer=C}packQuadIndex(_,T,E){_[T]=E+0,_[T+1]=E+1,_[T+2]=E+2,_[T+3]=E+0,_[T+4]=E+2,_[T+5]=E+3}packIndex(_,T,E,C){const P=_.indices,I=_.indexSize,F=_.indexOffset,R=_.attributeOffset;for(let B=0;B<I;B++)T[E++]=C+P[B+F]-R}destroy(){for(let _=0;_<this.batches.length;_++)returnBatchToPool(this.batches[_]);this.batches=null;for(let _=0;_<this._elements.length;_++)this._elements[_]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};_Batcher.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Batcher=_Batcher;var BufferUsage=(A=>(A[A.MAP_READ=1]="MAP_READ",A[A.MAP_WRITE=2]="MAP_WRITE",A[A.COPY_SRC=4]="COPY_SRC",A[A.COPY_DST=8]="COPY_DST",A[A.INDEX=16]="INDEX",A[A.VERTEX=32]="VERTEX",A[A.UNIFORM=64]="UNIFORM",A[A.STORAGE=128]="STORAGE",A[A.INDIRECT=256]="INDIRECT",A[A.QUERY_RESOLVE=512]="QUERY_RESOLVE",A[A.STATIC=1024]="STATIC",A))(BufferUsage||{});let Buffer$1=class extends EventEmitter$1{constructor(_){let{data:T,size:E}=_;const{usage:C,label:P,shrinkToFit:I}=_;super(),this.uid=uid$1("buffer"),this._resourceType="buffer",this._resourceId=uid$1("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,T instanceof Array&&(T=new Float32Array(T)),this._data=T,E??(E=T==null?void 0:T.byteLength);const F=!!T;this.descriptor={size:E,usage:C,mappedAtCreation:F,label:P},this.shrinkToFit=I??!0}get data(){return this._data}set data(_){this.setDataWithSize(_,_.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&BufferUsage.STATIC)}set static(_){_?this.descriptor.usage|=BufferUsage.STATIC:this.descriptor.usage&=~BufferUsage.STATIC}setDataWithSize(_,T,E){if(this._updateID++,this._updateSize=T*_.BYTES_PER_ELEMENT,this._data===_){E&&this.emit("update",this);return}const C=this._data;if(this._data=_,this._dataInt32=null,!C||C.length!==_.length){!this.shrinkToFit&&C&&_.byteLength<C.byteLength?E&&this.emit("update",this):(this.descriptor.size=_.byteLength,this._resourceId=uid$1("resource"),this.emit("change",this));return}E&&this.emit("update",this)}update(_){this._updateSize=_??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function ensureIsBuffer(A,_){if(!(A instanceof Buffer$1)){let T=_?BufferUsage.INDEX:BufferUsage.VERTEX;A instanceof Array&&(_?(A=new Uint32Array(A),T=BufferUsage.INDEX|BufferUsage.COPY_DST):(A=new Float32Array(A),T=BufferUsage.VERTEX|BufferUsage.COPY_DST)),A=new Buffer$1({data:A,label:_?"index-mesh-buffer":"vertex-mesh-buffer",usage:T})}return A}function getGeometryBounds(A,_,T){const E=A.getAttribute(_);if(!E)return T.minX=0,T.minY=0,T.maxX=0,T.maxY=0,T;const C=E.buffer.data;let P=1/0,I=1/0,F=-1/0,R=-1/0;const B=C.BYTES_PER_ELEMENT,O=(E.offset||0)/B,V=(E.stride||2*4)/B;for(let L=O;L<C.length;L+=V){const D=C[L],U=C[L+1];D>F&&(F=D),U>R&&(R=U),D<P&&(P=D),U<I&&(I=U)}return T.minX=P,T.minY=I,T.maxX=F,T.maxY=R,T}function ensureIsAttribute(A){return(A instanceof Buffer$1||Array.isArray(A)||A.BYTES_PER_ELEMENT)&&(A={buffer:A}),A.buffer=ensureIsBuffer(A.buffer,!1),A}let Geometry$1=class extends EventEmitter$1{constructor(_={}){super(),this.uid=uid$1("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bounds$1,this._boundsDirty=!0;const{attributes:T,indexBuffer:E,topology:C}=_;if(this.buffers=[],this.attributes={},T)for(const P in T)this.addAttribute(P,T[P]);this.instanceCount=_.instanceCount??1,E&&this.addIndex(E),this.topology=C||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(_){return this.attributes[_]}getIndex(){return this.indexBuffer}getBuffer(_){return this.getAttribute(_).buffer}getSize(){for(const _ in this.attributes){const T=this.attributes[_];return T.buffer.data.length/(T.stride/4||T.size)}return 0}addAttribute(_,T){const E=ensureIsAttribute(T);this.buffers.indexOf(E.buffer)===-1&&(this.buffers.push(E.buffer),E.buffer.on("update",this.onBufferUpdate,this),E.buffer.on("change",this.onBufferUpdate,this)),this.attributes[_]=E}addIndex(_){this.indexBuffer=ensureIsBuffer(_,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,getGeometryBounds(this,"aPosition",this._bounds)):this._bounds}destroy(_=!1){this.emit("destroy",this),this.removeAllListeners(),_&&this.buffers.forEach(T=>T.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}};const placeHolderBufferData=new Float32Array(1),placeHolderIndexData=new Uint32Array(1);let BatchGeometry$1=class extends Geometry$1{constructor(){const T=new Buffer$1({data:placeHolderBufferData,label:"attribute-batch-buffer",usage:BufferUsage.VERTEX|BufferUsage.COPY_DST,shrinkToFit:!1}),E=new Buffer$1({data:placeHolderIndexData,label:"index-batch-buffer",usage:BufferUsage.INDEX|BufferUsage.COPY_DST,shrinkToFit:!1}),C=6*4;super({attributes:{aPosition:{buffer:T,format:"float32x2",stride:C,offset:0},aUV:{buffer:T,format:"float32x2",stride:C,offset:2*4},aColor:{buffer:T,format:"unorm8x4",stride:C,offset:4*4},aTextureIdAndRound:{buffer:T,format:"uint16x2",stride:C,offset:5*4}},indexBuffer:E})}};function addBits(A,_,T){if(A)for(const E in A){const C=E.toLocaleLowerCase(),P=_[C];if(P){let I=A[E];E==="header"&&(I=I.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),T&&P.push(`//----${T}----//`),P.push(I)}else warn(`${E} placement hook does not exist in shader`)}}const findHooksRx=/\{\{(.*?)\}\}/g;function compileHooks(A){var E;const _={};return(((E=A.match(findHooksRx))==null?void 0:E.map(C=>C.replace(/[{()}]/g,"")))??[]).forEach(C=>{_[C]=[]}),_}function extractInputs(A,_){let T;const E=/@in\s+([^;]+);/g;for(;(T=E.exec(A))!==null;)_.push(T[1])}function compileInputs(A,_,T=!1){const E=[];extractInputs(_,E),A.forEach(F=>{F.header&&extractInputs(F.header,E)});const C=E;T&&C.sort();const P=C.map((F,R)=>`       @location(${R}) ${F},`).join(`
`);let I=_.replace(/@in\s+[^;]+;\s*/g,"");return I=I.replace("{{in}}",`
${P}
`),I}function extractOutputs(A,_){let T;const E=/@out\s+([^;]+);/g;for(;(T=E.exec(A))!==null;)_.push(T[1])}function extractVariableName(A){const T=/\b(\w+)\s*:/g.exec(A);return T?T[1]:""}function stripVariable(A){const _=/@.*?\s+/g;return A.replace(_,"")}function compileOutputs(A,_){const T=[];extractOutputs(_,T),A.forEach(R=>{R.header&&extractOutputs(R.header,T)});let E=0;const C=T.sort().map(R=>R.indexOf("builtin")>-1?R:`@location(${E++}) ${R}`).join(`,
`),P=T.sort().map(R=>`       var ${stripVariable(R)};`).join(`
`),I=`return VSOutput(
            ${T.sort().map(R=>` ${extractVariableName(R)}`).join(`,
`)});`;let F=_.replace(/@out\s+[^;]+;\s*/g,"");return F=F.replace("{{struct}}",`
${C}
`),F=F.replace("{{start}}",`
${P}
`),F=F.replace("{{return}}",`
${I}
`),F}function injectBits(A,_){let T=A;for(const E in _){const C=_[E];C.join(`
`).length?T=T.replace(`{{${E}}}`,`//-----${E} START-----//
${C.join(`
`)}
//----${E} FINISH----//`):T=T.replace(`{{${E}}}`,"")}return T}const cacheMap=Object.create(null),bitCacheMap=new Map;let CACHE_UID=0;function compileHighShader({template:A,bits:_}){const T=generateCacheId(A,_);if(cacheMap[T])return cacheMap[T];const{vertex:E,fragment:C}=compileInputsAndOutputs(A,_);return cacheMap[T]=compileBits(E,C,_),cacheMap[T]}function compileHighShaderGl({template:A,bits:_}){const T=generateCacheId(A,_);return cacheMap[T]||(cacheMap[T]=compileBits(A.vertex,A.fragment,_)),cacheMap[T]}function compileInputsAndOutputs(A,_){const T=_.map(I=>I.vertex).filter(I=>!!I),E=_.map(I=>I.fragment).filter(I=>!!I);let C=compileInputs(T,A.vertex,!0);C=compileOutputs(T,C);const P=compileInputs(E,A.fragment,!0);return{vertex:C,fragment:P}}function generateCacheId(A,_){return _.map(T=>(bitCacheMap.has(T)||bitCacheMap.set(T,CACHE_UID++),bitCacheMap.get(T))).sort((T,E)=>T-E).join("-")+A.vertex+A.fragment}function compileBits(A,_,T){const E=compileHooks(A),C=compileHooks(_);return T.forEach(P=>{addBits(P.vertex,E,P.name),addBits(P.fragment,C,P.name)}),{vertex:injectBits(A,E),fragment:injectBits(_,C)}}const vertexGPUTemplate=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,fragmentGPUTemplate=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,vertexGlTemplate=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,fragmentGlTemplate=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,globalUniformsBit={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},globalUniformsBitGl={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function compileHighShaderGpuProgram({bits:A,name:_}){const T=compileHighShader({template:{fragment:fragmentGPUTemplate,vertex:vertexGPUTemplate},bits:[globalUniformsBit,...A]});return GpuProgram.from({name:_,vertex:{source:T.vertex,entryPoint:"main"},fragment:{source:T.fragment,entryPoint:"main"}})}function compileHighShaderGlProgram({bits:A,name:_}){return new GlProgram({name:_,...compileHighShaderGl({template:{vertex:vertexGlTemplate,fragment:fragmentGlTemplate},bits:[globalUniformsBitGl,...A]})})}const colorBit={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},colorBitGl={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},textureBatchBitGpuCache={};function generateBindingSrc(A){const _=[];if(A===1)_.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),_.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let T=0;for(let E=0;E<A;E++)_.push(`@group(1) @binding(${T++}) var textureSource${E+1}: texture_2d<f32>;`),_.push(`@group(1) @binding(${T++}) var textureSampler${E+1}: sampler;`)}return _.join(`
`)}function generateSampleSrc(A){const _=[];if(A===1)_.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{_.push("switch vTextureId {");for(let T=0;T<A;T++)T===A-1?_.push("  default:{"):_.push(`  case ${T}:{`),_.push(`      outColor = textureSampleGrad(textureSource${T+1}, textureSampler${T+1}, vUV, uvDx, uvDy);`),_.push("      break;}");_.push("}")}return _.join(`
`)}function generateTextureBatchBit(A){return textureBatchBitGpuCache[A]||(textureBatchBitGpuCache[A]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${generateBindingSrc(A)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${generateSampleSrc(A)}
            `}}),textureBatchBitGpuCache[A]}const textureBatchBitGlCache={};function generateSampleGlSrc(A){const _=[];for(let T=0;T<A;T++)T>0&&_.push("else"),T<A-1&&_.push(`if(vTextureId < ${T}.5)`),_.push("{"),_.push(`	outColor = texture(uTextures[${T}], vUV);`),_.push("}");return _.join(`
`)}function generateTextureBatchBitGl(A){return textureBatchBitGlCache[A]||(textureBatchBitGlCache[A]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${A}];

            `,main:`

                ${generateSampleGlSrc(A)}
            `}}),textureBatchBitGlCache[A]}const roundPixelsBit={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},roundPixelsBitGl={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},batchSamplersUniformGroupHash={};function getBatchSamplersUniformGroup(A){let _=batchSamplersUniformGroupHash[A];if(_)return _;const T=new Int32Array(A);for(let E=0;E<A;E++)T[E]=E;return _=batchSamplersUniformGroupHash[A]=new UniformGroup$1({uTextures:{value:T,type:"i32",size:A}},{isStatic:!0}),_}class DefaultShader extends Shader$1{constructor(_){const T=compileHighShaderGlProgram({name:"batch",bits:[colorBitGl,generateTextureBatchBitGl(_),roundPixelsBitGl]}),E=compileHighShaderGpuProgram({name:"batch",bits:[colorBit,generateTextureBatchBit(_),roundPixelsBit]});super({glProgram:T,gpuProgram:E,resources:{batchSamplers:getBatchSamplersUniformGroup(_)}})}}let defaultShader=null;const _DefaultBatcher=class Tr extends Batcher{constructor(){super(...arguments),this.geometry=new BatchGeometry$1,this.shader=defaultShader||(defaultShader=new DefaultShader(this.maxTextures)),this.name=Tr.extension.name,this.vertexSize=6}packAttributes(_,T,E,C,P){const I=P<<16|_.roundPixels&65535,F=_.transform,R=F.a,B=F.b,O=F.c,V=F.d,L=F.tx,D=F.ty,{positions:U,uvs:G}=_,X=_.color,z=_.attributeOffset,Y=z+_.attributeSize;for(let W=z;W<Y;W++){const q=W*2,K=U[q],J=U[q+1];T[C++]=R*K+O*J+L,T[C++]=V*J+B*K+D,T[C++]=G[q],T[C++]=G[q+1],E[C++]=X,E[C++]=I}}packQuadAttributes(_,T,E,C,P){const I=_.texture,F=_.transform,R=F.a,B=F.b,O=F.c,V=F.d,L=F.tx,D=F.ty,U=_.bounds,G=U.maxX,X=U.minX,z=U.maxY,Y=U.minY,W=I.uvs,q=_.color,K=P<<16|_.roundPixels&65535;T[C+0]=R*X+O*Y+L,T[C+1]=V*Y+B*X+D,T[C+2]=W.x0,T[C+3]=W.y0,E[C+4]=q,E[C+5]=K,T[C+6]=R*G+O*Y+L,T[C+7]=V*Y+B*G+D,T[C+8]=W.x1,T[C+9]=W.y1,E[C+10]=q,E[C+11]=K,T[C+12]=R*G+O*z+L,T[C+13]=V*z+B*G+D,T[C+14]=W.x2,T[C+15]=W.y2,E[C+16]=q,E[C+17]=K,T[C+18]=R*X+O*z+L,T[C+19]=V*z+B*X+D,T[C+20]=W.x3,T[C+21]=W.y3,E[C+22]=q,E[C+23]=K}};_DefaultBatcher.extension={type:[ExtensionType$1.Batcher],name:"default"};let DefaultBatcher=_DefaultBatcher;function buildUvs(A,_,T,E,C,P,I,F=null){let R=0;T*=_,C*=P;const B=F.a,O=F.b,V=F.c,L=F.d,D=F.tx,U=F.ty;for(;R<I;){const G=A[T],X=A[T+1];E[C]=B*G+V*X+D,E[C+1]=O*G+L*X+U,C+=P,T+=_,R++}}function buildSimpleUvs(A,_,T,E){let C=0;for(_*=T;C<E;)A[_]=0,A[_+1]=0,_+=T,C++}function transformVertices(A,_,T,E,C){const P=_.a,I=_.b,F=_.c,R=_.d,B=_.tx,O=_.ty;T||(T=0),E||(E=2),C||(C=A.length/E-T);let V=T*E;for(let L=0;L<C;L++){const D=A[V],U=A[V+1];A[V]=P*D+F*U+B,A[V+1]=I*D+R*U+O,V+=E}}const identityMatrix=new Matrix$1;class BatchableGraphics{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const _=this.baseColor,T=_>>16|_&65280|(_&255)<<16,E=this.renderable;return E?multiplyHexColors(T,E.groupColor)+(this.alpha*E.groupAlpha*255<<24):T+(this.alpha*255<<24)}get transform(){var _;return((_=this.renderable)==null?void 0:_.groupTransform)||identityMatrix}copyTo(_){_.indexOffset=this.indexOffset,_.indexSize=this.indexSize,_.attributeOffset=this.attributeOffset,_.attributeSize=this.attributeSize,_.baseColor=this.baseColor,_.alpha=this.alpha,_.texture=this.texture,_.geometryData=this.geometryData,_.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const buildCircle$1={extension:{type:ExtensionType$1.ShapeBuilder,name:"circle"},build(A,_){let T,E,C,P,I,F;if(A.type==="circle"){const q=A;T=q.x,E=q.y,I=F=q.radius,C=P=0}else if(A.type==="ellipse"){const q=A;T=q.x,E=q.y,I=q.halfWidth,F=q.halfHeight,C=P=0}else{const q=A,K=q.width/2,J=q.height/2;T=q.x+K,E=q.y+J,I=F=Math.max(0,Math.min(q.radius,Math.min(K,J))),C=K-I,P=J-F}if(!(I>=0&&F>=0&&C>=0&&P>=0))return _;const R=Math.ceil(2.3*Math.sqrt(I+F)),B=R*8+(C?4:0)+(P?4:0);if(B===0)return _;if(R===0)return _[0]=_[6]=T+C,_[1]=_[3]=E+P,_[2]=_[4]=T-C,_[5]=_[7]=E-P,_;let O=0,V=R*4+(C?2:0)+2,L=V,D=B,U=C+I,G=P,X=T+U,z=T-U,Y=E+G;if(_[O++]=X,_[O++]=Y,_[--V]=Y,_[--V]=z,P){const q=E-G;_[L++]=z,_[L++]=q,_[--D]=q,_[--D]=X}for(let q=1;q<R;q++){const K=Math.PI/2*(q/R),J=C+Math.cos(K)*I,Z=P+Math.sin(K)*F,se=T+J,ae=T-J,ue=E+Z,ce=E-Z;_[O++]=se,_[O++]=ue,_[--V]=ue,_[--V]=ae,_[L++]=ae,_[L++]=ce,_[--D]=ce,_[--D]=se}U=C,G=P+F,X=T+U,z=T-U,Y=E+G;const W=E-G;return _[O++]=X,_[O++]=Y,_[--D]=W,_[--D]=X,C&&(_[O++]=z,_[O++]=Y,_[--D]=W,_[--D]=z),_},triangulate(A,_,T,E,C,P){if(A.length===0)return;let I=0,F=0;for(let O=0;O<A.length;O+=2)I+=A[O],F+=A[O+1];I/=A.length/2,F/=A.length/2;let R=E;_[R*T]=I,_[R*T+1]=F;const B=R++;for(let O=0;O<A.length;O+=2)_[R*T]=A[O],_[R*T+1]=A[O+1],O>0&&(C[P++]=R,C[P++]=B,C[P++]=R-1),R++;C[P++]=B+1,C[P++]=B,C[P++]=R-1}},buildEllipse={...buildCircle$1,extension:{...buildCircle$1.extension,name:"ellipse"}},buildRoundedRectangle$1={...buildCircle$1,extension:{...buildCircle$1.extension,name:"roundedRectangle"}},closePointEps=1e-4,curveEps=1e-4;function getOrientationOfPoints(A){const _=A.length;if(_<6)return 1;let T=0;for(let E=0,C=A[_-2],P=A[_-1];E<_;E+=2){const I=A[E],F=A[E+1];T+=(I-C)*(F+P),C=I,P=F}return T<0?-1:1}function square$1(A,_,T,E,C,P,I,F){const R=A-T*C,B=_-E*C,O=A+T*P,V=_+E*P;let L,D;I?(L=E,D=-T):(L=-E,D=T);const U=R+L,G=B+D,X=O+L,z=V+D;return F.push(U,G),F.push(X,z),2}function round$2(A,_,T,E,C,P,I,F){const R=T-A,B=E-_;let O=Math.atan2(R,B),V=Math.atan2(C-A,P-_);F&&O<V?O+=Math.PI*2:!F&&O>V&&(V+=Math.PI*2);let L=O;const D=V-O,U=Math.abs(D),G=Math.sqrt(R*R+B*B),X=(15*U*Math.sqrt(G)/Math.PI>>0)+1,z=D/X;if(L+=z,F){I.push(A,_),I.push(T,E);for(let Y=1,W=L;Y<X;Y++,W+=z)I.push(A,_),I.push(A+Math.sin(W)*G,_+Math.cos(W)*G);I.push(A,_),I.push(C,P)}else{I.push(T,E),I.push(A,_);for(let Y=1,W=L;Y<X;Y++,W+=z)I.push(A+Math.sin(W)*G,_+Math.cos(W)*G),I.push(A,_);I.push(C,P),I.push(A,_)}return X*2}function buildLine$1(A,_,T,E,C,P){const I=closePointEps;if(A.length===0)return;const F=_;let R=F.alignment;if(_.alignment!==.5){let te=getOrientationOfPoints(A);R=(R-.5)*te+.5}const B=new Point$1(A[0],A[1]),O=new Point$1(A[A.length-2],A[A.length-1]),V=E,L=Math.abs(B.x-O.x)<I&&Math.abs(B.y-O.y)<I;if(V){A=A.slice(),L&&(A.pop(),A.pop(),O.set(A[A.length-2],A[A.length-1]));const te=(B.x+O.x)*.5,ne=(O.y+B.y)*.5;A.unshift(te,ne),A.push(te,ne)}const D=C,U=A.length/2;let G=A.length;const X=D.length/2,z=F.width/2,Y=z*z,W=F.miterLimit*F.miterLimit;let q=A[0],K=A[1],J=A[2],Z=A[3],se=0,ae=0,ue=-(K-Z),ce=q-J,he=0,pe=0,ye=Math.sqrt(ue*ue+ce*ce);ue/=ye,ce/=ye,ue*=z,ce*=z;const _e=R,ee=(1-_e)*2,re=_e*2;V||(F.cap==="round"?G+=round$2(q-ue*(ee-re)*.5,K-ce*(ee-re)*.5,q-ue*ee,K-ce*ee,q+ue*re,K+ce*re,D,!0)+2:F.cap==="square"&&(G+=square$1(q,K,ue,ce,ee,re,!0,D))),D.push(q-ue*ee,K-ce*ee),D.push(q+ue*re,K+ce*re);for(let te=1;te<U-1;++te){q=A[(te-1)*2],K=A[(te-1)*2+1],J=A[te*2],Z=A[te*2+1],se=A[(te+1)*2],ae=A[(te+1)*2+1],ue=-(K-Z),ce=q-J,ye=Math.sqrt(ue*ue+ce*ce),ue/=ye,ce/=ye,ue*=z,ce*=z,he=-(Z-ae),pe=J-se,ye=Math.sqrt(he*he+pe*pe),he/=ye,pe/=ye,he*=z,pe*=z;const ne=J-q,ie=K-Z,fe=J-se,me=ae-Z,be=ne*fe+ie*me,Pe=ie*fe-me*ne,Me=Pe<0;if(Math.abs(Pe)<.001*Math.abs(be)){D.push(J-ue*ee,Z-ce*ee),D.push(J+ue*re,Z+ce*re),be>=0&&(F.join==="round"?G+=round$2(J,Z,J-ue*ee,Z-ce*ee,J-he*ee,Z-pe*ee,D,!1)+4:G+=2,D.push(J-he*re,Z-pe*re),D.push(J+he*ee,Z+pe*ee));continue}const ge=(-ue+q)*(-ce+Z)-(-ue+J)*(-ce+K),Se=(-he+se)*(-pe+Z)-(-he+J)*(-pe+ae),Ee=(ne*Se-fe*ge)/Pe,Ae=(me*ge-ie*Se)/Pe,Ie=(Ee-J)*(Ee-J)+(Ae-Z)*(Ae-Z),oe=J+(Ee-J)*ee,le=Z+(Ae-Z)*ee,de=J-(Ee-J)*re,ve=Z-(Ae-Z)*re,xe=Math.min(ne*ne+ie*ie,fe*fe+me*me),Ce=Me?ee:re,Fe=xe+Ce*Ce*Y;Ie<=Fe?F.join==="bevel"||Ie/Y>W?(Me?(D.push(oe,le),D.push(J+ue*re,Z+ce*re),D.push(oe,le),D.push(J+he*re,Z+pe*re)):(D.push(J-ue*ee,Z-ce*ee),D.push(de,ve),D.push(J-he*ee,Z-pe*ee),D.push(de,ve)),G+=2):F.join==="round"?Me?(D.push(oe,le),D.push(J+ue*re,Z+ce*re),G+=round$2(J,Z,J+ue*re,Z+ce*re,J+he*re,Z+pe*re,D,!0)+4,D.push(oe,le),D.push(J+he*re,Z+pe*re)):(D.push(J-ue*ee,Z-ce*ee),D.push(de,ve),G+=round$2(J,Z,J-ue*ee,Z-ce*ee,J-he*ee,Z-pe*ee,D,!1)+4,D.push(J-he*ee,Z-pe*ee),D.push(de,ve)):(D.push(oe,le),D.push(de,ve)):(D.push(J-ue*ee,Z-ce*ee),D.push(J+ue*re,Z+ce*re),F.join==="round"?Me?G+=round$2(J,Z,J+ue*re,Z+ce*re,J+he*re,Z+pe*re,D,!0)+2:G+=round$2(J,Z,J-ue*ee,Z-ce*ee,J-he*ee,Z-pe*ee,D,!1)+2:F.join==="miter"&&Ie/Y<=W&&(Me?(D.push(de,ve),D.push(de,ve)):(D.push(oe,le),D.push(oe,le)),G+=2),D.push(J-he*ee,Z-pe*ee),D.push(J+he*re,Z+pe*re),G+=2)}q=A[(U-2)*2],K=A[(U-2)*2+1],J=A[(U-1)*2],Z=A[(U-1)*2+1],ue=-(K-Z),ce=q-J,ye=Math.sqrt(ue*ue+ce*ce),ue/=ye,ce/=ye,ue*=z,ce*=z,D.push(J-ue*ee,Z-ce*ee),D.push(J+ue*re,Z+ce*re),V||(F.cap==="round"?G+=round$2(J-ue*(ee-re)*.5,Z-ce*(ee-re)*.5,J-ue*ee,Z-ce*ee,J+ue*re,Z+ce*re,D,!1)+2:F.cap==="square"&&(G+=square$1(J,Z,ue,ce,ee,re,!1,D)));const Q=curveEps*curveEps;for(let te=X;te<G+X-2;++te)q=D[te*2],K=D[te*2+1],J=D[(te+1)*2],Z=D[(te+1)*2+1],se=D[(te+2)*2],ae=D[(te+2)*2+1],!(Math.abs(q*(Z-ae)+J*(ae-K)+se*(K-Z))<Q)&&P.push(te,te+1,te+2)}function buildPixelLine(A,_,T,E){const C=closePointEps;if(A.length===0)return;const P=A[0],I=A[1],F=A[A.length-2],R=A[A.length-1],B=_||Math.abs(P-F)<C&&Math.abs(I-R)<C,O=T,V=A.length/2,L=O.length/2;for(let D=0;D<V;D++)O.push(A[D*2]),O.push(A[D*2+1]);for(let D=0;D<V-1;D++)E.push(L+D,L+D+1);B&&E.push(L+V-1,L)}function triangulateWithHoles(A,_,T,E,C,P,I){const F=earcut(A,_,2);if(!F)return;for(let B=0;B<F.length;B+=3)P[I++]=F[B]+C,P[I++]=F[B+1]+C,P[I++]=F[B+2]+C;let R=C*E;for(let B=0;B<A.length;B+=2)T[R]=A[B],T[R+1]=A[B+1],R+=E}const emptyArray=[],buildPolygon={extension:{type:ExtensionType$1.ShapeBuilder,name:"polygon"},build(A,_){for(let T=0;T<A.points.length;T++)_[T]=A.points[T];return _},triangulate(A,_,T,E,C,P){triangulateWithHoles(A,emptyArray,_,T,E,C,P)}},buildRectangle$1={extension:{type:ExtensionType$1.ShapeBuilder,name:"rectangle"},build(A,_){const T=A,E=T.x,C=T.y,P=T.width,I=T.height;return P>=0&&I>=0&&(_[0]=E,_[1]=C,_[2]=E+P,_[3]=C,_[4]=E+P,_[5]=C+I,_[6]=E,_[7]=C+I),_},triangulate(A,_,T,E,C,P){let I=0;E*=T,_[E+I]=A[0],_[E+I+1]=A[1],I+=T,_[E+I]=A[2],_[E+I+1]=A[3],I+=T,_[E+I]=A[6],_[E+I+1]=A[7],I+=T,_[E+I]=A[4],_[E+I+1]=A[5],I+=T;const F=E/T;C[P++]=F,C[P++]=F+1,C[P++]=F+2,C[P++]=F+1,C[P++]=F+3,C[P++]=F+2}},buildTriangle={extension:{type:ExtensionType$1.ShapeBuilder,name:"triangle"},build(A,_){return _[0]=A.x,_[1]=A.y,_[2]=A.x2,_[3]=A.y2,_[4]=A.x3,_[5]=A.y3,_},triangulate(A,_,T,E,C,P){let I=0;E*=T,_[E+I]=A[0],_[E+I+1]=A[1],I+=T,_[E+I]=A[2],_[E+I+1]=A[3],I+=T,_[E+I]=A[4],_[E+I+1]=A[5];const F=E/T;C[P++]=F,C[P++]=F+1,C[P++]=F+2}},tempTextureMatrix$1=new Matrix$1,tempRect$3=new Rectangle$1;function generateTextureMatrix(A,_,T,E){const C=_.matrix?A.copyFrom(_.matrix).invert():A.identity();if(_.textureSpace==="local"){const I=T.getBounds(tempRect$3);_.width&&I.pad(_.width);const{x:F,y:R}=I,B=1/I.width,O=1/I.height,V=-F*B,L=-R*O,D=C.a,U=C.b,G=C.c,X=C.d;C.a*=B,C.b*=B,C.c*=O,C.d*=O,C.tx=V*D+L*G+C.tx,C.ty=V*U+L*X+C.ty}else C.translate(_.texture.frame.x,_.texture.frame.y),C.scale(1/_.texture.source.width,1/_.texture.source.height);const P=_.texture.source.style;return!(_.fill instanceof FillGradient)&&P.addressMode==="clamp-to-edge"&&(P.addressMode="repeat",P.update()),E&&C.append(tempTextureMatrix$1.copyFrom(E).invert()),C}const shapeBuilders={};extensions$1.handleByMap(ExtensionType$1.ShapeBuilder,shapeBuilders);extensions$1.add(buildRectangle$1,buildPolygon,buildTriangle,buildCircle$1,buildEllipse,buildRoundedRectangle$1);const tempRect$2=new Rectangle$1,tempTextureMatrix=new Matrix$1;function buildContextBatches(A,_){const{geometryData:T,batches:E}=_;E.length=0,T.indices.length=0,T.vertices.length=0,T.uvs.length=0;for(let C=0;C<A.instructions.length;C++){const P=A.instructions[C];if(P.action==="texture")addTextureToGeometryData(P.data,E,T);else if(P.action==="fill"||P.action==="stroke"){const I=P.action==="stroke",F=P.data.path.shapePath,R=P.data.style,B=P.data.hole;I&&B&&addShapePathToGeometryData(B.shapePath,R,!0,E,T),B&&(F.shapePrimitives[F.shapePrimitives.length-1].holes=B.shapePath.shapePrimitives),addShapePathToGeometryData(F,R,I,E,T)}}}function addTextureToGeometryData(A,_,T){const{vertices:E,uvs:C,indices:P}=T,I=P.length,F=E.length/2,R=[],B=shapeBuilders.rectangle,O=tempRect$2,V=A.image;O.x=A.dx,O.y=A.dy,O.width=A.dw,O.height=A.dh;const L=A.transform;B.build(O,R),L&&transformVertices(R,L),B.triangulate(R,E,2,F,P,I);const D=V.uvs;C.push(D.x0,D.y0,D.x1,D.y1,D.x3,D.y3,D.x2,D.y2);const U=BigPool.get(BatchableGraphics);U.indexOffset=I,U.indexSize=P.length-I,U.attributeOffset=F,U.attributeSize=E.length/2-F,U.baseColor=A.style,U.alpha=A.alpha,U.texture=V,U.geometryData=T,_.push(U)}function addShapePathToGeometryData(A,_,T,E,C){const{vertices:P,uvs:I,indices:F}=C;A.shapePrimitives.forEach(({shape:R,transform:B,holes:O})=>{const V=F.length,L=P.length/2,D=[],U=shapeBuilders[R.type];let G="triangle-list";if(U.build(R,D),B&&transformVertices(D,B),T){const W=R.closePath??!0,q=_;q.pixelLine?(buildPixelLine(D,W,P,F),G="line-list"):buildLine$1(D,q,!1,W,P,F)}else if(O){const W=[],q=D.slice();getHoleArrays(O).forEach(J=>{W.push(q.length/2),q.push(...J)}),triangulateWithHoles(q,W,P,2,L,F,V)}else U.triangulate(D,P,2,L,F,V);const X=I.length/2,z=_.texture;if(z!==Texture$1.WHITE){const W=generateTextureMatrix(tempTextureMatrix,_,R,B);buildUvs(P,2,L,I,X,2,P.length/2-L,W)}else buildSimpleUvs(I,X,2,P.length/2-L);const Y=BigPool.get(BatchableGraphics);Y.indexOffset=V,Y.indexSize=F.length-V,Y.attributeOffset=L,Y.attributeSize=P.length/2-L,Y.baseColor=_.color,Y.alpha=_.alpha,Y.texture=z,Y.geometryData=C,Y.topology=G,E.push(Y)})}function getHoleArrays(A){const _=[];for(let T=0;T<A.length;T++){const E=A[T].shape,C=[];shapeBuilders[E.type].build(E,C),_.push(C)}return _}class GpuGraphicsContext{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class GraphicsContextRenderData{constructor(){this.batcher=new DefaultBatcher,this.instructions=new InstructionSet}init(){this.instructions.reset()}get geometry(){return deprecation$1(v8_3_4,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const _GraphicsContextSystem=class jt{constructor(_){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),_.renderableGC.addManagedHash(this,"_gpuContextHash"),_.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(_){jt.defaultOptions.bezierSmoothness=(_==null?void 0:_.bezierSmoothness)??jt.defaultOptions.bezierSmoothness}getContextRenderData(_){return this._graphicsDataContextHash[_.uid]||this._initContextRenderData(_)}updateGpuContext(_){let T=this._gpuContextHash[_.uid]||this._initContext(_);if(_.dirty){T?this._cleanGraphicsContextData(_):T=this._initContext(_),buildContextBatches(_,T);const E=_.batchMode;_.customShader||E==="no-batch"?T.isBatchable=!1:E==="auto"&&(T.isBatchable=T.geometryData.vertices.length<400),_.dirty=!1}return T}getGpuContext(_){return this._gpuContextHash[_.uid]||this._initContext(_)}_initContextRenderData(_){const T=BigPool.get(GraphicsContextRenderData),{batches:E,geometryData:C}=this._gpuContextHash[_.uid],P=C.vertices.length,I=C.indices.length;for(let O=0;O<E.length;O++)E[O].applyTransform=!1;const F=T.batcher;F.ensureAttributeBuffer(P),F.ensureIndexBuffer(I),F.begin();for(let O=0;O<E.length;O++){const V=E[O];F.add(V)}F.finish(T.instructions);const R=F.geometry;R.indexBuffer.setDataWithSize(F.indexBuffer,F.indexSize,!0),R.buffers[0].setDataWithSize(F.attributeBuffer.float32View,F.attributeSize,!0);const B=F.batches;for(let O=0;O<B.length;O++){const V=B[O];V.bindGroup=getTextureBatchBindGroup(V.textures.textures,V.textures.count)}return this._graphicsDataContextHash[_.uid]=T,T}_initContext(_){const T=new GpuGraphicsContext;return T.context=_,this._gpuContextHash[_.uid]=T,_.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[_.uid]}onGraphicsContextDestroy(_){this._cleanGraphicsContextData(_),_.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[_.uid]=null}_cleanGraphicsContextData(_){const T=this._gpuContextHash[_.uid];T.isBatchable||this._graphicsDataContextHash[_.uid]&&(BigPool.return(this.getContextRenderData(_)),this._graphicsDataContextHash[_.uid]=null),T.batches&&T.batches.forEach(E=>{BigPool.return(E)})}destroy(){for(const _ in this._gpuContextHash)this._gpuContextHash[_]&&this.onGraphicsContextDestroy(this._gpuContextHash[_].context)}};_GraphicsContextSystem.extension={type:[ExtensionType$1.WebGLSystem,ExtensionType$1.WebGPUSystem,ExtensionType$1.CanvasSystem],name:"graphicsContext"};_GraphicsContextSystem.defaultOptions={bezierSmoothness:.5};let GraphicsContextSystem=_GraphicsContextSystem;const RECURSION_LIMIT$1=8,FLT_EPSILON$1=11920929e-14,PATH_DISTANCE_EPSILON$1=1;function buildAdaptiveBezier(A,_,T,E,C,P,I,F,R,B){const V=Math.min(.99,Math.max(0,B??GraphicsContextSystem.defaultOptions.bezierSmoothness));let L=(PATH_DISTANCE_EPSILON$1-V)/1;return L*=L,begin$1(_,T,E,C,P,I,F,R,A,L),A}function begin$1(A,_,T,E,C,P,I,F,R,B){recursive$1(A,_,T,E,C,P,I,F,R,B,0),R.push(I,F)}function recursive$1(A,_,T,E,C,P,I,F,R,B,O){if(O>RECURSION_LIMIT$1)return;const V=(A+T)/2,L=(_+E)/2,D=(T+C)/2,U=(E+P)/2,G=(C+I)/2,X=(P+F)/2,z=(V+D)/2,Y=(L+U)/2,W=(D+G)/2,q=(U+X)/2,K=(z+W)/2,J=(Y+q)/2;if(O>0){let Z=I-A,se=F-_;const ae=Math.abs((T-I)*se-(E-F)*Z),ue=Math.abs((C-I)*se-(P-F)*Z);if(ae>FLT_EPSILON$1&&ue>FLT_EPSILON$1){if((ae+ue)*(ae+ue)<=B*(Z*Z+se*se)){R.push(K,J);return}}else if(ae>FLT_EPSILON$1){if(ae*ae<=B*(Z*Z+se*se)){R.push(K,J);return}}else if(ue>FLT_EPSILON$1){if(ue*ue<=B*(Z*Z+se*se)){R.push(K,J);return}}else if(Z=K-(A+I)/2,se=J-(_+F)/2,Z*Z+se*se<=B){R.push(K,J);return}}recursive$1(A,_,V,L,z,Y,K,J,R,B,O+1),recursive$1(K,J,W,q,G,X,I,F,R,B,O+1)}const RECURSION_LIMIT=8,FLT_EPSILON=11920929e-14,PATH_DISTANCE_EPSILON=1;function buildAdaptiveQuadratic(A,_,T,E,C,P,I,F){const B=Math.min(.99,Math.max(0,F??GraphicsContextSystem.defaultOptions.bezierSmoothness));let O=(PATH_DISTANCE_EPSILON-B)/1;return O*=O,begin(_,T,E,C,P,I,A,O),A}function begin(A,_,T,E,C,P,I,F){recursive(I,A,_,T,E,C,P,F,0),I.push(C,P)}function recursive(A,_,T,E,C,P,I,F,R){if(R>RECURSION_LIMIT)return;const B=(_+E)/2,O=(T+C)/2,V=(E+P)/2,L=(C+I)/2,D=(B+V)/2,U=(O+L)/2;let G=P-_,X=I-T;const z=Math.abs((E-P)*X-(C-I)*G);if(z>FLT_EPSILON){if(z*z<=F*(G*G+X*X)){A.push(D,U);return}}else if(G=D-(_+P)/2,X=U-(T+I)/2,G*G+X*X<=F){A.push(D,U);return}recursive(A,_,T,B,O,D,U,F,R+1),recursive(A,D,U,V,L,P,I,F,R+1)}function buildArc(A,_,T,E,C,P,I,F){let R=Math.abs(C-P);(!I&&C>P||I&&P>C)&&(R=2*Math.PI-R),F||(F=Math.max(6,Math.floor(6*Math.pow(E,1/3)*(R/Math.PI)))),F=Math.max(F,3);let B=R/F,O=C;B*=I?-1:1;for(let V=0;V<F+1;V++){const L=Math.cos(O),D=Math.sin(O),U=_+L*E,G=T+D*E;A.push(U,G),O+=B}}function buildArcTo(A,_,T,E,C,P){const I=A[A.length-2],R=A[A.length-1]-T,B=I-_,O=C-T,V=E-_,L=Math.abs(R*V-B*O);if(L<1e-8||P===0){(A[A.length-2]!==_||A[A.length-1]!==T)&&A.push(_,T);return}const D=R*R+B*B,U=O*O+V*V,G=R*O+B*V,X=P*Math.sqrt(D)/L,z=P*Math.sqrt(U)/L,Y=X*G/D,W=z*G/U,q=X*V+z*B,K=X*O+z*R,J=B*(z+Y),Z=R*(z+Y),se=V*(X+W),ae=O*(X+W),ue=Math.atan2(Z-K,J-q),ce=Math.atan2(ae-K,se-q);buildArc(A,q+_,K+T,P,ue,ce,B*O>V*R)}const TAU=Math.PI*2,out={centerX:0,centerY:0,ang1:0,ang2:0},mapToEllipse=({x:A,y:_},T,E,C,P,I,F,R)=>{A*=T,_*=E;const B=C*A-P*_,O=P*A+C*_;return R.x=B+I,R.y=O+F,R};function approxUnitArc(A,_){const T=_===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(_/4),E=_===1.5707963267948966?.551915024494:T,C=Math.cos(A),P=Math.sin(A),I=Math.cos(A+_),F=Math.sin(A+_);return[{x:C-P*E,y:P+C*E},{x:I+F*E,y:F-I*E},{x:I,y:F}]}const vectorAngle=(A,_,T,E)=>{const C=A*E-_*T<0?-1:1;let P=A*T+_*E;return P>1&&(P=1),P<-1&&(P=-1),C*Math.acos(P)},getArcCenter=(A,_,T,E,C,P,I,F,R,B,O,V,L)=>{const D=Math.pow(C,2),U=Math.pow(P,2),G=Math.pow(O,2),X=Math.pow(V,2);let z=D*U-D*X-U*G;z<0&&(z=0),z/=D*X+U*G,z=Math.sqrt(z)*(I===F?-1:1);const Y=z*C/P*V,W=z*-P/C*O,q=B*Y-R*W+(A+T)/2,K=R*Y+B*W+(_+E)/2,J=(O-Y)/C,Z=(V-W)/P,se=(-O-Y)/C,ae=(-V-W)/P,ue=vectorAngle(1,0,J,Z);let ce=vectorAngle(J,Z,se,ae);F===0&&ce>0&&(ce-=TAU),F===1&&ce<0&&(ce+=TAU),L.centerX=q,L.centerY=K,L.ang1=ue,L.ang2=ce};function buildArcToSvg(A,_,T,E,C,P,I,F=0,R=0,B=0){if(P===0||I===0)return;const O=Math.sin(F*TAU/360),V=Math.cos(F*TAU/360),L=V*(_-E)/2+O*(T-C)/2,D=-O*(_-E)/2+V*(T-C)/2;if(L===0&&D===0)return;P=Math.abs(P),I=Math.abs(I);const U=Math.pow(L,2)/Math.pow(P,2)+Math.pow(D,2)/Math.pow(I,2);U>1&&(P*=Math.sqrt(U),I*=Math.sqrt(U)),getArcCenter(_,T,E,C,P,I,R,B,O,V,L,D,out);let{ang1:G,ang2:X}=out;const{centerX:z,centerY:Y}=out;let W=Math.abs(X)/(TAU/4);Math.abs(1-W)<1e-7&&(W=1);const q=Math.max(Math.ceil(W),1);X/=q;let K=A[A.length-2],J=A[A.length-1];const Z={x:0,y:0};for(let se=0;se<q;se++){const ae=approxUnitArc(G,X),{x:ue,y:ce}=mapToEllipse(ae[0],P,I,V,O,z,Y,Z),{x:he,y:pe}=mapToEllipse(ae[1],P,I,V,O,z,Y,Z),{x:ye,y:_e}=mapToEllipse(ae[2],P,I,V,O,z,Y,Z);buildAdaptiveBezier(A,K,J,ue,ce,he,pe,ye,_e),K=ye,J=_e,G+=X}}function roundedShapeArc(A,_,T){const E=(I,F)=>{const R=F.x-I.x,B=F.y-I.y,O=Math.sqrt(R*R+B*B),V=R/O,L=B/O;return{len:O,nx:V,ny:L}},C=(I,F)=>{I===0?A.moveTo(F.x,F.y):A.lineTo(F.x,F.y)};let P=_[_.length-1];for(let I=0;I<_.length;I++){const F=_[I%_.length],R=F.radius??T;if(R<=0){C(I,F),P=F;continue}const B=_[(I+1)%_.length],O=E(F,P),V=E(F,B);if(O.len<1e-4||V.len<1e-4){C(I,F),P=F;continue}let L=Math.asin(O.nx*V.ny-O.ny*V.nx),D=1,U=!1;O.nx*V.nx-O.ny*-V.ny<0?L<0?L=Math.PI+L:(L=Math.PI-L,D=-1,U=!0):L>0&&(D=-1,U=!0);const G=L/2;let X,z=Math.abs(Math.cos(G)*R/Math.sin(G));z>Math.min(O.len/2,V.len/2)?(z=Math.min(O.len/2,V.len/2),X=Math.abs(z*Math.sin(G)/Math.cos(G))):X=R;const Y=F.x+V.nx*z+-V.ny*X*D,W=F.y+V.ny*z+V.nx*X*D,q=Math.atan2(O.ny,O.nx)+Math.PI/2*D,K=Math.atan2(V.ny,V.nx)-Math.PI/2*D;I===0&&A.moveTo(Y+Math.cos(q)*X,W+Math.sin(q)*X),A.arc(Y,W,X,q,K,U),P=F}}function roundedShapeQuadraticCurve(A,_,T,E){const C=(F,R)=>Math.sqrt((F.x-R.x)**2+(F.y-R.y)**2),P=(F,R,B)=>({x:F.x+(R.x-F.x)*B,y:F.y+(R.y-F.y)*B}),I=_.length;for(let F=0;F<I;F++){const R=_[(F+1)%I],B=R.radius??T;if(B<=0){F===0?A.moveTo(R.x,R.y):A.lineTo(R.x,R.y);continue}const O=_[F],V=_[(F+2)%I],L=C(O,R);let D;if(L<1e-4)D=R;else{const X=Math.min(L/2,B);D=P(R,O,X/L)}const U=C(V,R);let G;if(U<1e-4)G=R;else{const X=Math.min(U/2,B);G=P(R,V,X/U)}F===0?A.moveTo(D.x,D.y):A.lineTo(D.x,D.y),A.quadraticCurveTo(R.x,R.y,G.x,G.y,E)}}const tempRectangle$1=new Rectangle$1;class ShapePath{constructor(_){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bounds$1,this._graphicsPath2D=_,this.signed=_.checkForHoles}moveTo(_,T){return this.startPoly(_,T),this}lineTo(_,T){this._ensurePoly();const E=this._currentPoly.points,C=E[E.length-2],P=E[E.length-1];return(C!==_||P!==T)&&E.push(_,T),this}arc(_,T,E,C,P,I){this._ensurePoly(!1);const F=this._currentPoly.points;return buildArc(F,_,T,E,C,P,I),this}arcTo(_,T,E,C,P){this._ensurePoly();const I=this._currentPoly.points;return buildArcTo(I,_,T,E,C,P),this}arcToSvg(_,T,E,C,P,I,F){const R=this._currentPoly.points;return buildArcToSvg(R,this._currentPoly.lastX,this._currentPoly.lastY,I,F,_,T,E,C,P),this}bezierCurveTo(_,T,E,C,P,I,F){this._ensurePoly();const R=this._currentPoly;return buildAdaptiveBezier(this._currentPoly.points,R.lastX,R.lastY,_,T,E,C,P,I,F),this}quadraticCurveTo(_,T,E,C,P){this._ensurePoly();const I=this._currentPoly;return buildAdaptiveQuadratic(this._currentPoly.points,I.lastX,I.lastY,_,T,E,C,P),this}closePath(){return this.endPoly(!0),this}addPath(_,T){this.endPoly(),T&&!T.isIdentity()&&(_=_.clone(!0),_.transform(T));const E=this.shapePrimitives,C=E.length;for(let P=0;P<_.instructions.length;P++){const I=_.instructions[P];this[I.action](...I.data)}if(_.checkForHoles&&E.length-C>1){let P=null;for(let I=C;I<E.length;I++){const F=E[I];if(F.shape.type==="polygon"){const R=F.shape,B=P==null?void 0:P.shape;B&&B.containsPolygon(R)?(P.holes||(P.holes=[]),P.holes.push(F),E.copyWithin(I,I+1),E.length--,I--):P=F}}}return this}finish(_=!1){this.endPoly(_)}rect(_,T,E,C,P){return this.drawShape(new Rectangle$1(_,T,E,C),P),this}circle(_,T,E,C){return this.drawShape(new Circle$1(_,T,E),C),this}poly(_,T,E){const C=new Polygon$1(_);return C.closePath=T,this.drawShape(C,E),this}regularPoly(_,T,E,C,P=0,I){C=Math.max(C|0,3);const F=-1*Math.PI/2+P,R=Math.PI*2/C,B=[];for(let O=0;O<C;O++){const V=F-O*R;B.push(_+E*Math.cos(V),T+E*Math.sin(V))}return this.poly(B,!0,I),this}roundPoly(_,T,E,C,P,I=0,F){if(C=Math.max(C|0,3),P<=0)return this.regularPoly(_,T,E,C,I);const R=E*Math.sin(Math.PI/C)-.001;P=Math.min(P,R);const B=-1*Math.PI/2+I,O=Math.PI*2/C,V=(C-2)*Math.PI/C/2;for(let L=0;L<C;L++){const D=L*O+B,U=_+E*Math.cos(D),G=T+E*Math.sin(D),X=D+Math.PI+V,z=D-Math.PI-V,Y=U+P*Math.cos(X),W=G+P*Math.sin(X),q=U+P*Math.cos(z),K=G+P*Math.sin(z);L===0?this.moveTo(Y,W):this.lineTo(Y,W),this.quadraticCurveTo(U,G,q,K,F)}return this.closePath()}roundShape(_,T,E=!1,C){return _.length<3?this:(E?roundedShapeQuadraticCurve(this,_,T,C):roundedShapeArc(this,_,T),this.closePath())}filletRect(_,T,E,C,P){if(P===0)return this.rect(_,T,E,C);const I=Math.min(E,C)/2,F=Math.min(I,Math.max(-I,P)),R=_+E,B=T+C,O=F<0?-F:0,V=Math.abs(F);return this.moveTo(_,T+V).arcTo(_+O,T+O,_+V,T,V).lineTo(R-V,T).arcTo(R-O,T+O,R,T+V,V).lineTo(R,B-V).arcTo(R-O,B-O,_+E-V,B,V).lineTo(_+V,B).arcTo(_+O,B-O,_,B-V,V).closePath()}chamferRect(_,T,E,C,P,I){if(P<=0)return this.rect(_,T,E,C);const F=Math.min(P,Math.min(E,C)/2),R=_+E,B=T+C,O=[_+F,T,R-F,T,R,T+F,R,B-F,R-F,B,_+F,B,_,B-F,_,T+F];for(let V=O.length-1;V>=2;V-=2)O[V]===O[V-2]&&O[V-1]===O[V-3]&&O.splice(V-1,2);return this.poly(O,!0,I)}ellipse(_,T,E,C,P){return this.drawShape(new Ellipse$1(_,T,E,C),P),this}roundRect(_,T,E,C,P,I){return this.drawShape(new RoundedRectangle$1(_,T,E,C,P),I),this}drawShape(_,T){return this.endPoly(),this.shapePrimitives.push({shape:_,transform:T}),this}startPoly(_,T){let E=this._currentPoly;return E&&this.endPoly(),E=new Polygon$1,E.points.push(_,T),this._currentPoly=E,this}endPoly(_=!1){const T=this._currentPoly;return T&&T.points.length>2&&(T.closePath=_,this.shapePrimitives.push({shape:T})),this._currentPoly=null,this}_ensurePoly(_=!0){if(!this._currentPoly&&(this._currentPoly=new Polygon$1,_)){const T=this.shapePrimitives[this.shapePrimitives.length-1];if(T){let E=T.shape.x,C=T.shape.y;if(T.transform&&!T.transform.isIdentity()){const P=T.transform,I=E;E=P.a*E+P.c*C+P.tx,C=P.b*I+P.d*C+P.ty}this._currentPoly.points.push(E,C)}else this._currentPoly.points.push(0,0)}}buildPath(){const _=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let T=0;T<_.instructions.length;T++){const E=_.instructions[T];this[E.action](...E.data)}this.finish()}get bounds(){const _=this._bounds;_.clear();const T=this.shapePrimitives;for(let E=0;E<T.length;E++){const C=T[E],P=C.shape.getBounds(tempRectangle$1);C.transform?_.addRect(P,C.transform):_.addRect(P)}return _}}class GraphicsPath{constructor(_,T=!1){this.instructions=[],this.uid=uid$1("graphicsPath"),this._dirty=!0,this.checkForHoles=T,typeof _=="string"?parseSVGPath(_,this):this.instructions=(_==null?void 0:_.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(_,T){return _=_.clone(),this.instructions.push({action:"addPath",data:[_,T]}),this._dirty=!0,this}arc(..._){return this.instructions.push({action:"arc",data:_}),this._dirty=!0,this}arcTo(..._){return this.instructions.push({action:"arcTo",data:_}),this._dirty=!0,this}arcToSvg(..._){return this.instructions.push({action:"arcToSvg",data:_}),this._dirty=!0,this}bezierCurveTo(..._){return this.instructions.push({action:"bezierCurveTo",data:_}),this._dirty=!0,this}bezierCurveToShort(_,T,E,C,P){const I=this.instructions[this.instructions.length-1],F=this.getLastPoint(Point$1.shared);let R=0,B=0;if(!I||I.action!=="bezierCurveTo")R=F.x,B=F.y;else{R=I.data[2],B=I.data[3];const O=F.x,V=F.y;R=O+(O-R),B=V+(V-B)}return this.instructions.push({action:"bezierCurveTo",data:[R,B,_,T,E,C,P]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(..._){return this.instructions.push({action:"ellipse",data:_}),this._dirty=!0,this}lineTo(..._){return this.instructions.push({action:"lineTo",data:_}),this._dirty=!0,this}moveTo(..._){return this.instructions.push({action:"moveTo",data:_}),this}quadraticCurveTo(..._){return this.instructions.push({action:"quadraticCurveTo",data:_}),this._dirty=!0,this}quadraticCurveToShort(_,T,E){const C=this.instructions[this.instructions.length-1],P=this.getLastPoint(Point$1.shared);let I=0,F=0;if(!C||C.action!=="quadraticCurveTo")I=P.x,F=P.y;else{I=C.data[0],F=C.data[1];const R=P.x,B=P.y;I=R+(R-I),F=B+(B-F)}return this.instructions.push({action:"quadraticCurveTo",data:[I,F,_,T,E]}),this._dirty=!0,this}rect(_,T,E,C,P){return this.instructions.push({action:"rect",data:[_,T,E,C,P]}),this._dirty=!0,this}circle(_,T,E,C){return this.instructions.push({action:"circle",data:[_,T,E,C]}),this._dirty=!0,this}roundRect(..._){return this.instructions.push({action:"roundRect",data:_}),this._dirty=!0,this}poly(..._){return this.instructions.push({action:"poly",data:_}),this._dirty=!0,this}regularPoly(..._){return this.instructions.push({action:"regularPoly",data:_}),this._dirty=!0,this}roundPoly(..._){return this.instructions.push({action:"roundPoly",data:_}),this._dirty=!0,this}roundShape(..._){return this.instructions.push({action:"roundShape",data:_}),this._dirty=!0,this}filletRect(..._){return this.instructions.push({action:"filletRect",data:_}),this._dirty=!0,this}chamferRect(..._){return this.instructions.push({action:"chamferRect",data:_}),this._dirty=!0,this}star(_,T,E,C,P,I,F){P||(P=C/2);const R=-1*Math.PI/2+I,B=E*2,O=Math.PI*2/B,V=[];for(let L=0;L<B;L++){const D=L%2?P:C,U=L*O+R;V.push(_+D*Math.cos(U),T+D*Math.sin(U))}return this.poly(V,!0,F),this}clone(_=!1){const T=new GraphicsPath;if(T.checkForHoles=this.checkForHoles,!_)T.instructions=this.instructions.slice();else for(let E=0;E<this.instructions.length;E++){const C=this.instructions[E];T.instructions.push({action:C.action,data:C.data.slice()})}return T}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(_){if(_.isIdentity())return this;const T=_.a,E=_.b,C=_.c,P=_.d,I=_.tx,F=_.ty;let R=0,B=0,O=0,V=0,L=0,D=0,U=0,G=0;for(let X=0;X<this.instructions.length;X++){const z=this.instructions[X],Y=z.data;switch(z.action){case"moveTo":case"lineTo":R=Y[0],B=Y[1],Y[0]=T*R+C*B+I,Y[1]=E*R+P*B+F;break;case"bezierCurveTo":O=Y[0],V=Y[1],L=Y[2],D=Y[3],R=Y[4],B=Y[5],Y[0]=T*O+C*V+I,Y[1]=E*O+P*V+F,Y[2]=T*L+C*D+I,Y[3]=E*L+P*D+F,Y[4]=T*R+C*B+I,Y[5]=E*R+P*B+F;break;case"quadraticCurveTo":O=Y[0],V=Y[1],R=Y[2],B=Y[3],Y[0]=T*O+C*V+I,Y[1]=E*O+P*V+F,Y[2]=T*R+C*B+I,Y[3]=E*R+P*B+F;break;case"arcToSvg":R=Y[5],B=Y[6],U=Y[0],G=Y[1],Y[0]=T*U+C*G,Y[1]=E*U+P*G,Y[5]=T*R+C*B+I,Y[6]=E*R+P*B+F;break;case"circle":Y[4]=adjustTransform(Y[3],_);break;case"rect":Y[4]=adjustTransform(Y[4],_);break;case"ellipse":Y[8]=adjustTransform(Y[8],_);break;case"roundRect":Y[5]=adjustTransform(Y[5],_);break;case"addPath":Y[0].transform(_);break;case"poly":Y[2]=adjustTransform(Y[2],_);break;default:warn("unknown transform action",z.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(_){let T=this.instructions.length-1,E=this.instructions[T];if(!E)return _.x=0,_.y=0,_;for(;E.action==="closePath";){if(T--,T<0)return _.x=0,_.y=0,_;E=this.instructions[T]}switch(E.action){case"moveTo":case"lineTo":_.x=E.data[0],_.y=E.data[1];break;case"quadraticCurveTo":_.x=E.data[2],_.y=E.data[3];break;case"bezierCurveTo":_.x=E.data[4],_.y=E.data[5];break;case"arc":case"arcToSvg":_.x=E.data[5],_.y=E.data[6];break;case"addPath":E.data[0].getLastPoint(_);break}return _}}function adjustTransform(A,_){return A?A.prepend(_):_.clone()}function parseSVGFloatAttribute(A,_,T){const E=A.getAttribute(_);return E?Number(E):T}function parseSVGDefinitions(A,_){const T=A.querySelectorAll("defs");for(let E=0;E<T.length;E++){const C=T[E];for(let P=0;P<C.children.length;P++){const I=C.children[P];switch(I.nodeName.toLowerCase()){case"lineargradient":_.defs[I.id]=parseLinearGradient(I);break;case"radialgradient":_.defs[I.id]=parseRadialGradient();break}}}}function parseLinearGradient(A){const _=parseSVGFloatAttribute(A,"x1",0),T=parseSVGFloatAttribute(A,"y1",0),E=parseSVGFloatAttribute(A,"x2",1),C=parseSVGFloatAttribute(A,"y2",0),P=A.getAttribute("gradientUnits")||"objectBoundingBox",I=new FillGradient(_,T,E,C,P==="objectBoundingBox"?"local":"global");for(let F=0;F<A.children.length;F++){const R=A.children[F],B=parseSVGFloatAttribute(R,"offset",0),O=Color$2.shared.setValue(R.getAttribute("stop-color")).toNumber();I.addColorStop(B,O)}return I}function parseRadialGradient(A){return warn("[SVG Parser] Radial gradients are not yet supported"),new FillGradient(0,0,1,0)}function extractSvgUrlId(A){const _=A.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return _?_[1]:""}const styleAttributes={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function parseSVGStyle(A,_){const T=A.getAttribute("style"),E={},C={},P={strokeStyle:E,fillStyle:C,useFill:!1,useStroke:!1};for(const I in styleAttributes){const F=A.getAttribute(I);F&&parseAttribute(_,P,I,F.trim())}if(T){const I=T.split(";");for(let F=0;F<I.length;F++){const R=I[F].trim(),[B,O]=R.split(":");styleAttributes[B]&&parseAttribute(_,P,B,O.trim())}}return{strokeStyle:P.useStroke?E:null,fillStyle:P.useFill?C:null,useFill:P.useFill,useStroke:P.useStroke}}function parseAttribute(A,_,T,E){switch(T){case"stroke":if(E!=="none"){if(E.startsWith("url(")){const C=extractSvgUrlId(E);_.strokeStyle.fill=A.defs[C]}else _.strokeStyle.color=Color$2.shared.setValue(E).toNumber();_.useStroke=!0}break;case"stroke-width":_.strokeStyle.width=Number(E);break;case"fill":if(E!=="none"){if(E.startsWith("url(")){const C=extractSvgUrlId(E);_.fillStyle.fill=A.defs[C]}else _.fillStyle.color=Color$2.shared.setValue(E).toNumber();_.useFill=!0}break;case"fill-opacity":_.fillStyle.alpha=Number(E);break;case"stroke-opacity":_.strokeStyle.alpha=Number(E);break;case"opacity":_.fillStyle.alpha=Number(E),_.strokeStyle.alpha=Number(E);break}}function SVGParser(A,_){if(typeof A=="string"){const I=document.createElement("div");I.innerHTML=A.trim(),A=I.querySelector("svg")}const T={context:_,defs:{},path:new GraphicsPath};parseSVGDefinitions(A,T);const E=A.children,{fillStyle:C,strokeStyle:P}=parseSVGStyle(A,T);for(let I=0;I<E.length;I++){const F=E[I];F.nodeName.toLowerCase()!=="defs"&&renderChildren(F,T,C,P)}return _}function renderChildren(A,_,T,E){const C=A.children,{fillStyle:P,strokeStyle:I}=parseSVGStyle(A,_);P&&T?T={...T,...P}:P&&(T=P),I&&E?E={...E,...I}:I&&(E=I);const F=!T&&!E;F&&(T={color:0});let R,B,O,V,L,D,U,G,X,z,Y,W,q,K,J,Z,se;switch(A.nodeName.toLowerCase()){case"path":K=A.getAttribute("d"),A.getAttribute("fill-rule")==="evenodd"&&warn("SVG Evenodd fill rule not supported, your svg may render incorrectly"),J=new GraphicsPath(K,!0),_.context.path(J),T&&_.context.fill(T),E&&_.context.stroke(E);break;case"circle":U=parseSVGFloatAttribute(A,"cx",0),G=parseSVGFloatAttribute(A,"cy",0),X=parseSVGFloatAttribute(A,"r",0),_.context.ellipse(U,G,X,X),T&&_.context.fill(T),E&&_.context.stroke(E);break;case"rect":R=parseSVGFloatAttribute(A,"x",0),B=parseSVGFloatAttribute(A,"y",0),Z=parseSVGFloatAttribute(A,"width",0),se=parseSVGFloatAttribute(A,"height",0),z=parseSVGFloatAttribute(A,"rx",0),Y=parseSVGFloatAttribute(A,"ry",0),z||Y?_.context.roundRect(R,B,Z,se,z||Y):_.context.rect(R,B,Z,se),T&&_.context.fill(T),E&&_.context.stroke(E);break;case"ellipse":U=parseSVGFloatAttribute(A,"cx",0),G=parseSVGFloatAttribute(A,"cy",0),z=parseSVGFloatAttribute(A,"rx",0),Y=parseSVGFloatAttribute(A,"ry",0),_.context.beginPath(),_.context.ellipse(U,G,z,Y),T&&_.context.fill(T),E&&_.context.stroke(E);break;case"line":O=parseSVGFloatAttribute(A,"x1",0),V=parseSVGFloatAttribute(A,"y1",0),L=parseSVGFloatAttribute(A,"x2",0),D=parseSVGFloatAttribute(A,"y2",0),_.context.beginPath(),_.context.moveTo(O,V),_.context.lineTo(L,D),E&&_.context.stroke(E);break;case"polygon":q=A.getAttribute("points"),W=q.match(/\d+/g).map(ae=>parseInt(ae,10)),_.context.poly(W,!0),T&&_.context.fill(T),E&&_.context.stroke(E);break;case"polyline":q=A.getAttribute("points"),W=q.match(/\d+/g).map(ae=>parseInt(ae,10)),_.context.poly(W,!1),E&&_.context.stroke(E);break;case"g":case"svg":break;default:{warn(`[SVG parser] <${A.nodeName}> elements unsupported`);break}}F&&(T=null);for(let ae=0;ae<C.length;ae++)renderChildren(C[ae],_,T,E)}function isColorLike(A){return Color$2.isColorLike(A)}function isFillPattern(A){return A instanceof FillPattern}function isFillGradient(A){return A instanceof FillGradient}function isTexture(A){return A instanceof Texture$1}function handleColorLike(A,_,T){const E=Color$2.shared.setValue(_??0);return A.color=E.toNumber(),A.alpha=E.alpha===1?T.alpha:E.alpha,A.texture=Texture$1.WHITE,{...T,...A}}function handleTexture(A,_,T){return A.texture=_,{...T,...A}}function handleFillPattern(A,_,T){return A.fill=_,A.color=16777215,A.texture=_.texture,A.matrix=_.transform,{...T,...A}}function handleFillGradient(A,_,T){return _.buildGradient(),A.fill=_,A.color=16777215,A.texture=_.texture,A.matrix=_.transform,A.textureSpace=_.textureSpace,{...T,...A}}function handleFillObject(A,_){const T={..._,...A},E=Color$2.shared.setValue(T.color);return T.alpha*=E.alpha,T.color=E.toNumber(),T}function toFillStyle(A,_){if(A==null)return null;const T={},E=A;return isColorLike(A)?handleColorLike(T,A,_):isTexture(A)?handleTexture(T,A,_):isFillPattern(A)?handleFillPattern(T,A,_):isFillGradient(A)?handleFillGradient(T,A,_):E.fill&&isFillPattern(E.fill)?handleFillPattern(E,E.fill,_):E.fill&&isFillGradient(E.fill)?handleFillGradient(E,E.fill,_):handleFillObject(E,_)}function toStrokeStyle(A,_){const{width:T,alignment:E,miterLimit:C,cap:P,join:I,pixelLine:F,...R}=_,B=toFillStyle(A,R);return B?{width:T,alignment:E,miterLimit:C,cap:P,join:I,pixelLine:F,...B}:null}const tmpPoint$1=new Point$1,tempMatrix$3=new Matrix$1,_GraphicsContext=class lt extends EventEmitter$1{constructor(){super(...arguments),this.uid=uid$1("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new GraphicsPath,this._transform=new Matrix$1,this._fillStyle={...lt.defaultFillStyle},this._strokeStyle={...lt.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bounds$1,this._boundsDirty=!0}clone(){const _=new lt;return _.batchMode=this.batchMode,_.instructions=this.instructions.slice(),_._activePath=this._activePath.clone(),_._transform=this._transform.clone(),_._fillStyle={...this._fillStyle},_._strokeStyle={...this._strokeStyle},_._stateStack=this._stateStack.slice(),_._bounds=this._bounds.clone(),_._boundsDirty=!0,_}get fillStyle(){return this._fillStyle}set fillStyle(_){this._fillStyle=toFillStyle(_,lt.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(_){this._strokeStyle=toStrokeStyle(_,lt.defaultStrokeStyle)}setFillStyle(_){return this._fillStyle=toFillStyle(_,lt.defaultFillStyle),this}setStrokeStyle(_){return this._strokeStyle=toFillStyle(_,lt.defaultStrokeStyle),this}texture(_,T,E,C,P,I){return this.instructions.push({action:"texture",data:{image:_,dx:E||0,dy:C||0,dw:P||_.frame.width,dh:I||_.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:T?Color$2.shared.setValue(T).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new GraphicsPath,this}fill(_,T){let E;const C=this.instructions[this.instructions.length-1];return this._tick===0&&C&&C.action==="stroke"?E=C.data.path:E=this._activePath.clone(),E?(_!=null&&(T!==void 0&&typeof _=="number"&&(deprecation$1(v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),_={color:_,alpha:T}),this._fillStyle=toFillStyle(_,lt.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:E}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:_,y:T}=this._activePath.getLastPoint(Point$1.shared);this._activePath.clear(),this._activePath.moveTo(_,T)}stroke(_){let T;const E=this.instructions[this.instructions.length-1];return this._tick===0&&E&&E.action==="fill"?T=E.data.path:T=this._activePath.clone(),T?(_!=null&&(this._strokeStyle=toStrokeStyle(_,lt.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:T}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let _=0;_<2;_++){const T=this.instructions[this.instructions.length-1-_],E=this._activePath.clone();if(T&&(T.action==="stroke"||T.action==="fill"))if(T.data.hole)T.data.hole.addPath(E);else{T.data.hole=E;break}}return this._initNextPathLocation(),this}arc(_,T,E,C,P,I){this._tick++;const F=this._transform;return this._activePath.arc(F.a*_+F.c*T+F.tx,F.b*_+F.d*T+F.ty,E,C,P,I),this}arcTo(_,T,E,C,P){this._tick++;const I=this._transform;return this._activePath.arcTo(I.a*_+I.c*T+I.tx,I.b*_+I.d*T+I.ty,I.a*E+I.c*C+I.tx,I.b*E+I.d*C+I.ty,P),this}arcToSvg(_,T,E,C,P,I,F){this._tick++;const R=this._transform;return this._activePath.arcToSvg(_,T,E,C,P,R.a*I+R.c*F+R.tx,R.b*I+R.d*F+R.ty),this}bezierCurveTo(_,T,E,C,P,I,F){this._tick++;const R=this._transform;return this._activePath.bezierCurveTo(R.a*_+R.c*T+R.tx,R.b*_+R.d*T+R.ty,R.a*E+R.c*C+R.tx,R.b*E+R.d*C+R.ty,R.a*P+R.c*I+R.tx,R.b*P+R.d*I+R.ty,F),this}closePath(){var _;return this._tick++,(_=this._activePath)==null||_.closePath(),this}ellipse(_,T,E,C){return this._tick++,this._activePath.ellipse(_,T,E,C,this._transform.clone()),this}circle(_,T,E){return this._tick++,this._activePath.circle(_,T,E,this._transform.clone()),this}path(_){return this._tick++,this._activePath.addPath(_,this._transform.clone()),this}lineTo(_,T){this._tick++;const E=this._transform;return this._activePath.lineTo(E.a*_+E.c*T+E.tx,E.b*_+E.d*T+E.ty),this}moveTo(_,T){this._tick++;const E=this._transform,C=this._activePath.instructions,P=E.a*_+E.c*T+E.tx,I=E.b*_+E.d*T+E.ty;return C.length===1&&C[0].action==="moveTo"?(C[0].data[0]=P,C[0].data[1]=I,this):(this._activePath.moveTo(P,I),this)}quadraticCurveTo(_,T,E,C,P){this._tick++;const I=this._transform;return this._activePath.quadraticCurveTo(I.a*_+I.c*T+I.tx,I.b*_+I.d*T+I.ty,I.a*E+I.c*C+I.tx,I.b*E+I.d*C+I.ty,P),this}rect(_,T,E,C){return this._tick++,this._activePath.rect(_,T,E,C,this._transform.clone()),this}roundRect(_,T,E,C,P){return this._tick++,this._activePath.roundRect(_,T,E,C,P,this._transform.clone()),this}poly(_,T){return this._tick++,this._activePath.poly(_,T,this._transform.clone()),this}regularPoly(_,T,E,C,P=0,I){return this._tick++,this._activePath.regularPoly(_,T,E,C,P,I),this}roundPoly(_,T,E,C,P,I){return this._tick++,this._activePath.roundPoly(_,T,E,C,P,I),this}roundShape(_,T,E,C){return this._tick++,this._activePath.roundShape(_,T,E,C),this}filletRect(_,T,E,C,P){return this._tick++,this._activePath.filletRect(_,T,E,C,P),this}chamferRect(_,T,E,C,P,I){return this._tick++,this._activePath.chamferRect(_,T,E,C,P,I),this}star(_,T,E,C,P=0,I=0){return this._tick++,this._activePath.star(_,T,E,C,P,I,this._transform.clone()),this}svg(_){return this._tick++,SVGParser(_,this),this}restore(){const _=this._stateStack.pop();return _&&(this._transform=_.transform,this._fillStyle=_.fillStyle,this._strokeStyle=_.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(_){return this._transform.rotate(_),this}scale(_,T=_){return this._transform.scale(_,T),this}setTransform(_,T,E,C,P,I){return _ instanceof Matrix$1?(this._transform.set(_.a,_.b,_.c,_.d,_.tx,_.ty),this):(this._transform.set(_,T,E,C,P,I),this)}transform(_,T,E,C,P,I){return _ instanceof Matrix$1?(this._transform.append(_),this):(tempMatrix$3.set(_,T,E,C,P,I),this._transform.append(tempMatrix$3),this)}translate(_,T=_){return this._transform.translate(_,T),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const _=this._bounds;_.clear();for(let T=0;T<this.instructions.length;T++){const E=this.instructions[T],C=E.action;if(C==="fill"){const P=E.data;_.addBounds(P.path.bounds)}else if(C==="texture"){const P=E.data;_.addFrame(P.dx,P.dy,P.dx+P.dw,P.dy+P.dh,P.transform)}if(C==="stroke"){const P=E.data,I=P.style.alignment,F=P.style.width*(1-I),R=P.path.bounds;_.addFrame(R.minX-F,R.minY-F,R.maxX+F,R.maxY+F)}}return _}containsPoint(_){var C;if(!this.bounds.containsPoint(_.x,_.y))return!1;const T=this.instructions;let E=!1;for(let P=0;P<T.length;P++){const I=T[P],F=I.data,R=F.path;if(!I.action||!R)continue;const B=F.style,O=R.shapePath.shapePrimitives;for(let V=0;V<O.length;V++){const L=O[V].shape;if(!B||!L)continue;const D=O[V].transform,U=D?D.applyInverse(_,tmpPoint$1):_;if(I.action==="fill")E=L.contains(U.x,U.y);else{const X=B;E=L.strokeContains(U.x,U.y,X.width,X.alignment)}const G=F.hole;if(G){const X=(C=G.shapePath)==null?void 0:C.shapePrimitives;if(X)for(let z=0;z<X.length;z++)X[z].shape.contains(U.x,U.y)&&(E=!1)}if(E)return!0}}return E}destroy(_=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof _=="boolean"?_:_==null?void 0:_.texture){const E=typeof _=="boolean"?_:_==null?void 0:_.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(E),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(E)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_GraphicsContext.defaultFillStyle={color:16777215,alpha:1,texture:Texture$1.WHITE,matrix:null,fill:null,textureSpace:"local"};_GraphicsContext.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Texture$1.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let GraphicsContext=_GraphicsContext;const valuesToIterateForKeys=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function generateTextStyleKey(A){const _=[];let T=0;for(let E=0;E<valuesToIterateForKeys.length;E++){const C=`_${valuesToIterateForKeys[E]}`;_[T++]=A[C]}return T=addFillStyleKey(A._fill,_,T),T=addStokeStyleKey(A._stroke,_,T),T=addDropShadowKey(A.dropShadow,_,T),_.join("-")}function addFillStyleKey(A,_,T){var E;return A&&(_[T++]=A.color,_[T++]=A.alpha,_[T++]=(E=A.fill)==null?void 0:E.styleKey),T}function addStokeStyleKey(A,_,T){return A&&(T=addFillStyleKey(A,_,T),_[T++]=A.width,_[T++]=A.alignment,_[T++]=A.cap,_[T++]=A.join,_[T++]=A.miterLimit),T}function addDropShadowKey(A,_,T){return A&&(_[T++]=A.alpha,_[T++]=A.angle,_[T++]=A.blur,_[T++]=A.distance,_[T++]=Color$2.shared.setValue(A.color).toNumber()),T}const _TextStyle=class vt extends EventEmitter$1{constructor(_={}){super(),convertV7Tov8Style(_);const T={...vt.defaultTextStyle,..._};for(const E in T){const C=E;this[C]=T[E]}this.update()}get align(){return this._align}set align(_){this._align=_,this.update()}get breakWords(){return this._breakWords}set breakWords(_){this._breakWords=_,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(_){_!==null&&typeof _=="object"?this._dropShadow=this._createProxy({...vt.defaultDropShadow,..._}):this._dropShadow=_?this._createProxy({...vt.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(_){this._fontFamily=_,this.update()}get fontSize(){return this._fontSize}set fontSize(_){typeof _=="string"?this._fontSize=parseInt(_,10):this._fontSize=_,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(_){this._fontStyle=_.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(_){this._fontVariant=_,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(_){this._fontWeight=_,this.update()}get leading(){return this._leading}set leading(_){this._leading=_,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(_){this._letterSpacing=_,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(_){this._lineHeight=_,this.update()}get padding(){return this._padding}set padding(_){this._padding=_,this.update()}get trim(){return this._trim}set trim(_){this._trim=_,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(_){this._textBaseline=_,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(_){this._whiteSpace=_,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(_){this._wordWrap=_,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(_){this._wordWrapWidth=_,this.update()}get fill(){return this._originalFill}set fill(_){_!==this._originalFill&&(this._originalFill=_,this._isFillStyle(_)&&(this._originalFill=this._createProxy({...GraphicsContext.defaultFillStyle,..._},()=>{this._fill=toFillStyle({...this._originalFill},GraphicsContext.defaultFillStyle)})),this._fill=toFillStyle(_===0?"black":_,GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(_){_!==this._originalStroke&&(this._originalStroke=_,this._isFillStyle(_)&&(this._originalStroke=this._createProxy({...GraphicsContext.defaultStrokeStyle,..._},()=>{this._stroke=toStrokeStyle({...this._originalStroke},GraphicsContext.defaultStrokeStyle)})),this._stroke=toStrokeStyle(_,GraphicsContext.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=generateTextStyleKey(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const _=vt.defaultTextStyle;for(const T in _)this[T]=_[T]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new vt({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(_=!1){var E,C,P,I;if(this.removeAllListeners(),typeof _=="boolean"?_:_==null?void 0:_.texture){const F=typeof _=="boolean"?_:_==null?void 0:_.textureSource;(E=this._fill)!=null&&E.texture&&this._fill.texture.destroy(F),(C=this._originalFill)!=null&&C.texture&&this._originalFill.texture.destroy(F),(P=this._stroke)!=null&&P.texture&&this._stroke.texture.destroy(F),(I=this._originalStroke)!=null&&I.texture&&this._originalStroke.texture.destroy(F)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(_,T){return new Proxy(_,{set:(E,C,P)=>(E[C]=P,T==null||T(C,P),this.update(),!0)})}_isFillStyle(_){return(_??null)!==null&&!(Color$2.isColorLike(_)||_ instanceof FillGradient||_ instanceof FillPattern)}};_TextStyle.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};_TextStyle.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function convertV7Tov8Style(A){const _=A;if(typeof _.dropShadow=="boolean"&&_.dropShadow){const T=TextStyle.defaultDropShadow;A.dropShadow={alpha:_.dropShadowAlpha??T.alpha,angle:_.dropShadowAngle??T.angle,blur:_.dropShadowBlur??T.blur,color:_.dropShadowColor??T.color,distance:_.dropShadowDistance??T.distance}}if(_.strokeThickness!==void 0){deprecation$1(v8_0_0,"strokeThickness is now a part of stroke");const T=_.stroke;let E={};if(Color$2.isColorLike(T))E.color=T;else if(T instanceof FillGradient||T instanceof FillPattern)E.fill=T;else if(Object.hasOwnProperty.call(T,"color")||Object.hasOwnProperty.call(T,"fill"))E=T;else throw new Error("Invalid stroke value.");A.stroke={...E,width:_.strokeThickness}}if(Array.isArray(_.fillGradientStops)){deprecation$1(v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`");let T;A.fontSize==null?A.fontSize=TextStyle.defaultTextStyle.fontSize:typeof A.fontSize=="string"?T=parseInt(A.fontSize,10):T=A.fontSize;const E=new FillGradient({start:{x:0,y:0},end:{x:0,y:(T||0)*1.7}}),C=_.fillGradientStops.map(P=>Color$2.shared.setValue(P).toNumber());C.forEach((P,I)=>{const F=I/(C.length-1);E.addColorStop(F,P)}),A.fill={fill:E}}}class CanvasPoolClass{constructor(_){this._canvasPool=Object.create(null),this.canvasOptions=_||{},this.enableFullScreen=!1}_createCanvasAndContext(_,T){const E=DOMAdapter.get().createCanvas();E.width=_,E.height=T;const C=E.getContext("2d");return{canvas:E,context:C}}getOptimalCanvasAndContext(_,T,E=1){_=Math.ceil(_*E-1e-6),T=Math.ceil(T*E-1e-6),_=nextPow2$1(_),T=nextPow2$1(T);const C=(_<<17)+(T<<1);this._canvasPool[C]||(this._canvasPool[C]=[]);let P=this._canvasPool[C].pop();return P||(P=this._createCanvasAndContext(_,T)),P}returnCanvasAndContext(_){const T=_.canvas,{width:E,height:C}=T,P=(E<<17)+(C<<1);_.context.clearRect(0,0,E,C),this._canvasPool[P].push(_)}clear(){this._canvasPool={}}}const CanvasPool=new CanvasPoolClass,genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function fontStringFromTextStyle(A){const _=typeof A.fontSize=="number"?`${A.fontSize}px`:A.fontSize;let T=A.fontFamily;Array.isArray(A.fontFamily)||(T=A.fontFamily.split(","));for(let E=T.length-1;E>=0;E--){let C=T[E].trim();!/([\"\'])[^\'\"]+\1/.test(C)&&!genericFontFamilies.includes(C)&&(C=`"${C}"`),T[E]=C}return`${A.fontStyle} ${A.fontVariant} ${A.fontWeight} ${_} ${T.join(",")}`}const contextSettings={willReadFrequently:!0},_CanvasTextMetrics=class Ne{static get experimentalLetterSpacingSupported(){let _=Ne._experimentalLetterSpacingSupported;if(_!==void 0){const T=DOMAdapter.get().getCanvasRenderingContext2D().prototype;_=Ne._experimentalLetterSpacingSupported="letterSpacing"in T||"textLetterSpacing"in T}return _}constructor(_,T,E,C,P,I,F,R,B){this.text=_,this.style=T,this.width=E,this.height=C,this.lines=P,this.lineWidths=I,this.lineHeight=F,this.maxLineWidth=R,this.fontProperties=B}static measureText(_=" ",T,E=Ne._canvas,C=T.wordWrap){var Y;const P=`${_}:${T.styleKey}`;if(Ne._measurementCache[P])return Ne._measurementCache[P];const I=fontStringFromTextStyle(T),F=Ne.measureFont(I);F.fontSize===0&&(F.fontSize=T.fontSize,F.ascent=T.fontSize);const R=Ne.__context;R.font=I;const O=(C?Ne._wordWrap(_,T,E):_).split(/(?:\r\n|\r|\n)/),V=new Array(O.length);let L=0;for(let W=0;W<O.length;W++){const q=Ne._measureText(O[W],T.letterSpacing,R);V[W]=q,L=Math.max(L,q)}const D=((Y=T._stroke)==null?void 0:Y.width)||0;let U=L+D;T.dropShadow&&(U+=T.dropShadow.distance);const G=T.lineHeight||F.fontSize;let X=Math.max(G,F.fontSize+D)+(O.length-1)*(G+T.leading);return T.dropShadow&&(X+=T.dropShadow.distance),new Ne(_,T,U,X,O,V,G+T.leading,L,F)}static _measureText(_,T,E){let C=!1;Ne.experimentalLetterSpacingSupported&&(Ne.experimentalLetterSpacing?(E.letterSpacing=`${T}px`,E.textLetterSpacing=`${T}px`,C=!0):(E.letterSpacing="0px",E.textLetterSpacing="0px"));const P=E.measureText(_);let I=P.width;const F=-P.actualBoundingBoxLeft;let B=P.actualBoundingBoxRight-F;if(I>0)if(C)I-=T,B-=T;else{const O=(Ne.graphemeSegmenter(_).length-1)*T;I+=O,B+=O}return Math.max(I,B)}static _wordWrap(_,T,E=Ne._canvas){const C=E.getContext("2d",contextSettings);let P=0,I="",F="";const R=Object.create(null),{letterSpacing:B,whiteSpace:O}=T,V=Ne._collapseSpaces(O),L=Ne._collapseNewlines(O);let D=!V;const U=T.wordWrapWidth+B,G=Ne._tokenize(_);for(let X=0;X<G.length;X++){let z=G[X];if(Ne._isNewline(z)){if(!L){F+=Ne._addLine(I),D=!V,I="",P=0;continue}z=" "}if(V){const W=Ne.isBreakingSpace(z),q=Ne.isBreakingSpace(I[I.length-1]);if(W&&q)continue}const Y=Ne._getFromCache(z,B,R,C);if(Y>U)if(I!==""&&(F+=Ne._addLine(I),I="",P=0),Ne.canBreakWords(z,T.breakWords)){const W=Ne.wordWrapSplit(z);for(let q=0;q<W.length;q++){let K=W[q],J=K,Z=1;for(;W[q+Z];){const ae=W[q+Z];if(!Ne.canBreakChars(J,ae,z,q,T.breakWords))K+=ae;else break;J=ae,Z++}q+=Z-1;const se=Ne._getFromCache(K,B,R,C);se+P>U&&(F+=Ne._addLine(I),D=!1,I="",P=0),I+=K,P+=se}}else{I.length>0&&(F+=Ne._addLine(I),I="",P=0);const W=X===G.length-1;F+=Ne._addLine(z,!W),D=!1,I="",P=0}else Y+P>U&&(D=!1,F+=Ne._addLine(I),I="",P=0),(I.length>0||!Ne.isBreakingSpace(z)||D)&&(I+=z,P+=Y)}return F+=Ne._addLine(I,!1),F}static _addLine(_,T=!0){return _=Ne._trimRight(_),_=T?`${_}
`:_,_}static _getFromCache(_,T,E,C){let P=E[_];return typeof P!="number"&&(P=Ne._measureText(_,T,C)+T,E[_]=P),P}static _collapseSpaces(_){return _==="normal"||_==="pre-line"}static _collapseNewlines(_){return _==="normal"}static _trimRight(_){if(typeof _!="string")return"";for(let T=_.length-1;T>=0;T--){const E=_[T];if(!Ne.isBreakingSpace(E))break;_=_.slice(0,-1)}return _}static _isNewline(_){return typeof _!="string"?!1:Ne._newlines.includes(_.charCodeAt(0))}static isBreakingSpace(_,T){return typeof _!="string"?!1:Ne._breakingSpaces.includes(_.charCodeAt(0))}static _tokenize(_){const T=[];let E="";if(typeof _!="string")return T;for(let C=0;C<_.length;C++){const P=_[C],I=_[C+1];if(Ne.isBreakingSpace(P,I)||Ne._isNewline(P)){E!==""&&(T.push(E),E=""),T.push(P);continue}E+=P}return E!==""&&T.push(E),T}static canBreakWords(_,T){return T}static canBreakChars(_,T,E,C,P){return!0}static wordWrapSplit(_){return Ne.graphemeSegmenter(_)}static measureFont(_){if(Ne._fonts[_])return Ne._fonts[_];const T=Ne._context;T.font=_;const E=T.measureText(Ne.METRICS_STRING+Ne.BASELINE_SYMBOL),C={ascent:E.actualBoundingBoxAscent,descent:E.actualBoundingBoxDescent,fontSize:E.actualBoundingBoxAscent+E.actualBoundingBoxDescent};return Ne._fonts[_]=C,C}static clearMetrics(_=""){_?delete Ne._fonts[_]:Ne._fonts={}}static get _canvas(){if(!Ne.__canvas){let _;try{const T=new OffscreenCanvas(0,0),E=T.getContext("2d",contextSettings);if(E!=null&&E.measureText)return Ne.__canvas=T,T;_=DOMAdapter.get().createCanvas()}catch{_=DOMAdapter.get().createCanvas()}_.width=_.height=10,Ne.__canvas=_}return Ne.__canvas}static get _context(){return Ne.__context||(Ne.__context=Ne._canvas.getContext("2d",contextSettings)),Ne.__context}};_CanvasTextMetrics.METRICS_STRING="|q";_CanvasTextMetrics.BASELINE_SYMBOL="M";_CanvasTextMetrics.BASELINE_MULTIPLIER=1.4;_CanvasTextMetrics.HEIGHT_MULTIPLIER=2;_CanvasTextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const A=new Intl.Segmenter;return _=>[...A.segment(_)].map(T=>T.segment)}return A=>[...A]})();_CanvasTextMetrics.experimentalLetterSpacing=!1;_CanvasTextMetrics._fonts={};_CanvasTextMetrics._newlines=[10,13];_CanvasTextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];_CanvasTextMetrics._measurementCache={};let CanvasTextMetrics=_CanvasTextMetrics;const PRECISION$1=1e5;function getCanvasFillStyle(A,_,T,E=0){if(A.texture===Texture$1.WHITE&&!A.fill)return Color$2.shared.setValue(A.color).setAlpha(A.alpha??1).toHexa();if(A.fill){if(A.fill instanceof FillPattern){const C=A.fill,P=_.createPattern(C.texture.source.resource,"repeat"),I=C.transform.copyTo(Matrix$1.shared);return I.scale(C.texture.frame.width,C.texture.frame.height),P.setTransform(I),P}else if(A.fill instanceof FillGradient){const C=A.fill,P=C.type==="linear",I=C.textureSpace==="local";let F=1,R=1;I&&T&&(F=T.width+E,R=T.height+E);let B,O=!1;if(P){const{start:V,end:L}=C;B=_.createLinearGradient(V.x*F,V.y*R,L.x*F,L.y*R),O=Math.abs(L.x-V.x)<Math.abs((L.y-V.y)*.1)}else{const{center:V,innerRadius:L,outerCenter:D,outerRadius:U}=C;B=_.createRadialGradient(V.x*F,V.y*R,L*F,D.x*F,D.y*R,U*F)}if(O&&I&&T){const V=T.lineHeight/R;for(let L=0;L<T.lines.length;L++){const D=(L*T.lineHeight+E/2)/R;C.colorStops.forEach(U=>{const G=D+U.offset*V;B.addColorStop(Math.floor(G*PRECISION$1)/PRECISION$1,Color$2.shared.setValue(U.color).toHex())})}}else C.colorStops.forEach(V=>{B.addColorStop(V.offset,Color$2.shared.setValue(V.color).toHex())});return B}}else{const C=_.createPattern(A.texture.source.resource,"repeat"),P=A.matrix.copyTo(Matrix$1.shared);return P.scale(A.texture.frame.width,A.texture.frame.height),C.setTransform(P),C}return warn("FillStyle not recognised",A),"red"}function resolveCharacters(A){if(A==="")return[];typeof A=="string"&&(A=[A]);const _=[];for(let T=0,E=A.length;T<E;T++){const C=A[T];if(Array.isArray(C)){if(C.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${C.length}.`);if(C[0].length===0||C[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const P=C[0].charCodeAt(0),I=C[1].charCodeAt(0);if(I<P)throw new Error("[BitmapFont]: Invalid character range.");for(let F=P,R=I;F<=R;F++)_.push(String.fromCharCode(F))}else _.push(...Array.from(C))}if(_.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return _}const _DynamicBitmapFont=class Er extends AbstractBitmapFont{constructor(_){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const T={...Er.defaultOptions,..._};this._textureSize=T.textureSize,this._mipmap=T.mipmap;const E=T.style.clone();T.overrideFill&&(E._fill.color=16777215,E._fill.alpha=1,E._fill.texture=Texture$1.WHITE,E._fill.fill=null),this.applyFillAsTint=T.overrideFill;const C=E.fontSize;E.fontSize=this.baseMeasurementFontSize;const P=fontStringFromTextStyle(E);T.overrideSize?E._stroke&&(E._stroke.width*=this.baseRenderedFontSize/C):E.fontSize=this.baseRenderedFontSize=C,this._style=E,this._skipKerning=T.skipKerning??!1,this.resolution=T.resolution??1,this._padding=T.padding??4,this.fontMetrics=CanvasTextMetrics.measureFont(P),this.lineHeight=E.lineHeight||this.fontMetrics.fontSize||E.fontSize}ensureCharacters(_){var X,z;const T=resolveCharacters(_).filter(Y=>!this._currentChars.includes(Y)).filter((Y,W,q)=>q.indexOf(Y)===W);if(!T.length)return;this._currentChars=[...this._currentChars,...T];let E;this._currentPageIndex===-1?E=this._nextPage():E=this.pages[this._currentPageIndex];let{canvas:C,context:P}=E.canvasAndContext,I=E.texture.source;const F=this._style;let R=this._currentX,B=this._currentY;const O=this.baseRenderedFontSize/this.baseMeasurementFontSize,V=this._padding*O;let L=0,D=!1;const U=C.width/this.resolution,G=C.height/this.resolution;for(let Y=0;Y<T.length;Y++){const W=T[Y],q=CanvasTextMetrics.measureText(W,F,C,!1);q.lineHeight=q.height;const K=q.width*O,J=Math.ceil((F.fontStyle==="italic"?2:1)*K),Z=q.height*O,se=J+V*2,ae=Z+V*2;if(D=!1,W!==`
`&&W!=="\r"&&W!=="	"&&W!==" "&&(D=!0,L=Math.ceil(Math.max(ae,L))),R+se>U&&(B+=L,L=ae,R=0,B+L>G)){I.update();const ce=this._nextPage();C=ce.canvasAndContext.canvas,P=ce.canvasAndContext.context,I=ce.texture.source,B=0}const ue=K/O-(((X=F.dropShadow)==null?void 0:X.distance)??0)-(((z=F._stroke)==null?void 0:z.width)??0);if(this.chars[W]={id:W.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:ue,kerning:{}},D){this._drawGlyph(P,q,R+V,B+V,O,F);const ce=I.width*O,he=I.height*O,pe=new Rectangle$1(R/ce*I.width,B/he*I.height,se/ce*I.width,ae/he*I.height);this.chars[W].texture=new Texture$1({source:I,frame:pe}),R+=Math.ceil(se)}}I.update(),this._currentX=R,this._currentY=B,this._skipKerning&&this._applyKerning(T,P)}get pageTextures(){return deprecation$1(v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(_,T){const E=this._measureCache;for(let C=0;C<_.length;C++){const P=_[C];for(let I=0;I<this._currentChars.length;I++){const F=this._currentChars[I];let R=E[P];R||(R=E[P]=T.measureText(P).width);let B=E[F];B||(B=E[F]=T.measureText(F).width);let O=T.measureText(P+F).width,V=O-(R+B);V&&(this.chars[P].kerning[F]=V),O=T.measureText(P+F).width,V=O-(R+B),V&&(this.chars[F].kerning[P]=V)}}}_nextPage(){this._currentPageIndex++;const _=this.resolution,T=CanvasPool.getOptimalCanvasAndContext(this._textureSize,this._textureSize,_);this._setupContext(T.context,this._style,_);const E=_*(this.baseRenderedFontSize/this.baseMeasurementFontSize),C=new Texture$1({source:new ImageSource({resource:T.canvas,resolution:E,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),P={canvasAndContext:T,texture:C};return this.pages[this._currentPageIndex]=P,P}_setupContext(_,T,E){T.fontSize=this.baseRenderedFontSize,_.scale(E,E),_.font=fontStringFromTextStyle(T),T.fontSize=this.baseMeasurementFontSize,_.textBaseline=T.textBaseline;const C=T._stroke,P=(C==null?void 0:C.width)??0;if(C&&(_.lineWidth=P,_.lineJoin=C.join,_.miterLimit=C.miterLimit,_.strokeStyle=getCanvasFillStyle(C,_)),T._fill&&(_.fillStyle=getCanvasFillStyle(T._fill,_)),T.dropShadow){const I=T.dropShadow,F=Color$2.shared.setValue(I.color).toArray(),R=I.blur*E,B=I.distance*E;_.shadowColor=`rgba(${F[0]*255},${F[1]*255},${F[2]*255},${I.alpha})`,_.shadowBlur=R,_.shadowOffsetX=Math.cos(I.angle)*B,_.shadowOffsetY=Math.sin(I.angle)*B}else _.shadowColor="black",_.shadowBlur=0,_.shadowOffsetX=0,_.shadowOffsetY=0}_drawGlyph(_,T,E,C,P,I){const F=T.text,R=T.fontProperties,B=I._stroke,O=((B==null?void 0:B.width)??0)*P,V=E+O/2,L=C-O/2,D=R.descent*P,U=T.lineHeight*P;I.stroke&&O&&_.strokeText(F,V,L+U-D),I._fill&&_.fillText(F,V,L+U-D)}destroy(){super.destroy();for(let _=0;_<this.pages.length;_++){const{canvasAndContext:T,texture:E}=this.pages[_];CanvasPool.returnCanvasAndContext(T),E.destroy(!0)}this.pages=null}};_DynamicBitmapFont.defaultOptions={textureSize:512,style:new TextStyle,mipmap:!0};let DynamicBitmapFont=_DynamicBitmapFont;function getBitmapTextLayout(A,_,T,E){const C={width:0,height:0,offsetY:0,scale:_.fontSize/T.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};C.offsetY=T.baseLineOffset;let P=C.lines[0],I=null,F=!0;const R={width:0,start:0,index:0,positions:[],chars:[]},B=U=>{const G=P.width;for(let X=0;X<R.index;X++){const z=U.positions[X];P.chars.push(U.chars[X]),P.charPositions.push(z+G)}P.width+=U.width,F=!1,R.width=0,R.index=0,R.chars.length=0},O=()=>{let U=P.chars.length-1;if(E){let G=P.chars[U];for(;G===" ";)P.width-=T.chars[G].xAdvance,G=P.chars[--U]}C.width=Math.max(C.width,P.width),P={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},F=!0,C.lines.push(P),C.height+=T.lineHeight},V=T.baseMeasurementFontSize/_.fontSize,L=_.letterSpacing*V,D=_.wordWrapWidth*V;for(let U=0;U<A.length+1;U++){let G;const X=U===A.length;X||(G=A[U]);const z=T.chars[G]||T.chars[" "];if(/(?:\s)/.test(G)||G==="\r"||G===`
`||X){if(!F&&_.wordWrap&&P.width+R.width-L>D?(O(),B(R),X||P.charPositions.push(0)):(R.start=P.width,B(R),X||P.charPositions.push(0)),G==="\r"||G===`
`)P.width!==0&&O();else if(!X){const K=z.xAdvance+(z.kerning[I]||0)+L;P.width+=K,P.spaceWidth=K,P.spacesIndex.push(P.charPositions.length),P.chars.push(G)}}else{const q=z.kerning[I]||0,K=z.xAdvance+q+L;R.positions[R.index++]=R.width+q,R.chars.push(G),R.width+=K}I=G}return O(),_.align==="center"?alignCenter(C):_.align==="right"?alignRight(C):_.align==="justify"&&alignJustify(C),C}function alignCenter(A){for(let _=0;_<A.lines.length;_++){const T=A.lines[_],E=A.width/2-T.width/2;for(let C=0;C<T.charPositions.length;C++)T.charPositions[C]+=E}}function alignRight(A){for(let _=0;_<A.lines.length;_++){const T=A.lines[_],E=A.width-T.width;for(let C=0;C<T.charPositions.length;C++)T.charPositions[C]+=E}}function alignJustify(A){const _=A.width;for(let T=0;T<A.lines.length;T++){const E=A.lines[T];let C=0,P=E.spacesIndex[C++],I=0;const F=E.spacesIndex.length,B=(_-E.width)/F;for(let O=0;O<E.charPositions.length;O++)O===P&&(P=E.spacesIndex[C++],I+=B),E.charPositions[O]+=I}}let fontCount=0;class BitmapFontManagerClass{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(_,T){var I;let E=`${T.fontFamily}-bitmap`,C=!0;if(T._fill.fill&&!T._stroke)E+=T._fill.fill.styleKey,C=!1;else if(T._stroke||T.dropShadow){let F=T.styleKey;F=F.substring(0,F.lastIndexOf("-")),E=`${F}-bitmap`,C=!1}if(!Cache$1.has(E)){const F=new DynamicBitmapFont({style:T,overrideFill:C,overrideSize:!0,...this.defaultOptions});fontCount++,fontCount>50&&warn("BitmapText",`You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),F.once("destroy",()=>{fontCount--,Cache$1.remove(E)}),Cache$1.set(E,F)}const P=Cache$1.get(E);return(I=P.ensureCharacters)==null||I.call(P,_),P}getLayout(_,T,E=!0){const C=this.getFont(_,T);return getBitmapTextLayout([..._],T,C,E)}measureText(_,T,E=!0){return this.getLayout(_,T,E)}install(..._){var B,O,V,L;let T=_[0];typeof T=="string"&&(T={name:T,style:_[1],chars:(B=_[2])==null?void 0:B.chars,resolution:(O=_[2])==null?void 0:O.resolution,padding:(V=_[2])==null?void 0:V.padding,skipKerning:(L=_[2])==null?void 0:L.skipKerning},deprecation$1(v8_0_0,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const E=T==null?void 0:T.name;if(!E)throw new Error("[BitmapFontManager] Property `name` is required.");T={...this.defaultOptions,...T};const C=T.style,P=C instanceof TextStyle?C:new TextStyle(C),I=P._fill.fill!==null&&P._fill.fill!==void 0,F=new DynamicBitmapFont({style:P,overrideFill:I,skipKerning:T.skipKerning,padding:T.padding,resolution:T.resolution,overrideSize:!1}),R=resolveCharacters(T.chars);return F.ensureCharacters(R.join("")),Cache$1.set(`${E}-bitmap`,F),F.once("destroy",()=>Cache$1.remove(`${E}-bitmap`)),F}uninstall(_){const T=`${_}-bitmap`,E=Cache$1.get(T);E&&E.destroy()}}const BitmapFontManager=new BitmapFontManagerClass;class BitmapFont extends AbstractBitmapFont{constructor(_,T){super();const{textures:E,data:C}=_;Object.keys(C.pages).forEach(P=>{const I=C.pages[parseInt(P,10)],F=E[I.id];this.pages.push({texture:F})}),Object.keys(C.chars).forEach(P=>{const I=C.chars[P],{frame:F,source:R}=E[I.page],B=new Rectangle$1(I.x+F.x,I.y+F.y,I.width,I.height),O=new Texture$1({source:R,frame:B});this.chars[P]={id:P.codePointAt(0),xOffset:I.xOffset,yOffset:I.yOffset,xAdvance:I.xAdvance,kerning:I.kerning??{},texture:O}}),this.baseRenderedFontSize=C.fontSize,this.baseMeasurementFontSize=C.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:C.fontSize},this.baseLineOffset=C.baseLineOffset,this.lineHeight=C.lineHeight,this.fontFamily=C.fontFamily,this.distanceField=C.distanceField??{type:"none",range:0},this.url=T}destroy(){super.destroy();for(let _=0;_<this.pages.length;_++){const{texture:T}=this.pages[_];T.destroy(!0)}this.pages=null}static install(_){BitmapFontManager.install(_)}static uninstall(_){BitmapFontManager.uninstall(_)}}const bitmapFontTextParser={test(A){return typeof A=="string"&&A.startsWith("info face=")},parse(A){const _=A.match(/^[a-z]+\s+.+$/gm),T={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const V in _){const L=_[V].match(/^[a-z]+/gm)[0],D=_[V].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),U={};for(const G in D){const X=D[G].split("="),z=X[0],Y=X[1].replace(/"/gm,""),W=parseFloat(Y),q=isNaN(W)?Y:W;U[z]=q}T[L].push(U)}const E={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[C]=T.info,[P]=T.common,[I]=T.distanceField??[];I&&(E.distanceField={range:parseInt(I.distanceRange,10),type:I.fieldType}),E.fontSize=parseInt(C.size,10),E.fontFamily=C.face,E.lineHeight=parseInt(P.lineHeight,10);const F=T.page;for(let V=0;V<F.length;V++)E.pages.push({id:parseInt(F[V].id,10)||0,file:F[V].file});const R={};E.baseLineOffset=E.lineHeight-parseInt(P.base,10);const B=T.char;for(let V=0;V<B.length;V++){const L=B[V],D=parseInt(L.id,10);let U=L.letter??L.char??String.fromCharCode(D);U==="space"&&(U=" "),R[D]=U,E.chars[U]={id:D,page:parseInt(L.page,10)||0,x:parseInt(L.x,10),y:parseInt(L.y,10),width:parseInt(L.width,10),height:parseInt(L.height,10),xOffset:parseInt(L.xoffset,10),yOffset:parseInt(L.yoffset,10),xAdvance:parseInt(L.xadvance,10),kerning:{}}}const O=T.kerning||[];for(let V=0;V<O.length;V++){const L=parseInt(O[V].first,10),D=parseInt(O[V].second,10),U=parseInt(O[V].amount,10);E.chars[R[D]].kerning[R[L]]=U}return E}},bitmapFontXMLParser={test(A){const _=A;return typeof _!="string"&&"getElementsByTagName"in _&&_.getElementsByTagName("page").length&&_.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(A){const _={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},T=A.getElementsByTagName("info")[0],E=A.getElementsByTagName("common")[0],C=A.getElementsByTagName("distanceField")[0];C&&(_.distanceField={type:C.getAttribute("fieldType"),range:parseInt(C.getAttribute("distanceRange"),10)});const P=A.getElementsByTagName("page"),I=A.getElementsByTagName("char"),F=A.getElementsByTagName("kerning");_.fontSize=parseInt(T.getAttribute("size"),10),_.fontFamily=T.getAttribute("face"),_.lineHeight=parseInt(E.getAttribute("lineHeight"),10);for(let B=0;B<P.length;B++)_.pages.push({id:parseInt(P[B].getAttribute("id"),10)||0,file:P[B].getAttribute("file")});const R={};_.baseLineOffset=_.lineHeight-parseInt(E.getAttribute("base"),10);for(let B=0;B<I.length;B++){const O=I[B],V=parseInt(O.getAttribute("id"),10);let L=O.getAttribute("letter")??O.getAttribute("char")??String.fromCharCode(V);L==="space"&&(L=" "),R[V]=L,_.chars[L]={id:V,page:parseInt(O.getAttribute("page"),10)||0,x:parseInt(O.getAttribute("x"),10),y:parseInt(O.getAttribute("y"),10),width:parseInt(O.getAttribute("width"),10),height:parseInt(O.getAttribute("height"),10),xOffset:parseInt(O.getAttribute("xoffset"),10),yOffset:parseInt(O.getAttribute("yoffset"),10),xAdvance:parseInt(O.getAttribute("xadvance"),10),kerning:{}}}for(let B=0;B<F.length;B++){const O=parseInt(F[B].getAttribute("first"),10),V=parseInt(F[B].getAttribute("second"),10),L=parseInt(F[B].getAttribute("amount"),10);_.chars[R[V]].kerning[R[O]]=L}return _}},bitmapFontXMLStringParser={test(A){return typeof A=="string"&&A.includes("<font>")?bitmapFontXMLParser.test(DOMAdapter.get().parseXML(A)):!1},parse(A){return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(A))}},validExtensions=[".xml",".fnt"],bitmapFontCachePlugin={extension:{type:ExtensionType$1.CacheParser,name:"cacheBitmapFont"},test:A=>A instanceof BitmapFont,getCacheableAssets(A,_){const T={};return A.forEach(E=>{T[E]=_,T[`${E}-bitmap`]=_}),T[`${_.fontFamily}-bitmap`]=_,T}},loadBitmapFont={extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.Normal},name:"loadBitmapFont",test(A){return validExtensions.includes(path$1.extname(A).toLowerCase())},async testParse(A){return bitmapFontTextParser.test(A)||bitmapFontXMLStringParser.test(A)},async parse(A,_,T){const E=bitmapFontTextParser.test(A)?bitmapFontTextParser.parse(A):bitmapFontXMLStringParser.parse(A),{src:C}=_,{pages:P}=E,I=[],F=E.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let V=0;V<P.length;++V){const L=P[V].file;let D=path$1.join(path$1.dirname(C),L);D=copySearchParams(D,C),I.push({src:D,data:F})}const R=await T.load(I),B=I.map(V=>R[V.src]);return new BitmapFont({data:E,textures:B},C)},async load(A,_){return await(await DOMAdapter.get().fetch(A)).text()},async unload(A,_,T){await Promise.all(A.pages.map(E=>T.unload(E.texture.source._sourceOrigin))),A.destroy()}};let BackgroundLoader$1=class{constructor(_,T=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=T}add(_){_.forEach(T=>{this._assetList.push(T)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],T=Math.min(this._assetList.length,this._maxConcurrent);for(let E=0;E<T;E++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}};const cacheTextureArray$1={extension:{type:ExtensionType$1.CacheParser,name:"cacheTextureArray"},test:A=>Array.isArray(A)&&A.every(_=>_ instanceof Texture$1),getCacheableAssets:(A,_)=>{const T={};return A.forEach(E=>{_.forEach((C,P)=>{T[E+(P===0?"":P+1)]=C})}),T}};async function testImageFormat$1(A){if("Image"in globalThis)return new Promise(_=>{const T=new Image;T.onload=()=>{_(!0)},T.onerror=()=>{_(!1)},T.src=A});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(A)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif$1={extension:{type:ExtensionType$1.DetectionParser,priority:1},test:async()=>testImageFormat$1("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async A=>[...A,"avif"],remove:async A=>A.filter(_=>_!=="avif")},imageFormats$1=["png","jpg","jpeg"],detectDefaults$1={extension:{type:ExtensionType$1.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async A=>[...A,...imageFormats$1],remove:async A=>A.filter(_=>!imageFormats$1.includes(_))},inWorker$1="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat$1(A){return inWorker$1?!1:document.createElement("video").canPlayType(A)!==""}const detectMp4$1={extension:{type:ExtensionType$1.DetectionParser,priority:0},test:async()=>testVideoFormat$1("video/mp4"),add:async A=>[...A,"mp4","m4v"],remove:async A=>A.filter(_=>_!=="mp4"&&_!=="m4v")},detectOgv$1={extension:{type:ExtensionType$1.DetectionParser,priority:0},test:async()=>testVideoFormat$1("video/ogg"),add:async A=>[...A,"ogv"],remove:async A=>A.filter(_=>_!=="ogv")},detectWebm$1={extension:{type:ExtensionType$1.DetectionParser,priority:0},test:async()=>testVideoFormat$1("video/webm"),add:async A=>[...A,"webm"],remove:async A=>A.filter(_=>_!=="webm")},detectWebp$1={extension:{type:ExtensionType$1.DetectionParser,priority:0},test:async()=>testImageFormat$1("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async A=>[...A,"webp"],remove:async A=>A.filter(_=>_!=="webp")};let Loader$1=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,T,E)=>(this._parsersValidated=!1,_[T]=E,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,T){const E={promise:null,parser:null};return E.promise=(async()=>{var I,F;let C=null,P=null;if(T.loadParser&&(P=this._parserHash[T.loadParser],P||warn(`[Assets] specified load parser "${T.loadParser}" not found while loading ${_}`)),!P){for(let R=0;R<this.parsers.length;R++){const B=this.parsers[R];if(B.load&&((I=B.test)!=null&&I.call(B,_,T,this))){P=B;break}}if(!P)return warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}C=await P.load(_,T,this),E.parser=P;for(let R=0;R<this.parsers.length;R++){const B=this.parsers[R];B.parse&&B.parse&&await((F=B.testParse)==null?void 0:F.call(B,C,T,this))&&(C=await B.parse(C,T,this)||C,E.parser=B)}return C})(),E}async load(_,T){this._parsersValidated||this._validateParsers();let E=0;const C={},P=isSingleItem$1(_),I=convertToList$1(_,B=>({alias:[B],src:B,data:{}})),F=I.length,R=I.map(async B=>{const O=path$1.toAbsolute(B.src);if(!C[B.src])try{this.promiseCache[O]||(this.promiseCache[O]=this._getLoadPromiseAndParser(O,B)),C[B.src]=await this.promiseCache[O].promise,T&&T(++E/F)}catch(V){throw delete this.promiseCache[O],delete C[B.src],new Error(`[Loader.load] Failed to load ${O}.
${V}`)}});return await Promise.all(R),P?C[I[0].src]:C}async unload(_){const E=convertToList$1(_,C=>({alias:[C],src:C})).map(async C=>{var F,R;const P=path$1.toAbsolute(C.src),I=this.promiseCache[P];if(I){const B=await I.promise;delete this.promiseCache[P],await((R=(F=I.parser)==null?void 0:F.unload)==null?void 0:R.call(F,B,C,this))}});await Promise.all(E)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,T)=>(T.name?_[T.name]&&warn(`[Assets] loadParser name conflict "${T.name}"`):warn("[Assets] loadParser should have a name"),{..._,[T.name]:T}),{})}};function checkDataUrl$1(A,_){if(Array.isArray(_)){for(const T of _)if(A.startsWith(`data:${T}`))return!0;return!1}return A.startsWith(`data:${_}`)}function checkExtension$1(A,_){const T=A.split("?")[0],E=path$1.extname(T).toLowerCase();return Array.isArray(_)?_.includes(E):E===_}const validJSONExtension$1=".json",validJSONMIME$1="application/json",loadJson$1={extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.Low},name:"loadJson",test(A){return checkDataUrl$1(A,validJSONMIME$1)||checkExtension$1(A,validJSONExtension$1)},async load(A){return await(await DOMAdapter.get().fetch(A)).json()}},validTXTExtension$1=".txt",validTXTMIME$1="text/plain",loadTxt$1={name:"loadTxt",extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.Low,name:"loadTxt"},test(A){return checkDataUrl$1(A,validTXTMIME$1)||checkExtension$1(A,validTXTExtension$1)},async load(A){return await(await DOMAdapter.get().fetch(A)).text()}},validWeights$1=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions$1=[".ttf",".otf",".woff",".woff2"],validFontMIMEs$1=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX$1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName$1(A){const _=path$1.extname(A),C=path$1.basename(A,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(F=>F.charAt(0).toUpperCase()+F.slice(1));let P=C.length>0;for(const F of C)if(!F.match(CSS_IDENT_TOKEN_REGEX$1)){P=!1;break}let I=C.join(" ");return P||(I=`"${I.replace(/[\\"]/g,"\\$&")}"`),I}const validURICharactersRegex$1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded$1(A){return validURICharactersRegex$1.test(A)?A:encodeURI(A)}const loadWebFont$1={extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.Low},name:"loadWebFont",test(A){return checkDataUrl$1(A,validFontMIMEs$1)||checkExtension$1(A,validFontExtensions$1)},async load(A,_){var E,C,P;const T=DOMAdapter.get().getFontFaceSet();if(T){const I=[],F=((E=_.data)==null?void 0:E.family)??getFontFamilyName$1(A),R=((P=(C=_.data)==null?void 0:C.weights)==null?void 0:P.filter(O=>validWeights$1.includes(O)))??["normal"],B=_.data??{};for(let O=0;O<R.length;O++){const V=R[O],L=new FontFace(F,`url(${encodeURIWhenNeeded$1(A)})`,{...B,weight:V});await L.load(),T.add(L),I.push(L)}return Cache$1.set(`${F}-and-url`,{url:A,fontFaces:I}),I.length===1?I[0]:I}return warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(A){(Array.isArray(A)?A:[A]).forEach(_=>{Cache$1.remove(`${_.family}-and-url`),DOMAdapter.get().getFontFaceSet().delete(_)})}};function getResolutionOfUrl$1(A,_=1){var E;const T=(E=Resolver$1.RETINA_PREFIX)==null?void 0:E.exec(A);return T?parseFloat(T[1]):_}function createTexture$1(A,_,T){A.label=T,A._sourceOrigin=T;const E=new Texture$1({source:A,label:T}),C=()=>{delete _.promiseCache[T],Cache$1.has(T)&&Cache$1.remove(T)};return E.source.once("destroy",()=>{_.promiseCache[T]&&(warn("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),C())}),E.once("destroy",()=>{A.destroyed||(warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),C())}),E}const validSVGExtension$1=".svg",validSVGMIME$1="image/svg+xml",loadSvg={extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(A){return checkDataUrl$1(A,validSVGMIME$1)||checkExtension$1(A,validSVGExtension$1)},async load(A,_,T){var E;return((E=_.data)==null?void 0:E.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?loadAsGraphics(A):loadAsTexture(A,_,T,this.config.crossOrigin)},unload(A){A.destroy(!0)}};async function loadAsTexture(A,_,T,E){var X,z,Y;const P=await(await DOMAdapter.get().fetch(A)).blob(),I=URL.createObjectURL(P),F=new Image;F.src=I,F.crossOrigin=E,await F.decode(),URL.revokeObjectURL(I);const R=document.createElement("canvas"),B=R.getContext("2d"),O=((X=_.data)==null?void 0:X.resolution)||getResolutionOfUrl$1(A),V=((z=_.data)==null?void 0:z.width)??F.width,L=((Y=_.data)==null?void 0:Y.height)??F.height;R.width=V*O,R.height=L*O,B.drawImage(F,0,0,V*O,L*O);const{parseAsGraphicsContext:D,...U}=_.data??{},G=new ImageSource({resource:R,alphaMode:"premultiply-alpha-on-upload",resolution:O,...U});return createTexture$1(G,T,A)}async function loadAsGraphics(A){const T=await(await DOMAdapter.get().fetch(A)).text(),E=new GraphicsContext;return E.svg(T),E}const WORKER_CODE$3=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let WORKER_URL$3=null,WorkerInstance$3=class{constructor(){WORKER_URL$3||(WORKER_URL$3=URL.createObjectURL(new Blob([WORKER_CODE$3],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$3)}};WorkerInstance$3.revokeObjectURL=function(){WORKER_URL$3&&(URL.revokeObjectURL(WORKER_URL$3),WORKER_URL$3=null)};const WORKER_CODE$2=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let WORKER_URL$2=null,WorkerInstance$2=class{constructor(){WORKER_URL$2||(WORKER_URL$2=URL.createObjectURL(new Blob([WORKER_CODE$2],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$2)}};WorkerInstance$2.revokeObjectURL=function(){WORKER_URL$2&&(URL.revokeObjectURL(WORKER_URL$2),WORKER_URL$2=null)};let UUID$1=0,MAX_WORKERS$1,WorkerManagerClass$1=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const{worker:T}=new WorkerInstance$3;T.addEventListener("message",E=>{T.terminate(),WorkerInstance$3.revokeObjectURL(),_(E.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_,T){var E;return this._run("loadImageBitmap",[_,(E=T==null?void 0:T.data)==null?void 0:E.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){MAX_WORKERS$1===void 0&&(MAX_WORKERS$1=navigator.hardwareConcurrency||4);let _=this._workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS$1&&(this._createdWorkers++,_=new WorkerInstance$2().worker,_.addEventListener("message",T=>{this._complete(T.data),this._returnWorker(T.target),this._next()})),_}_returnWorker(_){this._workerPool.push(_)}_complete(_){_.error!==void 0?this._resolveHash[_.uuid].reject(_.error):this._resolveHash[_.uuid].resolve(_.data),this._resolveHash[_.uuid]=null}async _run(_,T){await this._initWorkers();const E=new Promise((C,P)=>{this._queue.push({id:_,arguments:T,resolve:C,reject:P})});return this._next(),E}_next(){if(!this._queue.length)return;const _=this._getWorker();if(!_)return;const T=this._queue.pop(),E=T.id;this._resolveHash[UUID$1]={resolve:T.resolve,reject:T.reject},_.postMessage({data:T.arguments,uuid:UUID$1++,id:E})}};const WorkerManager$1=new WorkerManagerClass$1,validImageExtensions$1=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs$1=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap$1(A,_){var C;const T=await DOMAdapter.get().fetch(A);if(!T.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${A}: ${T.status} ${T.statusText}`);const E=await T.blob();return((C=_==null?void 0:_.data)==null?void 0:C.alphaMode)==="premultiplied-alpha"?createImageBitmap(E,{premultiplyAlpha:"none"}):createImageBitmap(E)}const loadTextures$1={name:"loadTextures",extension:{type:ExtensionType$1.LoadParser,priority:LoaderParserPriority$1.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(A){return checkDataUrl$1(A,validImageMIMEs$1)||checkExtension$1(A,validImageExtensions$1)},async load(A,_,T){var P;let E=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await WorkerManager$1.isImageBitmapSupported()?E=await WorkerManager$1.loadImageBitmap(A,_):E=await loadImageBitmap$1(A,_):E=await new Promise((I,F)=>{E=new Image,E.crossOrigin=this.config.crossOrigin,E.src=A,E.complete?I(E):(E.onload=()=>{I(E)},E.onerror=F)});const C=new ImageSource({resource:E,alphaMode:"premultiply-alpha-on-upload",resolution:((P=_.data)==null?void 0:P.resolution)||getResolutionOfUrl$1(A),..._.data});return createTexture$1(C,T,A)},unload(A){A.destroy(!0)}},validVideoExtensions$1=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],validVideoMIMEs$1=validVideoExtensions$1.map(A=>`video/${A.substring(1)}`);function crossOrigin(A,_,T){T===void 0&&!_.startsWith("data:")?A.crossOrigin=determineCrossOrigin$1(_):T!==!1&&(A.crossOrigin=typeof T=="string"?T:"anonymous")}function preloadVideo(A){return new Promise((_,T)=>{A.addEventListener("canplaythrough",E),A.addEventListener("error",C),A.load();function E(){P(),_()}function C(I){P(),T(I)}function P(){A.removeEventListener("canplaythrough",E),A.removeEventListener("error",C)}})}function determineCrossOrigin$1(A,_=globalThis.location){if(A.startsWith("data:"))return"";_||(_=globalThis.location);const T=new URL(A,document.baseURI);return T.hostname!==_.hostname||T.port!==_.port||T.protocol!==_.protocol?"anonymous":""}const loadVideoTextures={name:"loadVideo",extension:{type:ExtensionType$1.LoadParser,name:"loadVideo"},test(A){const _=checkDataUrl$1(A,validVideoMIMEs$1),T=checkExtension$1(A,validVideoExtensions$1);return _||T},async load(A,_,T){var R,B;const E={...VideoSource.defaultOptions,resolution:((R=_.data)==null?void 0:R.resolution)||getResolutionOfUrl$1(A),alphaMode:((B=_.data)==null?void 0:B.alphaMode)||await detectVideoAlphaMode$1(),..._.data},C=document.createElement("video"),P={preload:E.autoLoad!==!1?"auto":void 0,"webkit-playsinline":E.playsinline!==!1?"":void 0,playsinline:E.playsinline!==!1?"":void 0,muted:E.muted===!0?"":void 0,loop:E.loop===!0?"":void 0,autoplay:E.autoPlay!==!1?"":void 0};Object.keys(P).forEach(O=>{const V=P[O];V!==void 0&&C.setAttribute(O,V)}),E.muted===!0&&(C.muted=!0),crossOrigin(C,A,E.crossorigin);const I=document.createElement("source");let F;if(A.startsWith("data:"))F=A.slice(5,A.indexOf(";"));else if(!A.startsWith("blob:")){const O=A.split("?")[0].slice(A.lastIndexOf(".")+1).toLowerCase();F=VideoSource.MIME_TYPES[O]||`video/${O}`}return I.src=A,F&&(I.type=F),new Promise(O=>{const V=async()=>{const L=new VideoSource({...E,resource:C});C.removeEventListener("canplay",V),_.data.preload&&await preloadVideo(C),O(createTexture$1(L,T,A))};C.addEventListener("canplay",V),C.appendChild(I)})},unload(A){A.destroy(!0)}},resolveTextureUrl$1={extension:{type:ExtensionType$1.ResolveParser,name:"resolveTexture"},test:loadTextures$1.test,parse:A=>{var _;return{resolution:parseFloat(((_=Resolver$1.RETINA_PREFIX.exec(A))==null?void 0:_[1])??"1"),format:A.split(".").pop(),src:A}}},resolveJsonUrl={extension:{type:ExtensionType$1.ResolveParser,priority:-2,name:"resolveJson"},test:A=>Resolver$1.RETINA_PREFIX.test(A)&&A.endsWith(".json"),parse:resolveTextureUrl$1.parse};let AssetsClass$1=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver$1,this.loader=new Loader$1,this.cache=Cache$1,this._backgroundLoader=new BackgroundLoader$1(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var P,I;if(this._initialized){warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let F=_.manifest;typeof F=="string"&&(F=await this.load(F)),this.resolver.addManifest(F)}const T=((P=_.texturePreference)==null?void 0:P.resolution)??1,E=typeof T=="number"?[T]:T,C=await this._detectFormats({preferredFormats:(I=_.texturePreference)==null?void 0:I.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:C,resolution:E}}),_.preferences&&this.setPreferences(_.preferences)}add(_){this.resolver.add(_)}async load(_,T){this._initialized||await this.init();const E=isSingleItem$1(_),C=convertToList$1(_).map(F=>{if(typeof F!="string"){const R=this.resolver.getAlias(F);return R.some(B=>!this.resolver.hasKey(B))&&this.add(F),Array.isArray(R)?R[0]:R}return this.resolver.hasKey(F)||this.add({alias:F,src:F}),F}),P=this.resolver.resolve(C),I=await this._mapLoadToResolve(P,T);return E?I[C[0]]:I}addBundle(_,T){this.resolver.addBundle(_,T)}async loadBundle(_,T){this._initialized||await this.init();let E=!1;typeof _=="string"&&(E=!0,_=[_]);const C=this.resolver.resolveBundle(_),P={},I=Object.keys(C);let F=0,R=0;const B=()=>{T==null||T(++F/R)},O=I.map(V=>{const L=C[V];return R+=Object.keys(L).length,this._mapLoadToResolve(L,B).then(D=>{P[V]=D})});return await Promise.all(O),E?P[_[0]]:P}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const T=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(T))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const T=this.resolver.resolveBundle(_);Object.values(T).forEach(E=>{this._backgroundLoader.add(Object.values(E))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache$1.get(_);const T={};for(let E=0;E<_.length;E++)T[E]=Cache$1.get(_[E]);return T}async _mapLoadToResolve(_,T){const E=[...new Set(Object.values(_))];this._backgroundLoader.active=!1;const C=await this.loader.load(E,T);this._backgroundLoader.active=!0;const P={};return E.forEach(I=>{const F=C[I.src],R=[I.src];I.alias&&R.push(...I.alias),R.forEach(B=>{P[B]=F}),Cache$1.set(R,F)}),P}async unload(_){this._initialized||await this.init();const T=convertToList$1(_).map(C=>typeof C!="string"?C.src:C),E=this.resolver.resolve(T);await this._unloadFromResolved(E)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList$1(_);const T=this.resolver.resolveBundle(_),E=Object.keys(T).map(C=>this._unloadFromResolved(T[C]));await Promise.all(E)}async _unloadFromResolved(_){const T=Object.values(_);T.forEach(E=>{Cache$1.remove(E.src)}),await this.loader.unload(T)}async _detectFormats(_){let T=[];_.preferredFormats&&(T=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const E of _.detections)_.skipDetections||await E.test()?T=await E.add(T):_.skipDetections||(T=await E.remove(T));return T=T.filter((E,C)=>T.indexOf(E)===C),T}get detections(){return this._detections}setPreferences(_){this.loader.parsers.forEach(T=>{T.config&&Object.keys(T.config).filter(E=>E in _).forEach(E=>{T.config[E]=_[E]})})}};const Assets$1=new AssetsClass$1;extensions$1.handleByList(ExtensionType$1.LoadParser,Assets$1.loader.parsers).handleByList(ExtensionType$1.ResolveParser,Assets$1.resolver.parsers).handleByList(ExtensionType$1.CacheParser,Assets$1.cache.parsers).handleByList(ExtensionType$1.DetectionParser,Assets$1.detections);extensions$1.add(cacheTextureArray$1,detectDefaults$1,detectAvif$1,detectWebp$1,detectMp4$1,detectOgv$1,detectWebm$1,loadJson$1,loadTxt$1,loadWebFont$1,loadSvg,loadTextures$1,loadVideoTextures,loadBitmapFont,bitmapFontCachePlugin,resolveTextureUrl$1,resolveJsonUrl);const assetKeyMap$1={loader:ExtensionType$1.LoadParser,resolver:ExtensionType$1.ResolveParser,cache:ExtensionType$1.CacheParser,detection:ExtensionType$1.DetectionParser};extensions$1.handle(ExtensionType$1.Asset,A=>{const _=A.ref;Object.entries(assetKeyMap$1).filter(([T])=>!!_[T]).forEach(([T,E])=>extensions$1.add(Object.assign(_[T],{extension:_[T].extension??E})))},A=>{const _=A.ref;Object.keys(assetKeyMap$1).filter(T=>!!_[T]).forEach(T=>extensions$1.remove(_[T]))});extensions$1.add(browserExt,webworkerExt);var AttachmentType=(A=>(A[A.Region=0]="Region",A[A.BoundingBox=1]="BoundingBox",A[A.Mesh=2]="Mesh",A[A.LinkedMesh=3]="LinkedMesh",A[A.Path=4]="Path",A[A.Point=5]="Point",A[A.Clipping=6]="Clipping",A))(AttachmentType||{});class BinaryInput{constructor(_,T=new Array,E=0,C=new DataView(_.buffer)){this.strings=T,this.index=E,this.buffer=C}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const _=this.buffer.getInt16(this.index);return this.index+=2,_}readInt32(){const _=this.buffer.getInt32(this.index);return this.index+=4,_}readInt(_){let T=this.readByte(),E=T&127;return(T&128)!=0&&(T=this.readByte(),E|=(T&127)<<7,(T&128)!=0&&(T=this.readByte(),E|=(T&127)<<14,(T&128)!=0&&(T=this.readByte(),E|=(T&127)<<21,(T&128)!=0&&(T=this.readByte(),E|=(T&127)<<28)))),_?E:E>>>1^-(E&1)}readStringRef(){const _=this.readInt(!0);return _==0?null:this.strings[_-1]}readString(){let _=this.readInt(!0);switch(_){case 0:return null;case 1:return""}_--;let T="";for(let E=0;E<_;){const C=this.readUnsignedByte();switch(C>>4){case 12:case 13:T+=String.fromCharCode((C&31)<<6|this.readByte()&63),E+=2;break;case 14:T+=String.fromCharCode((C&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),E+=3;break;default:T+=String.fromCharCode(C),E++}}return T}readFloat(){const _=this.buffer.getFloat32(this.index);return this.index+=4,_}readBoolean(){return this.readByte()!=0}}var MixBlend=(A=>(A[A.setup=0]="setup",A[A.first=1]="first",A[A.replace=2]="replace",A[A.add=3]="add",A))(MixBlend||{}),MixDirection=(A=>(A[A.mixIn=0]="mixIn",A[A.mixOut=1]="mixOut",A))(MixDirection||{}),PositionMode=(A=>(A[A.Fixed=0]="Fixed",A[A.Percent=1]="Percent",A))(PositionMode||{}),RotateMode=(A=>(A[A.Tangent=0]="Tangent",A[A.Chain=1]="Chain",A[A.ChainScale=2]="ChainScale",A))(RotateMode||{}),TransformMode=(A=>(A[A.Normal=0]="Normal",A[A.OnlyTranslation=1]="OnlyTranslation",A[A.NoRotationOrReflection=2]="NoRotationOrReflection",A[A.NoScale=3]="NoScale",A[A.NoScaleOrReflection=4]="NoScaleOrReflection",A))(TransformMode||{}),ENV=(A=>(A[A.WEBGL_LEGACY=0]="WEBGL_LEGACY",A[A.WEBGL=1]="WEBGL",A[A.WEBGL2=2]="WEBGL2",A))(ENV||{}),RENDERER_TYPE=(A=>(A[A.UNKNOWN=0]="UNKNOWN",A[A.WEBGL=1]="WEBGL",A[A.CANVAS=2]="CANVAS",A))(RENDERER_TYPE||{}),BUFFER_BITS=(A=>(A[A.COLOR=16384]="COLOR",A[A.DEPTH=256]="DEPTH",A[A.STENCIL=1024]="STENCIL",A))(BUFFER_BITS||{}),BLEND_MODES=(A=>(A[A.NORMAL=0]="NORMAL",A[A.ADD=1]="ADD",A[A.MULTIPLY=2]="MULTIPLY",A[A.SCREEN=3]="SCREEN",A[A.OVERLAY=4]="OVERLAY",A[A.DARKEN=5]="DARKEN",A[A.LIGHTEN=6]="LIGHTEN",A[A.COLOR_DODGE=7]="COLOR_DODGE",A[A.COLOR_BURN=8]="COLOR_BURN",A[A.HARD_LIGHT=9]="HARD_LIGHT",A[A.SOFT_LIGHT=10]="SOFT_LIGHT",A[A.DIFFERENCE=11]="DIFFERENCE",A[A.EXCLUSION=12]="EXCLUSION",A[A.HUE=13]="HUE",A[A.SATURATION=14]="SATURATION",A[A.COLOR=15]="COLOR",A[A.LUMINOSITY=16]="LUMINOSITY",A[A.NORMAL_NPM=17]="NORMAL_NPM",A[A.ADD_NPM=18]="ADD_NPM",A[A.SCREEN_NPM=19]="SCREEN_NPM",A[A.NONE=20]="NONE",A[A.SRC_OVER=0]="SRC_OVER",A[A.SRC_IN=21]="SRC_IN",A[A.SRC_OUT=22]="SRC_OUT",A[A.SRC_ATOP=23]="SRC_ATOP",A[A.DST_OVER=24]="DST_OVER",A[A.DST_IN=25]="DST_IN",A[A.DST_OUT=26]="DST_OUT",A[A.DST_ATOP=27]="DST_ATOP",A[A.ERASE=26]="ERASE",A[A.SUBTRACT=28]="SUBTRACT",A[A.XOR=29]="XOR",A))(BLEND_MODES||{}),DRAW_MODES=(A=>(A[A.POINTS=0]="POINTS",A[A.LINES=1]="LINES",A[A.LINE_LOOP=2]="LINE_LOOP",A[A.LINE_STRIP=3]="LINE_STRIP",A[A.TRIANGLES=4]="TRIANGLES",A[A.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",A[A.TRIANGLE_FAN=6]="TRIANGLE_FAN",A))(DRAW_MODES||{}),FORMATS=(A=>(A[A.RGBA=6408]="RGBA",A[A.RGB=6407]="RGB",A[A.RG=33319]="RG",A[A.RED=6403]="RED",A[A.RGBA_INTEGER=36249]="RGBA_INTEGER",A[A.RGB_INTEGER=36248]="RGB_INTEGER",A[A.RG_INTEGER=33320]="RG_INTEGER",A[A.RED_INTEGER=36244]="RED_INTEGER",A[A.ALPHA=6406]="ALPHA",A[A.LUMINANCE=6409]="LUMINANCE",A[A.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",A[A.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",A[A.DEPTH_STENCIL=34041]="DEPTH_STENCIL",A))(FORMATS||{}),TARGETS=(A=>(A[A.TEXTURE_2D=3553]="TEXTURE_2D",A[A.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",A[A.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",A[A.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",A[A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",A[A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",A[A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",A))(TARGETS||{}),TYPES=(A=>(A[A.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",A[A.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",A[A.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",A[A.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",A[A.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",A[A.UNSIGNED_INT=5125]="UNSIGNED_INT",A[A.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",A[A.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",A[A.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",A[A.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",A[A.BYTE=5120]="BYTE",A[A.SHORT=5122]="SHORT",A[A.INT=5124]="INT",A[A.FLOAT=5126]="FLOAT",A[A.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",A[A.HALF_FLOAT=36193]="HALF_FLOAT",A))(TYPES||{}),SAMPLER_TYPES=(A=>(A[A.FLOAT=0]="FLOAT",A[A.INT=1]="INT",A[A.UINT=2]="UINT",A))(SAMPLER_TYPES||{}),SCALE_MODES=(A=>(A[A.NEAREST=0]="NEAREST",A[A.LINEAR=1]="LINEAR",A))(SCALE_MODES||{}),WRAP_MODES=(A=>(A[A.CLAMP=33071]="CLAMP",A[A.REPEAT=10497]="REPEAT",A[A.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",A))(WRAP_MODES||{}),MIPMAP_MODES=(A=>(A[A.OFF=0]="OFF",A[A.POW2=1]="POW2",A[A.ON=2]="ON",A[A.ON_MANUAL=3]="ON_MANUAL",A))(MIPMAP_MODES||{}),ALPHA_MODES=(A=>(A[A.NPM=0]="NPM",A[A.UNPACK=1]="UNPACK",A[A.PMA=2]="PMA",A[A.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",A[A.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",A[A.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",A))(ALPHA_MODES||{}),CLEAR_MODES=(A=>(A[A.NO=0]="NO",A[A.YES=1]="YES",A[A.AUTO=2]="AUTO",A[A.BLEND=0]="BLEND",A[A.CLEAR=1]="CLEAR",A[A.BLIT=2]="BLIT",A))(CLEAR_MODES||{}),GC_MODES=(A=>(A[A.AUTO=0]="AUTO",A[A.MANUAL=1]="MANUAL",A))(GC_MODES||{}),PRECISION=(A=>(A.LOW="lowp",A.MEDIUM="mediump",A.HIGH="highp",A))(PRECISION||{}),MASK_TYPES=(A=>(A[A.NONE=0]="NONE",A[A.SCISSOR=1]="SCISSOR",A[A.STENCIL=2]="STENCIL",A[A.SPRITE=3]="SPRITE",A[A.COLOR=4]="COLOR",A))(MASK_TYPES||{}),MSAA_QUALITY=(A=>(A[A.NONE=0]="NONE",A[A.LOW=2]="LOW",A[A.MEDIUM=4]="MEDIUM",A[A.HIGH=8]="HIGH",A))(MSAA_QUALITY||{}),BUFFER_TYPE=(A=>(A[A.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",A[A.ARRAY_BUFFER=34962]="ARRAY_BUFFER",A[A.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",A))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(A,_)=>{const T=document.createElement("canvas");return T.width=A,T.height=_,T},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(A,_)=>fetch(A,_),parseXML:A=>new DOMParser().parseFromString(A,"text/xml")},settings$1={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings$1.RETINA_PREFIX=/@([0-9\.]+)x/;settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(A){var _=Object.prototype.hasOwnProperty,T="~";function E(){}Object.create&&(E.prototype=Object.create(null),new E().__proto__||(T=!1));function C(R,B,O){this.fn=R,this.context=B,this.once=O||!1}function P(R,B,O,V,L){if(typeof O!="function")throw new TypeError("The listener must be a function");var D=new C(O,V||R,L),U=T?T+B:B;return R._events[U]?R._events[U].fn?R._events[U]=[R._events[U],D]:R._events[U].push(D):(R._events[U]=D,R._eventsCount++),R}function I(R,B){--R._eventsCount===0?R._events=new E:delete R._events[B]}function F(){this._events=new E,this._eventsCount=0}F.prototype.eventNames=function(){var B=[],O,V;if(this._eventsCount===0)return B;for(V in O=this._events)_.call(O,V)&&B.push(T?V.slice(1):V);return Object.getOwnPropertySymbols?B.concat(Object.getOwnPropertySymbols(O)):B},F.prototype.listeners=function(B){var O=T?T+B:B,V=this._events[O];if(!V)return[];if(V.fn)return[V.fn];for(var L=0,D=V.length,U=new Array(D);L<D;L++)U[L]=V[L].fn;return U},F.prototype.listenerCount=function(B){var O=T?T+B:B,V=this._events[O];return V?V.fn?1:V.length:0},F.prototype.emit=function(B,O,V,L,D,U){var G=T?T+B:B;if(!this._events[G])return!1;var X=this._events[G],z=arguments.length,Y,W;if(X.fn){switch(X.once&&this.removeListener(B,X.fn,void 0,!0),z){case 1:return X.fn.call(X.context),!0;case 2:return X.fn.call(X.context,O),!0;case 3:return X.fn.call(X.context,O,V),!0;case 4:return X.fn.call(X.context,O,V,L),!0;case 5:return X.fn.call(X.context,O,V,L,D),!0;case 6:return X.fn.call(X.context,O,V,L,D,U),!0}for(W=1,Y=new Array(z-1);W<z;W++)Y[W-1]=arguments[W];X.fn.apply(X.context,Y)}else{var q=X.length,K;for(W=0;W<q;W++)switch(X[W].once&&this.removeListener(B,X[W].fn,void 0,!0),z){case 1:X[W].fn.call(X[W].context);break;case 2:X[W].fn.call(X[W].context,O);break;case 3:X[W].fn.call(X[W].context,O,V);break;case 4:X[W].fn.call(X[W].context,O,V,L);break;default:if(!Y)for(K=1,Y=new Array(z-1);K<z;K++)Y[K-1]=arguments[K];X[W].fn.apply(X[W].context,Y)}}return!0},F.prototype.on=function(B,O,V){return P(this,B,O,V,!1)},F.prototype.once=function(B,O,V){return P(this,B,O,V,!0)},F.prototype.removeListener=function(B,O,V,L){var D=T?T+B:B;if(!this._events[D])return this;if(!O)return I(this,D),this;var U=this._events[D];if(U.fn)U.fn===O&&(!L||U.once)&&(!V||U.context===V)&&I(this,D);else{for(var G=0,X=[],z=U.length;G<z;G++)(U[G].fn!==O||L&&!U[G].once||V&&U[G].context!==V)&&X.push(U[G]);X.length?this._events[D]=X.length===1?X[0]:X:I(this,D)}return this},F.prototype.removeAllListeners=function(B){var O;return B?(O=T?T+B:B,this._events[O]&&I(this,O)):(this._events=new E,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=T,F.EventEmitter=F,A.exports=F}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var url={},punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var punycode=punycode$1.exports,hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,function(A,_){(function(T){var E=_&&!_.nodeType&&_,C=A&&!A.nodeType&&A,P=typeof commonjsGlobal=="object"&&commonjsGlobal;(P.global===P||P.window===P||P.self===P)&&(T=P);var I,F=2147483647,R=36,B=1,O=26,V=38,L=700,D=72,U=128,G="-",X=/^xn--/,z=/[^\x20-\x7E]/,Y=/[\x2E\u3002\uFF0E\uFF61]/g,W={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=R-B,K=Math.floor,J=String.fromCharCode,Z;function se(ne){throw new RangeError(W[ne])}function ae(ne,ie){for(var fe=ne.length,me=[];fe--;)me[fe]=ie(ne[fe]);return me}function ue(ne,ie){var fe=ne.split("@"),me="";fe.length>1&&(me=fe[0]+"@",ne=fe[1]),ne=ne.replace(Y,".");var be=ne.split("."),Pe=ae(be,ie).join(".");return me+Pe}function ce(ne){for(var ie=[],fe=0,me=ne.length,be,Pe;fe<me;)be=ne.charCodeAt(fe++),be>=55296&&be<=56319&&fe<me?(Pe=ne.charCodeAt(fe++),(Pe&64512)==56320?ie.push(((be&1023)<<10)+(Pe&1023)+65536):(ie.push(be),fe--)):ie.push(be);return ie}function he(ne){return ae(ne,function(ie){var fe="";return ie>65535&&(ie-=65536,fe+=J(ie>>>10&1023|55296),ie=56320|ie&1023),fe+=J(ie),fe}).join("")}function pe(ne){return ne-48<10?ne-22:ne-65<26?ne-65:ne-97<26?ne-97:R}function ye(ne,ie){return ne+22+75*(ne<26)-((ie!=0)<<5)}function _e(ne,ie,fe){var me=0;for(ne=fe?K(ne/L):ne>>1,ne+=K(ne/ie);ne>q*O>>1;me+=R)ne=K(ne/q);return K(me+(q+1)*ne/(ne+V))}function ee(ne){var ie=[],fe=ne.length,me,be=0,Pe=U,Me=D,ge,Se,Ee,Ae,Ie,oe,le,de,ve;for(ge=ne.lastIndexOf(G),ge<0&&(ge=0),Se=0;Se<ge;++Se)ne.charCodeAt(Se)>=128&&se("not-basic"),ie.push(ne.charCodeAt(Se));for(Ee=ge>0?ge+1:0;Ee<fe;){for(Ae=be,Ie=1,oe=R;Ee>=fe&&se("invalid-input"),le=pe(ne.charCodeAt(Ee++)),(le>=R||le>K((F-be)/Ie))&&se("overflow"),be+=le*Ie,de=oe<=Me?B:oe>=Me+O?O:oe-Me,!(le<de);oe+=R)ve=R-de,Ie>K(F/ve)&&se("overflow"),Ie*=ve;me=ie.length+1,Me=_e(be-Ae,me,Ae==0),K(be/me)>F-Pe&&se("overflow"),Pe+=K(be/me),be%=me,ie.splice(be++,0,Pe)}return he(ie)}function re(ne){var ie,fe,me,be,Pe,Me,ge,Se,Ee,Ae,Ie,oe=[],le,de,ve,xe;for(ne=ce(ne),le=ne.length,ie=U,fe=0,Pe=D,Me=0;Me<le;++Me)Ie=ne[Me],Ie<128&&oe.push(J(Ie));for(me=be=oe.length,be&&oe.push(G);me<le;){for(ge=F,Me=0;Me<le;++Me)Ie=ne[Me],Ie>=ie&&Ie<ge&&(ge=Ie);for(de=me+1,ge-ie>K((F-fe)/de)&&se("overflow"),fe+=(ge-ie)*de,ie=ge,Me=0;Me<le;++Me)if(Ie=ne[Me],Ie<ie&&++fe>F&&se("overflow"),Ie==ie){for(Se=fe,Ee=R;Ae=Ee<=Pe?B:Ee>=Pe+O?O:Ee-Pe,!(Se<Ae);Ee+=R)xe=Se-Ae,ve=R-Ae,oe.push(J(ye(Ae+xe%ve,0))),Se=K(xe/ve);oe.push(J(ye(Se,0))),Pe=_e(fe,de,me==be),fe=0,++me}++fe,++ie}return oe.join("")}function Q(ne){return ue(ne,function(ie){return X.test(ie)?ee(ie.slice(4).toLowerCase()):ie})}function te(ne){return ue(ne,function(ie){return z.test(ie)?"xn--"+re(ie):ie})}if(I={version:"1.4.1",ucs2:{decode:ce,encode:he},decode:ee,encode:re,toASCII:te,toUnicode:Q},E&&C)if(A.exports==E)C.exports=I;else for(Z in I)I.hasOwnProperty(Z)&&(E[Z]=I[Z]);else T.punycode=I})(punycode)}(punycode$1,punycode$1.exports)),punycode$1.exports}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var A=typeof Map=="function"&&Map.prototype,_=Object.getOwnPropertyDescriptor&&A?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,T=A&&_&&typeof _.get=="function"?_.get:null,E=A&&Map.prototype.forEach,C=typeof Set=="function"&&Set.prototype,P=Object.getOwnPropertyDescriptor&&C?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,I=C&&P&&typeof P.get=="function"?P.get:null,F=C&&Set.prototype.forEach,R=typeof WeakMap=="function"&&WeakMap.prototype,B=R?WeakMap.prototype.has:null,O=typeof WeakSet=="function"&&WeakSet.prototype,V=O?WeakSet.prototype.has:null,L=typeof WeakRef=="function"&&WeakRef.prototype,D=L?WeakRef.prototype.deref:null,U=Boolean.prototype.valueOf,G=Object.prototype.toString,X=Function.prototype.toString,z=String.prototype.match,Y=String.prototype.slice,W=String.prototype.replace,q=String.prototype.toUpperCase,K=String.prototype.toLowerCase,J=RegExp.prototype.test,Z=Array.prototype.concat,se=Array.prototype.join,ae=Array.prototype.slice,ue=Math.floor,ce=typeof BigInt=="function"?BigInt.prototype.valueOf:null,he=Object.getOwnPropertySymbols,pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ye=typeof Symbol=="function"&&typeof Symbol.iterator=="object",_e=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ye||!0)?Symbol.toStringTag:null,ee=Object.prototype.propertyIsEnumerable,re=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Te){return Te.__proto__}:null);function Q(Te,we){if(Te===1/0||Te===-1/0||Te!==Te||Te&&Te>-1e3&&Te<1e3||J.call(/e/,we))return we;var ze=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Te=="number"){var Ye=Te<0?-ue(-Te):ue(Te);if(Ye!==Te){var Xe=String(Ye),Ue=Y.call(we,Xe.length+1);return W.call(Xe,ze,"$&_")+"."+W.call(W.call(Ue,/([0-9]{3})/g,"$&_"),/_$/,"")}}return W.call(we,ze,"$&_")}var te=require$$0,ne=te.custom,ie=de(ne)?ne:null,fe={__proto__:null,double:'"',single:"'"},me={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};objectInspect=function Te(we,ze,Ye,Xe){var Ue=ze||{};if(Ce(Ue,"quoteStyle")&&!Ce(fe,Ue.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ce(Ue,"maxStringLength")&&(typeof Ue.maxStringLength=="number"?Ue.maxStringLength<0&&Ue.maxStringLength!==1/0:Ue.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ht=Ce(Ue,"customInspect")?Ue.customInspect:!0;if(typeof ht!="boolean"&&ht!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ce(Ue,"indent")&&Ue.indent!==null&&Ue.indent!=="	"&&!(parseInt(Ue.indent,10)===Ue.indent&&Ue.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ce(Ue,"numericSeparator")&&typeof Ue.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var pt=Ue.numericSeparator;if(typeof we>"u")return"undefined";if(we===null)return"null";if(typeof we=="boolean")return we?"true":"false";if(typeof we=="string")return Ge(we,Ue);if(typeof we=="number"){if(we===0)return 1/0/we>0?"0":"-0";var Ze=String(we);return pt?Q(we,Ze):Ze}if(typeof we=="bigint"){var ct=String(we)+"n";return pt?Q(we,ct):ct}var Lt=typeof Ue.depth>"u"?5:Ue.depth;if(typeof Ye>"u"&&(Ye=0),Ye>=Lt&&Lt>0&&typeof we=="object")return ge(we)?"[Array]":"[Object]";var gt=ft(Ue,Ye);if(typeof Xe>"u")Xe=[];else if(Be(Xe,we)>=0)return"[Circular]";function rt(yt,Mt,Fr){if(Mt&&(Xe=ae.call(Xe),Xe.push(Mt)),Fr){var or={depth:Ue.depth};return Ce(Ue,"quoteStyle")&&(or.quoteStyle=Ue.quoteStyle),Te(yt,or,Ye+1,Xe)}return Te(yt,Ue,Ye+1,Xe)}if(typeof we=="function"&&!Ee(we)){var er=ke(we),tr=qe(we,rt);return"[Function"+(er?": "+er:" (anonymous)")+"]"+(tr.length>0?" { "+se.call(tr,", ")+" }":"")}if(de(we)){var rr=ye?W.call(String(we),/^(Symbol\(.*\))_[^)]*$/,"$1"):pe.call(we);return typeof we=="object"&&!ye?We(rr):rr}if(De(we)){for(var Tt="<"+K.call(String(we.nodeName)),Nt=we.attributes||[],Pt=0;Pt<Nt.length;Pt++)Tt+=" "+Nt[Pt].name+"="+be(Pe(Nt[Pt].value),"double",Ue);return Tt+=">",we.childNodes&&we.childNodes.length&&(Tt+="..."),Tt+="</"+K.call(String(we.nodeName))+">",Tt}if(ge(we)){if(we.length===0)return"[]";var Vt=qe(we,rt);return gt&&!et(Vt)?"["+mt(Vt,gt)+"]":"[ "+se.call(Vt,", ")+" ]"}if(Ae(we)){var Dt=qe(we,rt);return!("cause"in Error.prototype)&&"cause"in we&&!ee.call(we,"cause")?"{ ["+String(we)+"] "+se.call(Z.call("[cause]: "+rt(we.cause),Dt),", ")+" }":Dt.length===0?"["+String(we)+"]":"{ ["+String(we)+"] "+se.call(Dt,", ")+" }"}if(typeof we=="object"&&ht){if(ie&&typeof we[ie]=="function"&&te)return te(we,{depth:Lt-Ye});if(ht!=="symbol"&&typeof we.inspect=="function")return we.inspect()}if(Re(we)){var sr=[];return E&&E.call(we,function(yt,Mt){sr.push(rt(Mt,we,!0)+" => "+rt(yt,we))}),Ke("Map",T.call(we),sr,gt)}if(Oe(we)){var ir=[];return F&&F.call(we,function(yt){ir.push(rt(yt,we))}),Ke("Set",I.call(we),ir,gt)}if(Le(we))return je("WeakMap");if(Ve(we))return je("WeakSet");if($e(we))return je("WeakRef");if(oe(we))return We(rt(Number(we)));if(ve(we))return We(rt(ce.call(we)));if(le(we))return We(U.call(we));if(Ie(we))return We(rt(String(we)));if(typeof window<"u"&&we===window)return"{ [object Window] }";if(typeof globalThis<"u"&&we===globalThis||typeof commonjsGlobal<"u"&&we===commonjsGlobal)return"{ [object globalThis] }";if(!Se(we)&&!Ee(we)){var Ut=qe(we,rt),nr=re?re(we)===Object.prototype:we instanceof Object||we.constructor===Object,Gt=we instanceof Object?"":"null prototype",ar=!nr&&_e&&Object(we)===we&&_e in we?Y.call(Fe(we),8,-1):Gt?"Object":"",Ir=nr||typeof we.constructor!="function"?"":we.constructor.name?we.constructor.name+" ":"",Ht=Ir+(ar||Gt?"["+se.call(Z.call([],ar||[],Gt||[]),": ")+"] ":"");return Ut.length===0?Ht+"{}":gt?Ht+"{"+mt(Ut,gt)+"}":Ht+"{ "+se.call(Ut,", ")+" }"}return String(we)};function be(Te,we,ze){var Ye=ze.quoteStyle||we,Xe=fe[Ye];return Xe+Te+Xe}function Pe(Te){return W.call(String(Te),/"/g,"&quot;")}function Me(Te){return!_e||!(typeof Te=="object"&&(_e in Te||typeof Te[_e]<"u"))}function ge(Te){return Fe(Te)==="[object Array]"&&Me(Te)}function Se(Te){return Fe(Te)==="[object Date]"&&Me(Te)}function Ee(Te){return Fe(Te)==="[object RegExp]"&&Me(Te)}function Ae(Te){return Fe(Te)==="[object Error]"&&Me(Te)}function Ie(Te){return Fe(Te)==="[object String]"&&Me(Te)}function oe(Te){return Fe(Te)==="[object Number]"&&Me(Te)}function le(Te){return Fe(Te)==="[object Boolean]"&&Me(Te)}function de(Te){if(ye)return Te&&typeof Te=="object"&&Te instanceof Symbol;if(typeof Te=="symbol")return!0;if(!Te||typeof Te!="object"||!pe)return!1;try{return pe.call(Te),!0}catch{}return!1}function ve(Te){if(!Te||typeof Te!="object"||!ce)return!1;try{return ce.call(Te),!0}catch{}return!1}var xe=Object.prototype.hasOwnProperty||function(Te){return Te in this};function Ce(Te,we){return xe.call(Te,we)}function Fe(Te){return G.call(Te)}function ke(Te){if(Te.name)return Te.name;var we=z.call(X.call(Te),/^function\s*([\w$]+)/);return we?we[1]:null}function Be(Te,we){if(Te.indexOf)return Te.indexOf(we);for(var ze=0,Ye=Te.length;ze<Ye;ze++)if(Te[ze]===we)return ze;return-1}function Re(Te){if(!T||!Te||typeof Te!="object")return!1;try{T.call(Te);try{I.call(Te)}catch{return!0}return Te instanceof Map}catch{}return!1}function Le(Te){if(!B||!Te||typeof Te!="object")return!1;try{B.call(Te,B);try{V.call(Te,V)}catch{return!0}return Te instanceof WeakMap}catch{}return!1}function $e(Te){if(!D||!Te||typeof Te!="object")return!1;try{return D.call(Te),!0}catch{}return!1}function Oe(Te){if(!I||!Te||typeof Te!="object")return!1;try{I.call(Te);try{T.call(Te)}catch{return!0}return Te instanceof Set}catch{}return!1}function Ve(Te){if(!V||!Te||typeof Te!="object")return!1;try{V.call(Te,V);try{B.call(Te,B)}catch{return!0}return Te instanceof WeakSet}catch{}return!1}function De(Te){return!Te||typeof Te!="object"?!1:typeof HTMLElement<"u"&&Te instanceof HTMLElement?!0:typeof Te.nodeName=="string"&&typeof Te.getAttribute=="function"}function Ge(Te,we){if(Te.length>we.maxStringLength){var ze=Te.length-we.maxStringLength,Ye="... "+ze+" more character"+(ze>1?"s":"");return Ge(Y.call(Te,0,we.maxStringLength),we)+Ye}var Xe=me[we.quoteStyle||"single"];Xe.lastIndex=0;var Ue=W.call(W.call(Te,Xe,"\\$1"),/[\x00-\x1f]/g,He);return be(Ue,"single",we)}function He(Te){var we=Te.charCodeAt(0),ze={8:"b",9:"t",10:"n",12:"f",13:"r"}[we];return ze?"\\"+ze:"\\x"+(we<16?"0":"")+q.call(we.toString(16))}function We(Te){return"Object("+Te+")"}function je(Te){return Te+" { ? }"}function Ke(Te,we,ze,Ye){var Xe=Ye?mt(ze,Ye):se.call(ze,", ");return Te+" ("+we+") {"+Xe+"}"}function et(Te){for(var we=0;we<Te.length;we++)if(Be(Te[we],`
`)>=0)return!1;return!0}function ft(Te,we){var ze;if(Te.indent==="	")ze="	";else if(typeof Te.indent=="number"&&Te.indent>0)ze=se.call(Array(Te.indent+1)," ");else return null;return{base:ze,prev:se.call(Array(we+1),ze)}}function mt(Te,we){if(Te.length===0)return"";var ze=`
`+we.prev+we.base;return ze+se.call(Te,","+ze)+`
`+we.prev}function qe(Te,we){var ze=ge(Te),Ye=[];if(ze){Ye.length=Te.length;for(var Xe=0;Xe<Te.length;Xe++)Ye[Xe]=Ce(Te,Xe)?we(Te[Xe],Te):""}var Ue=typeof he=="function"?he(Te):[],ht;if(ye){ht={};for(var pt=0;pt<Ue.length;pt++)ht["$"+Ue[pt]]=Ue[pt]}for(var Ze in Te)Ce(Te,Ze)&&(ze&&String(Number(Ze))===Ze&&Ze<Te.length||ye&&ht["$"+Ze]instanceof Symbol||(J.call(/[^\w$]/,Ze)?Ye.push(we(Ze,Te)+": "+we(Te[Ze],Te)):Ye.push(Ze+": "+we(Te[Ze],Te))));if(typeof he=="function")for(var ct=0;ct<Ue.length;ct++)ee.call(Te,Ue[ct])&&Ye.push("["+we(Ue[ct])+"]: "+we(Te[Ue[ct]],Te));return Ye}return objectInspect}var sideChannelList,hasRequiredSideChannelList;function requireSideChannelList(){if(hasRequiredSideChannelList)return sideChannelList;hasRequiredSideChannelList=1;var A=requireObjectInspect(),_=requireType(),T=function(F,R,B){for(var O=F,V;(V=O.next)!=null;O=V)if(V.key===R)return O.next=V.next,B||(V.next=F.next,F.next=V),V},E=function(F,R){if(F){var B=T(F,R);return B&&B.value}},C=function(F,R,B){var O=T(F,R);O?O.value=B:F.next={key:R,next:F.next,value:B}},P=function(F,R){return F?!!T(F,R):!1},I=function(F,R){if(F)return T(F,R,!0)};return sideChannelList=function(){var R,B={assert:function(O){if(!B.has(O))throw new _("Side channel does not contain "+A(O))},delete:function(O){var V=R&&R.next,L=I(R,O);return L&&V&&V===L&&(R=void 0),!!L},get:function(O){return E(R,O)},has:function(O){return P(R,O)},set:function(O,V){R||(R={next:void 0}),C(R,O,V)}};return B},sideChannelList}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round$1,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round$1=Math.round),round$1}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(_){return _!==_}),_isNaN}var sign$1,hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1;hasRequiredSign=1;var A=require_isNaN();return sign$1=function(T){return A(T)||T===0?T:T<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var A=requireGOPD();if(A)try{A([],"length")}catch{A=null}return gopd=A,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var A=Object.defineProperty||!1;if(A)try{A({},"a",{value:1})}catch{A=!1}return esDefineProperty=A,esDefineProperty}var shams,hasRequiredShams;function requireShams(){return hasRequiredShams||(hasRequiredShams=1,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var _={},T=Symbol("test"),E=Object(T);if(typeof T=="string"||Object.prototype.toString.call(T)!=="[object Symbol]"||Object.prototype.toString.call(E)!=="[object Symbol]")return!1;var C=42;_[T]=C;for(var P in _)return!1;if(typeof Object.keys=="function"&&Object.keys(_).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(_).length!==0)return!1;var I=Object.getOwnPropertySymbols(_);if(I.length!==1||I[0]!==T||!Object.prototype.propertyIsEnumerable.call(_,T))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var F=Object.getOwnPropertyDescriptor(_,T);if(F.value!==C||F.enumerable!==!0)return!1}return!0}),shams}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var A=typeof Symbol<"u"&&Symbol,_=requireShams();return hasSymbols=function(){return typeof A!="function"||typeof Symbol!="function"||typeof A("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:_()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var A=requireEsObjectAtoms();return Object_getPrototypeOf=A.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var A="Function.prototype.bind called on incompatible ",_=Object.prototype.toString,T=Math.max,E="[object Function]",C=function(R,B){for(var O=[],V=0;V<R.length;V+=1)O[V]=R[V];for(var L=0;L<B.length;L+=1)O[L+R.length]=B[L];return O},P=function(R,B){for(var O=[],V=B,L=0;V<R.length;V+=1,L+=1)O[L]=R[V];return O},I=function(F,R){for(var B="",O=0;O<F.length;O+=1)B+=F[O],O+1<F.length&&(B+=R);return B};return implementation=function(R){var B=this;if(typeof B!="function"||_.apply(B)!==E)throw new TypeError(A+B);for(var O=P(arguments,1),V,L=function(){if(this instanceof V){var z=B.apply(this,C(O,arguments));return Object(z)===z?z:this}return B.apply(R,C(O,arguments))},D=T(0,B.length-O.length),U=[],G=0;G<D;G++)U[G]="$"+G;if(V=Function("binder","return function ("+I(U,",")+"){ return binder.apply(this,arguments); }")(L),B.prototype){var X=function(){};X.prototype=B.prototype,V.prototype=new X,X.prototype=null}return V},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var A=requireImplementation();return functionBind=Function.prototype.bind||A,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var A=requireFunctionBind(),_=requireFunctionApply(),T=requireFunctionCall(),E=requireReflectApply();return actualApply=E||A.call(T,_),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var A=requireFunctionBind(),_=requireType(),T=requireFunctionCall(),E=requireActualApply();return callBindApplyHelpers=function(P){if(P.length<1||typeof P[0]!="function")throw new _("a function is required");return E(A,T,P)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var A=requireCallBindApplyHelpers(),_=requireGopd(),T;try{T=[].__proto__===Array.prototype}catch(I){if(!I||typeof I!="object"||!("code"in I)||I.code!=="ERR_PROTO_ACCESS")throw I}var E=!!T&&_&&_(Object.prototype,"__proto__"),C=Object,P=C.getPrototypeOf;return get=E&&typeof E.get=="function"?A([E.get]):typeof P=="function"?function(F){return P(F==null?F:C(F))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var A=requireReflect_getPrototypeOf(),_=requireObject_getPrototypeOf(),T=requireGet();return getProto=A?function(C){return A(C)}:_?function(C){if(!C||typeof C!="object"&&typeof C!="function")throw new TypeError("getProto: not an object");return _(C)}:T?function(C){return T(C)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var A=Function.prototype.call,_=Object.prototype.hasOwnProperty,T=requireFunctionBind();return hasown=T.call(A,_),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var A,_=requireEsObjectAtoms(),T=requireEsErrors(),E=require_eval(),C=requireRange(),P=requireRef(),I=requireSyntax(),F=requireType(),R=requireUri(),B=requireAbs(),O=requireFloor(),V=requireMax(),L=requireMin(),D=requirePow(),U=requireRound(),G=requireSign(),X=Function,z=function(Ee){try{return X('"use strict"; return ('+Ee+").constructor;")()}catch{}},Y=requireGopd(),W=requireEsDefineProperty(),q=function(){throw new F},K=Y?function(){try{return arguments.callee,q}catch{try{return Y(arguments,"callee").get}catch{return q}}}():q,J=requireHasSymbols()(),Z=requireGetProto(),se=requireObject_getPrototypeOf(),ae=requireReflect_getPrototypeOf(),ue=requireFunctionApply(),ce=requireFunctionCall(),he={},pe=typeof Uint8Array>"u"||!Z?A:Z(Uint8Array),ye={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":J&&Z?Z([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":he,"%AsyncGenerator%":he,"%AsyncGeneratorFunction%":he,"%AsyncIteratorPrototype%":he,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?A:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":T,"%eval%":eval,"%EvalError%":E,"%Float16Array%":typeof Float16Array>"u"?A:Float16Array,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":X,"%GeneratorFunction%":he,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":J&&Z?Z(Z([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map>"u"||!J||!Z?A:Z(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":_,"%Object.getOwnPropertyDescriptor%":Y,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":C,"%ReferenceError%":P,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set>"u"||!J||!Z?A:Z(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":J&&Z?Z(""[Symbol.iterator]()):A,"%Symbol%":J?Symbol:A,"%SyntaxError%":I,"%ThrowTypeError%":K,"%TypedArray%":pe,"%TypeError%":F,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":R,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet,"%Function.prototype.call%":ce,"%Function.prototype.apply%":ue,"%Object.defineProperty%":W,"%Object.getPrototypeOf%":se,"%Math.abs%":B,"%Math.floor%":O,"%Math.max%":V,"%Math.min%":L,"%Math.pow%":D,"%Math.round%":U,"%Math.sign%":G,"%Reflect.getPrototypeOf%":ae};if(Z)try{null.error}catch(Ee){var _e=Z(Z(Ee));ye["%Error.prototype%"]=_e}var ee=function Ee(Ae){var Ie;if(Ae==="%AsyncFunction%")Ie=z("async function () {}");else if(Ae==="%GeneratorFunction%")Ie=z("function* () {}");else if(Ae==="%AsyncGeneratorFunction%")Ie=z("async function* () {}");else if(Ae==="%AsyncGenerator%"){var oe=Ee("%AsyncGeneratorFunction%");oe&&(Ie=oe.prototype)}else if(Ae==="%AsyncIteratorPrototype%"){var le=Ee("%AsyncGenerator%");le&&Z&&(Ie=Z(le.prototype))}return ye[Ae]=Ie,Ie},re={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Q=requireFunctionBind(),te=requireHasown(),ne=Q.call(ce,Array.prototype.concat),ie=Q.call(ue,Array.prototype.splice),fe=Q.call(ce,String.prototype.replace),me=Q.call(ce,String.prototype.slice),be=Q.call(ce,RegExp.prototype.exec),Pe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Me=/\\(\\)?/g,ge=function(Ae){var Ie=me(Ae,0,1),oe=me(Ae,-1);if(Ie==="%"&&oe!=="%")throw new I("invalid intrinsic syntax, expected closing `%`");if(oe==="%"&&Ie!=="%")throw new I("invalid intrinsic syntax, expected opening `%`");var le=[];return fe(Ae,Pe,function(de,ve,xe,Ce){le[le.length]=xe?fe(Ce,Me,"$1"):ve||de}),le},Se=function(Ae,Ie){var oe=Ae,le;if(te(re,oe)&&(le=re[oe],oe="%"+le[0]+"%"),te(ye,oe)){var de=ye[oe];if(de===he&&(de=ee(oe)),typeof de>"u"&&!Ie)throw new F("intrinsic "+Ae+" exists, but is not available. Please file an issue!");return{alias:le,name:oe,value:de}}throw new I("intrinsic "+Ae+" does not exist!")};return getIntrinsic=function(Ae,Ie){if(typeof Ae!="string"||Ae.length===0)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Ie!="boolean")throw new F('"allowMissing" argument must be a boolean');if(be(/^%?[^%]*%?$/,Ae)===null)throw new I("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var oe=ge(Ae),le=oe.length>0?oe[0]:"",de=Se("%"+le+"%",Ie),ve=de.name,xe=de.value,Ce=!1,Fe=de.alias;Fe&&(le=Fe[0],ie(oe,ne([0,1],Fe)));for(var ke=1,Be=!0;ke<oe.length;ke+=1){var Re=oe[ke],Le=me(Re,0,1),$e=me(Re,-1);if((Le==='"'||Le==="'"||Le==="`"||$e==='"'||$e==="'"||$e==="`")&&Le!==$e)throw new I("property names with quotes must have matching quotes");if((Re==="constructor"||!Be)&&(Ce=!0),le+="."+Re,ve="%"+le+"%",te(ye,ve))xe=ye[ve];else if(xe!=null){if(!(Re in xe)){if(!Ie)throw new F("base intrinsic for "+Ae+" exists, but the property is not available.");return}if(Y&&ke+1>=oe.length){var Oe=Y(xe,Re);Be=!!Oe,Be&&"get"in Oe&&!("originalValue"in Oe.get)?xe=Oe.get:xe=xe[Re]}else Be=te(xe,Re),xe=xe[Re];Be&&!Ce&&(ye[ve]=xe)}}return xe},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var A=requireGetIntrinsic(),_=requireCallBindApplyHelpers(),T=_([A("%String.prototype.indexOf%")]);return callBound=function(C,P){var I=A(C,!!P);return typeof I=="function"&&T(C,".prototype.")>-1?_([I]):I},callBound}var sideChannelMap,hasRequiredSideChannelMap;function requireSideChannelMap(){if(hasRequiredSideChannelMap)return sideChannelMap;hasRequiredSideChannelMap=1;var A=requireGetIntrinsic(),_=requireCallBound(),T=requireObjectInspect(),E=requireType(),C=A("%Map%",!0),P=_("Map.prototype.get",!0),I=_("Map.prototype.set",!0),F=_("Map.prototype.has",!0),R=_("Map.prototype.delete",!0),B=_("Map.prototype.size",!0);return sideChannelMap=!!C&&function(){var V,L={assert:function(D){if(!L.has(D))throw new E("Side channel does not contain "+T(D))},delete:function(D){if(V){var U=R(V,D);return B(V)===0&&(V=void 0),U}return!1},get:function(D){if(V)return P(V,D)},has:function(D){return V?F(V,D):!1},set:function(D,U){V||(V=new C),I(V,D,U)}};return L},sideChannelMap}var sideChannelWeakmap,hasRequiredSideChannelWeakmap;function requireSideChannelWeakmap(){if(hasRequiredSideChannelWeakmap)return sideChannelWeakmap;hasRequiredSideChannelWeakmap=1;var A=requireGetIntrinsic(),_=requireCallBound(),T=requireObjectInspect(),E=requireSideChannelMap(),C=requireType(),P=A("%WeakMap%",!0),I=_("WeakMap.prototype.get",!0),F=_("WeakMap.prototype.set",!0),R=_("WeakMap.prototype.has",!0),B=_("WeakMap.prototype.delete",!0);return sideChannelWeakmap=P?function(){var V,L,D={assert:function(U){if(!D.has(U))throw new C("Side channel does not contain "+T(U))},delete:function(U){if(P&&U&&(typeof U=="object"||typeof U=="function")){if(V)return B(V,U)}else if(E&&L)return L.delete(U);return!1},get:function(U){return P&&U&&(typeof U=="object"||typeof U=="function")&&V?I(V,U):L&&L.get(U)},has:function(U){return P&&U&&(typeof U=="object"||typeof U=="function")&&V?R(V,U):!!L&&L.has(U)},set:function(U,G){P&&U&&(typeof U=="object"||typeof U=="function")?(V||(V=new P),F(V,U,G)):E&&(L||(L=E()),L.set(U,G))}};return D}:E,sideChannelWeakmap}var sideChannel,hasRequiredSideChannel;function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var A=requireType(),_=requireObjectInspect(),T=requireSideChannelList(),E=requireSideChannelMap(),C=requireSideChannelWeakmap(),P=C||E||T;return sideChannel=function(){var F,R={assert:function(B){if(!R.has(B))throw new A("Side channel does not contain "+_(B))},delete:function(B){return!!F&&F.delete(B)},get:function(B){return F&&F.get(B)},has:function(B){return!!F&&F.has(B)},set:function(B,O){F||(F=P()),F.set(B,O)}};return R},sideChannel}var formats,hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats;hasRequiredFormats=1;var A=String.prototype.replace,_=/%20/g,T={RFC1738:"RFC1738",RFC3986:"RFC3986"};return formats={default:T.RFC3986,formatters:{RFC1738:function(E){return A.call(E,_,"+")},RFC3986:function(E){return String(E)}},RFC1738:T.RFC1738,RFC3986:T.RFC3986},formats}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var A=requireFormats(),_=Object.prototype.hasOwnProperty,T=Array.isArray,E=function(){for(var X=[],z=0;z<256;++z)X.push("%"+((z<16?"0":"")+z.toString(16)).toUpperCase());return X}(),C=function(z){for(;z.length>1;){var Y=z.pop(),W=Y.obj[Y.prop];if(T(W)){for(var q=[],K=0;K<W.length;++K)typeof W[K]<"u"&&q.push(W[K]);Y.obj[Y.prop]=q}}},P=function(z,Y){for(var W=Y&&Y.plainObjects?{__proto__:null}:{},q=0;q<z.length;++q)typeof z[q]<"u"&&(W[q]=z[q]);return W},I=function X(z,Y,W){if(!Y)return z;if(typeof Y!="object"&&typeof Y!="function"){if(T(z))z.push(Y);else if(z&&typeof z=="object")(W&&(W.plainObjects||W.allowPrototypes)||!_.call(Object.prototype,Y))&&(z[Y]=!0);else return[z,Y];return z}if(!z||typeof z!="object")return[z].concat(Y);var q=z;return T(z)&&!T(Y)&&(q=P(z,W)),T(z)&&T(Y)?(Y.forEach(function(K,J){if(_.call(z,J)){var Z=z[J];Z&&typeof Z=="object"&&K&&typeof K=="object"?z[J]=X(Z,K,W):z.push(K)}else z[J]=K}),z):Object.keys(Y).reduce(function(K,J){var Z=Y[J];return _.call(K,J)?K[J]=X(K[J],Z,W):K[J]=Z,K},q)},F=function(z,Y){return Object.keys(Y).reduce(function(W,q){return W[q]=Y[q],W},z)},R=function(X,z,Y){var W=X.replace(/\+/g," ");if(Y==="iso-8859-1")return W.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(W)}catch{return W}},B=1024,O=function(z,Y,W,q,K){if(z.length===0)return z;var J=z;if(typeof z=="symbol"?J=Symbol.prototype.toString.call(z):typeof z!="string"&&(J=String(z)),W==="iso-8859-1")return escape(J).replace(/%u[0-9a-f]{4}/gi,function(pe){return"%26%23"+parseInt(pe.slice(2),16)+"%3B"});for(var Z="",se=0;se<J.length;se+=B){for(var ae=J.length>=B?J.slice(se,se+B):J,ue=[],ce=0;ce<ae.length;++ce){var he=ae.charCodeAt(ce);if(he===45||he===46||he===95||he===126||he>=48&&he<=57||he>=65&&he<=90||he>=97&&he<=122||K===A.RFC1738&&(he===40||he===41)){ue[ue.length]=ae.charAt(ce);continue}if(he<128){ue[ue.length]=E[he];continue}if(he<2048){ue[ue.length]=E[192|he>>6]+E[128|he&63];continue}if(he<55296||he>=57344){ue[ue.length]=E[224|he>>12]+E[128|he>>6&63]+E[128|he&63];continue}ce+=1,he=65536+((he&1023)<<10|ae.charCodeAt(ce)&1023),ue[ue.length]=E[240|he>>18]+E[128|he>>12&63]+E[128|he>>6&63]+E[128|he&63]}Z+=ue.join("")}return Z},V=function(z){for(var Y=[{obj:{o:z},prop:"o"}],W=[],q=0;q<Y.length;++q)for(var K=Y[q],J=K.obj[K.prop],Z=Object.keys(J),se=0;se<Z.length;++se){var ae=Z[se],ue=J[ae];typeof ue=="object"&&ue!==null&&W.indexOf(ue)===-1&&(Y.push({obj:J,prop:ae}),W.push(ue))}return C(Y),z},L=function(z){return Object.prototype.toString.call(z)==="[object RegExp]"},D=function(z){return!z||typeof z!="object"?!1:!!(z.constructor&&z.constructor.isBuffer&&z.constructor.isBuffer(z))},U=function(z,Y){return[].concat(z,Y)},G=function(z,Y){if(T(z)){for(var W=[],q=0;q<z.length;q+=1)W.push(Y(z[q]));return W}return Y(z)};return utils={arrayToObject:P,assign:F,combine:U,compact:V,decode:R,encode:O,isBuffer:D,isRegExp:L,maybeMap:G,merge:I},utils}var stringify_1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify_1;hasRequiredStringify=1;var A=requireSideChannel(),_=requireUtils(),T=requireFormats(),E=Object.prototype.hasOwnProperty,C={brackets:function(X){return X+"[]"},comma:"comma",indices:function(X,z){return X+"["+z+"]"},repeat:function(X){return X}},P=Array.isArray,I=Array.prototype.push,F=function(G,X){I.apply(G,P(X)?X:[X])},R=Date.prototype.toISOString,B=T.default,O={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_.encode,encodeValuesOnly:!1,filter:void 0,format:B,formatter:T.formatters[B],indices:!1,serializeDate:function(X){return R.call(X)},skipNulls:!1,strictNullHandling:!1},V=function(X){return typeof X=="string"||typeof X=="number"||typeof X=="boolean"||typeof X=="symbol"||typeof X=="bigint"},L={},D=function G(X,z,Y,W,q,K,J,Z,se,ae,ue,ce,he,pe,ye,_e,ee,re){for(var Q=X,te=re,ne=0,ie=!1;(te=te.get(L))!==void 0&&!ie;){var fe=te.get(X);if(ne+=1,typeof fe<"u"){if(fe===ne)throw new RangeError("Cyclic object value");ie=!0}typeof te.get(L)>"u"&&(ne=0)}if(typeof ae=="function"?Q=ae(z,Q):Q instanceof Date?Q=he(Q):Y==="comma"&&P(Q)&&(Q=_.maybeMap(Q,function(ve){return ve instanceof Date?he(ve):ve})),Q===null){if(K)return se&&!_e?se(z,O.encoder,ee,"key",pe):z;Q=""}if(V(Q)||_.isBuffer(Q)){if(se){var me=_e?z:se(z,O.encoder,ee,"key",pe);return[ye(me)+"="+ye(se(Q,O.encoder,ee,"value",pe))]}return[ye(z)+"="+ye(String(Q))]}var be=[];if(typeof Q>"u")return be;var Pe;if(Y==="comma"&&P(Q))_e&&se&&(Q=_.maybeMap(Q,se)),Pe=[{value:Q.length>0?Q.join(",")||null:void 0}];else if(P(ae))Pe=ae;else{var Me=Object.keys(Q);Pe=ue?Me.sort(ue):Me}var ge=Z?String(z).replace(/\./g,"%2E"):String(z),Se=W&&P(Q)&&Q.length===1?ge+"[]":ge;if(q&&P(Q)&&Q.length===0)return Se+"[]";for(var Ee=0;Ee<Pe.length;++Ee){var Ae=Pe[Ee],Ie=typeof Ae=="object"&&Ae&&typeof Ae.value<"u"?Ae.value:Q[Ae];if(!(J&&Ie===null)){var oe=ce&&Z?String(Ae).replace(/\./g,"%2E"):String(Ae),le=P(Q)?typeof Y=="function"?Y(Se,oe):Se:Se+(ce?"."+oe:"["+oe+"]");re.set(X,ne);var de=A();de.set(L,re),F(be,G(Ie,le,Y,W,q,K,J,Z,Y==="comma"&&_e&&P(Q)?null:se,ae,ue,ce,he,pe,ye,_e,ee,de))}}return be},U=function(X){if(!X)return O;if(typeof X.allowEmptyArrays<"u"&&typeof X.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof X.encodeDotInKeys<"u"&&typeof X.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(X.encoder!==null&&typeof X.encoder<"u"&&typeof X.encoder!="function")throw new TypeError("Encoder has to be a function.");var z=X.charset||O.charset;if(typeof X.charset<"u"&&X.charset!=="utf-8"&&X.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var Y=T.default;if(typeof X.format<"u"){if(!E.call(T.formatters,X.format))throw new TypeError("Unknown format option provided.");Y=X.format}var W=T.formatters[Y],q=O.filter;(typeof X.filter=="function"||P(X.filter))&&(q=X.filter);var K;if(X.arrayFormat in C?K=X.arrayFormat:"indices"in X?K=X.indices?"indices":"repeat":K=O.arrayFormat,"commaRoundTrip"in X&&typeof X.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var J=typeof X.allowDots>"u"?X.encodeDotInKeys===!0?!0:O.allowDots:!!X.allowDots;return{addQueryPrefix:typeof X.addQueryPrefix=="boolean"?X.addQueryPrefix:O.addQueryPrefix,allowDots:J,allowEmptyArrays:typeof X.allowEmptyArrays=="boolean"?!!X.allowEmptyArrays:O.allowEmptyArrays,arrayFormat:K,charset:z,charsetSentinel:typeof X.charsetSentinel=="boolean"?X.charsetSentinel:O.charsetSentinel,commaRoundTrip:!!X.commaRoundTrip,delimiter:typeof X.delimiter>"u"?O.delimiter:X.delimiter,encode:typeof X.encode=="boolean"?X.encode:O.encode,encodeDotInKeys:typeof X.encodeDotInKeys=="boolean"?X.encodeDotInKeys:O.encodeDotInKeys,encoder:typeof X.encoder=="function"?X.encoder:O.encoder,encodeValuesOnly:typeof X.encodeValuesOnly=="boolean"?X.encodeValuesOnly:O.encodeValuesOnly,filter:q,format:Y,formatter:W,serializeDate:typeof X.serializeDate=="function"?X.serializeDate:O.serializeDate,skipNulls:typeof X.skipNulls=="boolean"?X.skipNulls:O.skipNulls,sort:typeof X.sort=="function"?X.sort:null,strictNullHandling:typeof X.strictNullHandling=="boolean"?X.strictNullHandling:O.strictNullHandling}};return stringify_1=function(G,X){var z=G,Y=U(X),W,q;typeof Y.filter=="function"?(q=Y.filter,z=q("",z)):P(Y.filter)&&(q=Y.filter,W=q);var K=[];if(typeof z!="object"||z===null)return"";var J=C[Y.arrayFormat],Z=J==="comma"&&Y.commaRoundTrip;W||(W=Object.keys(z)),Y.sort&&W.sort(Y.sort);for(var se=A(),ae=0;ae<W.length;++ae){var ue=W[ae],ce=z[ue];Y.skipNulls&&ce===null||F(K,D(ce,ue,J,Z,Y.allowEmptyArrays,Y.strictNullHandling,Y.skipNulls,Y.encodeDotInKeys,Y.encode?Y.encoder:null,Y.filter,Y.sort,Y.allowDots,Y.serializeDate,Y.format,Y.formatter,Y.encodeValuesOnly,Y.charset,se))}var he=K.join(Y.delimiter),pe=Y.addQueryPrefix===!0?"?":"";return Y.charsetSentinel&&(Y.charset==="iso-8859-1"?pe+="utf8=%26%2310003%3B&":pe+="utf8=%E2%9C%93&"),he.length>0?pe+he:""},stringify_1}var parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;var A=requireUtils(),_=Object.prototype.hasOwnProperty,T=Array.isArray,E={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:A.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},C=function(L){return L.replace(/&#(\d+);/g,function(D,U){return String.fromCharCode(parseInt(U,10))})},P=function(L,D,U){if(L&&typeof L=="string"&&D.comma&&L.indexOf(",")>-1)return L.split(",");if(D.throwOnLimitExceeded&&U>=D.arrayLimit)throw new RangeError("Array limit exceeded. Only "+D.arrayLimit+" element"+(D.arrayLimit===1?"":"s")+" allowed in an array.");return L},I="utf8=%26%2310003%3B",F="utf8=%E2%9C%93",R=function(D,U){var G={__proto__:null},X=U.ignoreQueryPrefix?D.replace(/^\?/,""):D;X=X.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var z=U.parameterLimit===1/0?void 0:U.parameterLimit,Y=X.split(U.delimiter,U.throwOnLimitExceeded?z+1:z);if(U.throwOnLimitExceeded&&Y.length>z)throw new RangeError("Parameter limit exceeded. Only "+z+" parameter"+(z===1?"":"s")+" allowed.");var W=-1,q,K=U.charset;if(U.charsetSentinel)for(q=0;q<Y.length;++q)Y[q].indexOf("utf8=")===0&&(Y[q]===F?K="utf-8":Y[q]===I&&(K="iso-8859-1"),W=q,q=Y.length);for(q=0;q<Y.length;++q)if(q!==W){var J=Y[q],Z=J.indexOf("]="),se=Z===-1?J.indexOf("="):Z+1,ae,ue;se===-1?(ae=U.decoder(J,E.decoder,K,"key"),ue=U.strictNullHandling?null:""):(ae=U.decoder(J.slice(0,se),E.decoder,K,"key"),ue=A.maybeMap(P(J.slice(se+1),U,T(G[ae])?G[ae].length:0),function(he){return U.decoder(he,E.decoder,K,"value")})),ue&&U.interpretNumericEntities&&K==="iso-8859-1"&&(ue=C(String(ue))),J.indexOf("[]=")>-1&&(ue=T(ue)?[ue]:ue);var ce=_.call(G,ae);ce&&U.duplicates==="combine"?G[ae]=A.combine(G[ae],ue):(!ce||U.duplicates==="last")&&(G[ae]=ue)}return G},B=function(L,D,U,G){var X=0;if(L.length>0&&L[L.length-1]==="[]"){var z=L.slice(0,-1).join("");X=Array.isArray(D)&&D[z]?D[z].length:0}for(var Y=G?D:P(D,U,X),W=L.length-1;W>=0;--W){var q,K=L[W];if(K==="[]"&&U.parseArrays)q=U.allowEmptyArrays&&(Y===""||U.strictNullHandling&&Y===null)?[]:A.combine([],Y);else{q=U.plainObjects?{__proto__:null}:{};var J=K.charAt(0)==="["&&K.charAt(K.length-1)==="]"?K.slice(1,-1):K,Z=U.decodeDotInKeys?J.replace(/%2E/g,"."):J,se=parseInt(Z,10);!U.parseArrays&&Z===""?q={0:Y}:!isNaN(se)&&K!==Z&&String(se)===Z&&se>=0&&U.parseArrays&&se<=U.arrayLimit?(q=[],q[se]=Y):Z!=="__proto__"&&(q[Z]=Y)}Y=q}return Y},O=function(D,U,G,X){if(D){var z=G.allowDots?D.replace(/\.([^.[]+)/g,"[$1]"):D,Y=/(\[[^[\]]*])/,W=/(\[[^[\]]*])/g,q=G.depth>0&&Y.exec(z),K=q?z.slice(0,q.index):z,J=[];if(K){if(!G.plainObjects&&_.call(Object.prototype,K)&&!G.allowPrototypes)return;J.push(K)}for(var Z=0;G.depth>0&&(q=W.exec(z))!==null&&Z<G.depth;){if(Z+=1,!G.plainObjects&&_.call(Object.prototype,q[1].slice(1,-1))&&!G.allowPrototypes)return;J.push(q[1])}if(q){if(G.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+G.depth+" and strictDepth is true");J.push("["+z.slice(q.index)+"]")}return B(J,U,G,X)}},V=function(D){if(!D)return E;if(typeof D.allowEmptyArrays<"u"&&typeof D.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof D.decodeDotInKeys<"u"&&typeof D.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(D.decoder!==null&&typeof D.decoder<"u"&&typeof D.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof D.charset<"u"&&D.charset!=="utf-8"&&D.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof D.throwOnLimitExceeded<"u"&&typeof D.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var U=typeof D.charset>"u"?E.charset:D.charset,G=typeof D.duplicates>"u"?E.duplicates:D.duplicates;if(G!=="combine"&&G!=="first"&&G!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var X=typeof D.allowDots>"u"?D.decodeDotInKeys===!0?!0:E.allowDots:!!D.allowDots;return{allowDots:X,allowEmptyArrays:typeof D.allowEmptyArrays=="boolean"?!!D.allowEmptyArrays:E.allowEmptyArrays,allowPrototypes:typeof D.allowPrototypes=="boolean"?D.allowPrototypes:E.allowPrototypes,allowSparse:typeof D.allowSparse=="boolean"?D.allowSparse:E.allowSparse,arrayLimit:typeof D.arrayLimit=="number"?D.arrayLimit:E.arrayLimit,charset:U,charsetSentinel:typeof D.charsetSentinel=="boolean"?D.charsetSentinel:E.charsetSentinel,comma:typeof D.comma=="boolean"?D.comma:E.comma,decodeDotInKeys:typeof D.decodeDotInKeys=="boolean"?D.decodeDotInKeys:E.decodeDotInKeys,decoder:typeof D.decoder=="function"?D.decoder:E.decoder,delimiter:typeof D.delimiter=="string"||A.isRegExp(D.delimiter)?D.delimiter:E.delimiter,depth:typeof D.depth=="number"||D.depth===!1?+D.depth:E.depth,duplicates:G,ignoreQueryPrefix:D.ignoreQueryPrefix===!0,interpretNumericEntities:typeof D.interpretNumericEntities=="boolean"?D.interpretNumericEntities:E.interpretNumericEntities,parameterLimit:typeof D.parameterLimit=="number"?D.parameterLimit:E.parameterLimit,parseArrays:D.parseArrays!==!1,plainObjects:typeof D.plainObjects=="boolean"?D.plainObjects:E.plainObjects,strictDepth:typeof D.strictDepth=="boolean"?!!D.strictDepth:E.strictDepth,strictNullHandling:typeof D.strictNullHandling=="boolean"?D.strictNullHandling:E.strictNullHandling,throwOnLimitExceeded:typeof D.throwOnLimitExceeded=="boolean"?D.throwOnLimitExceeded:!1}};return parse=function(L,D){var U=V(D);if(L===""||L===null||typeof L>"u")return U.plainObjects?{__proto__:null}:{};for(var G=typeof L=="string"?R(L,U):L,X=U.plainObjects?{__proto__:null}:{},z=Object.keys(G),Y=0;Y<z.length;++Y){var W=z[Y],q=O(W,G[W],U,typeof L=="string");X=A.merge(X,q,U)}return U.allowSparse===!0?X:A.compact(X)},parse}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var A=requireStringify(),_=requireParse(),T=requireFormats();return lib={formats:T,parse:_,stringify:A},lib}var hasRequiredUrl;function requireUrl(){if(hasRequiredUrl)return url;hasRequiredUrl=1;var A=requirePunycode();function _(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var T=/^([a-z0-9.+-]+:)/i,E=/:[0-9]*$/,C=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,P=["<",">",'"',"`"," ","\r",`
`,"	"],I=["{","}","|","\\","^","`"].concat(P),F=["'"].concat(I),R=["%","/","?",";","#"].concat(F),B=["/","?","#"],O=255,V=/^[+a-z0-9A-Z_-]{0,63}$/,L=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,D={javascript:!0,"javascript:":!0},U={javascript:!0,"javascript:":!0},G={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},X=requireLib();function z(K,J,Z){if(K&&typeof K=="object"&&K instanceof _)return K;var se=new _;return se.parse(K,J,Z),se}_.prototype.parse=function(K,J,Z){if(typeof K!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof K);var se=K.indexOf("?"),ae=se!==-1&&se<K.indexOf("#")?"?":"#",ue=K.split(ae),ce=/\\/g;ue[0]=ue[0].replace(ce,"/"),K=ue.join(ae);var he=K;if(he=he.trim(),!Z&&K.split("#").length===1){var pe=C.exec(he);if(pe)return this.path=he,this.href=he,this.pathname=pe[1],pe[2]?(this.search=pe[2],J?this.query=X.parse(this.search.substr(1)):this.query=this.search.substr(1)):J&&(this.search="",this.query={}),this}var ye=T.exec(he);if(ye){ye=ye[0];var _e=ye.toLowerCase();this.protocol=_e,he=he.substr(ye.length)}if(Z||ye||he.match(/^\/\/[^@/]+@[^@/]+/)){var ee=he.substr(0,2)==="//";ee&&!(ye&&U[ye])&&(he=he.substr(2),this.slashes=!0)}if(!U[ye]&&(ee||ye&&!G[ye])){for(var re=-1,Q=0;Q<B.length;Q++){var te=he.indexOf(B[Q]);te!==-1&&(re===-1||te<re)&&(re=te)}var ne,ie;re===-1?ie=he.lastIndexOf("@"):ie=he.lastIndexOf("@",re),ie!==-1&&(ne=he.slice(0,ie),he=he.slice(ie+1),this.auth=decodeURIComponent(ne)),re=-1;for(var Q=0;Q<R.length;Q++){var te=he.indexOf(R[Q]);te!==-1&&(re===-1||te<re)&&(re=te)}re===-1&&(re=he.length),this.host=he.slice(0,re),he=he.slice(re),this.parseHost(),this.hostname=this.hostname||"";var fe=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!fe)for(var me=this.hostname.split(/\./),Q=0,be=me.length;Q<be;Q++){var Pe=me[Q];if(Pe&&!Pe.match(V)){for(var Me="",ge=0,Se=Pe.length;ge<Se;ge++)Pe.charCodeAt(ge)>127?Me+="x":Me+=Pe[ge];if(!Me.match(V)){var Ee=me.slice(0,Q),Ae=me.slice(Q+1),Ie=Pe.match(L);Ie&&(Ee.push(Ie[1]),Ae.unshift(Ie[2])),Ae.length&&(he="/"+Ae.join(".")+he),this.hostname=Ee.join(".");break}}}this.hostname.length>O?this.hostname="":this.hostname=this.hostname.toLowerCase(),fe||(this.hostname=A.toASCII(this.hostname));var oe=this.port?":"+this.port:"",le=this.hostname||"";this.host=le+oe,this.href+=this.host,fe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),he[0]!=="/"&&(he="/"+he))}if(!D[_e])for(var Q=0,be=F.length;Q<be;Q++){var de=F[Q];if(he.indexOf(de)!==-1){var ve=encodeURIComponent(de);ve===de&&(ve=escape(de)),he=he.split(de).join(ve)}}var xe=he.indexOf("#");xe!==-1&&(this.hash=he.substr(xe),he=he.slice(0,xe));var Ce=he.indexOf("?");if(Ce!==-1?(this.search=he.substr(Ce),this.query=he.substr(Ce+1),J&&(this.query=X.parse(this.query)),he=he.slice(0,Ce)):J&&(this.search="",this.query={}),he&&(this.pathname=he),G[_e]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var oe=this.pathname||"",Fe=this.search||"";this.path=oe+Fe}return this.href=this.format(),this};function Y(K){return typeof K=="string"&&(K=z(K)),K instanceof _?K.format():_.prototype.format.call(K)}_.prototype.format=function(){var K=this.auth||"";K&&(K=encodeURIComponent(K),K=K.replace(/%3A/i,":"),K+="@");var J=this.protocol||"",Z=this.pathname||"",se=this.hash||"",ae=!1,ue="";this.host?ae=K+this.host:this.hostname&&(ae=K+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(ae+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(ue=X.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var ce=this.search||ue&&"?"+ue||"";return J&&J.substr(-1)!==":"&&(J+=":"),this.slashes||(!J||G[J])&&ae!==!1?(ae="//"+(ae||""),Z&&Z.charAt(0)!=="/"&&(Z="/"+Z)):ae||(ae=""),se&&se.charAt(0)!=="#"&&(se="#"+se),ce&&ce.charAt(0)!=="?"&&(ce="?"+ce),Z=Z.replace(/[?#]/g,function(he){return encodeURIComponent(he)}),ce=ce.replace("#","%23"),J+ae+Z+ce+se};function W(K,J){return z(K,!1,!0).resolve(J)}_.prototype.resolve=function(K){return this.resolveObject(z(K,!1,!0)).format()};function q(K,J){return K?z(K,!1,!0).resolveObject(J):J}return _.prototype.resolveObject=function(K){if(typeof K=="string"){var J=new _;J.parse(K,!1,!0),K=J}for(var Z=new _,se=Object.keys(this),ae=0;ae<se.length;ae++){var ue=se[ae];Z[ue]=this[ue]}if(Z.hash=K.hash,K.href==="")return Z.href=Z.format(),Z;if(K.slashes&&!K.protocol){for(var ce=Object.keys(K),he=0;he<ce.length;he++){var pe=ce[he];pe!=="protocol"&&(Z[pe]=K[pe])}return G[Z.protocol]&&Z.hostname&&!Z.pathname&&(Z.pathname="/",Z.path=Z.pathname),Z.href=Z.format(),Z}if(K.protocol&&K.protocol!==Z.protocol){if(!G[K.protocol]){for(var ye=Object.keys(K),_e=0;_e<ye.length;_e++){var ee=ye[_e];Z[ee]=K[ee]}return Z.href=Z.format(),Z}if(Z.protocol=K.protocol,!K.host&&!U[K.protocol]){for(var be=(K.pathname||"").split("/");be.length&&!(K.host=be.shift()););K.host||(K.host=""),K.hostname||(K.hostname=""),be[0]!==""&&be.unshift(""),be.length<2&&be.unshift(""),Z.pathname=be.join("/")}else Z.pathname=K.pathname;if(Z.search=K.search,Z.query=K.query,Z.host=K.host||"",Z.auth=K.auth,Z.hostname=K.hostname||K.host,Z.port=K.port,Z.pathname||Z.search){var re=Z.pathname||"",Q=Z.search||"";Z.path=re+Q}return Z.slashes=Z.slashes||K.slashes,Z.href=Z.format(),Z}var te=Z.pathname&&Z.pathname.charAt(0)==="/",ne=K.host||K.pathname&&K.pathname.charAt(0)==="/",ie=ne||te||Z.host&&K.pathname,fe=ie,me=Z.pathname&&Z.pathname.split("/")||[],be=K.pathname&&K.pathname.split("/")||[],Pe=Z.protocol&&!G[Z.protocol];if(Pe&&(Z.hostname="",Z.port=null,Z.host&&(me[0]===""?me[0]=Z.host:me.unshift(Z.host)),Z.host="",K.protocol&&(K.hostname=null,K.port=null,K.host&&(be[0]===""?be[0]=K.host:be.unshift(K.host)),K.host=null),ie=ie&&(be[0]===""||me[0]==="")),ne)Z.host=K.host||K.host===""?K.host:Z.host,Z.hostname=K.hostname||K.hostname===""?K.hostname:Z.hostname,Z.search=K.search,Z.query=K.query,me=be;else if(be.length)me||(me=[]),me.pop(),me=me.concat(be),Z.search=K.search,Z.query=K.query;else if(K.search!=null){if(Pe){Z.host=me.shift(),Z.hostname=Z.host;var Me=Z.host&&Z.host.indexOf("@")>0?Z.host.split("@"):!1;Me&&(Z.auth=Me.shift(),Z.hostname=Me.shift(),Z.host=Z.hostname)}return Z.search=K.search,Z.query=K.query,(Z.pathname!==null||Z.search!==null)&&(Z.path=(Z.pathname?Z.pathname:"")+(Z.search?Z.search:"")),Z.href=Z.format(),Z}if(!me.length)return Z.pathname=null,Z.search?Z.path="/"+Z.search:Z.path=null,Z.href=Z.format(),Z;for(var ge=me.slice(-1)[0],Se=(Z.host||K.host||me.length>1)&&(ge==="."||ge==="..")||ge==="",Ee=0,Ae=me.length;Ae>=0;Ae--)ge=me[Ae],ge==="."?me.splice(Ae,1):ge===".."?(me.splice(Ae,1),Ee++):Ee&&(me.splice(Ae,1),Ee--);if(!ie&&!fe)for(;Ee--;Ee)me.unshift("..");ie&&me[0]!==""&&(!me[0]||me[0].charAt(0)!=="/")&&me.unshift(""),Se&&me.join("/").substr(-1)!=="/"&&me.push("");var Ie=me[0]===""||me[0]&&me[0].charAt(0)==="/";if(Pe){Z.hostname=Ie?"":me.length?me.shift():"",Z.host=Z.hostname;var Me=Z.host&&Z.host.indexOf("@")>0?Z.host.split("@"):!1;Me&&(Z.auth=Me.shift(),Z.hostname=Me.shift(),Z.host=Z.hostname)}return ie=ie||Z.host&&me.length,ie&&!Ie&&me.unshift(""),me.length>0?Z.pathname=me.join("/"):(Z.pathname=null,Z.path=null),(Z.pathname!==null||Z.search!==null)&&(Z.path=(Z.pathname?Z.pathname:"")+(Z.search?Z.search:"")),Z.auth=K.auth||Z.auth,Z.slashes=Z.slashes||K.slashes,Z.href=Z.format(),Z},_.prototype.parseHost=function(){var K=this.host,J=E.exec(K);J&&(J=J[0],J!==":"&&(this.port=J.substr(1)),K=K.substr(0,K.length-J.length)),K&&(this.hostname=K)},url.parse=z,url.resolve=W,url.resolveObject=q,url.format=Y,url.Url=_,url}requireUrl();const warnings={};function deprecation(A,_,T=3){if(warnings[_])return;let E=new Error().stack;typeof E>"u"?console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${A}`):(E=E.split(`
`).splice(T).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${_}
Deprecated since v${A}`),console.warn(E),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${_}
Deprecated since v${A}`),console.warn(E))),warnings[_]=!0}function assertPath(A){if(typeof A!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(A)}`)}function removeUrlParams(A){return A.split("?")[0].split("#")[0]}function escapeRegExp(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(A,_,T){return A.replace(new RegExp(escapeRegExp(_),"g"),T)}function normalizeStringPosix(A,_){let T="",E=0,C=-1,P=0,I=-1;for(let F=0;F<=A.length;++F){if(F<A.length)I=A.charCodeAt(F);else{if(I===47)break;I=47}if(I===47){if(!(C===F-1||P===1))if(C!==F-1&&P===2){if(T.length<2||E!==2||T.charCodeAt(T.length-1)!==46||T.charCodeAt(T.length-2)!==46){if(T.length>2){const R=T.lastIndexOf("/");if(R!==T.length-1){R===-1?(T="",E=0):(T=T.slice(0,R),E=T.length-1-T.lastIndexOf("/")),C=F,P=0;continue}}else if(T.length===2||T.length===1){T="",E=0,C=F,P=0;continue}}}else T.length>0?T+=`/${A.slice(C+1,F)}`:T=A.slice(C+1,F),E=F-C-1;C=F,P=0}else I===46&&P!==-1?++P:P=-1}return T}const path={toPosix(A){return replaceAll(A,"\\","/")},isUrl(A){return/^https?:/.test(this.toPosix(A))},isDataUrl(A){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(A)},isBlobUrl(A){return A.startsWith("blob:")},hasProtocol(A){return/^[^/:]+:/.test(this.toPosix(A))},getProtocol(A){assertPath(A),A=this.toPosix(A);const _=/^file:\/\/\//.exec(A);if(_)return _[0];const T=/^[^/:]+:\/{0,2}/.exec(A);return T?T[0]:""},toAbsolute(A,_,T){if(assertPath(A),this.isDataUrl(A)||this.isBlobUrl(A))return A;const E=removeUrlParams(this.toPosix(_??settings$1.ADAPTER.getBaseUrl())),C=removeUrlParams(this.toPosix(T??this.rootname(E)));return A=this.toPosix(A),A.startsWith("/")?path.join(C,A.slice(1)):this.isAbsolute(A)?A:this.join(E,A)},normalize(A){if(assertPath(A),A.length===0)return".";if(this.isDataUrl(A)||this.isBlobUrl(A))return A;A=this.toPosix(A);let _="";const T=A.startsWith("/");this.hasProtocol(A)&&(_=this.rootname(A),A=A.slice(_.length));const E=A.endsWith("/");return A=normalizeStringPosix(A),A.length>0&&E&&(A+="/"),T?`/${A}`:_+A},isAbsolute(A){return assertPath(A),A=this.toPosix(A),this.hasProtocol(A)?!0:A.startsWith("/")},join(...A){if(A.length===0)return".";let _;for(let T=0;T<A.length;++T){const E=A[T];if(assertPath(E),E.length>0)if(_===void 0)_=E;else{const C=A[T-1]??"";this.joinExtensions.includes(this.extname(C).toLowerCase())?_+=`/../${E}`:_+=`/${E}`}}return _===void 0?".":this.normalize(_)},dirname(A){if(assertPath(A),A.length===0)return".";A=this.toPosix(A);let _=A.charCodeAt(0);const T=_===47;let E=-1,C=!0;const P=this.getProtocol(A),I=A;A=A.slice(P.length);for(let F=A.length-1;F>=1;--F)if(_=A.charCodeAt(F),_===47){if(!C){E=F;break}}else C=!1;return E===-1?T?"/":this.isUrl(I)?P+A:P:T&&E===1?"//":P+A.slice(0,E)},rootname(A){assertPath(A),A=this.toPosix(A);let _="";if(A.startsWith("/")?_="/":_=this.getProtocol(A),this.isUrl(A)){const T=A.indexOf("/",_.length);T!==-1?_=A.slice(0,T):_=A,_.endsWith("/")||(_+="/")}return _},basename(A,_){assertPath(A),_&&assertPath(_),A=removeUrlParams(this.toPosix(A));let T=0,E=-1,C=!0,P;if(_!==void 0&&_.length>0&&_.length<=A.length){if(_.length===A.length&&_===A)return"";let I=_.length-1,F=-1;for(P=A.length-1;P>=0;--P){const R=A.charCodeAt(P);if(R===47){if(!C){T=P+1;break}}else F===-1&&(C=!1,F=P+1),I>=0&&(R===_.charCodeAt(I)?--I===-1&&(E=P):(I=-1,E=F))}return T===E?E=F:E===-1&&(E=A.length),A.slice(T,E)}for(P=A.length-1;P>=0;--P)if(A.charCodeAt(P)===47){if(!C){T=P+1;break}}else E===-1&&(C=!1,E=P+1);return E===-1?"":A.slice(T,E)},extname(A){assertPath(A),A=removeUrlParams(this.toPosix(A));let _=-1,T=0,E=-1,C=!0,P=0;for(let I=A.length-1;I>=0;--I){const F=A.charCodeAt(I);if(F===47){if(!C){T=I+1;break}continue}E===-1&&(C=!1,E=I+1),F===46?_===-1?_=I:P!==1&&(P=1):_!==-1&&(P=-1)}return _===-1||E===-1||P===0||P===1&&_===E-1&&_===T+1?"":A.slice(_,E)},parse(A){assertPath(A);const _={root:"",dir:"",base:"",ext:"",name:""};if(A.length===0)return _;A=removeUrlParams(this.toPosix(A));let T=A.charCodeAt(0);const E=this.isAbsolute(A);let C;_.root=this.rootname(A),E||this.hasProtocol(A)?C=1:C=0;let P=-1,I=0,F=-1,R=!0,B=A.length-1,O=0;for(;B>=C;--B){if(T=A.charCodeAt(B),T===47){if(!R){I=B+1;break}continue}F===-1&&(R=!1,F=B+1),T===46?P===-1?P=B:O!==1&&(O=1):P!==-1&&(O=-1)}return P===-1||F===-1||O===0||O===1&&P===F-1&&P===I+1?F!==-1&&(I===0&&E?_.base=_.name=A.slice(1,F):_.base=_.name=A.slice(I,F)):(I===0&&E?(_.name=A.slice(1,P),_.base=A.slice(1,F)):(_.name=A.slice(I,P),_.base=A.slice(I,F)),_.ext=A.slice(P,F)),_.dir=this.dirname(A),_},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var P;const A=document.createElement("canvas").getContext("webgl");if(!A)return ALPHA_MODES.UNPACK;const _=await new Promise(I=>{const F=document.createElement("video");F.onloadeddata=()=>I(F),F.onerror=()=>I(null),F.autoplay=!1,F.crossOrigin="anonymous",F.preload="auto",F.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",F.load()});if(!_)return ALPHA_MODES.UNPACK;const T=A.createTexture();A.bindTexture(A.TEXTURE_2D,T);const E=A.createFramebuffer();A.bindFramebuffer(A.FRAMEBUFFER,E),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,T,0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.NONE),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,_);const C=new Uint8Array(4);return A.readPixels(0,0,1,1,A.RGBA,A.UNSIGNED_BYTE,C),A.deleteFramebuffer(E),A.deleteTexture(T),(P=A.getExtension("WEBGL_lose_context"))==null||P.loseContext(),C[0]<=C[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var _;const A={stencil:!0,failIfMajorPerformanceCaveat:settings$1.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings$1.ADAPTER.getWebGLRenderingContext())return!1;const T=settings$1.ADAPTER.createCanvas();let E=T.getContext("webgl",A)||T.getContext("experimental-webgl",A);const C=!!((_=E==null?void 0:E.getContextAttributes())!=null&&_.stencil);if(E){const P=E.getExtension("WEBGL_lose_context");P&&P.loseContext()}return E=null,C}catch{return!1}}()),supported}k([namesPlugin]);const _Color$1=class Ft{constructor(_=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=_}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(_){return this.value=_,this}set value(_){if(_ instanceof Ft)this._value=this.cloneSource(_._value),this._int=_._int,this._components.set(_._components);else{if(_===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,_))&&(this.normalize(_),this._value=this.cloneSource(_))}}get value(){return this._value}cloneSource(_){return typeof _=="string"||typeof _=="number"||_ instanceof Number||_===null?_:Array.isArray(_)||ArrayBuffer.isView(_)?_.slice(0):typeof _=="object"&&_!==null?{..._}:_}isSourceEqual(_,T){const E=typeof _;if(E!==typeof T)return!1;if(E==="number"||E==="string"||_ instanceof Number)return _===T;if(Array.isArray(_)&&Array.isArray(T)||ArrayBuffer.isView(_)&&ArrayBuffer.isView(T))return _.length!==T.length?!1:_.every((C,P)=>C===T[P]);if(_!==null&&T!==null){const C=Object.keys(_),P=Object.keys(T);return C.length!==P.length?!1:C.every(I=>_[I]===T[I])}return _===T}toRgba(){const[_,T,E,C]=this._components;return{r:_,g:T,b:E,a:C}}toRgb(){const[_,T,E]=this._components;return{r:_,g:T,b:E}}toRgbaString(){const[_,T,E]=this.toUint8RgbArray();return`rgba(${_},${T},${E},${this.alpha})`}toUint8RgbArray(_){const[T,E,C]=this._components;return _=_??[],_[0]=Math.round(T*255),_[1]=Math.round(E*255),_[2]=Math.round(C*255),_}toRgbArray(_){_=_??[];const[T,E,C]=this._components;return _[0]=T,_[1]=E,_[2]=C,_}toNumber(){return this._int}toLittleEndianNumber(){const _=this._int;return(_>>16)+(_&65280)+((_&255)<<16)}multiply(_){const[T,E,C,P]=Ft.temp.setValue(_)._components;return this._components[0]*=T,this._components[1]*=E,this._components[2]*=C,this._components[3]*=P,this.refreshInt(),this._value=null,this}premultiply(_,T=!0){return T&&(this._components[0]*=_,this._components[1]*=_,this._components[2]*=_),this._components[3]=_,this.refreshInt(),this._value=null,this}toPremultiplied(_,T=!0){if(_===1)return(255<<24)+this._int;if(_===0)return T?0:this._int;let E=this._int>>16&255,C=this._int>>8&255,P=this._int&255;return T&&(E=E*_+.5|0,C=C*_+.5|0,P=P*_+.5|0),(_*255<<24)+(E<<16)+(C<<8)+P}toHex(){const _=this._int.toString(16);return`#${"000000".substring(0,6-_.length)+_}`}toHexa(){const _=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-_.length)+_}setAlpha(_){return this._components[3]=this._clamp(_),this}round(_){const[T,E,C]=this._components;return this._components[0]=Math.round(T*_)/_,this._components[1]=Math.round(E*_)/_,this._components[2]=Math.round(C*_)/_,this.refreshInt(),this._value=null,this}toArray(_){_=_??[];const[T,E,C,P]=this._components;return _[0]=T,_[1]=E,_[2]=C,_[3]=P,_}normalize(_){let T,E,C,P;if((typeof _=="number"||_ instanceof Number)&&_>=0&&_<=16777215){const I=_;T=(I>>16&255)/255,E=(I>>8&255)/255,C=(I&255)/255,P=1}else if((Array.isArray(_)||_ instanceof Float32Array)&&_.length>=3&&_.length<=4)_=this._clamp(_),[T,E,C,P=1]=_;else if((_ instanceof Uint8Array||_ instanceof Uint8ClampedArray)&&_.length>=3&&_.length<=4)_=this._clamp(_,0,255),[T,E,C,P=255]=_,T/=255,E/=255,C/=255,P/=255;else if(typeof _=="string"||typeof _=="object"){if(typeof _=="string"){const F=Ft.HEX_PATTERN.exec(_);F&&(_=`#${F[2]}`)}const I=w(_);I.isValid()&&({r:T,g:E,b:C,a:P}=I.rgba,T/=255,E/=255,C/=255)}if(T!==void 0)this._components[0]=T,this._components[1]=E,this._components[2]=C,this._components[3]=P,this.refreshInt();else throw new Error(`Unable to convert color ${_}`)}refreshInt(){this._clamp(this._components);const[_,T,E]=this._components;this._int=(_*255<<16)+(T*255<<8)+(E*255|0)}_clamp(_,T=0,E=1){return typeof _=="number"?Math.min(Math.max(_,T),E):(_.forEach((C,P)=>{_[P]=Math.min(Math.max(C,T),E)}),_)}};_Color$1.shared=new _Color$1,_Color$1.temp=new _Color$1,_Color$1.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color$1=_Color$1;function hex2rgb(A,_=[]){return deprecation("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Color$1.shared.setValue(A).toRgbArray(_)}function rgb2hex(A){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color$1.shared.setValue(A).toNumber()}function mapPremultipliedBlendModes(){const A=[],_=[];for(let E=0;E<32;E++)A[E]=E,_[E]=E;A[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,A[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,A[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,_[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,_[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,_[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const T=[];return T.push(_),T.push(A),T}const premultiplyBlendMode=mapPremultipliedBlendModes();function getBufferType(A){if(A.BYTES_PER_ELEMENT===4)return A instanceof Float32Array?"Float32Array":A instanceof Uint32Array?"Uint32Array":"Int32Array";if(A.BYTES_PER_ELEMENT===2){if(A instanceof Uint16Array)return"Uint16Array"}else if(A.BYTES_PER_ELEMENT===1&&A instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(A){return A+=A===0?1:0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A+1}function isPow2(A){return!(A&A-1)&&!!A}function log2(A){let _=(A>65535?1:0)<<4;A>>>=_;let T=(A>255?1:0)<<3;return A>>>=T,_|=T,T=(A>15?1:0)<<2,A>>>=T,_|=T,T=(A>3?1:0)<<1,A>>>=T,_|=T,_|A>>1}function removeItems(A,_,T){const E=A.length;let C;if(_>=E||T===0)return;T=_+T>E?E-_:T;const P=E-T;for(C=_;C<P;++C)A[C]=A[C+T];A.length=P}function sign(A){return A===0?0:A<0?-1:1}let nextUid=0;function uid(){return++nextUid}const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);function determineCrossOrigin(A,_=globalThis.location){if(A.startsWith("data:"))return"";_=_||globalThis.location;const T=new URL(A,document.baseURI);return T.hostname!==_.hostname||T.port!==_.port||T.protocol!==_.protocol?"anonymous":""}function getResolutionOfUrl(A,_=1){var E;const T=(E=settings$1.RETINA_PREFIX)==null?void 0:E.exec(A);return T?parseFloat(T[1]):_}var ExtensionType=(A=>(A.Renderer="renderer",A.Application="application",A.RendererSystem="renderer-webgl-system",A.RendererPlugin="renderer-webgl-plugin",A.CanvasRendererSystem="renderer-canvas-system",A.CanvasRendererPlugin="renderer-canvas-plugin",A.Asset="asset",A.LoadParser="load-parser",A.ResolveParser="resolve-parser",A.CacheParser="cache-parser",A.DetectionParser="detection-parser",A))(ExtensionType||{});const normalizeExtension=A=>{if(typeof A=="function"||typeof A=="object"&&A.extension){if(!A.extension)throw new Error("Extension class must have an extension object");A={...typeof A.extension!="object"?{type:A.extension}:A.extension,ref:A}}if(typeof A=="object")A={...A};else throw new Error("Invalid extension type");return typeof A.type=="string"&&(A.type=[A.type]),A},normalizePriority=(A,_)=>normalizeExtension(A).priority??_,extensions={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...A){return A.map(normalizeExtension).forEach(_=>{_.type.forEach(T=>{var E,C;return(C=(E=this._removeHandlers)[T])==null?void 0:C.call(E,_)})}),this},add(...A){return A.map(normalizeExtension).forEach(_=>{_.type.forEach(T=>{var P,I;const E=this._addHandlers,C=this._queue;E[T]?(P=E[T])==null||P.call(E,_):(C[T]=C[T]||[],(I=C[T])==null||I.push(_))})}),this},handle(A,_,T){var I;const E=this._addHandlers,C=this._removeHandlers;if(E[A]||C[A])throw new Error(`Extension type ${A} already has a handler`);E[A]=_,C[A]=T;const P=this._queue;return P[A]&&((I=P[A])==null||I.forEach(F=>_(F)),delete P[A]),this},handleByMap(A,_){return this.handle(A,T=>{T.name&&(_[T.name]=T.ref)},T=>{T.name&&delete _[T.name]})},handleByList(A,_,T=-1){return this.handle(A,E=>{_.includes(E.ref)||(_.push(E.ref),_.sort((C,P)=>normalizePriority(P,T)-normalizePriority(C,T)))},E=>{const C=_.indexOf(E.ref);C!==-1&&_.splice(C,1)})}};class ViewableBuffer{constructor(_){typeof _=="number"?this.rawBinaryData=new ArrayBuffer(_):_ instanceof Uint8Array?this.rawBinaryData=_.buffer:this.rawBinaryData=_,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(_){return this[`${_}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(_){switch(_){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${_} isn't a valid view type`)}}}const fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(A){let _="";for(let T=0;T<A;++T)T>0&&(_+=`
else `),T<A-1&&(_+=`if(test == ${T}.0){}`);return _}function checkMaxIfStatementsInShader(A,_){if(A===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const T=_.createShader(_.FRAGMENT_SHADER);for(;;){const E=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(A));if(_.shaderSource(T,E),_.compileShader(T),!_.getShaderParameter(T,_.COMPILE_STATUS))A=A/2|0;else break}return A}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(_){!!(this.data&1<<BLEND$1)!==_&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(_){!!(this.data&1<<OFFSET$1)!==_&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(_){!!(this.data&1<<CULLING$1)!==_&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(_){!!(this.data&1<<DEPTH_TEST$1)!==_&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(_){!!(this.data&1<<DEPTH_MASK$1)!==_&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(_){!!(this.data&1<<WINDING$1)!==_&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(_){this.blend=_!==BLEND_MODES.NONE,this._blendMode=_}get polygonOffset(){return this._polygonOffset}set polygonOffset(_){this.offsets=!!_,this._polygonOffset=_}static for2d(){const _=new State;return _.depthTest=!1,_.blend=!0,_}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(A,_){if(!A)return null;let T="";if(typeof A=="string"){const E=/\.(\w{3,4})(?:$|\?|#)/i.exec(A);E&&(T=E[1].toLowerCase())}for(let E=INSTALLED.length-1;E>=0;--E){const C=INSTALLED[E];if(C.test&&C.test(A,T))return new C(A,_)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(_){this.items=[],this._name=_,this._aliasCount=0}emit(_,T,E,C,P,I,F,R){if(arguments.length>8)throw new Error("max arguments reached");const{name:B,items:O}=this;this._aliasCount++;for(let V=0,L=O.length;V<L;V++)O[V][B](_,T,E,C,P,I,F,R);return O===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(_){return _[this._name]&&(this.ensureNonAliasedItems(),this.remove(_),this.items.push(_)),this}remove(_){const T=this.items.indexOf(_);return T!==-1&&(this.ensureNonAliasedItems(),this.items.splice(T,1)),this}contains(_){return this.items.includes(_)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(_=0,T=0){this._width=_,this._height=T,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(_){this.onResize.add(_),this.onUpdate.add(_),this.onError.add(_),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(_){this.onResize.remove(_),this.onUpdate.remove(_),this.onError.remove(_)}resize(_,T){(_!==this._width||T!==this._height)&&(this._width=_,this._height=T,this.onResize.emit(_,T))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(_,T,E){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(_,T){return!1}}class BufferResource extends Resource{constructor(_,T){const{width:E,height:C}=T||{};if(!E||!C)throw new Error("BufferResource width or height invalid");super(E,C),this.data=_,this.unpackAlignment=T.unpackAlignment??4}upload(_,T,E){const C=_.gl;C.pixelStorei(C.UNPACK_ALIGNMENT,this.unpackAlignment),C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.alphaMode===ALPHA_MODES.UNPACK);const P=T.realWidth,I=T.realHeight;return E.width===P&&E.height===I?C.texSubImage2D(T.target,0,0,0,P,I,T.format,E.type,this.data):(E.width=P,E.height=I,C.texImage2D(T.target,0,E.internalFormat,P,I,0,T.format,E.type,this.data)),!0}dispose(){this.data=null}static test(_){return _===null||_ instanceof Int8Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class xt extends EventEmitter{constructor(_=null,T=null){super(),T=Object.assign({},xt.defaultOptions,T);const{alphaMode:E,mipmap:C,anisotropicLevel:P,scaleMode:I,width:F,height:R,wrapMode:B,format:O,type:V,target:L,resolution:D,resourceOptions:U}=T;_&&!(_ instanceof Resource)&&(_=autoDetectResource(_,U),_.internal=!0),this.resolution=D||settings$1.RESOLUTION,this.width=Math.round((F||0)*this.resolution)/this.resolution,this.height=Math.round((R||0)*this.resolution)/this.resolution,this._mipmap=C,this.anisotropicLevel=P,this._wrapMode=B,this._scaleMode=I,this.format=O,this.type=V,this.target=L,this.alphaMode=E,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=F>0&&R>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(_)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(_){this._mipmap!==_&&(this._mipmap=_,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(_){this._scaleMode!==_&&(this._scaleMode=_,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(_){this._wrapMode!==_&&(this._wrapMode=_,this.dirtyStyleId++)}setStyle(_,T){let E;return _!==void 0&&_!==this.scaleMode&&(this.scaleMode=_,E=!0),T!==void 0&&T!==this.mipmap&&(this.mipmap=T,E=!0),E&&this.dirtyStyleId++,this}setSize(_,T,E){return E=E||this.resolution,this.setRealSize(_*E,T*E,E)}setRealSize(_,T,E){return this.resolution=E||this.resolution,this.width=Math.round(_)/this.resolution,this.height=Math.round(T)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(_){const T=this.resolution;return T===_?this:(this.resolution=_,this.valid&&(this.width=Math.round(this.width*T)/_,this.height=Math.round(this.height*T)/_,this.emit("update",this)),this._refreshPOT(),this)}setResource(_){if(this.resource===_)return this;if(this.resource)throw new Error("Resource can be set only once");return _.bind(this),this.resource=_,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(_){this.emit("error",this,_)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),xt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(_,T,E=settings$1.STRICT_TEXTURE_CACHE){const C=typeof _=="string";let P=null;if(C)P=_;else{if(!_._pixiId){const F=(T==null?void 0:T.pixiIdPrefix)||"pixiid";_._pixiId=`${F}_${uid()}`}P=_._pixiId}let I=BaseTextureCache[P];if(C&&E&&!I)throw new Error(`The cacheId "${P}" does not exist in BaseTextureCache.`);return I||(I=new xt(_,T),I.cacheId=P,xt.addToCache(I,P)),I}static fromBuffer(_,T,E,C){_=_||new Float32Array(T*E*4);const P=new BufferResource(_,{width:T,height:E,...C==null?void 0:C.resourceOptions});let I,F;return _ instanceof Float32Array?(I=FORMATS.RGBA,F=TYPES.FLOAT):_ instanceof Int32Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.INT):_ instanceof Uint32Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.UNSIGNED_INT):_ instanceof Int16Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.SHORT):_ instanceof Uint16Array?(I=FORMATS.RGBA_INTEGER,F=TYPES.UNSIGNED_SHORT):_ instanceof Int8Array?(I=FORMATS.RGBA,F=TYPES.BYTE):(I=FORMATS.RGBA,F=TYPES.UNSIGNED_BYTE),P.internal=!0,new xt(P,Object.assign({},defaultBufferOptions,{type:F,format:I},C))}static addToCache(_,T){T&&(_.textureCacheIds.includes(T)||_.textureCacheIds.push(T),BaseTextureCache[T]&&BaseTextureCache[T]!==_&&console.warn(`BaseTexture added to the cache with an id [${T}] that already had an entry`),BaseTextureCache[T]=_)}static removeFromCache(_){if(typeof _=="string"){const T=BaseTextureCache[_];if(T){const E=T.textureCacheIds.indexOf(_);return E>-1&&T.textureCacheIds.splice(E,1),delete BaseTextureCache[_],T}}else if(_!=null&&_.textureCacheIds){for(let T=0;T<_.textureCacheIds.length;++T)delete BaseTextureCache[_.textureCacheIds[T]];return _.textureCacheIds.length=0,_}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(_,T=!0,E=!1){this.data=_||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=E,this.static=T,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(_){_ instanceof Array&&(_=new Float32Array(_)),this.data=_||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(_){this.type=_?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(_){return _ instanceof Array&&(_=new Float32Array(_)),new Buffer(_)}}class Attribute{constructor(_,T=0,E=!1,C=TYPES.FLOAT,P,I,F,R=1){this.buffer=_,this.size=T,this.normalized=E,this.type=C,this.stride=P,this.start=I,this.instance=F,this.divisor=R}destroy(){this.buffer=null}static from(_,T,E,C,P){return new Attribute(_,T,E,C,P)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(A,_){let T=0,E=0;const C={};for(let R=0;R<A.length;R++)E+=_[R],T+=A[R].length;const P=new ArrayBuffer(T*4);let I=null,F=0;for(let R=0;R<A.length;R++){const B=_[R],O=A[R],V=getBufferType(O);C[V]||(C[V]=new map$1[V](P)),I=C[V];for(let L=0;L<O.length;L++){const D=(L/B|0)*E+F,U=L%B;I[D+U]=O[L]}F+=B}return new Float32Array(P)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(_=[],T={}){this.buffers=_,this.indexBuffer=null,this.attributes=T,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(_,T,E=0,C=!1,P,I,F,R=!1){if(!T)throw new Error("You must pass a buffer when creating an attribute");T instanceof Buffer||(T instanceof Array&&(T=new Float32Array(T)),T=new Buffer(T));const B=_.split("|");if(B.length>1){for(let V=0;V<B.length;V++)this.addAttribute(B[V],T,E,C,P);return this}let O=this.buffers.indexOf(T);return O===-1&&(this.buffers.push(T),O=this.buffers.length-1),this.attributes[_]=new Attribute(O,E,C,P,I,F,R),this.instanced=this.instanced||R,this}getAttribute(_){return this.attributes[_]}getBuffer(_){return this.buffers[this.getAttribute(_).buffer]}addIndex(_){return _ instanceof Buffer||(_ instanceof Array&&(_=new Uint16Array(_)),_=new Buffer(_)),_.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=_,this.buffers.includes(_)||this.buffers.push(_),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const _=[],T=[],E=new Buffer;let C;for(C in this.attributes){const P=this.attributes[C],I=this.buffers[P.buffer];_.push(I.data),T.push(P.size*byteSizeMap$1[P.type]/4),P.buffer=0}for(E.data=interleaveTypedArrays(_,T),C=0;C<this.buffers.length;C++)this.buffers[C]!==this.indexBuffer&&this.buffers[C].destroy();return this.buffers=[E],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const _ in this.attributes){const T=this.attributes[_];return this.buffers[T.buffer].data.length/(T.stride/4||T.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const _=new Geometry;for(let T=0;T<this.buffers.length;T++)_.buffers[T]=new Buffer(this.buffers[T].data.slice(0));for(const T in this.attributes){const E=this.attributes[T];_.attributes[T]=new Attribute(E.buffer,E.size,E.normalized,E.type,E.stride,E.start,E.instance)}return this.indexBuffer&&(_.indexBuffer=_.buffers[this.buffers.indexOf(this.indexBuffer)],_.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),_}static merge(_){const T=new Geometry,E=[],C=[],P=[];let I;for(let F=0;F<_.length;F++){I=_[F];for(let R=0;R<I.buffers.length;R++)C[R]=C[R]||0,C[R]+=I.buffers[R].data.length,P[R]=0}for(let F=0;F<I.buffers.length;F++)E[F]=new map[getBufferType(I.buffers[F].data)](C[F]),T.buffers[F]=new Buffer(E[F]);for(let F=0;F<_.length;F++){I=_[F];for(let R=0;R<I.buffers.length;R++)E[R].set(I.buffers[R].data,P[R]),P[R]+=I.buffers[R].data.length}if(T.attributes=I.attributes,I.indexBuffer){T.indexBuffer=T.buffers[I.buffers.indexOf(I.indexBuffer)],T.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let F=0,R=0,B=0,O=0;for(let V=0;V<I.buffers.length;V++)if(I.buffers[V]!==I.indexBuffer){O=V;break}for(const V in I.attributes){const L=I.attributes[V];(L.buffer|0)===O&&(R+=L.size*byteSizeMap$1[L.type]/4)}for(let V=0;V<_.length;V++){const L=_[V].indexBuffer.data;for(let D=0;D<L.length;D++)T.indexBuffer.data[D+B]+=F;F+=_[V].buffers[O].data.length/R,B+=L.length}}return T}}class BatchGeometry extends Geometry{constructor(_=!1){super(),this._buffer=new Buffer(null,_,!1),this._indexBuffer=new Buffer(null,_,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(A=>(A[A.POLY=0]="POLY",A[A.RECT=1]="RECT",A[A.CIRC=2]="CIRC",A[A.ELIP=3]="ELIP",A[A.RREC=4]="RREC",A))(SHAPES||{});class Point{constructor(_=0,T=0){this.x=0,this.y=0,this.x=_,this.y=T}clone(){return new Point(this.x,this.y)}copyFrom(_){return this.set(_.x,_.y),this}copyTo(_){return _.set(this.x,this.y),_}equals(_){return _.x===this.x&&_.y===this.y}set(_=0,T=_){return this.x=_,this.y=T,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(_=0,T=0,E=0,C=0){this.x=Number(_),this.y=Number(T),this.width=Number(E),this.height=Number(C),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(_){return this.x=_.x,this.y=_.y,this.width=_.width,this.height=_.height,this}copyTo(_){return _.x=this.x,_.y=this.y,_.width=this.width,_.height=this.height,_}contains(_,T){return this.width<=0||this.height<=0?!1:_>=this.x&&_<this.x+this.width&&T>=this.y&&T<this.y+this.height}intersects(_,T){if(!T){const se=this.x<_.x?_.x:this.x;if((this.right>_.right?_.right:this.right)<=se)return!1;const ae=this.y<_.y?_.y:this.y;return(this.bottom>_.bottom?_.bottom:this.bottom)>ae}const E=this.left,C=this.right,P=this.top,I=this.bottom;if(C<=E||I<=P)return!1;const F=tempPoints$1[0].set(_.left,_.top),R=tempPoints$1[1].set(_.left,_.bottom),B=tempPoints$1[2].set(_.right,_.top),O=tempPoints$1[3].set(_.right,_.bottom);if(B.x<=F.x||R.y<=F.y)return!1;const V=Math.sign(T.a*T.d-T.b*T.c);if(V===0||(T.apply(F,F),T.apply(R,R),T.apply(B,B),T.apply(O,O),Math.max(F.x,R.x,B.x,O.x)<=E||Math.min(F.x,R.x,B.x,O.x)>=C||Math.max(F.y,R.y,B.y,O.y)<=P||Math.min(F.y,R.y,B.y,O.y)>=I))return!1;const L=V*(R.y-F.y),D=V*(F.x-R.x),U=L*E+D*P,G=L*C+D*P,X=L*E+D*I,z=L*C+D*I;if(Math.max(U,G,X,z)<=L*F.x+D*F.y||Math.min(U,G,X,z)>=L*O.x+D*O.y)return!1;const Y=V*(F.y-B.y),W=V*(B.x-F.x),q=Y*E+W*P,K=Y*C+W*P,J=Y*E+W*I,Z=Y*C+W*I;return!(Math.max(q,K,J,Z)<=Y*F.x+W*F.y||Math.min(q,K,J,Z)>=Y*O.x+W*O.y)}pad(_=0,T=_){return this.x-=_,this.y-=T,this.width+=_*2,this.height+=T*2,this}fit(_){const T=Math.max(this.x,_.x),E=Math.min(this.x+this.width,_.x+_.width),C=Math.max(this.y,_.y),P=Math.min(this.y+this.height,_.y+_.height);return this.x=T,this.width=Math.max(E-T,0),this.y=C,this.height=Math.max(P-C,0),this}ceil(_=1,T=.001){const E=Math.ceil((this.x+this.width-T)*_)/_,C=Math.ceil((this.y+this.height-T)*_)/_;return this.x=Math.floor((this.x+T)*_)/_,this.y=Math.floor((this.y+T)*_)/_,this.width=E-this.x,this.height=C-this.y,this}enlarge(_){const T=Math.min(this.x,_.x),E=Math.max(this.x+this.width,_.x+_.width),C=Math.min(this.y,_.y),P=Math.max(this.y+this.height,_.y+_.height);return this.x=T,this.width=E-T,this.y=C,this.height=P-C,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(_=0,T=0,E=0){this.x=_,this.y=T,this.radius=E,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(_,T){if(this.radius<=0)return!1;const E=this.radius*this.radius;let C=this.x-_,P=this.y-T;return C*=C,P*=P,C+P<=E}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(_=0,T=0,E=0,C=0){this.x=_,this.y=T,this.width=E,this.height=C,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(_,T){if(this.width<=0||this.height<=0)return!1;let E=(_-this.x)/this.width,C=(T-this.y)/this.height;return E*=E,C*=C,E+C<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(..._){let T=Array.isArray(_[0])?_[0]:_;if(typeof T[0]!="number"){const E=[];for(let C=0,P=T.length;C<P;C++)E.push(T[C].x,T[C].y);T=E}this.points=T,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const _=this.points.slice(),T=new Polygon(_);return T.closeStroke=this.closeStroke,T}contains(_,T){let E=!1;const C=this.points.length/2;for(let P=0,I=C-1;P<C;I=P++){const F=this.points[P*2],R=this.points[P*2+1],B=this.points[I*2],O=this.points[I*2+1];R>T!=O>T&&_<(B-F)*((T-R)/(O-R))+F&&(E=!E)}return E}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((A,_)=>`${A}, ${_}`,"")}]`};class RoundedRectangle{constructor(_=0,T=0,E=0,C=0,P=20){this.x=_,this.y=T,this.width=E,this.height=C,this.radius=P,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(_,T){if(this.width<=0||this.height<=0)return!1;if(_>=this.x&&_<=this.x+this.width&&T>=this.y&&T<=this.y+this.height){const E=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(T>=this.y+E&&T<=this.y+this.height-E||_>=this.x+E&&_<=this.x+this.width-E)return!0;let C=_-(this.x+E),P=T-(this.y+E);const I=E*E;if(C*C+P*P<=I||(C=_-(this.x+this.width-E),C*C+P*P<=I)||(P=T-(this.y+this.height-E),C*C+P*P<=I)||(C=_-(this.x+E),C*C+P*P<=I))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(_=1,T=0,E=0,C=1,P=0,I=0){this.array=null,this.a=_,this.b=T,this.c=E,this.d=C,this.tx=P,this.ty=I}fromArray(_){this.a=_[0],this.b=_[1],this.c=_[3],this.d=_[4],this.tx=_[2],this.ty=_[5]}set(_,T,E,C,P,I){return this.a=_,this.b=T,this.c=E,this.d=C,this.tx=P,this.ty=I,this}toArray(_,T){this.array||(this.array=new Float32Array(9));const E=T||this.array;return _?(E[0]=this.a,E[1]=this.b,E[2]=0,E[3]=this.c,E[4]=this.d,E[5]=0,E[6]=this.tx,E[7]=this.ty,E[8]=1):(E[0]=this.a,E[1]=this.c,E[2]=this.tx,E[3]=this.b,E[4]=this.d,E[5]=this.ty,E[6]=0,E[7]=0,E[8]=1),E}apply(_,T){T=T||new Point;const E=_.x,C=_.y;return T.x=this.a*E+this.c*C+this.tx,T.y=this.b*E+this.d*C+this.ty,T}applyInverse(_,T){T=T||new Point;const E=1/(this.a*this.d+this.c*-this.b),C=_.x,P=_.y;return T.x=this.d*E*C+-this.c*E*P+(this.ty*this.c-this.tx*this.d)*E,T.y=this.a*E*P+-this.b*E*C+(-this.ty*this.a+this.tx*this.b)*E,T}translate(_,T){return this.tx+=_,this.ty+=T,this}scale(_,T){return this.a*=_,this.d*=T,this.c*=_,this.b*=T,this.tx*=_,this.ty*=T,this}rotate(_){const T=Math.cos(_),E=Math.sin(_),C=this.a,P=this.c,I=this.tx;return this.a=C*T-this.b*E,this.b=C*E+this.b*T,this.c=P*T-this.d*E,this.d=P*E+this.d*T,this.tx=I*T-this.ty*E,this.ty=I*E+this.ty*T,this}append(_){const T=this.a,E=this.b,C=this.c,P=this.d;return this.a=_.a*T+_.b*C,this.b=_.a*E+_.b*P,this.c=_.c*T+_.d*C,this.d=_.c*E+_.d*P,this.tx=_.tx*T+_.ty*C+this.tx,this.ty=_.tx*E+_.ty*P+this.ty,this}setTransform(_,T,E,C,P,I,F,R,B){return this.a=Math.cos(F+B)*P,this.b=Math.sin(F+B)*P,this.c=-Math.sin(F-R)*I,this.d=Math.cos(F-R)*I,this.tx=_-(E*this.a+C*this.c),this.ty=T-(E*this.b+C*this.d),this}prepend(_){const T=this.tx;if(_.a!==1||_.b!==0||_.c!==0||_.d!==1){const E=this.a,C=this.c;this.a=E*_.a+this.b*_.c,this.b=E*_.b+this.b*_.d,this.c=C*_.a+this.d*_.c,this.d=C*_.b+this.d*_.d}return this.tx=T*_.a+this.ty*_.c+_.tx,this.ty=T*_.b+this.ty*_.d+_.ty,this}decompose(_){const T=this.a,E=this.b,C=this.c,P=this.d,I=_.pivot,F=-Math.atan2(-C,P),R=Math.atan2(E,T),B=Math.abs(F+R);return B<1e-5||Math.abs(PI_2-B)<1e-5?(_.rotation=R,_.skew.x=_.skew.y=0):(_.rotation=0,_.skew.x=F,_.skew.y=R),_.scale.x=Math.sqrt(T*T+E*E),_.scale.y=Math.sqrt(C*C+P*P),_.position.x=this.tx+(I.x*T+I.y*C),_.position.y=this.ty+(I.x*E+I.y*P),_}invert(){const _=this.a,T=this.b,E=this.c,C=this.d,P=this.tx,I=_*C-T*E;return this.a=C/I,this.b=-T/I,this.c=-E/I,this.d=_/I,this.tx=(E*this.ty-C*P)/I,this.ty=-(_*this.ty-T*P)/I,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const _=new Matrix;return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyTo(_){return _.a=this.a,_.b=this.b,_.c=this.c,_.d=this.d,_.tx=this.tx,_.ty=this.ty,_}copyFrom(_){return this.a=_.a,this.b=_.b,this.c=_.c,this.d=_.d,this.tx=_.tx,this.ty=_.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let A=0;A<16;A++){const _=[];rotationCayley.push(_);for(let T=0;T<16;T++){const E=signum(ux[A]*ux[T]+vx[A]*uy[T]),C=signum(uy[A]*ux[T]+vy[A]*uy[T]),P=signum(ux[A]*vx[T]+vx[A]*vy[T]),I=signum(uy[A]*vx[T]+vy[A]*vy[T]);for(let F=0;F<16;F++)if(ux[F]===E&&uy[F]===C&&vx[F]===P&&vy[F]===I){_.push(F);break}}}for(let A=0;A<16;A++){const _=new Matrix;_.set(ux[A],uy[A],vx[A],vy[A],0,0),rotationMatrices.push(_)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:A=>ux[A],uY:A=>uy[A],vX:A=>vx[A],vY:A=>vy[A],inv:A=>A&8?A&15:-A&7,add:(A,_)=>rotationCayley[A][_],sub:(A,_)=>rotationCayley[A][groupD8.inv(_)],rotate180:A=>A^4,isVertical:A=>(A&3)===2,byDirection:(A,_)=>Math.abs(A)*2<=Math.abs(_)?_>=0?groupD8.S:groupD8.N:Math.abs(_)*2<=Math.abs(A)?A>0?groupD8.E:groupD8.W:_>0?A>0?groupD8.SE:groupD8.SW:A>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(A,_,T=0,E=0)=>{const C=rotationMatrices[groupD8.inv(_)];C.tx=T,C.ty=E,A.append(C)}};class ObservablePoint{constructor(_,T,E=0,C=0){this._x=E,this._y=C,this.cb=_,this.scope=T}clone(_=this.cb,T=this.scope){return new ObservablePoint(_,T,this._x,this._y)}set(_=0,T=_){return(this._x!==_||this._y!==T)&&(this._x=_,this._y=T,this.cb.call(this.scope)),this}copyFrom(_){return(this._x!==_.x||this._y!==_.y)&&(this._x=_.x,this._y=_.y,this.cb.call(this.scope)),this}copyTo(_){return _.set(this._x,this._y),_}equals(_){return _.x===this._x&&_.y===this._y}get x(){return this._x}set x(_){this._x!==_&&(this._x=_,this.cb.call(this.scope))}get y(){return this._y}set y(_){this._y!==_&&(this._y=_,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const A=this.localTransform;this._localID!==this._currentLocalID&&(A.a=this._cx*this.scale.x,A.b=this._sx*this.scale.x,A.c=this._cy*this.scale.y,A.d=this._sy*this.scale.y,A.tx=this.position.x-(this.pivot.x*A.a+this.pivot.y*A.c),A.ty=this.position.y-(this.pivot.x*A.b+this.pivot.y*A.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(A){const _=this.localTransform;if(this._localID!==this._currentLocalID&&(_.a=this._cx*this.scale.x,_.b=this._sx*this.scale.x,_.c=this._cy*this.scale.y,_.d=this._sy*this.scale.y,_.tx=this.position.x-(this.pivot.x*_.a+this.pivot.y*_.c),_.ty=this.position.y-(this.pivot.x*_.b+this.pivot.y*_.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==A._worldID){const T=A.worldTransform,E=this.worldTransform;E.a=_.a*T.a+_.b*T.c,E.b=_.a*T.b+_.b*T.d,E.c=_.c*T.a+_.d*T.c,E.d=_.c*T.b+_.d*T.d,E.tx=_.tx*T.a+_.ty*T.c+T.tx,E.ty=_.tx*T.b+_.ty*T.d+T.ty,this._parentID=A._worldID,this._worldID++}}setFromMatrix(A){A.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(A){this._rotation!==A&&(this._rotation=A,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(A,_,T){const E=A.createShader(_);return A.shaderSource(E,T),A.compileShader(E),E}function booleanArray(A){const _=new Array(A);for(let T=0;T<_.length;T++)_[T]=!1;return _}function defaultValue(A,_){switch(A){case"float":return 0;case"vec2":return new Float32Array(2*_);case"vec3":return new Float32Array(3*_);case"vec4":return new Float32Array(4*_);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*_);case"ivec3":return new Int32Array(3*_);case"ivec4":return new Int32Array(4*_);case"uvec2":return new Uint32Array(2*_);case"uvec3":return new Uint32Array(3*_);case"uvec4":return new Uint32Array(4*_);case"bool":return!1;case"bvec2":return booleanArray(2*_);case"bvec3":return booleanArray(3*_);case"bvec4":return booleanArray(4*_);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:A=>A.type==="float"&&A.size===1&&!A.isArray,code:A=>`
            if(uv["${A}"] !== ud["${A}"].value)
            {
                ud["${A}"].value = uv["${A}"]
                gl.uniform1f(ud["${A}"].location, uv["${A}"])
            }
            `},{test:(A,_)=>(A.type==="sampler2D"||A.type==="samplerCube"||A.type==="sampler2DArray")&&A.size===1&&!A.isArray&&(_==null||_.castToBaseTexture!==void 0),code:A=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${A}"], t);

            if(ud["${A}"].value !== t)
            {
                ud["${A}"].value = t;
                gl.uniform1i(ud["${A}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(A,_)=>A.type==="mat3"&&A.size===1&&!A.isArray&&_.a!==void 0,code:A=>`
            gl.uniformMatrix3fv(ud["${A}"].location, false, uv["${A}"].toArray(true));
            `,codeUbo:A=>`
                var ${A}_matrix = uv.${A}.toArray(true);

                data[offset] = ${A}_matrix[0];
                data[offset+1] = ${A}_matrix[1];
                data[offset+2] = ${A}_matrix[2];
        
                data[offset + 4] = ${A}_matrix[3];
                data[offset + 5] = ${A}_matrix[4];
                data[offset + 6] = ${A}_matrix[5];
        
                data[offset + 8] = ${A}_matrix[6];
                data[offset + 9] = ${A}_matrix[7];
                data[offset + 10] = ${A}_matrix[8];
            `},{test:(A,_)=>A.type==="vec2"&&A.size===1&&!A.isArray&&_.x!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${A}"].location, v.x, v.y);
                }`,codeUbo:A=>`
                v = uv.${A};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:A=>A.type==="vec2"&&A.size===1&&!A.isArray,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${A}"].location, v[0], v[1]);
                }
            `},{test:(A,_)=>A.type==="vec4"&&A.size===1&&!A.isArray&&_.width!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${A}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:A=>`
                    v = uv.${A};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(A,_)=>A.type==="vec4"&&A.size===1&&!A.isArray&&_.red!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${A}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:A=>`
                    v = uv.${A};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(A,_)=>A.type==="vec3"&&A.size===1&&!A.isArray&&_.red!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${A}"].location, v.red, v.green, v.blue)
                }`,codeUbo:A=>`
                    v = uv.${A};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:A=>A.type==="vec4"&&A.size===1&&!A.isArray,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${A}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(A,_){var E;const T=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const C in A.uniforms){const P=_[C];if(!P){((E=A.uniforms[C])==null?void 0:E.group)===!0&&(A.uniforms[C].ubo?T.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${C}, '${C}');
                    `):T.push(`
                        renderer.shader.syncUniformGroup(uv.${C}, syncData);
                    `));continue}const I=A.uniforms[C];let F=!1;for(let R=0;R<uniformParsers.length;R++)if(uniformParsers[R].test(P,I)){T.push(uniformParsers[R].code(C,I)),F=!0;break}if(!F){const R=(P.size===1&&!P.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[P.type].replace("location",`ud["${C}"].location`);T.push(`
            cu = ud["${C}"];
            cv = cu.value;
            v = uv["${C}"];
            ${R};`)}}return new Function("ud","uv","renderer","syncData",T.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const A=settings$1.ADAPTER.createCanvas();let _;settings$1.PREFER_ENV>=ENV.WEBGL2&&(_=A.getContext("webgl2",{})),_||(_=A.getContext("webgl",{})||A.getContext("experimental-webgl",{}),_?_.getExtension("WEBGL_draw_buffers"):_=null),context=_}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const A=getTestContext();if(A&&A.getShaderPrecisionFormat){const _=A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT);_&&(maxFragmentPrecision=_.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(A,_){const T=A.getShaderSource(_).split(`
`).map((B,O)=>`${O}: ${B}`),E=A.getShaderInfoLog(_),C=E.split(`
`),P={},I=C.map(B=>parseFloat(B.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(B=>B&&!P[B]?(P[B]=!0,!0):!1),F=[""];I.forEach(B=>{T[B-1]=`%c${T[B-1]}%c`,F.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const R=T.join(`
`);F[0]=R,console.error(E),console.groupCollapsed("click to view full shader code"),console.warn(...F),console.groupEnd()}function logProgramError(A,_,T,E){A.getProgramParameter(_,A.LINK_STATUS)||(A.getShaderParameter(T,A.COMPILE_STATUS)||logPrettyShaderError(A,T),A.getShaderParameter(E,A.COMPILE_STATUS)||logPrettyShaderError(A,E),console.error("PixiJS Error: Could not initialize shader."),A.getProgramInfoLog(_)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",A.getProgramInfoLog(_)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(A){return GLSL_TO_SIZE[A]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(A,_){if(!GL_TABLE){const T=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let E=0;E<T.length;++E){const C=T[E];GL_TABLE[A[C]]=GL_TO_GLSL_TYPES[C]}}return GL_TABLE[_]}function setPrecision(A,_,T){if(A.substring(0,9)!=="precision"){let E=_;return _===PRECISION.HIGH&&T!==PRECISION.HIGH&&(E=PRECISION.MEDIUM),`precision ${E} float;
${A}`}else if(T!==PRECISION.HIGH&&A.substring(0,15)==="precision highp")return A.replace("precision highp","precision mediump");return A}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class _t{constructor(_,T,E="pixi-shader",C={}){this.extra={},this.id=UID$2++,this.vertexSrc=_||_t.defaultVertexSrc,this.fragmentSrc=T||_t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=C,this.vertexSrc.substring(0,8)!=="#version"&&(E=E.replace(/\s+/g,"-"),nameCache[E]?(nameCache[E]++,E+=`-${nameCache[E]}`):nameCache[E]=1,this.vertexSrc=`#define SHADER_NAME ${E}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${E}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,_t.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,_t.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentSrc(){return defaultFragment$2}static from(_,T,E){const C=_+T;let P=ProgramCache[C];return P||(ProgramCache[C]=P=new _t(_,T,E)),P}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(_,T,E){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!T,this.ubo=!!E,_ instanceof Buffer?(this.buffer=_,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=_,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(_,T,E){if(!this.ubo)this.uniforms[_]=new UniformGroup(T,E);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(_,T,E){return new UniformGroup(_,T,E)}static uboFrom(_,T){return new UniformGroup(_,T??!0,!0)}}class Shader{constructor(_,T){this.uniformBindCount=0,this.program=_,T?T instanceof UniformGroup?this.uniformGroup=T:this.uniformGroup=new UniformGroup(T):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(_,T){if(T.uniforms[_])return!0;for(const E in T.uniforms){const C=T.uniforms[E];if(C.group===!0&&this.checkUniformExists(_,C))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(_,T,E){const C=Program.from(_,T);return new Shader(C,E)}}class BatchShaderGenerator{constructor(_,T){if(this.vertexSrc=_,this.fragTemplate=T,this.programCache={},this.defaultGroupCache={},!T.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!T.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(_){if(!this.programCache[_]){const E=new Int32Array(_);for(let P=0;P<_;P++)E[P]=P;this.defaultGroupCache[_]=UniformGroup.from({uSamplers:E},!0);let C=this.fragTemplate;C=C.replace(/%count%/gi,`${_}`),C=C.replace(/%forloop%/gi,this.generateSampleSrc(_)),this.programCache[_]=new Program(this.vertexSrc,C)}const T={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[_]};return new Shader(this.programCache[_],T)}generateSampleSrc(_){let T="";T+=`
`,T+=`
`;for(let E=0;E<_;E++)E>0&&(T+=`
else `),E<_-1&&(T+=`if(vTextureId < ${E}.5)`),T+=`
{`,T+=`
	color = texture2D(uSamplers[${E}], vTextureCoord);`,T+=`
}`;return T+=`
`,T+=`
`,T}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let _=0;_<this.count;_++)this.elements[_]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(A){let _=!0;const T=settings$1.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const E=T.userAgent.match(/OS (\d+)_(\d+)?/);E&&parseInt(E[1],10)<11&&(_=!1)}if(isMobile.android.device){const E=T.userAgent.match(/Android\s([0-9.]*)/);E&&parseInt(E[1],10)<7&&(_=!1)}}return _?A:4}class ObjectRenderer{constructor(_){this.renderer=_}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(_){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$1=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class st extends ObjectRenderer{constructor(_){super(_),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=st.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),_.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(_){this._defaultMaxTextures=_}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(_){this._canUploadSameBuffer=_}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:_=st.defaultVertexSrc,fragment:T=st.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(_,T)}contextChange(){const _=this.renderer.gl;settings$1.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),st.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,_)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let T=0;T<this._packedGeometryPoolSize;T++)this._packedGeometries[T]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:_,_textureArrayPool:T}=st,E=this.size/4,C=Math.floor(E/this.maxTextures)+1;for(;_.length<E;)_.push(new BatchDrawCall);for(;T.length<C;)T.push(new BatchTextureArray);for(let P=0;P<this.maxTextures;P++)this._tempBoundTextures[P]=null}onPrerender(){this._flushId=0}render(_){_._texture.valid&&(this._vertexCount+_.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=_.vertexData.length/2,this._indexCount+=_.indices.length,this._bufferedTextures[this._bufferSize]=_._texture.baseTexture,this._bufferedElements[this._bufferSize++]=_)}buildTexturesAndDrawCalls(){const{_bufferedTextures:_,maxTextures:T}=this,E=st._textureArrayPool,C=this.renderer.batch,P=this._tempBoundTextures,I=this.renderer.textureGC.count;let F=++BaseTexture._globalBatch,R=0,B=E[0],O=0;C.copyBoundTextures(P,T);for(let V=0;V<this._bufferSize;++V){const L=_[V];_[V]=null,L._batchEnabled!==F&&(B.count>=T&&(C.boundArray(B,P,F,T),this.buildDrawCalls(B,O,V),O=V,B=E[++R],++F),L._batchEnabled=F,L.touched=I,B.elements[B.count++]=L)}B.count>0&&(C.boundArray(B,P,F,T),this.buildDrawCalls(B,O,this._bufferSize),++R,++F);for(let V=0;V<P.length;V++)P[V]=null;BaseTexture._globalBatch=F}buildDrawCalls(_,T,E){const{_bufferedElements:C,_attributeBuffer:P,_indexBuffer:I,vertexSize:F}=this,R=st._drawCallPool;let B=this._dcIndex,O=this._aIndex,V=this._iIndex,L=R[B];L.start=this._iIndex,L.texArray=_;for(let D=T;D<E;++D){const U=C[D],G=U._texture.baseTexture,X=premultiplyBlendMode[G.alphaMode?1:0][U.blendMode];C[D]=null,T<D&&L.blend!==X&&(L.size=V-L.start,T=D,L=R[++B],L.texArray=_,L.start=V),this.packInterleavedGeometry(U,P,I,O,V),O+=U.vertexData.length/2*F,V+=U.indices.length,L.blend=X}T<E&&(L.size=V-L.start,++B),this._dcIndex=B,this._aIndex=O,this._iIndex=V}bindAndClearTexArray(_){const T=this.renderer.texture;for(let E=0;E<_.count;E++)T.bind(_.elements[E],_.ids[E]),_.elements[E]=null;_.count=0}updateGeometry(){const{_packedGeometries:_,_attributeBuffer:T,_indexBuffer:E}=this;st.canUploadSameBuffer?(_[this._flushId]._buffer.update(T.rawBinaryData),_[this._flushId]._indexBuffer.update(E),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,_[this._flushId]=new this.geometryClass),_[this._flushId]._buffer.update(T.rawBinaryData),_[this._flushId]._indexBuffer.update(E),this.renderer.geometry.bind(_[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const _=this._dcIndex,{gl:T,state:E}=this.renderer,C=st._drawCallPool;let P=null;for(let I=0;I<_;I++){const{texArray:F,type:R,size:B,start:O,blend:V}=C[I];P!==F&&(P=F,this.bindAndClearTexArray(F)),this.state.blendMode=V,E.set(this.state),T.drawElements(R,B,T.UNSIGNED_SHORT,O*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),st.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let _=0;_<this._packedGeometryPoolSize;_++)this._packedGeometries[_]&&this._packedGeometries[_].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(_){const T=nextPow2(Math.ceil(_/8)),E=log2(T),C=T*8;this._aBuffers.length<=E&&(this._iBuffers.length=E+1);let P=this._aBuffers[C];return P||(this._aBuffers[C]=P=new ViewableBuffer(C*this.vertexSize*4)),P}getIndexBuffer(_){const T=nextPow2(Math.ceil(_/12)),E=log2(T),C=T*12;this._iBuffers.length<=E&&(this._iBuffers.length=E+1);let P=this._iBuffers[E];return P||(this._iBuffers[E]=P=new Uint16Array(C)),P}packInterleavedGeometry(_,T,E,C,P){const{uint32View:I,float32View:F}=T,R=C/this.vertexSize,B=_.uvs,O=_.indices,V=_.vertexData,L=_._texture.baseTexture._batchLocation,D=Math.min(_.worldAlpha,1),U=Color$1.shared.setValue(_._tintRGB).toPremultiplied(D,_._texture.baseTexture.alphaMode>0);for(let G=0;G<V.length;G+=2)F[C++]=V[G],F[C++]=V[G+1],F[C++]=B[G],F[C++]=B[G+1],I[C++]=U,F[C++]=L;for(let G=0;G<O.length;G++)E[P++]=R+O[G]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class Ct extends Shader{constructor(_,T,E){const C=Program.from(_||Ct.defaultVertexSrc,T||Ct.defaultFragmentSrc);super(C,E),this.padding=0,this.resolution=Ct.defaultResolution,this.multisample=Ct.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(_,T,E,C,P){_.applyFilter(this,T,E,C)}get blendMode(){return this.state.blendMode}set blendMode(_){this.state.blendMode=_}get resolution(){return this._resolution}set resolution(_){this._resolution=_}static get defaultVertexSrc(){return defaultVertex}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color$1(0),this.alpha=1}init(_){this.clearBeforeRender=_.clearBeforeRender;const{backgroundColor:T,background:E,backgroundAlpha:C}=_,P=E??T;P!==void 0&&(this.color=P),this.alpha=C}get color(){return this._backgroundColor.value}set color(_){this._backgroundColor.setValue(_)}get alpha(){return this._backgroundColor.alpha}set alpha(_){this._backgroundColor.setAlpha(_)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions.add(BackgroundSystem);class BatchSystem{constructor(_){this.renderer=_,this.emptyRenderer=new ObjectRenderer(_),this.currentRenderer=this.emptyRenderer}setObjectRenderer(_){this.currentRenderer!==_&&(this.currentRenderer.stop(),this.currentRenderer=_,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(_,T){const{boundTextures:E}=this.renderer.texture;for(let C=T-1;C>=0;--C)_[C]=E[C]||null,_[C]&&(_[C]._batchLocation=C)}boundArray(_,T,E,C){const{elements:P,ids:I,count:F}=_;let R=0;for(let B=0;B<F;B++){const O=P[B],V=O._batchLocation;if(V>=0&&V<C&&T[V]===O){I[B]=V;continue}for(;R<C;){const L=T[R];if(L&&L._batchEnabled===E&&L._batchLocation===R){R++;continue}I[B]=R,O._batchLocation=R,T[R]=O;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(_){this.renderer=_,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(_){this.gl=_,this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(_){if(_.context)this.initFromContext(_.context);else{const T=this.renderer.background.alpha<1,E=_.premultipliedAlpha;this.preserveDrawingBuffer=_.preserveDrawingBuffer,this.useContextAlpha=_.useContextAlpha,this.powerPreference=_.powerPreference,this.initFromOptions({alpha:T,premultipliedAlpha:E,antialias:_.antialias,stencil:!0,preserveDrawingBuffer:_.preserveDrawingBuffer,powerPreference:_.powerPreference})}}initFromContext(_){this.gl=_,this.validateContext(_),this.renderer.gl=_,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(_);const T=this.renderer.view;T.addEventListener!==void 0&&(T.addEventListener("webglcontextlost",this.handleContextLost,!1),T.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(_){const T=this.createContext(this.renderer.view,_);this.initFromContext(T)}createContext(_,T){let E;if(settings$1.PREFER_ENV>=ENV.WEBGL2&&(E=_.getContext("webgl2",T)),E)this.webGLVersion=2;else if(this.webGLVersion=1,E=_.getContext("webgl",T)||_.getContext("experimental-webgl",T),!E)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=E,this.getExtensions(),this.gl}getExtensions(){const{gl:_}=this,T={loseContext:_.getExtension("WEBGL_lose_context"),anisotropicFiltering:_.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),s3tc:_.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:_.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:_.getExtension("WEBGL_compressed_texture_etc"),etc1:_.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:_.getExtension("WEBGL_compressed_texture_atc"),astc:_.getExtension("WEBGL_compressed_texture_astc"),bptc:_.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,T,{drawBuffers:_.getExtension("WEBGL_draw_buffers"),depthTexture:_.getExtension("WEBGL_depth_texture"),vertexArrayObject:_.getExtension("OES_vertex_array_object")||_.getExtension("MOZ_OES_vertex_array_object")||_.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:_.getExtension("OES_element_index_uint"),floatTexture:_.getExtension("OES_texture_float"),floatTextureLinear:_.getExtension("OES_texture_float_linear"),textureHalfFloat:_.getExtension("OES_texture_half_float"),textureHalfFloatLinear:_.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,T,{colorBufferFloat:_.getExtension("EXT_color_buffer_float")})}handleContextLost(_){_.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const _=this.renderer.view;this.renderer=null,_.removeEventListener!==void 0&&(_.removeEventListener("webglcontextlost",this.handleContextLost),_.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(_){const T=_.getContextAttributes(),E="WebGL2RenderingContext"in globalThis&&_ instanceof globalThis.WebGL2RenderingContext;E&&(this.webGLVersion=2),T&&!T.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const C=E||!!_.getExtension("OES_element_index_uint");this.supports.uint32Indices=C,C||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions.add(ContextSystem);class Framebuffer{constructor(_,T){if(this.width=Math.round(_),this.height=Math.round(T),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(_=0,T){return this.colorTextures[_]=T||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(_){return this.depthTexture=_||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(_,T){if(_=Math.round(_),T=Math.round(T),!_||!T)throw new Error("Framebuffer width and height must not be zero");if(!(_===this.width&&T===this.height)){this.width=_,this.height=T,this.dirtyId++,this.dirtySize++;for(let E=0;E<this.colorTextures.length;E++){const C=this.colorTextures[E],P=C.resolution;C.setSize(_/P,T/P)}if(this.depthTexture){const E=this.depthTexture.resolution;this.depthTexture.setSize(_/E,T/E)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(_={}){if(typeof _=="number"){const T=arguments[0],E=arguments[1],C=arguments[2],P=arguments[3];_={width:T,height:E,scaleMode:C,resolution:P}}_.width=_.width??100,_.height=_.height??100,_.multisample??(_.multisample=MSAA_QUALITY.NONE),super(null,_),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color$1([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=_.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(_){this._clear.setValue(_)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,T){this.framebuffer.resize(_*this.resolution,T*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(_){const T=_,E=T.naturalWidth||T.videoWidth||T.displayWidth||T.width,C=T.naturalHeight||T.videoHeight||T.displayHeight||T.height;super(E,C),this.source=_,this.noSubImage=!1}static crossOrigin(_,T,E){E===void 0&&!T.startsWith("data:")?_.crossOrigin=determineCrossOrigin(T):E!==!1&&(_.crossOrigin=typeof E=="string"?E:"anonymous")}upload(_,T,E,C){const P=_.gl,I=T.realWidth,F=T.realHeight;if(C=C||this.source,typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement){if(!C.complete||C.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&C instanceof HTMLVideoElement&&C.readyState<=1)return!1;return P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&T.target===P.TEXTURE_2D&&E.width===I&&E.height===F?P.texSubImage2D(P.TEXTURE_2D,0,0,0,T.format,E.type,C):(E.width=I,E.height=F,P.texImage2D(T.target,0,E.internalFormat,T.format,E.type,C)),!0}update(){if(this.destroyed)return;const _=this.source,T=_.naturalWidth||_.videoWidth||_.width,E=_.naturalHeight||_.videoHeight||_.height;this.resize(T,E),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(_,T){if(T=T||{},typeof _=="string"){const E=new Image;BaseImageResource.crossOrigin(E,_,T.crossorigin),E.src=_,_=E}super(_),!_.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=_.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(T.createBitmap??settings$1.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof T.alphaMode=="number"?T.alphaMode:null,this.bitmap=null,this._load=null,T.autoLoad!==!1&&this.load()}load(_){return this._load?this._load:(_!==void 0&&(this.createBitmap=_),this._load=new Promise((T,E)=>{const C=this.source;this.url=C.src;const P=()=>{this.destroyed||(C.onload=null,C.onerror=null,this.update(),this._load=null,this.createBitmap?T(this.process()):T(this))};C.complete&&C.src?P():(C.onload=P,C.onerror=I=>{E(I),this.onError.emit(I)})}),this._load)}process(){const _=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const T=globalThis.createImageBitmap,E=!_.crossOrigin||_.crossOrigin==="anonymous";return this._process=fetch(_.src,{mode:E?"cors":"no-cors"}).then(C=>C.blob()).then(C=>T(C,0,0,_.width,_.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(C=>this.destroyed?Promise.reject():(this.bitmap=C,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(_,T,E){if(typeof this.alphaMode=="number"&&(T.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(_,T,E);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(_,T,E,this.bitmap),!this.preserveBitmap){let C=!0;const P=T._glTextures;for(const I in P){const F=P[I];if(F!==E&&F.dirtyId!==T.dirtyId){C=!1;break}}C&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(_){return typeof HTMLImageElement<"u"&&(typeof _=="string"||_ instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(_,T,E){const C=T.width,P=T.height;if(E){const I=_.width/2/C,F=_.height/2/P,R=_.x/C+I,B=_.y/P+F;E=groupD8.add(E,groupD8.NW),this.x0=R+I*groupD8.uX(E),this.y0=B+F*groupD8.uY(E),E=groupD8.add(E,2),this.x1=R+I*groupD8.uX(E),this.y1=B+F*groupD8.uY(E),E=groupD8.add(E,2),this.x2=R+I*groupD8.uX(E),this.y2=B+F*groupD8.uY(E),E=groupD8.add(E,2),this.x3=R+I*groupD8.uX(E),this.y3=B+F*groupD8.uY(E)}else this.x0=_.x/C,this.y0=_.y/P,this.x1=(_.x+_.width)/C,this.y1=_.y/P,this.x2=(_.x+_.width)/C,this.y2=(_.y+_.height)/P,this.x3=_.x/C,this.y3=(_.y+_.height)/P;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(A){A.destroy=function(){},A.on=function(){},A.once=function(){},A.emit=function(){}}class Texture extends EventEmitter{constructor(_,T,E,C,P,I,F){if(super(),this.noFrame=!1,T||(this.noFrame=!0,T=new Rectangle(0,0,1,1)),_ instanceof Texture&&(_=_.baseTexture),this.baseTexture=_,this._frame=T,this.trim=C,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=E||T,this._rotate=Number(P||0),P===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=I?new Point(I.x,I.y):new Point(0,0),this.defaultBorders=F,this._updateID=0,this.textureCacheIds=[],_.valid?this.noFrame?_.valid&&this.onBaseTextureUpdated(_):this.frame=T:_.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&_.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(_){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=_.width,this._frame.height=_.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(_){if(this.baseTexture){if(_){const{resource:T}=this.baseTexture;T!=null&&T.url&&TextureCache[T.url]&&Texture.removeFromCache(T.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var C;const _=this._frame.clone(),T=this._frame===this.orig?_:this.orig.clone(),E=new Texture(this.baseTexture,!this.noFrame&&_,T,(C=this.trim)==null?void 0:C.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(E._frame=_),E}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(_,T={},E=settings$1.STRICT_TEXTURE_CACHE){const C=typeof _=="string";let P=null;if(C)P=_;else if(_ instanceof BaseTexture){if(!_.cacheId){const F=(T==null?void 0:T.pixiIdPrefix)||"pixiid";_.cacheId=`${F}-${uid()}`,BaseTexture.addToCache(_,_.cacheId)}P=_.cacheId}else{if(!_._pixiId){const F=(T==null?void 0:T.pixiIdPrefix)||"pixiid";_._pixiId=`${F}_${uid()}`}P=_._pixiId}let I=TextureCache[P];if(C&&E&&!I)throw new Error(`The cacheId "${P}" does not exist in TextureCache.`);return!I&&!(_ instanceof BaseTexture)?(T.resolution||(T.resolution=getResolutionOfUrl(_)),I=new Texture(new BaseTexture(_,T)),I.baseTexture.cacheId=P,BaseTexture.addToCache(I.baseTexture,P),Texture.addToCache(I,P)):!I&&_ instanceof BaseTexture&&(I=new Texture(_),Texture.addToCache(I,P)),I}static fromURL(_,T){const E=Object.assign({autoLoad:!1},T==null?void 0:T.resourceOptions),C=Texture.from(_,Object.assign({resourceOptions:E},T),!1),P=C.baseTexture.resource;return C.baseTexture.valid?Promise.resolve(C):P.load().then(()=>Promise.resolve(C))}static fromBuffer(_,T,E,C){return new Texture(BaseTexture.fromBuffer(_,T,E,C))}static fromLoader(_,T,E,C){const P=new BaseTexture(_,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(T)},C)),{resource:I}=P;I instanceof ImageResource&&(I.url=T);const F=new Texture(P);return E||(E=T),BaseTexture.addToCache(F.baseTexture,E),Texture.addToCache(F,E),E!==T&&(BaseTexture.addToCache(F.baseTexture,T),Texture.addToCache(F,T)),F.baseTexture.valid?Promise.resolve(F):new Promise(R=>{F.baseTexture.once("loaded",()=>R(F))})}static addToCache(_,T){T&&(_.textureCacheIds.includes(T)||_.textureCacheIds.push(T),TextureCache[T]&&TextureCache[T]!==_&&console.warn(`Texture added to the cache with an id [${T}] that already had an entry`),TextureCache[T]=_)}static removeFromCache(_){if(typeof _=="string"){const T=TextureCache[_];if(T){const E=T.textureCacheIds.indexOf(_);return E>-1&&T.textureCacheIds.splice(E,1),delete TextureCache[_],T}}else if(_!=null&&_.textureCacheIds){for(let T=0;T<_.textureCacheIds.length;++T)TextureCache[_.textureCacheIds[T]]===_&&delete TextureCache[_.textureCacheIds[T]];return _.textureCacheIds.length=0,_}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(_){this._frame=_,this.noFrame=!1;const{x:T,y:E,width:C,height:P}=_,I=T+C>this.baseTexture.width,F=E+P>this.baseTexture.height;if(I||F){const R=I&&F?"and":"or",B=`X: ${T} + ${C} = ${T+C} > ${this.baseTexture.width}`,O=`Y: ${E} + ${P} = ${E+P} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${B} ${R} ${O}`)}this.valid=C&&P&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=_),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(_){this._rotate=_,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const _=settings$1.ADAPTER.createCanvas(16,16),T=_.getContext("2d");_.width=16,_.height=16,T.fillStyle="white",T.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(_)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(_,T){super(_,T),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(_){this.framebuffer.multisample=_}resize(_,T,E=!0){const C=this.baseTexture.resolution,P=Math.round(_*C)/C,I=Math.round(T*C)/C;this.valid=P>0&&I>0,this._frame.width=this.orig.width=P,this._frame.height=this.orig.height=I,E&&this.baseTexture.resize(P,I),this.updateUvs()}setResolution(_){const{baseTexture:T}=this;T.resolution!==_&&(T.setResolution(_),this.resize(T.width,T.height,!1))}static create(_){return new RenderTexture(new BaseRenderTexture(_))}}class RenderTexturePool{constructor(_){this.texturePool={},this.textureOptions=_||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(_,T,E=MSAA_QUALITY.NONE){const C=new BaseRenderTexture(Object.assign({width:_,height:T,resolution:1,multisample:E},this.textureOptions));return new RenderTexture(C)}getOptimalTexture(_,T,E=1,C=MSAA_QUALITY.NONE){let P;_=Math.max(Math.ceil(_*E-1e-6),1),T=Math.max(Math.ceil(T*E-1e-6),1),!this.enableFullScreen||_!==this._pixelsWidth||T!==this._pixelsHeight?(_=nextPow2(_),T=nextPow2(T),P=((_&65535)<<16|T&65535)>>>0,C>1&&(P+=C*4294967296)):P=C>1?-C:-1,this.texturePool[P]||(this.texturePool[P]=[]);let I=this.texturePool[P].pop();return I||(I=this.createTexture(_,T,C)),I.filterPoolKey=P,I.setResolution(E),I}getFilterTexture(_,T,E){const C=this.getOptimalTexture(_.width,_.height,T||_.resolution,E||MSAA_QUALITY.NONE);return C.filterFrame=_.filterFrame,C}returnTexture(_){const T=_.filterPoolKey;_.filterFrame=null,this.texturePool[T].push(_)}returnFilterTexture(_){this.returnTexture(_)}clear(_){if(_=_!==!1,_)for(const T in this.texturePool){const E=this.texturePool[T];if(E)for(let C=0;C<E.length;C++)E[C].destroy(!0)}this.texturePool={}}setScreenSize(_){if(!(_.width===this._pixelsWidth&&_.height===this._pixelsHeight)){this.enableFullScreen=_.width>0&&_.height>0;for(const T in this.texturePool){if(!(Number(T)<0))continue;const E=this.texturePool[T];if(E)for(let C=0;C<E.length;C++)E[C].destroy(!0);this.texturePool[T]=[]}this._pixelsWidth=_.width,this._pixelsHeight=_.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(_,T){let E=0,C=0;return this.uvs[0]=E,this.uvs[1]=C,this.uvs[2]=E+T.width/_.width,this.uvs[3]=C,this.uvs[4]=E+T.width/_.width,this.uvs[5]=C+T.height/_.height,this.uvs[6]=E,this.uvs[7]=C+T.height/_.height,E=T.x,C=T.y,this.vertices[0]=E,this.vertices[1]=C,this.vertices[2]=E+T.width,this.vertices[3]=C,this.vertices[4]=E+T.width,this.vertices[5]=C+T.height,this.vertices[6]=E,this.vertices[7]=C+T.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix;class FilterSystem{constructor(_){this.renderer=_,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(_,T){const E=this.renderer,C=this.defaultFilterStack,P=this.statePool.pop()||new FilterState,I=E.renderTexture;let F,R;if(I.current){const X=I.current;F=X.resolution,R=X.multisample}else F=E.resolution,R=E.multisample;let B=T[0].resolution||F,O=T[0].multisample??R,V=T[0].padding,L=T[0].autoFit,D=T[0].legacy??!0;for(let X=1;X<T.length;X++){const z=T[X];B=Math.min(B,z.resolution||F),O=Math.min(O,z.multisample??R),V=this.useMaxPadding?Math.max(V,z.padding):V+z.padding,L=L&&z.autoFit,D=D||(z.legacy??!0)}C.length===1&&(this.defaultFilterStack[0].renderTexture=I.current),C.push(P),P.resolution=B,P.multisample=O,P.legacy=D,P.target=_,P.sourceFrame.copyFrom(_.filterArea||_.getBounds(!0)),P.sourceFrame.pad(V);const U=this.tempRect.copyFrom(I.sourceFrame);E.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(E.projection.transform).invert(),U),L?(P.sourceFrame.fit(U),(P.sourceFrame.width<=0||P.sourceFrame.height<=0)&&(P.sourceFrame.width=0,P.sourceFrame.height=0)):P.sourceFrame.intersects(U)||(P.sourceFrame.width=0,P.sourceFrame.height=0),this.roundFrame(P.sourceFrame,I.current?I.current.resolution:E.resolution,I.sourceFrame,I.destinationFrame,E.projection.transform),P.renderTexture=this.getOptimalFilterTexture(P.sourceFrame.width,P.sourceFrame.height,B,O),P.filters=T,P.destinationFrame.width=P.renderTexture.width,P.destinationFrame.height=P.renderTexture.height;const G=this.tempRect;G.x=0,G.y=0,G.width=P.sourceFrame.width,G.height=P.sourceFrame.height,P.renderTexture.filterFrame=P.sourceFrame,P.bindingSourceFrame.copyFrom(I.sourceFrame),P.bindingDestinationFrame.copyFrom(I.destinationFrame),P.transform=E.projection.transform,E.projection.transform=null,I.bind(P.renderTexture,P.sourceFrame,G),E.framebuffer.clear(0,0,0,0)}pop(){const _=this.defaultFilterStack,T=_.pop(),E=T.filters;this.activeState=T;const C=this.globalUniforms.uniforms;C.outputFrame=T.sourceFrame,C.resolution=T.resolution;const P=C.inputSize,I=C.inputPixel,F=C.inputClamp;if(P[0]=T.destinationFrame.width,P[1]=T.destinationFrame.height,P[2]=1/P[0],P[3]=1/P[1],I[0]=Math.round(P[0]*T.resolution),I[1]=Math.round(P[1]*T.resolution),I[2]=1/I[0],I[3]=1/I[1],F[0]=.5*I[2],F[1]=.5*I[3],F[2]=T.sourceFrame.width*P[2]-.5*I[2],F[3]=T.sourceFrame.height*P[3]-.5*I[3],T.legacy){const B=C.filterArea;B[0]=T.destinationFrame.width,B[1]=T.destinationFrame.height,B[2]=T.sourceFrame.x,B[3]=T.sourceFrame.y,C.filterClamp=C.inputClamp}this.globalUniforms.update();const R=_[_.length-1];if(this.renderer.framebuffer.blit(),E.length===1)E[0].apply(this,T.renderTexture,R.renderTexture,CLEAR_MODES.BLEND,T),this.returnFilterTexture(T.renderTexture);else{let B=T.renderTexture,O=this.getOptimalFilterTexture(B.width,B.height,T.resolution);O.filterFrame=B.filterFrame;let V=0;for(V=0;V<E.length-1;++V){V===1&&T.multisample>1&&(O=this.getOptimalFilterTexture(B.width,B.height,T.resolution),O.filterFrame=B.filterFrame),E[V].apply(this,B,O,CLEAR_MODES.CLEAR,T);const L=B;B=O,O=L}E[V].apply(this,B,R.renderTexture,CLEAR_MODES.BLEND,T),V>1&&T.multisample>1&&this.returnFilterTexture(T.renderTexture),this.returnFilterTexture(B),this.returnFilterTexture(O)}T.clear(),this.statePool.push(T)}bindAndClear(_,T=CLEAR_MODES.CLEAR){const{renderTexture:E,state:C}=this.renderer;if(_===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,_==null?void 0:_.filterFrame){const I=this.tempRect;I.x=0,I.y=0,I.width=_.filterFrame.width,I.height=_.filterFrame.height,E.bind(_,_.filterFrame,I)}else _!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?E.bind(_):this.renderer.renderTexture.bind(_,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const P=C.stateId&1||this.forceClear;(T===CLEAR_MODES.CLEAR||T===CLEAR_MODES.BLIT&&P)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(_,T,E,C){const P=this.renderer;P.state.set(_.state),this.bindAndClear(E,C),_.uniforms.uSampler=T,_.uniforms.filterGlobals=this.globalUniforms,P.shader.bind(_),_.legacy=!!_.program.attributeData.aTextureCoord,_.legacy?(this.quadUv.map(T._frame,T.filterFrame),P.geometry.bind(this.quadUv),P.geometry.draw(DRAW_MODES.TRIANGLES)):(P.geometry.bind(this.quad),P.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(_,T){const{sourceFrame:E,destinationFrame:C}=this.activeState,{orig:P}=T._texture,I=_.set(C.width,0,0,C.height,E.x,E.y),F=T.worldTransform.copyTo(Matrix.TEMP_MATRIX);return F.invert(),I.prepend(F),I.scale(1/P.width,1/P.height),I.translate(T.anchor.x,T.anchor.y),I}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(_,T,E=1,C=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(_,T,E,C)}getFilterTexture(_,T,E){if(typeof _=="number"){const P=_;_=T,T=P}_=_||this.activeState.renderTexture;const C=this.texturePool.getOptimalTexture(_.width,_.height,T||_.resolution,E||MSAA_QUALITY.NONE);return C.filterFrame=_.filterFrame,C}returnFilterTexture(_){this.texturePool.returnTexture(_)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(_,T){const E=tempPoints[0],C=tempPoints[1],P=tempPoints[2],I=tempPoints[3];E.set(T.left,T.top),C.set(T.left,T.bottom),P.set(T.right,T.top),I.set(T.right,T.bottom),_.apply(E,E),_.apply(C,C),_.apply(P,P),_.apply(I,I);const F=Math.min(E.x,C.x,P.x,I.x),R=Math.min(E.y,C.y,P.y,I.y),B=Math.max(E.x,C.x,P.x,I.x),O=Math.max(E.y,C.y,P.y,I.y);T.x=F,T.y=R,T.width=B-F,T.height=O-R}roundFrame(_,T,E,C,P){if(!(_.width<=0||_.height<=0||E.width<=0||E.height<=0)){if(P){const{a:I,b:F,c:R,d:B}=P;if((Math.abs(F)>1e-4||Math.abs(R)>1e-4)&&(Math.abs(I)>1e-4||Math.abs(B)>1e-4))return}P=P?tempMatrix$2.copyFrom(P):tempMatrix$2.identity(),P.translate(-E.x,-E.y).scale(C.width/E.width,C.height/E.height).translate(C.x,C.y),this.transformAABB(P,_),_.ceil(T),this.transformAABB(P.invert(),_)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions.add(FilterSystem);class GLFramebuffer{constructor(_){this.framebuffer=_,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(_){this.renderer=_,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let T=this.renderer.context.extensions.drawBuffers,E=this.renderer.context.extensions.depthTexture;settings$1.PREFER_ENV===ENV.WEBGL_LEGACY&&(T=null,E=null),T?_.drawBuffers=C=>T.drawBuffersWEBGL(C):(this.hasMRT=!1,_.drawBuffers=()=>{}),E||(this.writeDepthTexture=!1)}else this.msaaSamples=_.getInternalformatParameter(_.RENDERBUFFER,_.RGBA8,_.SAMPLES)}bind(_,T,E=0){const{gl:C}=this;if(_){const P=_.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(_);this.current!==_&&(this.current=_,C.bindFramebuffer(C.FRAMEBUFFER,P.framebuffer)),P.mipLevel!==E&&(_.dirtyId++,_.dirtyFormat++,P.mipLevel=E),P.dirtyId!==_.dirtyId&&(P.dirtyId=_.dirtyId,P.dirtyFormat!==_.dirtyFormat?(P.dirtyFormat=_.dirtyFormat,P.dirtySize=_.dirtySize,this.updateFramebuffer(_,E)):P.dirtySize!==_.dirtySize&&(P.dirtySize=_.dirtySize,this.resizeFramebuffer(_)));for(let I=0;I<_.colorTextures.length;I++){const F=_.colorTextures[I];this.renderer.texture.unbind(F.parentTextureArray||F)}if(_.depthTexture&&this.renderer.texture.unbind(_.depthTexture),T){const I=T.width>>E,F=T.height>>E,R=I/T.width;this.setViewport(T.x*R,T.y*R,I,F)}else{const I=_.width>>E,F=_.height>>E;this.setViewport(0,0,I,F)}}else this.current&&(this.current=null,C.bindFramebuffer(C.FRAMEBUFFER,null)),T?this.setViewport(T.x,T.y,T.width,T.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(_,T,E,C){const P=this.viewport;_=Math.round(_),T=Math.round(T),E=Math.round(E),C=Math.round(C),(P.width!==E||P.height!==C||P.x!==_||P.y!==T)&&(P.x=_,P.y=T,P.width=E,P.height=C,this.gl.viewport(_,T,E,C))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(_,T,E,C,P=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:I}=this;I.clearColor(_,T,E,C),I.clear(P)}initFramebuffer(_){const{gl:T}=this,E=new GLFramebuffer(T.createFramebuffer());return E.multisample=this.detectSamples(_.multisample),_.glFramebuffers[this.CONTEXT_UID]=E,this.managedFramebuffers.push(_),_.disposeRunner.add(this),E}resizeFramebuffer(_){const{gl:T}=this,E=_.glFramebuffers[this.CONTEXT_UID];if(E.stencil){T.bindRenderbuffer(T.RENDERBUFFER,E.stencil);let I;this.renderer.context.webGLVersion===1?I=T.DEPTH_STENCIL:_.depth&&_.stencil?I=T.DEPTH24_STENCIL8:_.depth?I=T.DEPTH_COMPONENT24:I=T.STENCIL_INDEX8,E.msaaBuffer?T.renderbufferStorageMultisample(T.RENDERBUFFER,E.multisample,I,_.width,_.height):T.renderbufferStorage(T.RENDERBUFFER,I,_.width,_.height)}const C=_.colorTextures;let P=C.length;T.drawBuffers||(P=Math.min(P,1));for(let I=0;I<P;I++){const F=C[I],R=F.parentTextureArray||F;this.renderer.texture.bind(R,0),I===0&&E.msaaBuffer&&(T.bindRenderbuffer(T.RENDERBUFFER,E.msaaBuffer),T.renderbufferStorageMultisample(T.RENDERBUFFER,E.multisample,R._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height))}_.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(_.depthTexture,0)}updateFramebuffer(_,T){const{gl:E}=this,C=_.glFramebuffers[this.CONTEXT_UID],P=_.colorTextures;let I=P.length;E.drawBuffers||(I=Math.min(I,1)),C.multisample>1&&this.canMultisampleFramebuffer(_)?C.msaaBuffer=C.msaaBuffer||E.createRenderbuffer():C.msaaBuffer&&(E.deleteRenderbuffer(C.msaaBuffer),C.msaaBuffer=null,C.blitFramebuffer&&(C.blitFramebuffer.dispose(),C.blitFramebuffer=null));const F=[];for(let R=0;R<I;R++){const B=P[R],O=B.parentTextureArray||B;this.renderer.texture.bind(O,0),R===0&&C.msaaBuffer?(E.bindRenderbuffer(E.RENDERBUFFER,C.msaaBuffer),E.renderbufferStorageMultisample(E.RENDERBUFFER,C.multisample,O._glTextures[this.CONTEXT_UID].internalFormat,_.width,_.height),E.framebufferRenderbuffer(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.RENDERBUFFER,C.msaaBuffer)):(E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0+R,B.target,O._glTextures[this.CONTEXT_UID].texture,T),F.push(E.COLOR_ATTACHMENT0+R))}if(F.length>1&&E.drawBuffers(F),_.depthTexture&&this.writeDepthTexture){const R=_.depthTexture;this.renderer.texture.bind(R,0),E.framebufferTexture2D(E.FRAMEBUFFER,E.DEPTH_ATTACHMENT,E.TEXTURE_2D,R._glTextures[this.CONTEXT_UID].texture,T)}if((_.stencil||_.depth)&&!(_.depthTexture&&this.writeDepthTexture)){C.stencil=C.stencil||E.createRenderbuffer();let R,B;this.renderer.context.webGLVersion===1?(R=E.DEPTH_STENCIL_ATTACHMENT,B=E.DEPTH_STENCIL):_.depth&&_.stencil?(R=E.DEPTH_STENCIL_ATTACHMENT,B=E.DEPTH24_STENCIL8):_.depth?(R=E.DEPTH_ATTACHMENT,B=E.DEPTH_COMPONENT24):(R=E.STENCIL_ATTACHMENT,B=E.STENCIL_INDEX8),E.bindRenderbuffer(E.RENDERBUFFER,C.stencil),C.msaaBuffer?E.renderbufferStorageMultisample(E.RENDERBUFFER,C.multisample,B,_.width,_.height):E.renderbufferStorage(E.RENDERBUFFER,B,_.width,_.height),E.framebufferRenderbuffer(E.FRAMEBUFFER,R,E.RENDERBUFFER,C.stencil)}else C.stencil&&(E.deleteRenderbuffer(C.stencil),C.stencil=null)}canMultisampleFramebuffer(_){return this.renderer.context.webGLVersion!==1&&_.colorTextures.length<=1&&!_.depthTexture}detectSamples(_){const{msaaSamples:T}=this;let E=MSAA_QUALITY.NONE;if(_<=1||T===null)return E;for(let C=0;C<T.length;C++)if(T[C]<=_){E=T[C];break}return E===1&&(E=MSAA_QUALITY.NONE),E}blit(_,T,E){const{current:C,renderer:P,gl:I,CONTEXT_UID:F}=this;if(P.context.webGLVersion!==2||!C)return;const R=C.glFramebuffers[F];if(!R)return;if(!_){if(!R.msaaBuffer)return;const O=C.colorTextures[0];if(!O)return;R.blitFramebuffer||(R.blitFramebuffer=new Framebuffer(C.width,C.height),R.blitFramebuffer.addColorTexture(0,O)),_=R.blitFramebuffer,_.colorTextures[0]!==O&&(_.colorTextures[0]=O,_.dirtyId++,_.dirtyFormat++),(_.width!==C.width||_.height!==C.height)&&(_.width=C.width,_.height=C.height,_.dirtyId++,_.dirtySize++)}T||(T=tempRectangle,T.width=C.width,T.height=C.height),E||(E=T);const B=T.width===E.width&&T.height===E.height;this.bind(_),I.bindFramebuffer(I.READ_FRAMEBUFFER,R.framebuffer),I.blitFramebuffer(T.left,T.top,T.right,T.bottom,E.left,E.top,E.right,E.bottom,I.COLOR_BUFFER_BIT,B?I.NEAREST:I.LINEAR),I.bindFramebuffer(I.READ_FRAMEBUFFER,_.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(_,T){const E=_.glFramebuffers[this.CONTEXT_UID],C=this.gl;if(!E)return;delete _.glFramebuffers[this.CONTEXT_UID];const P=this.managedFramebuffers.indexOf(_);P>=0&&this.managedFramebuffers.splice(P,1),_.disposeRunner.remove(this),T||(C.deleteFramebuffer(E.framebuffer),E.msaaBuffer&&C.deleteRenderbuffer(E.msaaBuffer),E.stencil&&C.deleteRenderbuffer(E.stencil)),E.blitFramebuffer&&this.disposeFramebuffer(E.blitFramebuffer,T)}disposeAll(_){const T=this.managedFramebuffers;this.managedFramebuffers=[];for(let E=0;E<T.length;E++)this.disposeFramebuffer(T[E],_)}forceStencil(){const _=this.current;if(!_)return;const T=_.glFramebuffers[this.CONTEXT_UID];if(!T||T.stencil&&_.stencil)return;_.stencil=!0;const E=_.width,C=_.height,P=this.gl,I=T.stencil=P.createRenderbuffer();P.bindRenderbuffer(P.RENDERBUFFER,I);let F,R;this.renderer.context.webGLVersion===1?(F=P.DEPTH_STENCIL_ATTACHMENT,R=P.DEPTH_STENCIL):_.depth?(F=P.DEPTH_STENCIL_ATTACHMENT,R=P.DEPTH24_STENCIL8):(F=P.STENCIL_ATTACHMENT,R=P.STENCIL_INDEX8),T.msaaBuffer?P.renderbufferStorageMultisample(P.RENDERBUFFER,T.multisample,R,E,C):P.renderbufferStorage(P.RENDERBUFFER,R,E,C),P.framebufferRenderbuffer(P.FRAMEBUFFER,F,P.RENDERBUFFER,I)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(_){this.renderer=_,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const _=this.gl=this.renderer.gl,T=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,T.webGLVersion!==2){let E=this.renderer.context.extensions.vertexArrayObject;settings$1.PREFER_ENV===ENV.WEBGL_LEGACY&&(E=null),E?(_.createVertexArray=()=>E.createVertexArrayOES(),_.bindVertexArray=C=>E.bindVertexArrayOES(C),_.deleteVertexArray=C=>E.deleteVertexArrayOES(C)):(this.hasVao=!1,_.createVertexArray=()=>null,_.bindVertexArray=()=>null,_.deleteVertexArray=()=>null)}if(T.webGLVersion!==2){const E=_.getExtension("ANGLE_instanced_arrays");E?(_.vertexAttribDivisor=(C,P)=>E.vertexAttribDivisorANGLE(C,P),_.drawElementsInstanced=(C,P,I,F,R)=>E.drawElementsInstancedANGLE(C,P,I,F,R),_.drawArraysInstanced=(C,P,I,F)=>E.drawArraysInstancedANGLE(C,P,I,F)):this.hasInstance=!1}this.canUseUInt32ElementIndex=T.webGLVersion===2||!!T.extensions.uint32ElementIndex}bind(_,T){T=T||this.renderer.shader.shader;const{gl:E}=this;let C=_.glVertexArrayObjects[this.CONTEXT_UID],P=!1;C||(this.managedGeometries[_.id]=_,_.disposeRunner.add(this),_.glVertexArrayObjects[this.CONTEXT_UID]=C={},P=!0);const I=C[T.program.id]||this.initGeometryVao(_,T,P);this._activeGeometry=_,this._activeVao!==I&&(this._activeVao=I,this.hasVao?E.bindVertexArray(I):this.activateVao(_,T.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const _=this._activeGeometry,T=this.renderer.buffer;for(let E=0;E<_.buffers.length;E++){const C=_.buffers[E];T.update(C)}}checkCompatibility(_,T){const E=_.attributes,C=T.attributeData;for(const P in C)if(!E[P])throw new Error(`shader and geometry incompatible, geometry missing the "${P}" attribute`)}getSignature(_,T){const E=_.attributes,C=T.attributeData,P=["g",_.id];for(const I in E)C[I]&&P.push(I,C[I].location);return P.join("-")}initGeometryVao(_,T,E=!0){const C=this.gl,P=this.CONTEXT_UID,I=this.renderer.buffer,F=T.program;F.glPrograms[P]||this.renderer.shader.generateProgram(T),this.checkCompatibility(_,F);const R=this.getSignature(_,F),B=_.glVertexArrayObjects[this.CONTEXT_UID];let O=B[R];if(O)return B[F.id]=O,O;const V=_.buffers,L=_.attributes,D={},U={};for(const G in V)D[G]=0,U[G]=0;for(const G in L)!L[G].size&&F.attributeData[G]?L[G].size=F.attributeData[G].size:L[G].size||console.warn(`PIXI Geometry attribute '${G}' size cannot be determined (likely the bound shader does not have the attribute)`),D[L[G].buffer]+=L[G].size*byteSizeMap[L[G].type];for(const G in L){const X=L[G],z=X.size;X.stride===void 0&&(D[X.buffer]===z*byteSizeMap[X.type]?X.stride=0:X.stride=D[X.buffer]),X.start===void 0&&(X.start=U[X.buffer],U[X.buffer]+=z*byteSizeMap[X.type])}O=C.createVertexArray(),C.bindVertexArray(O);for(let G=0;G<V.length;G++){const X=V[G];I.bind(X),E&&X._glBuffers[P].refCount++}return this.activateVao(_,F),B[F.id]=O,B[R]=O,C.bindVertexArray(null),I.unbind(BUFFER_TYPE.ARRAY_BUFFER),O}disposeGeometry(_,T){var F;if(!this.managedGeometries[_.id])return;delete this.managedGeometries[_.id];const E=_.glVertexArrayObjects[this.CONTEXT_UID],C=this.gl,P=_.buffers,I=(F=this.renderer)==null?void 0:F.buffer;if(_.disposeRunner.remove(this),!!E){if(I)for(let R=0;R<P.length;R++){const B=P[R]._glBuffers[this.CONTEXT_UID];B&&(B.refCount--,B.refCount===0&&!T&&I.dispose(P[R],T))}if(!T){for(const R in E)if(R[0]==="g"){const B=E[R];this._activeVao===B&&this.unbind(),C.deleteVertexArray(B)}}delete _.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(_){const T=Object.keys(this.managedGeometries);for(let E=0;E<T.length;E++)this.disposeGeometry(this.managedGeometries[T[E]],_)}activateVao(_,T){const E=this.gl,C=this.CONTEXT_UID,P=this.renderer.buffer,I=_.buffers,F=_.attributes;_.indexBuffer&&P.bind(_.indexBuffer);let R=null;for(const B in F){const O=F[B],V=I[O.buffer],L=V._glBuffers[C];if(T.attributeData[B]){R!==L&&(P.bind(V),R=L);const D=T.attributeData[B].location;if(E.enableVertexAttribArray(D),E.vertexAttribPointer(D,O.size,O.type||E.FLOAT,O.normalized,O.stride,O.start),O.instance)if(this.hasInstance)E.vertexAttribDivisor(D,O.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(_,T,E,C){const{gl:P}=this,I=this._activeGeometry;if(I.indexBuffer){const F=I.indexBuffer.data.BYTES_PER_ELEMENT,R=F===2?P.UNSIGNED_SHORT:P.UNSIGNED_INT;F===2||F===4&&this.canUseUInt32ElementIndex?I.instanced?P.drawElementsInstanced(_,T||I.indexBuffer.data.length,R,(E||0)*F,C||1):P.drawElements(_,T||I.indexBuffer.data.length,R,(E||0)*F):console.warn("unsupported index buffer type: uint32")}else I.instanced?P.drawArraysInstanced(_,E,T||I.getSize(),C||1):P.drawArrays(_,E,T||I.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions.add(GeometrySystem);const tempMat=new Matrix;class TextureMatrix{constructor(_,T){this._texture=_,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof T>"u"?.5:T,this.isSimple=!1}get texture(){return this._texture}set texture(_){this._texture=_,this._textureID=-1}multiplyUvs(_,T){T===void 0&&(T=_);const E=this.mapCoord;for(let C=0;C<_.length;C+=2){const P=_[C],I=_[C+1];T[C]=P*E.a+I*E.c+E.tx,T[C+1]=P*E.b+I*E.d+E.ty}return T}update(_){const T=this._texture;if(!T||!T.valid||!_&&this._textureID===T._updateID)return!1;this._textureID=T._updateID,this._updateID++;const E=T._uvs;this.mapCoord.set(E.x1-E.x0,E.y1-E.y0,E.x3-E.x0,E.y3-E.y0,E.x0,E.y0);const C=T.orig,P=T.trim;P&&(tempMat.set(C.width/P.width,0,0,C.height/P.height,-P.x/P.width,-P.y/P.height),this.mapCoord.append(tempMat));const I=T.baseTexture,F=this.uClampFrame,R=this.clampMargin/I.resolution,B=this.clampOffset;return F[0]=(T._frame.x+R+B)/I.width,F[1]=(T._frame.y+R+B)/I.height,F[2]=(T._frame.x+T._frame.width-R+B)/I.width,F[3]=(T._frame.y+T._frame.height-R+B)/I.height,this.uClampOffset[0]=B/I.realWidth,this.uClampOffset[1]=B/I.realHeight,this.isSimple=T._frame.width===I.width&&T._frame.height===I.height&&T.rotate===0,!0}}var fragment$1=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter{constructor(_,T,E){let C=null;typeof _!="string"&&T===void 0&&E===void 0&&(C=_,_=void 0,T=void 0,E=void 0),super(_||vertex$1,T||fragment$1,E),this.maskSprite=C,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(_){this._maskSprite=_,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(_,T,E,C){const P=this._maskSprite,I=P._texture;I.valid&&(I.uvMatrix||(I.uvMatrix=new TextureMatrix(I,0)),I.uvMatrix.update(),this.uniforms.npmAlpha=I.baseTexture.alphaMode?0:1,this.uniforms.mask=I,this.uniforms.otherMatrix=_.calculateSpriteMatrix(this.maskMatrix,P).prepend(I.uvMatrix.mapCoord),this.uniforms.alpha=P.worldAlpha,this.uniforms.maskClamp=I.uvMatrix.uClampFrame,_.applyFilter(this,T,E,C))}}class MaskData{constructor(_=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=_||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(_){_?this._filters?this._filters[0]=_:this._filters=[_]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(_){_?(this._stencilCounter=_._stencilCounter,this._scissorCounter=_._scissorCounter,this._scissorRect=_._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(_){this.renderer=_,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(_){this.maskStack=_,this.renderer.scissor.setMaskStack(_),this.renderer.stencil.setMaskStack(_)}push(_,T){let E=T;if(!E.isMaskData){const P=this.maskDataPool.pop()||new MaskData;P.pooled=!0,P.maskObject=T,E=P}const C=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(E.copyCountersOrReset(C),E._colorMask=C?C._colorMask:15,E.autoDetect&&this.detect(E),E._target=_,E.type!==MASK_TYPES.SPRITE&&this.maskStack.push(E),E.enabled)switch(E.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(E);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(E);break;case MASK_TYPES.SPRITE:E.copyCountersOrReset(null),this.pushSpriteMask(E);break;case MASK_TYPES.COLOR:this.pushColorMask(E);break}E.type===MASK_TYPES.SPRITE&&this.maskStack.push(E)}pop(_){const T=this.maskStack.pop();if(!(!T||T._target!==_)){if(T.enabled)switch(T.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(T);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(T.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(T);break;case MASK_TYPES.COLOR:this.popColorMask(T);break}if(T.reset(),T.pooled&&this.maskDataPool.push(T),this.maskStack.length!==0){const E=this.maskStack[this.maskStack.length-1];E.type===MASK_TYPES.SPRITE&&E._filters&&(E._filters[0].maskSprite=E.maskObject)}}}detect(_){const T=_.maskObject;T?T.isSprite?_.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(_)?_.type=MASK_TYPES.SCISSOR:_.type=MASK_TYPES.STENCIL:_.type=MASK_TYPES.COLOR}pushSpriteMask(_){const{maskObject:T}=_,E=_._target;let C=_._filters;C||(C=this.alphaMaskPool[this.alphaMaskIndex],C||(C=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),C[0].resolution=_.resolution,C[0].multisample=_.multisample,C[0].maskSprite=T;const P=E.filterArea;E.filterArea=T.getBounds(!0),this.renderer.filter.push(E,C),E.filterArea=P,_._filters||this.alphaMaskIndex++}popSpriteMask(_){this.renderer.filter.pop(),_._filters?_._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(_){const T=_._colorMask,E=_._colorMask=T&_.colorMask;E!==T&&this.renderer.gl.colorMask((E&1)!==0,(E&2)!==0,(E&4)!==0,(E&8)!==0)}popColorMask(_){const T=_._colorMask,E=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;E!==T&&this.renderer.gl.colorMask((E&1)!==0,(E&2)!==0,(E&4)!==0,(E&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions.add(MaskSystem);class AbstractMaskSystem{constructor(_){this.renderer=_,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(_){const{gl:T}=this.renderer,E=this.getStackLength();this.maskStack=_;const C=this.getStackLength();C!==E&&(C===0?T.disable(this.glConst):(T.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$1=new Matrix,rectPool=[],_ScissorSystem=class Bt extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings$1.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._scissorCounter:0}calcScissorRect(_){if(_._scissorRectLocal)return;const T=_._scissorRect,{maskObject:E}=_,{renderer:C}=this,P=C.renderTexture,I=E.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(I,P.current?P.current.resolution:C.resolution,P.sourceFrame,P.destinationFrame,C.projection.transform),T&&I.fit(T),_._scissorRectLocal=I}static isMatrixRotated(_){if(!_)return!1;const{a:T,b:E,c:C,d:P}=_;return(Math.abs(E)>1e-4||Math.abs(C)>1e-4)&&(Math.abs(T)>1e-4||Math.abs(P)>1e-4)}testScissor(_){const{maskObject:T}=_;if(!T.isFastRect||!T.isFastRect()||Bt.isMatrixRotated(T.worldTransform)||Bt.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(_);const E=_._scissorRectLocal;return E.width>0&&E.height>0}roundFrameToPixels(_,T,E,C,P){Bt.isMatrixRotated(P)||(P=P?tempMatrix$1.copyFrom(P):tempMatrix$1.identity(),P.translate(-E.x,-E.y).scale(C.width/E.width,C.height/E.height).translate(C.x,C.y),this.renderer.filter.transformAABB(P,_),_.fit(C),_.x=Math.round(_.x*T),_.y=Math.round(_.y*T),_.width=Math.round(_.width*T),_.height=Math.round(_.height*T))}push(_){_._scissorRectLocal||this.calcScissorRect(_);const{gl:T}=this.renderer;_._scissorRect||T.enable(T.SCISSOR_TEST),_._scissorCounter++,_._scissorRect=_._scissorRectLocal,this._useCurrent()}pop(_){const{gl:T}=this.renderer;_&&rectPool.push(_._scissorRectLocal),this.getStackLength()>0?this._useCurrent():T.disable(T.SCISSOR_TEST)}_useCurrent(){const _=this.maskStack[this.maskStack.length-1]._scissorRect;let T;this.renderer.renderTexture.current?T=_.y:T=this.renderer.height-_.height-_.y,this.renderer.gl.scissor(_.x,T,_.width,_.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(_){super(_),this.glConst=settings$1.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const _=this.maskStack[this.maskStack.length-1];return _?_._stencilCounter:0}push(_){const T=_.maskObject,{gl:E}=this.renderer,C=_._stencilCounter;C===0&&(this.renderer.framebuffer.forceStencil(),E.clearStencil(0),E.clear(E.STENCIL_BUFFER_BIT),E.enable(E.STENCIL_TEST)),_._stencilCounter++;const P=_._colorMask;P!==0&&(_._colorMask=0,E.colorMask(!1,!1,!1,!1)),E.stencilFunc(E.EQUAL,C,4294967295),E.stencilOp(E.KEEP,E.KEEP,E.INCR),T.renderable=!0,T.render(this.renderer),this.renderer.batch.flush(),T.renderable=!1,P!==0&&(_._colorMask=P,E.colorMask((P&1)!==0,(P&2)!==0,(P&4)!==0,(P&8)!==0)),this._useCurrent()}pop(_){const T=this.renderer.gl;if(this.getStackLength()===0)T.disable(T.STENCIL_TEST);else{const E=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,C=E?E._colorMask:15;C!==0&&(E._colorMask=0,T.colorMask(!1,!1,!1,!1)),T.stencilOp(T.KEEP,T.KEEP,T.DECR),_.renderable=!0,_.render(this.renderer),this.renderer.batch.flush(),_.renderable=!1,C!==0&&(E._colorMask=C,T.colorMask((C&1)!==0,(C&2)!==0,(C&4)!==0,(C&8)!==0)),this._useCurrent()}}_useCurrent(){const _=this.renderer.gl;_.stencilFunc(_.EQUAL,this.getStackLength(),4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions.add(StencilSystem);class PluginSystem{constructor(_){this.renderer=_,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),_.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),_.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),_.events}}})}init(){const _=this.rendererPlugins;for(const T in _)this.plugins[T]=new _[T](this.renderer)}destroy(){for(const _ in this.plugins)this.plugins[_].destroy(),this.plugins[_]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions.add(PluginSystem);class ProjectionSystem{constructor(_){this.renderer=_,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(_,T,E,C){this.destinationFrame=_||this.destinationFrame||this.defaultFrame,this.sourceFrame=T||this.sourceFrame||_,this.calculateProjection(this.destinationFrame,this.sourceFrame,E,C),this.transform&&this.projectionMatrix.append(this.transform);const P=this.renderer;P.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,P.globalUniforms.update(),P.shader.shader&&P.shader.syncUniformGroup(P.shader.shader.uniforms.globals)}calculateProjection(_,T,E,C){const P=this.projectionMatrix,I=C?-1:1;P.identity(),P.a=1/T.width*2,P.d=I*(1/T.height*2),P.tx=-1-T.x*P.a,P.ty=-I-T.y*P.d}setTransform(_){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(_){this.renderer=_,this._tempMatrix=new Matrix}generateTexture(_,T){const{region:E,...C}=T||{},P=(E==null?void 0:E.copyTo(tempRect$1))||_.getLocalBounds(tempRect$1,!0),I=C.resolution||this.renderer.resolution;P.width=Math.max(P.width,1/I),P.height=Math.max(P.height,1/I),C.width=P.width,C.height=P.height,C.resolution=I,C.multisample??(C.multisample=this.renderer.multisample);const F=RenderTexture.create(C);this._tempMatrix.tx=-P.x,this._tempMatrix.ty=-P.y;const R=_.transform;return _.transform=tempTransform,this.renderer.render(_,{renderTexture:F,transform:this._tempMatrix,skipUpdateTransform:!!_.parent,blit:!0}),_.transform=R,F}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(_){this.renderer=_,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var T;const _=(T=this.renderer)==null?void 0:T.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(_&&_.alpha&&_.premultipliedAlpha)}bind(_=null,T,E){const C=this.renderer;this.current=_;let P,I,F;_?(P=_.baseTexture,F=P.resolution,T||(tempRect.width=_.frame.width,tempRect.height=_.frame.height,T=tempRect),E||(tempRect2.x=_.frame.x,tempRect2.y=_.frame.y,tempRect2.width=T.width,tempRect2.height=T.height,E=tempRect2),I=P.framebuffer):(F=C.resolution,T||(tempRect.width=C._view.screen.width,tempRect.height=C._view.screen.height,T=tempRect),E||(E=tempRect,E.width=T.width,E.height=T.height));const R=this.viewportFrame;R.x=E.x*F,R.y=E.y*F,R.width=E.width*F,R.height=E.height*F,_||(R.y=C.view.height-(R.y+R.height)),R.ceil(),this.renderer.framebuffer.bind(I,R),this.renderer.projection.update(E,T,F,!I),_?this.renderer.mask.setMaskStack(P.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(T),this.destinationFrame.copyFrom(E)}clear(_,T){const E=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,C=Color$1.shared.setValue(_||E);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&C.premultiply(C.alpha);const P=this.destinationFrame,I=this.current?this.current.baseTexture:this.renderer._view.screen,F=P.width!==I.width||P.height!==I.height;if(F){let{x:R,y:B,width:O,height:V}=this.viewportFrame;R=Math.round(R),B=Math.round(B),O=Math.round(O),V=Math.round(V),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(R,B,O,V)}this.renderer.framebuffer.clear(C.red,C.green,C.blue,C.alpha,T),F&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions.add(RenderTextureSystem);class GLProgram{constructor(_,T){this.program=_,this.uniformData=T,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(A,_){const T={},E=_.getProgramParameter(A,_.ACTIVE_ATTRIBUTES);for(let C=0;C<E;C++){const P=_.getActiveAttrib(A,C);if(P.name.startsWith("gl_"))continue;const I=mapType(_,P.type),F={type:I,name:P.name,size:mapSize(I),location:_.getAttribLocation(A,P.name)};T[P.name]=F}return T}function getUniformData(A,_){const T={},E=_.getProgramParameter(A,_.ACTIVE_UNIFORMS);for(let C=0;C<E;C++){const P=_.getActiveUniform(A,C),I=P.name.replace(/\[.*?\]$/,""),F=!!P.name.match(/\[.*?\]$/),R=mapType(_,P.type);T[I]={name:I,index:C,type:R,size:P.size,isArray:F,value:defaultValue(R,P.size)}}return T}function generateProgram(A,_){var F;const T=compileShader(A,A.VERTEX_SHADER,_.vertexSrc),E=compileShader(A,A.FRAGMENT_SHADER,_.fragmentSrc),C=A.createProgram();A.attachShader(C,T),A.attachShader(C,E);const P=(F=_.extra)==null?void 0:F.transformFeedbackVaryings;if(P&&(typeof A.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):A.transformFeedbackVaryings(C,P.names,P.bufferMode==="separate"?A.SEPARATE_ATTRIBS:A.INTERLEAVED_ATTRIBS)),A.linkProgram(C),A.getProgramParameter(C,A.LINK_STATUS)||logProgramError(A,C,T,E),_.attributeData=getAttributeData(C,A),_.uniformData=getUniformData(C,A),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(_.vertexSrc)){const R=Object.keys(_.attributeData);R.sort((B,O)=>B>O?1:-1);for(let B=0;B<R.length;B++)_.attributeData[R[B]].location=B,A.bindAttribLocation(C,B,R[B]);A.linkProgram(C)}A.deleteShader(T),A.deleteShader(E);const I={};for(const R in _.uniformData){const B=_.uniformData[R];I[R]={location:A.getUniformLocation(C,R),value:defaultValue(B.type,B.size)}}return new GLProgram(C,I)}function uboUpdate(A,_,T,E,C){T.buffer.update(C)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(A){const _=A.map(P=>({data:P,offset:0,dataLen:0,dirty:0}));let T=0,E=0,C=0;for(let P=0;P<_.length;P++){const I=_[P];if(T=GLSL_TO_STD40_SIZE[I.data.type],I.data.size>1&&(T=Math.max(T,16)*I.data.size),I.dataLen=T,E%T!==0&&E<16){const F=E%T%16;E+=F,C+=F}E+T>16?(C=Math.ceil(C/16)*16,I.offset=C,C+=T,E=T):(I.offset=C,E+=T,C+=T)}return C=Math.ceil(C/16)*16,{uboElements:_,size:C}}function getUBOData(A,_){const T=[];for(const E in A)_[E]&&T.push(_[E]);return T.sort((E,C)=>E.index-C.index),T}function generateUniformBufferSync(A,_){if(!A.autoManage)return{size:0,syncFunc:uboUpdate};const T=getUBOData(A.uniforms,_),{uboElements:E,size:C}=createUBOElements(T),P=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let I=0;I<E.length;I++){const F=E[I],R=A.uniforms[F.data.name],B=F.data.name;let O=!1;for(let V=0;V<uniformParsers.length;V++){const L=uniformParsers[V];if(L.codeUbo&&L.test(F.data,R)){P.push(`offset = ${F.offset/4};`,uniformParsers[V].codeUbo(F.data.name,R)),O=!0;break}}if(!O)if(F.data.size>1){const V=mapSize(F.data.type),L=Math.max(GLSL_TO_STD40_SIZE[F.data.type]/16,1),D=V/L,U=(4-D%4)%4;P.push(`
                cv = ud.${B}.value;
                v = uv.${B};
                offset = ${F.offset/4};

                t = 0;

                for(var i=0; i < ${F.data.size*L}; i++)
                {
                    for(var j = 0; j < ${D}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${U};
                }

                `)}else{const V=UBO_TO_SINGLE_SETTERS[F.data.type];P.push(`
                cv = ud.${B}.value;
                v = uv.${B};
                offset = ${F.offset/4};
                ${V};
                `)}}return P.push(`
       renderer.buffer.update(buffer);
    `),{size:C,syncFunc:new Function("ud","uv","renderer","syncData","buffer",P.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(_){this.destroyed=!1,this.renderer=_,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(_){this.gl=_,this.reset()}bind(_,T){_.disposeRunner.add(this),_.uniforms.globals=this.renderer.globalUniforms;const E=_.program,C=E.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(_);return this.shader=_,this.program!==E&&(this.program=E,this.gl.useProgram(C.program)),T||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(_.uniformGroup,defaultSyncData)),C}setUniforms(_){const T=this.shader.program,E=T.glPrograms[this.renderer.CONTEXT_UID];T.syncUniforms(E.uniformData,_,this.renderer)}syncUniformGroup(_,T){const E=this.getGlProgram();(!_.static||_.dirtyId!==E.uniformDirtyGroups[_.id])&&(E.uniformDirtyGroups[_.id]=_.dirtyId,this.syncUniforms(_,E,T))}syncUniforms(_,T,E){(_.syncUniforms[this.shader.program.id]||this.createSyncGroups(_))(T.uniformData,_.uniforms,this.renderer,E)}createSyncGroups(_){const T=this.getSignature(_,this.shader.program.uniformData,"u");return this.cache[T]||(this.cache[T]=generateUniformsSync(_,this.shader.program.uniformData)),_.syncUniforms[this.shader.program.id]=this.cache[T],_.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(_,T){const E=this.getGlProgram();if(!_.static||_.dirtyId!==0||!E.uniformGroups[_.id]){_.dirtyId=0;const C=E.uniformGroups[_.id]||this.createSyncBufferGroup(_,E,T);_.buffer.update(),C(E.uniformData,_.uniforms,this.renderer,defaultSyncData,_.buffer)}this.renderer.buffer.bindBufferBase(_.buffer,E.uniformBufferBindings[T])}createSyncBufferGroup(_,T,E){const{gl:C}=this.renderer;this.renderer.buffer.bind(_.buffer);const P=this.gl.getUniformBlockIndex(T.program,E);T.uniformBufferBindings[E]=this.shader.uniformBindCount,C.uniformBlockBinding(T.program,P,this.shader.uniformBindCount),this.shader.uniformBindCount++;const I=this.getSignature(_,this.shader.program.uniformData,"ubo");let F=this._uboCache[I];if(F||(F=this._uboCache[I]=generateUniformBufferSync(_,this.shader.program.uniformData)),_.autoManage){const R=new Float32Array(F.size/4);_.buffer.update(R)}return T.uniformGroups[_.id]=F.syncFunc,T.uniformGroups[_.id]}getSignature(_,T,E){const C=_.uniforms,P=[`${E}-`];for(const I in C)P.push(I),T[I]&&P.push(T[I].type);return P.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(_){const T=this.gl,E=_.program,C=generateProgram(T,E);return E.glPrograms[this.renderer.CONTEXT_UID]=C,C}reset(){this.program=null,this.shader=null}disposeShader(_){this.shader===_&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions.add(ShaderSystem);class StartupSystem{constructor(_){this.renderer=_}run(_){const{renderer:T}=this;T.runners.init.emit(T.options),_.hello&&console.log(`PixiJS 7.4.3 - ${T.rendererLogId} - https://pixijs.com`),T.resize(T.screen.width,T.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions.add(StartupSystem);function mapWebGLBlendModesToPixi(A,_=[]){return _[BLEND_MODES.NORMAL]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD]=[A.ONE,A.ONE],_[BLEND_MODES.MULTIPLY]=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SCREEN]=[A.ONE,A.ONE_MINUS_SRC_COLOR,A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.OVERLAY]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DARKEN]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LIGHTEN]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_DODGE]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR_BURN]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HARD_LIGHT]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SOFT_LIGHT]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DIFFERENCE]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.EXCLUSION]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.HUE]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SATURATION]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.COLOR]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.LUMINOSITY]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.NONE]=[0,0],_[BLEND_MODES.NORMAL_NPM]=[A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.ADD_NPM]=[A.SRC_ALPHA,A.ONE,A.ONE,A.ONE],_[BLEND_MODES.SCREEN_NPM]=[A.SRC_ALPHA,A.ONE_MINUS_SRC_COLOR,A.ONE,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SRC_IN]=[A.DST_ALPHA,A.ZERO],_[BLEND_MODES.SRC_OUT]=[A.ONE_MINUS_DST_ALPHA,A.ZERO],_[BLEND_MODES.SRC_ATOP]=[A.DST_ALPHA,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_OVER]=[A.ONE_MINUS_DST_ALPHA,A.ONE],_[BLEND_MODES.DST_IN]=[A.ZERO,A.SRC_ALPHA],_[BLEND_MODES.DST_OUT]=[A.ZERO,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.DST_ATOP]=[A.ONE_MINUS_DST_ALPHA,A.SRC_ALPHA],_[BLEND_MODES.XOR]=[A.ONE_MINUS_DST_ALPHA,A.ONE_MINUS_SRC_ALPHA],_[BLEND_MODES.SUBTRACT]=[A.ONE,A.ONE,A.ONE,A.ONE,A.FUNC_REVERSE_SUBTRACT,A.FUNC_ADD],_}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class qt{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(_){this.gl=_,this.blendModes=mapWebGLBlendModesToPixi(_),this.set(this.defaultState),this.reset()}set(_){if(_=_||this.defaultState,this.stateId!==_.data){let T=this.stateId^_.data,E=0;for(;T;)T&1&&this.map[E].call(this,!!(_.data&1<<E)),T=T>>1,E++;this.stateId=_.data}for(let T=0;T<this.checks.length;T++)this.checks[T](this,_)}forceState(_){_=_||this.defaultState;for(let T=0;T<this.map.length;T++)this.map[T].call(this,!!(_.data&1<<T));for(let T=0;T<this.checks.length;T++)this.checks[T](this,_);this.stateId=_.data}setBlend(_){this.updateCheck(qt.checkBlendMode,_),this.gl[_?"enable":"disable"](this.gl.BLEND)}setOffset(_){this.updateCheck(qt.checkPolygonOffset,_),this.gl[_?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(_){this.gl[_?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(_){this.gl.depthMask(_)}setCullFace(_){this.gl[_?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(_){this.gl.frontFace(this.gl[_?"CW":"CCW"])}setBlendMode(_){if(_===this.blendMode)return;this.blendMode=_;const T=this.blendModes[_],E=this.gl;T.length===2?E.blendFunc(T[0],T[1]):E.blendFuncSeparate(T[0],T[1],T[2],T[3]),T.length===6?(this._blendEq=!0,E.blendEquationSeparate(T[4],T[5])):this._blendEq&&(this._blendEq=!1,E.blendEquationSeparate(E.FUNC_ADD,E.FUNC_ADD))}setPolygonOffset(_,T){this.gl.polygonOffset(_,T)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(_,T){const E=this.checks.indexOf(_);T&&E===-1?this.checks.push(_):!T&&E!==-1&&this.checks.splice(E,1)}static checkBlendMode(_,T){_.setBlendMode(T.blendMode)}static checkPolygonOffset(_,T){_.setPolygonOffset(1,T.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(_){this.addRunners(..._.runners);const T=(_.priority??[]).filter(C=>_.systems[C]),E=[...T,...Object.keys(_.systems).filter(C=>!T.includes(C))];for(const C of E)this.addSystem(_.systems[C],C)}addRunners(..._){_.forEach(T=>{this.runners[T]=new Runner(T)})}addSystem(_,T){const E=new _(this);if(this[T])throw new Error(`Whoops! The name "${T}" is already in use`);this[T]=E,this._systemsHash[T]=E;for(const C in this.runners)this.runners[C].add(E);return this}emitWithCustomOptions(_,T){const E=Object.keys(this._systemsHash);_.items.forEach(C=>{const P=E.find(I=>this._systemsHash[I]===C);C[_.name](T[P])})}destroy(){Object.values(this.runners).forEach(_=>{_.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class kt{constructor(_){this.renderer=_,this.count=0,this.checkCount=0,this.maxIdle=kt.defaultMaxIdle,this.checkCountMax=kt.defaultCheckCountMax,this.mode=kt.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const _=this.renderer.texture,T=_.managedTextures;let E=!1;for(let C=0;C<T.length;C++){const P=T[C];P.resource&&this.count-P.touched>this.maxIdle&&(_.destroyTexture(P,!0),T[C]=null,E=!0)}if(E){let C=0;for(let P=0;P<T.length;P++)T[P]!==null&&(T[C++]=T[P]);T.length=C}}unload(_){const T=this.renderer.texture,E=_._texture;E&&!E.framebuffer&&T.destroyTexture(E);for(let C=_.children.length-1;C>=0;C--)this.unload(_.children[C])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions.add(TextureGCSystem);class GLTexture{constructor(_){this.texture=_,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(A){let _;return"WebGL2RenderingContext"in globalThis&&A instanceof globalThis.WebGL2RenderingContext?_={[A.RGB]:SAMPLER_TYPES.FLOAT,[A.RGBA]:SAMPLER_TYPES.FLOAT,[A.ALPHA]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[A.R8]:SAMPLER_TYPES.FLOAT,[A.R8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RG8]:SAMPLER_TYPES.FLOAT,[A.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RGB8]:SAMPLER_TYPES.FLOAT,[A.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RGB565]:SAMPLER_TYPES.FLOAT,[A.RGBA4]:SAMPLER_TYPES.FLOAT,[A.RGB5_A1]:SAMPLER_TYPES.FLOAT,[A.RGBA8]:SAMPLER_TYPES.FLOAT,[A.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RGB10_A2]:SAMPLER_TYPES.FLOAT,[A.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[A.SRGB8]:SAMPLER_TYPES.FLOAT,[A.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[A.R16F]:SAMPLER_TYPES.FLOAT,[A.RG16F]:SAMPLER_TYPES.FLOAT,[A.RGB16F]:SAMPLER_TYPES.FLOAT,[A.RGBA16F]:SAMPLER_TYPES.FLOAT,[A.R32F]:SAMPLER_TYPES.FLOAT,[A.RG32F]:SAMPLER_TYPES.FLOAT,[A.RGB32F]:SAMPLER_TYPES.FLOAT,[A.RGBA32F]:SAMPLER_TYPES.FLOAT,[A.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[A.RGB9_E5]:SAMPLER_TYPES.FLOAT,[A.R8I]:SAMPLER_TYPES.INT,[A.R8UI]:SAMPLER_TYPES.UINT,[A.R16I]:SAMPLER_TYPES.INT,[A.R16UI]:SAMPLER_TYPES.UINT,[A.R32I]:SAMPLER_TYPES.INT,[A.R32UI]:SAMPLER_TYPES.UINT,[A.RG8I]:SAMPLER_TYPES.INT,[A.RG8UI]:SAMPLER_TYPES.UINT,[A.RG16I]:SAMPLER_TYPES.INT,[A.RG16UI]:SAMPLER_TYPES.UINT,[A.RG32I]:SAMPLER_TYPES.INT,[A.RG32UI]:SAMPLER_TYPES.UINT,[A.RGB8I]:SAMPLER_TYPES.INT,[A.RGB8UI]:SAMPLER_TYPES.UINT,[A.RGB16I]:SAMPLER_TYPES.INT,[A.RGB16UI]:SAMPLER_TYPES.UINT,[A.RGB32I]:SAMPLER_TYPES.INT,[A.RGB32UI]:SAMPLER_TYPES.UINT,[A.RGBA8I]:SAMPLER_TYPES.INT,[A.RGBA8UI]:SAMPLER_TYPES.UINT,[A.RGBA16I]:SAMPLER_TYPES.INT,[A.RGBA16UI]:SAMPLER_TYPES.UINT,[A.RGBA32I]:SAMPLER_TYPES.INT,[A.RGBA32UI]:SAMPLER_TYPES.UINT,[A.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[A.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[A.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[A.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[A.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[A.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:_={[A.RGB]:SAMPLER_TYPES.FLOAT,[A.RGBA]:SAMPLER_TYPES.FLOAT,[A.ALPHA]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[A.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},_}function mapTypeAndFormatToInternalFormat(A){let _;return"WebGL2RenderingContext"in globalThis&&A instanceof globalThis.WebGL2RenderingContext?_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:A.RGBA8,[FORMATS.RGB]:A.RGB8,[FORMATS.RG]:A.RG8,[FORMATS.RED]:A.R8,[FORMATS.RGBA_INTEGER]:A.RGBA8UI,[FORMATS.RGB_INTEGER]:A.RGB8UI,[FORMATS.RG_INTEGER]:A.RG8UI,[FORMATS.RED_INTEGER]:A.R8UI,[FORMATS.ALPHA]:A.ALPHA,[FORMATS.LUMINANCE]:A.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:A.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:A.RGBA8_SNORM,[FORMATS.RGB]:A.RGB8_SNORM,[FORMATS.RG]:A.RG8_SNORM,[FORMATS.RED]:A.R8_SNORM,[FORMATS.RGBA_INTEGER]:A.RGBA8I,[FORMATS.RGB_INTEGER]:A.RGB8I,[FORMATS.RG_INTEGER]:A.RG8I,[FORMATS.RED_INTEGER]:A.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:A.RGBA16UI,[FORMATS.RGB_INTEGER]:A.RGB16UI,[FORMATS.RG_INTEGER]:A.RG16UI,[FORMATS.RED_INTEGER]:A.R16UI,[FORMATS.DEPTH_COMPONENT]:A.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:A.RGBA16I,[FORMATS.RGB_INTEGER]:A.RGB16I,[FORMATS.RG_INTEGER]:A.RG16I,[FORMATS.RED_INTEGER]:A.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:A.RGBA32UI,[FORMATS.RGB_INTEGER]:A.RGB32UI,[FORMATS.RG_INTEGER]:A.RG32UI,[FORMATS.RED_INTEGER]:A.R32UI,[FORMATS.DEPTH_COMPONENT]:A.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:A.RGBA32I,[FORMATS.RGB_INTEGER]:A.RGB32I,[FORMATS.RG_INTEGER]:A.RG32I,[FORMATS.RED_INTEGER]:A.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:A.RGBA32F,[FORMATS.RGB]:A.RGB32F,[FORMATS.RG]:A.RG32F,[FORMATS.RED]:A.R32F,[FORMATS.DEPTH_COMPONENT]:A.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:A.RGBA16F,[FORMATS.RGB]:A.RGB16F,[FORMATS.RG]:A.RG16F,[FORMATS.RED]:A.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:A.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:A.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:A.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:A.RGB10_A2,[FORMATS.RGBA_INTEGER]:A.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:A.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:A.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:A.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:A.DEPTH32F_STENCIL8}}:_={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:A.RGBA,[FORMATS.RGB]:A.RGB,[FORMATS.ALPHA]:A.ALPHA,[FORMATS.LUMINANCE]:A.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:A.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:A.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:A.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:A.RGBA}},_}class TextureSystem{constructor(_){this.renderer=_,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const _=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(_),this.samplerTypes=mapInternalFormatToSamplerType(_);const T=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=T;for(let C=0;C<T;C++)this.boundTextures[C]=null;this.emptyTextures={};const E=new GLTexture(_.createTexture());_.bindTexture(_.TEXTURE_2D,E.texture),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[_.TEXTURE_2D]=E,this.emptyTextures[_.TEXTURE_CUBE_MAP]=new GLTexture(_.createTexture()),_.bindTexture(_.TEXTURE_CUBE_MAP,this.emptyTextures[_.TEXTURE_CUBE_MAP].texture);for(let C=0;C<6;C++)_.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+C,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,null);_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MAG_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_CUBE_MAP,_.TEXTURE_MIN_FILTER,_.LINEAR);for(let C=0;C<this.boundTextures.length;C++)this.bind(null,C)}bind(_,T=0){const{gl:E}=this;if(_=_==null?void 0:_.castToBaseTexture(),(_==null?void 0:_.valid)&&!_.parentTextureArray){_.touched=this.renderer.textureGC.count;const C=_._glTextures[this.CONTEXT_UID]||this.initTexture(_);this.boundTextures[T]!==_&&(this.currentLocation!==T&&(this.currentLocation=T,E.activeTexture(E.TEXTURE0+T)),E.bindTexture(_.target,C.texture)),C.dirtyId!==_.dirtyId?(this.currentLocation!==T&&(this.currentLocation=T,E.activeTexture(E.TEXTURE0+T)),this.updateTexture(_)):C.dirtyStyleId!==_.dirtyStyleId&&this.updateTextureStyle(_),this.boundTextures[T]=_}else this.currentLocation!==T&&(this.currentLocation=T,E.activeTexture(E.TEXTURE0+T)),E.bindTexture(E.TEXTURE_2D,this.emptyTextures[E.TEXTURE_2D].texture),this.boundTextures[T]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let _=0;_<this.boundTextures.length;_++)this.boundTextures[_]=this.unknownTexture}unbind(_){const{gl:T,boundTextures:E}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let C=0;C<E.length;C++)E[C]===this.unknownTexture&&this.bind(null,C)}for(let C=0;C<E.length;C++)E[C]===_&&(this.currentLocation!==C&&(T.activeTexture(T.TEXTURE0+C),this.currentLocation=C),T.bindTexture(_.target,this.emptyTextures[_.target].texture),E[C]=null)}ensureSamplerType(_){const{boundTextures:T,hasIntegerTextures:E,CONTEXT_UID:C}=this;if(E)for(let P=_-1;P>=0;--P){const I=T[P];I&&I._glTextures[C].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(I)}}initTexture(_){const T=new GLTexture(this.gl.createTexture());return T.dirtyId=-1,_._glTextures[this.CONTEXT_UID]=T,this.managedTextures.push(_),_.on("dispose",this.destroyTexture,this),T}initTextureType(_,T){var E;T.internalFormat=((E=this.internalFormats[_.type])==null?void 0:E[_.format])??_.format,T.samplerType=this.samplerTypes[T.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&_.type===TYPES.HALF_FLOAT?T.type=this.gl.HALF_FLOAT:T.type=_.type}updateTexture(_){var C;const T=_._glTextures[this.CONTEXT_UID];if(!T)return;const E=this.renderer;if(this.initTextureType(_,T),(C=_.resource)==null?void 0:C.upload(E,_,T))T.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const P=_.realWidth,I=_.realHeight,F=E.gl;(T.width!==P||T.height!==I||T.dirtyId<0)&&(T.width=P,T.height=I,F.texImage2D(_.target,0,T.internalFormat,P,I,0,_.format,T.type,null))}_.dirtyStyleId!==T.dirtyStyleId&&this.updateTextureStyle(_),T.dirtyId=_.dirtyId}destroyTexture(_,T){const{gl:E}=this;if(_=_.castToBaseTexture(),_._glTextures[this.CONTEXT_UID]&&(this.unbind(_),E.deleteTexture(_._glTextures[this.CONTEXT_UID].texture),_.off("dispose",this.destroyTexture,this),delete _._glTextures[this.CONTEXT_UID],!T)){const C=this.managedTextures.indexOf(_);C!==-1&&removeItems(this.managedTextures,C,1)}}updateTextureStyle(_){var E;const T=_._glTextures[this.CONTEXT_UID];T&&((_.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!_.isPowerOfTwo?T.mipmap=!1:T.mipmap=_.mipmap>=1,this.webGLVersion!==2&&!_.isPowerOfTwo?T.wrapMode=WRAP_MODES.CLAMP:T.wrapMode=_.wrapMode,(E=_.resource)!=null&&E.style(this.renderer,_,T)||this.setStyle(_,T),T.dirtyStyleId=_.dirtyStyleId)}setStyle(_,T){const E=this.gl;if(T.mipmap&&_.mipmap!==MIPMAP_MODES.ON_MANUAL&&E.generateMipmap(_.target),E.texParameteri(_.target,E.TEXTURE_WRAP_S,T.wrapMode),E.texParameteri(_.target,E.TEXTURE_WRAP_T,T.wrapMode),T.mipmap){E.texParameteri(_.target,E.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?E.LINEAR_MIPMAP_LINEAR:E.NEAREST_MIPMAP_NEAREST);const C=this.renderer.context.extensions.anisotropicFiltering;if(C&&_.anisotropicLevel>0&&_.scaleMode===SCALE_MODES.LINEAR){const P=Math.min(_.anisotropicLevel,E.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT));E.texParameterf(_.target,C.TEXTURE_MAX_ANISOTROPY_EXT,P)}}else E.texParameteri(_.target,E.TEXTURE_MIN_FILTER,_.scaleMode===SCALE_MODES.LINEAR?E.LINEAR:E.NEAREST);E.texParameteri(_.target,E.TEXTURE_MAG_FILTER,_.scaleMode===SCALE_MODES.LINEAR?E.LINEAR:E.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions.add(TextureSystem);class TransformFeedbackSystem{constructor(_){this.renderer=_}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:T,CONTEXT_UID:E}=this,C=_._glTransformFeedbacks[E]||this.createGLTransformFeedback(_);T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,C)}unbind(){const{gl:_}=this;_.bindTransformFeedback(_.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(_,T){const{gl:E,renderer:C}=this;T&&C.shader.bind(T),E.beginTransformFeedback(_)}endTransformFeedback(){const{gl:_}=this;_.endTransformFeedback()}createGLTransformFeedback(_){const{gl:T,renderer:E,CONTEXT_UID:C}=this,P=T.createTransformFeedback();_._glTransformFeedbacks[C]=P,T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,P);for(let I=0;I<_.buffers.length;I++){const F=_.buffers[I];F&&(E.buffer.update(F),F._glBuffers[C].refCount++,T.bindBufferBase(T.TRANSFORM_FEEDBACK_BUFFER,I,F._glBuffers[C].buffer||null))}return T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,null),_.disposeRunner.add(this),P}disposeTransformFeedback(_,T){const E=_._glTransformFeedbacks[this.CONTEXT_UID],C=this.gl;_.disposeRunner.remove(this);const P=this.renderer.buffer;if(P)for(let I=0;I<_.buffers.length;I++){const F=_.buffers[I];if(!F)continue;const R=F._glBuffers[this.CONTEXT_UID];R&&(R.refCount--,R.refCount===0&&!T&&P.dispose(F,T))}E&&(T||C.deleteTransformFeedback(E),delete _._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions.add(TransformFeedbackSystem);class ViewSystem{constructor(_){this.renderer=_}init(_){this.screen=new Rectangle(0,0,_.width,_.height),this.element=_.view||settings$1.ADAPTER.createCanvas(),this.resolution=_.resolution||settings$1.RESOLUTION,this.autoDensity=!!_.autoDensity}resizeView(_,T){this.element.width=Math.round(_*this.resolution),this.element.height=Math.round(T*this.resolution);const E=this.element.width/this.resolution,C=this.element.height/this.resolution;this.screen.width=E,this.screen.height=C,this.autoDensity&&(this.element.style.width=`${E}px`,this.element.style.height=`${C}px`),this.renderer.emit("resize",E,C),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(_){var T;_&&((T=this.element.parentNode)==null||T.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions.add(ViewSystem);settings$1.PREFER_ENV=ENV.WEBGL2;settings$1.STRICT_TEXTURE_CACHE=!1;settings$1.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings$1,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(A){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=A}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(A){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=A}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(A){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=A}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(A){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=A}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter.defaultResolution},set(A){Filter.defaultResolution=A}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter.defaultMultisample},set(A){Filter.defaultMultisample=A}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(A){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=A}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(A){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=A}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(A){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=A}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(A){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=A}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(A){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=A}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(A){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=A}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(A){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=A}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(A){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=A}}});var UPDATE_PRIORITY=(A=>(A[A.INTERACTION=50]="INTERACTION",A[A.HIGH=25]="HIGH",A[A.NORMAL=0]="NORMAL",A[A.LOW=-25]="LOW",A[A.UTILITY=-50]="UTILITY",A))(UPDATE_PRIORITY||{});class TickerListener{constructor(_,T=null,E=0,C=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=_,this.context=T,this.priority=E,this.once=C}match(_,T=null){return this.fn===_&&this.context===T}emit(_){this.fn&&(this.context?this.fn.call(this.context,_):this.fn(_));const T=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),T}connect(_){this.previous=_,_.next&&(_.next.previous=this),this.next=_.next,_.next=this}destroy(_=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const T=this.next;return this.next=_?null:T,this.previous=null,T}}const _Ticker=class Qe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Qe.targetFPMS,this.elapsedMS=1/Qe.targetFPMS,this._tick=_=>{this._requestId=null,this.started&&(this.update(_),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(_,T,E=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,T,E))}addOnce(_,T,E=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(_,T,E,!0))}_addListener(_){let T=this._head.next,E=this._head;if(!T)_.connect(E);else{for(;T;){if(_.priority>T.priority){_.connect(E);break}E=T,T=T.next}_.previous||_.connect(E)}return this._startIfPossible(),this}remove(_,T){let E=this._head.next;for(;E;)E.match(_,T)?E=E.destroy():E=E.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let _=0,T=this._head;for(;T=T.next;)_++;return _}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let _=this._head.next;for(;_;)_=_.destroy(!0);this._head.destroy(),this._head=null}}update(_=performance.now()){let T;if(_>this.lastTime){if(T=this.elapsedMS=_-this.lastTime,T>this._maxElapsedMS&&(T=this._maxElapsedMS),T*=this.speed,this._minElapsedMS){const P=_-this._lastFrame|0;if(P<this._minElapsedMS)return;this._lastFrame=_-P%this._minElapsedMS}this.deltaMS=T,this.deltaTime=this.deltaMS*Qe.targetFPMS;const E=this._head;let C=E.next;for(;C;)C=C.emit(this.deltaTime);E.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=_}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(_){const T=Math.min(this.maxFPS,_),E=Math.min(Math.max(0,T)/1e3,Qe.targetFPMS);this._maxElapsedMS=1/E}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(_){if(_===0)this._minElapsedMS=0;else{const T=Math.max(this.minFPS,_);this._minElapsedMS=1/(T/1e3)}}static get shared(){if(!Qe._shared){const _=Qe._shared=new Qe;_.autoStart=!0,_._protected=!0}return Qe._shared}static get system(){if(!Qe._system){const _=Qe._system=new Qe;_.autoStart=!0,_._protected=!0}return Qe._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker;Object.defineProperties(settings$1,{TARGET_FPMS:{get(){return Ticker.targetFPMS},set(A){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker.targetFPMS=A}}});class TickerPlugin{static init(_){_=Object.assign({autoStart:!0,sharedTicker:!1},_),Object.defineProperty(this,"ticker",{set(T){this._ticker&&this._ticker.remove(this.render,this),this._ticker=T,T&&T.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=_.sharedTicker?Ticker.shared:new Ticker,_.autoStart&&this.start()}static destroy(){if(this._ticker){const _=this._ticker;this.ticker=null,_.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions.add(TickerPlugin);const renderers=[];extensions.handleByList(ExtensionType.Renderer,renderers);class MultisampleSystem{constructor(_){this.renderer=_}contextChange(_){let T;if(this.renderer.context.webGLVersion===1){const E=_.getParameter(_.FRAMEBUFFER_BINDING);_.bindFramebuffer(_.FRAMEBUFFER,null),T=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.FRAMEBUFFER,E)}else{const E=_.getParameter(_.DRAW_FRAMEBUFFER_BINDING);_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),T=_.getParameter(_.SAMPLES),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,E)}T>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:T>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:T>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions.add(MultisampleSystem);class GLBuffer{constructor(_){this.buffer=_||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(_){this.renderer=_,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(_){const{gl:T,CONTEXT_UID:E}=this,C=_._glBuffers[E]||this.createGLBuffer(_);T.bindBuffer(_.type,C.buffer)}unbind(_){const{gl:T}=this;T.bindBuffer(_,null)}bindBufferBase(_,T){const{gl:E,CONTEXT_UID:C}=this;if(this.boundBufferBases[T]!==_){const P=_._glBuffers[C]||this.createGLBuffer(_);this.boundBufferBases[T]=_,E.bindBufferBase(E.UNIFORM_BUFFER,T,P.buffer)}}bindBufferRange(_,T,E){const{gl:C,CONTEXT_UID:P}=this;E=E||0;const I=_._glBuffers[P]||this.createGLBuffer(_);C.bindBufferRange(C.UNIFORM_BUFFER,T||0,I.buffer,E*256,256)}update(_){const{gl:T,CONTEXT_UID:E}=this,C=_._glBuffers[E]||this.createGLBuffer(_);if(_._updateID!==C.updateID)if(C.updateID=_._updateID,T.bindBuffer(_.type,C.buffer),C.byteLength>=_.data.byteLength)T.bufferSubData(_.type,0,_.data);else{const P=_.static?T.STATIC_DRAW:T.DYNAMIC_DRAW;C.byteLength=_.data.byteLength,T.bufferData(_.type,_.data,P)}}dispose(_,T){if(!this.managedBuffers[_.id])return;delete this.managedBuffers[_.id];const E=_._glBuffers[this.CONTEXT_UID],C=this.gl;_.disposeRunner.remove(this),E&&(T||C.deleteBuffer(E.buffer),delete _._glBuffers[this.CONTEXT_UID])}disposeAll(_){const T=Object.keys(this.managedBuffers);for(let E=0;E<T.length;E++)this.dispose(this.managedBuffers[T[E]],_)}createGLBuffer(_){const{CONTEXT_UID:T,gl:E}=this;return _._glBuffers[T]=new GLBuffer(E.createBuffer()),this.managedBuffers[_.id]=_,_.disposeRunner.add(this),_._glBuffers[T]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions.add(BufferSystem);class ObjectRendererSystem{constructor(_){this.renderer=_}render(_,T){const E=this.renderer;let C,P,I,F;if(T&&(C=T.renderTexture,P=T.clear,I=T.transform,F=T.skipUpdateTransform),this.renderingToScreen=!C,E.runners.prerender.emit(),E.emit("prerender"),E.projection.transform=I,!E.context.isLost){if(C||(this.lastObjectRendered=_),!F){const R=_.enableTempParent();_.updateTransform(),_.disableTempParent(R)}E.renderTexture.bind(C),E.batch.currentRenderer.start(),(P??E.background.clearBeforeRender)&&E.renderTexture.clear(),_.render(E),E.batch.currentRenderer.flush(),C&&(T.blit&&E.framebuffer.blit(),C.baseTexture.update()),E.runners.postrender.emit(),E.projection.transform=null,E.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions.add(ObjectRendererSystem);const _Renderer=class Kt extends SystemManager{constructor(_){super(),this.type=RENDERER_TYPE.WEBGL,_=Object.assign({},settings$1.RENDER_OPTIONS,_),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const T={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Kt.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(T),"useContextAlpha"in _&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),_.premultipliedAlpha=_.useContextAlpha&&_.useContextAlpha!=="notMultiplied",_.backgroundAlpha=_.useContextAlpha===!1?1:_.backgroundAlpha),this._plugin.rendererPlugins=Kt.__plugins,this.options=_,this.startup.run(this.options)}static test(_){return _!=null&&_.forceCanvas?!1:isWebGLSupported()}render(_,T){this.objectRenderer.render(_,T)}resize(_,T){this._view.resizeView(_,T)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(_=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:_}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(_){this._view.resolution=_,this.runners.resolutionChange.emit(_)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(_){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=_}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(_){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=_}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(_,T){return this.textureGenerator.generateTexture(_,T)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer=_Renderer;extensions.handleByMap(ExtensionType.RendererPlugin,Renderer.__plugins);extensions.handleByMap(ExtensionType.RendererSystem,Renderer.__systems);extensions.add(Renderer);class AbstractMultiResource extends Resource{constructor(_,T){const{width:E,height:C}=T||{};super(E,C),this.items=[],this.itemDirtyIds=[];for(let P=0;P<_;P++){const I=new BaseTexture;this.items.push(I),this.itemDirtyIds.push(-2)}this.length=_,this._load=null,this.baseTexture=null}initFromArray(_,T){for(let E=0;E<this.length;E++)_[E]&&(_[E].castToBaseTexture?this.addBaseTextureAt(_[E].castToBaseTexture(),E):_[E]instanceof Resource?this.addResourceAt(_[E],E):this.addResourceAt(autoDetectResource(_[E],T),E))}dispose(){for(let _=0,T=this.length;_<T;_++)this.items[_].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(_,T){if(!this.items[T])throw new Error(`Index ${T} is out of bounds`);return _.valid&&!this.valid&&this.resize(_.width,_.height),this.items[T].setResource(_),this}bind(_){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(_);for(let T=0;T<this.length;T++)this.items[T].parentTextureArray=_,this.items[T].on("update",_.update,_)}unbind(_){super.unbind(_);for(let T=0;T<this.length;T++)this.items[T].parentTextureArray=null,this.items[T].off("update",_.update,_)}load(){if(this._load)return this._load;const _=this.items.map(T=>T.resource).filter(T=>T).map(T=>T.load());return this._load=Promise.all(_).then(()=>{const{realWidth:T,realHeight:E}=this.items[0];return this.resize(T,E),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(_,T){const{width:E,height:C}=T||{};let P,I;Array.isArray(_)?(P=_,I=_.length):I=_,super(I,{width:E,height:C}),P&&this.initFromArray(P,T)}addBaseTextureAt(_,T){if(_.resource)this.addResourceAt(_.resource,T);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_2D_ARRAY}upload(_,T,E){const{length:C,itemDirtyIds:P,items:I}=this,{gl:F}=_;E.dirtyId<0&&F.texImage3D(F.TEXTURE_2D_ARRAY,0,E.internalFormat,this._width,this._height,C,0,T.format,E.type,null);for(let R=0;R<C;R++){const B=I[R];P[R]<B.dirtyId&&(P[R]=B.dirtyId,B.valid&&F.texSubImage3D(F.TEXTURE_2D_ARRAY,0,0,0,R,B.resource.width,B.resource.height,1,T.format,E.type,B.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(_){super(_)}static test(_){const{OffscreenCanvas:T}=globalThis;return T&&_ instanceof T?!0:globalThis.HTMLCanvasElement&&_ instanceof HTMLCanvasElement}}const _CubeResource=class wt extends AbstractMultiResource{constructor(_,T){const{width:E,height:C,autoLoad:P,linkBaseTexture:I}=T||{};if(_&&_.length!==wt.SIDES)throw new Error(`Invalid length. Got ${_.length}, expected 6`);super(6,{width:E,height:C});for(let F=0;F<wt.SIDES;F++)this.items[F].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+F;this.linkBaseTexture=I!==!1,_&&this.initFromArray(_,T),P!==!1&&this.load()}bind(_){super.bind(_),_.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(_,T,E){if(E===void 0&&(E=this.linkBaseTexture),!this.items[T])throw new Error(`Index ${T} is out of bounds`);if(!this.linkBaseTexture||_.parentTextureArray||Object.keys(_._glTextures).length>0)if(_.resource)this.addResourceAt(_.resource,T);else throw new Error("CubeResource does not support copying of renderTexture.");else _.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+T,_.parentTextureArray=this.baseTexture,this.items[T]=_;return _.valid&&!this.valid&&this.resize(_.realWidth,_.realHeight),this.items[T]=_,this}upload(_,T,E){const C=this.itemDirtyIds;for(let P=0;P<wt.SIDES;P++){const I=this.items[P];(C[P]<I.dirtyId||E.dirtyId<T.dirtyId)&&(I.valid&&I.resource?(I.resource.upload(_,I,E),C[P]=I.dirtyId):C[P]<-1&&(_.gl.texImage2D(I.target,0,E.internalFormat,T.realWidth,T.realHeight,0,T.format,E.type,null),C[P]=-1))}return!0}static test(_){return Array.isArray(_)&&_.length===wt.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(_,T){T=T||{};let E,C,P;typeof _=="string"?(E=ImageBitmapResource.EMPTY,C=_,P=!0):(E=_,C=null,P=!1),super(E),this.url=C,this.crossOrigin=T.crossOrigin??!0,this.alphaMode=typeof T.alphaMode=="number"?T.alphaMode:null,this.ownsImageBitmap=T.ownsImageBitmap??P,this._load=null,T.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(_,T)=>{if(this.url===null){_(this);return}try{const E=await settings$1.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const C=await E.blob();if(this.destroyed)return;const P=await createImageBitmap(C,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){P.close();return}this.source=P,this.update(),_(this)}catch(E){if(this.destroyed)return;T(E),this.onError.emit(E)}}),this._load)}upload(_,T,E){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(T.alphaMode=this.alphaMode),super.upload(_,T,E)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(_){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof _=="string"||_ instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings$1.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class $t extends BaseImageResource{constructor(_,T){T=T||{},super(settings$1.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=_,this.scale=T.scale||1,this._overrideWidth=T.width,this._overrideHeight=T.height,this._resolve=null,this._crossorigin=T.crossorigin,this._load=null,T.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(_=>{if(this._resolve=()=>{this.update(),_(this)},$t.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const _=new Image;BaseImageResource.crossOrigin(_,this.svg,this._crossorigin),_.src=this.svg,_.onerror=T=>{this._resolve&&(_.onerror=null,this.onError.emit(T))},_.onload=()=>{if(!this._resolve)return;const T=_.width,E=_.height;if(!T||!E)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let C=T*this.scale,P=E*this.scale;(this._overrideWidth||this._overrideHeight)&&(C=this._overrideWidth||this._overrideHeight/E*T,P=this._overrideHeight||this._overrideWidth/T*E),C=Math.round(C),P=Math.round(P);const I=this.source;I.width=C,I.height=P,I._pixiId=`canvas_${uid()}`,I.getContext("2d").drawImage(_,0,0,T,E,0,0,C,P),this._resolve(),this._resolve=null}}static getSize(_){const T=$t.SVG_SIZE.exec(_),E={};return T&&(E[T[1]]=Math.round(parseFloat(T[3])),E[T[5]]=Math.round(parseFloat(T[7]))),E}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(_,T){return T==="svg"||typeof _=="string"&&_.startsWith("data:image/svg+xml")||typeof _=="string"&&$t.SVG_XML.test(_)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;class VideoFrameResource extends BaseImageResource{constructor(_){super(_)}static test(_){return!!globalThis.VideoFrame&&_ instanceof globalThis.VideoFrame}}const _VideoResource=class Zt extends BaseImageResource{constructor(_,T){if(T=T||{},!(_ instanceof HTMLVideoElement)){const E=document.createElement("video");T.autoLoad!==!1&&E.setAttribute("preload","auto"),T.playsinline!==!1&&(E.setAttribute("webkit-playsinline",""),E.setAttribute("playsinline","")),T.muted===!0&&(E.setAttribute("muted",""),E.muted=!0),T.loop===!0&&E.setAttribute("loop",""),T.autoPlay!==!1&&E.setAttribute("autoplay",""),typeof _=="string"&&(_=[_]);const C=_[0].src||_[0];BaseImageResource.crossOrigin(E,C,T.crossorigin);for(let P=0;P<_.length;++P){const I=document.createElement("source");let{src:F,mime:R}=_[P];if(F=F||_[P],F.startsWith("data:"))R=F.slice(5,F.indexOf(";"));else if(!F.startsWith("blob:")){const B=F.split("?").shift().toLowerCase(),O=B.slice(B.lastIndexOf(".")+1);R=R||Zt.MIME_TYPES[O]||`video/${O}`}I.src=F,R&&(I.type=R),E.appendChild(I)}_=E}super(_),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=T.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=T.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),T.autoLoad!==!1&&this.load()}update(_=0){if(!this.destroyed){if(this._updateFPS){const T=Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-T)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const _=this.source;return(_.readyState===_.HAVE_ENOUGH_DATA||_.readyState===_.HAVE_FUTURE_DATA)&&_.width&&_.height&&(_.complete=!0),_.addEventListener("play",this._onPlayStart),_.addEventListener("pause",this._onPlayStop),_.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(_.addEventListener("canplay",this._onCanPlay),_.addEventListener("canplaythrough",this._onCanPlay),_.addEventListener("error",this._onError,!0)),this._load=new Promise((T,E)=>{this.valid?T(this):(this._resolve=T,this._reject=E,_.load())}),this._load}_onError(_){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(_),this._reject&&(this._reject(_),this._reject=null,this._resolve=null)}_isSourcePlaying(){const _=this.source;return!_.paused&&!_.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const _=this.source;_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay);const T=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!T&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&_.play()}dispose(){this._configureAutoUpdate();const _=this.source;_&&(_.removeEventListener("play",this._onPlayStart),_.removeEventListener("pause",this._onPlayStop),_.removeEventListener("seeked",this._onSeeked),_.removeEventListener("canplay",this._onCanPlay),_.removeEventListener("canplaythrough",this._onCanPlay),_.removeEventListener("error",this._onError,!0),_.pause(),_.src="",_.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(_){_!==this._autoUpdate&&(this._autoUpdate=_,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(_){_!==this._updateFPS&&(this._updateFPS=_,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(_,T){return globalThis.HTMLVideoElement&&_ instanceof HTMLVideoElement||Zt.TYPES.includes(T)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,VideoFrameResource,SVGResource,BufferResource,CubeResource,ArrayResource);function filterFromString(A){switch(A.toLowerCase()){case"nearest":return TextureFilter.Nearest;case"linear":return TextureFilter.Linear;case"mipmap":return TextureFilter.MipMap;case"mipmapnearestnearest":return TextureFilter.MipMapNearestNearest;case"mipmaplinearnearest":return TextureFilter.MipMapLinearNearest;case"mipmapnearestlinear":return TextureFilter.MipMapNearestLinear;case"mipmaplinearlinear":return TextureFilter.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${A}`)}}var TextureFilter=(A=>(A[A.Nearest=9728]="Nearest",A[A.Linear=9729]="Linear",A[A.MipMap=9987]="MipMap",A[A.MipMapNearestNearest=9984]="MipMapNearestNearest",A[A.MipMapLinearNearest=9985]="MipMapLinearNearest",A[A.MipMapNearestLinear=9986]="MipMapNearestLinear",A[A.MipMapLinearLinear=9987]="MipMapLinearLinear",A))(TextureFilter||{}),TextureWrap=(A=>(A[A.MirroredRepeat=33648]="MirroredRepeat",A[A.ClampToEdge=33071]="ClampToEdge",A[A.Repeat=10497]="Repeat",A))(TextureWrap||{});class TextureRegion{constructor(){this.size=null,this.names=null,this.values=null,this.renderObject=null}get width(){const _=this.texture;return _.trim?_.trim.width:_.orig.width}get height(){const _=this.texture;return _.trim?_.trim.height:_.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const _=this.texture;return _.trim?_.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const _=this.texture;return _.trim?_.trim.y:0}get spineOffsetY(){const _=this.texture;return this.originalHeight-this.height-(_.trim?_.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return this.texture.rotate!==0}get degrees(){return(360-this.texture.rotate*45)%360}}class RegionFields{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}}class TextureAtlas{constructor(_,T,E){this.pages=new Array,this.regions=new Array,_&&this.addSpineAtlas(_,T,E)}addTexture(_,T){const E=this.pages;let C=null;for(let I=0;I<E.length;I++)if(E[I].baseTexture===T.baseTexture){C=E[I];break}if(C===null){C=new TextureAtlasPage,C.name="texturePage";const I=T.baseTexture;C.width=I.realWidth,C.height=I.realHeight,C.baseTexture=I,C.minFilter=C.magFilter=TextureFilter.Nearest,C.uWrap=TextureWrap.ClampToEdge,C.vWrap=TextureWrap.ClampToEdge,E.push(C)}const P=new TextureAtlasRegion;return P.name=_,P.page=C,P.texture=T,P.index=-1,this.regions.push(P),P}addTextureHash(_,T){for(const E in _)_.hasOwnProperty(E)&&this.addTexture(T&&E.indexOf(".")!==-1?E.substr(0,E.lastIndexOf(".")):E,_[E])}addSpineAtlas(_,T,E){return this.load(_,T,E)}load(_,T,E){if(T==null)throw new Error("textureLoader cannot be null.");const C=new TextureAtlasReader(_),P=new Array(4);let I=null;const F={};let R=null;F.size=()=>{I.width=parseInt(P[1]),I.height=parseInt(P[2])},F.format=()=>{},F.filter=()=>{I.minFilter=filterFromString(P[1]),I.magFilter=filterFromString(P[2])},F.repeat=()=>{P[1].indexOf("x")!=-1&&(I.uWrap=TextureWrap.Repeat),P[1].indexOf("y")!=-1&&(I.vWrap=TextureWrap.Repeat)},F.pma=()=>{I.pma=P[1]=="true"};const B={};B.xy=()=>{R.x=parseInt(P[1]),R.y=parseInt(P[2])},B.size=()=>{R.width=parseInt(P[1]),R.height=parseInt(P[2])},B.bounds=()=>{R.x=parseInt(P[1]),R.y=parseInt(P[2]),R.width=parseInt(P[3]),R.height=parseInt(P[4])},B.offset=()=>{R.offsetX=parseInt(P[1]),R.offsetY=parseInt(P[2])},B.orig=()=>{R.originalWidth=parseInt(P[1]),R.originalHeight=parseInt(P[2])},B.offsets=()=>{R.offsetX=parseInt(P[1]),R.offsetY=parseInt(P[2]),R.originalWidth=parseInt(P[3]),R.originalHeight=parseInt(P[4])},B.rotate=()=>{const L=P[1];let D=0;L.toLocaleLowerCase()=="true"?D=6:L.toLocaleLowerCase()=="false"?D=0:D=(720-parseFloat(L))%360/45,R.rotate=D},B.index=()=>{R.index=parseInt(P[1])};let O=C.readLine();for(;O!=null&&O.trim().length==0;)O=C.readLine();for(;!(O==null||O.trim().length==0||C.readEntry(P,O)==0);)O=C.readLine();const V=()=>{for(;;){if(O==null)return E&&E(this);if(O.trim().length==0)I=null,O=C.readLine();else if(I===null){for(I=new TextureAtlasPage,I.name=O.trim();C.readEntry(P,O=C.readLine())!=0;){const L=F[P[0]];L&&L()}this.pages.push(I),T(I.name,L=>{if(L===null)return this.pages.splice(this.pages.indexOf(I),1),E&&E(null);I.baseTexture=L,I.pma&&(L.alphaMode=ALPHA_MODES.PMA),L.valid||L.setSize(I.width,I.height),I.setFilters(),(!I.width||!I.height)&&(I.width=L.realWidth,I.height=L.realHeight,(!I.width||!I.height)&&console.log(`ERROR spine atlas page ${I.name}: meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)`)),V()});break}else{R=new RegionFields;const L=new TextureAtlasRegion;L.name=O,L.page=I;let D=null,U=null;for(;;){const q=C.readEntry(P,O=C.readLine());if(q==0)break;const K=B[P[0]];if(K)K();else{D==null&&(D=[],U=[]),D.push(P[0]);const J=[];for(let Z=0;Z<q;Z++)J.push(parseInt(P[Z+1]));U.push(J)}}R.originalWidth==0&&R.originalHeight==0&&(R.originalWidth=R.width,R.originalHeight=R.height);const G=I.baseTexture.resolution;R.x/=G,R.y/=G,R.width/=G,R.height/=G,R.originalWidth/=G,R.originalHeight/=G,R.offsetX/=G,R.offsetY/=G;const X=R.rotate%4!==0,z=new Rectangle(R.x,R.y,X?R.height:R.width,X?R.width:R.height),Y=new Rectangle(0,0,R.originalWidth,R.originalHeight),W=new Rectangle(R.offsetX,R.originalHeight-R.height-R.offsetY,R.width,R.height);L.texture=new Texture(L.page.baseTexture,z,Y,W,R.rotate),L.index=R.index,L.texture.updateUvs(),this.regions.push(L)}}};V()}findRegion(_){for(let T=0;T<this.regions.length;T++)if(this.regions[T].name==_)return this.regions[T];return null}dispose(){for(let _=0;_<this.pages.length;_++)this.pages[_].baseTexture.dispose()}}class TextureAtlasReader{constructor(_){this.index=0,this.lines=_.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(_,T){if(T==null||(T=T.trim(),T.length==0))return 0;const E=T.indexOf(":");if(E==-1)return 0;_[0]=T.substr(0,E).trim();for(let C=1,P=E+1;;C++){const I=T.indexOf(",",P);if(I==-1)return _[C]=T.substr(P).trim(),C;if(_[C]=T.substr(P,I-P).trim(),P=I+1,C==4)return 4}}}class TextureAtlasPage{constructor(){this.minFilter=TextureFilter.Nearest,this.magFilter=TextureFilter.Nearest,this.uWrap=TextureWrap.ClampToEdge,this.vWrap=TextureWrap.ClampToEdge}setFilters(){const _=this.baseTexture,T=this.minFilter;T==TextureFilter.Linear?_.scaleMode=SCALE_MODES.LINEAR:this.minFilter==TextureFilter.Nearest?_.scaleMode=SCALE_MODES.NEAREST:(_.mipmap=MIPMAP_MODES.POW2,T==TextureFilter.MipMapNearestNearest?_.scaleMode=SCALE_MODES.NEAREST:_.scaleMode=SCALE_MODES.LINEAR)}}class TextureAtlasRegion extends TextureRegion{}class StringSet{constructor(){this.entries={},this.size=0}add(_){const T=this.entries[_];return this.entries[_]=!0,T?!1:(this.size++,!0)}addAll(_){const T=this.size;for(let E=0,C=_.length;E<C;E++)this.add(_[E]);return T!=this.size}contains(_){return this.entries[_]}clear(){this.entries={},this.size=0}}const _Color=class{constructor(A=0,_=0,T=0,E=0){this.r=A,this.g=_,this.b=T,this.a=E}set(A,_,T,E){return this.r=A,this.g=_,this.b=T,this.a=E,this.clamp()}setFromColor(A){return this.r=A.r,this.g=A.g,this.b=A.b,this.a=A.a,this}setFromString(A){return A=A.charAt(0)=="#"?A.substr(1):A,this.r=parseInt(A.substr(0,2),16)/255,this.g=parseInt(A.substr(2,2),16)/255,this.b=parseInt(A.substr(4,2),16)/255,this.a=A.length!=8?1:parseInt(A.substr(6,2),16)/255,this}add(A,_,T,E){return this.r+=A,this.g+=_,this.b+=T,this.a+=E,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(A,_){A.r=((_&4278190080)>>>24)/255,A.g=((_&16711680)>>>16)/255,A.b=((_&65280)>>>8)/255,A.a=(_&255)/255}static rgb888ToColor(A,_){A.r=((_&16711680)>>>16)/255,A.g=((_&65280)>>>8)/255,A.b=(_&255)/255}static fromString(A){return new _Color().setFromString(A)}};let Color=_Color;Color.WHITE=new _Color(1,1,1,1);Color.RED=new _Color(1,0,0,1);Color.GREEN=new _Color(0,1,0,1);Color.BLUE=new _Color(0,0,1,1);Color.MAGENTA=new _Color(1,0,1,1);const _MathUtils=class{static clamp(A,_,T){return A<_?_:A>T?T:A}static cosDeg(A){return Math.cos(A*_MathUtils.degRad)}static sinDeg(A){return Math.sin(A*_MathUtils.degRad)}static signum(A){return Math.sign(A)}static toInt(A){return A>0?Math.floor(A):Math.ceil(A)}static cbrt(A){const _=Math.pow(Math.abs(A),.3333333333333333);return A<0?-_:_}static randomTriangular(A,_){return _MathUtils.randomTriangularWith(A,_,(A+_)*.5)}static randomTriangularWith(A,_,T){const E=Math.random(),C=_-A;return E<=(T-A)/C?A+Math.sqrt(E*C*(T-A)):_-Math.sqrt((1-E)*C*(_-T))}static isPowerOfTwo(A){return A&&(A&A-1)===0}};let MathUtils=_MathUtils;MathUtils.PI=3.1415927;MathUtils.PI2=_MathUtils.PI*2;MathUtils.radiansToDegrees=180/_MathUtils.PI;MathUtils.radDeg=_MathUtils.radiansToDegrees;MathUtils.degreesToRadians=_MathUtils.PI/180;MathUtils.degRad=_MathUtils.degreesToRadians;class Interpolation{apply(_,T,E){return _+(T-_)*this.applyInternal(E)}}class Pow extends Interpolation{constructor(_){super(),this.power=2,this.power=_}applyInternal(_){return _<=.5?Math.pow(_*2,this.power)/2:Math.pow((_-1)*2,this.power)/(this.power%2==0?-2:2)+1}}class PowOut extends Pow{applyInternal(_){return Math.pow(_-1,this.power)*(this.power%2==0?-1:1)+1}}const _Utils=class{static arrayCopy(A,_,T,E,C){for(let P=_,I=E;P<_+C;P++,I++)T[I]=A[P]}static arrayFill(A,_,T,E){for(let C=_;C<T;C++)A[C]=E}static setArraySize(A,_,T=0){const E=A.length;if(E==_)return A;if(A.length=_,E<_)for(let C=E;C<_;C++)A[C]=T;return A}static ensureArrayCapacity(A,_,T=0){return A.length>=_?A:_Utils.setArraySize(A,_,T)}static newArray(A,_){const T=new Array(A);for(let E=0;E<A;E++)T[E]=_;return T}static newFloatArray(A){if(_Utils.SUPPORTS_TYPED_ARRAYS)return new Float32Array(A);const _=new Array(A);for(let T=0;T<_.length;T++)_[T]=0;return _}static newShortArray(A){if(_Utils.SUPPORTS_TYPED_ARRAYS)return new Int16Array(A);const _=new Array(A);for(let T=0;T<_.length;T++)_[T]=0;return _}static toFloatArray(A){return _Utils.SUPPORTS_TYPED_ARRAYS?new Float32Array(A):A}static toSinglePrecision(A){return _Utils.SUPPORTS_TYPED_ARRAYS?Math.fround(A):A}static webkit602BugfixHelper(A,_){}static contains(A,_,T=!0){for(let E=0;E<A.length;E++)if(A[E]==_)return!0;return!1}static enumValue(A,_){return A[_[0].toUpperCase()+_.slice(1)]}};let Utils=_Utils;Utils.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";const settings={GLOBAL_DELAY_LIMIT:0};class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(_){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(_=_||new Rectangle(0,0,1,1),_.x=this.minX,_.y=this.minY,_.width=this.maxX-this.minX,_.height=this.maxY-this.minY,_)}addPoint(_){this.minX=Math.min(this.minX,_.x),this.maxX=Math.max(this.maxX,_.x),this.minY=Math.min(this.minY,_.y),this.maxY=Math.max(this.maxY,_.y)}addPointMatrix(_,T){const{a:E,b:C,c:P,d:I,tx:F,ty:R}=_,B=E*T.x+P*T.y+F,O=C*T.x+I*T.y+R;this.minX=Math.min(this.minX,B),this.maxX=Math.max(this.maxX,B),this.minY=Math.min(this.minY,O),this.maxY=Math.max(this.maxY,O)}addQuad(_){let T=this.minX,E=this.minY,C=this.maxX,P=this.maxY,I=_[0],F=_[1];T=I<T?I:T,E=F<E?F:E,C=I>C?I:C,P=F>P?F:P,I=_[2],F=_[3],T=I<T?I:T,E=F<E?F:E,C=I>C?I:C,P=F>P?F:P,I=_[4],F=_[5],T=I<T?I:T,E=F<E?F:E,C=I>C?I:C,P=F>P?F:P,I=_[6],F=_[7],T=I<T?I:T,E=F<E?F:E,C=I>C?I:C,P=F>P?F:P,this.minX=T,this.minY=E,this.maxX=C,this.maxY=P}addFrame(_,T,E,C,P){this.addFrameMatrix(_.worldTransform,T,E,C,P)}addFrameMatrix(_,T,E,C,P){const I=_.a,F=_.b,R=_.c,B=_.d,O=_.tx,V=_.ty;let L=this.minX,D=this.minY,U=this.maxX,G=this.maxY,X=I*T+R*E+O,z=F*T+B*E+V;L=X<L?X:L,D=z<D?z:D,U=X>U?X:U,G=z>G?z:G,X=I*C+R*E+O,z=F*C+B*E+V,L=X<L?X:L,D=z<D?z:D,U=X>U?X:U,G=z>G?z:G,X=I*T+R*P+O,z=F*T+B*P+V,L=X<L?X:L,D=z<D?z:D,U=X>U?X:U,G=z>G?z:G,X=I*C+R*P+O,z=F*C+B*P+V,L=X<L?X:L,D=z<D?z:D,U=X>U?X:U,G=z>G?z:G,this.minX=L,this.minY=D,this.maxX=U,this.maxY=G}addVertexData(_,T,E){let C=this.minX,P=this.minY,I=this.maxX,F=this.maxY;for(let R=T;R<E;R+=2){const B=_[R],O=_[R+1];C=B<C?B:C,P=O<P?O:P,I=B>I?B:I,F=O>F?O:F}this.minX=C,this.minY=P,this.maxX=I,this.maxY=F}addVertices(_,T,E,C){this.addVerticesMatrix(_.worldTransform,T,E,C)}addVerticesMatrix(_,T,E,C,P=0,I=P){const F=_.a,R=_.b,B=_.c,O=_.d,V=_.tx,L=_.ty;let D=this.minX,U=this.minY,G=this.maxX,X=this.maxY;for(let z=E;z<C;z+=2){const Y=T[z],W=T[z+1],q=F*Y+B*W+V,K=O*W+R*Y+L;D=Math.min(D,q-P),G=Math.max(G,q+P),U=Math.min(U,K-I),X=Math.max(X,K+I)}this.minX=D,this.minY=U,this.maxX=G,this.maxY=X}addBounds(_){const T=this.minX,E=this.minY,C=this.maxX,P=this.maxY;this.minX=_.minX<T?_.minX:T,this.minY=_.minY<E?_.minY:E,this.maxX=_.maxX>C?_.maxX:C,this.maxY=_.maxY>P?_.maxY:P}addBoundsMask(_,T){const E=_.minX>T.minX?_.minX:T.minX,C=_.minY>T.minY?_.minY:T.minY,P=_.maxX<T.maxX?_.maxX:T.maxX,I=_.maxY<T.maxY?_.maxY:T.maxY;if(E<=P&&C<=I){const F=this.minX,R=this.minY,B=this.maxX,O=this.maxY;this.minX=E<F?E:F,this.minY=C<R?C:R,this.maxX=P>B?P:B,this.maxY=I>O?I:O}}addBoundsMatrix(_,T){this.addFrameMatrix(T,_.minX,_.minY,_.maxX,_.maxY)}addBoundsArea(_,T){const E=_.minX>T.x?_.minX:T.x,C=_.minY>T.y?_.minY:T.y,P=_.maxX<T.x+T.width?_.maxX:T.x+T.width,I=_.maxY<T.y+T.height?_.maxY:T.y+T.height;if(E<=P&&C<=I){const F=this.minX,R=this.minY,B=this.maxX,O=this.maxY;this.minX=E<F?E:F,this.minY=C<R?C:R,this.maxX=P>B?P:B,this.maxY=I>O?I:O}}pad(_=0,T=_){this.isEmpty()||(this.minX-=_,this.maxX+=_,this.minY-=T,this.maxY+=T)}addFramePad(_,T,E,C,P,I){_-=P,T-=I,E+=P,C+=I,this.minX=this.minX<_?this.minX:_,this.maxX=this.maxX>E?this.maxX:E,this.minY=this.minY<T?this.minY:T,this.maxY=this.maxY>C?this.maxY:C}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(_){const T=Object.keys(_);for(let E=0;E<T.length;++E){const C=T[E];Object.defineProperty(DisplayObject.prototype,C,Object.getOwnPropertyDescriptor(_,C))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(_,T){return _||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),T||(this._boundsRect||(this._boundsRect=new Rectangle),T=this._boundsRect),this._bounds.getRectangle(T)}getLocalBounds(_){_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const T=this.transform,E=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(E==null?void 0:E.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const C=this._bounds,P=this._boundsID;this._bounds=this._localBounds;const I=this.getBounds(!1,_);return this.parent=E,this.transform=T,this._bounds=C,this._bounds.updateID+=this._boundsID-P,I}toGlobal(_,T,E=!1){return E||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(_,T)}toLocal(_,T,E,C){return T&&(_=T.toGlobal(_,E,C)),C||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(_,E)}setParent(_){if(!_||!_.addChild)throw new Error("setParent: Argument must be a Container");return _.addChild(this),_}removeFromParent(){var _;(_=this.parent)==null||_.removeChild(this)}setTransform(_=0,T=0,E=1,C=1,P=0,I=0,F=0,R=0,B=0){return this.position.x=_,this.position.y=T,this.scale.x=E||1,this.scale.y=C||1,this.rotation=P,this.skew.x=I,this.skew.y=F,this.pivot.x=R,this.pivot.y=B,this}destroy(_){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const _=this.parent;return this.parent=this._tempDisplayObjectParent,_}disableTempParent(_){this.parent=_}get x(){return this.position.x}set x(_){this.transform.position.x=_}get y(){return this.position.y}set y(_){this.transform.position.y=_}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(_){this.transform.position.copyFrom(_)}get scale(){return this.transform.scale}set scale(_){this.transform.scale.copyFrom(_)}get pivot(){return this.transform.pivot}set pivot(_){this.transform.pivot.copyFrom(_)}get skew(){return this.transform.skew}set skew(_){this.transform.skew.copyFrom(_)}get rotation(){return this.transform.rotation}set rotation(_){this.transform.rotation=_}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(_){this.transform.rotation=_*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let _=this;do{if(!_.visible)return!1;_=_.parent}while(_);return!0}get mask(){return this._mask}set mask(_){if(this._mask!==_){if(this._mask){const T=this._mask.isMaskData?this._mask.maskObject:this._mask;T&&(T._maskRefCount--,T._maskRefCount===0&&(T.renderable=!0,T.isMask=!1))}if(this._mask=_,this._mask){const T=this._mask.isMaskData?this._mask.maskObject:this._mask;T&&(T._maskRefCount===0&&(T.renderable=!1,T.isMask=!0),T._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix=new Matrix;function sortChildren(A,_){return A.zIndex===_.zIndex?A._lastSortedIndex-_._lastSortedIndex:A.zIndex-_.zIndex}const _Container=class Jt extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=Jt.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(_){}addChild(..._){if(_.length>1)for(let T=0;T<_.length;T++)this.addChild(_[T]);else{const T=_[0];T.parent&&T.parent.removeChild(T),T.parent=this,this.sortDirty=!0,T.transform._parentID=-1,this.children.push(T),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",T,this,this.children.length-1),T.emit("added",this)}return _[0]}addChildAt(_,T){if(T<0||T>this.children.length)throw new Error(`${_}addChildAt: The index ${T} supplied is out of bounds ${this.children.length}`);return _.parent&&_.parent.removeChild(_),_.parent=this,this.sortDirty=!0,_.transform._parentID=-1,this.children.splice(T,0,_),this._boundsID++,this.onChildrenChange(T),_.emit("added",this),this.emit("childAdded",_,this,T),_}swapChildren(_,T){if(_===T)return;const E=this.getChildIndex(_),C=this.getChildIndex(T);this.children[E]=T,this.children[C]=_,this.onChildrenChange(E<C?E:C)}getChildIndex(_){const T=this.children.indexOf(_);if(T===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return T}setChildIndex(_,T){if(T<0||T>=this.children.length)throw new Error(`The index ${T} supplied is out of bounds ${this.children.length}`);const E=this.getChildIndex(_);removeItems(this.children,E,1),this.children.splice(T,0,_),this.onChildrenChange(T)}getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]}removeChild(..._){if(_.length>1)for(let T=0;T<_.length;T++)this.removeChild(_[T]);else{const T=_[0],E=this.children.indexOf(T);if(E===-1)return null;T.parent=null,T.transform._parentID=-1,removeItems(this.children,E,1),this._boundsID++,this.onChildrenChange(E),T.emit("removed",this),this.emit("childRemoved",T,this,E)}return _[0]}removeChildAt(_){const T=this.getChildAt(_);return T.parent=null,T.transform._parentID=-1,removeItems(this.children,_,1),this._boundsID++,this.onChildrenChange(_),T.emit("removed",this),this.emit("childRemoved",T,this,_),T}removeChildren(_=0,T=this.children.length){const E=_,C=T,P=C-E;let I;if(P>0&&P<=C){I=this.children.splice(E,P);for(let F=0;F<I.length;++F)I[F].parent=null,I[F].transform&&(I[F].transform._parentID=-1);this._boundsID++,this.onChildrenChange(_);for(let F=0;F<I.length;++F)I[F].emit("removed",this),this.emit("childRemoved",I[F],this,F);return I}else if(P===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let _=!1;for(let T=0,E=this.children.length;T<E;++T){const C=this.children[T];C._lastSortedIndex=T,!_&&C.zIndex!==0&&(_=!0)}_&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let _=0,T=this.children.length;_<T;++_){const E=this.children[_];E.visible&&E.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let _=0;_<this.children.length;_++){const T=this.children[_];if(!(!T.visible||!T.renderable))if(T.calculateBounds(),T._mask){const E=T._mask.isMaskData?T._mask.maskObject:T._mask;E?(E.calculateBounds(),this._bounds.addBoundsMask(T._bounds,E._bounds)):this._bounds.addBounds(T._bounds)}else T.filterArea?this._bounds.addBoundsArea(T._bounds,T.filterArea):this._bounds.addBounds(T._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(_,T=!1){const E=super.getLocalBounds(_);if(!T)for(let C=0,P=this.children.length;C<P;++C){const I=this.children[C];I.visible&&I.updateTransform()}return E}_calculateBounds(){}_renderWithCulling(_){const T=_.renderTexture.sourceFrame;if(!(T.width>0&&T.height>0))return;let E,C;this.cullArea?(E=this.cullArea,C=this.worldTransform):this._render!==Jt.prototype._render&&(E=this.getBounds(!0));const P=_.projection.transform;if(P&&(C?(C=tempMatrix.copyFrom(C),C.prepend(P)):C=P),E&&T.intersects(E,C))this._render(_);else if(this.cullArea)return;for(let I=0,F=this.children.length;I<F;++I){const R=this.children[I],B=R.cullable;R.cullable=B||!this.cullArea,R.render(_),R.cullable=B}}render(_){var T;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(T=this.filters)!=null&&T.length)this.renderAdvanced(_);else if(this.cullable)this._renderWithCulling(_);else{this._render(_);for(let E=0,C=this.children.length;E<C;++E)this.children[E].render(_)}}renderAdvanced(_){var P,I,F;const T=this.filters,E=this._mask;if(T){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let R=0;R<T.length;R++)T[R].enabled&&this._enabledFilters.push(T[R])}const C=T&&((P=this._enabledFilters)==null?void 0:P.length)||E&&(!E.isMaskData||E.enabled&&(E.autoDetect||E.type!==MASK_TYPES.NONE));if(C&&_.batch.flush(),T&&((I=this._enabledFilters)!=null&&I.length)&&_.filter.push(this,this._enabledFilters),E&&_.mask.push(this,this._mask),this.cullable)this._renderWithCulling(_);else{this._render(_);for(let R=0,B=this.children.length;R<B;++R)this.children[R].render(_)}C&&_.batch.flush(),E&&_.mask.pop(this),T&&((F=this._enabledFilters)!=null&&F.length)&&_.filter.pop()}_render(_){}destroy(_){super.destroy(),this.sortDirty=!1;const T=typeof _=="boolean"?_:_==null?void 0:_.children,E=this.removeChildren(0,this.children.length);if(T)for(let C=0;C<E.length;++C)E[C].destroy(_)}get width(){return this.scale.x*this.getLocalBounds().width}set width(_){const T=this.getLocalBounds().width;T!==0?this.scale.x=_/T:this.scale.x=1,this._width=_}get height(){return this.scale.y*this.getLocalBounds().height}set height(_){const T=this.getLocalBounds().height;T!==0?this.scale.y=_/T:this.scale.y=1,this._height=_}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings$1,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(A){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=A}}});const tempPoint$1=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(_){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,_?_.defaultAnchor.x:0,_?_.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color$1(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=_||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings$1.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const _=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===_._updateID)return;this._textureID!==_._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=_._updateID;const T=this.transform.worldTransform,E=T.a,C=T.b,P=T.c,I=T.d,F=T.tx,R=T.ty,B=this.vertexData,O=_.trim,V=_.orig,L=this._anchor;let D=0,U=0,G=0,X=0;if(O?(U=O.x-L._x*V.width,D=U+O.width,X=O.y-L._y*V.height,G=X+O.height):(U=-L._x*V.width,D=U+V.width,X=-L._y*V.height,G=X+V.height),B[0]=E*U+P*X+F,B[1]=I*X+C*U+R,B[2]=E*D+P*X+F,B[3]=I*X+C*D+R,B[4]=E*D+P*G+F,B[5]=I*G+C*D+R,B[6]=E*U+P*G+F,B[7]=I*G+C*U+R,this._roundPixels){const z=settings$1.RESOLUTION;for(let Y=0;Y<B.length;++Y)B[Y]=Math.round(B[Y]*z)/z}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const _=this._texture,T=this.vertexTrimmedData,E=_.orig,C=this._anchor,P=this.transform.worldTransform,I=P.a,F=P.b,R=P.c,B=P.d,O=P.tx,V=P.ty,L=-C._x*E.width,D=L+E.width,U=-C._y*E.height,G=U+E.height;if(T[0]=I*L+R*U+O,T[1]=B*U+F*L+V,T[2]=I*D+R*U+O,T[3]=B*U+F*D+V,T[4]=I*D+R*G+O,T[5]=B*G+F*D+V,T[6]=I*L+R*G+O,T[7]=B*G+F*L+V,this._roundPixels){const X=settings$1.RESOLUTION;for(let z=0;z<T.length;++z)T[z]=Math.round(T[z]*X)/X}}_render(_){this.calculateVertices(),_.batch.setObjectRenderer(_.plugins[this.pluginName]),_.plugins[this.pluginName].render(this)}_calculateBounds(){const _=this._texture.trim,T=this._texture.orig;!_||_.width===T.width&&_.height===T.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(_){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),_||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),_=this._localBoundsRect),this._localBounds.getRectangle(_)):super.getLocalBounds.call(this,_)}containsPoint(_){this.worldTransform.applyInverse(_,tempPoint$1);const T=this._texture.orig.width,E=this._texture.orig.height,C=-T*this.anchor.x;let P=0;return tempPoint$1.x>=C&&tempPoint$1.x<C+T&&(P=-E*this.anchor.y,tempPoint$1.y>=P&&tempPoint$1.y<P+E)}destroy(_){if(super.destroy(_),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof _=="boolean"?_:_==null?void 0:_.texture){const T=typeof _=="boolean"?_:_==null?void 0:_.baseTexture;this._texture.destroy(!!T)}this._texture=null}static from(_,T){const E=_ instanceof Texture?_:Texture.from(_,T);return new Sprite(E)}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(_){const T=sign(this.scale.x)||1;this.scale.x=T*_/this._texture.orig.width,this._width=_}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(_){const T=sign(this.scale.y)||1;this.scale.y=T*_/this._texture.orig.height,this._height=_}get anchor(){return this._anchor}set anchor(_){this._anchor.copyFrom(_)}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(_){this._texture!==_&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=_||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,_&&(_.baseTexture.valid?this._onTextureUpdate():_.once("update",this._onTextureUpdate,this)))}}class MeshBatchUvs{constructor(_,T){this.uvBuffer=_,this.uvMatrix=T,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(_){if(!_&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const T=this.uvBuffer.data;(!this.data||this.data.length!==T.length)&&(this.data=new Float32Array(T.length)),this.uvMatrix.multiplyUvs(T,this.data),this._updateID++}}const tempPoint=new Point,tempPolygon=new Polygon,_Mesh=class Sr extends Container{constructor(_,T,E,C=DRAW_MODES.TRIANGLES){super(),this.geometry=_,this.shader=T,this.state=E||State.for2d(),this.drawMode=C,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings$1.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(_){this._geometry!==_&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=_,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(_){this.shader=_}get material(){return this.shader}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}set roundPixels(_){this._roundPixels!==_&&(this._transformID=-1),this._roundPixels=_}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(_){this.shader.tint=_}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(_){this.shader.texture=_}_render(_){const T=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&T.length<Sr.BATCHABLE_SIZE*2?this._renderToBatch(_):this._renderDefault(_)}_renderDefault(_){const T=this.shader;T.alpha=this.worldAlpha,T.update&&T.update(),_.batch.flush(),T.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),_.shader.bind(T),_.state.set(this.state),_.geometry.bind(this.geometry,T),_.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(_){const T=this.geometry,E=this.shader;E.uvMatrix&&(E.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=T.indexBuffer.data,this._tintRGB=E._tintRGB,this._texture=E.texture;const C=this.material.pluginName;_.batch.setObjectRenderer(_.plugins[C]),_.plugins[C].render(this)}calculateVertices(){const _=this.geometry.buffers[0],T=_.data,E=_._updateID;if(E===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==T.length&&(this.vertexData=new Float32Array(T.length));const C=this.transform.worldTransform,P=C.a,I=C.b,F=C.c,R=C.d,B=C.tx,O=C.ty,V=this.vertexData;for(let L=0;L<V.length/2;L++){const D=T[L*2],U=T[L*2+1];V[L*2]=P*D+F*U+B,V[L*2+1]=I*D+R*U+O}if(this._roundPixels){const L=settings$1.RESOLUTION;for(let D=0;D<V.length;++D)V[D]=Math.round(V[D]*L)/L}this.vertexDirty=E}calculateUvs(){const _=this.geometry.buffers[1],T=this.shader;T.uvMatrix.isSimple?this.uvs=_.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(_,T.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(_){if(!this.getBounds().contains(_.x,_.y))return!1;this.worldTransform.applyInverse(_,tempPoint);const T=this.geometry.getBuffer("aVertexPosition").data,E=tempPolygon.points,C=this.geometry.getIndex().data,P=C.length,I=this.drawMode===4?3:1;for(let F=0;F+2<P;F+=I){const R=C[F]*2,B=C[F+1]*2,O=C[F+2]*2;if(E[0]=T[R],E[1]=T[R+1],E[2]=T[B],E[3]=T[B+1],E[4]=T[O],E[5]=T[O+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1}destroy(_){super.destroy(_),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(_,T,E){super();const C=new Buffer(_),P=new Buffer(T,!0),I=new Buffer(E,!0,!0);this.addAttribute("aVertexPosition",C,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",P,2,!1,TYPES.FLOAT).addIndex(I),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(_,T){const E={uSampler:_,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};T=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},T),T.uniforms&&Object.assign(E,T.uniforms),super(T.program||Program.from(vertex,fragment),E),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(_),this.batchable=T.program===void 0,this.pluginName=T.pluginName,this._tintColor=new Color$1(T.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=T.alpha}get texture(){return this.uniforms.uSampler}set texture(_){this.uniforms.uSampler!==_&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!_.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=_,this.uvMatrix.texture=_)}set alpha(_){_!==this._alpha&&(this._alpha=_,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(_){_!==this.tint&&(this._tintColor.setValue(_),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const _=this.texture.baseTexture.alphaMode;Color$1.shared.setValue(this._tintColor).premultiply(this._alpha,_).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class SimpleMesh extends Mesh{constructor(_=Texture.EMPTY,T,E,C,P){const I=new MeshGeometry(T,E,C);I.getBuffer("aVertexPosition").static=!1;const F=new MeshMaterial(_);super(I,F,null,P),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(_){this.geometry.getBuffer("aVertexPosition").data=_}_render(_){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(_)}}const buildCircle={build(A){const _=A.points;let T,E,C,P,I,F;if(A.type===SHAPES.CIRC){const U=A.shape;T=U.x,E=U.y,I=F=U.radius,C=P=0}else if(A.type===SHAPES.ELIP){const U=A.shape;T=U.x,E=U.y,I=U.width,F=U.height,C=P=0}else{const U=A.shape,G=U.width/2,X=U.height/2;T=U.x+G,E=U.y+X,I=F=Math.max(0,Math.min(U.radius,Math.min(G,X))),C=G-I,P=X-F}if(!(I>=0&&F>=0&&C>=0&&P>=0)){_.length=0;return}const R=Math.ceil(2.3*Math.sqrt(I+F)),B=R*8+(C?4:0)+(P?4:0);if(_.length=B,B===0)return;if(R===0){_.length=8,_[0]=_[6]=T+C,_[1]=_[3]=E+P,_[2]=_[4]=T-C,_[5]=_[7]=E-P;return}let O=0,V=R*4+(C?2:0)+2,L=V,D=B;{const U=C+I,G=P,X=T+U,z=T-U,Y=E+G;if(_[O++]=X,_[O++]=Y,_[--V]=Y,_[--V]=z,P){const W=E-G;_[L++]=z,_[L++]=W,_[--D]=W,_[--D]=X}}for(let U=1;U<R;U++){const G=Math.PI/2*(U/R),X=C+Math.cos(G)*I,z=P+Math.sin(G)*F,Y=T+X,W=T-X,q=E+z,K=E-z;_[O++]=Y,_[O++]=q,_[--V]=q,_[--V]=W,_[L++]=W,_[L++]=K,_[--D]=K,_[--D]=Y}{const U=C,G=P+F,X=T+U,z=T-U,Y=E+G,W=E-G;_[O++]=X,_[O++]=Y,_[--D]=W,_[--D]=X,C&&(_[O++]=z,_[O++]=Y,_[--D]=W,_[--D]=z)}},triangulate(A,_){const T=A.points,E=_.points,C=_.indices;if(T.length===0)return;let P=E.length/2;const I=P;let F,R;if(A.type!==SHAPES.RREC){const O=A.shape;F=O.x,R=O.y}else{const O=A.shape;F=O.x+O.width/2,R=O.y+O.height/2}const B=A.matrix;E.push(A.matrix?B.a*F+B.c*R+B.tx:F,A.matrix?B.b*F+B.d*R+B.ty:R),P++,E.push(T[0],T[1]);for(let O=2;O<T.length;O+=2)E.push(T[O],T[O+1]),C.push(P++,I,P);C.push(I+1,I,P)}};function fixOrientation(A,_=!1){const T=A.length;if(T<6)return;let E=0;for(let C=0,P=A[T-2],I=A[T-1];C<T;C+=2){const F=A[C],R=A[C+1];E+=(F-P)*(R+I),P=F,I=R}if(!_&&E>0||_&&E<=0){const C=T/2;for(let P=C+C%2;P<T;P+=2){const I=T-P-2,F=T-P-1,R=P,B=P+1;[A[I],A[R]]=[A[R],A[I]],[A[F],A[B]]=[A[B],A[F]]}}}const buildPoly={build(A){A.points=A.shape.points.slice()},triangulate(A,_){let T=A.points;const E=A.holes,C=_.points,P=_.indices;if(T.length>=6){fixOrientation(T,!1);const I=[];for(let B=0;B<E.length;B++){const O=E[B];fixOrientation(O.points,!0),I.push(T.length/2),T=T.concat(O.points)}const F=earcut(T,I,2);if(!F)return;const R=C.length/2;for(let B=0;B<F.length;B+=3)P.push(F[B]+R),P.push(F[B+1]+R),P.push(F[B+2]+R);for(let B=0;B<T.length;B++)C.push(T[B])}}},buildRectangle={build(A){const _=A.shape,T=_.x,E=_.y,C=_.width,P=_.height,I=A.points;I.length=0,C>=0&&P>=0&&I.push(T,E,T+C,E,T+C,E+P,T,E+P)},triangulate(A,_){const T=A.points,E=_.points;if(T.length===0)return;const C=E.length/2;E.push(T[0],T[1],T[2],T[3],T[6],T[7],T[4],T[5]),_.indices.push(C,C+1,C+2,C+1,C+2,C+3)}},buildRoundedRectangle={build(A){buildCircle.build(A)},triangulate(A,_){buildCircle.triangulate(A,_)}};var LINE_JOIN=(A=>(A.MITER="miter",A.BEVEL="bevel",A.ROUND="round",A))(LINE_JOIN||{}),LINE_CAP=(A=>(A.BUTT="butt",A.ROUND="round",A.SQUARE="square",A))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(A,_=20){if(!this.adaptive||!A||isNaN(A))return _;let T=Math.ceil(A/this.maxLength);return T<this.minSegments?T=this.minSegments:T>this.maxSegments&&(T=this.maxSegments),T}};class ArcUtils{static curveTo(_,T,E,C,P,I){const F=I[I.length-2],R=I[I.length-1]-T,B=F-_,O=C-T,V=E-_,L=Math.abs(R*V-B*O);if(L<1e-8||P===0)return(I[I.length-2]!==_||I[I.length-1]!==T)&&I.push(_,T),null;const D=R*R+B*B,U=O*O+V*V,G=R*O+B*V,X=P*Math.sqrt(D)/L,z=P*Math.sqrt(U)/L,Y=X*G/D,W=z*G/U,q=X*V+z*B,K=X*O+z*R,J=B*(z+Y),Z=R*(z+Y),se=V*(X+W),ae=O*(X+W),ue=Math.atan2(Z-K,J-q),ce=Math.atan2(ae-K,se-q);return{cx:q+_,cy:K+T,radius:P,startAngle:ue,endAngle:ce,anticlockwise:B*O>V*R}}static arc(_,T,E,C,P,I,F,R,B){const O=F-I,V=curves._segmentsCount(Math.abs(O)*P,Math.ceil(Math.abs(O)/PI_2)*40),L=O/(V*2),D=L*2,U=Math.cos(L),G=Math.sin(L),X=V-1,z=X%1/X;for(let Y=0;Y<=X;++Y){const W=Y+z*Y,q=L+I+D*W,K=Math.cos(q),J=-Math.sin(q);B.push((U*K+G*J)*P+E,(U*-J+G*K)*P+C)}}}class BatchPart{constructor(){this.reset()}begin(_,T,E){this.reset(),this.style=_,this.start=T,this.attribStart=E}end(_,T){this.attribSize=T-this.attribStart,this.size=_-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(_,T,E,C,P,I,F,R){let B=0,O=0,V=0,L=0,D=0,U=0,G=0,X=0,z=0,Y=0,W=0,q=_,K=T;for(let J=1;J<=10;++J)O=J/10,V=O*O,L=V*O,D=1-O,U=D*D,G=U*D,X=G*_+3*U*O*E+3*D*V*P+L*F,z=G*T+3*U*O*C+3*D*V*I+L*R,Y=q-X,W=K-z,q=X,K=z,B+=Math.sqrt(Y*Y+W*W);return B}static curveTo(_,T,E,C,P,I,F){const R=F[F.length-2],B=F[F.length-1];F.length-=2;const O=curves._segmentsCount(BezierUtils.curveLength(R,B,_,T,E,C,P,I));let V=0,L=0,D=0,U=0,G=0;F.push(R,B);for(let X=1,z=0;X<=O;++X)z=X/O,V=1-z,L=V*V,D=L*V,U=z*z,G=U*z,F.push(D*R+3*L*z*_+3*V*U*E+G*P,D*B+3*L*z*T+3*V*U*C+G*I)}}function square(A,_,T,E,C,P,I,F){const R=A-T*C,B=_-E*C,O=A+T*P,V=_+E*P;let L,D;I?(L=E,D=-T):(L=-E,D=T);const U=R+L,G=B+D,X=O+L,z=V+D;return F.push(U,G,X,z),2}function round(A,_,T,E,C,P,I,F){const R=T-A,B=E-_;let O=Math.atan2(R,B),V=Math.atan2(C-A,P-_);F&&O<V?O+=Math.PI*2:!F&&O>V&&(V+=Math.PI*2);let L=O;const D=V-O,U=Math.abs(D),G=Math.sqrt(R*R+B*B),X=(15*U*Math.sqrt(G)/Math.PI>>0)+1,z=D/X;if(L+=z,F){I.push(A,_,T,E);for(let Y=1,W=L;Y<X;Y++,W+=z)I.push(A,_,A+Math.sin(W)*G,_+Math.cos(W)*G);I.push(A,_,C,P)}else{I.push(T,E,A,_);for(let Y=1,W=L;Y<X;Y++,W+=z)I.push(A+Math.sin(W)*G,_+Math.cos(W)*G,A,_);I.push(C,P,A,_)}return X*2}function buildNonNativeLine(A,_){const T=A.shape;let E=A.points||T.points.slice();const C=_.closePointEps;if(E.length===0)return;const P=A.lineStyle,I=new Point(E[0],E[1]),F=new Point(E[E.length-2],E[E.length-1]),R=T.type!==SHAPES.POLY||T.closeStroke,B=Math.abs(I.x-F.x)<C&&Math.abs(I.y-F.y)<C;if(R){E=E.slice(),B&&(E.pop(),E.pop(),F.set(E[E.length-2],E[E.length-1]));const re=(I.x+F.x)*.5,Q=(F.y+I.y)*.5;E.unshift(re,Q),E.push(re,Q)}const O=_.points,V=E.length/2;let L=E.length;const D=O.length/2,U=P.width/2,G=U*U,X=P.miterLimit*P.miterLimit;let z=E[0],Y=E[1],W=E[2],q=E[3],K=0,J=0,Z=-(Y-q),se=z-W,ae=0,ue=0,ce=Math.sqrt(Z*Z+se*se);Z/=ce,se/=ce,Z*=U,se*=U;const he=P.alignment,pe=(1-he)*2,ye=he*2;R||(P.cap===LINE_CAP.ROUND?L+=round(z-Z*(pe-ye)*.5,Y-se*(pe-ye)*.5,z-Z*pe,Y-se*pe,z+Z*ye,Y+se*ye,O,!0)+2:P.cap===LINE_CAP.SQUARE&&(L+=square(z,Y,Z,se,pe,ye,!0,O))),O.push(z-Z*pe,Y-se*pe,z+Z*ye,Y+se*ye);for(let re=1;re<V-1;++re){z=E[(re-1)*2],Y=E[(re-1)*2+1],W=E[re*2],q=E[re*2+1],K=E[(re+1)*2],J=E[(re+1)*2+1],Z=-(Y-q),se=z-W,ce=Math.sqrt(Z*Z+se*se),Z/=ce,se/=ce,Z*=U,se*=U,ae=-(q-J),ue=W-K,ce=Math.sqrt(ae*ae+ue*ue),ae/=ce,ue/=ce,ae*=U,ue*=U;const Q=W-z,te=Y-q,ne=W-K,ie=J-q,fe=Q*ne+te*ie,me=te*ne-ie*Q,be=me<0;if(Math.abs(me)<.001*Math.abs(fe)){O.push(W-Z*pe,q-se*pe,W+Z*ye,q+se*ye),fe>=0&&(P.join===LINE_JOIN.ROUND?L+=round(W,q,W-Z*pe,q-se*pe,W-ae*pe,q-ue*pe,O,!1)+4:L+=2,O.push(W-ae*ye,q-ue*ye,W+ae*pe,q+ue*pe));continue}const Pe=(-Z+z)*(-se+q)-(-Z+W)*(-se+Y),Me=(-ae+K)*(-ue+q)-(-ae+W)*(-ue+J),ge=(Q*Me-ne*Pe)/me,Se=(ie*Pe-te*Me)/me,Ee=(ge-W)*(ge-W)+(Se-q)*(Se-q),Ae=W+(ge-W)*pe,Ie=q+(Se-q)*pe,oe=W-(ge-W)*ye,le=q-(Se-q)*ye,de=Math.min(Q*Q+te*te,ne*ne+ie*ie),ve=be?pe:ye,xe=de+ve*ve*G,Ce=Ee<=xe;let Fe=P.join;if(Fe===LINE_JOIN.MITER&&Ee/G>X&&(Fe=LINE_JOIN.BEVEL),Ce)switch(Fe){case LINE_JOIN.MITER:{O.push(Ae,Ie,oe,le);break}case LINE_JOIN.BEVEL:{be?O.push(Ae,Ie,W+Z*ye,q+se*ye,Ae,Ie,W+ae*ye,q+ue*ye):O.push(W-Z*pe,q-se*pe,oe,le,W-ae*pe,q-ue*pe,oe,le),L+=2;break}case LINE_JOIN.ROUND:{be?(O.push(Ae,Ie,W+Z*ye,q+se*ye),L+=round(W,q,W+Z*ye,q+se*ye,W+ae*ye,q+ue*ye,O,!0)+4,O.push(Ae,Ie,W+ae*ye,q+ue*ye)):(O.push(W-Z*pe,q-se*pe,oe,le),L+=round(W,q,W-Z*pe,q-se*pe,W-ae*pe,q-ue*pe,O,!1)+4,O.push(W-ae*pe,q-ue*pe,oe,le));break}}else{switch(O.push(W-Z*pe,q-se*pe,W+Z*ye,q+se*ye),Fe){case LINE_JOIN.MITER:{be?O.push(oe,le,oe,le):O.push(Ae,Ie,Ae,Ie),L+=2;break}case LINE_JOIN.ROUND:{be?L+=round(W,q,W+Z*ye,q+se*ye,W+ae*ye,q+ue*ye,O,!0)+2:L+=round(W,q,W-Z*pe,q-se*pe,W-ae*pe,q-ue*pe,O,!1)+2;break}}O.push(W-ae*pe,q-ue*pe,W+ae*ye,q+ue*ye),L+=2}}z=E[(V-2)*2],Y=E[(V-2)*2+1],W=E[(V-1)*2],q=E[(V-1)*2+1],Z=-(Y-q),se=z-W,ce=Math.sqrt(Z*Z+se*se),Z/=ce,se/=ce,Z*=U,se*=U,O.push(W-Z*pe,q-se*pe,W+Z*ye,q+se*ye),R||(P.cap===LINE_CAP.ROUND?L+=round(W-Z*(pe-ye)*.5,q-se*(pe-ye)*.5,W-Z*pe,q-se*pe,W+Z*ye,q+se*ye,O,!1)+2:P.cap===LINE_CAP.SQUARE&&(L+=square(W,q,Z,se,pe,ye,!1,O)));const _e=_.indices,ee=curves.epsilon*curves.epsilon;for(let re=D;re<L+D-2;++re)z=O[re*2],Y=O[re*2+1],W=O[(re+1)*2],q=O[(re+1)*2+1],K=O[(re+2)*2],J=O[(re+2)*2+1],!(Math.abs(z*(q-J)+W*(J-Y)+K*(Y-q))<ee)&&_e.push(re,re+1,re+2)}function buildNativeLine(A,_){let T=0;const E=A.shape,C=A.points||E.points,P=E.type!==SHAPES.POLY||E.closeStroke;if(C.length===0)return;const I=_.points,F=_.indices,R=C.length/2,B=I.length/2;let O=B;for(I.push(C[0],C[1]),T=1;T<R;T++)I.push(C[T*2],C[T*2+1]),F.push(O,O+1),O++;P&&F.push(O,B)}function buildLine(A,_){A.lineStyle.native?buildNativeLine(A,_):buildNonNativeLine(A,_)}class QuadraticUtils{static curveLength(_,T,E,C,P,I){const F=_-2*E+P,R=T-2*C+I,B=2*E-2*_,O=2*C-2*T,V=4*(F*F+R*R),L=4*(F*B+R*O),D=B*B+O*O,U=2*Math.sqrt(V+L+D),G=Math.sqrt(V),X=2*V*G,z=2*Math.sqrt(D),Y=L/G;return(X*U+G*L*(U-z)+(4*D*V-L*L)*Math.log((2*G+Y+U)/(Y+z)))/(4*X)}static curveTo(_,T,E,C,P){const I=P[P.length-2],F=P[P.length-1],R=curves._segmentsCount(QuadraticUtils.curveLength(I,F,_,T,E,C));let B=0,O=0;for(let V=1;V<=R;++V){const L=V/R;B=I+(_-I)*L,O=F+(T-F)*L,P.push(B+(_+(E-_)*L-B)*L,O+(T+(C-T)*L-O)*L)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(_,T=null,E=null,C=null){this.points=[],this.holes=[],this.shape=_,this.lineStyle=E,this.fillStyle=T,this.matrix=C,this.type=_.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class Cr extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let _=0;_<this.drawCalls.length;_++)this.drawCalls[_].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[_]);this.drawCalls.length=0;for(let _=0;_<this.batches.length;_++){const T=this.batches[_];T.reset(),BATCH_POOL.push(T)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(_,T=null,E=null,C=null){const P=new GraphicsData(_,T,E,C);return this.graphicsData.push(P),this.dirty++,this}drawHole(_,T=null){if(!this.graphicsData.length)return null;const E=new GraphicsData(_,null,null,T),C=this.graphicsData[this.graphicsData.length-1];return E.lineStyle=C.lineStyle,C.holes.push(E),this.dirty++,this}destroy(){super.destroy();for(let _=0;_<this.graphicsData.length;++_)this.graphicsData[_].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(_){const T=this.graphicsData;for(let E=0;E<T.length;++E){const C=T[E];if(C.fillStyle.visible&&C.shape&&(C.matrix?C.matrix.applyInverse(_,tmpPoint):tmpPoint.copyFrom(_),C.shape.contains(tmpPoint.x,tmpPoint.y))){let P=!1;if(C.holes){for(let I=0;I<C.holes.length;I++)if(C.holes[I].shape.contains(tmpPoint.x,tmpPoint.y)){P=!0;break}}if(!P)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const _=this.uvs,T=this.graphicsData;let E=null,C=null;this.batches.length>0&&(E=this.batches[this.batches.length-1],C=E.style);for(let R=this.shapeIndex;R<T.length;R++){this.shapeIndex++;const B=T[R],O=B.fillStyle,V=B.lineStyle;FILL_COMMANDS[B.type].build(B),B.matrix&&this.transformPoints(B.points,B.matrix),(O.visible||V.visible)&&this.processHoles(B.holes);for(let L=0;L<2;L++){const D=L===0?O:V;if(!D.visible)continue;const U=D.texture.baseTexture,G=this.indices.length,X=this.points.length/2;U.wrapMode=WRAP_MODES.REPEAT,L===0?this.processFill(B):this.processLine(B);const z=this.points.length/2-X;z!==0&&(E&&!this._compareStyles(C,D)&&(E.end(G,X),E=null),E||(E=BATCH_POOL.pop()||new BatchPart,E.begin(D,G,X),this.batches.push(E),C=D),this.addUvs(this.points,_,D.texture,X,z,D.matrix))}}const P=this.indices.length,I=this.points.length/2;if(E&&E.end(P,I),this.batches.length===0){this.batchable=!0;return}const F=I>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&F===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=F?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(_,T){return!(!_||!T||_.texture.baseTexture!==T.texture.baseTexture||_.color+_.alpha!==T.color+T.alpha||!!_.native!=!!T.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let _=0,T=this.graphicsData.length;_<T;_++){const E=this.graphicsData[_],C=E.fillStyle,P=E.lineStyle;if(C&&!C.texture.baseTexture.valid||P&&!P.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const _=this.batches;for(let T=0,E=_.length;T<E;T++){const C=_[T];for(let P=0;P<C.size;P++){const I=C.start+P;this.indicesUint16[I]=this.indicesUint16[I]-C.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const _=this.batches;for(let T=0;T<_.length;T++)if(_[T].style.native)return!1;return this.points.length<Cr.BATCHABLE_SIZE*2}buildDrawCalls(){let _=++BaseTexture._globalBatch;for(let V=0;V<this.drawCalls.length;V++)this.drawCalls[V].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[V]);this.drawCalls.length=0;const T=this.colors,E=this.textureIds;let C=DRAW_CALL_POOL.pop();C||(C=new BatchDrawCall,C.texArray=new BatchTextureArray),C.texArray.count=0,C.start=0,C.size=0,C.type=DRAW_MODES.TRIANGLES;let P=0,I=null,F=0,R=!1,B=DRAW_MODES.TRIANGLES,O=0;this.drawCalls.push(C);for(let V=0;V<this.batches.length;V++){const L=this.batches[V],D=8,U=L.style,G=U.texture.baseTexture;R!==!!U.native&&(R=!!U.native,B=R?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,I=null,P=D,_++),I!==G&&(I=G,G._batchEnabled!==_&&(P===D&&(_++,P=0,C.size>0&&(C=DRAW_CALL_POOL.pop(),C||(C=new BatchDrawCall,C.texArray=new BatchTextureArray),this.drawCalls.push(C)),C.start=O,C.size=0,C.texArray.count=0,C.type=B),G.touched=1,G._batchEnabled=_,G._batchLocation=P,G.wrapMode=WRAP_MODES.REPEAT,C.texArray.elements[C.texArray.count++]=G,P++)),C.size+=L.size,O+=L.size,F=G._batchLocation,this.addColors(T,U.color,U.alpha,L.attribSize,L.attribStart),this.addTextureIds(E,F,L.attribSize,L.attribStart)}BaseTexture._globalBatch=_,this.packAttributes()}packAttributes(){const _=this.points,T=this.uvs,E=this.colors,C=this.textureIds,P=new ArrayBuffer(_.length*3*4),I=new Float32Array(P),F=new Uint32Array(P);let R=0;for(let B=0;B<_.length/2;B++)I[R++]=_[B*2],I[R++]=_[B*2+1],I[R++]=T[B*2],I[R++]=T[B*2+1],F[R++]=E[B],I[R++]=C[B];this._buffer.update(P),this._indexBuffer.update(this.indicesUint16)}processFill(_){_.holes.length?buildPoly.triangulate(_,this):FILL_COMMANDS[_.type].triangulate(_,this)}processLine(_){buildLine(_,this);for(let T=0;T<_.holes.length;T++)buildLine(_.holes[T],this)}processHoles(_){for(let T=0;T<_.length;T++){const E=_[T];FILL_COMMANDS[E.type].build(E),E.matrix&&this.transformPoints(E.points,E.matrix)}}calculateBounds(){const _=this._bounds;_.clear(),_.addVertexData(this.points,0,this.points.length),_.pad(this.boundsPadding,this.boundsPadding)}transformPoints(_,T){for(let E=0;E<_.length/2;E++){const C=_[E*2],P=_[E*2+1];_[E*2]=T.a*C+T.c*P+T.tx,_[E*2+1]=T.b*C+T.d*P+T.ty}}addColors(_,T,E,C,P=0){const I=Color$1.shared.setValue(T).toLittleEndianNumber(),F=Color$1.shared.setValue(I).toPremultiplied(E);_.length=Math.max(_.length,P+C);for(let R=0;R<C;R++)_[P+R]=F}addTextureIds(_,T,E,C=0){_.length=Math.max(_.length,C+E);for(let P=0;P<E;P++)_[C+P]=T}addUvs(_,T,E,C,P,I=null){let F=0;const R=T.length,B=E.frame;for(;F<P;){let V=_[(C+F)*2],L=_[(C+F)*2+1];if(I){const D=I.a*V+I.c*L+I.tx;L=I.b*V+I.d*L+I.ty,V=D}F++,T.push(V/B.width,L/B.height)}const O=E.baseTexture;(B.width<O.width||B.height<O.height)&&this.adjustUvs(T,E,R,P)}adjustUvs(_,T,E,C){const P=T.baseTexture,I=1e-6,F=E+C*2,R=T.frame,B=R.width/P.width,O=R.height/P.height;let V=R.x/R.width,L=R.y/R.height,D=Math.floor(_[E]+I),U=Math.floor(_[E+1]+I);for(let G=E+2;G<F;G+=2)D=Math.min(D,Math.floor(_[G]+I)),U=Math.min(U,Math.floor(_[G+1]+I));V-=D,L-=U;for(let G=E;G<F;G+=2)_[G]=(_[G]+V)*B,_[G+1]=(_[G+1]+L)*O}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const _=new FillStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const _=new LineStyle;return _.color=this.color,_.alpha=this.alpha,_.texture=this.texture,_.matrix=this.matrix,_.visible=this.visible,_.width=this.width,_.alignment=this.alignment,_.native=this.native,_.cap=this.cap,_.join=this.join,_.miterLimit=this.miterLimit,_}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class Ot extends Container{constructor(_=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=_||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color$1(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ot(this._geometry)}set blendMode(_){this.state.blendMode=_}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(_){this._tintColor.setValue(_)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(_=null,T=0,E,C=.5,P=!1){return typeof _=="number"&&(_={width:_,color:T,alpha:E,alignment:C,native:P}),this.lineTextureStyle(_)}lineTextureStyle(_){const T={width:0,texture:Texture.WHITE,color:_!=null&&_.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};_=Object.assign(T,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const E=_.width>0&&_.alpha>0;return E?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._lineStyle,{visible:E},_)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const _=this.currentPath.points,T=this.currentPath.points.length;T>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(_[T-2],_[T-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(_,T){return this.startPoly(),this.currentPath.points[0]=_,this.currentPath.points[1]=T,this}lineTo(_,T){this.currentPath||this.moveTo(0,0);const E=this.currentPath.points,C=E[E.length-2],P=E[E.length-1];return(C!==_||P!==T)&&E.push(_,T),this}_initCurve(_=0,T=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[_,T]):this.moveTo(_,T)}quadraticCurveTo(_,T,E,C){this._initCurve();const P=this.currentPath.points;return P.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(_,T,E,C,P),this}bezierCurveTo(_,T,E,C,P,I){return this._initCurve(),BezierUtils.curveTo(_,T,E,C,P,I,this.currentPath.points),this}arcTo(_,T,E,C,P){this._initCurve(_,T);const I=this.currentPath.points,F=ArcUtils.curveTo(_,T,E,C,P,I);if(F){const{cx:R,cy:B,radius:O,startAngle:V,endAngle:L,anticlockwise:D}=F;this.arc(R,B,O,V,L,D)}return this}arc(_,T,E,C,P,I=!1){if(C===P)return this;if(!I&&P<=C?P+=PI_2:I&&C<=P&&(C+=PI_2),P-C===0)return this;const F=_+Math.cos(C)*E,R=T+Math.sin(C)*E,B=this._geometry.closePointEps;let O=this.currentPath?this.currentPath.points:null;if(O){const V=Math.abs(O[O.length-2]-F),L=Math.abs(O[O.length-1]-R);V<B&&L<B||O.push(F,R)}else this.moveTo(F,R),O=this.currentPath.points;return ArcUtils.arc(F,R,_,T,E,C,P,I,O),this}beginFill(_=0,T){return this.beginTextureFill({texture:Texture.WHITE,color:_,alpha:T})}normalizeColor(_){const T=Color$1.shared.setValue(_.color??0);_.color=T.toNumber(),_.alpha??(_.alpha=T.alpha)}beginTextureFill(_){const T={texture:Texture.WHITE,color:16777215,matrix:null};_=Object.assign(T,_),this.normalizeColor(_),this.currentPath&&this.startPoly();const E=_.alpha>0;return E?(_.matrix&&(_.matrix=_.matrix.clone(),_.matrix.invert()),Object.assign(this._fillStyle,{visible:E},_)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(_,T,E,C){return this.drawShape(new Rectangle(_,T,E,C))}drawRoundedRect(_,T,E,C,P){return this.drawShape(new RoundedRectangle(_,T,E,C,P))}drawCircle(_,T,E){return this.drawShape(new Circle(_,T,E))}drawEllipse(_,T,E,C){return this.drawShape(new Ellipse(_,T,E,C))}drawPolygon(..._){let T,E=!0;const C=_[0];C.points?(E=C.closeStroke,T=C.points):Array.isArray(_[0])?T=_[0]:T=_;const P=new Polygon(T);return P.closeStroke=E,this.drawShape(P),this}drawShape(_){return this._holeMode?this._geometry.drawHole(_,this._matrix):this._geometry.drawShape(_,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const _=this._geometry.graphicsData;return _.length===1&&_[0].shape.type===SHAPES.RECT&&!_[0].matrix&&!_[0].holes.length&&!(_[0].lineStyle.visible&&_[0].lineStyle.width)}_render(_){this.finishPoly();const T=this._geometry;T.updateBatches(),T.batchable?(this.batchDirty!==T.batchDirty&&this._populateBatches(),this._renderBatched(_)):(_.batch.flush(),this._renderDirect(_))}_populateBatches(){const _=this._geometry,T=this.blendMode,E=_.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=_.batchDirty,this.batches.length=E,this.vertexData=new Float32Array(_.points);for(let C=0;C<E;C++){const P=_.batches[C],I=P.style.color,F=new Float32Array(this.vertexData.buffer,P.attribStart*4*2,P.attribSize*2),R=new Float32Array(_.uvsFloat32.buffer,P.attribStart*4*2,P.attribSize*2),B=new Uint16Array(_.indicesUint16.buffer,P.start*2,P.size),O={vertexData:F,blendMode:T,indices:B,uvs:R,_batchRGB:Color$1.shared.setValue(I).toRgbArray(),_tintRGB:I,_texture:P.style.texture,alpha:P.style.alpha,worldAlpha:1};this.batches[C]=O}}_renderBatched(_){if(this.batches.length){_.batch.setObjectRenderer(_.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let T=0,E=this.batches.length;T<E;T++){const C=this.batches[T];C.worldAlpha=this.worldAlpha*C.alpha,_.plugins[this.pluginName].render(C)}}}_renderDirect(_){const T=this._resolveDirectShader(_),E=this._geometry,C=this.worldAlpha,P=T.uniforms,I=E.drawCalls;P.translationMatrix=this.transform.worldTransform,Color$1.shared.setValue(this._tintColor).premultiply(C).toArray(P.tint),_.shader.bind(T),_.geometry.bind(E,T),_.state.set(this.state);for(let F=0,R=I.length;F<R;F++)this._renderDrawCallDirect(_,E.drawCalls[F])}_renderDrawCallDirect(_,T){const{texArray:E,type:C,size:P,start:I}=T,F=E.count;for(let R=0;R<F;R++)_.texture.bind(E.elements[R],R);_.geometry.draw(C,P,I)}_resolveDirectShader(_){let T=this.shader;const E=this.pluginName;if(!T){if(!DEFAULT_SHADERS[E]){const{maxTextures:C}=_.plugins[E],P=new Int32Array(C);for(let R=0;R<C;R++)P[R]=R;const I={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:P},!0)},F=_.plugins[E]._shader.program;DEFAULT_SHADERS[E]=new Shader(F,I)}T=DEFAULT_SHADERS[E]}return T}_calculateBounds(){this.finishPoly();const _=this._geometry;if(!_.graphicsData.length)return;const{minX:T,minY:E,maxX:C,maxY:P}=_.bounds;this._bounds.addFrame(this.transform,T,E,C,P)}containsPoint(_){return this.worldTransform.applyInverse(_,Ot._TEMP_POINT),this._geometry.containsPoint(Ot._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let _=0;_<this.batches.length;_++){const T=this.batches[_];T._tintRGB=Color$1.shared.setValue(this._tintColor).multiply(T._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const _=this.transform._worldID;if(this._transformID===_)return;this._transformID=_;const T=this.transform.worldTransform,E=T.a,C=T.b,P=T.c,I=T.d,F=T.tx,R=T.ty,B=this._geometry.points,O=this.vertexData;let V=0;for(let L=0;L<B.length;L+=2){const D=B[L],U=B[L+1];O[V++]=E*D+P*U+F,O[V++]=I*U+C*D+R}}closePath(){const _=this.currentPath;return _&&(_.closeStroke=!0,this.finishPoly()),this}setMatrix(_){return this._matrix=_,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(_){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(_)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics=_Graphics;const tempRgb=[0,0,0];class SpineSprite extends Sprite{constructor(){super(...arguments),this.region=null,this.attachment=null}}class SpineMesh extends SimpleMesh{constructor(_,T,E,C,P){super(_,T,E,C,P),this.region=null,this.attachment=null}}const _SpineBase=class extends Container{constructor(A){if(super(),!A)throw new Error("The spineData param is required.");if(typeof A=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=A,this.createSkeleton(A),this.slotContainers=[],this.tempClipContainers=[];for(let _=0,T=this.skeleton.slots.length;_<T;_++){const E=this.skeleton.slots[_],C=E.getAttachment(),P=this.newContainer();if(this.slotContainers.push(P),this.addChild(P),this.tempClipContainers.push(null),!!C)if(C.type===AttachmentType.Region){const I=C.name,F=this.createSprite(E,C,I);E.currentSprite=F,E.currentSpriteName=I,P.addChild(F)}else if(C.type===AttachmentType.Mesh){const I=this.createMesh(E,C);E.currentMesh=I,E.currentMeshId=C.id,E.currentMeshName=C.name,P.addChild(I)}else C.type===AttachmentType.Clipping&&(this.createGraphics(E,C),P.addChild(E.clippingContainer),P.addChild(E.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get debug(){return this._debug}set debug(A){var _;A!=this._debug&&((_=this._debug)==null||_.unregisterSpine(this),A==null||A.registerSpine(this),this._debug=A)}get autoUpdate(){return this._autoUpdate}set autoUpdate(A){A!==this._autoUpdate&&(this._autoUpdate=A,this.updateTransform=A?_SpineBase.prototype.autoUpdateTransform:Container.prototype.updateTransform)}get tint(){return rgb2hex(this.tintRgb)}set tint(A){this.tintRgb=hex2rgb(A,this.tintRgb)}get delayLimit(){return(typeof this.localDelayLimit<"u"?this.localDelayLimit:settings.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE}update(A){var B;const _=this.delayLimit;if(A>_&&(A=_),this.state.update(A),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();const T=this.skeleton.slots,E=this.color;let C=null,P=null;E?(C=E.light,P=E.dark):C=this.tintRgb;for(let O=0,V=T.length;O<V;O++){const L=T[O],D=L.getAttachment(),U=this.slotContainers[O];if(!D){U.visible=!1;continue}let G=null;D.sequence&&D.sequence.apply(L,D);let X=D.region;const z=D.color;switch(D!=null&&D.type){case AttachmentType.Region:if(U.transform.setFromMatrix(L.bone.matrix),X=D.region,L.currentMesh&&(L.currentMesh.visible=!1,L.currentMesh=null,L.currentMeshId=void 0,L.currentMeshName=void 0),!X){L.currentSprite&&(L.currentSprite.renderable=!1);break}if(!L.currentSpriteName||L.currentSpriteName!==D.name){const q=D.name;if(L.currentSprite&&(L.currentSprite.visible=!1),L.sprites=L.sprites||{},L.sprites[q]!==void 0)L.sprites[q].visible=!0;else{const K=this.createSprite(L,D,q);U.addChild(K)}L.currentSprite=L.sprites[q],L.currentSpriteName=q}L.currentSprite.renderable=!0,L.hackRegion||this.setSpriteRegion(D,L.currentSprite,X),L.currentSprite.color?G=L.currentSprite.color:(tempRgb[0]=C[0]*L.color.r*z.r,tempRgb[1]=C[1]*L.color.g*z.g,tempRgb[2]=C[2]*L.color.b*z.b,L.currentSprite.tint=rgb2hex(tempRgb)),L.currentSprite.blendMode=L.blendMode;break;case AttachmentType.Mesh:if(L.currentSprite){L.currentSprite.visible=!1,L.currentSprite=null,L.currentSpriteName=void 0;const q=new Transform;q._parentID=-1,q._worldID=U.transform._worldID,U.transform=q}if(!X){L.currentMesh&&(L.currentMesh.renderable=!1);break}const W=D.id;if(L.currentMeshId===void 0||L.currentMeshId!==W){const q=W;if(L.currentMesh&&(L.currentMesh.visible=!1),L.meshes=L.meshes||{},L.meshes[q]!==void 0)L.meshes[q].visible=!0;else{const K=this.createMesh(L,D);U.addChild(K)}L.currentMesh=L.meshes[q],L.currentMeshName=D.name,L.currentMeshId=q}L.currentMesh.renderable=!0,D.computeWorldVerticesOld(L,L.currentMesh.vertices),L.currentMesh.color?G=L.currentMesh.color:(tempRgb[0]=C[0]*L.color.r*z.r,tempRgb[1]=C[1]*L.color.g*z.g,tempRgb[2]=C[2]*L.color.b*z.b,L.currentMesh.tint=rgb2hex(tempRgb)),L.currentMesh.blendMode=L.blendMode,L.hackRegion||this.setMeshRegion(D,L.currentMesh,X);break;case AttachmentType.Clipping:L.currentGraphics||(this.createGraphics(L,D),U.addChild(L.clippingContainer),U.addChild(L.currentGraphics)),this.updateGraphics(L,D),U.alpha=1,U.visible=!0;continue;default:U.visible=!1;continue}if(U.visible=!0,G){let Y=L.color.r*z.r,W=L.color.g*z.g,q=L.color.b*z.b;G.setLight(C[0]*Y+P[0]*(1-Y),C[1]*W+P[1]*(1-W),C[2]*q+P[2]*(1-q)),L.darkColor?(Y=L.darkColor.r,W=L.darkColor.g,q=L.darkColor.b):(Y=0,W=0,q=0),G.setDark(C[0]*Y+P[0]*(1-Y),C[1]*W+P[1]*(1-W),C[2]*q+P[2]*(1-q))}U.alpha=L.color.a}const I=this.skeleton.drawOrder;let F=null,R=null;for(let O=0,V=I.length;O<V;O++){const L=T[I[O].data.index],D=this.slotContainers[I[O].data.index];if(R||D.parent!==null&&D.parent!==this&&(D.parent.removeChild(D),D.parent=this),L.currentGraphics&&L.getAttachment())R=L.clippingContainer,F=L.getAttachment(),R.children.length=0,this.children[O]=D,F.endSlot===L.data&&(F.endSlot=null);else if(R){let U=this.tempClipContainers[O];U||(U=this.tempClipContainers[O]=this.newContainer(),U.visible=!1),this.children[O]=U,D.parent=null,R.addChild(D),F.endSlot==L.data&&(R.renderable=!0,R=null,F=null)}else this.children[O]=D}(B=this._debug)==null||B.renderDebug(this)}setSpriteRegion(A,_,T){_.attachment===A&&_.region===T||(_.region=T,_.attachment=A,_.texture=T.texture,_.rotation=A.rotation*MathUtils.degRad,_.position.x=A.x,_.position.y=A.y,_.alpha=A.color.a,T.size?(_.scale.x=T.size.width/T.originalWidth,_.scale.y=-T.size.height/T.originalHeight):(_.scale.x=A.scaleX*A.width/T.originalWidth,_.scale.y=-A.scaleY*A.height/T.originalHeight))}setMeshRegion(A,_,T){_.attachment===A&&_.region===T||(_.region=T,_.attachment=A,_.texture=T.texture,T.texture.updateUvs(),_.uvBuffer.update(A.regionUVs))}autoUpdateTransform(){{this.lastTime=this.lastTime||Date.now();const A=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(A)}Container.prototype.updateTransform.call(this)}createSprite(A,_,T){let E=_.region;A.hackAttachment===_&&(E=A.hackRegion);const C=E?E.texture:null,P=this.newSprite(C);return P.anchor.set(.5),E&&this.setSpriteRegion(_,P,_.region),A.sprites=A.sprites||{},A.sprites[T]=P,P}createMesh(A,_){!_.region&&_.sequence&&_.sequence.apply(A,_);let T=_.region;A.hackAttachment===_&&(T=A.hackRegion,A.hackAttachment=null,A.hackRegion=null);const E=this.newMesh(T?T.texture:null,new Float32Array(_.regionUVs.length),_.regionUVs,new Uint16Array(_.triangles),DRAW_MODES.TRIANGLES);return typeof E._canvasPadding<"u"&&(E._canvasPadding=1.5),E.alpha=_.color.a,E.region=_.region,T&&this.setMeshRegion(_,E,T),A.meshes=A.meshes||{},A.meshes[_.id]=E,E}createGraphics(A,_){const T=this.newGraphics(),E=new Polygon([]);return T.clear(),T.beginFill(16777215,1),T.drawPolygon(E),T.renderable=!1,A.currentGraphics=T,A.clippingContainer=this.newContainer(),A.clippingContainer.mask=A.currentGraphics,T}updateGraphics(A,_){const T=A.currentGraphics.geometry,E=T.graphicsData[0].shape.points,C=_.worldVerticesLength;E.length=C,_.computeWorldVertices(A,0,C,E,0,2),T.invalidate()}hackTextureBySlotIndex(A,_=null,T=null){const E=this.skeleton.slots[A];if(!E)return!1;const C=E.getAttachment();let P=C.region;return _?(P=new TextureRegion,P.texture=_,P.size=T,E.hackRegion=P,E.hackAttachment=C):(E.hackRegion=null,E.hackAttachment=null),E.currentSprite?this.setSpriteRegion(C,E.currentSprite,P):E.currentMesh&&this.setMeshRegion(C,E.currentMesh,P),!0}hackTextureBySlotName(A,_=null,T=null){const E=this.skeleton.findSlotIndex(A);return E==-1?!1:this.hackTextureBySlotIndex(E,_,T)}hackTextureAttachment(A,_,T,E=null){const C=this.skeleton.findSlotIndex(A),P=this.skeleton.getAttachmentByName(A,_);P.region.texture=T;const I=this.skeleton.slots[C];if(!I)return!1;const F=I.getAttachment();if(_===F.name){let R=P.region;return T?(R=new TextureRegion,R.texture=T,R.size=E,I.hackRegion=R,I.hackAttachment=F):(I.hackRegion=null,I.hackAttachment=null),I.currentSprite&&I.currentSprite.region!=R?(this.setSpriteRegion(F,I.currentSprite,R),I.currentSprite.region=R):I.currentMesh&&I.currentMesh.region!=R&&this.setMeshRegion(F,I.currentMesh,R),!0}return!1}newContainer(){return new Container}newSprite(A){return new SpineSprite(A)}newGraphics(){return new Graphics}newMesh(A,_,T,E,C){return new SpineMesh(A,_,T,E,C)}transformHack(){return 1}hackAttachmentGroups(A,_,T){if(!A)return;const E=[],C=[];for(let P=0,I=this.skeleton.slots.length;P<I;P++){const F=this.skeleton.slots[P],R=F.currentSpriteName||F.currentMeshName||"",B=F.currentSprite||F.currentMesh;R.endsWith(A)?(B.parentGroup=_,C.push(B)):T&&B&&(B.parentGroup=T,E.push(B))}return[E,C]}destroy(A){this.debug=null;for(let _=0,T=this.skeleton.slots.length;_<T;_++){const E=this.skeleton.slots[_];for(const C in E.meshes)E.meshes[C].destroy(A);E.meshes=null;for(const C in E.sprites)E.sprites[C].destroy(A);E.sprites=null}for(let _=0,T=this.slotContainers.length;_<T;_++)this.slotContainers[_].destroy(A);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(A)}};let SpineBase=_SpineBase;SpineBase.clippingPolygon=[];Object.defineProperty(SpineBase.prototype,"visible",{get(){return this._visible},set(A){A!==this._visible&&(this._visible=A,A&&(this.lastTime=0))}});const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions.handle(ExtensionType.Asset,A=>{const _=A.ref;Object.entries(assetKeyMap).filter(([T])=>!!_[T]).forEach(([T,E])=>extensions.add(Object.assign(_[T],{extension:_[T].extension??E})))},A=>{const _=A.ref;Object.keys(assetKeyMap).filter(T=>!!_[T]).forEach(T=>extensions.remove(_[T]))});class BackgroundLoader{constructor(_,T=!1){this._loader=_,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=T}add(_){_.forEach(T=>{this._assetList.push(T)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const _=[],T=Math.min(this._assetList.length,this._maxConcurrent);for(let E=0;E<T;E++)_.push(this._assetList.pop());await this._loader.load(_),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(_){this._isActive!==_&&(this._isActive=_,_&&!this._isLoading&&this._next())}}function checkDataUrl(A,_){if(Array.isArray(_)){for(const T of _)if(A.startsWith(`data:${T}`))return!0;return!1}return A.startsWith(`data:${_}`)}function checkExtension(A,_){const T=A.split("?")[0],E=path.extname(T).toLowerCase();return Array.isArray(_)?_.includes(E):E===_}const convertToList=(A,_,T=!1)=>(Array.isArray(A)||(A=[A]),_?A.map(E=>typeof E=="string"||T?_(E):E):A);function processX(A,_,T,E,C){const P=_[T];for(let I=0;I<P.length;I++){const F=P[I];T<_.length-1?processX(A.replace(E[T],F),_,T+1,E,C):C.push(A.replace(E[T],F))}}function createStringVariations(A){const _=/\{(.*?)\}/g,T=A.match(_),E=[];if(T){const C=[];T.forEach(P=>{const I=P.substring(1,P.length-1).split(",");C.push(I)}),processX(A,C,0,T,E)}else E.push(A);return E}const isSingleItem=A=>!Array.isArray(A);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(_){return this._cache.has(_)}get(_){const T=this._cache.get(_);return T||console.warn(`[Assets] Asset id ${_} was not found in the Cache`),T}set(_,T){const E=convertToList(_);let C;for(let F=0;F<this.parsers.length;F++){const R=this.parsers[F];if(R.test(T)){C=R.getCacheableAssets(E,T);break}}C||(C={},E.forEach(F=>{C[F]=T}));const P=Object.keys(C),I={cacheKeys:P,keys:E};if(E.forEach(F=>{this._cacheMap.set(F,I)}),P.forEach(F=>{const R=C?C[F]:T;this._cache.has(F)&&this._cache.get(F)!==R&&console.warn("[Cache] already has key:",F),this._cache.set(F,C[F])}),T instanceof Texture){const F=T;E.forEach(R=>{F.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(F.baseTexture,R),Texture.addToCache(F,R)})}}remove(_){if(!this._cacheMap.has(_)){console.warn(`[Assets] Asset id ${_} was not found in the Cache`);return}const T=this._cacheMap.get(_);T.cacheKeys.forEach(E=>{this._cache.delete(E)}),T.keys.forEach(E=>{this._cacheMap.delete(E)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(_,T,E)=>(this._parsersValidated=!1,_[T]=E,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(_,T){const E={promise:null,parser:null};return E.promise=(async()=>{var I,F;let C=null,P=null;if(T.loadParser&&(P=this._parserHash[T.loadParser],P||console.warn(`[Assets] specified load parser "${T.loadParser}" not found while loading ${_}`)),!P){for(let R=0;R<this.parsers.length;R++){const B=this.parsers[R];if(B.load&&((I=B.test)!=null&&I.call(B,_,T,this))){P=B;break}}if(!P)return console.warn(`[Assets] ${_} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}C=await P.load(_,T,this),E.parser=P;for(let R=0;R<this.parsers.length;R++){const B=this.parsers[R];B.parse&&B.parse&&await((F=B.testParse)==null?void 0:F.call(B,C,T,this))&&(C=await B.parse(C,T,this)||C,E.parser=B)}return C})(),E}async load(_,T){this._parsersValidated||this._validateParsers();let E=0;const C={},P=isSingleItem(_),I=convertToList(_,B=>({alias:[B],src:B})),F=I.length,R=I.map(async B=>{const O=path.toAbsolute(B.src);if(!C[B.src])try{this.promiseCache[O]||(this.promiseCache[O]=this._getLoadPromiseAndParser(O,B)),C[B.src]=await this.promiseCache[O].promise,T&&T(++E/F)}catch(V){throw delete this.promiseCache[O],delete C[B.src],new Error(`[Loader.load] Failed to load ${O}.
${V}`)}});return await Promise.all(R),P?C[I[0].src]:C}async unload(_){const T=convertToList(_,E=>({alias:[E],src:E})).map(async E=>{var I,F;const C=path.toAbsolute(E.src),P=this.promiseCache[C];if(P){const R=await P.promise;delete this.promiseCache[C],(F=(I=P.parser)==null?void 0:I.unload)==null||F.call(I,R,E,this)}});await Promise.all(T)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(_=>_.name).reduce((_,T)=>(_[T.name]&&console.warn(`[Assets] loadParser name conflict "${T.name}"`),{..._,[T.name]:T}),{})}}var LoaderParserPriority=(A=>(A[A.Low=0]="Low",A[A.Normal=1]="Normal",A[A.High=2]="High",A))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(A){return checkDataUrl(A,validJSONMIME)||checkExtension(A,validJSONExtension)},async load(A){return await(await settings$1.ADAPTER.fetch(A)).json()}};extensions.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(A){return checkDataUrl(A,validTXTMIME)||checkExtension(A,validTXTExtension)},async load(A){return await(await settings$1.ADAPTER.fetch(A)).text()}};extensions.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(A){const _=path.extname(A),T=path.basename(A,_).replace(/(-|_)/g," ").toLowerCase().split(" ").map(P=>P.charAt(0).toUpperCase()+P.slice(1));let E=T.length>0;for(const P of T)if(!P.match(CSS_IDENT_TOKEN_REGEX)){E=!1;break}let C=T.join(" ");return E||(C=`"${C.replace(/[\\"]/g,"\\$&")}"`),C}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(A){return validURICharactersRegex.test(A)?A:encodeURI(A)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(A){return checkDataUrl(A,validFontMIMEs)||checkExtension(A,validFontExtensions)},async load(A,_){var E,C,P;const T=settings$1.ADAPTER.getFontFaceSet();if(T){const I=[],F=((E=_.data)==null?void 0:E.family)??getFontFamilyName(A),R=((P=(C=_.data)==null?void 0:C.weights)==null?void 0:P.filter(O=>validWeights.includes(O)))??["normal"],B=_.data??{};for(let O=0;O<R.length;O++){const V=R[O],L=new FontFace(F,`url(${encodeURIWhenNeeded(A)})`,{...B,weight:V});await L.load(),T.add(L),I.push(L)}return I.length===1?I[0]:I}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(A){(Array.isArray(A)?A:[A]).forEach(_=>settings$1.ADAPTER.getFontFaceSet().delete(_))}};extensions.add(loadWebFont);const WORKER_CODE$1=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let WORKER_URL$1=null,WorkerInstance$1=class{constructor(){WORKER_URL$1||(WORKER_URL$1=URL.createObjectURL(new Blob([WORKER_CODE$1],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL$1)}};WorkerInstance$1.revokeObjectURL=function(){WORKER_URL$1&&(URL.revokeObjectURL(WORKER_URL$1),WORKER_URL$1=null)};const WORKER_CODE=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let WORKER_URL=null;class WorkerInstance{constructor(){WORKER_URL||(WORKER_URL=URL.createObjectURL(new Blob([WORKER_CODE],{type:"application/javascript"}))),this.worker=new Worker(WORKER_URL)}}WorkerInstance.revokeObjectURL=function(){WORKER_URL&&(URL.revokeObjectURL(WORKER_URL),WORKER_URL=null)};let UUID=0,MAX_WORKERS;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(_=>{const{worker:T}=new WorkerInstance$1;T.addEventListener("message",E=>{T.terminate(),WorkerInstance$1.revokeObjectURL(),_(E.data)})}),this._isImageBitmapSupported)}loadImageBitmap(_){return this._run("loadImageBitmap",[_])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let _=this.workerPool.pop();return!_&&this._createdWorkers<MAX_WORKERS&&(this._createdWorkers++,_=new WorkerInstance().worker,_.addEventListener("message",T=>{this.complete(T.data),this.returnWorker(T.target),this.next()})),_}returnWorker(_){this.workerPool.push(_)}complete(_){_.error!==void 0?this.resolveHash[_.uuid].reject(_.error):this.resolveHash[_.uuid].resolve(_.data),this.resolveHash[_.uuid]=null}async _run(_,T){await this._initWorkers();const E=new Promise((C,P)=>{this.queue.push({id:_,arguments:T,resolve:C,reject:P})});return this.next(),E}next(){if(!this.queue.length)return;const _=this.getWorker();if(!_)return;const T=this.queue.pop(),E=T.id;this.resolveHash[UUID]={resolve:T.resolve,reject:T.reject},_.postMessage({data:T.arguments,uuid:UUID++,id:E})}}const WorkerManager=new WorkerManagerClass;function createTexture(A,_,T){A.resource.internal=!0;const E=new Texture(A),C=()=>{delete _.promiseCache[T],Cache.has(T)&&Cache.remove(T)};return E.baseTexture.once("destroyed",()=>{T in _.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),C())}),E.once("destroyed",()=>{A.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),C())}),E}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(A){const _=await settings$1.ADAPTER.fetch(A);if(!_.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${A}: ${_.status} ${_.statusText}`);const T=await _.blob();return await createImageBitmap(T)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(A){return checkDataUrl(A,validImageMIMEs)||checkExtension(A,validImageExtensions)},async load(A,_,T){var F;const E=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let C;E?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?C=await WorkerManager.loadImageBitmap(A):C=await loadImageBitmap(A):C=await new Promise((R,B)=>{const O=new Image;O.crossOrigin=this.config.crossOrigin,O.src=A,O.complete?R(O):(O.onload=()=>R(O),O.onerror=V=>B(V))});const P={..._.data};P.resolution??(P.resolution=getResolutionOfUrl(A)),E&&((F=P.resourceOptions)==null?void 0:F.ownsImageBitmap)===void 0&&(P.resourceOptions={...P.resourceOptions},P.resourceOptions.ownsImageBitmap=!0);const I=new BaseTexture(C,P);return I.resource.src=A,createTexture(I,T,A)},unload(A){A.destroy(!0)}};extensions.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(A){return checkDataUrl(A,validSVGMIME)||checkExtension(A,validSVGExtension)},async testParse(A){return SVGResource.test(A)},async parse(A,_,T){var P;const E=new SVGResource(A,(P=_==null?void 0:_.data)==null?void 0:P.resourceOptions);await E.load();const C=new BaseTexture(E,{resolution:getResolutionOfUrl(A),..._==null?void 0:_.data});return C.resource.src=_.src,createTexture(C,T,_.src)},async load(A,_){return(await settings$1.ADAPTER.fetch(A)).text()},unload:loadTextures.unload};extensions.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(A){return checkDataUrl(A,validVideoMIMEs)||checkExtension(A,validVideoExtensions)},async load(A,_,T){var I;let E;const C=await(await settings$1.ADAPTER.fetch(A)).blob(),P=URL.createObjectURL(C);try{const F={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(I=_==null?void 0:_.data)==null?void 0:I.resourceOptions,autoLoad:!0},R=new VideoResource(P,F);await R.load();const B=new BaseTexture(R,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(A),..._==null?void 0:_.data});B.resource.src=A,E=createTexture(B,T,A),E.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(P)})}catch(F){throw URL.revokeObjectURL(P),F}return E},unload(A){A.destroy(!0)}};extensions.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(_,T)=>`${_}${this._bundleIdConnector}${T}`,extractAssetIdFromBundle:(_,T)=>T.replace(`${_}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(_){if(this._bundleIdConnector=_.connector??this._bundleIdConnector,this._createBundleAssetId=_.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=_.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(..._){_.forEach(T=>{this._preferredOrder.push(T),T.priority||(T.priority=Object.keys(T.params))}),this._resolverHash={}}set basePath(_){this._basePath=_}get basePath(){return this._basePath}set rootPath(_){this._rootPath=_}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(_){if(typeof _=="string")this._defaultSearchParams=_;else{const T=_;this._defaultSearchParams=Object.keys(T).map(E=>`${encodeURIComponent(E)}=${encodeURIComponent(T[E])}`).join("&")}}getAlias(_){const{alias:T,name:E,src:C,srcs:P}=_;return convertToList(T||E||C||P,I=>typeof I=="string"?I:Array.isArray(I)?I.map(F=>(F==null?void 0:F.src)??(F==null?void 0:F.srcs)??F):I!=null&&I.src||I!=null&&I.srcs?I.src??I.srcs:I,!0)}addManifest(_){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=_,_.bundles.forEach(T=>{this.addBundle(T.name,T.assets)})}addBundle(_,T){const E=[];Array.isArray(T)?T.forEach(C=>{const P=C.src??C.srcs,I=C.alias??C.name;let F;if(typeof I=="string"){const R=this._createBundleAssetId(_,I);E.push(R),F=[I,R]}else{const R=I.map(B=>this._createBundleAssetId(_,B));E.push(...R),F=[...I,...R]}this.add({...C,alias:F,src:P})}):Object.keys(T).forEach(C=>{const P=[C,this._createBundleAssetId(_,C)];if(typeof T[C]=="string")this.add({alias:P,src:T[C]});else if(Array.isArray(T[C]))this.add({alias:P,src:T[C]});else{const I=T[C],F=I.src??I.srcs;this.add({...I,alias:P,src:Array.isArray(F)?F:[F]})}E.push(...P)}),this._bundles[_]=E}add(_,T,E,C,P){const I=[];typeof _=="string"||Array.isArray(_)&&typeof _[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),I.push({alias:_,src:T,data:E,format:C,loadParser:P})):Array.isArray(_)?I.push(..._):I.push(_);let F;F=R=>{this.hasKey(R)&&console.warn(`[Resolver] already has key: ${R} overwriting`)},convertToList(I).forEach(R=>{const{src:B,srcs:O}=R;let{data:V,format:L,loadParser:D}=R;const U=convertToList(B||O).map(z=>typeof z=="string"?createStringVariations(z):Array.isArray(z)?z:[z]),G=this.getAlias(R);Array.isArray(G)?G.forEach(F):F(G);const X=[];U.forEach(z=>{z.forEach(Y=>{let W={};if(typeof Y!="object"){W.src=Y;for(let q=0;q<this._parsers.length;q++){const K=this._parsers[q];if(K.test(Y)){W=K.parse(Y);break}}}else V=Y.data??V,L=Y.format??L,D=Y.loadParser??D,W={...W,...Y};if(!G)throw new Error(`[Resolver] alias is undefined for this asset: ${W.src}`);W=this.buildResolvedAsset(W,{aliases:G,data:V,format:L,loadParser:D}),X.push(W)})}),G.forEach(z=>{this._assetMap[z]=X})})}resolveBundle(_){const T=isSingleItem(_);_=convertToList(_);const E={};return _.forEach(C=>{const P=this._bundles[C];if(P){const I=this.resolve(P),F={};for(const R in I){const B=I[R];F[this._extractAssetIdFromBundle(C,R)]=B}E[C]=F}}),T?E[_[0]]:E}resolveUrl(_){const T=this.resolve(_);if(typeof _!="string"){const E={};for(const C in T)E[C]=T[C].src;return E}return T.src}resolve(_){const T=isSingleItem(_);_=convertToList(_);const E={};return _.forEach(C=>{if(!this._resolverHash[C])if(this._assetMap[C]){let P=this._assetMap[C];const I=P[0],F=this._getPreferredOrder(P);F==null||F.priority.forEach(R=>{F.params[R].forEach(B=>{const O=P.filter(V=>V[R]?V[R]===B:!1);O.length&&(P=O)})}),this._resolverHash[C]=P[0]??I}else this._resolverHash[C]=this.buildResolvedAsset({alias:[C],src:C},{});E[C]=this._resolverHash[C]}),T?E[_[0]]:E}hasKey(_){return!!this._assetMap[_]}hasBundle(_){return!!this._bundles[_]}_getPreferredOrder(_){for(let T=0;T<_.length;T++){const E=_[0],C=this._preferredOrder.find(P=>P.params.format.includes(E.format));if(C)return C}return this._preferredOrder[0]}_appendDefaultSearchParams(_){if(!this._defaultSearchParams)return _;const T=/\?/.test(_)?"&":"?";return`${_}${T}${this._defaultSearchParams}`}buildResolvedAsset(_,T){const{aliases:E,data:C,loadParser:P,format:I}=T;return(this._basePath||this._rootPath)&&(_.src=path.toAbsolute(_.src,this._basePath,this._rootPath)),_.alias=E??_.alias??[_.src],_.src=this._appendDefaultSearchParams(_.src),_.data={...C||{},..._.data},_.loadParser=P??_.loadParser,_.format=I??_.format??path.extname(_.src).slice(1),_.srcs=_.src,_.name=_.alias,_}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(_={}){var P,I;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,_.defaultSearchParams&&this.resolver.setDefaultSearchParams(_.defaultSearchParams),_.basePath&&(this.resolver.basePath=_.basePath),_.bundleIdentifier&&this.resolver.setBundleIdentifier(_.bundleIdentifier),_.manifest){let F=_.manifest;typeof F=="string"&&(F=await this.load(F)),this.resolver.addManifest(F)}const T=((P=_.texturePreference)==null?void 0:P.resolution)??1,E=typeof T=="number"?[T]:T,C=await this._detectFormats({preferredFormats:(I=_.texturePreference)==null?void 0:I.format,skipDetections:_.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:C,resolution:E}}),_.preferences&&this.setPreferences(_.preferences)}add(_,T,E,C,P){this.resolver.add(_,T,E,C,P)}async load(_,T){this._initialized||await this.init();const E=isSingleItem(_),C=convertToList(_).map(F=>{if(typeof F!="string"){const R=this.resolver.getAlias(F);return R.some(B=>!this.resolver.hasKey(B))&&this.add(F),Array.isArray(R)?R[0]:R}return this.resolver.hasKey(F)||this.add({alias:F,src:F}),F}),P=this.resolver.resolve(C),I=await this._mapLoadToResolve(P,T);return E?I[C[0]]:I}addBundle(_,T){this.resolver.addBundle(_,T)}async loadBundle(_,T){this._initialized||await this.init();let E=!1;typeof _=="string"&&(E=!0,_=[_]);const C=this.resolver.resolveBundle(_),P={},I=Object.keys(C);let F=0,R=0;const B=()=>{T==null||T(++F/R)},O=I.map(V=>{const L=C[V];return R+=Object.keys(L).length,this._mapLoadToResolve(L,B).then(D=>{P[V]=D})});return await Promise.all(O),E?P[_[0]]:P}async backgroundLoad(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const T=this.resolver.resolve(_);this._backgroundLoader.add(Object.values(T))}async backgroundLoadBundle(_){this._initialized||await this.init(),typeof _=="string"&&(_=[_]);const T=this.resolver.resolveBundle(_);Object.values(T).forEach(E=>{this._backgroundLoader.add(Object.values(E))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(_){if(typeof _=="string")return Cache.get(_);const T={};for(let E=0;E<_.length;E++)T[E]=Cache.get(_[E]);return T}async _mapLoadToResolve(_,T){const E=Object.values(_),C=Object.keys(_);this._backgroundLoader.active=!1;const P=await this.loader.load(E,T);this._backgroundLoader.active=!0;const I={};return E.forEach((F,R)=>{const B=P[F.src],O=[F.src];F.alias&&O.push(...F.alias),I[C[R]]=B,Cache.set(O,B)}),I}async unload(_){this._initialized||await this.init();const T=convertToList(_).map(C=>typeof C!="string"?C.src:C),E=this.resolver.resolve(T);await this._unloadFromResolved(E)}async unloadBundle(_){this._initialized||await this.init(),_=convertToList(_);const T=this.resolver.resolveBundle(_),E=Object.keys(T).map(C=>this._unloadFromResolved(T[C]));await Promise.all(E)}async _unloadFromResolved(_){const T=Object.values(_);T.forEach(E=>{Cache.remove(E.src)}),await this.loader.unload(T)}async _detectFormats(_){let T=[];_.preferredFormats&&(T=Array.isArray(_.preferredFormats)?_.preferredFormats:[_.preferredFormats]);for(const E of _.detections)_.skipDetections||await E.test()?T=await E.add(T):_.skipDetections||(T=await E.remove(T));return T=T.filter((E,C)=>T.indexOf(E)===C),T}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(_){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:_})}setPreferences(_){this.loader.parsers.forEach(T=>{T.config&&Object.keys(T.config).filter(E=>E in _).forEach(E=>{T.config[E]=_[E]})})}}const Assets=new AssetsClass;extensions.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:A=>Array.isArray(A)&&A.every(_=>_ instanceof Texture),getCacheableAssets:(A,_)=>{const T={};return A.forEach(E=>{_.forEach((C,P)=>{T[E+(P===0?"":P+1)]=C})}),T}};extensions.add(cacheTextureArray);async function testImageFormat(A){if("Image"in globalThis)return new Promise(_=>{const T=new Image;T.onload=()=>{_(!0)},T.onerror=()=>{_(!1)},T.src=A});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const _=await(await fetch(A)).blob();await createImageBitmap(_)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async A=>[...A,"avif"],remove:async A=>A.filter(_=>_!=="avif")};extensions.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async A=>[...A,"webp"],remove:async A=>A.filter(_=>_!=="webp")};extensions.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async A=>[...A,...imageFormats],remove:async A=>A.filter(_=>!imageFormats.includes(_))};extensions.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(A){return inWorker?!1:document.createElement("video").canPlayType(A)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async A=>[...A,"webm"],remove:async A=>A.filter(_=>_!=="webm")};extensions.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async A=>[...A,"mp4","m4v"],remove:async A=>A.filter(_=>_!=="mp4"&&_!=="m4v")};extensions.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async A=>[...A,"ogv"],remove:async A=>A.filter(_=>_!=="ogv")};extensions.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:A=>{var _;return{resolution:parseFloat(((_=settings$1.RETINA_PREFIX.exec(A))==null?void 0:_[1])??"1"),format:path.extname(A).slice(1),src:A}}};extensions.add(resolveTextureUrl);const spineTextureAtlasLoader={extension:ExtensionType.Asset,loader:{extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},test(A){return checkExtension(A,".atlas")},async load(A){return await(await settings$1.ADAPTER.fetch(A)).text()},testParse(A,_){const T=checkExtension(_.src,".atlas"),E=typeof A=="string";return Promise.resolve(T&&E)},async parse(A,_,T){const E=_.data;let C=path.dirname(_.src);C&&C.lastIndexOf("/")!==C.length-1&&(C+="/");let P=null,I=null;const F=new Promise((O,V)=>{P=O,I=V});let R;const B=O=>{O||I(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),P(R)};if(E.image||E.images){const O=Object.assign(E.image?{default:E.image}:{},E.images);R=new TextureAtlas(A,(V,L)=>{const D=O[V]||O.default;D&&D.baseTexture?L(D.baseTexture):L(D)},B)}else R=new TextureAtlas(A,makeSpineTextureAtlasLoaderFunctionFromPixiLoaderObject(T,C,E.imageMetadata),B);return await F},unload(A){A.dispose()}}},makeSpineTextureAtlasLoaderFunctionFromPixiLoaderObject=(A,_,T)=>async(E,C)=>{try{const P=path.normalize([..._.split(path.sep),E].join(path.sep)),I=await A.load({src:P,data:T});C(I.baseTexture)}catch(P){console.error("Spine: error in texture loader",P),C(null)}};extensions.add(spineTextureAtlasLoader);function isJson(A){return A.hasOwnProperty("bones")}function isBuffer(A){return A instanceof ArrayBuffer}class SpineLoaderAbstract{constructor(){}installLoader(){const _=this,T={extension:ExtensionType.Asset,loader:{extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},test(E){return checkExtension(E,".skel")},async load(E){return await(await settings$1.ADAPTER.fetch(E)).arrayBuffer()},testParse(E,C){var R;const P=checkExtension(C.src,".json")&&isJson(E),I=checkExtension(C.src,".skel")&&isBuffer(E),F=((R=C.data)==null?void 0:R.spineAtlas)===!1;return Promise.resolve(P&&!F||I)},async parse(E,C,P){const I=path.extname(C.src).toLowerCase(),F=path.basename(C.src,I);let R=path.dirname(C.src);R&&R.lastIndexOf("/")!==R.length-1&&(R+="/");const B=checkExtension(C.src,".json")&&isJson(E);let O=null,V=E;B?O=_.createJsonParser():(O=_.createBinaryParser(),V=new Uint8Array(E));const L=C.data||{},D=(L==null?void 0:L.spineSkeletonScale)??null;D&&(O.scale=D);const U=L.spineAtlas;if(U&&U.pages)return _.parseData(O,U,V);const G=L.atlasRawData;if(G){let Y=null,W=null;const q=new Promise((Z,se)=>{Y=Z,W=se}),K=new TextureAtlas(G,makeSpineTextureAtlasLoaderFunctionFromPixiLoaderObject(P,R,L.imageMetadata),Z=>{Z||W(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),Y(K)}),J=await q;return _.parseData(O,J,V)}let X=L.spineAtlasFile;X||(X=`${R+F}.atlas`);const z=await P.load({src:X,data:L,alias:L.spineAtlasAlias});return _.parseData(O,z,V)}}};return extensions.add(T),T}}let Attachment$2=class{constructor(_){if(_==null)throw new Error("name cannot be null.");this.name=_}};const _VertexAttachment$2=class extends Attachment$2{constructor(_){super(_),this.id=(_VertexAttachment$2.nextID++&65535)<<11,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVerticesOld(_,T){this.computeWorldVertices(_,0,this.worldVerticesLength,T,0,2)}computeWorldVertices(_,T,E,C,P,I){E=P+(E>>1)*I;const F=_.bone.skeleton,R=_.deform;let B=this.vertices;const O=this.bones;if(O==null){R.length>0&&(B=R);const U=_.bone.matrix,G=U.tx,X=U.ty,z=U.a,Y=U.c,W=U.b,q=U.d;for(let K=T,J=P;J<E;K+=2,J+=I){const Z=B[K],se=B[K+1];C[J]=Z*z+se*Y+G,C[J+1]=Z*W+se*q+X}return}let V=0,L=0;for(let U=0;U<T;U+=2){const G=O[V];V+=G+1,L+=G}const D=F.bones;if(R.length==0)for(let U=P,G=L*3;U<E;U+=I){let X=0,z=0,Y=O[V++];for(Y+=V;V<Y;V++,G+=3){const W=D[O[V]].matrix,q=B[G],K=B[G+1],J=B[G+2];X+=(q*W.a+K*W.c+W.tx)*J,z+=(q*W.b+K*W.d+W.ty)*J}C[U]=X,C[U+1]=z}else{const U=R;for(let G=P,X=L*3,z=L<<1;G<E;G+=I){let Y=0,W=0,q=O[V++];for(q+=V;V<q;V++,X+=3,z+=2){const K=D[O[V]].matrix,J=B[X]+U[z],Z=B[X+1]+U[z+1],se=B[X+2];Y+=(J*K.a+Z*K.c+K.tx)*se,W+=(J*K.b+Z*K.d+K.ty)*se}C[G]=Y,C[G+1]=W}}}copyTo(_){this.bones!=null?(_.bones=new Array(this.bones.length),Utils.arrayCopy(this.bones,0,_.bones,0,this.bones.length)):_.bones=null,this.vertices!=null?(_.vertices=Utils.newFloatArray(this.vertices.length),Utils.arrayCopy(this.vertices,0,_.vertices,0,this.vertices.length)):_.vertices=null,_.worldVerticesLength=this.worldVerticesLength,_.deformAttachment=this.deformAttachment}};let VertexAttachment$2=_VertexAttachment$2;VertexAttachment$2.nextID=0;let BoundingBoxAttachment$2=class wr extends VertexAttachment$2{constructor(_){super(_),this.type=AttachmentType.BoundingBox,this.color=new Color(1,1,1,1)}copy(){const _=new wr(this.name);return this.copyTo(_),_.color.setFromColor(this.color),_}},ClippingAttachment$2=class Pr extends VertexAttachment$2{constructor(_){super(_),this.type=AttachmentType.Clipping,this.color=new Color(.2275,.2275,.8078,1)}copy(){const _=new Pr(this.name);return this.copyTo(_),_.endSlot=this.endSlot,_.color.setFromColor(this.color),_}},MeshAttachment$2=class Qt extends VertexAttachment$2{constructor(_){super(_),this.type=AttachmentType.Mesh,this.color=new Color(1,1,1,1),this.tempColor=new Color(0,0,0,0)}getParentMesh(){return this.parentMesh}setParentMesh(_){this.parentMesh=_,_!=null&&(this.bones=_.bones,this.vertices=_.vertices,this.worldVerticesLength=_.worldVerticesLength,this.regionUVs=_.regionUVs,this.triangles=_.triangles,this.hullLength=_.hullLength,this.worldVerticesLength=_.worldVerticesLength)}copy(){if(this.parentMesh!=null)return this.newLinkedMesh();const _=new Qt(this.name);return _.region=this.region,_.path=this.path,_.color.setFromColor(this.color),this.copyTo(_),_.regionUVs=new Float32Array(this.regionUVs.length),Utils.arrayCopy(this.regionUVs,0,_.regionUVs,0,this.regionUVs.length),_.triangles=new Array(this.triangles.length),Utils.arrayCopy(this.triangles,0,_.triangles,0,this.triangles.length),_.hullLength=this.hullLength,this.edges!=null&&(_.edges=new Array(this.edges.length),Utils.arrayCopy(this.edges,0,_.edges,0,this.edges.length)),_.width=this.width,_.height=this.height,_}newLinkedMesh(){const _=new Qt(this.name);return _.region=this.region,_.path=this.path,_.color.setFromColor(this.color),_.deformAttachment=this.deformAttachment,_.setParentMesh(this.parentMesh!=null?this.parentMesh:this),_}},PathAttachment$2=class Mr extends VertexAttachment$2{constructor(_){super(_),this.type=AttachmentType.Path,this.closed=!1,this.constantSpeed=!1,this.color=new Color(1,1,1,1)}copy(){const _=new Mr(this.name);return this.copyTo(_),_.lengths=new Array(this.lengths.length),Utils.arrayCopy(this.lengths,0,_.lengths,0,this.lengths.length),_.closed=closed,_.constantSpeed=this.constantSpeed,_.color.setFromColor(this.color),_}},PointAttachment$2=class Rr extends VertexAttachment$2{constructor(_){super(_),this.type=AttachmentType.Point,this.color=new Color(.38,.94,0,1)}computeWorldPosition(_,T){const E=_.matrix;return T.x=this.x*E.a+this.y*E.c+_.worldX,T.y=this.x*E.b+this.y*E.d+_.worldY,T}computeWorldRotation(_){const T=_.matrix,E=MathUtils.cosDeg(this.rotation),C=MathUtils.sinDeg(this.rotation),P=E*T.a+C*T.c,I=E*T.b+C*T.d;return Math.atan2(I,P)*MathUtils.radDeg}copy(){const _=new Rr(this.name);return _.x=this.x,_.y=this.y,_.rotation=this.rotation,_.color.setFromColor(this.color),_}},Slot$1=class{constructor(_,T){if(this.deform=new Array,_==null)throw new Error("data cannot be null.");if(T==null)throw new Error("bone cannot be null.");this.data=_,this.bone=T,this.color=new Color,this.darkColor=_.darkColor==null?null:new Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(_){this.attachment!=_&&(this.attachment=_,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(_){this.attachmentTime=this.bone.skeleton.time-_}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}};const _RegionAttachment$2=class extends Attachment$2{constructor(_){super(_),this.type=AttachmentType.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new Color(1,1,1,1),this.offset=Utils.newFloatArray(8),this.uvs=Utils.newFloatArray(8),this.tempColor=new Color(1,1,1,1)}updateOffset(){const _=this.width/this.region.originalWidth*this.scaleX,T=this.height/this.region.originalHeight*this.scaleY,E=-this.width/2*this.scaleX+this.region.offsetX*_,C=-this.height/2*this.scaleY+this.region.offsetY*T,P=E+this.region.width*_,I=C+this.region.height*T,F=this.rotation*Math.PI/180,R=Math.cos(F),B=Math.sin(F),O=E*R+this.x,V=E*B,L=C*R+this.y,D=C*B,U=P*R+this.x,G=P*B,X=I*R+this.y,z=I*B,Y=this.offset;Y[_RegionAttachment$2.OX1]=O-D,Y[_RegionAttachment$2.OY1]=L+V,Y[_RegionAttachment$2.OX2]=O-z,Y[_RegionAttachment$2.OY2]=X+V,Y[_RegionAttachment$2.OX3]=U-z,Y[_RegionAttachment$2.OY3]=X+G,Y[_RegionAttachment$2.OX4]=U-D,Y[_RegionAttachment$2.OY4]=L+G}setRegion(_){this.region=_;const T=this.uvs;_.rotate?(T[2]=_.u,T[3]=_.v2,T[4]=_.u,T[5]=_.v,T[6]=_.u2,T[7]=_.v,T[0]=_.u2,T[1]=_.v2):(T[0]=_.u,T[1]=_.v2,T[2]=_.u,T[3]=_.v,T[4]=_.u2,T[5]=_.v,T[6]=_.u2,T[7]=_.v2)}computeWorldVertices(_,T,E,C){const P=this.offset,I=_ instanceof Slot$1?_.bone.matrix:_.matrix,F=I.tx,R=I.ty,B=I.a,O=I.c,V=I.b,L=I.d;let D=0,U=0;D=P[_RegionAttachment$2.OX1],U=P[_RegionAttachment$2.OY1],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R,E+=C,D=P[_RegionAttachment$2.OX2],U=P[_RegionAttachment$2.OY2],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R,E+=C,D=P[_RegionAttachment$2.OX3],U=P[_RegionAttachment$2.OY3],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R,E+=C,D=P[_RegionAttachment$2.OX4],U=P[_RegionAttachment$2.OY4],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R}copy(){const _=new _RegionAttachment$2(this.name);return _.region=this.region,_.rendererObject=this.rendererObject,_.path=this.path,_.x=this.x,_.y=this.y,_.scaleX=this.scaleX,_.scaleY=this.scaleY,_.rotation=this.rotation,_.width=this.width,_.height=this.height,Utils.arrayCopy(this.uvs,0,_.uvs,0,8),Utils.arrayCopy(this.offset,0,_.offset,0,8),_.color.setFromColor(this.color),_}};let RegionAttachment$2=_RegionAttachment$2;RegionAttachment$2.OX1=0;RegionAttachment$2.OY1=1;RegionAttachment$2.OX2=2;RegionAttachment$2.OY2=3;RegionAttachment$2.OX3=4;RegionAttachment$2.OY3=5;RegionAttachment$2.OX4=6;RegionAttachment$2.OY4=7;RegionAttachment$2.X1=0;RegionAttachment$2.Y1=1;RegionAttachment$2.C1R=2;RegionAttachment$2.C1G=3;RegionAttachment$2.C1B=4;RegionAttachment$2.C1A=5;RegionAttachment$2.U1=6;RegionAttachment$2.V1=7;RegionAttachment$2.X2=8;RegionAttachment$2.Y2=9;RegionAttachment$2.C2R=10;RegionAttachment$2.C2G=11;RegionAttachment$2.C2B=12;RegionAttachment$2.C2A=13;RegionAttachment$2.U2=14;RegionAttachment$2.V2=15;RegionAttachment$2.X3=16;RegionAttachment$2.Y3=17;RegionAttachment$2.C3R=18;RegionAttachment$2.C3G=19;RegionAttachment$2.C3B=20;RegionAttachment$2.C3A=21;RegionAttachment$2.U3=22;RegionAttachment$2.V3=23;RegionAttachment$2.X4=24;RegionAttachment$2.Y4=25;RegionAttachment$2.C4R=26;RegionAttachment$2.C4G=27;RegionAttachment$2.C4B=28;RegionAttachment$2.C4A=29;RegionAttachment$2.U4=30;RegionAttachment$2.V4=31;new PowOut(2);let Animation$2=class{constructor(_,T,E){if(_==null)throw new Error("name cannot be null.");if(T==null)throw new Error("timelines cannot be null.");this.name=_,this.timelines=T,this.timelineIds=[];for(let C=0;C<T.length;C++)this.timelineIds[T[C].getPropertyId()]=!0;this.duration=E}hasTimeline(_){return this.timelineIds[_]==!0}apply(_,T,E,C,P,I,F,R){if(_==null)throw new Error("skeleton cannot be null.");C&&this.duration!=0&&(E%=this.duration,T>0&&(T%=this.duration));const B=this.timelines;for(let O=0,V=B.length;O<V;O++)B[O].apply(_,T,E,P,I,F,R)}static binarySearch(_,T,E=1){let C=0,P=_.length/E-2;if(P==0)return E;let I=P>>>1;for(;;){if(_[(I+1)*E]<=T?C=I+1:P=I,C==P)return(C+1)*E;I=C+P>>>1}}static linearSearch(_,T,E){for(let C=0,P=_.length-E;C<=P;C+=E)if(_[C]>T)return C;return-1}};const _CurveTimeline$1=class{constructor(_){if(_<=0)throw new Error(`frameCount must be > 0: ${_}`);this.curves=Utils.newFloatArray((_-1)*_CurveTimeline$1.BEZIER_SIZE)}getFrameCount(){return this.curves.length/_CurveTimeline$1.BEZIER_SIZE+1}setLinear(_){this.curves[_*_CurveTimeline$1.BEZIER_SIZE]=_CurveTimeline$1.LINEAR}setStepped(_){this.curves[_*_CurveTimeline$1.BEZIER_SIZE]=_CurveTimeline$1.STEPPED}getCurveType(_){const T=_*_CurveTimeline$1.BEZIER_SIZE;if(T==this.curves.length)return _CurveTimeline$1.LINEAR;const E=this.curves[T];return E==_CurveTimeline$1.LINEAR?_CurveTimeline$1.LINEAR:E==_CurveTimeline$1.STEPPED?_CurveTimeline$1.STEPPED:_CurveTimeline$1.BEZIER}setCurve(_,T,E,C,P){const I=(-T*2+C)*.03,F=(-E*2+P)*.03,R=((T-C)*3+1)*.006,B=((E-P)*3+1)*.006;let O=I*2+R,V=F*2+B,L=T*.3+I+R*.16666667,D=E*.3+F+B*.16666667,U=_*_CurveTimeline$1.BEZIER_SIZE;const G=this.curves;G[U++]=_CurveTimeline$1.BEZIER;let X=L,z=D;for(let Y=U+_CurveTimeline$1.BEZIER_SIZE-1;U<Y;U+=2)G[U]=X,G[U+1]=z,L+=O,D+=V,O+=R,V+=B,X+=L,z+=D}getCurvePercent(_,T){T=MathUtils.clamp(T,0,1);const E=this.curves;let C=_*_CurveTimeline$1.BEZIER_SIZE;const P=E[C];if(P==_CurveTimeline$1.LINEAR)return T;if(P==_CurveTimeline$1.STEPPED)return 0;C++;let I=0;for(let R=C,B=C+_CurveTimeline$1.BEZIER_SIZE-1;C<B;C+=2)if(I=E[C],I>=T){let O,V;return C==R?(O=0,V=0):(O=E[C-2],V=E[C-1]),V+(E[C+1]-V)*(T-O)/(I-O)}const F=E[C-1];return F+(1-F)*(T-I)/(1-I)}};let CurveTimeline$2=_CurveTimeline$1;CurveTimeline$2.LINEAR=0;CurveTimeline$2.STEPPED=1;CurveTimeline$2.BEZIER=2;CurveTimeline$2.BEZIER_SIZE=10*2-1;const _RotateTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(_,T,E){_<<=1,this.frames[_]=T,this.frames[_+_RotateTimeline$1.ROTATION]=E}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.bones[this.boneIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.rotation=B.data.rotation;return;case MixBlend.first:const G=B.data.rotation-B.rotation;B.rotation+=(G-(16384-(16384.499999999996-G/360|0))*360)*P}return}if(E>=R[R.length-_RotateTimeline$1.ENTRIES]){let G=R[R.length+_RotateTimeline$1.PREV_ROTATION];switch(I){case MixBlend.setup:B.rotation=B.data.rotation+G*P;break;case MixBlend.first:case MixBlend.replace:G+=B.data.rotation-B.rotation,G-=(16384-(16384.499999999996-G/360|0))*360;case MixBlend.add:B.rotation+=G*P}return}const O=Animation$2.binarySearch(R,E,_RotateTimeline$1.ENTRIES),V=R[O+_RotateTimeline$1.PREV_ROTATION],L=R[O],D=this.getCurvePercent((O>>1)-1,1-(E-L)/(R[O+_RotateTimeline$1.PREV_TIME]-L));let U=R[O+_RotateTimeline$1.ROTATION]-V;switch(U=V+(U-(16384-(16384.499999999996-U/360|0))*360)*D,I){case MixBlend.setup:B.rotation=B.data.rotation+(U-(16384-(16384.499999999996-U/360|0))*360)*P;break;case MixBlend.first:case MixBlend.replace:U+=B.data.rotation-B.rotation;case MixBlend.add:B.rotation+=(U-(16384-(16384.499999999996-U/360|0))*360)*P}}};let RotateTimeline$2=_RotateTimeline$1;RotateTimeline$2.ENTRIES=2;RotateTimeline$2.PREV_TIME=-2;RotateTimeline$2.PREV_ROTATION=-1;RotateTimeline$2.ROTATION=1;const _TranslateTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_TranslateTimeline$1.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(_,T,E,C){_*=_TranslateTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_TranslateTimeline$1.X]=E,this.frames[_+_TranslateTimeline$1.Y]=C}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.bones[this.boneIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.x=B.data.x,B.y=B.data.y;return;case MixBlend.first:B.x+=(B.data.x-B.x)*P,B.y+=(B.data.y-B.y)*P}return}let O=0,V=0;if(E>=R[R.length-_TranslateTimeline$1.ENTRIES])O=R[R.length+_TranslateTimeline$1.PREV_X],V=R[R.length+_TranslateTimeline$1.PREV_Y];else{const L=Animation$2.binarySearch(R,E,_TranslateTimeline$1.ENTRIES);O=R[L+_TranslateTimeline$1.PREV_X],V=R[L+_TranslateTimeline$1.PREV_Y];const D=R[L],U=this.getCurvePercent(L/_TranslateTimeline$1.ENTRIES-1,1-(E-D)/(R[L+_TranslateTimeline$1.PREV_TIME]-D));O+=(R[L+_TranslateTimeline$1.X]-O)*U,V+=(R[L+_TranslateTimeline$1.Y]-V)*U}switch(I){case MixBlend.setup:B.x=B.data.x+O*P,B.y=B.data.y+V*P;break;case MixBlend.first:case MixBlend.replace:B.x+=(B.data.x+O-B.x)*P,B.y+=(B.data.y+V-B.y)*P;break;case MixBlend.add:B.x+=O*P,B.y+=V*P}}};let TranslateTimeline$2=_TranslateTimeline$1;TranslateTimeline$2.ENTRIES=3;TranslateTimeline$2.PREV_TIME=-3;TranslateTimeline$2.PREV_X=-2;TranslateTimeline$2.PREV_Y=-1;TranslateTimeline$2.X=1;TranslateTimeline$2.Y=2;let ScaleTimeline$2=class it extends TranslateTimeline$2{constructor(_){super(_)}getPropertyId(){return(2<<24)+this.boneIndex}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.bones[this.boneIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.scaleX=B.data.scaleX,B.scaleY=B.data.scaleY;return;case MixBlend.first:B.scaleX+=(B.data.scaleX-B.scaleX)*P,B.scaleY+=(B.data.scaleY-B.scaleY)*P}return}let O=0,V=0;if(E>=R[R.length-it.ENTRIES])O=R[R.length+it.PREV_X]*B.data.scaleX,V=R[R.length+it.PREV_Y]*B.data.scaleY;else{const L=Animation$2.binarySearch(R,E,it.ENTRIES);O=R[L+it.PREV_X],V=R[L+it.PREV_Y];const D=R[L],U=this.getCurvePercent(L/it.ENTRIES-1,1-(E-D)/(R[L+it.PREV_TIME]-D));O=(O+(R[L+it.X]-O)*U)*B.data.scaleX,V=(V+(R[L+it.Y]-V)*U)*B.data.scaleY}if(P==1)I==MixBlend.add?(B.scaleX+=O-B.data.scaleX,B.scaleY+=V-B.data.scaleY):(B.scaleX=O,B.scaleY=V);else{let L=0,D=0;if(F==MixDirection.mixOut)switch(I){case MixBlend.setup:L=B.data.scaleX,D=B.data.scaleY,B.scaleX=L+(Math.abs(O)*MathUtils.signum(L)-L)*P,B.scaleY=D+(Math.abs(V)*MathUtils.signum(D)-D)*P;break;case MixBlend.first:case MixBlend.replace:L=B.scaleX,D=B.scaleY,B.scaleX=L+(Math.abs(O)*MathUtils.signum(L)-L)*P,B.scaleY=D+(Math.abs(V)*MathUtils.signum(D)-D)*P;break;case MixBlend.add:L=B.scaleX,D=B.scaleY,B.scaleX=L+(Math.abs(O)*MathUtils.signum(L)-B.data.scaleX)*P,B.scaleY=D+(Math.abs(V)*MathUtils.signum(D)-B.data.scaleY)*P}else switch(I){case MixBlend.setup:L=Math.abs(B.data.scaleX)*MathUtils.signum(O),D=Math.abs(B.data.scaleY)*MathUtils.signum(V),B.scaleX=L+(O-L)*P,B.scaleY=D+(V-D)*P;break;case MixBlend.first:case MixBlend.replace:L=Math.abs(B.scaleX)*MathUtils.signum(O),D=Math.abs(B.scaleY)*MathUtils.signum(V),B.scaleX=L+(O-L)*P,B.scaleY=D+(V-D)*P;break;case MixBlend.add:L=MathUtils.signum(O),D=MathUtils.signum(V),B.scaleX=Math.abs(B.scaleX)*L+(O-Math.abs(B.data.scaleX)*L)*P,B.scaleY=Math.abs(B.scaleY)*D+(V-Math.abs(B.data.scaleY)*D)*P}}}},ShearTimeline$2=class nt extends TranslateTimeline$2{constructor(_){super(_)}getPropertyId(){return(3<<24)+this.boneIndex}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.bones[this.boneIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.shearX=B.data.shearX,B.shearY=B.data.shearY;return;case MixBlend.first:B.shearX+=(B.data.shearX-B.shearX)*P,B.shearY+=(B.data.shearY-B.shearY)*P}return}let O=0,V=0;if(E>=R[R.length-nt.ENTRIES])O=R[R.length+nt.PREV_X],V=R[R.length+nt.PREV_Y];else{const L=Animation$2.binarySearch(R,E,nt.ENTRIES);O=R[L+nt.PREV_X],V=R[L+nt.PREV_Y];const D=R[L],U=this.getCurvePercent(L/nt.ENTRIES-1,1-(E-D)/(R[L+nt.PREV_TIME]-D));O=O+(R[L+nt.X]-O)*U,V=V+(R[L+nt.Y]-V)*U}switch(I){case MixBlend.setup:B.shearX=B.data.shearX+O*P,B.shearY=B.data.shearY+V*P;break;case MixBlend.first:case MixBlend.replace:B.shearX+=(B.data.shearX+O-B.shearX)*P,B.shearY+=(B.data.shearY+V-B.shearY)*P;break;case MixBlend.add:B.shearX+=O*P,B.shearY+=V*P}}};const _ColorTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_ColorTimeline$1.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(_,T,E,C,P,I){_*=_ColorTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_ColorTimeline$1.R]=E,this.frames[_+_ColorTimeline$1.G]=C,this.frames[_+_ColorTimeline$1.B]=P,this.frames[_+_ColorTimeline$1.A]=I}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.color.setFromColor(R.data.color);return;case MixBlend.first:const U=R.color,G=R.data.color;U.add((G.r-U.r)*P,(G.g-U.g)*P,(G.b-U.b)*P,(G.a-U.a)*P)}return}let O=0,V=0,L=0,D=0;if(E>=B[B.length-_ColorTimeline$1.ENTRIES]){const U=B.length;O=B[U+_ColorTimeline$1.PREV_R],V=B[U+_ColorTimeline$1.PREV_G],L=B[U+_ColorTimeline$1.PREV_B],D=B[U+_ColorTimeline$1.PREV_A]}else{const U=Animation$2.binarySearch(B,E,_ColorTimeline$1.ENTRIES);O=B[U+_ColorTimeline$1.PREV_R],V=B[U+_ColorTimeline$1.PREV_G],L=B[U+_ColorTimeline$1.PREV_B],D=B[U+_ColorTimeline$1.PREV_A];const G=B[U],X=this.getCurvePercent(U/_ColorTimeline$1.ENTRIES-1,1-(E-G)/(B[U+_ColorTimeline$1.PREV_TIME]-G));O+=(B[U+_ColorTimeline$1.R]-O)*X,V+=(B[U+_ColorTimeline$1.G]-V)*X,L+=(B[U+_ColorTimeline$1.B]-L)*X,D+=(B[U+_ColorTimeline$1.A]-D)*X}if(P==1)R.color.set(O,V,L,D);else{const U=R.color;I==MixBlend.setup&&U.setFromColor(R.data.color),U.add((O-U.r)*P,(V-U.g)*P,(L-U.b)*P,(D-U.a)*P)}}};let ColorTimeline$1=_ColorTimeline$1;ColorTimeline$1.ENTRIES=5;ColorTimeline$1.PREV_TIME=-5;ColorTimeline$1.PREV_R=-4;ColorTimeline$1.PREV_G=-3;ColorTimeline$1.PREV_B=-2;ColorTimeline$1.PREV_A=-1;ColorTimeline$1.R=1;ColorTimeline$1.G=2;ColorTimeline$1.B=3;ColorTimeline$1.A=4;const _TwoColorTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_TwoColorTimeline$1.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(_,T,E,C,P,I,F,R,B){_*=_TwoColorTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_TwoColorTimeline$1.R]=E,this.frames[_+_TwoColorTimeline$1.G]=C,this.frames[_+_TwoColorTimeline$1.B]=P,this.frames[_+_TwoColorTimeline$1.A]=I,this.frames[_+_TwoColorTimeline$1.R2]=F,this.frames[_+_TwoColorTimeline$1.G2]=R,this.frames[_+_TwoColorTimeline$1.B2]=B}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.color.setFromColor(R.data.color),R.darkColor.setFromColor(R.data.darkColor);return;case MixBlend.first:const z=R.color,Y=R.darkColor,W=R.data.color,q=R.data.darkColor;z.add((W.r-z.r)*P,(W.g-z.g)*P,(W.b-z.b)*P,(W.a-z.a)*P),Y.add((q.r-Y.r)*P,(q.g-Y.g)*P,(q.b-Y.b)*P,0)}return}let O=0,V=0,L=0,D=0,U=0,G=0,X=0;if(E>=B[B.length-_TwoColorTimeline$1.ENTRIES]){const z=B.length;O=B[z+_TwoColorTimeline$1.PREV_R],V=B[z+_TwoColorTimeline$1.PREV_G],L=B[z+_TwoColorTimeline$1.PREV_B],D=B[z+_TwoColorTimeline$1.PREV_A],U=B[z+_TwoColorTimeline$1.PREV_R2],G=B[z+_TwoColorTimeline$1.PREV_G2],X=B[z+_TwoColorTimeline$1.PREV_B2]}else{const z=Animation$2.binarySearch(B,E,_TwoColorTimeline$1.ENTRIES);O=B[z+_TwoColorTimeline$1.PREV_R],V=B[z+_TwoColorTimeline$1.PREV_G],L=B[z+_TwoColorTimeline$1.PREV_B],D=B[z+_TwoColorTimeline$1.PREV_A],U=B[z+_TwoColorTimeline$1.PREV_R2],G=B[z+_TwoColorTimeline$1.PREV_G2],X=B[z+_TwoColorTimeline$1.PREV_B2];const Y=B[z],W=this.getCurvePercent(z/_TwoColorTimeline$1.ENTRIES-1,1-(E-Y)/(B[z+_TwoColorTimeline$1.PREV_TIME]-Y));O+=(B[z+_TwoColorTimeline$1.R]-O)*W,V+=(B[z+_TwoColorTimeline$1.G]-V)*W,L+=(B[z+_TwoColorTimeline$1.B]-L)*W,D+=(B[z+_TwoColorTimeline$1.A]-D)*W,U+=(B[z+_TwoColorTimeline$1.R2]-U)*W,G+=(B[z+_TwoColorTimeline$1.G2]-G)*W,X+=(B[z+_TwoColorTimeline$1.B2]-X)*W}if(P==1)R.color.set(O,V,L,D),R.darkColor.set(U,G,X,1);else{const z=R.color,Y=R.darkColor;I==MixBlend.setup&&(z.setFromColor(R.data.color),Y.setFromColor(R.data.darkColor)),z.add((O-z.r)*P,(V-z.g)*P,(L-z.b)*P,(D-z.a)*P),Y.add((U-Y.r)*P,(G-Y.g)*P,(X-Y.b)*P,0)}}};let TwoColorTimeline$1=_TwoColorTimeline$1;TwoColorTimeline$1.ENTRIES=8;TwoColorTimeline$1.PREV_TIME=-8;TwoColorTimeline$1.PREV_R=-7;TwoColorTimeline$1.PREV_G=-6;TwoColorTimeline$1.PREV_B=-5;TwoColorTimeline$1.PREV_A=-4;TwoColorTimeline$1.PREV_R2=-3;TwoColorTimeline$1.PREV_G2=-2;TwoColorTimeline$1.PREV_B2=-1;TwoColorTimeline$1.R=1;TwoColorTimeline$1.G=2;TwoColorTimeline$1.B=3;TwoColorTimeline$1.A=4;TwoColorTimeline$1.R2=5;TwoColorTimeline$1.G2=6;TwoColorTimeline$1.B2=7;let AttachmentTimeline$2=class{constructor(_){this.frames=Utils.newFloatArray(_),this.attachmentNames=new Array(_)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(_,T,E){this.frames[_]=T,this.attachmentNames[_]=E}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;if(F==MixDirection.mixOut){I==MixBlend.setup&&this.setAttachment(_,R,R.data.attachmentName);return}const B=this.frames;if(E<B[0]){(I==MixBlend.setup||I==MixBlend.first)&&this.setAttachment(_,R,R.data.attachmentName);return}let O=0;E>=B[B.length-1]?O=B.length-1:O=Animation$2.binarySearch(B,E,1)-1;const V=this.attachmentNames[O];_.slots[this.slotIndex].setAttachment(V==null?null:_.getAttachment(this.slotIndex,V))}setAttachment(_,T,E){T.setAttachment(E==null?null:_.getAttachment(this.slotIndex,E))}},zeros$1=null,DeformTimeline$2=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_),this.frameVertices=new Array(_),zeros$1==null&&(zeros$1=Utils.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(_,T,E){this.frames[_]=T,this.frameVertices[_]=E}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=R.getAttachment();if(!(B instanceof VertexAttachment$2)||B.deformAttachment!=this.attachment)return;const O=R.deform;O.length==0&&(I=MixBlend.setup);const V=this.frameVertices,L=V[0].length,D=this.frames;if(E<D[0]){const q=B;switch(I){case MixBlend.setup:O.length=0;return;case MixBlend.first:if(P==1){O.length=0;break}const K=Utils.setArraySize(O,L);if(q.bones==null){const J=q.vertices;for(let Z=0;Z<L;Z++)K[Z]+=(J[Z]-K[Z])*P}else{P=1-P;for(let J=0;J<L;J++)K[J]*=P}}return}const U=Utils.setArraySize(O,L);if(E>=D[D.length-1]){const q=V[D.length-1];if(P==1)if(I==MixBlend.add){const K=B;if(K.bones==null){const J=K.vertices;for(let Z=0;Z<L;Z++)U[Z]+=q[Z]-J[Z]}else for(let J=0;J<L;J++)U[J]+=q[J]}else Utils.arrayCopy(q,0,U,0,L);else switch(I){case MixBlend.setup:{const J=B;if(J.bones==null){const Z=J.vertices;for(let se=0;se<L;se++){const ae=Z[se];U[se]=ae+(q[se]-ae)*P}}else for(let Z=0;Z<L;Z++)U[Z]=q[Z]*P;break}case MixBlend.first:case MixBlend.replace:for(let J=0;J<L;J++)U[J]+=(q[J]-U[J])*P;break;case MixBlend.add:const K=B;if(K.bones==null){const J=K.vertices;for(let Z=0;Z<L;Z++)U[Z]+=(q[Z]-J[Z])*P}else for(let J=0;J<L;J++)U[J]+=q[J]*P}return}const G=Animation$2.binarySearch(D,E),X=V[G-1],z=V[G],Y=D[G],W=this.getCurvePercent(G-1,1-(E-Y)/(D[G-1]-Y));if(P==1)if(I==MixBlend.add){const q=B;if(q.bones==null){const K=q.vertices;for(let J=0;J<L;J++){const Z=X[J];U[J]+=Z+(z[J]-Z)*W-K[J]}}else for(let K=0;K<L;K++){const J=X[K];U[K]+=J+(z[K]-J)*W}}else for(let q=0;q<L;q++){const K=X[q];U[q]=K+(z[q]-K)*W}else switch(I){case MixBlend.setup:{const K=B;if(K.bones==null){const J=K.vertices;for(let Z=0;Z<L;Z++){const se=X[Z],ae=J[Z];U[Z]=ae+(se+(z[Z]-se)*W-ae)*P}}else for(let J=0;J<L;J++){const Z=X[J];U[J]=(Z+(z[J]-Z)*W)*P}break}case MixBlend.first:case MixBlend.replace:for(let K=0;K<L;K++){const J=X[K];U[K]+=(J+(z[K]-J)*W-U[K])*P}break;case MixBlend.add:const q=B;if(q.bones==null){const K=q.vertices;for(let J=0;J<L;J++){const Z=X[J];U[J]+=(Z+(z[J]-Z)*W-K[J])*P}}else for(let K=0;K<L;K++){const J=X[K];U[K]+=(J+(z[K]-J)*W)*P}}}},EventTimeline$2=class{constructor(_){this.frames=Utils.newFloatArray(_),this.events=new Array(_)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(_,T){this.frames[_]=T.time,this.events[_]=T}apply(_,T,E,C,P,I,F){if(C==null)return;const R=this.frames,B=this.frames.length;if(T>E)this.apply(_,T,Number.MAX_VALUE,C,P,I,F),T=-1;else if(T>=R[B-1])return;if(E<R[0])return;let O=0;if(T<R[0])O=0;else{O=Animation$2.binarySearch(R,T);const V=R[O];for(;O>0&&R[O-1]==V;)O--}for(;O<B&&E>=R[O];O++)C.push(this.events[O])}},DrawOrderTimeline$2=class{constructor(_){this.frames=Utils.newFloatArray(_),this.drawOrders=new Array(_)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(_,T,E){this.frames[_]=T,this.drawOrders[_]=E}apply(_,T,E,C,P,I,F){const R=_.drawOrder,B=_.slots;if(F==MixDirection.mixOut&&I==MixBlend.setup){Utils.arrayCopy(_.slots,0,_.drawOrder,0,_.slots.length);return}const O=this.frames;if(E<O[0]){(I==MixBlend.setup||I==MixBlend.first)&&Utils.arrayCopy(_.slots,0,_.drawOrder,0,_.slots.length);return}let V=0;E>=O[O.length-1]?V=O.length-1:V=Animation$2.binarySearch(O,E)-1;const L=this.drawOrders[V];if(L==null)Utils.arrayCopy(B,0,R,0,B.length);else for(let D=0,U=L.length;D<U;D++)R[D]=B[L[D]]}};const _IkConstraintTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_IkConstraintTimeline$1.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(_,T,E,C,P,I,F){_*=_IkConstraintTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_IkConstraintTimeline$1.MIX]=E,this.frames[_+_IkConstraintTimeline$1.SOFTNESS]=C,this.frames[_+_IkConstraintTimeline$1.BEND_DIRECTION]=P,this.frames[_+_IkConstraintTimeline$1.COMPRESS]=I?1:0,this.frames[_+_IkConstraintTimeline$1.STRETCH]=F?1:0}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.ikConstraints[this.ikConstraintIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.mix=B.data.mix,B.softness=B.data.softness,B.bendDirection=B.data.bendDirection,B.compress=B.data.compress,B.stretch=B.data.stretch;return;case MixBlend.first:B.mix+=(B.data.mix-B.mix)*P,B.softness+=(B.data.softness-B.softness)*P,B.bendDirection=B.data.bendDirection,B.compress=B.data.compress,B.stretch=B.data.stretch}return}if(E>=R[R.length-_IkConstraintTimeline$1.ENTRIES]){I==MixBlend.setup?(B.mix=B.data.mix+(R[R.length+_IkConstraintTimeline$1.PREV_MIX]-B.data.mix)*P,B.softness=B.data.softness+(R[R.length+_IkConstraintTimeline$1.PREV_SOFTNESS]-B.data.softness)*P,F==MixDirection.mixOut?(B.bendDirection=B.data.bendDirection,B.compress=B.data.compress,B.stretch=B.data.stretch):(B.bendDirection=R[R.length+_IkConstraintTimeline$1.PREV_BEND_DIRECTION],B.compress=R[R.length+_IkConstraintTimeline$1.PREV_COMPRESS]!=0,B.stretch=R[R.length+_IkConstraintTimeline$1.PREV_STRETCH]!=0)):(B.mix+=(R[R.length+_IkConstraintTimeline$1.PREV_MIX]-B.mix)*P,B.softness+=(R[R.length+_IkConstraintTimeline$1.PREV_SOFTNESS]-B.softness)*P,F==MixDirection.mixIn&&(B.bendDirection=R[R.length+_IkConstraintTimeline$1.PREV_BEND_DIRECTION],B.compress=R[R.length+_IkConstraintTimeline$1.PREV_COMPRESS]!=0,B.stretch=R[R.length+_IkConstraintTimeline$1.PREV_STRETCH]!=0));return}const O=Animation$2.binarySearch(R,E,_IkConstraintTimeline$1.ENTRIES),V=R[O+_IkConstraintTimeline$1.PREV_MIX],L=R[O+_IkConstraintTimeline$1.PREV_SOFTNESS],D=R[O],U=this.getCurvePercent(O/_IkConstraintTimeline$1.ENTRIES-1,1-(E-D)/(R[O+_IkConstraintTimeline$1.PREV_TIME]-D));I==MixBlend.setup?(B.mix=B.data.mix+(V+(R[O+_IkConstraintTimeline$1.MIX]-V)*U-B.data.mix)*P,B.softness=B.data.softness+(L+(R[O+_IkConstraintTimeline$1.SOFTNESS]-L)*U-B.data.softness)*P,F==MixDirection.mixOut?(B.bendDirection=B.data.bendDirection,B.compress=B.data.compress,B.stretch=B.data.stretch):(B.bendDirection=R[O+_IkConstraintTimeline$1.PREV_BEND_DIRECTION],B.compress=R[O+_IkConstraintTimeline$1.PREV_COMPRESS]!=0,B.stretch=R[O+_IkConstraintTimeline$1.PREV_STRETCH]!=0)):(B.mix+=(V+(R[O+_IkConstraintTimeline$1.MIX]-V)*U-B.mix)*P,B.softness+=(L+(R[O+_IkConstraintTimeline$1.SOFTNESS]-L)*U-B.softness)*P,F==MixDirection.mixIn&&(B.bendDirection=R[O+_IkConstraintTimeline$1.PREV_BEND_DIRECTION],B.compress=R[O+_IkConstraintTimeline$1.PREV_COMPRESS]!=0,B.stretch=R[O+_IkConstraintTimeline$1.PREV_STRETCH]!=0))}};let IkConstraintTimeline$2=_IkConstraintTimeline$1;IkConstraintTimeline$2.ENTRIES=6;IkConstraintTimeline$2.PREV_TIME=-6;IkConstraintTimeline$2.PREV_MIX=-5;IkConstraintTimeline$2.PREV_SOFTNESS=-4;IkConstraintTimeline$2.PREV_BEND_DIRECTION=-3;IkConstraintTimeline$2.PREV_COMPRESS=-2;IkConstraintTimeline$2.PREV_STRETCH=-1;IkConstraintTimeline$2.MIX=1;IkConstraintTimeline$2.SOFTNESS=2;IkConstraintTimeline$2.BEND_DIRECTION=3;IkConstraintTimeline$2.COMPRESS=4;IkConstraintTimeline$2.STRETCH=5;const _TransformConstraintTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_TransformConstraintTimeline$1.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(_,T,E,C,P,I){_*=_TransformConstraintTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_TransformConstraintTimeline$1.ROTATE]=E,this.frames[_+_TransformConstraintTimeline$1.TRANSLATE]=C,this.frames[_+_TransformConstraintTimeline$1.SCALE]=P,this.frames[_+_TransformConstraintTimeline$1.SHEAR]=I}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.transformConstraints[this.transformConstraintIndex];if(!B.active)return;if(E<R[0]){const U=B.data;switch(I){case MixBlend.setup:B.rotateMix=U.rotateMix,B.translateMix=U.translateMix,B.scaleMix=U.scaleMix,B.shearMix=U.shearMix;return;case MixBlend.first:B.rotateMix+=(U.rotateMix-B.rotateMix)*P,B.translateMix+=(U.translateMix-B.translateMix)*P,B.scaleMix+=(U.scaleMix-B.scaleMix)*P,B.shearMix+=(U.shearMix-B.shearMix)*P}return}let O=0,V=0,L=0,D=0;if(E>=R[R.length-_TransformConstraintTimeline$1.ENTRIES]){const U=R.length;O=R[U+_TransformConstraintTimeline$1.PREV_ROTATE],V=R[U+_TransformConstraintTimeline$1.PREV_TRANSLATE],L=R[U+_TransformConstraintTimeline$1.PREV_SCALE],D=R[U+_TransformConstraintTimeline$1.PREV_SHEAR]}else{const U=Animation$2.binarySearch(R,E,_TransformConstraintTimeline$1.ENTRIES);O=R[U+_TransformConstraintTimeline$1.PREV_ROTATE],V=R[U+_TransformConstraintTimeline$1.PREV_TRANSLATE],L=R[U+_TransformConstraintTimeline$1.PREV_SCALE],D=R[U+_TransformConstraintTimeline$1.PREV_SHEAR];const G=R[U],X=this.getCurvePercent(U/_TransformConstraintTimeline$1.ENTRIES-1,1-(E-G)/(R[U+_TransformConstraintTimeline$1.PREV_TIME]-G));O+=(R[U+_TransformConstraintTimeline$1.ROTATE]-O)*X,V+=(R[U+_TransformConstraintTimeline$1.TRANSLATE]-V)*X,L+=(R[U+_TransformConstraintTimeline$1.SCALE]-L)*X,D+=(R[U+_TransformConstraintTimeline$1.SHEAR]-D)*X}if(I==MixBlend.setup){const U=B.data;B.rotateMix=U.rotateMix+(O-U.rotateMix)*P,B.translateMix=U.translateMix+(V-U.translateMix)*P,B.scaleMix=U.scaleMix+(L-U.scaleMix)*P,B.shearMix=U.shearMix+(D-U.shearMix)*P}else B.rotateMix+=(O-B.rotateMix)*P,B.translateMix+=(V-B.translateMix)*P,B.scaleMix+=(L-B.scaleMix)*P,B.shearMix+=(D-B.shearMix)*P}};let TransformConstraintTimeline$2=_TransformConstraintTimeline$1;TransformConstraintTimeline$2.ENTRIES=5;TransformConstraintTimeline$2.PREV_TIME=-5;TransformConstraintTimeline$2.PREV_ROTATE=-4;TransformConstraintTimeline$2.PREV_TRANSLATE=-3;TransformConstraintTimeline$2.PREV_SCALE=-2;TransformConstraintTimeline$2.PREV_SHEAR=-1;TransformConstraintTimeline$2.ROTATE=1;TransformConstraintTimeline$2.TRANSLATE=2;TransformConstraintTimeline$2.SCALE=3;TransformConstraintTimeline$2.SHEAR=4;const _PathConstraintPositionTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_PathConstraintPositionTimeline$1.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(_,T,E){_*=_PathConstraintPositionTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_PathConstraintPositionTimeline$1.VALUE]=E}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.pathConstraints[this.pathConstraintIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.position=B.data.position;return;case MixBlend.first:B.position+=(B.data.position-B.position)*P}return}let O=0;if(E>=R[R.length-_PathConstraintPositionTimeline$1.ENTRIES])O=R[R.length+_PathConstraintPositionTimeline$1.PREV_VALUE];else{const V=Animation$2.binarySearch(R,E,_PathConstraintPositionTimeline$1.ENTRIES);O=R[V+_PathConstraintPositionTimeline$1.PREV_VALUE];const L=R[V],D=this.getCurvePercent(V/_PathConstraintPositionTimeline$1.ENTRIES-1,1-(E-L)/(R[V+_PathConstraintPositionTimeline$1.PREV_TIME]-L));O+=(R[V+_PathConstraintPositionTimeline$1.VALUE]-O)*D}I==MixBlend.setup?B.position=B.data.position+(O-B.data.position)*P:B.position+=(O-B.position)*P}};let PathConstraintPositionTimeline$2=_PathConstraintPositionTimeline$1;PathConstraintPositionTimeline$2.ENTRIES=2;PathConstraintPositionTimeline$2.PREV_TIME=-2;PathConstraintPositionTimeline$2.PREV_VALUE=-1;PathConstraintPositionTimeline$2.VALUE=1;let PathConstraintSpacingTimeline$2=class ut extends PathConstraintPositionTimeline$2{constructor(_){super(_)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.pathConstraints[this.pathConstraintIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.spacing=B.data.spacing;return;case MixBlend.first:B.spacing+=(B.data.spacing-B.spacing)*P}return}let O=0;if(E>=R[R.length-ut.ENTRIES])O=R[R.length+ut.PREV_VALUE];else{const V=Animation$2.binarySearch(R,E,ut.ENTRIES);O=R[V+ut.PREV_VALUE];const L=R[V],D=this.getCurvePercent(V/ut.ENTRIES-1,1-(E-L)/(R[V+ut.PREV_TIME]-L));O+=(R[V+ut.VALUE]-O)*D}I==MixBlend.setup?B.spacing=B.data.spacing+(O-B.data.spacing)*P:B.spacing+=(O-B.spacing)*P}};const _PathConstraintMixTimeline$1=class extends CurveTimeline$2{constructor(_){super(_),this.frames=Utils.newFloatArray(_*_PathConstraintMixTimeline$1.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(_,T,E,C){_*=_PathConstraintMixTimeline$1.ENTRIES,this.frames[_]=T,this.frames[_+_PathConstraintMixTimeline$1.ROTATE]=E,this.frames[_+_PathConstraintMixTimeline$1.TRANSLATE]=C}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.pathConstraints[this.pathConstraintIndex];if(!B.active)return;if(E<R[0]){switch(I){case MixBlend.setup:B.rotateMix=B.data.rotateMix,B.translateMix=B.data.translateMix;return;case MixBlend.first:B.rotateMix+=(B.data.rotateMix-B.rotateMix)*P,B.translateMix+=(B.data.translateMix-B.translateMix)*P}return}let O=0,V=0;if(E>=R[R.length-_PathConstraintMixTimeline$1.ENTRIES])O=R[R.length+_PathConstraintMixTimeline$1.PREV_ROTATE],V=R[R.length+_PathConstraintMixTimeline$1.PREV_TRANSLATE];else{const L=Animation$2.binarySearch(R,E,_PathConstraintMixTimeline$1.ENTRIES);O=R[L+_PathConstraintMixTimeline$1.PREV_ROTATE],V=R[L+_PathConstraintMixTimeline$1.PREV_TRANSLATE];const D=R[L],U=this.getCurvePercent(L/_PathConstraintMixTimeline$1.ENTRIES-1,1-(E-D)/(R[L+_PathConstraintMixTimeline$1.PREV_TIME]-D));O+=(R[L+_PathConstraintMixTimeline$1.ROTATE]-O)*U,V+=(R[L+_PathConstraintMixTimeline$1.TRANSLATE]-V)*U}I==MixBlend.setup?(B.rotateMix=B.data.rotateMix+(O-B.data.rotateMix)*P,B.translateMix=B.data.translateMix+(V-B.data.translateMix)*P):(B.rotateMix+=(O-B.rotateMix)*P,B.translateMix+=(V-B.translateMix)*P)}};let PathConstraintMixTimeline$2=_PathConstraintMixTimeline$1;PathConstraintMixTimeline$2.ENTRIES=3;PathConstraintMixTimeline$2.PREV_TIME=-3;PathConstraintMixTimeline$2.PREV_ROTATE=-2;PathConstraintMixTimeline$2.PREV_TRANSLATE=-1;PathConstraintMixTimeline$2.ROTATE=1;PathConstraintMixTimeline$2.TRANSLATE=2;new Animation$2("<empty>",[],0);let AtlasAttachmentLoader$2=class{constructor(_){this.atlas=_}newRegionAttachment(_,T,E){const C=this.atlas.findRegion(E);if(C==null)throw new Error(`Region not found in atlas: ${E} (region attachment: ${T})`);const P=new RegionAttachment$2(T);return P.region=C,P}newMeshAttachment(_,T,E){const C=this.atlas.findRegion(E);if(C==null)throw new Error(`Region not found in atlas: ${E} (mesh attachment: ${T})`);const P=new MeshAttachment$2(T);return P.region=C,P}newBoundingBoxAttachment(_,T){return new BoundingBoxAttachment$2(T)}newPathAttachment(_,T){return new PathAttachment$2(T)}newPointAttachment(_,T){return new PointAttachment$2(T)}newClippingAttachment(_,T){return new ClippingAttachment$2(T)}},BoneData$2=class{constructor(_,T,E){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=TransformMode.Normal,this.skinRequired=!1,this.color=new Color,_<0)throw new Error("index must be >= 0.");if(T==null)throw new Error("name cannot be null.");this.index=_,this.name=T,this.parent=E}},ConstraintData$1=class{constructor(_,T,E){this.name=_,this.order=T,this.skinRequired=E}},Event$3=class{constructor(_,T){if(T==null)throw new Error("data cannot be null.");this.time=_,this.data=T}},EventData$2=class{constructor(_){this.name=_}},IkConstraintData$2=class extends ConstraintData$1{constructor(_){super(_,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},PathConstraintData$2=class extends ConstraintData$1{constructor(_){super(_,0,!1),this.bones=new Array}};var SpacingMode$2=(A=>(A[A.Length=0]="Length",A[A.Fixed=1]="Fixed",A[A.Percent=2]="Percent",A))(SpacingMode$2||{});let SkeletonData$2=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(_){if(_==null)throw new Error("boneName cannot be null.");const T=this.bones;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findBoneIndex(_){if(_==null)throw new Error("boneName cannot be null.");const T=this.bones;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}findSlot(_){if(_==null)throw new Error("slotName cannot be null.");const T=this.slots;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findSlotIndex(_){if(_==null)throw new Error("slotName cannot be null.");const T=this.slots;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}findSkin(_){if(_==null)throw new Error("skinName cannot be null.");const T=this.skins;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findEvent(_){if(_==null)throw new Error("eventDataName cannot be null.");const T=this.events;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findAnimation(_){if(_==null)throw new Error("animationName cannot be null.");const T=this.animations;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findIkConstraint(_){if(_==null)throw new Error("constraintName cannot be null.");const T=this.ikConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findTransformConstraint(_){if(_==null)throw new Error("constraintName cannot be null.");const T=this.transformConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findPathConstraint(_){if(_==null)throw new Error("constraintName cannot be null.");const T=this.pathConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findPathConstraintIndex(_){if(_==null)throw new Error("pathConstraintName cannot be null.");const T=this.pathConstraints;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}},SlotData$2=class{constructor(_,T,E){if(this.color=new Color(1,1,1,1),_<0)throw new Error("index must be >= 0.");if(T==null)throw new Error("name cannot be null.");if(E==null)throw new Error("boneData cannot be null.");this.index=_,this.name=T,this.boneData=E}},TransformConstraintData$2=class extends ConstraintData$1{constructor(_){super(_,0,!1),this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},SkinEntry$1=class{constructor(_,T,E){this.slotIndex=_,this.name=T,this.attachment=E}},Skin$2=class{constructor(_){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,_==null)throw new Error("name cannot be null.");this.name=_}setAttachment(_,T,E){if(E==null)throw new Error("attachment cannot be null.");const C=this.attachments;_>=C.length&&(C.length=_+1),C[_]||(C[_]={}),C[_][T]=E}addSkin(_){for(let E=0;E<_.bones.length;E++){const C=_.bones[E];let P=!1;for(let I=0;I<this.bones.length;I++)if(this.bones[I]==C){P=!0;break}P||this.bones.push(C)}for(let E=0;E<_.constraints.length;E++){const C=_.constraints[E];let P=!1;for(let I=0;I<this.constraints.length;I++)if(this.constraints[I]==C){P=!0;break}P||this.constraints.push(C)}const T=_.getAttachments();for(let E=0;E<T.length;E++){const C=T[E];this.setAttachment(C.slotIndex,C.name,C.attachment)}}copySkin(_){for(let E=0;E<_.bones.length;E++){const C=_.bones[E];let P=!1;for(let I=0;I<this.bones.length;I++)if(this.bones[I]==C){P=!0;break}P||this.bones.push(C)}for(let E=0;E<_.constraints.length;E++){const C=_.constraints[E];let P=!1;for(let I=0;I<this.constraints.length;I++)if(this.constraints[I]==C){P=!0;break}P||this.constraints.push(C)}const T=_.getAttachments();for(let E=0;E<T.length;E++){const C=T[E];C.attachment!=null&&(C.attachment instanceof MeshAttachment$2?(C.attachment=C.attachment.newLinkedMesh(),this.setAttachment(C.slotIndex,C.name,C.attachment)):(C.attachment=C.attachment.copy(),this.setAttachment(C.slotIndex,C.name,C.attachment)))}}getAttachment(_,T){const E=this.attachments[_];return E?E[T]:null}removeAttachment(_,T){const E=this.attachments[_];E&&(E[T]=null)}getAttachments(){const _=new Array;for(let T=0;T<this.attachments.length;T++){const E=this.attachments[T];if(E)for(const C in E){const P=E[C];P&&_.push(new SkinEntry$1(T,C,P))}}return _}getAttachmentsForSlot(_,T){const E=this.attachments[_];if(E)for(const C in E){const P=E[C];P&&T.push(new SkinEntry$1(_,C,P))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(_,T){let E=0;for(let C=0;C<_.slots.length;C++){const P=_.slots[C],I=P.getAttachment();if(I&&E<T.attachments.length){const F=T.attachments[E];for(const R in F){const B=F[R];if(I==B){const O=this.getAttachment(E,R);O!=null&&P.setAttachment(O);break}}}E++}}};const _SkeletonBinary=class{constructor(A){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=A}readSkeletonData(A){const _=this.scale,T=new SkeletonData$2;T.name="";const E=new BinaryInput(A);T.hash=E.readString(),T.version=E.readString(),T.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),T.x=E.readFloat(),T.y=E.readFloat(),T.width=E.readFloat(),T.height=E.readFloat();const C=E.readBoolean();C&&(T.fps=E.readFloat(),T.imagesPath=E.readString(),T.audioPath=E.readString());let P=0;P=E.readInt(!0);for(let F=0;F<P;F++)E.strings.push(E.readString());P=E.readInt(!0);for(let F=0;F<P;F++){const R=E.readString(),B=F==0?null:T.bones[E.readInt(!0)],O=new BoneData$2(F,R,B);O.rotation=E.readFloat(),O.x=E.readFloat()*_,O.y=E.readFloat()*_,O.scaleX=E.readFloat(),O.scaleY=E.readFloat(),O.shearX=E.readFloat(),O.shearY=E.readFloat(),O.length=E.readFloat()*_,O.transformMode=_SkeletonBinary.TransformModeValues[E.readInt(!0)],O.skinRequired=E.readBoolean(),C&&Color.rgba8888ToColor(O.color,E.readInt32()),T.bones.push(O)}P=E.readInt(!0);for(let F=0;F<P;F++){const R=E.readString(),B=T.bones[E.readInt(!0)],O=new SlotData$2(F,R,B);Color.rgba8888ToColor(O.color,E.readInt32());const V=E.readInt32();V!=-1&&Color.rgb888ToColor(O.darkColor=new Color,V),O.attachmentName=E.readStringRef(),O.blendMode=_SkeletonBinary.BlendModeValues[E.readInt(!0)],T.slots.push(O)}P=E.readInt(!0);for(let F=0,R;F<P;F++){const B=new IkConstraintData$2(E.readString());B.order=E.readInt(!0),B.skinRequired=E.readBoolean(),R=E.readInt(!0);for(let O=0;O<R;O++)B.bones.push(T.bones[E.readInt(!0)]);B.target=T.bones[E.readInt(!0)],B.mix=E.readFloat(),B.softness=E.readFloat()*_,B.bendDirection=E.readByte(),B.compress=E.readBoolean(),B.stretch=E.readBoolean(),B.uniform=E.readBoolean(),T.ikConstraints.push(B)}P=E.readInt(!0);for(let F=0,R;F<P;F++){const B=new TransformConstraintData$2(E.readString());B.order=E.readInt(!0),B.skinRequired=E.readBoolean(),R=E.readInt(!0);for(let O=0;O<R;O++)B.bones.push(T.bones[E.readInt(!0)]);B.target=T.bones[E.readInt(!0)],B.local=E.readBoolean(),B.relative=E.readBoolean(),B.offsetRotation=E.readFloat(),B.offsetX=E.readFloat()*_,B.offsetY=E.readFloat()*_,B.offsetScaleX=E.readFloat(),B.offsetScaleY=E.readFloat(),B.offsetShearY=E.readFloat(),B.rotateMix=E.readFloat(),B.translateMix=E.readFloat(),B.scaleMix=E.readFloat(),B.shearMix=E.readFloat(),T.transformConstraints.push(B)}P=E.readInt(!0);for(let F=0,R;F<P;F++){const B=new PathConstraintData$2(E.readString());B.order=E.readInt(!0),B.skinRequired=E.readBoolean(),R=E.readInt(!0);for(let O=0;O<R;O++)B.bones.push(T.bones[E.readInt(!0)]);B.target=T.slots[E.readInt(!0)],B.positionMode=_SkeletonBinary.PositionModeValues[E.readInt(!0)],B.spacingMode=_SkeletonBinary.SpacingModeValues[E.readInt(!0)],B.rotateMode=_SkeletonBinary.RotateModeValues[E.readInt(!0)],B.offsetRotation=E.readFloat(),B.position=E.readFloat(),B.positionMode==PositionMode.Fixed&&(B.position*=_),B.spacing=E.readFloat(),(B.spacingMode==SpacingMode$2.Length||B.spacingMode==SpacingMode$2.Fixed)&&(B.spacing*=_),B.rotateMix=E.readFloat(),B.translateMix=E.readFloat(),T.pathConstraints.push(B)}const I=this.readSkin(E,T,!0,C);I!=null&&(T.defaultSkin=I,T.skins.push(I));{let F=T.skins.length;for(Utils.setArraySize(T.skins,P=F+E.readInt(!0));F<P;F++)T.skins[F]=this.readSkin(E,T,!1,C)}P=this.linkedMeshes.length;for(let F=0;F<P;F++){const R=this.linkedMeshes[F],B=R.skin==null?T.defaultSkin:T.findSkin(R.skin);if(B==null)throw new Error(`Skin not found: ${R.skin}`);const O=B.getAttachment(R.slotIndex,R.parent);if(O==null)throw new Error(`Parent mesh not found: ${R.parent}`);R.mesh.deformAttachment=R.inheritDeform?O:R.mesh,R.mesh.setParentMesh(O)}this.linkedMeshes.length=0,P=E.readInt(!0);for(let F=0;F<P;F++){const R=new EventData$2(E.readStringRef());R.intValue=E.readInt(!1),R.floatValue=E.readFloat(),R.stringValue=E.readString(),R.audioPath=E.readString(),R.audioPath!=null&&(R.volume=E.readFloat(),R.balance=E.readFloat()),T.events.push(R)}P=E.readInt(!0);for(let F=0;F<P;F++)T.animations.push(this.readAnimation(E,E.readString(),T));return T}readSkin(A,_,T,E){let C=null,P=0;if(T){if(P=A.readInt(!0),P==0)return null;C=new Skin$2("default")}else{C=new Skin$2(A.readStringRef()),C.bones.length=A.readInt(!0);for(let I=0,F=C.bones.length;I<F;I++)C.bones[I]=_.bones[A.readInt(!0)];for(let I=0,F=A.readInt(!0);I<F;I++)C.constraints.push(_.ikConstraints[A.readInt(!0)]);for(let I=0,F=A.readInt(!0);I<F;I++)C.constraints.push(_.transformConstraints[A.readInt(!0)]);for(let I=0,F=A.readInt(!0);I<F;I++)C.constraints.push(_.pathConstraints[A.readInt(!0)]);P=A.readInt(!0)}for(let I=0;I<P;I++){const F=A.readInt(!0);for(let R=0,B=A.readInt(!0);R<B;R++){const O=A.readStringRef(),V=this.readAttachment(A,_,C,F,O,E);V!=null&&C.setAttachment(F,O,V)}}return C}readAttachment(A,_,T,E,C,P){const I=this.scale;let F=A.readStringRef();F==null&&(F=C);const R=A.readByte();switch(_SkeletonBinary.AttachmentTypeValues[R]){case AttachmentType.Region:{let O=A.readStringRef();const V=A.readFloat(),L=A.readFloat(),D=A.readFloat(),U=A.readFloat(),G=A.readFloat(),X=A.readFloat(),z=A.readFloat(),Y=A.readInt32();O==null&&(O=F);const W=this.attachmentLoader.newRegionAttachment(T,F,O);return W==null?null:(W.path=O,W.x=L*I,W.y=D*I,W.scaleX=U,W.scaleY=G,W.rotation=V,W.width=X*I,W.height=z*I,Color.rgba8888ToColor(W.color,Y),W)}case AttachmentType.BoundingBox:{const O=A.readInt(!0),V=this.readVertices(A,O),L=P?A.readInt32():0,D=this.attachmentLoader.newBoundingBoxAttachment(T,F);return D==null?null:(D.worldVerticesLength=O<<1,D.vertices=V.vertices,D.bones=V.bones,P&&Color.rgba8888ToColor(D.color,L),D)}case AttachmentType.Mesh:{let O=A.readStringRef();const V=A.readInt32(),L=A.readInt(!0),D=this.readFloatArray(A,L<<1,1),U=this.readShortArray(A),G=this.readVertices(A,L),X=A.readInt(!0);let z=null,Y=0,W=0;P&&(z=this.readShortArray(A),Y=A.readFloat(),W=A.readFloat()),O==null&&(O=F);const q=this.attachmentLoader.newMeshAttachment(T,F,O);return q==null?null:(q.path=O,Color.rgba8888ToColor(q.color,V),q.bones=G.bones,q.vertices=G.vertices,q.worldVerticesLength=L<<1,q.triangles=U,q.regionUVs=new Float32Array(D),q.hullLength=X<<1,P&&(q.edges=z,q.width=Y*I,q.height=W*I),q)}case AttachmentType.LinkedMesh:{let O=A.readStringRef();const V=A.readInt32(),L=A.readStringRef(),D=A.readStringRef(),U=A.readBoolean();let G=0,X=0;P&&(G=A.readFloat(),X=A.readFloat()),O==null&&(O=F);const z=this.attachmentLoader.newMeshAttachment(T,F,O);return z==null?null:(z.path=O,Color.rgba8888ToColor(z.color,V),P&&(z.width=G*I,z.height=X*I),this.linkedMeshes.push(new LinkedMesh$4(z,L,E,D,U)),z)}case AttachmentType.Path:{const O=A.readBoolean(),V=A.readBoolean(),L=A.readInt(!0),D=this.readVertices(A,L),U=Utils.newArray(L/3,0);for(let z=0,Y=U.length;z<Y;z++)U[z]=A.readFloat()*I;const G=P?A.readInt32():0,X=this.attachmentLoader.newPathAttachment(T,F);return X==null?null:(X.closed=O,X.constantSpeed=V,X.worldVerticesLength=L<<1,X.vertices=D.vertices,X.bones=D.bones,X.lengths=U,P&&Color.rgba8888ToColor(X.color,G),X)}case AttachmentType.Point:{const O=A.readFloat(),V=A.readFloat(),L=A.readFloat(),D=P?A.readInt32():0,U=this.attachmentLoader.newPointAttachment(T,F);return U==null?null:(U.x=V*I,U.y=L*I,U.rotation=O,P&&Color.rgba8888ToColor(U.color,D),U)}case AttachmentType.Clipping:{const O=A.readInt(!0),V=A.readInt(!0),L=this.readVertices(A,V),D=P?A.readInt32():0,U=this.attachmentLoader.newClippingAttachment(T,F);return U==null?null:(U.endSlot=_.slots[O],U.worldVerticesLength=V<<1,U.vertices=L.vertices,U.bones=L.bones,P&&Color.rgba8888ToColor(U.color,D),U)}}return null}readVertices(A,_){const T=_<<1,E=new Vertices$1,C=this.scale;if(!A.readBoolean())return E.vertices=this.readFloatArray(A,T,C),E;const P=new Array,I=new Array;for(let F=0;F<_;F++){const R=A.readInt(!0);I.push(R);for(let B=0;B<R;B++)I.push(A.readInt(!0)),P.push(A.readFloat()*C),P.push(A.readFloat()*C),P.push(A.readFloat())}return E.vertices=Utils.toFloatArray(P),E.bones=I,E}readFloatArray(A,_,T){const E=new Array(_);if(T==1)for(let C=0;C<_;C++)E[C]=A.readFloat();else for(let C=0;C<_;C++)E[C]=A.readFloat()*T;return E}readShortArray(A){const _=A.readInt(!0),T=new Array(_);for(let E=0;E<_;E++)T[E]=A.readShort();return T}readAnimation(A,_,T){const E=new Array,C=this.scale;let P=0;const I=new Color,F=new Color;for(let O=0,V=A.readInt(!0);O<V;O++){const L=A.readInt(!0);for(let D=0,U=A.readInt(!0);D<U;D++){const G=A.readByte(),X=A.readInt(!0);switch(G){case _SkeletonBinary.SLOT_ATTACHMENT:{const z=new AttachmentTimeline$2(X);z.slotIndex=L;for(let Y=0;Y<X;Y++)z.setFrame(Y,A.readFloat(),A.readStringRef());E.push(z),P=Math.max(P,z.frames[X-1]);break}case _SkeletonBinary.SLOT_COLOR:{const z=new ColorTimeline$1(X);z.slotIndex=L;for(let Y=0;Y<X;Y++){const W=A.readFloat();Color.rgba8888ToColor(I,A.readInt32()),z.setFrame(Y,W,I.r,I.g,I.b,I.a),Y<X-1&&this.readCurve(A,Y,z)}E.push(z),P=Math.max(P,z.frames[(X-1)*ColorTimeline$1.ENTRIES]);break}case _SkeletonBinary.SLOT_TWO_COLOR:{const z=new TwoColorTimeline$1(X);z.slotIndex=L;for(let Y=0;Y<X;Y++){const W=A.readFloat();Color.rgba8888ToColor(I,A.readInt32()),Color.rgb888ToColor(F,A.readInt32()),z.setFrame(Y,W,I.r,I.g,I.b,I.a,F.r,F.g,F.b),Y<X-1&&this.readCurve(A,Y,z)}E.push(z),P=Math.max(P,z.frames[(X-1)*TwoColorTimeline$1.ENTRIES]);break}}}}for(let O=0,V=A.readInt(!0);O<V;O++){const L=A.readInt(!0);for(let D=0,U=A.readInt(!0);D<U;D++){const G=A.readByte(),X=A.readInt(!0);switch(G){case _SkeletonBinary.BONE_ROTATE:{const z=new RotateTimeline$2(X);z.boneIndex=L;for(let Y=0;Y<X;Y++)z.setFrame(Y,A.readFloat(),A.readFloat()),Y<X-1&&this.readCurve(A,Y,z);E.push(z),P=Math.max(P,z.frames[(X-1)*RotateTimeline$2.ENTRIES]);break}case _SkeletonBinary.BONE_TRANSLATE:case _SkeletonBinary.BONE_SCALE:case _SkeletonBinary.BONE_SHEAR:{let z,Y=1;G==_SkeletonBinary.BONE_SCALE?z=new ScaleTimeline$2(X):G==_SkeletonBinary.BONE_SHEAR?z=new ShearTimeline$2(X):(z=new TranslateTimeline$2(X),Y=C),z.boneIndex=L;for(let W=0;W<X;W++)z.setFrame(W,A.readFloat(),A.readFloat()*Y,A.readFloat()*Y),W<X-1&&this.readCurve(A,W,z);E.push(z),P=Math.max(P,z.frames[(X-1)*TranslateTimeline$2.ENTRIES]);break}}}}for(let O=0,V=A.readInt(!0);O<V;O++){const L=A.readInt(!0),D=A.readInt(!0),U=new IkConstraintTimeline$2(D);U.ikConstraintIndex=L;for(let G=0;G<D;G++)U.setFrame(G,A.readFloat(),A.readFloat(),A.readFloat()*C,A.readByte(),A.readBoolean(),A.readBoolean()),G<D-1&&this.readCurve(A,G,U);E.push(U),P=Math.max(P,U.frames[(D-1)*IkConstraintTimeline$2.ENTRIES])}for(let O=0,V=A.readInt(!0);O<V;O++){const L=A.readInt(!0),D=A.readInt(!0),U=new TransformConstraintTimeline$2(D);U.transformConstraintIndex=L;for(let G=0;G<D;G++)U.setFrame(G,A.readFloat(),A.readFloat(),A.readFloat(),A.readFloat(),A.readFloat()),G<D-1&&this.readCurve(A,G,U);E.push(U),P=Math.max(P,U.frames[(D-1)*TransformConstraintTimeline$2.ENTRIES])}for(let O=0,V=A.readInt(!0);O<V;O++){const L=A.readInt(!0),D=T.pathConstraints[L];for(let U=0,G=A.readInt(!0);U<G;U++){const X=A.readByte(),z=A.readInt(!0);switch(X){case _SkeletonBinary.PATH_POSITION:case _SkeletonBinary.PATH_SPACING:{let Y,W=1;X==_SkeletonBinary.PATH_SPACING?(Y=new PathConstraintSpacingTimeline$2(z),(D.spacingMode==SpacingMode$2.Length||D.spacingMode==SpacingMode$2.Fixed)&&(W=C)):(Y=new PathConstraintPositionTimeline$2(z),D.positionMode==PositionMode.Fixed&&(W=C)),Y.pathConstraintIndex=L;for(let q=0;q<z;q++)Y.setFrame(q,A.readFloat(),A.readFloat()*W),q<z-1&&this.readCurve(A,q,Y);E.push(Y),P=Math.max(P,Y.frames[(z-1)*PathConstraintPositionTimeline$2.ENTRIES]);break}case _SkeletonBinary.PATH_MIX:{const Y=new PathConstraintMixTimeline$2(z);Y.pathConstraintIndex=L;for(let W=0;W<z;W++)Y.setFrame(W,A.readFloat(),A.readFloat(),A.readFloat()),W<z-1&&this.readCurve(A,W,Y);E.push(Y),P=Math.max(P,Y.frames[(z-1)*PathConstraintMixTimeline$2.ENTRIES]);break}}}}for(let O=0,V=A.readInt(!0);O<V;O++){const L=T.skins[A.readInt(!0)];for(let D=0,U=A.readInt(!0);D<U;D++){const G=A.readInt(!0);for(let X=0,z=A.readInt(!0);X<z;X++){const Y=L.getAttachment(G,A.readStringRef()),W=Y.bones!=null,q=Y.vertices,K=W?q.length/3*2:q.length,J=A.readInt(!0),Z=new DeformTimeline$2(J);Z.slotIndex=G,Z.attachment=Y;for(let se=0;se<J;se++){const ae=A.readFloat();let ue,ce=A.readInt(!0);if(ce==0)ue=W?Utils.newFloatArray(K):q;else{ue=Utils.newFloatArray(K);const he=A.readInt(!0);if(ce+=he,C==1)for(let pe=he;pe<ce;pe++)ue[pe]=A.readFloat();else for(let pe=he;pe<ce;pe++)ue[pe]=A.readFloat()*C;if(!W)for(let pe=0,ye=ue.length;pe<ye;pe++)ue[pe]+=q[pe]}Z.setFrame(se,ae,ue),se<J-1&&this.readCurve(A,se,Z)}E.push(Z),P=Math.max(P,Z.frames[J-1])}}}const R=A.readInt(!0);if(R>0){const O=new DrawOrderTimeline$2(R),V=T.slots.length;for(let L=0;L<R;L++){const D=A.readFloat(),U=A.readInt(!0),G=Utils.newArray(V,0);for(let W=V-1;W>=0;W--)G[W]=-1;const X=Utils.newArray(V-U,0);let z=0,Y=0;for(let W=0;W<U;W++){const q=A.readInt(!0);for(;z!=q;)X[Y++]=z++;G[z+A.readInt(!0)]=z++}for(;z<V;)X[Y++]=z++;for(let W=V-1;W>=0;W--)G[W]==-1&&(G[W]=X[--Y]);O.setFrame(L,D,G)}E.push(O),P=Math.max(P,O.frames[R-1])}const B=A.readInt(!0);if(B>0){const O=new EventTimeline$2(B);for(let V=0;V<B;V++){const L=A.readFloat(),D=T.events[A.readInt(!0)],U=new Event$3(L,D);U.intValue=A.readInt(!1),U.floatValue=A.readFloat(),U.stringValue=A.readBoolean()?A.readString():D.stringValue,U.data.audioPath!=null&&(U.volume=A.readFloat(),U.balance=A.readFloat()),O.setFrame(V,U)}E.push(O),P=Math.max(P,O.frames[B-1])}return new Animation$2(_,E,P)}readCurve(A,_,T){switch(A.readByte()){case _SkeletonBinary.CURVE_STEPPED:T.setStepped(_);break;case _SkeletonBinary.CURVE_BEZIER:this.setCurve(T,_,A.readFloat(),A.readFloat(),A.readFloat(),A.readFloat());break}}setCurve(A,_,T,E,C,P){A.setCurve(_,T,E,C,P)}};let SkeletonBinary$1=_SkeletonBinary;SkeletonBinary$1.AttachmentTypeValues=[0,1,2,3,4,5,6];SkeletonBinary$1.TransformModeValues=[TransformMode.Normal,TransformMode.OnlyTranslation,TransformMode.NoRotationOrReflection,TransformMode.NoScale,TransformMode.NoScaleOrReflection];SkeletonBinary$1.PositionModeValues=[PositionMode.Fixed,PositionMode.Percent];SkeletonBinary$1.SpacingModeValues=[SpacingMode$2.Length,SpacingMode$2.Fixed,SpacingMode$2.Percent];SkeletonBinary$1.RotateModeValues=[RotateMode.Tangent,RotateMode.Chain,RotateMode.ChainScale];SkeletonBinary$1.BlendModeValues=[BLEND_MODES.NORMAL,BLEND_MODES.ADD,BLEND_MODES.MULTIPLY,BLEND_MODES.SCREEN];SkeletonBinary$1.BONE_ROTATE=0;SkeletonBinary$1.BONE_TRANSLATE=1;SkeletonBinary$1.BONE_SCALE=2;SkeletonBinary$1.BONE_SHEAR=3;SkeletonBinary$1.SLOT_ATTACHMENT=0;SkeletonBinary$1.SLOT_COLOR=1;SkeletonBinary$1.SLOT_TWO_COLOR=2;SkeletonBinary$1.PATH_POSITION=0;SkeletonBinary$1.PATH_SPACING=1;SkeletonBinary$1.PATH_MIX=2;SkeletonBinary$1.CURVE_LINEAR=0;SkeletonBinary$1.CURVE_STEPPED=1;SkeletonBinary$1.CURVE_BEZIER=2;let LinkedMesh$4=class{constructor(_,T,E,C,P){this.mesh=_,this.skin=T,this.slotIndex=E,this.parent=C,this.inheritDeform=P}},Vertices$1=class{constructor(_=null,T=null){this.bones=_,this.vertices=T}},SkeletonJson$2=class At{constructor(_){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=_}readSkeletonData(_){const T=this.scale,E=new SkeletonData$2,C=typeof _=="string"?JSON.parse(_):_,P=C.skeleton;if(P!=null){if(E.hash=P.hash,E.version=P.spine,E.version.substr(0,3)!=="3.8"){const I=`Spine 3.8 loader cant load version ${P.spine}. Please configure your pixi-spine bundle`;console.error(I)}E.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),E.x=P.x,E.y=P.y,E.width=P.width,E.height=P.height,E.fps=P.fps,E.imagesPath=P.images}if(C.bones)for(let I=0;I<C.bones.length;I++){const F=C.bones[I];let R=null;const B=this.getValue(F,"parent",null);if(B!=null&&(R=E.findBone(B),R==null))throw new Error(`Parent bone not found: ${B}`);const O=new BoneData$2(E.bones.length,F.name,R);O.length=this.getValue(F,"length",0)*T,O.x=this.getValue(F,"x",0)*T,O.y=this.getValue(F,"y",0)*T,O.rotation=this.getValue(F,"rotation",0),O.scaleX=this.getValue(F,"scaleX",1),O.scaleY=this.getValue(F,"scaleY",1),O.shearX=this.getValue(F,"shearX",0),O.shearY=this.getValue(F,"shearY",0),O.transformMode=At.transformModeFromString(this.getValue(F,"transform","normal")),O.skinRequired=this.getValue(F,"skin",!1),E.bones.push(O)}if(C.slots)for(let I=0;I<C.slots.length;I++){const F=C.slots[I],R=F.name,B=F.bone,O=E.findBone(B);if(O==null)throw new Error(`Slot bone not found: ${B}`);const V=new SlotData$2(E.slots.length,R,O),L=this.getValue(F,"color",null);L!=null&&V.color.setFromString(L);const D=this.getValue(F,"dark",null);D!=null&&(V.darkColor=new Color(1,1,1,1),V.darkColor.setFromString(D)),V.attachmentName=this.getValue(F,"attachment",null),V.blendMode=At.blendModeFromString(this.getValue(F,"blend","normal")),E.slots.push(V)}if(C.ik)for(let I=0;I<C.ik.length;I++){const F=C.ik[I],R=new IkConstraintData$2(F.name);R.order=this.getValue(F,"order",0),R.skinRequired=this.getValue(F,"skin",!1);for(let O=0;O<F.bones.length;O++){const V=F.bones[O],L=E.findBone(V);if(L==null)throw new Error(`IK bone not found: ${V}`);R.bones.push(L)}const B=F.target;if(R.target=E.findBone(B),R.target==null)throw new Error(`IK target bone not found: ${B}`);R.mix=this.getValue(F,"mix",1),R.softness=this.getValue(F,"softness",0)*T,R.bendDirection=this.getValue(F,"bendPositive",!0)?1:-1,R.compress=this.getValue(F,"compress",!1),R.stretch=this.getValue(F,"stretch",!1),R.uniform=this.getValue(F,"uniform",!1),E.ikConstraints.push(R)}if(C.transform)for(let I=0;I<C.transform.length;I++){const F=C.transform[I],R=new TransformConstraintData$2(F.name);R.order=this.getValue(F,"order",0),R.skinRequired=this.getValue(F,"skin",!1);for(let O=0;O<F.bones.length;O++){const V=F.bones[O],L=E.findBone(V);if(L==null)throw new Error(`Transform constraint bone not found: ${V}`);R.bones.push(L)}const B=F.target;if(R.target=E.findBone(B),R.target==null)throw new Error(`Transform constraint target bone not found: ${B}`);R.local=this.getValue(F,"local",!1),R.relative=this.getValue(F,"relative",!1),R.offsetRotation=this.getValue(F,"rotation",0),R.offsetX=this.getValue(F,"x",0)*T,R.offsetY=this.getValue(F,"y",0)*T,R.offsetScaleX=this.getValue(F,"scaleX",0),R.offsetScaleY=this.getValue(F,"scaleY",0),R.offsetShearY=this.getValue(F,"shearY",0),R.rotateMix=this.getValue(F,"rotateMix",1),R.translateMix=this.getValue(F,"translateMix",1),R.scaleMix=this.getValue(F,"scaleMix",1),R.shearMix=this.getValue(F,"shearMix",1),E.transformConstraints.push(R)}if(C.path)for(let I=0;I<C.path.length;I++){const F=C.path[I],R=new PathConstraintData$2(F.name);R.order=this.getValue(F,"order",0),R.skinRequired=this.getValue(F,"skin",!1);for(let O=0;O<F.bones.length;O++){const V=F.bones[O],L=E.findBone(V);if(L==null)throw new Error(`Transform constraint bone not found: ${V}`);R.bones.push(L)}const B=F.target;if(R.target=E.findSlot(B),R.target==null)throw new Error(`Path target slot not found: ${B}`);R.positionMode=At.positionModeFromString(this.getValue(F,"positionMode","percent")),R.spacingMode=At.spacingModeFromString(this.getValue(F,"spacingMode","length")),R.rotateMode=At.rotateModeFromString(this.getValue(F,"rotateMode","tangent")),R.offsetRotation=this.getValue(F,"rotation",0),R.position=this.getValue(F,"position",0),R.positionMode==PositionMode.Fixed&&(R.position*=T),R.spacing=this.getValue(F,"spacing",0),(R.spacingMode==SpacingMode$2.Length||R.spacingMode==SpacingMode$2.Fixed)&&(R.spacing*=T),R.rotateMix=this.getValue(F,"rotateMix",1),R.translateMix=this.getValue(F,"translateMix",1),E.pathConstraints.push(R)}if(C.skins)for(let I=0;I<C.skins.length;I++){const F=C.skins[I],R=new Skin$2(F.name);if(F.bones)for(let B=0;B<F.bones.length;B++){const O=E.findBone(F.bones[B]);if(O==null)throw new Error(`Skin bone not found: ${F.bones[I]}`);R.bones.push(O)}if(F.ik)for(let B=0;B<F.ik.length;B++){const O=E.findIkConstraint(F.ik[B]);if(O==null)throw new Error(`Skin IK constraint not found: ${F.ik[I]}`);R.constraints.push(O)}if(F.transform)for(let B=0;B<F.transform.length;B++){const O=E.findTransformConstraint(F.transform[B]);if(O==null)throw new Error(`Skin transform constraint not found: ${F.transform[I]}`);R.constraints.push(O)}if(F.path)for(let B=0;B<F.path.length;B++){const O=E.findPathConstraint(F.path[B]);if(O==null)throw new Error(`Skin path constraint not found: ${F.path[I]}`);R.constraints.push(O)}for(const B in F.attachments){const O=E.findSlot(B);if(O==null)throw new Error(`Slot not found: ${B}`);const V=F.attachments[B];for(const L in V){const D=this.readAttachment(V[L],R,O.index,L,E);D!=null&&R.setAttachment(O.index,L,D)}}E.skins.push(R),R.name=="default"&&(E.defaultSkin=R)}for(let I=0,F=this.linkedMeshes.length;I<F;I++){const R=this.linkedMeshes[I],B=R.skin==null?E.defaultSkin:E.findSkin(R.skin);if(B==null)throw new Error(`Skin not found: ${R.skin}`);const O=B.getAttachment(R.slotIndex,R.parent);if(O==null)throw new Error(`Parent mesh not found: ${R.parent}`);R.mesh.deformAttachment=R.inheritDeform?O:R.mesh,R.mesh.setParentMesh(O)}if(this.linkedMeshes.length=0,C.events)for(const I in C.events){const F=C.events[I],R=new EventData$2(I);R.intValue=this.getValue(F,"int",0),R.floatValue=this.getValue(F,"float",0),R.stringValue=this.getValue(F,"string",""),R.audioPath=this.getValue(F,"audio",null),R.audioPath!=null&&(R.volume=this.getValue(F,"volume",1),R.balance=this.getValue(F,"balance",0)),E.events.push(R)}if(C.animations)for(const I in C.animations){const F=C.animations[I];this.readAnimation(F,I,E)}return E}readAttachment(_,T,E,C,P){const I=this.scale;switch(C=this.getValue(_,"name",C),this.getValue(_,"type","region")){case"region":{const R=this.getValue(_,"path",C),B=this.attachmentLoader.newRegionAttachment(T,C,R);if(B==null)return null;B.path=R,B.x=this.getValue(_,"x",0)*I,B.y=this.getValue(_,"y",0)*I,B.scaleX=this.getValue(_,"scaleX",1),B.scaleY=this.getValue(_,"scaleY",1),B.rotation=this.getValue(_,"rotation",0),B.width=_.width*I,B.height=_.height*I;const O=this.getValue(_,"color",null);return O!=null&&B.color.setFromString(O),B}case"boundingbox":{const R=this.attachmentLoader.newBoundingBoxAttachment(T,C);if(R==null)return null;this.readVertices(_,R,_.vertexCount<<1);const B=this.getValue(_,"color",null);return B!=null&&R.color.setFromString(B),R}case"mesh":case"linkedmesh":{const R=this.getValue(_,"path",C),B=this.attachmentLoader.newMeshAttachment(T,C,R);if(B==null)return null;B.path=R;const O=this.getValue(_,"color",null);O!=null&&B.color.setFromString(O),B.width=this.getValue(_,"width",0)*I,B.height=this.getValue(_,"height",0)*I;const V=this.getValue(_,"parent",null);if(V!=null)return this.linkedMeshes.push(new LinkedMesh$3(B,this.getValue(_,"skin",null),E,V,this.getValue(_,"deform",!0))),B;const L=_.uvs;return this.readVertices(_,B,L.length),B.triangles=_.triangles,B.regionUVs=new Float32Array(L),B.edges=this.getValue(_,"edges",null),B.hullLength=this.getValue(_,"hull",0)*2,B}case"path":{const R=this.attachmentLoader.newPathAttachment(T,C);if(R==null)return null;R.closed=this.getValue(_,"closed",!1),R.constantSpeed=this.getValue(_,"constantSpeed",!0);const B=_.vertexCount;this.readVertices(_,R,B<<1);const O=Utils.newArray(B/3,0);for(let L=0;L<_.lengths.length;L++)O[L]=_.lengths[L]*I;R.lengths=O;const V=this.getValue(_,"color",null);return V!=null&&R.color.setFromString(V),R}case"point":{const R=this.attachmentLoader.newPointAttachment(T,C);if(R==null)return null;R.x=this.getValue(_,"x",0)*I,R.y=this.getValue(_,"y",0)*I,R.rotation=this.getValue(_,"rotation",0);const B=this.getValue(_,"color",null);return B!=null&&R.color.setFromString(B),R}case"clipping":{const R=this.attachmentLoader.newClippingAttachment(T,C);if(R==null)return null;const B=this.getValue(_,"end",null);if(B!=null){const L=P.findSlot(B);if(L==null)throw new Error(`Clipping end slot not found: ${B}`);R.endSlot=L}const O=_.vertexCount;this.readVertices(_,R,O<<1);const V=this.getValue(_,"color",null);return V!=null&&R.color.setFromString(V),R}}return null}readVertices(_,T,E){const C=this.scale;T.worldVerticesLength=E;const P=_.vertices;if(E==P.length){const R=Utils.toFloatArray(P);if(C!=1)for(let B=0,O=P.length;B<O;B++)R[B]*=C;T.vertices=R;return}const I=new Array,F=new Array;for(let R=0,B=P.length;R<B;){const O=P[R++];F.push(O);for(let V=R+O*4;R<V;R+=4)F.push(P[R]),I.push(P[R+1]*C),I.push(P[R+2]*C),I.push(P[R+3])}T.bones=F,T.vertices=Utils.toFloatArray(I)}readAnimation(_,T,E){const C=this.scale,P=new Array;let I=0;if(_.slots)for(const R in _.slots){const B=_.slots[R],O=E.findSlotIndex(R);if(O==-1)throw new Error(`Slot not found: ${R}`);for(const V in B){const L=B[V];if(V=="attachment"){const D=new AttachmentTimeline$2(L.length);D.slotIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G];D.setFrame(U++,this.getValue(X,"time",0),X.name)}P.push(D),I=Math.max(I,D.frames[D.getFrameCount()-1])}else if(V=="color"){const D=new ColorTimeline$1(L.length);D.slotIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G],z=new Color;z.setFromString(X.color||"ffffffff"),D.setFrame(U,this.getValue(X,"time",0),z.r,z.g,z.b,z.a),this.readCurve(X,D,U),U++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*ColorTimeline$1.ENTRIES])}else if(V=="twoColor"){const D=new TwoColorTimeline$1(L.length);D.slotIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G],z=new Color,Y=new Color;z.setFromString(X.light),Y.setFromString(X.dark),D.setFrame(U,this.getValue(X,"time",0),z.r,z.g,z.b,z.a,Y.r,Y.g,Y.b),this.readCurve(X,D,U),U++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*TwoColorTimeline$1.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${V} (${R})`)}}if(_.bones)for(const R in _.bones){const B=_.bones[R],O=E.findBoneIndex(R);if(O==-1)throw new Error(`Bone not found: ${R}`);for(const V in B){const L=B[V];if(V==="rotate"){const D=new RotateTimeline$2(L.length);D.boneIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G];D.setFrame(U,this.getValue(X,"time",0),this.getValue(X,"angle",0)),this.readCurve(X,D,U),U++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*RotateTimeline$2.ENTRIES])}else if(V==="translate"||V==="scale"||V==="shear"){let D=null,U=1,G=0;V==="scale"?(D=new ScaleTimeline$2(L.length),G=1):V==="shear"?D=new ShearTimeline$2(L.length):(D=new TranslateTimeline$2(L.length),U=C),D.boneIndex=O;let X=0;for(let z=0;z<L.length;z++){const Y=L[z],W=this.getValue(Y,"x",G),q=this.getValue(Y,"y",G);D.setFrame(X,this.getValue(Y,"time",0),W*U,q*U),this.readCurve(Y,D,X),X++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*TranslateTimeline$2.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${V} (${R})`)}}if(_.ik)for(const R in _.ik){const B=_.ik[R],O=E.findIkConstraint(R),V=new IkConstraintTimeline$2(B.length);V.ikConstraintIndex=E.ikConstraints.indexOf(O);let L=0;for(let D=0;D<B.length;D++){const U=B[D];V.setFrame(L,this.getValue(U,"time",0),this.getValue(U,"mix",1),this.getValue(U,"softness",0)*C,this.getValue(U,"bendPositive",!0)?1:-1,this.getValue(U,"compress",!1),this.getValue(U,"stretch",!1)),this.readCurve(U,V,L),L++}P.push(V),I=Math.max(I,V.frames[(V.getFrameCount()-1)*IkConstraintTimeline$2.ENTRIES])}if(_.transform)for(const R in _.transform){const B=_.transform[R],O=E.findTransformConstraint(R),V=new TransformConstraintTimeline$2(B.length);V.transformConstraintIndex=E.transformConstraints.indexOf(O);let L=0;for(let D=0;D<B.length;D++){const U=B[D];V.setFrame(L,this.getValue(U,"time",0),this.getValue(U,"rotateMix",1),this.getValue(U,"translateMix",1),this.getValue(U,"scaleMix",1),this.getValue(U,"shearMix",1)),this.readCurve(U,V,L),L++}P.push(V),I=Math.max(I,V.frames[(V.getFrameCount()-1)*TransformConstraintTimeline$2.ENTRIES])}if(_.path)for(const R in _.path){const B=_.path[R],O=E.findPathConstraintIndex(R);if(O==-1)throw new Error(`Path constraint not found: ${R}`);const V=E.pathConstraints[O];for(const L in B){const D=B[L];if(L==="position"||L==="spacing"){let U=null,G=1;L==="spacing"?(U=new PathConstraintSpacingTimeline$2(D.length),(V.spacingMode==SpacingMode$2.Length||V.spacingMode==SpacingMode$2.Fixed)&&(G=C)):(U=new PathConstraintPositionTimeline$2(D.length),V.positionMode==PositionMode.Fixed&&(G=C)),U.pathConstraintIndex=O;let X=0;for(let z=0;z<D.length;z++){const Y=D[z];U.setFrame(X,this.getValue(Y,"time",0),this.getValue(Y,L,0)*G),this.readCurve(Y,U,X),X++}P.push(U),I=Math.max(I,U.frames[(U.getFrameCount()-1)*PathConstraintPositionTimeline$2.ENTRIES])}else if(L==="mix"){const U=new PathConstraintMixTimeline$2(D.length);U.pathConstraintIndex=O;let G=0;for(let X=0;X<D.length;X++){const z=D[X];U.setFrame(G,this.getValue(z,"time",0),this.getValue(z,"rotateMix",1),this.getValue(z,"translateMix",1)),this.readCurve(z,U,G),G++}P.push(U),I=Math.max(I,U.frames[(U.getFrameCount()-1)*PathConstraintMixTimeline$2.ENTRIES])}}}if(_.deform)for(const R in _.deform){const B=_.deform[R],O=E.findSkin(R);if(O!=null)for(const V in B){const L=B[V],D=E.findSlotIndex(V);if(D==-1)throw new Error(`Slot not found: ${L.name}`);for(const U in L){const G=L[U],X=O.getAttachment(D,U);if(X==null)throw new Error(`Deform attachment not found: ${G.name}`);const z=X.bones!=null,Y=X.vertices,W=z?Y.length/3*2:Y.length,q=new DeformTimeline$2(G.length);q.slotIndex=D,q.attachment=X;let K=0;for(let J=0;J<G.length;J++){const Z=G[J];let se;const ae=this.getValue(Z,"vertices",null);if(ae==null)se=z?Utils.newFloatArray(W):Y;else{se=Utils.newFloatArray(W);const ue=this.getValue(Z,"offset",0);if(Utils.arrayCopy(ae,0,se,ue,ae.length),C!=1)for(let ce=ue,he=ce+ae.length;ce<he;ce++)se[ce]*=C;if(!z)for(let ce=0;ce<W;ce++)se[ce]+=Y[ce]}q.setFrame(K,this.getValue(Z,"time",0),se),this.readCurve(Z,q,K),K++}P.push(q),I=Math.max(I,q.frames[q.getFrameCount()-1])}}}let F=_.drawOrder;if(F==null&&(F=_.draworder),F!=null){const R=new DrawOrderTimeline$2(F.length),B=E.slots.length;let O=0;for(let V=0;V<F.length;V++){const L=F[V];let D=null;const U=this.getValue(L,"offsets",null);if(U!=null){D=Utils.newArray(B,-1);const G=Utils.newArray(B-U.length,0);let X=0,z=0;for(let Y=0;Y<U.length;Y++){const W=U[Y],q=E.findSlotIndex(W.slot);if(q==-1)throw new Error(`Slot not found: ${W.slot}`);for(;X!=q;)G[z++]=X++;D[X+W.offset]=X++}for(;X<B;)G[z++]=X++;for(let Y=B-1;Y>=0;Y--)D[Y]==-1&&(D[Y]=G[--z])}R.setFrame(O++,this.getValue(L,"time",0),D)}P.push(R),I=Math.max(I,R.frames[R.getFrameCount()-1])}if(_.events){const R=new EventTimeline$2(_.events.length);let B=0;for(let O=0;O<_.events.length;O++){const V=_.events[O],L=E.findEvent(V.name);if(L==null)throw new Error(`Event not found: ${V.name}`);const D=new Event$3(Utils.toSinglePrecision(this.getValue(V,"time",0)),L);D.intValue=this.getValue(V,"int",L.intValue),D.floatValue=this.getValue(V,"float",L.floatValue),D.stringValue=this.getValue(V,"string",L.stringValue),D.data.audioPath!=null&&(D.volume=this.getValue(V,"volume",1),D.balance=this.getValue(V,"balance",0)),R.setFrame(B++,D)}P.push(R),I=Math.max(I,R.frames[R.getFrameCount()-1])}if(isNaN(I))throw new Error("Error while parsing animation, duration is NaN");E.animations.push(new Animation$2(T,P,I))}readCurve(_,T,E){if(_.hasOwnProperty("curve"))if(_.curve==="stepped")T.setStepped(E);else{const C=_.curve;T.setCurve(E,C,this.getValue(_,"c2",0),this.getValue(_,"c3",1),this.getValue(_,"c4",1))}}getValue(_,T,E){return _[T]!==void 0?_[T]:E}static blendModeFromString(_){if(_=_.toLowerCase(),_=="normal")return BLEND_MODES.NORMAL;if(_=="additive")return BLEND_MODES.ADD;if(_=="multiply")return BLEND_MODES.MULTIPLY;if(_=="screen")return BLEND_MODES.SCREEN;throw new Error(`Unknown blend mode: ${_}`)}static positionModeFromString(_){if(_=_.toLowerCase(),_=="fixed")return PositionMode.Fixed;if(_=="percent")return PositionMode.Percent;throw new Error(`Unknown position mode: ${_}`)}static spacingModeFromString(_){if(_=_.toLowerCase(),_=="length")return SpacingMode$2.Length;if(_=="fixed")return SpacingMode$2.Fixed;if(_=="percent")return SpacingMode$2.Percent;throw new Error(`Unknown position mode: ${_}`)}static rotateModeFromString(_){if(_=_.toLowerCase(),_=="tangent")return RotateMode.Tangent;if(_=="chain")return RotateMode.Chain;if(_=="chainscale")return RotateMode.ChainScale;throw new Error(`Unknown rotate mode: ${_}`)}static transformModeFromString(_){if(_=_.toLowerCase(),_=="normal")return TransformMode.Normal;if(_=="onlytranslation")return TransformMode.OnlyTranslation;if(_=="norotationorreflection")return TransformMode.NoRotationOrReflection;if(_=="noscale")return TransformMode.NoScale;if(_=="noscaleorreflection")return TransformMode.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${_}`)}},LinkedMesh$3=class{constructor(_,T,E,C,P){this.mesh=_,this.skin=T,this.slotIndex=E,this.parent=C,this.inheritDeform=P}},Attachment$1=class{constructor(_){if(_==null)throw new Error("name cannot be null.");this.name=_}};const _VertexAttachment$1=class extends Attachment$1{constructor(_){super(_),this.id=(_VertexAttachment$1.nextID++&65535)<<11,this.worldVerticesLength=0}computeWorldVerticesOld(_,T){this.computeWorldVertices(_,0,this.worldVerticesLength,T,0,2)}computeWorldVertices(_,T,E,C,P,I){E=P+(E>>1)*I;const F=_.bone.skeleton,R=_.attachmentVertices;let B=this.vertices;const O=this.bones;if(O==null){R.length>0&&(B=R);const U=_.bone.matrix,G=U.tx,X=U.ty,z=U.a,Y=U.c,W=U.b,q=U.d;for(let K=T,J=P;J<E;K+=2,J+=I){const Z=B[K],se=B[K+1];C[J]=Z*z+se*Y+G,C[J+1]=Z*W+se*q+X}return}let V=0,L=0;for(let U=0;U<T;U+=2){const G=O[V];V+=G+1,L+=G}const D=F.bones;if(R.length==0)for(let U=P,G=L*3;U<E;U+=I){let X=0,z=0,Y=O[V++];for(Y+=V;V<Y;V++,G+=3){const W=D[O[V]].matrix,q=B[G],K=B[G+1],J=B[G+2];X+=(q*W.a+K*W.c+W.tx)*J,z+=(q*W.b+K*W.d+W.ty)*J}C[U]=X,C[U+1]=z}else{const U=R;for(let G=P,X=L*3,z=L<<1;G<E;G+=I){let Y=0,W=0,q=O[V++];for(q+=V;V<q;V++,X+=3,z+=2){const K=D[O[V]].matrix,J=B[X]+U[z],Z=B[X+1]+U[z+1],se=B[X+2];Y+=(J*K.a+Z*K.c+K.tx)*se,W+=(J*K.b+Z*K.d+K.ty)*se}C[G]=Y,C[G+1]=W}}}applyDeform(_){return this==_}};let VertexAttachment$1=_VertexAttachment$1;VertexAttachment$1.nextID=0;let BoundingBoxAttachment$1=class extends VertexAttachment$1{constructor(_){super(_),this.type=AttachmentType.BoundingBox,this.color=new Color(1,1,1,1)}},ClippingAttachment$1=class extends VertexAttachment$1{constructor(_){super(_),this.type=AttachmentType.Clipping,this.color=new Color(.2275,.2275,.8078,1)}},MeshAttachment$1=class extends VertexAttachment$1{constructor(_){super(_),this.type=AttachmentType.Mesh,this.color=new Color(1,1,1,1),this.inheritDeform=!1,this.tempColor=new Color(0,0,0,0)}applyDeform(_){return this==_||this.inheritDeform&&this.parentMesh==_}getParentMesh(){return this.parentMesh}setParentMesh(_){this.parentMesh=_,_!=null&&(this.bones=_.bones,this.vertices=_.vertices,this.worldVerticesLength=_.worldVerticesLength,this.regionUVs=_.regionUVs,this.triangles=_.triangles,this.hullLength=_.hullLength,this.worldVerticesLength=_.worldVerticesLength)}},PathAttachment$1=class extends VertexAttachment$1{constructor(_){super(_),this.type=AttachmentType.Path,this.closed=!1,this.constantSpeed=!1,this.color=new Color(1,1,1,1)}},PointAttachment$1=class extends VertexAttachment$1{constructor(_){super(_),this.type=AttachmentType.Point,this.color=new Color(.38,.94,0,1)}computeWorldPosition(_,T){const E=_.matrix;return T.x=this.x*E.a+this.y*E.c+_.worldX,T.y=this.x*E.b+this.y*E.d+_.worldY,T}computeWorldRotation(_){const T=_.matrix,E=MathUtils.cosDeg(this.rotation),C=MathUtils.sinDeg(this.rotation),P=E*T.a+C*T.c,I=E*T.b+C*T.d;return Math.atan2(I,P)*MathUtils.radDeg}};class Slot{constructor(_,T){if(this.attachmentVertices=new Array,_==null)throw new Error("data cannot be null.");if(T==null)throw new Error("bone cannot be null.");this.data=_,this.bone=T,this.color=new Color,this.darkColor=_.darkColor==null?null:new Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(_){this.attachment!=_&&(this.attachment=_,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)}setAttachmentTime(_){this.attachmentTime=this.bone.skeleton.time-_}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}const _RegionAttachment$1=class extends Attachment$1{constructor(_){super(_),this.type=AttachmentType.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new Color(1,1,1,1),this.offset=Utils.newFloatArray(8),this.uvs=Utils.newFloatArray(8),this.tempColor=new Color(1,1,1,1)}updateOffset(){const _=this.width/this.region.originalWidth*this.scaleX,T=this.height/this.region.originalHeight*this.scaleY,E=-this.width/2*this.scaleX+this.region.offsetX*_,C=-this.height/2*this.scaleY+this.region.offsetY*T,P=E+this.region.width*_,I=C+this.region.height*T,F=this.rotation*Math.PI/180,R=Math.cos(F),B=Math.sin(F),O=E*R+this.x,V=E*B,L=C*R+this.y,D=C*B,U=P*R+this.x,G=P*B,X=I*R+this.y,z=I*B,Y=this.offset;Y[_RegionAttachment$1.OX1]=O-D,Y[_RegionAttachment$1.OY1]=L+V,Y[_RegionAttachment$1.OX2]=O-z,Y[_RegionAttachment$1.OY2]=X+V,Y[_RegionAttachment$1.OX3]=U-z,Y[_RegionAttachment$1.OY3]=X+G,Y[_RegionAttachment$1.OX4]=U-D,Y[_RegionAttachment$1.OY4]=L+G}setRegion(_){this.region=_;const T=this.uvs;_.rotate?(T[2]=_.u,T[3]=_.v2,T[4]=_.u,T[5]=_.v,T[6]=_.u2,T[7]=_.v,T[0]=_.u2,T[1]=_.v2):(T[0]=_.u,T[1]=_.v2,T[2]=_.u,T[3]=_.v,T[4]=_.u2,T[5]=_.v,T[6]=_.u2,T[7]=_.v2)}computeWorldVertices(_,T,E,C){const P=this.offset,I=_ instanceof Slot?_.bone.matrix:_.matrix,F=I.tx,R=I.ty,B=I.a,O=I.c,V=I.b,L=I.d;let D=0,U=0;D=P[_RegionAttachment$1.OX1],U=P[_RegionAttachment$1.OY1],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R,E+=C,D=P[_RegionAttachment$1.OX2],U=P[_RegionAttachment$1.OY2],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R,E+=C,D=P[_RegionAttachment$1.OX3],U=P[_RegionAttachment$1.OY3],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R,E+=C,D=P[_RegionAttachment$1.OX4],U=P[_RegionAttachment$1.OY4],T[E]=D*B+U*O+F,T[E+1]=D*V+U*L+R}};let RegionAttachment$1=_RegionAttachment$1;RegionAttachment$1.OX1=0;RegionAttachment$1.OY1=1;RegionAttachment$1.OX2=2;RegionAttachment$1.OY2=3;RegionAttachment$1.OX3=4;RegionAttachment$1.OY3=5;RegionAttachment$1.OX4=6;RegionAttachment$1.OY4=7;RegionAttachment$1.X1=0;RegionAttachment$1.Y1=1;RegionAttachment$1.C1R=2;RegionAttachment$1.C1G=3;RegionAttachment$1.C1B=4;RegionAttachment$1.C1A=5;RegionAttachment$1.U1=6;RegionAttachment$1.V1=7;RegionAttachment$1.X2=8;RegionAttachment$1.Y2=9;RegionAttachment$1.C2R=10;RegionAttachment$1.C2G=11;RegionAttachment$1.C2B=12;RegionAttachment$1.C2A=13;RegionAttachment$1.U2=14;RegionAttachment$1.V2=15;RegionAttachment$1.X3=16;RegionAttachment$1.Y3=17;RegionAttachment$1.C3R=18;RegionAttachment$1.C3G=19;RegionAttachment$1.C3B=20;RegionAttachment$1.C3A=21;RegionAttachment$1.U3=22;RegionAttachment$1.V3=23;RegionAttachment$1.X4=24;RegionAttachment$1.Y4=25;RegionAttachment$1.C4R=26;RegionAttachment$1.C4G=27;RegionAttachment$1.C4B=28;RegionAttachment$1.C4A=29;RegionAttachment$1.U4=30;RegionAttachment$1.V4=31;new PowOut(2);let Animation$1=class{constructor(_,T,E){if(_==null)throw new Error("name cannot be null.");if(T==null)throw new Error("timelines cannot be null.");this.name=_,this.timelines=T,this.duration=E}apply(_,T,E,C,P,I,F,R){if(_==null)throw new Error("skeleton cannot be null.");C&&this.duration!=0&&(E%=this.duration,T>0&&(T%=this.duration));const B=this.timelines;for(let O=0,V=B.length;O<V;O++)B[O].apply(_,T,E,P,I,F,R)}static binarySearch(_,T,E=1){let C=0,P=_.length/E-2;if(P==0)return E;let I=P>>>1;for(;;){if(_[(I+1)*E]<=T?C=I+1:P=I,C==P)return(C+1)*E;I=C+P>>>1}}static linearSearch(_,T,E){for(let C=0,P=_.length-E;C<=P;C+=E)if(_[C]>T)return C;return-1}};const _CurveTimeline=class{constructor(A){if(A<=0)throw new Error(`frameCount must be > 0: ${A}`);this.curves=Utils.newFloatArray((A-1)*_CurveTimeline.BEZIER_SIZE)}getFrameCount(){return this.curves.length/_CurveTimeline.BEZIER_SIZE+1}setLinear(A){this.curves[A*_CurveTimeline.BEZIER_SIZE]=_CurveTimeline.LINEAR}setStepped(A){this.curves[A*_CurveTimeline.BEZIER_SIZE]=_CurveTimeline.STEPPED}getCurveType(A){const _=A*_CurveTimeline.BEZIER_SIZE;if(_==this.curves.length)return _CurveTimeline.LINEAR;const T=this.curves[_];return T==_CurveTimeline.LINEAR?_CurveTimeline.LINEAR:T==_CurveTimeline.STEPPED?_CurveTimeline.STEPPED:_CurveTimeline.BEZIER}setCurve(A,_,T,E,C){const P=(-_*2+E)*.03,I=(-T*2+C)*.03,F=((_-E)*3+1)*.006,R=((T-C)*3+1)*.006;let B=P*2+F,O=I*2+R,V=_*.3+P+F*.16666667,L=T*.3+I+R*.16666667,D=A*_CurveTimeline.BEZIER_SIZE;const U=this.curves;U[D++]=_CurveTimeline.BEZIER;let G=V,X=L;for(let z=D+_CurveTimeline.BEZIER_SIZE-1;D<z;D+=2)U[D]=G,U[D+1]=X,V+=B,L+=O,B+=F,O+=R,G+=V,X+=L}getCurvePercent(A,_){_=MathUtils.clamp(_,0,1);const T=this.curves;let E=A*_CurveTimeline.BEZIER_SIZE;const C=T[E];if(C==_CurveTimeline.LINEAR)return _;if(C==_CurveTimeline.STEPPED)return 0;E++;let P=0;for(let F=E,R=E+_CurveTimeline.BEZIER_SIZE-1;E<R;E+=2)if(P=T[E],P>=_){let B,O;return E==F?(B=0,O=0):(B=T[E-2],O=T[E-1]),O+(T[E+1]-O)*(_-B)/(P-B)}const I=T[E-1];return I+(1-I)*(_-P)/(1-P)}};let CurveTimeline$1=_CurveTimeline;CurveTimeline$1.LINEAR=0;CurveTimeline$1.STEPPED=1;CurveTimeline$1.BEZIER=2;CurveTimeline$1.BEZIER_SIZE=10*2-1;const _RotateTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(A,_,T){A<<=1,this.frames[A]=_,this.frames[A+_RotateTimeline.ROTATION]=T}apply(A,_,T,E,C,P,I){const F=this.frames,R=A.bones[this.boneIndex];if(T<F[0]){switch(P){case MixBlend.setup:R.rotation=R.data.rotation;return;case MixBlend.first:const U=R.data.rotation-R.rotation;R.rotation+=(U-(16384-(16384.499999999996-U/360|0))*360)*C}return}if(T>=F[F.length-_RotateTimeline.ENTRIES]){let U=F[F.length+_RotateTimeline.PREV_ROTATION];switch(P){case MixBlend.setup:R.rotation=R.data.rotation+U*C;break;case MixBlend.first:case MixBlend.replace:U+=R.data.rotation-R.rotation,U-=(16384-(16384.499999999996-U/360|0))*360;case MixBlend.add:R.rotation+=U*C}return}const B=Animation$1.binarySearch(F,T,_RotateTimeline.ENTRIES),O=F[B+_RotateTimeline.PREV_ROTATION],V=F[B],L=this.getCurvePercent((B>>1)-1,1-(T-V)/(F[B+_RotateTimeline.PREV_TIME]-V));let D=F[B+_RotateTimeline.ROTATION]-O;switch(D=O+(D-(16384-(16384.499999999996-D/360|0))*360)*L,P){case MixBlend.setup:R.rotation=R.data.rotation+(D-(16384-(16384.499999999996-D/360|0))*360)*C;break;case MixBlend.first:case MixBlend.replace:D+=R.data.rotation-R.rotation;case MixBlend.add:R.rotation+=(D-(16384-(16384.499999999996-D/360|0))*360)*C}}};let RotateTimeline$1=_RotateTimeline;RotateTimeline$1.ENTRIES=2;RotateTimeline$1.PREV_TIME=-2;RotateTimeline$1.PREV_ROTATION=-1;RotateTimeline$1.ROTATION=1;const _TranslateTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_TranslateTimeline.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(A,_,T,E){A*=_TranslateTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_TranslateTimeline.X]=T,this.frames[A+_TranslateTimeline.Y]=E}apply(A,_,T,E,C,P,I){const F=this.frames,R=A.bones[this.boneIndex];if(T<F[0]){switch(P){case MixBlend.setup:R.x=R.data.x,R.y=R.data.y;return;case MixBlend.first:R.x+=(R.data.x-R.x)*C,R.y+=(R.data.y-R.y)*C}return}let B=0,O=0;if(T>=F[F.length-_TranslateTimeline.ENTRIES])B=F[F.length+_TranslateTimeline.PREV_X],O=F[F.length+_TranslateTimeline.PREV_Y];else{const V=Animation$1.binarySearch(F,T,_TranslateTimeline.ENTRIES);B=F[V+_TranslateTimeline.PREV_X],O=F[V+_TranslateTimeline.PREV_Y];const L=F[V],D=this.getCurvePercent(V/_TranslateTimeline.ENTRIES-1,1-(T-L)/(F[V+_TranslateTimeline.PREV_TIME]-L));B+=(F[V+_TranslateTimeline.X]-B)*D,O+=(F[V+_TranslateTimeline.Y]-O)*D}switch(P){case MixBlend.setup:R.x=R.data.x+B*C,R.y=R.data.y+O*C;break;case MixBlend.first:case MixBlend.replace:R.x+=(R.data.x+B-R.x)*C,R.y+=(R.data.y+O-R.y)*C;break;case MixBlend.add:R.x+=B*C,R.y+=O*C}}};let TranslateTimeline$1=_TranslateTimeline;TranslateTimeline$1.ENTRIES=3;TranslateTimeline$1.PREV_TIME=-3;TranslateTimeline$1.PREV_X=-2;TranslateTimeline$1.PREV_Y=-1;TranslateTimeline$1.X=1;TranslateTimeline$1.Y=2;let ScaleTimeline$1=class at extends TranslateTimeline$1{constructor(_){super(_)}getPropertyId(){return(2<<24)+this.boneIndex}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.bones[this.boneIndex];if(E<R[0]){switch(I){case MixBlend.setup:B.scaleX=B.data.scaleX,B.scaleY=B.data.scaleY;return;case MixBlend.first:B.scaleX+=(B.data.scaleX-B.scaleX)*P,B.scaleY+=(B.data.scaleY-B.scaleY)*P}return}let O=0,V=0;if(E>=R[R.length-at.ENTRIES])O=R[R.length+at.PREV_X]*B.data.scaleX,V=R[R.length+at.PREV_Y]*B.data.scaleY;else{const L=Animation$1.binarySearch(R,E,at.ENTRIES);O=R[L+at.PREV_X],V=R[L+at.PREV_Y];const D=R[L],U=this.getCurvePercent(L/at.ENTRIES-1,1-(E-D)/(R[L+at.PREV_TIME]-D));O=(O+(R[L+at.X]-O)*U)*B.data.scaleX,V=(V+(R[L+at.Y]-V)*U)*B.data.scaleY}if(P==1)I==MixBlend.add?(B.scaleX+=O-B.data.scaleX,B.scaleY+=V-B.data.scaleY):(B.scaleX=O,B.scaleY=V);else{let L=0,D=0;if(F==MixDirection.mixOut)switch(I){case MixBlend.setup:L=B.data.scaleX,D=B.data.scaleY,B.scaleX=L+(Math.abs(O)*MathUtils.signum(L)-L)*P,B.scaleY=D+(Math.abs(V)*MathUtils.signum(D)-D)*P;break;case MixBlend.first:case MixBlend.replace:L=B.scaleX,D=B.scaleY,B.scaleX=L+(Math.abs(O)*MathUtils.signum(L)-L)*P,B.scaleY=D+(Math.abs(V)*MathUtils.signum(D)-D)*P;break;case MixBlend.add:L=B.scaleX,D=B.scaleY,B.scaleX=L+(Math.abs(O)*MathUtils.signum(L)-B.data.scaleX)*P,B.scaleY=D+(Math.abs(V)*MathUtils.signum(D)-B.data.scaleY)*P}else switch(I){case MixBlend.setup:L=Math.abs(B.data.scaleX)*MathUtils.signum(O),D=Math.abs(B.data.scaleY)*MathUtils.signum(V),B.scaleX=L+(O-L)*P,B.scaleY=D+(V-D)*P;break;case MixBlend.first:case MixBlend.replace:L=Math.abs(B.scaleX)*MathUtils.signum(O),D=Math.abs(B.scaleY)*MathUtils.signum(V),B.scaleX=L+(O-L)*P,B.scaleY=D+(V-D)*P;break;case MixBlend.add:L=MathUtils.signum(O),D=MathUtils.signum(V),B.scaleX=Math.abs(B.scaleX)*L+(O-Math.abs(B.data.scaleX)*L)*P,B.scaleY=Math.abs(B.scaleY)*D+(V-Math.abs(B.data.scaleY)*D)*P}}}},ShearTimeline$1=class ot extends TranslateTimeline$1{constructor(_){super(_)}getPropertyId(){return(3<<24)+this.boneIndex}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.bones[this.boneIndex];if(E<R[0]){switch(I){case MixBlend.setup:B.shearX=B.data.shearX,B.shearY=B.data.shearY;return;case MixBlend.first:B.shearX+=(B.data.shearX-B.shearX)*P,B.shearY+=(B.data.shearY-B.shearY)*P}return}let O=0,V=0;if(E>=R[R.length-ot.ENTRIES])O=R[R.length+ot.PREV_X],V=R[R.length+ot.PREV_Y];else{const L=Animation$1.binarySearch(R,E,ot.ENTRIES);O=R[L+ot.PREV_X],V=R[L+ot.PREV_Y];const D=R[L],U=this.getCurvePercent(L/ot.ENTRIES-1,1-(E-D)/(R[L+ot.PREV_TIME]-D));O=O+(R[L+ot.X]-O)*U,V=V+(R[L+ot.Y]-V)*U}switch(I){case MixBlend.setup:B.shearX=B.data.shearX+O*P,B.shearY=B.data.shearY+V*P;break;case MixBlend.first:case MixBlend.replace:B.shearX+=(B.data.shearX+O-B.shearX)*P,B.shearY+=(B.data.shearY+V-B.shearY)*P;break;case MixBlend.add:B.shearX+=O*P,B.shearY+=V*P}}};const _ColorTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_ColorTimeline.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(A,_,T,E,C,P){A*=_ColorTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_ColorTimeline.R]=T,this.frames[A+_ColorTimeline.G]=E,this.frames[A+_ColorTimeline.B]=C,this.frames[A+_ColorTimeline.A]=P}apply(A,_,T,E,C,P,I){const F=A.slots[this.slotIndex],R=this.frames;if(T<R[0]){switch(P){case MixBlend.setup:F.color.setFromColor(F.data.color);return;case MixBlend.first:const D=F.color,U=F.data.color;D.add((U.r-D.r)*C,(U.g-D.g)*C,(U.b-D.b)*C,(U.a-D.a)*C)}return}let B=0,O=0,V=0,L=0;if(T>=R[R.length-_ColorTimeline.ENTRIES]){const D=R.length;B=R[D+_ColorTimeline.PREV_R],O=R[D+_ColorTimeline.PREV_G],V=R[D+_ColorTimeline.PREV_B],L=R[D+_ColorTimeline.PREV_A]}else{const D=Animation$1.binarySearch(R,T,_ColorTimeline.ENTRIES);B=R[D+_ColorTimeline.PREV_R],O=R[D+_ColorTimeline.PREV_G],V=R[D+_ColorTimeline.PREV_B],L=R[D+_ColorTimeline.PREV_A];const U=R[D],G=this.getCurvePercent(D/_ColorTimeline.ENTRIES-1,1-(T-U)/(R[D+_ColorTimeline.PREV_TIME]-U));B+=(R[D+_ColorTimeline.R]-B)*G,O+=(R[D+_ColorTimeline.G]-O)*G,V+=(R[D+_ColorTimeline.B]-V)*G,L+=(R[D+_ColorTimeline.A]-L)*G}if(C==1)F.color.set(B,O,V,L);else{const D=F.color;P==MixBlend.setup&&D.setFromColor(F.data.color),D.add((B-D.r)*C,(O-D.g)*C,(V-D.b)*C,(L-D.a)*C)}}};let ColorTimeline=_ColorTimeline;ColorTimeline.ENTRIES=5;ColorTimeline.PREV_TIME=-5;ColorTimeline.PREV_R=-4;ColorTimeline.PREV_G=-3;ColorTimeline.PREV_B=-2;ColorTimeline.PREV_A=-1;ColorTimeline.R=1;ColorTimeline.G=2;ColorTimeline.B=3;ColorTimeline.A=4;const _TwoColorTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_TwoColorTimeline.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(A,_,T,E,C,P,I,F,R){A*=_TwoColorTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_TwoColorTimeline.R]=T,this.frames[A+_TwoColorTimeline.G]=E,this.frames[A+_TwoColorTimeline.B]=C,this.frames[A+_TwoColorTimeline.A]=P,this.frames[A+_TwoColorTimeline.R2]=I,this.frames[A+_TwoColorTimeline.G2]=F,this.frames[A+_TwoColorTimeline.B2]=R}apply(A,_,T,E,C,P,I){const F=A.slots[this.slotIndex],R=this.frames;if(T<R[0]){switch(P){case MixBlend.setup:F.color.setFromColor(F.data.color),F.darkColor.setFromColor(F.data.darkColor);return;case MixBlend.first:const X=F.color,z=F.darkColor,Y=F.data.color,W=F.data.darkColor;X.add((Y.r-X.r)*C,(Y.g-X.g)*C,(Y.b-X.b)*C,(Y.a-X.a)*C),z.add((W.r-z.r)*C,(W.g-z.g)*C,(W.b-z.b)*C,0)}return}let B=0,O=0,V=0,L=0,D=0,U=0,G=0;if(T>=R[R.length-_TwoColorTimeline.ENTRIES]){const X=R.length;B=R[X+_TwoColorTimeline.PREV_R],O=R[X+_TwoColorTimeline.PREV_G],V=R[X+_TwoColorTimeline.PREV_B],L=R[X+_TwoColorTimeline.PREV_A],D=R[X+_TwoColorTimeline.PREV_R2],U=R[X+_TwoColorTimeline.PREV_G2],G=R[X+_TwoColorTimeline.PREV_B2]}else{const X=Animation$1.binarySearch(R,T,_TwoColorTimeline.ENTRIES);B=R[X+_TwoColorTimeline.PREV_R],O=R[X+_TwoColorTimeline.PREV_G],V=R[X+_TwoColorTimeline.PREV_B],L=R[X+_TwoColorTimeline.PREV_A],D=R[X+_TwoColorTimeline.PREV_R2],U=R[X+_TwoColorTimeline.PREV_G2],G=R[X+_TwoColorTimeline.PREV_B2];const z=R[X],Y=this.getCurvePercent(X/_TwoColorTimeline.ENTRIES-1,1-(T-z)/(R[X+_TwoColorTimeline.PREV_TIME]-z));B+=(R[X+_TwoColorTimeline.R]-B)*Y,O+=(R[X+_TwoColorTimeline.G]-O)*Y,V+=(R[X+_TwoColorTimeline.B]-V)*Y,L+=(R[X+_TwoColorTimeline.A]-L)*Y,D+=(R[X+_TwoColorTimeline.R2]-D)*Y,U+=(R[X+_TwoColorTimeline.G2]-U)*Y,G+=(R[X+_TwoColorTimeline.B2]-G)*Y}if(C==1)F.color.set(B,O,V,L),F.darkColor.set(D,U,G,1);else{const X=F.color,z=F.darkColor;P==MixBlend.setup&&(X.setFromColor(F.data.color),z.setFromColor(F.data.darkColor)),X.add((B-X.r)*C,(O-X.g)*C,(V-X.b)*C,(L-X.a)*C),z.add((D-z.r)*C,(U-z.g)*C,(G-z.b)*C,0)}}};let TwoColorTimeline=_TwoColorTimeline;TwoColorTimeline.ENTRIES=8;TwoColorTimeline.PREV_TIME=-8;TwoColorTimeline.PREV_R=-7;TwoColorTimeline.PREV_G=-6;TwoColorTimeline.PREV_B=-5;TwoColorTimeline.PREV_A=-4;TwoColorTimeline.PREV_R2=-3;TwoColorTimeline.PREV_G2=-2;TwoColorTimeline.PREV_B2=-1;TwoColorTimeline.R=1;TwoColorTimeline.G=2;TwoColorTimeline.B=3;TwoColorTimeline.A=4;TwoColorTimeline.R2=5;TwoColorTimeline.G2=6;TwoColorTimeline.B2=7;let AttachmentTimeline$1=class{constructor(_){this.frames=Utils.newFloatArray(_),this.attachmentNames=new Array(_)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(_,T,E){this.frames[_]=T,this.attachmentNames[_]=E}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(F==MixDirection.mixOut&&I==MixBlend.setup){const L=R.data.attachmentName;R.setAttachment(L==null?null:_.getAttachment(this.slotIndex,L));return}const B=this.frames;if(E<B[0]){if(I==MixBlend.setup||I==MixBlend.first){const L=R.data.attachmentName;R.setAttachment(L==null?null:_.getAttachment(this.slotIndex,L))}return}let O=0;E>=B[B.length-1]?O=B.length-1:O=Animation$1.binarySearch(B,E,1)-1;const V=this.attachmentNames[O];_.slots[this.slotIndex].setAttachment(V==null?null:_.getAttachment(this.slotIndex,V))}},zeros=null,DeformTimeline$1=class extends CurveTimeline$1{constructor(_){super(_),this.frames=Utils.newFloatArray(_),this.frameVertices=new Array(_),zeros==null&&(zeros=Utils.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(_,T,E){this.frames[_]=T,this.frameVertices[_]=E}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex],B=R.getAttachment();if(!(B instanceof VertexAttachment$1)||!B.applyDeform(this.attachment))return;const O=R.attachmentVertices;O.length==0&&(I=MixBlend.setup);const V=this.frameVertices,L=V[0].length,D=this.frames;if(E<D[0]){const q=B;switch(I){case MixBlend.setup:O.length=0;return;case MixBlend.first:if(P==1){O.length=0;break}const K=Utils.setArraySize(O,L);if(q.bones==null){const J=q.vertices;for(let Z=0;Z<L;Z++)K[Z]+=(J[Z]-K[Z])*P}else{P=1-P;for(let J=0;J<L;J++)K[J]*=P}}return}const U=Utils.setArraySize(O,L);if(E>=D[D.length-1]){const q=V[D.length-1];if(P==1)if(I==MixBlend.add){const K=B;if(K.bones==null){const J=K.vertices;for(let Z=0;Z<L;Z++)U[Z]+=q[Z]-J[Z]}else for(let J=0;J<L;J++)U[J]+=q[J]}else Utils.arrayCopy(q,0,U,0,L);else switch(I){case MixBlend.setup:{const J=B;if(J.bones==null){const Z=J.vertices;for(let se=0;se<L;se++){const ae=Z[se];U[se]=ae+(q[se]-ae)*P}}else for(let Z=0;Z<L;Z++)U[Z]=q[Z]*P;break}case MixBlend.first:case MixBlend.replace:for(let J=0;J<L;J++)U[J]+=(q[J]-U[J])*P;case MixBlend.add:const K=B;if(K.bones==null){const J=K.vertices;for(let Z=0;Z<L;Z++)U[Z]+=(q[Z]-J[Z])*P}else for(let J=0;J<L;J++)U[J]+=q[J]*P}return}const G=Animation$1.binarySearch(D,E),X=V[G-1],z=V[G],Y=D[G],W=this.getCurvePercent(G-1,1-(E-Y)/(D[G-1]-Y));if(P==1)if(I==MixBlend.add){const q=B;if(q.bones==null){const K=q.vertices;for(let J=0;J<L;J++){const Z=X[J];U[J]+=Z+(z[J]-Z)*W-K[J]}}else for(let K=0;K<L;K++){const J=X[K];U[K]+=J+(z[K]-J)*W}}else for(let q=0;q<L;q++){const K=X[q];U[q]=K+(z[q]-K)*W}else switch(I){case MixBlend.setup:{const K=B;if(K.bones==null){const J=K.vertices;for(let Z=0;Z<L;Z++){const se=X[Z],ae=J[Z];U[Z]=ae+(se+(z[Z]-se)*W-ae)*P}}else for(let J=0;J<L;J++){const Z=X[J];U[J]=(Z+(z[J]-Z)*W)*P}break}case MixBlend.first:case MixBlend.replace:for(let K=0;K<L;K++){const J=X[K];U[K]+=(J+(z[K]-J)*W-U[K])*P}break;case MixBlend.add:const q=B;if(q.bones==null){const K=q.vertices;for(let J=0;J<L;J++){const Z=X[J];U[J]+=(Z+(z[J]-Z)*W-K[J])*P}}else for(let K=0;K<L;K++){const J=X[K];U[K]+=(J+(z[K]-J)*W)*P}}}},EventTimeline$1=class{constructor(_){this.frames=Utils.newFloatArray(_),this.events=new Array(_)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(_,T){this.frames[_]=T.time,this.events[_]=T}apply(_,T,E,C,P,I,F){if(C==null)return;const R=this.frames,B=this.frames.length;if(T>E)this.apply(_,T,Number.MAX_VALUE,C,P,I,F),T=-1;else if(T>=R[B-1])return;if(E<R[0])return;let O=0;if(T<R[0])O=0;else{O=Animation$1.binarySearch(R,T);const V=R[O];for(;O>0&&R[O-1]==V;)O--}for(;O<B&&E>=R[O];O++)C.push(this.events[O])}},DrawOrderTimeline$1=class{constructor(_){this.frames=Utils.newFloatArray(_),this.drawOrders=new Array(_)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(_,T,E){this.frames[_]=T,this.drawOrders[_]=E}apply(_,T,E,C,P,I,F){const R=_.drawOrder,B=_.slots;if(F==MixDirection.mixOut&&I==MixBlend.setup){Utils.arrayCopy(_.slots,0,_.drawOrder,0,_.slots.length);return}const O=this.frames;if(E<O[0]){(I==MixBlend.setup||I==MixBlend.first)&&Utils.arrayCopy(_.slots,0,_.drawOrder,0,_.slots.length);return}let V=0;E>=O[O.length-1]?V=O.length-1:V=Animation$1.binarySearch(O,E)-1;const L=this.drawOrders[V];if(L==null)Utils.arrayCopy(B,0,R,0,B.length);else for(let D=0,U=L.length;D<U;D++)R[D]=B[L[D]]}};const _IkConstraintTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_IkConstraintTimeline.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(A,_,T,E,C,P){A*=_IkConstraintTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_IkConstraintTimeline.MIX]=T,this.frames[A+_IkConstraintTimeline.BEND_DIRECTION]=E,this.frames[A+_IkConstraintTimeline.COMPRESS]=C?1:0,this.frames[A+_IkConstraintTimeline.STRETCH]=P?1:0}apply(A,_,T,E,C,P,I){const F=this.frames,R=A.ikConstraints[this.ikConstraintIndex];if(T<F[0]){switch(P){case MixBlend.setup:R.mix=R.data.mix,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch;return;case MixBlend.first:R.mix+=(R.data.mix-R.mix)*C,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch}return}if(T>=F[F.length-_IkConstraintTimeline.ENTRIES]){P==MixBlend.setup?(R.mix=R.data.mix+(F[F.length+_IkConstraintTimeline.PREV_MIX]-R.data.mix)*C,I==MixDirection.mixOut?(R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch):(R.bendDirection=F[F.length+_IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=F[F.length+_IkConstraintTimeline.PREV_COMPRESS]!=0,R.stretch=F[F.length+_IkConstraintTimeline.PREV_STRETCH]!=0)):(R.mix+=(F[F.length+_IkConstraintTimeline.PREV_MIX]-R.mix)*C,I==MixDirection.mixIn&&(R.bendDirection=F[F.length+_IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=F[F.length+_IkConstraintTimeline.PREV_COMPRESS]!=0,R.stretch=F[F.length+_IkConstraintTimeline.PREV_STRETCH]!=0));return}const B=Animation$1.binarySearch(F,T,_IkConstraintTimeline.ENTRIES),O=F[B+_IkConstraintTimeline.PREV_MIX],V=F[B],L=this.getCurvePercent(B/_IkConstraintTimeline.ENTRIES-1,1-(T-V)/(F[B+_IkConstraintTimeline.PREV_TIME]-V));P==MixBlend.setup?(R.mix=R.data.mix+(O+(F[B+_IkConstraintTimeline.MIX]-O)*L-R.data.mix)*C,I==MixDirection.mixOut?(R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch):(R.bendDirection=F[B+_IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=F[B+_IkConstraintTimeline.PREV_COMPRESS]!=0,R.stretch=F[B+_IkConstraintTimeline.PREV_STRETCH]!=0)):(R.mix+=(O+(F[B+_IkConstraintTimeline.MIX]-O)*L-R.mix)*C,I==MixDirection.mixIn&&(R.bendDirection=F[B+_IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=F[B+_IkConstraintTimeline.PREV_COMPRESS]!=0,R.stretch=F[B+_IkConstraintTimeline.PREV_STRETCH]!=0))}};let IkConstraintTimeline$1=_IkConstraintTimeline;IkConstraintTimeline$1.ENTRIES=5;IkConstraintTimeline$1.PREV_TIME=-5;IkConstraintTimeline$1.PREV_MIX=-4;IkConstraintTimeline$1.PREV_BEND_DIRECTION=-3;IkConstraintTimeline$1.PREV_COMPRESS=-2;IkConstraintTimeline$1.PREV_STRETCH=-1;IkConstraintTimeline$1.MIX=1;IkConstraintTimeline$1.BEND_DIRECTION=2;IkConstraintTimeline$1.COMPRESS=3;IkConstraintTimeline$1.STRETCH=4;const _TransformConstraintTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_TransformConstraintTimeline.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(A,_,T,E,C,P){A*=_TransformConstraintTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_TransformConstraintTimeline.ROTATE]=T,this.frames[A+_TransformConstraintTimeline.TRANSLATE]=E,this.frames[A+_TransformConstraintTimeline.SCALE]=C,this.frames[A+_TransformConstraintTimeline.SHEAR]=P}apply(A,_,T,E,C,P,I){const F=this.frames,R=A.transformConstraints[this.transformConstraintIndex];if(T<F[0]){const D=R.data;switch(P){case MixBlend.setup:R.rotateMix=D.rotateMix,R.translateMix=D.translateMix,R.scaleMix=D.scaleMix,R.shearMix=D.shearMix;return;case MixBlend.first:R.rotateMix+=(D.rotateMix-R.rotateMix)*C,R.translateMix+=(D.translateMix-R.translateMix)*C,R.scaleMix+=(D.scaleMix-R.scaleMix)*C,R.shearMix+=(D.shearMix-R.shearMix)*C}return}let B=0,O=0,V=0,L=0;if(T>=F[F.length-_TransformConstraintTimeline.ENTRIES]){const D=F.length;B=F[D+_TransformConstraintTimeline.PREV_ROTATE],O=F[D+_TransformConstraintTimeline.PREV_TRANSLATE],V=F[D+_TransformConstraintTimeline.PREV_SCALE],L=F[D+_TransformConstraintTimeline.PREV_SHEAR]}else{const D=Animation$1.binarySearch(F,T,_TransformConstraintTimeline.ENTRIES);B=F[D+_TransformConstraintTimeline.PREV_ROTATE],O=F[D+_TransformConstraintTimeline.PREV_TRANSLATE],V=F[D+_TransformConstraintTimeline.PREV_SCALE],L=F[D+_TransformConstraintTimeline.PREV_SHEAR];const U=F[D],G=this.getCurvePercent(D/_TransformConstraintTimeline.ENTRIES-1,1-(T-U)/(F[D+_TransformConstraintTimeline.PREV_TIME]-U));B+=(F[D+_TransformConstraintTimeline.ROTATE]-B)*G,O+=(F[D+_TransformConstraintTimeline.TRANSLATE]-O)*G,V+=(F[D+_TransformConstraintTimeline.SCALE]-V)*G,L+=(F[D+_TransformConstraintTimeline.SHEAR]-L)*G}if(P==MixBlend.setup){const D=R.data;R.rotateMix=D.rotateMix+(B-D.rotateMix)*C,R.translateMix=D.translateMix+(O-D.translateMix)*C,R.scaleMix=D.scaleMix+(V-D.scaleMix)*C,R.shearMix=D.shearMix+(L-D.shearMix)*C}else R.rotateMix+=(B-R.rotateMix)*C,R.translateMix+=(O-R.translateMix)*C,R.scaleMix+=(V-R.scaleMix)*C,R.shearMix+=(L-R.shearMix)*C}};let TransformConstraintTimeline$1=_TransformConstraintTimeline;TransformConstraintTimeline$1.ENTRIES=5;TransformConstraintTimeline$1.PREV_TIME=-5;TransformConstraintTimeline$1.PREV_ROTATE=-4;TransformConstraintTimeline$1.PREV_TRANSLATE=-3;TransformConstraintTimeline$1.PREV_SCALE=-2;TransformConstraintTimeline$1.PREV_SHEAR=-1;TransformConstraintTimeline$1.ROTATE=1;TransformConstraintTimeline$1.TRANSLATE=2;TransformConstraintTimeline$1.SCALE=3;TransformConstraintTimeline$1.SHEAR=4;const _PathConstraintPositionTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_PathConstraintPositionTimeline.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(A,_,T){A*=_PathConstraintPositionTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_PathConstraintPositionTimeline.VALUE]=T}apply(A,_,T,E,C,P,I){const F=this.frames,R=A.pathConstraints[this.pathConstraintIndex];if(T<F[0]){switch(P){case MixBlend.setup:R.position=R.data.position;return;case MixBlend.first:R.position+=(R.data.position-R.position)*C}return}let B=0;if(T>=F[F.length-_PathConstraintPositionTimeline.ENTRIES])B=F[F.length+_PathConstraintPositionTimeline.PREV_VALUE];else{const O=Animation$1.binarySearch(F,T,_PathConstraintPositionTimeline.ENTRIES);B=F[O+_PathConstraintPositionTimeline.PREV_VALUE];const V=F[O],L=this.getCurvePercent(O/_PathConstraintPositionTimeline.ENTRIES-1,1-(T-V)/(F[O+_PathConstraintPositionTimeline.PREV_TIME]-V));B+=(F[O+_PathConstraintPositionTimeline.VALUE]-B)*L}P==MixBlend.setup?R.position=R.data.position+(B-R.data.position)*C:R.position+=(B-R.position)*C}};let PathConstraintPositionTimeline$1=_PathConstraintPositionTimeline;PathConstraintPositionTimeline$1.ENTRIES=2;PathConstraintPositionTimeline$1.PREV_TIME=-2;PathConstraintPositionTimeline$1.PREV_VALUE=-1;PathConstraintPositionTimeline$1.VALUE=1;let PathConstraintSpacingTimeline$1=class dt extends PathConstraintPositionTimeline$1{constructor(_){super(_)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(_,T,E,C,P,I,F){const R=this.frames,B=_.pathConstraints[this.pathConstraintIndex];if(E<R[0]){switch(I){case MixBlend.setup:B.spacing=B.data.spacing;return;case MixBlend.first:B.spacing+=(B.data.spacing-B.spacing)*P}return}let O=0;if(E>=R[R.length-dt.ENTRIES])O=R[R.length+dt.PREV_VALUE];else{const V=Animation$1.binarySearch(R,E,dt.ENTRIES);O=R[V+dt.PREV_VALUE];const L=R[V],D=this.getCurvePercent(V/dt.ENTRIES-1,1-(E-L)/(R[V+dt.PREV_TIME]-L));O+=(R[V+dt.VALUE]-O)*D}I==MixBlend.setup?B.spacing=B.data.spacing+(O-B.data.spacing)*P:B.spacing+=(O-B.spacing)*P}};const _PathConstraintMixTimeline=class extends CurveTimeline$1{constructor(A){super(A),this.frames=Utils.newFloatArray(A*_PathConstraintMixTimeline.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(A,_,T,E){A*=_PathConstraintMixTimeline.ENTRIES,this.frames[A]=_,this.frames[A+_PathConstraintMixTimeline.ROTATE]=T,this.frames[A+_PathConstraintMixTimeline.TRANSLATE]=E}apply(A,_,T,E,C,P,I){const F=this.frames,R=A.pathConstraints[this.pathConstraintIndex];if(T<F[0]){switch(P){case MixBlend.setup:R.rotateMix=R.data.rotateMix,R.translateMix=R.data.translateMix;return;case MixBlend.first:R.rotateMix+=(R.data.rotateMix-R.rotateMix)*C,R.translateMix+=(R.data.translateMix-R.translateMix)*C}return}let B=0,O=0;if(T>=F[F.length-_PathConstraintMixTimeline.ENTRIES])B=F[F.length+_PathConstraintMixTimeline.PREV_ROTATE],O=F[F.length+_PathConstraintMixTimeline.PREV_TRANSLATE];else{const V=Animation$1.binarySearch(F,T,_PathConstraintMixTimeline.ENTRIES);B=F[V+_PathConstraintMixTimeline.PREV_ROTATE],O=F[V+_PathConstraintMixTimeline.PREV_TRANSLATE];const L=F[V],D=this.getCurvePercent(V/_PathConstraintMixTimeline.ENTRIES-1,1-(T-L)/(F[V+_PathConstraintMixTimeline.PREV_TIME]-L));B+=(F[V+_PathConstraintMixTimeline.ROTATE]-B)*D,O+=(F[V+_PathConstraintMixTimeline.TRANSLATE]-O)*D}P==MixBlend.setup?(R.rotateMix=R.data.rotateMix+(B-R.data.rotateMix)*C,R.translateMix=R.data.translateMix+(O-R.data.translateMix)*C):(R.rotateMix+=(B-R.rotateMix)*C,R.translateMix+=(O-R.translateMix)*C)}};let PathConstraintMixTimeline$1=_PathConstraintMixTimeline;PathConstraintMixTimeline$1.ENTRIES=3;PathConstraintMixTimeline$1.PREV_TIME=-3;PathConstraintMixTimeline$1.PREV_ROTATE=-2;PathConstraintMixTimeline$1.PREV_TRANSLATE=-1;PathConstraintMixTimeline$1.ROTATE=1;PathConstraintMixTimeline$1.TRANSLATE=2;new Animation$1("<empty>",[],0);let AtlasAttachmentLoader$1=class{constructor(_){this.atlas=_}newRegionAttachment(_,T,E){const C=this.atlas.findRegion(E);if(C==null)throw new Error(`Region not found in atlas: ${E} (region attachment: ${T})`);const P=new RegionAttachment$1(T);return P.region=C,P}newMeshAttachment(_,T,E){const C=this.atlas.findRegion(E);if(C==null)throw new Error(`Region not found in atlas: ${E} (mesh attachment: ${T})`);const P=new MeshAttachment$1(T);return P.region=C,P}newBoundingBoxAttachment(_,T){return new BoundingBoxAttachment$1(T)}newPathAttachment(_,T){return new PathAttachment$1(T)}newPointAttachment(_,T){return new PointAttachment$1(T)}newClippingAttachment(_,T){return new ClippingAttachment$1(T)}},BoneData$1=class{constructor(_,T,E){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=TransformMode.Normal,_<0)throw new Error("index must be >= 0.");if(T==null)throw new Error("name cannot be null.");this.index=_,this.name=T,this.parent=E}},Event$2=class{constructor(_,T){if(T==null)throw new Error("data cannot be null.");this.time=_,this.data=T}},EventData$1=class{constructor(_){this.name=_}},IkConstraintData$1=class{constructor(_){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=_}},PathConstraintData$1=class{constructor(_){this.order=0,this.bones=new Array,this.name=_}};var SpacingMode$1=(A=>(A[A.Length=0]="Length",A[A.Fixed=1]="Fixed",A[A.Percent=2]="Percent",A))(SpacingMode$1||{});let SkeletonData$1=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(_){if(_==null)throw new Error("boneName cannot be null.");const T=this.bones;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findBoneIndex(_){if(_==null)throw new Error("boneName cannot be null.");const T=this.bones;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}findSlot(_){if(_==null)throw new Error("slotName cannot be null.");const T=this.slots;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findSlotIndex(_){if(_==null)throw new Error("slotName cannot be null.");const T=this.slots;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}findSkin(_){if(_==null)throw new Error("skinName cannot be null.");const T=this.skins;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findEvent(_){if(_==null)throw new Error("eventDataName cannot be null.");const T=this.events;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findAnimation(_){if(_==null)throw new Error("animationName cannot be null.");const T=this.animations;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findIkConstraint(_){if(_==null)throw new Error("constraintName cannot be null.");const T=this.ikConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findTransformConstraint(_){if(_==null)throw new Error("constraintName cannot be null.");const T=this.transformConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findPathConstraint(_){if(_==null)throw new Error("constraintName cannot be null.");const T=this.pathConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findPathConstraintIndex(_){if(_==null)throw new Error("pathConstraintName cannot be null.");const T=this.pathConstraints;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}},SlotData$1=class{constructor(_,T,E){if(this.color=new Color(1,1,1,1),_<0)throw new Error("index must be >= 0.");if(T==null)throw new Error("name cannot be null.");if(E==null)throw new Error("boneData cannot be null.");this.index=_,this.name=T,this.boneData=E}},TransformConstraintData$1=class{constructor(_){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,_==null)throw new Error("name cannot be null.");this.name=_}},Skin$1=class{constructor(_){if(this.attachments=new Array,_==null)throw new Error("name cannot be null.");this.name=_}addAttachment(_,T,E){if(E==null)throw new Error("attachment cannot be null.");const C=this.attachments;_>=C.length&&(C.length=_+1),C[_]||(C[_]={}),C[_][T]=E}getAttachment(_,T){const E=this.attachments[_];return E?E[T]:null}attachAll(_,T){let E=0;for(let C=0;C<_.slots.length;C++){const P=_.slots[C],I=P.getAttachment();if(I&&E<T.attachments.length){const F=T.attachments[E];for(const R in F){const B=F[R];if(I==B){const O=this.getAttachment(E,R);O!=null&&P.setAttachment(O);break}}}E++}}},SkeletonJson$1=class bt{constructor(_){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=_}readSkeletonData(_){const T=this.scale,E=new SkeletonData$1,C=typeof _=="string"?JSON.parse(_):_,P=C.skeleton;if(P!=null&&(E.hash=P.hash,E.version=P.spine,E.width=P.width,E.height=P.height,E.fps=P.fps,E.imagesPath=P.images),C.bones)for(let I=0;I<C.bones.length;I++){const F=C.bones[I];let R=null;const B=this.getValue(F,"parent",null);if(B!=null&&(R=E.findBone(B),R==null))throw new Error(`Parent bone not found: ${B}`);const O=new BoneData$1(E.bones.length,F.name,R);O.length=this.getValue(F,"length",0)*T,O.x=this.getValue(F,"x",0)*T,O.y=this.getValue(F,"y",0)*T,O.rotation=this.getValue(F,"rotation",0),O.scaleX=this.getValue(F,"scaleX",1),O.scaleY=this.getValue(F,"scaleY",1),O.shearX=this.getValue(F,"shearX",0),O.shearY=this.getValue(F,"shearY",0),O.transformMode=bt.transformModeFromString(this.getValue(F,"transform","normal")),E.bones.push(O)}if(C.slots)for(let I=0;I<C.slots.length;I++){const F=C.slots[I],R=F.name,B=F.bone,O=E.findBone(B);if(O==null)throw new Error(`Slot bone not found: ${B}`);const V=new SlotData$1(E.slots.length,R,O),L=this.getValue(F,"color",null);L!=null&&V.color.setFromString(L);const D=this.getValue(F,"dark",null);D!=null&&(V.darkColor=new Color(1,1,1,1),V.darkColor.setFromString(D)),V.attachmentName=this.getValue(F,"attachment",null),V.blendMode=bt.blendModeFromString(this.getValue(F,"blend","normal")),E.slots.push(V)}if(C.ik)for(let I=0;I<C.ik.length;I++){const F=C.ik[I],R=new IkConstraintData$1(F.name);R.order=this.getValue(F,"order",0);for(let O=0;O<F.bones.length;O++){const V=F.bones[O],L=E.findBone(V);if(L==null)throw new Error(`IK bone not found: ${V}`);R.bones.push(L)}const B=F.target;if(R.target=E.findBone(B),R.target==null)throw new Error(`IK target bone not found: ${B}`);R.bendDirection=this.getValue(F,"bendPositive",!0)?1:-1,R.mix=this.getValue(F,"mix",1),E.ikConstraints.push(R)}if(C.transform)for(let I=0;I<C.transform.length;I++){const F=C.transform[I],R=new TransformConstraintData$1(F.name);R.order=this.getValue(F,"order",0);for(let O=0;O<F.bones.length;O++){const V=F.bones[O],L=E.findBone(V);if(L==null)throw new Error(`Transform constraint bone not found: ${V}`);R.bones.push(L)}const B=F.target;if(R.target=E.findBone(B),R.target==null)throw new Error(`Transform constraint target bone not found: ${B}`);R.local=this.getValue(F,"local",!1),R.relative=this.getValue(F,"relative",!1),R.offsetRotation=this.getValue(F,"rotation",0),R.offsetX=this.getValue(F,"x",0)*T,R.offsetY=this.getValue(F,"y",0)*T,R.offsetScaleX=this.getValue(F,"scaleX",0),R.offsetScaleY=this.getValue(F,"scaleY",0),R.offsetShearY=this.getValue(F,"shearY",0),R.rotateMix=this.getValue(F,"rotateMix",1),R.translateMix=this.getValue(F,"translateMix",1),R.scaleMix=this.getValue(F,"scaleMix",1),R.shearMix=this.getValue(F,"shearMix",1),E.transformConstraints.push(R)}if(C.path)for(let I=0;I<C.path.length;I++){const F=C.path[I],R=new PathConstraintData$1(F.name);R.order=this.getValue(F,"order",0);for(let O=0;O<F.bones.length;O++){const V=F.bones[O],L=E.findBone(V);if(L==null)throw new Error(`Transform constraint bone not found: ${V}`);R.bones.push(L)}const B=F.target;if(R.target=E.findSlot(B),R.target==null)throw new Error(`Path target slot not found: ${B}`);R.positionMode=bt.positionModeFromString(this.getValue(F,"positionMode","percent")),R.spacingMode=bt.spacingModeFromString(this.getValue(F,"spacingMode","length")),R.rotateMode=bt.rotateModeFromString(this.getValue(F,"rotateMode","tangent")),R.offsetRotation=this.getValue(F,"rotation",0),R.position=this.getValue(F,"position",0),R.positionMode==PositionMode.Fixed&&(R.position*=T),R.spacing=this.getValue(F,"spacing",0),(R.spacingMode==SpacingMode$1.Length||R.spacingMode==SpacingMode$1.Fixed)&&(R.spacing*=T),R.rotateMix=this.getValue(F,"rotateMix",1),R.translateMix=this.getValue(F,"translateMix",1),E.pathConstraints.push(R)}if(C.skins)for(const I in C.skins){const F=C.skins[I],R=new Skin$1(I);for(const B in F){const O=E.findSlotIndex(B);if(O==-1)throw new Error(`Slot not found: ${B}`);const V=F[B];for(const L in V){const D=this.readAttachment(V[L],R,O,L,E);D!=null&&R.addAttachment(O,L,D)}}E.skins.push(R),R.name=="default"&&(E.defaultSkin=R)}for(let I=0,F=this.linkedMeshes.length;I<F;I++){const R=this.linkedMeshes[I],B=R.skin==null?E.defaultSkin:E.findSkin(R.skin);if(B==null)throw new Error(`Skin not found: ${R.skin}`);const O=B.getAttachment(R.slotIndex,R.parent);if(O==null)throw new Error(`Parent mesh not found: ${R.parent}`);R.mesh.setParentMesh(O)}if(this.linkedMeshes.length=0,C.events)for(const I in C.events){const F=C.events[I],R=new EventData$1(I);R.intValue=this.getValue(F,"int",0),R.floatValue=this.getValue(F,"float",0),R.stringValue=this.getValue(F,"string",""),R.audioPath=this.getValue(F,"audio",null),R.audioPath!=null&&(R.volume=this.getValue(F,"volume",1),R.balance=this.getValue(F,"balance",0)),E.events.push(R)}if(C.animations)for(const I in C.animations){const F=C.animations[I];this.readAnimation(F,I,E)}return E}readAttachment(_,T,E,C,P){const I=this.scale;switch(C=this.getValue(_,"name",C),this.getValue(_,"type","region")){case"region":{const R=this.getValue(_,"path",C),B=this.attachmentLoader.newRegionAttachment(T,C,R);if(B==null)return null;B.path=R,B.x=this.getValue(_,"x",0)*I,B.y=this.getValue(_,"y",0)*I,B.scaleX=this.getValue(_,"scaleX",1),B.scaleY=this.getValue(_,"scaleY",1),B.rotation=this.getValue(_,"rotation",0),B.width=_.width*I,B.height=_.height*I;const O=this.getValue(_,"color",null);return O!=null&&B.color.setFromString(O),B}case"boundingbox":{const R=this.attachmentLoader.newBoundingBoxAttachment(T,C);if(R==null)return null;this.readVertices(_,R,_.vertexCount<<1);const B=this.getValue(_,"color",null);return B!=null&&R.color.setFromString(B),R}case"mesh":case"linkedmesh":{const R=this.getValue(_,"path",C),B=this.attachmentLoader.newMeshAttachment(T,C,R);if(B==null)return null;B.path=R;const O=this.getValue(_,"color",null);O!=null&&B.color.setFromString(O);const V=this.getValue(_,"parent",null);if(V!=null)return B.inheritDeform=this.getValue(_,"deform",!0),this.linkedMeshes.push(new LinkedMesh$2(B,this.getValue(_,"skin",null),E,V)),B;const L=_.uvs;return this.readVertices(_,B,L.length),B.triangles=_.triangles,B.regionUVs=new Float32Array(L),B.hullLength=this.getValue(_,"hull",0)*2,B}case"path":{const R=this.attachmentLoader.newPathAttachment(T,C);if(R==null)return null;R.closed=this.getValue(_,"closed",!1),R.constantSpeed=this.getValue(_,"constantSpeed",!0);const B=_.vertexCount;this.readVertices(_,R,B<<1);const O=Utils.newArray(B/3,0);for(let L=0;L<_.lengths.length;L++)O[L]=_.lengths[L]*I;R.lengths=O;const V=this.getValue(_,"color",null);return V!=null&&R.color.setFromString(V),R}case"point":{const R=this.attachmentLoader.newPointAttachment(T,C);if(R==null)return null;R.x=this.getValue(_,"x",0)*I,R.y=this.getValue(_,"y",0)*I,R.rotation=this.getValue(_,"rotation",0);const B=this.getValue(_,"color",null);return B!=null&&R.color.setFromString(B),R}case"clipping":{const R=this.attachmentLoader.newClippingAttachment(T,C);if(R==null)return null;const B=this.getValue(_,"end",null);if(B!=null){const L=P.findSlot(B);if(L==null)throw new Error(`Clipping end slot not found: ${B}`);R.endSlot=L}const O=_.vertexCount;this.readVertices(_,R,O<<1);const V=this.getValue(_,"color",null);return V!=null&&R.color.setFromString(V),R}}return null}readVertices(_,T,E){const C=this.scale;T.worldVerticesLength=E;const P=_.vertices;if(E==P.length){const R=Utils.toFloatArray(P);if(C!=1)for(let B=0,O=P.length;B<O;B++)R[B]*=C;T.vertices=R;return}const I=new Array,F=new Array;for(let R=0,B=P.length;R<B;){const O=P[R++];F.push(O);for(let V=R+O*4;R<V;R+=4)F.push(P[R]),I.push(P[R+1]*C),I.push(P[R+2]*C),I.push(P[R+3])}T.bones=F,T.vertices=Utils.toFloatArray(I)}readAnimation(_,T,E){const C=this.scale,P=new Array;let I=0;if(_.slots)for(const R in _.slots){const B=_.slots[R],O=E.findSlotIndex(R);if(O==-1)throw new Error(`Slot not found: ${R}`);for(const V in B){const L=B[V];if(V=="attachment"){const D=new AttachmentTimeline$1(L.length);D.slotIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G];D.setFrame(U++,X.time,X.name)}P.push(D),I=Math.max(I,D.frames[D.getFrameCount()-1])}else if(V=="color"){const D=new ColorTimeline(L.length);D.slotIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G],z=new Color;z.setFromString(X.color||"ffffffff"),D.setFrame(U,X.time,z.r,z.g,z.b,z.a),this.readCurve(X,D,U),U++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*ColorTimeline.ENTRIES])}else if(V=="twoColor"){const D=new TwoColorTimeline(L.length);D.slotIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G],z=new Color,Y=new Color;z.setFromString(X.light),Y.setFromString(X.dark),D.setFrame(U,X.time,z.r,z.g,z.b,z.a,Y.r,Y.g,Y.b),this.readCurve(X,D,U),U++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*TwoColorTimeline.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${V} (${R})`)}}if(_.bones)for(const R in _.bones){const B=_.bones[R],O=E.findBoneIndex(R);if(O==-1)throw new Error(`Bone not found: ${R}`);for(const V in B){const L=B[V];if(V==="rotate"){const D=new RotateTimeline$1(L.length);D.boneIndex=O;let U=0;for(let G=0;G<L.length;G++){const X=L[G];D.setFrame(U,X.time,X.angle),this.readCurve(X,D,U),U++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*RotateTimeline$1.ENTRIES])}else if(V==="translate"||V==="scale"||V==="shear"){let D=null,U=1;V==="scale"?D=new ScaleTimeline$1(L.length):V==="shear"?D=new ShearTimeline$1(L.length):(D=new TranslateTimeline$1(L.length),U=C),D.boneIndex=O;let G=0;for(let X=0;X<L.length;X++){const z=L[X],Y=this.getValue(z,"x",0),W=this.getValue(z,"y",0);D.setFrame(G,z.time,Y*U,W*U),this.readCurve(z,D,G),G++}P.push(D),I=Math.max(I,D.frames[(D.getFrameCount()-1)*TranslateTimeline$1.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${V} (${R})`)}}if(_.ik)for(const R in _.ik){const B=_.ik[R],O=E.findIkConstraint(R),V=new IkConstraintTimeline$1(B.length);V.ikConstraintIndex=E.ikConstraints.indexOf(O);let L=0;for(let D=0;D<B.length;D++){const U=B[D];V.setFrame(L,U.time,this.getValue(U,"mix",1),this.getValue(U,"bendPositive",!0)?1:-1,this.getValue(U,"compress",!1),this.getValue(U,"stretch",!1)),this.readCurve(U,V,L),L++}P.push(V),I=Math.max(I,V.frames[(V.getFrameCount()-1)*IkConstraintTimeline$1.ENTRIES])}if(_.transform)for(const R in _.transform){const B=_.transform[R],O=E.findTransformConstraint(R),V=new TransformConstraintTimeline$1(B.length);V.transformConstraintIndex=E.transformConstraints.indexOf(O);let L=0;for(let D=0;D<B.length;D++){const U=B[D];V.setFrame(L,U.time,this.getValue(U,"rotateMix",1),this.getValue(U,"translateMix",1),this.getValue(U,"scaleMix",1),this.getValue(U,"shearMix",1)),this.readCurve(U,V,L),L++}P.push(V),I=Math.max(I,V.frames[(V.getFrameCount()-1)*TransformConstraintTimeline$1.ENTRIES])}if(_.paths)for(const R in _.paths){const B=_.paths[R],O=E.findPathConstraintIndex(R);if(O==-1)throw new Error(`Path constraint not found: ${R}`);const V=E.pathConstraints[O];for(const L in B){const D=B[L];if(L==="position"||L==="spacing"){let U=null,G=1;L==="spacing"?(U=new PathConstraintSpacingTimeline$1(D.length),(V.spacingMode==SpacingMode$1.Length||V.spacingMode==SpacingMode$1.Fixed)&&(G=C)):(U=new PathConstraintPositionTimeline$1(D.length),V.positionMode==PositionMode.Fixed&&(G=C)),U.pathConstraintIndex=O;let X=0;for(let z=0;z<D.length;z++){const Y=D[z];U.setFrame(X,Y.time,this.getValue(Y,L,0)*G),this.readCurve(Y,U,X),X++}P.push(U),I=Math.max(I,U.frames[(U.getFrameCount()-1)*PathConstraintPositionTimeline$1.ENTRIES])}else if(L==="mix"){const U=new PathConstraintMixTimeline$1(D.length);U.pathConstraintIndex=O;let G=0;for(let X=0;X<D.length;X++){const z=D[X];U.setFrame(G,z.time,this.getValue(z,"rotateMix",1),this.getValue(z,"translateMix",1)),this.readCurve(z,U,G),G++}P.push(U),I=Math.max(I,U.frames[(U.getFrameCount()-1)*PathConstraintMixTimeline$1.ENTRIES])}}}if(_.deform)for(const R in _.deform){const B=_.deform[R],O=E.findSkin(R);if(O!=null)for(const V in B){const L=B[V],D=E.findSlotIndex(V);if(D==-1)throw new Error(`Slot not found: ${L.name}`);for(const U in L){const G=L[U],X=O.getAttachment(D,U);if(X==null)throw new Error(`Deform attachment not found: ${G.name}`);const z=X.bones!=null,Y=X.vertices,W=z?Y.length/3*2:Y.length,q=new DeformTimeline$1(G.length);q.slotIndex=D,q.attachment=X;let K=0;for(let J=0;J<G.length;J++){const Z=G[J];let se;const ae=this.getValue(Z,"vertices",null);if(ae==null)se=z?Utils.newFloatArray(W):Y;else{se=Utils.newFloatArray(W);const ue=this.getValue(Z,"offset",0);if(Utils.arrayCopy(ae,0,se,ue,ae.length),C!=1)for(let ce=ue,he=ce+ae.length;ce<he;ce++)se[ce]*=C;if(!z)for(let ce=0;ce<W;ce++)se[ce]+=Y[ce]}q.setFrame(K,Z.time,se),this.readCurve(Z,q,K),K++}P.push(q),I=Math.max(I,q.frames[q.getFrameCount()-1])}}}let F=_.drawOrder;if(F==null&&(F=_.draworder),F!=null){const R=new DrawOrderTimeline$1(F.length),B=E.slots.length;let O=0;for(let V=0;V<F.length;V++){const L=F[V];let D=null;const U=this.getValue(L,"offsets",null);if(U!=null){D=Utils.newArray(B,-1);const G=Utils.newArray(B-U.length,0);let X=0,z=0;for(let Y=0;Y<U.length;Y++){const W=U[Y],q=E.findSlotIndex(W.slot);if(q==-1)throw new Error(`Slot not found: ${W.slot}`);for(;X!=q;)G[z++]=X++;D[X+W.offset]=X++}for(;X<B;)G[z++]=X++;for(let Y=B-1;Y>=0;Y--)D[Y]==-1&&(D[Y]=G[--z])}R.setFrame(O++,L.time,D)}P.push(R),I=Math.max(I,R.frames[R.getFrameCount()-1])}if(_.events){const R=new EventTimeline$1(_.events.length);let B=0;for(let O=0;O<_.events.length;O++){const V=_.events[O],L=E.findEvent(V.name);if(L==null)throw new Error(`Event not found: ${V.name}`);const D=new Event$2(Utils.toSinglePrecision(V.time),L);D.intValue=this.getValue(V,"int",L.intValue),D.floatValue=this.getValue(V,"float",L.floatValue),D.stringValue=this.getValue(V,"string",L.stringValue),D.data.audioPath!=null&&(D.volume=this.getValue(V,"volume",1),D.balance=this.getValue(V,"balance",0)),R.setFrame(B++,D)}P.push(R),I=Math.max(I,R.frames[R.getFrameCount()-1])}if(isNaN(I))throw new Error("Error while parsing animation, duration is NaN");E.animations.push(new Animation$1(T,P,I))}readCurve(_,T,E){if(_.curve){if(_.curve==="stepped")T.setStepped(E);else if(Object.prototype.toString.call(_.curve)==="[object Array]"){const C=_.curve;T.setCurve(E,C[0],C[1],C[2],C[3])}}}getValue(_,T,E){return _[T]!==void 0?_[T]:E}static blendModeFromString(_){if(_=_.toLowerCase(),_=="normal")return BLEND_MODES.NORMAL;if(_=="additive")return BLEND_MODES.ADD;if(_=="multiply")return BLEND_MODES.MULTIPLY;if(_=="screen")return BLEND_MODES.SCREEN;throw new Error(`Unknown blend mode: ${_}`)}static positionModeFromString(_){if(_=_.toLowerCase(),_=="fixed")return PositionMode.Fixed;if(_=="percent")return PositionMode.Percent;throw new Error(`Unknown position mode: ${_}`)}static spacingModeFromString(_){if(_=_.toLowerCase(),_=="length")return SpacingMode$1.Length;if(_=="fixed")return SpacingMode$1.Fixed;if(_=="percent")return SpacingMode$1.Percent;throw new Error(`Unknown position mode: ${_}`)}static rotateModeFromString(_){if(_=_.toLowerCase(),_=="tangent")return RotateMode.Tangent;if(_=="chain")return RotateMode.Chain;if(_=="chainscale")return RotateMode.ChainScale;throw new Error(`Unknown rotate mode: ${_}`)}static transformModeFromString(_){if(_=_.toLowerCase(),_=="normal")return TransformMode.Normal;if(_=="onlytranslation")return TransformMode.OnlyTranslation;if(_=="norotationorreflection")return TransformMode.NoRotationOrReflection;if(_=="noscale")return TransformMode.NoScale;if(_=="noscaleorreflection")return TransformMode.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${_}`)}},LinkedMesh$2=class{constructor(_,T,E,C){this.mesh=_,this.skin=T,this.slotIndex=E,this.parent=C}};class Attachment{constructor(_){if(!_)throw new Error("name cannot be null.");this.name=_}}const _VertexAttachment=class extends Attachment{constructor(A){super(A),this.id=_VertexAttachment.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVerticesOld(A,_){this.computeWorldVertices(A,0,this.worldVerticesLength,_,0,2)}computeWorldVertices(A,_,T,E,C,P){T=C+(T>>1)*P;const I=A.bone.skeleton,F=A.deform;let R=this.vertices;const B=this.bones;if(!B){F.length>0&&(R=F);const D=A.bone.matrix,U=D.tx,G=D.ty,X=D.a,z=D.c,Y=D.b,W=D.d;for(let q=_,K=C;K<T;q+=2,K+=P){const J=R[q],Z=R[q+1];E[K]=J*X+Z*z+U,E[K+1]=J*Y+Z*W+G}return}let O=0,V=0;for(let D=0;D<_;D+=2){const U=B[O];O+=U+1,V+=U}const L=I.bones;if(F.length==0)for(let D=C,U=V*3;D<T;D+=P){let G=0,X=0,z=B[O++];for(z+=O;O<z;O++,U+=3){const Y=L[B[O]].matrix,W=R[U],q=R[U+1],K=R[U+2];G+=(W*Y.a+q*Y.c+Y.tx)*K,X+=(W*Y.b+q*Y.d+Y.ty)*K}E[D]=G,E[D+1]=X}else{const D=F;for(let U=C,G=V*3,X=V<<1;U<T;U+=P){let z=0,Y=0,W=B[O++];for(W+=O;O<W;O++,G+=3,X+=2){const q=L[B[O]].matrix,K=R[G]+D[X],J=R[G+1]+D[X+1],Z=R[G+2];z+=(K*q.a+J*q.c+q.tx)*Z,Y+=(K*q.b+J*q.d+q.ty)*Z}E[U]=z,E[U+1]=Y}}}copyTo(A){this.bones?(A.bones=new Array(this.bones.length),Utils.arrayCopy(this.bones,0,A.bones,0,this.bones.length)):A.bones=null,this.vertices&&(A.vertices=Utils.newFloatArray(this.vertices.length),Utils.arrayCopy(this.vertices,0,A.vertices,0,this.vertices.length)),A.worldVerticesLength=this.worldVerticesLength,A.timelineAttachment=this.timelineAttachment}};let VertexAttachment=_VertexAttachment;VertexAttachment.nextID=0;class BoundingBoxAttachment extends VertexAttachment{constructor(_){super(_),this.type=AttachmentType.BoundingBox,this.color=new Color(1,1,1,1)}copy(){const _=new BoundingBoxAttachment(this.name);return this.copyTo(_),_.color.setFromColor(this.color),_}}class ClippingAttachment extends VertexAttachment{constructor(_){super(_),this.type=AttachmentType.Clipping,this.endSlot=null,this.color=new Color(.2275,.2275,.8078,1)}copy(){const _=new ClippingAttachment(this.name);return this.copyTo(_),_.endSlot=this.endSlot,_.color.setFromColor(this.color),_}}class MeshAttachment extends VertexAttachment{constructor(_,T){super(_),this.type=AttachmentType.Mesh,this.region=null,this.triangles=[],this.color=new Color(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new Color(0,0,0,0),this.path=T}getParentMesh(){return this.parentMesh}setParentMesh(_){this.parentMesh=_,_&&(this.bones=_.bones,this.vertices=_.vertices,this.worldVerticesLength=_.worldVerticesLength,this.regionUVs=_.regionUVs,this.triangles=_.triangles,this.hullLength=_.hullLength,this.worldVerticesLength=_.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const _=new MeshAttachment(this.name,this.path);return _.region=this.region,_.color.setFromColor(this.color),this.copyTo(_),_.regionUVs=new Float32Array(this.regionUVs.length),Utils.arrayCopy(this.regionUVs,0,_.regionUVs,0,this.regionUVs.length),_.triangles=new Array(this.triangles.length),Utils.arrayCopy(this.triangles,0,_.triangles,0,this.triangles.length),_.hullLength=this.hullLength,_.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(_.edges=new Array(this.edges.length),Utils.arrayCopy(this.edges,0,_.edges,0,this.edges.length)),_.width=this.width,_.height=this.height,_}computeWorldVertices(_,T,E,C,P,I){this.sequence!=null&&this.sequence.apply(_,this),super.computeWorldVertices(_,T,E,C,P,I)}newLinkedMesh(){const _=new MeshAttachment(this.name,this.path);return _.region=this.region,_.color.setFromColor(this.color),_.timelineAttachment=this.timelineAttachment,_.setParentMesh(this.parentMesh?this.parentMesh:this),_}}class PathAttachment extends VertexAttachment{constructor(_){super(_),this.type=AttachmentType.Path,this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new Color(1,1,1,1)}copy(){const _=new PathAttachment(this.name);return this.copyTo(_),_.lengths=new Array(this.lengths.length),Utils.arrayCopy(this.lengths,0,_.lengths,0,this.lengths.length),_.closed=closed,_.constantSpeed=this.constantSpeed,_.color.setFromColor(this.color),_}}class PointAttachment extends VertexAttachment{constructor(_){super(_),this.type=AttachmentType.Point,this.x=0,this.y=0,this.rotation=0,this.color=new Color(.38,.94,0,1)}computeWorldPosition(_,T){const E=_.matrix;return T.x=this.x*E.a+this.y*E.c+_.worldX,T.y=this.x*E.b+this.y*E.d+_.worldY,T}computeWorldRotation(_){const T=_.matrix,E=MathUtils.cosDeg(this.rotation),C=MathUtils.sinDeg(this.rotation),P=E*T.a+C*T.c,I=E*T.b+C*T.d;return Math.atan2(I,P)*MathUtils.radDeg}copy(){const _=new PointAttachment(this.name);return _.x=this.x,_.y=this.y,_.rotation=this.rotation,_.color.setFromColor(this.color),_}}const _RegionAttachment=class extends Attachment{constructor(A,_){super(A),this.type=AttachmentType.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new Color(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=Utils.newFloatArray(8),this.uvs=Utils.newFloatArray(8),this.tempColor=new Color(1,1,1,1),this.path=_}updateRegion(){if(!this.region)throw new Error("Region not set.");const A=this.region,_=this.width/this.region.originalWidth*this.scaleX,T=this.height/this.region.originalHeight*this.scaleY,E=-this.width/2*this.scaleX+this.region.offsetX*_,C=-this.height/2*this.scaleY+this.region.offsetY*T,P=E+this.region.width*_,I=C+this.region.height*T,F=this.rotation*Math.PI/180,R=Math.cos(F),B=Math.sin(F),O=this.x,V=this.y,L=E*R+O,D=E*B,U=C*R+V,G=C*B,X=P*R+O,z=P*B,Y=I*R+V,W=I*B,q=this.offset;q[0]=L-G,q[1]=U+D,q[2]=L-W,q[3]=Y+D,q[4]=X-W,q[5]=Y+z,q[6]=X-G,q[7]=U+z;const K=this.uvs;A.degrees==90?(K[2]=A.u,K[3]=A.v2,K[4]=A.u,K[5]=A.v,K[6]=A.u2,K[7]=A.v,K[0]=A.u2,K[1]=A.v2):(K[0]=A.u,K[1]=A.v2,K[2]=A.u,K[3]=A.v,K[4]=A.u2,K[5]=A.v,K[6]=A.u2,K[7]=A.v2)}computeWorldVertices(A,_,T,E){this.sequence!=null&&this.sequence.apply(A,this);const C=A.bone,P=this.offset,I=C.matrix,F=I.tx,R=I.ty,B=I.a,O=I.c,V=I.b,L=I.d;let D=0,U=0;D=P[0],U=P[1],_[T]=D*B+U*O+F,_[T+1]=D*V+U*L+R,T+=E,D=P[2],U=P[3],_[T]=D*B+U*O+F,_[T+1]=D*V+U*L+R,T+=E,D=P[4],U=P[5],_[T]=D*B+U*O+F,_[T+1]=D*V+U*L+R,T+=E,D=P[6],U=P[7],_[T]=D*B+U*O+F,_[T+1]=D*V+U*L+R}copy(){const A=new _RegionAttachment(this.name,this.path);return A.region=this.region,A.rendererObject=this.rendererObject,A.x=this.x,A.y=this.y,A.scaleX=this.scaleX,A.scaleY=this.scaleY,A.rotation=this.rotation,A.width=this.width,A.height=this.height,Utils.arrayCopy(this.uvs,0,A.uvs,0,8),Utils.arrayCopy(this.offset,0,A.offset,0,8),A.color.setFromColor(this.color),A.sequence=this.sequence!=null?this.sequence.copy():null,A}};let RegionAttachment=_RegionAttachment;RegionAttachment.X1=0;RegionAttachment.Y1=1;RegionAttachment.C1R=2;RegionAttachment.C1G=3;RegionAttachment.C1B=4;RegionAttachment.C1A=5;RegionAttachment.U1=6;RegionAttachment.V1=7;RegionAttachment.X2=8;RegionAttachment.Y2=9;RegionAttachment.C2R=10;RegionAttachment.C2G=11;RegionAttachment.C2B=12;RegionAttachment.C2A=13;RegionAttachment.U2=14;RegionAttachment.V2=15;RegionAttachment.X3=16;RegionAttachment.Y3=17;RegionAttachment.C3R=18;RegionAttachment.C3G=19;RegionAttachment.C3B=20;RegionAttachment.C3A=21;RegionAttachment.U3=22;RegionAttachment.V3=23;RegionAttachment.X4=24;RegionAttachment.Y4=25;RegionAttachment.C4R=26;RegionAttachment.C4G=27;RegionAttachment.C4B=28;RegionAttachment.C4A=29;RegionAttachment.U4=30;RegionAttachment.V4=31;const _Sequence=class{constructor(A){this.id=_Sequence.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(A)}copy(){const A=new _Sequence(this.regions.length);return Utils.arrayCopy(this.regions,0,A.regions,0,this.regions.length),A.start=this.start,A.digits=this.digits,A.setupIndex=this.setupIndex,A}apply(A,_){let T=A.sequenceIndex;T==-1&&(T=this.setupIndex),T>=this.regions.length&&(T=this.regions.length-1);const E=this.regions[T];_.region!=E&&(_.region=E)}getPath(A,_){let T=A;const E=(this.start+_).toString();for(let C=this.digits-E.length;C>0;C--)T+="0";return T+=E,T}static nextID(){return _Sequence._nextID++}};let Sequence=_Sequence;Sequence._nextID=0;var SequenceMode=(A=>(A[A.hold=0]="hold",A[A.once=1]="once",A[A.loop=2]="loop",A[A.pingpong=3]="pingpong",A[A.onceReverse=4]="onceReverse",A[A.loopReverse=5]="loopReverse",A[A.pingpongReverse=6]="pingpongReverse",A))(SequenceMode||{});const SequenceModeValues=[0,1,2,3,4,5,6];class Animation{constructor(_,T,E){if(this.timelines=[],this.timelineIds=new StringSet,!_)throw new Error("name cannot be null.");this.name=_,this.setTimelines(T),this.duration=E}setTimelines(_){if(!_)throw new Error("timelines cannot be null.");this.timelines=_,this.timelineIds.clear();for(let T=0;T<_.length;T++)this.timelineIds.addAll(_[T].getPropertyIds())}hasTimeline(_){for(let T=0;T<_.length;T++)if(this.timelineIds.contains(_[T]))return!0;return!1}apply(_,T,E,C,P,I,F,R){if(!_)throw new Error("skeleton cannot be null.");C&&this.duration!=0&&(E%=this.duration,T>0&&(T%=this.duration));const B=this.timelines;for(let O=0,V=B.length;O<V;O++)B[O].apply(_,T,E,P,I,F,R)}}const Property={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19};class Timeline{constructor(_,T){this.propertyIds=T,this.frames=Utils.newFloatArray(_*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(_,T){const E=_.length;for(let C=1;C<E;C++)if(_[C]>T)return C-1;return E-1}static search(_,T,E){const C=_.length;for(let P=E;P<C;P+=E)if(_[P]>T)return P-E;return C-E}}class CurveTimeline extends Timeline{constructor(_,T,E){super(_,E),this.curves=Utils.newFloatArray(_+T*18),this.curves[_-1]=1}setLinear(_){this.curves[_]=0}setStepped(_){this.curves[_]=1}shrink(_){const T=this.getFrameCount()+_*18;if(this.curves.length>T){const E=Utils.newFloatArray(T);Utils.arrayCopy(this.curves,0,E,0,T),this.curves=E}}setBezier(_,T,E,C,P,I,F,R,B,O,V){const L=this.curves;let D=this.getFrameCount()+_*18;E==0&&(L[T]=2+D);const U=(C-I*2+R)*.03,G=(P-F*2+B)*.03,X=((I-R)*3-C+O)*.006,z=((F-B)*3-P+V)*.006;let Y=U*2+X,W=G*2+z,q=(I-C)*.3+U+X*.16666667,K=(F-P)*.3+G+z*.16666667,J=C+q,Z=P+K;for(let se=D+18;D<se;D+=2)L[D]=J,L[D+1]=Z,q+=Y,K+=W,Y+=X,W+=z,J+=q,Z+=K}getBezierValue(_,T,E,C){const P=this.curves;if(P[C]>_){const B=this.frames[T],O=this.frames[T+E];return O+(_-B)/(P[C]-B)*(P[C+1]-O)}const I=C+18;for(C+=2;C<I;C+=2)if(P[C]>=_){const B=P[C-2],O=P[C-1];return O+(_-B)/(P[C]-B)*(P[C+1]-O)}T+=this.getFrameEntries();const F=P[I-2],R=P[I-1];return R+(_-F)/(this.frames[T]-F)*(this.frames[T+E]-R)}}class CurveTimeline1 extends CurveTimeline{constructor(_,T,E){super(_,T,[E])}getFrameEntries(){return 2}setFrame(_,T,E){_<<=1,this.frames[_]=T,this.frames[_+1]=E}getCurveValue(_){const T=this.frames;let E=T.length-2;for(let P=2;P<=E;P+=2)if(T[P]>_){E=P-2;break}const C=this.curves[E>>1];switch(C){case 0:const P=T[E],I=T[E+1];return I+(_-P)/(T[E+2]-P)*(T[E+2+1]-I);case 1:return T[E+1]}return this.getBezierValue(_,E,1,C-2)}}class CurveTimeline2 extends CurveTimeline{constructor(_,T,E,C){super(_,T,[E,C])}getFrameEntries(){return 3}setFrame(_,T,E,C){_*=3,this.frames[_]=T,this.frames[_+1]=E,this.frames[_+2]=C}}class RotateTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.rotate}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.rotation=R.data.rotation;return;case MixBlend.first:R.rotation+=(R.data.rotation-R.rotation)*P}return}let O=this.getCurveValue(E);switch(I){case MixBlend.setup:R.rotation=R.data.rotation+O*P;break;case MixBlend.first:case MixBlend.replace:O+=R.data.rotation-R.rotation;case MixBlend.add:R.rotation+=O*P}}}class TranslateTimeline extends CurveTimeline2{constructor(_,T,E){super(_,T,`${Property.x}|${E}`,`${Property.y}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.x=R.data.x,R.y=R.data.y;return;case MixBlend.first:R.x+=(R.data.x-R.x)*P,R.y+=(R.data.y-R.y)*P}return}let O=0,V=0;const L=Timeline.search(B,E,3),D=this.curves[L/3];switch(D){case 0:const U=B[L];O=B[L+1],V=B[L+2];const G=(E-U)/(B[L+3]-U);O+=(B[L+3+1]-O)*G,V+=(B[L+3+2]-V)*G;break;case 1:O=B[L+1],V=B[L+2];break;default:O=this.getBezierValue(E,L,1,D-2),V=this.getBezierValue(E,L,2,D+18-2)}switch(I){case MixBlend.setup:R.x=R.data.x+O*P,R.y=R.data.y+V*P;break;case MixBlend.first:case MixBlend.replace:R.x+=(R.data.x+O-R.x)*P,R.y+=(R.data.y+V-R.y)*P;break;case MixBlend.add:R.x+=O*P,R.y+=V*P}}}class TranslateXTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.x}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.x=R.data.x;return;case MixBlend.first:R.x+=(R.data.x-R.x)*P}return}const O=this.getCurveValue(E);switch(I){case MixBlend.setup:R.x=R.data.x+O*P;break;case MixBlend.first:case MixBlend.replace:R.x+=(R.data.x+O-R.x)*P;break;case MixBlend.add:R.x+=O*P}}}class TranslateYTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.y}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.y=R.data.y;return;case MixBlend.first:R.y+=(R.data.y-R.y)*P}return}const O=this.getCurveValue(E);switch(I){case MixBlend.setup:R.y=R.data.y+O*P;break;case MixBlend.first:case MixBlend.replace:R.y+=(R.data.y+O-R.y)*P;break;case MixBlend.add:R.y+=O*P}}}class ScaleTimeline extends CurveTimeline2{constructor(_,T,E){super(_,T,`${Property.scaleX}|${E}`,`${Property.scaleY}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.scaleX=R.data.scaleX,R.scaleY=R.data.scaleY;return;case MixBlend.first:R.scaleX+=(R.data.scaleX-R.scaleX)*P,R.scaleY+=(R.data.scaleY-R.scaleY)*P}return}let O,V;const L=Timeline.search(B,E,3),D=this.curves[L/3];switch(D){case 0:const U=B[L];O=B[L+1],V=B[L+2];const G=(E-U)/(B[L+3]-U);O+=(B[L+3+1]-O)*G,V+=(B[L+3+2]-V)*G;break;case 1:O=B[L+1],V=B[L+2];break;default:O=this.getBezierValue(E,L,1,D-2),V=this.getBezierValue(E,L,2,D+18-2)}if(O*=R.data.scaleX,V*=R.data.scaleY,P==1)I==MixBlend.add?(R.scaleX+=O-R.data.scaleX,R.scaleY+=V-R.data.scaleY):(R.scaleX=O,R.scaleY=V);else{let U=0,G=0;if(F==MixDirection.mixOut)switch(I){case MixBlend.setup:U=R.data.scaleX,G=R.data.scaleY,R.scaleX=U+(Math.abs(O)*MathUtils.signum(U)-U)*P,R.scaleY=G+(Math.abs(V)*MathUtils.signum(G)-G)*P;break;case MixBlend.first:case MixBlend.replace:U=R.scaleX,G=R.scaleY,R.scaleX=U+(Math.abs(O)*MathUtils.signum(U)-U)*P,R.scaleY=G+(Math.abs(V)*MathUtils.signum(G)-G)*P;break;case MixBlend.add:R.scaleX+=(O-R.data.scaleX)*P,R.scaleY+=(V-R.data.scaleY)*P}else switch(I){case MixBlend.setup:U=Math.abs(R.data.scaleX)*MathUtils.signum(O),G=Math.abs(R.data.scaleY)*MathUtils.signum(V),R.scaleX=U+(O-U)*P,R.scaleY=G+(V-G)*P;break;case MixBlend.first:case MixBlend.replace:U=Math.abs(R.scaleX)*MathUtils.signum(O),G=Math.abs(R.scaleY)*MathUtils.signum(V),R.scaleX=U+(O-U)*P,R.scaleY=G+(V-G)*P;break;case MixBlend.add:R.scaleX+=(O-R.data.scaleX)*P,R.scaleY+=(V-R.data.scaleY)*P}}}}class ScaleXTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.scaleX}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.scaleX=R.data.scaleX;return;case MixBlend.first:R.scaleX+=(R.data.scaleX-R.scaleX)*P}return}const O=this.getCurveValue(E)*R.data.scaleX;if(P==1)I==MixBlend.add?R.scaleX+=O-R.data.scaleX:R.scaleX=O;else{let V=0;if(F==MixDirection.mixOut)switch(I){case MixBlend.setup:V=R.data.scaleX,R.scaleX=V+(Math.abs(O)*MathUtils.signum(V)-V)*P;break;case MixBlend.first:case MixBlend.replace:V=R.scaleX,R.scaleX=V+(Math.abs(O)*MathUtils.signum(V)-V)*P;break;case MixBlend.add:R.scaleX+=(O-R.data.scaleX)*P}else switch(I){case MixBlend.setup:V=Math.abs(R.data.scaleX)*MathUtils.signum(O),R.scaleX=V+(O-V)*P;break;case MixBlend.first:case MixBlend.replace:V=Math.abs(R.scaleX)*MathUtils.signum(O),R.scaleX=V+(O-V)*P;break;case MixBlend.add:R.scaleX+=(O-R.data.scaleX)*P}}}}class ScaleYTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.scaleY}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.scaleY=R.data.scaleY;return;case MixBlend.first:R.scaleY+=(R.data.scaleY-R.scaleY)*P}return}const O=this.getCurveValue(E)*R.data.scaleY;if(P==1)I==MixBlend.add?R.scaleY+=O-R.data.scaleY:R.scaleY=O;else{let V=0;if(F==MixDirection.mixOut)switch(I){case MixBlend.setup:V=R.data.scaleY,R.scaleY=V+(Math.abs(O)*MathUtils.signum(V)-V)*P;break;case MixBlend.first:case MixBlend.replace:V=R.scaleY,R.scaleY=V+(Math.abs(O)*MathUtils.signum(V)-V)*P;break;case MixBlend.add:R.scaleY+=(O-R.data.scaleY)*P}else switch(I){case MixBlend.setup:V=Math.abs(R.data.scaleY)*MathUtils.signum(O),R.scaleY=V+(O-V)*P;break;case MixBlend.first:case MixBlend.replace:V=Math.abs(R.scaleY)*MathUtils.signum(O),R.scaleY=V+(O-V)*P;break;case MixBlend.add:R.scaleY+=(O-R.data.scaleY)*P}}}}class ShearTimeline extends CurveTimeline2{constructor(_,T,E){super(_,T,`${Property.shearX}|${E}`,`${Property.shearY}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.shearX=R.data.shearX,R.shearY=R.data.shearY;return;case MixBlend.first:R.shearX+=(R.data.shearX-R.shearX)*P,R.shearY+=(R.data.shearY-R.shearY)*P}return}let O=0,V=0;const L=Timeline.search(B,E,3),D=this.curves[L/3];switch(D){case 0:const U=B[L];O=B[L+1],V=B[L+2];const G=(E-U)/(B[L+3]-U);O+=(B[L+3+1]-O)*G,V+=(B[L+3+2]-V)*G;break;case 1:O=B[L+1],V=B[L+2];break;default:O=this.getBezierValue(E,L,1,D-2),V=this.getBezierValue(E,L,2,D+18-2)}switch(I){case MixBlend.setup:R.shearX=R.data.shearX+O*P,R.shearY=R.data.shearY+V*P;break;case MixBlend.first:case MixBlend.replace:R.shearX+=(R.data.shearX+O-R.shearX)*P,R.shearY+=(R.data.shearY+V-R.shearY)*P;break;case MixBlend.add:R.shearX+=O*P,R.shearY+=V*P}}}class ShearXTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.shearX}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.shearX=R.data.shearX;return;case MixBlend.first:R.shearX+=(R.data.shearX-R.shearX)*P}return}const O=this.getCurveValue(E);switch(I){case MixBlend.setup:R.shearX=R.data.shearX+O*P;break;case MixBlend.first:case MixBlend.replace:R.shearX+=(R.data.shearX+O-R.shearX)*P;break;case MixBlend.add:R.shearX+=O*P}}}class ShearYTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.shearY}|${E}`),this.boneIndex=0,this.boneIndex=E}apply(_,T,E,C,P,I,F){const R=_.bones[this.boneIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.shearY=R.data.shearY;return;case MixBlend.first:R.shearY+=(R.data.shearY-R.shearY)*P}return}const O=this.getCurveValue(E);switch(I){case MixBlend.setup:R.shearY=R.data.shearY+O*P;break;case MixBlend.first:case MixBlend.replace:R.shearY+=(R.data.shearY+O-R.shearY)*P;break;case MixBlend.add:R.shearY+=O*P}}}class RGBATimeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.rgb}|${E}`,`${Property.alpha}|${E}`]),this.slotIndex=0,this.slotIndex=E}getFrameEntries(){return 5}setFrame(_,T,E,C,P,I){_*=5,this.frames[_]=T,this.frames[_+1]=E,this.frames[_+2]=C,this.frames[_+3]=P,this.frames[_+4]=I}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=this.frames,O=R.color;if(E<B[0]){const z=R.data.color;switch(I){case MixBlend.setup:O.setFromColor(z);return;case MixBlend.first:O.add((z.r-O.r)*P,(z.g-O.g)*P,(z.b-O.b)*P,(z.a-O.a)*P)}return}let V=0,L=0,D=0,U=0;const G=Timeline.search(B,E,5),X=this.curves[G/5];switch(X){case 0:const z=B[G];V=B[G+1],L=B[G+2],D=B[G+3],U=B[G+4];const Y=(E-z)/(B[G+5]-z);V+=(B[G+5+1]-V)*Y,L+=(B[G+5+2]-L)*Y,D+=(B[G+5+3]-D)*Y,U+=(B[G+5+4]-U)*Y;break;case 1:V=B[G+1],L=B[G+2],D=B[G+3],U=B[G+4];break;default:V=this.getBezierValue(E,G,1,X-2),L=this.getBezierValue(E,G,2,X+18-2),D=this.getBezierValue(E,G,3,X+18*2-2),U=this.getBezierValue(E,G,4,X+18*3-2)}P==1?O.set(V,L,D,U):(I==MixBlend.setup&&O.setFromColor(R.data.color),O.add((V-O.r)*P,(L-O.g)*P,(D-O.b)*P,(U-O.a)*P))}}class RGBTimeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.rgb}|${E}`]),this.slotIndex=0,this.slotIndex=E}getFrameEntries(){return 4}setFrame(_,T,E,C,P){_<<=2,this.frames[_]=T,this.frames[_+1]=E,this.frames[_+2]=C,this.frames[_+3]=P}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=this.frames,O=R.color;if(E<B[0]){const X=R.data.color;switch(I){case MixBlend.setup:O.r=X.r,O.g=X.g,O.b=X.b;return;case MixBlend.first:O.r+=(X.r-O.r)*P,O.g+=(X.g-O.g)*P,O.b+=(X.b-O.b)*P}return}let V=0,L=0,D=0;const U=Timeline.search(B,E,4),G=this.curves[U>>2];switch(G){case 0:const X=B[U];V=B[U+1],L=B[U+2],D=B[U+3];const z=(E-X)/(B[U+4]-X);V+=(B[U+4+1]-V)*z,L+=(B[U+4+2]-L)*z,D+=(B[U+4+3]-D)*z;break;case 1:V=B[U+1],L=B[U+2],D=B[U+3];break;default:V=this.getBezierValue(E,U,1,G-2),L=this.getBezierValue(E,U,2,G+18-2),D=this.getBezierValue(E,U,3,G+18*2-2)}if(P==1)O.r=V,O.g=L,O.b=D;else{if(I==MixBlend.setup){const X=R.data.color;O.r=X.r,O.g=X.g,O.b=X.b}O.r+=(V-O.r)*P,O.g+=(L-O.g)*P,O.b+=(D-O.b)*P}}}class AlphaTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.alpha}|${E}`),this.slotIndex=0,this.slotIndex=E}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=R.color;if(E<this.frames[0]){const V=R.data.color;switch(I){case MixBlend.setup:B.a=V.a;return;case MixBlend.first:B.a+=(V.a-B.a)*P}return}const O=this.getCurveValue(E);P==1?B.a=O:(I==MixBlend.setup&&(B.a=R.data.color.a),B.a+=(O-B.a)*P)}}class RGBA2Timeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.rgb}|${E}`,`${Property.alpha}|${E}`,`${Property.rgb2}|${E}`]),this.slotIndex=0,this.slotIndex=E}getFrameEntries(){return 8}setFrame(_,T,E,C,P,I,F,R,B){_<<=3,this.frames[_]=T,this.frames[_+1]=E,this.frames[_+2]=C,this.frames[_+3]=P,this.frames[_+4]=I,this.frames[_+5]=F,this.frames[_+6]=R,this.frames[_+7]=B}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=this.frames,O=R.color,V=R.darkColor;if(E<B[0]){const K=R.data.color,J=R.data.darkColor;switch(I){case MixBlend.setup:O.setFromColor(K),V.r=J.r,V.g=J.g,V.b=J.b;return;case MixBlend.first:O.add((K.r-O.r)*P,(K.g-O.g)*P,(K.b-O.b)*P,(K.a-O.a)*P),V.r+=(J.r-V.r)*P,V.g+=(J.g-V.g)*P,V.b+=(J.b-V.b)*P}return}let L=0,D=0,U=0,G=0,X=0,z=0,Y=0;const W=Timeline.search(B,E,8),q=this.curves[W>>3];switch(q){case 0:const K=B[W];L=B[W+1],D=B[W+2],U=B[W+3],G=B[W+4],X=B[W+5],z=B[W+6],Y=B[W+7];const J=(E-K)/(B[W+8]-K);L+=(B[W+8+1]-L)*J,D+=(B[W+8+2]-D)*J,U+=(B[W+8+3]-U)*J,G+=(B[W+8+4]-G)*J,X+=(B[W+8+5]-X)*J,z+=(B[W+8+6]-z)*J,Y+=(B[W+8+7]-Y)*J;break;case 1:L=B[W+1],D=B[W+2],U=B[W+3],G=B[W+4],X=B[W+5],z=B[W+6],Y=B[W+7];break;default:L=this.getBezierValue(E,W,1,q-2),D=this.getBezierValue(E,W,2,q+18-2),U=this.getBezierValue(E,W,3,q+18*2-2),G=this.getBezierValue(E,W,4,q+18*3-2),X=this.getBezierValue(E,W,5,q+18*4-2),z=this.getBezierValue(E,W,6,q+18*5-2),Y=this.getBezierValue(E,W,7,q+18*6-2)}if(P==1)O.set(L,D,U,G),V.r=X,V.g=z,V.b=Y;else{if(I==MixBlend.setup){O.setFromColor(R.data.color);const K=R.data.darkColor;V.r=K.r,V.g=K.g,V.b=K.b}O.add((L-O.r)*P,(D-O.g)*P,(U-O.b)*P,(G-O.a)*P),V.r+=(X-V.r)*P,V.g+=(z-V.g)*P,V.b+=(Y-V.b)*P}}}class RGB2Timeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.rgb}|${E}`,`${Property.rgb2}|${E}`]),this.slotIndex=0,this.slotIndex=E}getFrameEntries(){return 7}setFrame(_,T,E,C,P,I,F,R){_*=7,this.frames[_]=T,this.frames[_+1]=E,this.frames[_+2]=C,this.frames[_+3]=P,this.frames[_+4]=I,this.frames[_+5]=F,this.frames[_+6]=R}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=this.frames,O=R.color,V=R.darkColor;if(E<B[0]){const q=R.data.color,K=R.data.darkColor;switch(I){case MixBlend.setup:O.r=q.r,O.g=q.g,O.b=q.b,V.r=K.r,V.g=K.g,V.b=K.b;return;case MixBlend.first:O.r+=(q.r-O.r)*P,O.g+=(q.g-O.g)*P,O.b+=(q.b-O.b)*P,V.r+=(K.r-V.r)*P,V.g+=(K.g-V.g)*P,V.b+=(K.b-V.b)*P}return}let L=0,D=0,U=0,G=0,X=0,z=0;const Y=Timeline.search(B,E,7),W=this.curves[Y/7];switch(W){case 0:const q=B[Y];L=B[Y+1],D=B[Y+2],U=B[Y+3],G=B[Y+4],X=B[Y+5],z=B[Y+6];const K=(E-q)/(B[Y+7]-q);L+=(B[Y+7+1]-L)*K,D+=(B[Y+7+2]-D)*K,U+=(B[Y+7+3]-U)*K,G+=(B[Y+7+4]-G)*K,X+=(B[Y+7+5]-X)*K,z+=(B[Y+7+6]-z)*K;break;case 1:L=B[Y+1],D=B[Y+2],U=B[Y+3],G=B[Y+4],X=B[Y+5],z=B[Y+6];break;default:L=this.getBezierValue(E,Y,1,W-2),D=this.getBezierValue(E,Y,2,W+18-2),U=this.getBezierValue(E,Y,3,W+18*2-2),G=this.getBezierValue(E,Y,4,W+18*3-2),X=this.getBezierValue(E,Y,5,W+18*4-2),z=this.getBezierValue(E,Y,6,W+18*5-2)}if(P==1)O.r=L,O.g=D,O.b=U,V.r=G,V.g=X,V.b=z;else{if(I==MixBlend.setup){const q=R.data.color,K=R.data.darkColor;O.r=q.r,O.g=q.g,O.b=q.b,V.r=K.r,V.g=K.g,V.b=K.b}O.r+=(L-O.r)*P,O.g+=(D-O.g)*P,O.b+=(U-O.b)*P,V.r+=(G-V.r)*P,V.g+=(X-V.g)*P,V.b+=(z-V.b)*P}}}class AttachmentTimeline extends Timeline{constructor(_,T){super(_,[`${Property.attachment}|${T}`]),this.slotIndex=0,this.slotIndex=T,this.attachmentNames=new Array(_)}getFrameCount(){return this.frames.length}setFrame(_,T,E){this.frames[_]=T,this.attachmentNames[_]=E}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(R.bone.active){if(F==MixDirection.mixOut){I==MixBlend.setup&&this.setAttachment(_,R,R.data.attachmentName);return}if(E<this.frames[0]){(I==MixBlend.setup||I==MixBlend.first)&&this.setAttachment(_,R,R.data.attachmentName);return}this.setAttachment(_,R,this.attachmentNames[Timeline.search1(this.frames,E)])}}setAttachment(_,T,E){T.setAttachment(E?_.getAttachment(this.slotIndex,E):null)}}class DeformTimeline extends CurveTimeline{constructor(_,T,E,C){super(_,T,[`${Property.deform}|${E}|${C.id}`]),this.slotIndex=0,this.slotIndex=E,this.attachment=C,this.vertices=new Array(_)}getFrameCount(){return this.frames.length}setFrame(_,T,E){this.frames[_]=T,this.vertices[_]=E}setBezier(_,T,E,C,P,I,F,R,B,O,V){const L=this.curves;let D=this.getFrameCount()+_*18;E==0&&(L[T]=2+D);const U=(C-I*2+R)*.03,G=B*.03-F*.06,X=((I-R)*3-C+O)*.006,z=(F-B+.33333333)*.018;let Y=U*2+X,W=G*2+z,q=(I-C)*.3+U+X*.16666667,K=F*.3+G+z*.16666667,J=C+q,Z=K;for(let se=D+18;D<se;D+=2)L[D]=J,L[D+1]=Z,q+=Y,K+=W,Y+=X,W+=z,J+=q,Z+=K}getCurvePercent(_,T){const E=this.curves;let C=E[T];switch(C){case 0:const R=this.frames[T];return(_-R)/(this.frames[T+this.getFrameEntries()]-R);case 1:return 0}if(C-=2,E[C]>_){const R=this.frames[T];return E[C+1]*(_-R)/(E[C]-R)}const P=C+18;for(C+=2;C<P;C+=2)if(E[C]>=_){const R=E[C-2],B=E[C-1];return B+(_-R)/(E[C]-R)*(E[C+1]-B)}const I=E[P-2],F=E[P-1];return F+(1-F)*(_-I)/(this.frames[T+this.getFrameEntries()]-I)}apply(_,T,E,C,P,I,F){const R=_.slots[this.slotIndex];if(!R.bone.active)return;const B=R.getAttachment();if(!B||!(B instanceof VertexAttachment)||B.timelineAttachment!=this.attachment)return;const O=R.deform;O.length==0&&(I=MixBlend.setup);const V=this.vertices,L=V[0].length,D=this.frames;if(E<D[0]){switch(I){case MixBlend.setup:O.length=0;return;case MixBlend.first:if(P==1){O.length=0;return}O.length=L;const Y=B;if(Y.bones){P=1-P;for(let W=0;W<L;W++)O[W]*=P}else{const W=Y.vertices;for(let q=0;q<L;q++)O[q]+=(W[q]-O[q])*P}}return}if(O.length=L,E>=D[D.length-1]){const Y=V[D.length-1];if(P==1)if(I==MixBlend.add){const W=B;if(W.bones)for(let q=0;q<L;q++)O[q]+=Y[q];else{const q=W.vertices;for(let K=0;K<L;K++)O[K]+=Y[K]-q[K]}}else Utils.arrayCopy(Y,0,O,0,L);else switch(I){case MixBlend.setup:{const q=B;if(q.bones)for(let K=0;K<L;K++)O[K]=Y[K]*P;else{const K=q.vertices;for(let J=0;J<L;J++){const Z=K[J];O[J]=Z+(Y[J]-Z)*P}}break}case MixBlend.first:case MixBlend.replace:for(let q=0;q<L;q++)O[q]+=(Y[q]-O[q])*P;break;case MixBlend.add:const W=B;if(W.bones)for(let q=0;q<L;q++)O[q]+=Y[q]*P;else{const q=W.vertices;for(let K=0;K<L;K++)O[K]+=(Y[K]-q[K])*P}}return}const U=Timeline.search1(D,E),G=this.getCurvePercent(E,U),X=V[U],z=V[U+1];if(P==1)if(I==MixBlend.add){const Y=B;if(Y.bones)for(let W=0;W<L;W++){const q=X[W];O[W]+=q+(z[W]-q)*G}else{const W=Y.vertices;for(let q=0;q<L;q++){const K=X[q];O[q]+=K+(z[q]-K)*G-W[q]}}}else for(let Y=0;Y<L;Y++){const W=X[Y];O[Y]=W+(z[Y]-W)*G}else switch(I){case MixBlend.setup:{const W=B;if(W.bones)for(let q=0;q<L;q++){const K=X[q];O[q]=(K+(z[q]-K)*G)*P}else{const q=W.vertices;for(let K=0;K<L;K++){const J=X[K],Z=q[K];O[K]=Z+(J+(z[K]-J)*G-Z)*P}}break}case MixBlend.first:case MixBlend.replace:for(let W=0;W<L;W++){const q=X[W];O[W]+=(q+(z[W]-q)*G-O[W])*P}break;case MixBlend.add:const Y=B;if(Y.bones)for(let W=0;W<L;W++){const q=X[W];O[W]+=(q+(z[W]-q)*G)*P}else{const W=Y.vertices;for(let q=0;q<L;q++){const K=X[q];O[q]+=(K+(z[q]-K)*G-W[q])*P}}}}}const _EventTimeline=class extends Timeline{constructor(A){super(A,_EventTimeline.propertyIds),this.events=new Array(A)}getFrameCount(){return this.frames.length}setFrame(A,_){this.frames[A]=_.time,this.events[A]=_}apply(A,_,T,E,C,P,I){if(!E)return;const F=this.frames,R=this.frames.length;if(_>T)this.apply(A,_,Number.MAX_VALUE,E,C,P,I),_=-1;else if(_>=F[R-1])return;if(T<F[0])return;let B=0;if(_<F[0])B=0;else{B=Timeline.search1(F,_)+1;const O=F[B];for(;B>0&&F[B-1]==O;)B--}for(;B<R&&T>=F[B];B++)E.push(this.events[B])}};let EventTimeline=_EventTimeline;EventTimeline.propertyIds=[`${Property.event}`];const _DrawOrderTimeline=class extends Timeline{constructor(A){super(A,_DrawOrderTimeline.propertyIds),this.drawOrders=new Array(A)}getFrameCount(){return this.frames.length}setFrame(A,_,T){this.frames[A]=_,this.drawOrders[A]=T}apply(A,_,T,E,C,P,I){if(I==MixDirection.mixOut){P==MixBlend.setup&&Utils.arrayCopy(A.slots,0,A.drawOrder,0,A.slots.length);return}if(T<this.frames[0]){(P==MixBlend.setup||P==MixBlend.first)&&Utils.arrayCopy(A.slots,0,A.drawOrder,0,A.slots.length);return}const F=Timeline.search1(this.frames,T),R=this.drawOrders[F];if(!R)Utils.arrayCopy(A.slots,0,A.drawOrder,0,A.slots.length);else{const B=A.drawOrder,O=A.slots;for(let V=0,L=R.length;V<L;V++)B[V]=O[R[V]]}}};let DrawOrderTimeline=_DrawOrderTimeline;DrawOrderTimeline.propertyIds=[`${Property.drawOrder}`];class IkConstraintTimeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.ikConstraint}|${E}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=E}getFrameEntries(){return 6}setFrame(_,T,E,C,P,I,F){_*=6,this.frames[_]=T,this.frames[_+1]=E,this.frames[_+2]=C,this.frames[_+3]=P,this.frames[_+4]=I?1:0,this.frames[_+5]=F?1:0}apply(_,T,E,C,P,I,F){const R=_.ikConstraints[this.ikConstraintIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.mix=R.data.mix,R.softness=R.data.softness,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch;return;case MixBlend.first:R.mix+=(R.data.mix-R.mix)*P,R.softness+=(R.data.softness-R.softness)*P,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch}return}let O=0,V=0;const L=Timeline.search(B,E,6),D=this.curves[L/6];switch(D){case 0:const U=B[L];O=B[L+1],V=B[L+2];const G=(E-U)/(B[L+6]-U);O+=(B[L+6+1]-O)*G,V+=(B[L+6+2]-V)*G;break;case 1:O=B[L+1],V=B[L+2];break;default:O=this.getBezierValue(E,L,1,D-2),V=this.getBezierValue(E,L,2,D+18-2)}I==MixBlend.setup?(R.mix=R.data.mix+(O-R.data.mix)*P,R.softness=R.data.softness+(V-R.data.softness)*P,F==MixDirection.mixOut?(R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch):(R.bendDirection=B[L+3],R.compress=B[L+4]!=0,R.stretch=B[L+5]!=0)):(R.mix+=(O-R.mix)*P,R.softness+=(V-R.softness)*P,F==MixDirection.mixIn&&(R.bendDirection=B[L+3],R.compress=B[L+4]!=0,R.stretch=B[L+5]!=0))}}class TransformConstraintTimeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.transformConstraint}|${E}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=E}getFrameEntries(){return 7}setFrame(_,T,E,C,P,I,F,R){const B=this.frames;_*=7,B[_]=T,B[_+1]=E,B[_+2]=C,B[_+3]=P,B[_+4]=I,B[_+5]=F,B[_+6]=R}apply(_,T,E,C,P,I,F){const R=_.transformConstraints[this.transformConstraintIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){const Y=R.data;switch(I){case MixBlend.setup:R.mixRotate=Y.mixRotate,R.mixX=Y.mixX,R.mixY=Y.mixY,R.mixScaleX=Y.mixScaleX,R.mixScaleY=Y.mixScaleY,R.mixShearY=Y.mixShearY;return;case MixBlend.first:R.mixRotate+=(Y.mixRotate-R.mixRotate)*P,R.mixX+=(Y.mixX-R.mixX)*P,R.mixY+=(Y.mixY-R.mixY)*P,R.mixScaleX+=(Y.mixScaleX-R.mixScaleX)*P,R.mixScaleY+=(Y.mixScaleY-R.mixScaleY)*P,R.mixShearY+=(Y.mixShearY-R.mixShearY)*P}return}let O,V,L,D,U,G;const X=Timeline.search(B,E,7),z=this.curves[X/7];switch(z){case 0:const Y=B[X];O=B[X+1],V=B[X+2],L=B[X+3],D=B[X+4],U=B[X+5],G=B[X+6];const W=(E-Y)/(B[X+7]-Y);O+=(B[X+7+1]-O)*W,V+=(B[X+7+2]-V)*W,L+=(B[X+7+3]-L)*W,D+=(B[X+7+4]-D)*W,U+=(B[X+7+5]-U)*W,G+=(B[X+7+6]-G)*W;break;case 1:O=B[X+1],V=B[X+2],L=B[X+3],D=B[X+4],U=B[X+5],G=B[X+6];break;default:O=this.getBezierValue(E,X,1,z-2),V=this.getBezierValue(E,X,2,z+18-2),L=this.getBezierValue(E,X,3,z+18*2-2),D=this.getBezierValue(E,X,4,z+18*3-2),U=this.getBezierValue(E,X,5,z+18*4-2),G=this.getBezierValue(E,X,6,z+18*5-2)}if(I==MixBlend.setup){const Y=R.data;R.mixRotate=Y.mixRotate+(O-Y.mixRotate)*P,R.mixX=Y.mixX+(V-Y.mixX)*P,R.mixY=Y.mixY+(L-Y.mixY)*P,R.mixScaleX=Y.mixScaleX+(D-Y.mixScaleX)*P,R.mixScaleY=Y.mixScaleY+(U-Y.mixScaleY)*P,R.mixShearY=Y.mixShearY+(G-Y.mixShearY)*P}else R.mixRotate+=(O-R.mixRotate)*P,R.mixX+=(V-R.mixX)*P,R.mixY+=(L-R.mixY)*P,R.mixScaleX+=(D-R.mixScaleX)*P,R.mixScaleY+=(U-R.mixScaleY)*P,R.mixShearY+=(G-R.mixShearY)*P}}class PathConstraintPositionTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.pathConstraintPosition}|${E}`),this.pathConstraintIndex=0,this.pathConstraintIndex=E}apply(_,T,E,C,P,I,F){const R=_.pathConstraints[this.pathConstraintIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.position=R.data.position;return;case MixBlend.first:R.position+=(R.data.position-R.position)*P}return}const O=this.getCurveValue(E);I==MixBlend.setup?R.position=R.data.position+(O-R.data.position)*P:R.position+=(O-R.position)*P}}class PathConstraintSpacingTimeline extends CurveTimeline1{constructor(_,T,E){super(_,T,`${Property.pathConstraintSpacing}|${E}`),this.pathConstraintIndex=0,this.pathConstraintIndex=E}apply(_,T,E,C,P,I,F){const R=_.pathConstraints[this.pathConstraintIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.spacing=R.data.spacing;return;case MixBlend.first:R.spacing+=(R.data.spacing-R.spacing)*P}return}const O=this.getCurveValue(E);I==MixBlend.setup?R.spacing=R.data.spacing+(O-R.data.spacing)*P:R.spacing+=(O-R.spacing)*P}}class PathConstraintMixTimeline extends CurveTimeline{constructor(_,T,E){super(_,T,[`${Property.pathConstraintMix}|${E}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=E}getFrameEntries(){return 4}setFrame(_,T,E,C,P){const I=this.frames;_<<=2,I[_]=T,I[_+1]=E,I[_+2]=C,I[_+3]=P}apply(_,T,E,C,P,I,F){const R=_.pathConstraints[this.pathConstraintIndex];if(!R.active)return;const B=this.frames;if(E<B[0]){switch(I){case MixBlend.setup:R.mixRotate=R.data.mixRotate,R.mixX=R.data.mixX,R.mixY=R.data.mixY;return;case MixBlend.first:R.mixRotate+=(R.data.mixRotate-R.mixRotate)*P,R.mixX+=(R.data.mixX-R.mixX)*P,R.mixY+=(R.data.mixY-R.mixY)*P}return}let O,V,L;const D=Timeline.search(B,E,4),U=this.curves[D>>2];switch(U){case 0:const G=B[D];O=B[D+1],V=B[D+2],L=B[D+3];const X=(E-G)/(B[D+4]-G);O+=(B[D+4+1]-O)*X,V+=(B[D+4+2]-V)*X,L+=(B[D+4+3]-L)*X;break;case 1:O=B[D+1],V=B[D+2],L=B[D+3];break;default:O=this.getBezierValue(E,D,1,U-2),V=this.getBezierValue(E,D,2,U+18-2),L=this.getBezierValue(E,D,3,U+18*2-2)}if(I==MixBlend.setup){const G=R.data;R.mixRotate=G.mixRotate+(O-G.mixRotate)*P,R.mixX=G.mixX+(V-G.mixX)*P,R.mixY=G.mixY+(L-G.mixY)*P}else R.mixRotate+=(O-R.mixRotate)*P,R.mixX+=(V-R.mixX)*P,R.mixY+=(L-R.mixY)*P}}const _SequenceTimeline=class extends Timeline{constructor(A,_,T){super(A,[`${Property.sequence}|${_}|${T.sequence.id}`]),this.slotIndex=_,this.attachment=T}getFrameEntries(){return _SequenceTimeline.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(A,_,T,E,C){const P=this.frames;A*=_SequenceTimeline.ENTRIES,P[A]=_,P[A+_SequenceTimeline.MODE]=T|E<<4,P[A+_SequenceTimeline.DELAY]=C}apply(A,_,T,E,C,P,I){const F=A.slots[this.slotIndex];if(!F.bone.active)return;const R=F.attachment,B=this.attachment;if(R!=B&&(!(R instanceof VertexAttachment)||R.timelineAttachment!=B))return;const O=this.frames;if(T<O[0]){(P==MixBlend.setup||P==MixBlend.first)&&(F.sequenceIndex=-1);return}const V=Timeline.search(O,T,_SequenceTimeline.ENTRIES),L=O[V],D=O[V+_SequenceTimeline.MODE],U=O[V+_SequenceTimeline.DELAY];if(!this.attachment.sequence)return;let G=D>>4;const X=this.attachment.sequence.regions.length,z=SequenceModeValues[D&15];if(z!=SequenceMode.hold)switch(G+=(T-L)/U+1e-5|0,z){case SequenceMode.once:G=Math.min(X-1,G);break;case SequenceMode.loop:G%=X;break;case SequenceMode.pingpong:{const Y=(X<<1)-2;G=Y==0?0:G%Y,G>=X&&(G=Y-G);break}case SequenceMode.onceReverse:G=Math.max(X-1-G,0);break;case SequenceMode.loopReverse:G=X-1-G%X;break;case SequenceMode.pingpongReverse:{const Y=(X<<1)-2;G=Y==0?0:(G+X-1)%Y,G>=X&&(G=Y-G)}}F.sequenceIndex=G}};let SequenceTimeline=_SequenceTimeline;SequenceTimeline.ENTRIES=3;SequenceTimeline.MODE=1;SequenceTimeline.DELAY=2;new Animation("<empty>",[],0);class AtlasAttachmentLoader{constructor(_){this.atlas=_}loadSequence(_,T,E){const C=E.regions;for(let P=0,I=C.length;P<I;P++){const F=E.getPath(T,P),R=this.atlas.findRegion(F);if(R==null)throw new Error(`Region not found in atlas: ${F} (sequence: ${_})`);C[P]=R,C[P].renderObject=C[P]}}newRegionAttachment(_,T,E,C){const P=new RegionAttachment(T,E);if(C!=null)this.loadSequence(T,E,C);else{const I=this.atlas.findRegion(E);if(!I)throw new Error(`Region not found in atlas: ${E} (region attachment: ${T})`);I.renderObject=I,P.region=I}return P}newMeshAttachment(_,T,E,C){const P=new MeshAttachment(T,E);if(C!=null)this.loadSequence(T,E,C);else{const I=this.atlas.findRegion(E);if(!I)throw new Error(`Region not found in atlas: ${E} (mesh attachment: ${T})`);I.renderObject=I,P.region=I}return P}newBoundingBoxAttachment(_,T){return new BoundingBoxAttachment(T)}newPathAttachment(_,T){return new PathAttachment(T)}newPointAttachment(_,T){return new PointAttachment(T)}newClippingAttachment(_,T){return new ClippingAttachment(T)}}class BoneData{constructor(_,T,E){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=TransformMode.Normal,this.skinRequired=!1,this.color=new Color,_<0)throw new Error("index must be >= 0.");if(!T)throw new Error("name cannot be null.");this.index=_,this.name=T,this.parent=E}}class ConstraintData{constructor(_,T,E){this.name=_,this.order=T,this.skinRequired=E}}let Event$1=class{constructor(_,T){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!T)throw new Error("data cannot be null.");this.time=_,this.data=T}};class EventData{constructor(_){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=_}}class IkConstraintData extends ConstraintData{constructor(_){super(_,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(_){this._target=_}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class PathConstraintData extends ConstraintData{constructor(_){super(_,0,!1),this.bones=new Array,this._target=null,this.positionMode=PositionMode.Fixed,this.spacingMode=SpacingMode.Fixed,this.rotateMode=RotateMode.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(_){this._target=_}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var SpacingMode=(A=>(A[A.Length=0]="Length",A[A.Fixed=1]="Fixed",A[A.Percent=2]="Percent",A[A.Proportional=3]="Proportional",A))(SpacingMode||{});class SkeletonData{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(_){if(!_)throw new Error("boneName cannot be null.");const T=this.bones;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findBoneIndex(_){if(!_)throw new Error("boneName cannot be null.");const T=this.bones;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}findSlot(_){if(!_)throw new Error("slotName cannot be null.");const T=this.slots;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findSlotIndex(_){if(!_)throw new Error("slotName cannot be null.");const T=this.slots;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}findSkin(_){if(!_)throw new Error("skinName cannot be null.");const T=this.skins;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findEvent(_){if(!_)throw new Error("eventDataName cannot be null.");const T=this.events;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findAnimation(_){if(!_)throw new Error("animationName cannot be null.");const T=this.animations;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findIkConstraint(_){if(!_)throw new Error("constraintName cannot be null.");const T=this.ikConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findTransformConstraint(_){if(!_)throw new Error("constraintName cannot be null.");const T=this.transformConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findPathConstraint(_){if(!_)throw new Error("constraintName cannot be null.");const T=this.pathConstraints;for(let E=0,C=T.length;E<C;E++){const P=T[E];if(P.name==_)return P}return null}findPathConstraintIndex(_){if(_==null)throw new Error("pathConstraintName cannot be null.");const T=this.pathConstraints;for(let E=0,C=T.length;E<C;E++)if(T[E].name==_)return E;return-1}}class SlotData{constructor(_,T,E){if(this.index=0,this.color=new Color(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=BLEND_MODES.NORMAL,_<0)throw new Error("index must be >= 0.");if(!T)throw new Error("name cannot be null.");if(!E)throw new Error("boneData cannot be null.");this.index=_,this.name=T,this.boneData=E}}class TransformConstraintData extends ConstraintData{constructor(_){super(_,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(_){this._target=_}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class SkinEntry{constructor(_,T,E){this.slotIndex=_,this.name=T,this.attachment=E}}class Skin{constructor(_){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!_)throw new Error("name cannot be null.");this.name=_}setAttachment(_,T,E){if(!E)throw new Error("attachment cannot be null.");const C=this.attachments;_>=C.length&&(C.length=_+1),C[_]||(C[_]={}),C[_][T]=E}addSkin(_){for(let E=0;E<_.bones.length;E++){const C=_.bones[E];let P=!1;for(let I=0;I<this.bones.length;I++)if(this.bones[I]==C){P=!0;break}P||this.bones.push(C)}for(let E=0;E<_.constraints.length;E++){const C=_.constraints[E];let P=!1;for(let I=0;I<this.constraints.length;I++)if(this.constraints[I]==C){P=!0;break}P||this.constraints.push(C)}const T=_.getAttachments();for(let E=0;E<T.length;E++){const C=T[E];this.setAttachment(C.slotIndex,C.name,C.attachment)}}copySkin(_){for(let E=0;E<_.bones.length;E++){const C=_.bones[E];let P=!1;for(let I=0;I<this.bones.length;I++)if(this.bones[I]==C){P=!0;break}P||this.bones.push(C)}for(let E=0;E<_.constraints.length;E++){const C=_.constraints[E];let P=!1;for(let I=0;I<this.constraints.length;I++)if(this.constraints[I]==C){P=!0;break}P||this.constraints.push(C)}const T=_.getAttachments();for(let E=0;E<T.length;E++){const C=T[E];C.attachment&&(C.attachment instanceof MeshAttachment?(C.attachment=C.attachment.newLinkedMesh(),this.setAttachment(C.slotIndex,C.name,C.attachment)):(C.attachment=C.attachment.copy(),this.setAttachment(C.slotIndex,C.name,C.attachment)))}}getAttachment(_,T){const E=this.attachments[_];return E?E[T]:null}removeAttachment(_,T){const E=this.attachments[_];E&&delete E[T]}getAttachments(){const _=new Array;for(let T=0;T<this.attachments.length;T++){const E=this.attachments[T];if(E)for(const C in E){const P=E[C];P&&_.push(new SkinEntry(T,C,P))}}return _}getAttachmentsForSlot(_,T){const E=this.attachments[_];if(E)for(const C in E){const P=E[C];P&&T.push(new SkinEntry(_,C,P))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(_,T){let E=0;for(let C=0;C<_.slots.length;C++){const P=_.slots[C],I=P.getAttachment();if(I&&E<T.attachments.length){const F=T.attachments[E];for(const R in F){const B=F[R];if(I==B){const O=this.getAttachment(E,R);O&&P.setAttachment(O);break}}}E++}}}class SkeletonBinary{constructor(_){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=_}readSkeletonData(_){const T=this.scale,E=new SkeletonData;E.name="";const C=new BinaryInput(_),P=C.readInt32(),I=C.readInt32();E.hash=I==0&&P==0?null:I.toString(16)+P.toString(16),E.version=C.readString();const F=E.version.substr(0,3);if(F!=="4.0"&&F!=="4.1"){const V=`Spine 4.1 loader cant load version ${E.version}. Please configure your pixi-spine bundle`;console.error(V)}this.ver40=F==="4.0",E.x=C.readFloat(),E.y=C.readFloat(),E.width=C.readFloat(),E.height=C.readFloat();const R=C.readBoolean();R&&(E.fps=C.readFloat(),E.imagesPath=C.readString(),E.audioPath=C.readString());let B=0;B=C.readInt(!0);for(let V=0;V<B;V++){const L=C.readString();if(!L)throw new Error("String in string table must not be null.");C.strings.push(L)}B=C.readInt(!0);for(let V=0;V<B;V++){const L=C.readString();if(!L)throw new Error("Bone name must not be null.");const D=V==0?null:E.bones[C.readInt(!0)],U=new BoneData(V,L,D);U.rotation=C.readFloat(),U.x=C.readFloat()*T,U.y=C.readFloat()*T,U.scaleX=C.readFloat(),U.scaleY=C.readFloat(),U.shearX=C.readFloat(),U.shearY=C.readFloat(),U.length=C.readFloat()*T,U.transformMode=C.readInt(!0),U.skinRequired=C.readBoolean(),R&&Color.rgba8888ToColor(U.color,C.readInt32()),E.bones.push(U)}B=C.readInt(!0);for(let V=0;V<B;V++){const L=C.readString();if(!L)throw new Error("Slot name must not be null.");const D=E.bones[C.readInt(!0)],U=new SlotData(V,L,D);Color.rgba8888ToColor(U.color,C.readInt32());const G=C.readInt32();G!=-1&&Color.rgb888ToColor(U.darkColor=new Color,G),U.attachmentName=C.readStringRef(),U.blendMode=C.readInt(!0),E.slots.push(U)}B=C.readInt(!0);for(let V=0,L;V<B;V++){const D=C.readString();if(!D)throw new Error("IK constraint data name must not be null.");const U=new IkConstraintData(D);U.order=C.readInt(!0),U.skinRequired=C.readBoolean(),L=C.readInt(!0);for(let G=0;G<L;G++)U.bones.push(E.bones[C.readInt(!0)]);U.target=E.bones[C.readInt(!0)],U.mix=C.readFloat(),U.softness=C.readFloat()*T,U.bendDirection=C.readByte(),U.compress=C.readBoolean(),U.stretch=C.readBoolean(),U.uniform=C.readBoolean(),E.ikConstraints.push(U)}B=C.readInt(!0);for(let V=0,L;V<B;V++){const D=C.readString();if(!D)throw new Error("Transform constraint data name must not be null.");const U=new TransformConstraintData(D);U.order=C.readInt(!0),U.skinRequired=C.readBoolean(),L=C.readInt(!0);for(let G=0;G<L;G++)U.bones.push(E.bones[C.readInt(!0)]);U.target=E.bones[C.readInt(!0)],U.local=C.readBoolean(),U.relative=C.readBoolean(),U.offsetRotation=C.readFloat(),U.offsetX=C.readFloat()*T,U.offsetY=C.readFloat()*T,U.offsetScaleX=C.readFloat(),U.offsetScaleY=C.readFloat(),U.offsetShearY=C.readFloat(),U.mixRotate=C.readFloat(),U.mixX=C.readFloat(),U.mixY=C.readFloat(),U.mixScaleX=C.readFloat(),U.mixScaleY=C.readFloat(),U.mixShearY=C.readFloat(),E.transformConstraints.push(U)}B=C.readInt(!0);for(let V=0,L;V<B;V++){const D=C.readString();if(!D)throw new Error("Path constraint data name must not be null.");const U=new PathConstraintData(D);U.order=C.readInt(!0),U.skinRequired=C.readBoolean(),L=C.readInt(!0);for(let G=0;G<L;G++)U.bones.push(E.bones[C.readInt(!0)]);U.target=E.slots[C.readInt(!0)],U.positionMode=C.readInt(!0),U.spacingMode=C.readInt(!0),U.rotateMode=C.readInt(!0),U.offsetRotation=C.readFloat(),U.position=C.readFloat(),U.positionMode==PositionMode.Fixed&&(U.position*=T),U.spacing=C.readFloat(),(U.spacingMode==SpacingMode.Length||U.spacingMode==SpacingMode.Fixed)&&(U.spacing*=T),U.mixRotate=C.readFloat(),U.mixX=C.readFloat(),U.mixY=C.readFloat(),E.pathConstraints.push(U)}const O=this.readSkin(C,E,!0,R);O&&(E.defaultSkin=O,E.skins.push(O));{let V=E.skins.length;for(Utils.setArraySize(E.skins,B=V+C.readInt(!0));V<B;V++){const L=this.readSkin(C,E,!1,R);if(!L)throw new Error("readSkin() should not have returned null.");E.skins[V]=L}}B=this.linkedMeshes.length;for(let V=0;V<B;V++){const L=this.linkedMeshes[V],D=L.skin?E.findSkin(L.skin):E.defaultSkin;if(!D)throw new Error("Not skin found for linked mesh.");if(!L.parent)throw new Error("Linked mesh parent must not be null");const U=D.getAttachment(L.slotIndex,L.parent);if(!U)throw new Error(`Parent mesh not found: ${L.parent}`);L.mesh.timelineAttachment=L.inheritTimeline?U:L.mesh,L.mesh.setParentMesh(U)}this.linkedMeshes.length=0,B=C.readInt(!0);for(let V=0;V<B;V++){const L=C.readStringRef();if(!L)throw new Error;const D=new EventData(L);D.intValue=C.readInt(!1),D.floatValue=C.readFloat(),D.stringValue=C.readString(),D.audioPath=C.readString(),D.audioPath&&(D.volume=C.readFloat(),D.balance=C.readFloat()),E.events.push(D)}B=C.readInt(!0);for(let V=0;V<B;V++){const L=C.readString();if(!L)throw new Error("Animatio name must not be null.");E.animations.push(this.readAnimation(C,L,E))}return E}readSkin(_,T,E,C){let P=null,I=0;if(E){if(I=_.readInt(!0),I==0)return null;P=new Skin("default")}else{const F=_.readStringRef();if(!F)throw new Error("Skin name must not be null.");P=new Skin(F),P.bones.length=_.readInt(!0);for(let R=0,B=P.bones.length;R<B;R++)P.bones[R]=T.bones[_.readInt(!0)];for(let R=0,B=_.readInt(!0);R<B;R++)P.constraints.push(T.ikConstraints[_.readInt(!0)]);for(let R=0,B=_.readInt(!0);R<B;R++)P.constraints.push(T.transformConstraints[_.readInt(!0)]);for(let R=0,B=_.readInt(!0);R<B;R++)P.constraints.push(T.pathConstraints[_.readInt(!0)]);I=_.readInt(!0)}for(let F=0;F<I;F++){const R=_.readInt(!0);for(let B=0,O=_.readInt(!0);B<O;B++){const V=_.readStringRef();if(!V)throw new Error("Attachment name must not be null");const L=this.readAttachment(_,T,P,R,V,C);L&&P.setAttachment(R,V,L)}}return P}readAttachment(_,T,E,C,P,I){const F=this.scale;let R=_.readStringRef();switch(R||(R=P),_.readByte()){case AttachmentType.Region:{let B=_.readStringRef();const O=_.readFloat(),V=_.readFloat(),L=_.readFloat(),D=_.readFloat(),U=_.readFloat(),G=_.readFloat(),X=_.readFloat(),z=_.readInt32(),Y=this.readSequence(_);B||(B=R);const W=this.attachmentLoader.newRegionAttachment(E,R,B,Y);return W?(W.path=B,W.x=V*F,W.y=L*F,W.scaleX=D,W.scaleY=U,W.rotation=O,W.width=G*F,W.height=X*F,Color.rgba8888ToColor(W.color,z),W.sequence=Y,Y==null&&W.updateRegion(),W):null}case AttachmentType.BoundingBox:{const B=_.readInt(!0),O=this.readVertices(_,B),V=I?_.readInt32():0,L=this.attachmentLoader.newBoundingBoxAttachment(E,R);return L?(L.worldVerticesLength=B<<1,L.vertices=O.vertices,L.bones=O.bones,I&&Color.rgba8888ToColor(L.color,V),L):null}case AttachmentType.Mesh:{let B=_.readStringRef();const O=_.readInt32(),V=_.readInt(!0),L=this.readFloatArray(_,V<<1,1),D=this.readShortArray(_),U=this.readVertices(_,V),G=_.readInt(!0),X=this.readSequence(_);let z=[],Y=0,W=0;I&&(z=this.readShortArray(_),Y=_.readFloat(),W=_.readFloat()),B||(B=R);const q=this.attachmentLoader.newMeshAttachment(E,R,B,X);return q?(q.path=B,Color.rgba8888ToColor(q.color,O),q.bones=U.bones,q.vertices=U.vertices,q.worldVerticesLength=V<<1,q.triangles=D,q.regionUVs=new Float32Array(L),q.hullLength=G<<1,q.sequence=X,I&&(q.edges=z,q.width=Y*F,q.height=W*F),q):null}case AttachmentType.LinkedMesh:{let B=_.readStringRef();const O=_.readInt32(),V=_.readStringRef(),L=_.readStringRef(),D=_.readBoolean(),U=this.readSequence(_);let G=0,X=0;I&&(G=_.readFloat(),X=_.readFloat()),B||(B=R);const z=this.attachmentLoader.newMeshAttachment(E,R,B,U);return z?(z.path=B,Color.rgba8888ToColor(z.color,O),z.sequence=U,I&&(z.width=G*F,z.height=X*F),this.linkedMeshes.push(new LinkedMesh$1(z,V,C,L,D)),z):null}case AttachmentType.Path:{const B=_.readBoolean(),O=_.readBoolean(),V=_.readInt(!0),L=this.readVertices(_,V),D=Utils.newArray(V/3,0);for(let X=0,z=D.length;X<z;X++)D[X]=_.readFloat()*F;const U=I?_.readInt32():0,G=this.attachmentLoader.newPathAttachment(E,R);return G?(G.closed=B,G.constantSpeed=O,G.worldVerticesLength=V<<1,G.vertices=L.vertices,G.bones=L.bones,G.lengths=D,I&&Color.rgba8888ToColor(G.color,U),G):null}case AttachmentType.Point:{const B=_.readFloat(),O=_.readFloat(),V=_.readFloat(),L=I?_.readInt32():0,D=this.attachmentLoader.newPointAttachment(E,R);return D?(D.x=O*F,D.y=V*F,D.rotation=B,I&&Color.rgba8888ToColor(D.color,L),D):null}case AttachmentType.Clipping:{const B=_.readInt(!0),O=_.readInt(!0),V=this.readVertices(_,O),L=I?_.readInt32():0,D=this.attachmentLoader.newClippingAttachment(E,R);return D?(D.endSlot=T.slots[B],D.worldVerticesLength=O<<1,D.vertices=V.vertices,D.bones=V.bones,I&&Color.rgba8888ToColor(D.color,L),D):null}}return null}readSequence(_){if(this.ver40||!_.readBoolean())return null;const T=new Sequence(_.readInt(!0));return T.start=_.readInt(!0),T.digits=_.readInt(!0),T.setupIndex=_.readInt(!0),T}readDeformTimelineType(_){return this.ver40?ATTACHMENT_DEFORM:_.readByte()}readVertices(_,T){const E=this.scale,C=T<<1,P=new Vertices;if(!_.readBoolean())return P.vertices=this.readFloatArray(_,C,E),P;const I=new Array,F=new Array;for(let R=0;R<T;R++){const B=_.readInt(!0);F.push(B);for(let O=0;O<B;O++)F.push(_.readInt(!0)),I.push(_.readFloat()*E),I.push(_.readFloat()*E),I.push(_.readFloat())}return P.vertices=Utils.toFloatArray(I),P.bones=F,P}readFloatArray(_,T,E){const C=new Array(T);if(E==1)for(let P=0;P<T;P++)C[P]=_.readFloat();else for(let P=0;P<T;P++)C[P]=_.readFloat()*E;return C}readShortArray(_){const T=_.readInt(!0),E=new Array(T);for(let C=0;C<T;C++)E[C]=_.readShort();return E}readAnimation(_,T,E){_.readInt(!0);const C=new Array,P=this.scale;for(let B=0,O=_.readInt(!0);B<O;B++){const V=_.readInt(!0);for(let L=0,D=_.readInt(!0);L<D;L++){const U=_.readByte(),G=_.readInt(!0),X=G-1;switch(U){case SLOT_ATTACHMENT:{const z=new AttachmentTimeline(G,V);for(let Y=0;Y<G;Y++)z.setFrame(Y,_.readFloat(),_.readStringRef());C.push(z);break}case SLOT_RGBA:{const z=_.readInt(!0),Y=new RGBATimeline(G,z,V);let W=_.readFloat(),q=_.readUnsignedByte()/255,K=_.readUnsignedByte()/255,J=_.readUnsignedByte()/255,Z=_.readUnsignedByte()/255;for(let se=0,ae=0;Y.setFrame(se,W,q,K,J,Z),se!=X;se++){const ue=_.readFloat(),ce=_.readUnsignedByte()/255,he=_.readUnsignedByte()/255,pe=_.readUnsignedByte()/255,ye=_.readUnsignedByte()/255;switch(_.readByte()){case CURVE_STEPPED:Y.setStepped(se);break;case CURVE_BEZIER:setBezier(_,Y,ae++,se,0,W,ue,q,ce,1),setBezier(_,Y,ae++,se,1,W,ue,K,he,1),setBezier(_,Y,ae++,se,2,W,ue,J,pe,1),setBezier(_,Y,ae++,se,3,W,ue,Z,ye,1)}W=ue,q=ce,K=he,J=pe,Z=ye}C.push(Y);break}case SLOT_RGB:{const z=_.readInt(!0),Y=new RGBTimeline(G,z,V);let W=_.readFloat(),q=_.readUnsignedByte()/255,K=_.readUnsignedByte()/255,J=_.readUnsignedByte()/255;for(let Z=0,se=0;Y.setFrame(Z,W,q,K,J),Z!=X;Z++){const ae=_.readFloat(),ue=_.readUnsignedByte()/255,ce=_.readUnsignedByte()/255,he=_.readUnsignedByte()/255;switch(_.readByte()){case CURVE_STEPPED:Y.setStepped(Z);break;case CURVE_BEZIER:setBezier(_,Y,se++,Z,0,W,ae,q,ue,1),setBezier(_,Y,se++,Z,1,W,ae,K,ce,1),setBezier(_,Y,se++,Z,2,W,ae,J,he,1)}W=ae,q=ue,K=ce,J=he}C.push(Y);break}case SLOT_RGBA2:{const z=_.readInt(!0),Y=new RGBA2Timeline(G,z,V);let W=_.readFloat(),q=_.readUnsignedByte()/255,K=_.readUnsignedByte()/255,J=_.readUnsignedByte()/255,Z=_.readUnsignedByte()/255,se=_.readUnsignedByte()/255,ae=_.readUnsignedByte()/255,ue=_.readUnsignedByte()/255;for(let ce=0,he=0;Y.setFrame(ce,W,q,K,J,Z,se,ae,ue),ce!=X;ce++){const pe=_.readFloat(),ye=_.readUnsignedByte()/255,_e=_.readUnsignedByte()/255,ee=_.readUnsignedByte()/255,re=_.readUnsignedByte()/255,Q=_.readUnsignedByte()/255,te=_.readUnsignedByte()/255,ne=_.readUnsignedByte()/255;switch(_.readByte()){case CURVE_STEPPED:Y.setStepped(ce);break;case CURVE_BEZIER:setBezier(_,Y,he++,ce,0,W,pe,q,ye,1),setBezier(_,Y,he++,ce,1,W,pe,K,_e,1),setBezier(_,Y,he++,ce,2,W,pe,J,ee,1),setBezier(_,Y,he++,ce,3,W,pe,Z,re,1),setBezier(_,Y,he++,ce,4,W,pe,se,Q,1),setBezier(_,Y,he++,ce,5,W,pe,ae,te,1),setBezier(_,Y,he++,ce,6,W,pe,ue,ne,1)}W=pe,q=ye,K=_e,J=ee,Z=re,se=Q,ae=te,ue=ne}C.push(Y);break}case SLOT_RGB2:{const z=_.readInt(!0),Y=new RGB2Timeline(G,z,V);let W=_.readFloat(),q=_.readUnsignedByte()/255,K=_.readUnsignedByte()/255,J=_.readUnsignedByte()/255,Z=_.readUnsignedByte()/255,se=_.readUnsignedByte()/255,ae=_.readUnsignedByte()/255;for(let ue=0,ce=0;Y.setFrame(ue,W,q,K,J,Z,se,ae),ue!=X;ue++){const he=_.readFloat(),pe=_.readUnsignedByte()/255,ye=_.readUnsignedByte()/255,_e=_.readUnsignedByte()/255,ee=_.readUnsignedByte()/255,re=_.readUnsignedByte()/255,Q=_.readUnsignedByte()/255;switch(_.readByte()){case CURVE_STEPPED:Y.setStepped(ue);break;case CURVE_BEZIER:setBezier(_,Y,ce++,ue,0,W,he,q,pe,1),setBezier(_,Y,ce++,ue,1,W,he,K,ye,1),setBezier(_,Y,ce++,ue,2,W,he,J,_e,1),setBezier(_,Y,ce++,ue,3,W,he,Z,ee,1),setBezier(_,Y,ce++,ue,4,W,he,se,re,1),setBezier(_,Y,ce++,ue,5,W,he,ae,Q,1)}W=he,q=pe,K=ye,J=_e,Z=ee,se=re,ae=Q}C.push(Y);break}case SLOT_ALPHA:{const z=new AlphaTimeline(G,_.readInt(!0),V);let Y=_.readFloat(),W=_.readUnsignedByte()/255;for(let q=0,K=0;z.setFrame(q,Y,W),q!=X;q++){const J=_.readFloat(),Z=_.readUnsignedByte()/255;switch(_.readByte()){case CURVE_STEPPED:z.setStepped(q);break;case CURVE_BEZIER:setBezier(_,z,K++,q,0,Y,J,W,Z,1)}Y=J,W=Z}C.push(z)}}}}for(let B=0,O=_.readInt(!0);B<O;B++){const V=_.readInt(!0);for(let L=0,D=_.readInt(!0);L<D;L++){const U=_.readByte(),G=_.readInt(!0),X=_.readInt(!0);switch(U){case BONE_ROTATE:C.push(readTimeline1$1(_,new RotateTimeline(G,X,V),1));break;case BONE_TRANSLATE:C.push(readTimeline2$1(_,new TranslateTimeline(G,X,V),P));break;case BONE_TRANSLATEX:C.push(readTimeline1$1(_,new TranslateXTimeline(G,X,V),P));break;case BONE_TRANSLATEY:C.push(readTimeline1$1(_,new TranslateYTimeline(G,X,V),P));break;case BONE_SCALE:C.push(readTimeline2$1(_,new ScaleTimeline(G,X,V),1));break;case BONE_SCALEX:C.push(readTimeline1$1(_,new ScaleXTimeline(G,X,V),1));break;case BONE_SCALEY:C.push(readTimeline1$1(_,new ScaleYTimeline(G,X,V),1));break;case BONE_SHEAR:C.push(readTimeline2$1(_,new ShearTimeline(G,X,V),1));break;case BONE_SHEARX:C.push(readTimeline1$1(_,new ShearXTimeline(G,X,V),1));break;case BONE_SHEARY:C.push(readTimeline1$1(_,new ShearYTimeline(G,X,V),1))}}}for(let B=0,O=_.readInt(!0);B<O;B++){const V=_.readInt(!0),L=_.readInt(!0),D=L-1,U=new IkConstraintTimeline(L,_.readInt(!0),V);let G=_.readFloat(),X=_.readFloat(),z=_.readFloat()*P;for(let Y=0,W=0;U.setFrame(Y,G,X,z,_.readByte(),_.readBoolean(),_.readBoolean()),Y!=D;Y++){const q=_.readFloat(),K=_.readFloat(),J=_.readFloat()*P;switch(_.readByte()){case CURVE_STEPPED:U.setStepped(Y);break;case CURVE_BEZIER:setBezier(_,U,W++,Y,0,G,q,X,K,1),setBezier(_,U,W++,Y,1,G,q,z,J,P)}G=q,X=K,z=J}C.push(U)}for(let B=0,O=_.readInt(!0);B<O;B++){const V=_.readInt(!0),L=_.readInt(!0),D=L-1,U=new TransformConstraintTimeline(L,_.readInt(!0),V);let G=_.readFloat(),X=_.readFloat(),z=_.readFloat(),Y=_.readFloat(),W=_.readFloat(),q=_.readFloat(),K=_.readFloat();for(let J=0,Z=0;U.setFrame(J,G,X,z,Y,W,q,K),J!=D;J++){const se=_.readFloat(),ae=_.readFloat(),ue=_.readFloat(),ce=_.readFloat(),he=_.readFloat(),pe=_.readFloat(),ye=_.readFloat();switch(_.readByte()){case CURVE_STEPPED:U.setStepped(J);break;case CURVE_BEZIER:setBezier(_,U,Z++,J,0,G,se,X,ae,1),setBezier(_,U,Z++,J,1,G,se,z,ue,1),setBezier(_,U,Z++,J,2,G,se,Y,ce,1),setBezier(_,U,Z++,J,3,G,se,W,he,1),setBezier(_,U,Z++,J,4,G,se,q,pe,1),setBezier(_,U,Z++,J,5,G,se,K,ye,1)}G=se,X=ae,z=ue,Y=ce,W=he,q=pe,K=ye}C.push(U)}for(let B=0,O=_.readInt(!0);B<O;B++){const V=_.readInt(!0),L=E.pathConstraints[V];for(let D=0,U=_.readInt(!0);D<U;D++)switch(_.readByte()){case PATH_POSITION:C.push(readTimeline1$1(_,new PathConstraintPositionTimeline(_.readInt(!0),_.readInt(!0),V),L.positionMode==PositionMode.Fixed?P:1));break;case PATH_SPACING:C.push(readTimeline1$1(_,new PathConstraintSpacingTimeline(_.readInt(!0),_.readInt(!0),V),L.spacingMode==SpacingMode.Length||L.spacingMode==SpacingMode.Fixed?P:1));break;case PATH_MIX:const G=new PathConstraintMixTimeline(_.readInt(!0),_.readInt(!0),V);let X=_.readFloat(),z=_.readFloat(),Y=_.readFloat(),W=_.readFloat();for(let q=0,K=0,J=G.getFrameCount()-1;G.setFrame(q,X,z,Y,W),q!=J;q++){const Z=_.readFloat(),se=_.readFloat(),ae=_.readFloat(),ue=_.readFloat();switch(_.readByte()){case CURVE_STEPPED:G.setStepped(q);break;case CURVE_BEZIER:setBezier(_,G,K++,q,0,X,Z,z,se,1),setBezier(_,G,K++,q,1,X,Z,Y,ae,1),setBezier(_,G,K++,q,2,X,Z,W,ue,1)}X=Z,z=se,Y=ae,W=ue}C.push(G)}}for(let B=0,O=_.readInt(!0);B<O;B++){const V=E.skins[_.readInt(!0)];for(let L=0,D=_.readInt(!0);L<D;L++){const U=_.readInt(!0);for(let G=0,X=_.readInt(!0);G<X;G++){const z=_.readStringRef();if(!z)throw new Error("attachmentName must not be null.");const Y=V.getAttachment(U,z),W=this.readDeformTimelineType(_),q=_.readInt(!0),K=q-1;switch(W){case ATTACHMENT_DEFORM:{const J=Y,Z=J.bones,se=J.vertices,ae=Z?se.length/3*2:se.length,ue=_.readInt(!0),ce=new DeformTimeline(q,ue,U,J);let he=_.readFloat();for(let pe=0,ye=0;;pe++){let _e,ee=_.readInt(!0);if(ee==0)_e=Z?Utils.newFloatArray(ae):se;else{_e=Utils.newFloatArray(ae);const Q=_.readInt(!0);if(ee+=Q,P==1)for(let te=Q;te<ee;te++)_e[te]=_.readFloat();else for(let te=Q;te<ee;te++)_e[te]=_.readFloat()*P;if(!Z)for(let te=0,ne=_e.length;te<ne;te++)_e[te]+=se[te]}if(ce.setFrame(pe,he,_e),pe==K)break;const re=_.readFloat();switch(_.readByte()){case CURVE_STEPPED:ce.setStepped(pe);break;case CURVE_BEZIER:setBezier(_,ce,ye++,pe,0,he,re,0,1,1)}he=re}C.push(ce);break}case ATTACHMENT_SEQUENCE:{const J=new SequenceTimeline(q,U,Y);for(let Z=0;Z<q;Z++){const se=_.readFloat(),ae=_.readInt32();J.setFrame(Z,se,SequenceModeValues[ae&15],ae>>4,_.readFloat())}C.push(J);break}}}}}const I=_.readInt(!0);if(I>0){const B=new DrawOrderTimeline(I),O=E.slots.length;for(let V=0;V<I;V++){const L=_.readFloat(),D=_.readInt(!0),U=Utils.newArray(O,0);for(let Y=O-1;Y>=0;Y--)U[Y]=-1;const G=Utils.newArray(O-D,0);let X=0,z=0;for(let Y=0;Y<D;Y++){const W=_.readInt(!0);for(;X!=W;)G[z++]=X++;U[X+_.readInt(!0)]=X++}for(;X<O;)G[z++]=X++;for(let Y=O-1;Y>=0;Y--)U[Y]==-1&&(U[Y]=G[--z]);B.setFrame(V,L,U)}C.push(B)}const F=_.readInt(!0);if(F>0){const B=new EventTimeline(F);for(let O=0;O<F;O++){const V=_.readFloat(),L=E.events[_.readInt(!0)],D=new Event$1(V,L);D.intValue=_.readInt(!1),D.floatValue=_.readFloat(),D.stringValue=_.readBoolean()?_.readString():L.stringValue,D.data.audioPath&&(D.volume=_.readFloat(),D.balance=_.readFloat()),B.setFrame(O,D)}C.push(B)}let R=0;for(let B=0,O=C.length;B<O;B++)R=Math.max(R,C[B].getDuration());return new Animation(T,C,R)}}SkeletonBinary.BlendModeValues=[BLEND_MODES.NORMAL,BLEND_MODES.ADD,BLEND_MODES.MULTIPLY,BLEND_MODES.SCREEN];let LinkedMesh$1=class{constructor(_,T,E,C,P){this.mesh=_,this.skin=T,this.slotIndex=E,this.parent=C,this.inheritTimeline=P}};class Vertices{constructor(_=null,T=null){this.bones=_,this.vertices=T}}function readTimeline1$1(A,_,T){let E=A.readFloat(),C=A.readFloat()*T;for(let P=0,I=0,F=_.getFrameCount()-1;_.setFrame(P,E,C),P!=F;P++){const R=A.readFloat(),B=A.readFloat()*T;switch(A.readByte()){case CURVE_STEPPED:_.setStepped(P);break;case CURVE_BEZIER:setBezier(A,_,I++,P,0,E,R,C,B,T)}E=R,C=B}return _}function readTimeline2$1(A,_,T){let E=A.readFloat(),C=A.readFloat()*T,P=A.readFloat()*T;for(let I=0,F=0,R=_.getFrameCount()-1;_.setFrame(I,E,C,P),I!=R;I++){const B=A.readFloat(),O=A.readFloat()*T,V=A.readFloat()*T;switch(A.readByte()){case CURVE_STEPPED:_.setStepped(I);break;case CURVE_BEZIER:setBezier(A,_,F++,I,0,E,B,C,O,T),setBezier(A,_,F++,I,1,E,B,P,V,T)}E=B,C=O,P=V}return _}function setBezier(A,_,T,E,C,P,I,F,R,B){_.setBezier(T,E,C,P,F,A.readFloat(),A.readFloat()*B,A.readFloat(),A.readFloat()*B,I,R)}const BONE_ROTATE=0,BONE_TRANSLATE=1,BONE_TRANSLATEX=2,BONE_TRANSLATEY=3,BONE_SCALE=4,BONE_SCALEX=5,BONE_SCALEY=6,BONE_SHEAR=7,BONE_SHEARX=8,BONE_SHEARY=9,SLOT_ATTACHMENT=0,SLOT_RGBA=1,SLOT_RGB=2,SLOT_RGBA2=3,SLOT_RGB2=4,SLOT_ALPHA=5,ATTACHMENT_DEFORM=0,ATTACHMENT_SEQUENCE=1,PATH_POSITION=0,PATH_SPACING=1,PATH_MIX=2,CURVE_STEPPED=1,CURVE_BEZIER=2;class SkeletonJson{constructor(_){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=_}readSkeletonData(_){const T=this.scale,E=new SkeletonData,C=typeof _=="string"?JSON.parse(_):_,P=C.skeleton;if(P){E.hash=P.hash,E.version=P.spine;const I=E.version.substr(0,3);if(I!=="4.0"&&I!=="4.1"){const F=`Spine 4.1 loader cant load version ${P.spine}. Please configure your pixi-spine bundle`;console.error(F)}E.x=P.x,E.y=P.y,E.width=P.width,E.height=P.height,E.fps=P.fps,E.imagesPath=P.images}if(C.bones)for(let I=0;I<C.bones.length;I++){const F=C.bones[I];let R=null;const B=getValue(F,"parent",null);if(B!=null&&(R=E.findBone(B),R==null))throw new Error(`Parent bone not found: ${B}`);const O=new BoneData(E.bones.length,F.name,R);O.length=getValue(F,"length",0)*T,O.x=getValue(F,"x",0)*T,O.y=getValue(F,"y",0)*T,O.rotation=getValue(F,"rotation",0),O.scaleX=getValue(F,"scaleX",1),O.scaleY=getValue(F,"scaleY",1),O.shearX=getValue(F,"shearX",0),O.shearY=getValue(F,"shearY",0),O.transformMode=Utils.enumValue(TransformMode,getValue(F,"transform","Normal")),O.skinRequired=getValue(F,"skin",!1);const V=getValue(F,"color",null);V&&O.color.setFromString(V),E.bones.push(O)}if(C.slots)for(let I=0;I<C.slots.length;I++){const F=C.slots[I],R=E.findBone(F.bone);if(!R)throw new Error(`Couldn't find bone ${F.bone} for slot ${F.name}`);const B=new SlotData(E.slots.length,F.name,R),O=getValue(F,"color",null);O&&B.color.setFromString(O);const V=getValue(F,"dark",null);V&&(B.darkColor=Color.fromString(V)),B.attachmentName=getValue(F,"attachment",null),B.blendMode=SkeletonJson.blendModeFromString(getValue(F,"blend","normal")),E.slots.push(B)}if(C.ik)for(let I=0;I<C.ik.length;I++){const F=C.ik[I],R=new IkConstraintData(F.name);R.order=getValue(F,"order",0),R.skinRequired=getValue(F,"skin",!1);for(let B=0;B<F.bones.length;B++){const O=F.bones[B],V=E.findBone(O);if(V==null)throw new Error(`IK bone not found: ${O}`);R.bones.push(V)}R.target=E.findBone(F.target),R.mix=getValue(F,"mix",1),R.softness=getValue(F,"softness",0)*T,R.bendDirection=getValue(F,"bendPositive",!0)?1:-1,R.compress=getValue(F,"compress",!1),R.stretch=getValue(F,"stretch",!1),R.uniform=getValue(F,"uniform",!1),E.ikConstraints.push(R)}if(C.transform)for(let I=0;I<C.transform.length;I++){const F=C.transform[I],R=new TransformConstraintData(F.name);R.order=getValue(F,"order",0),R.skinRequired=getValue(F,"skin",!1);for(let V=0;V<F.bones.length;V++){const L=F.bones[V],D=E.findBone(L);if(!D)throw new Error(`Couldn't find bone ${L} for transform constraint ${F.name}.`);R.bones.push(D)}const B=F.target,O=E.findBone(B);if(!O)throw new Error(`Couldn't find target bone ${B} for transform constraint ${F.name}.`);R.target=O,R.local=getValue(F,"local",!1),R.relative=getValue(F,"relative",!1),R.offsetRotation=getValue(F,"rotation",0),R.offsetX=getValue(F,"x",0)*T,R.offsetY=getValue(F,"y",0)*T,R.offsetScaleX=getValue(F,"scaleX",0),R.offsetScaleY=getValue(F,"scaleY",0),R.offsetShearY=getValue(F,"shearY",0),R.mixRotate=getValue(F,"mixRotate",1),R.mixX=getValue(F,"mixX",1),R.mixY=getValue(F,"mixY",R.mixX),R.mixScaleX=getValue(F,"mixScaleX",1),R.mixScaleY=getValue(F,"mixScaleY",R.mixScaleX),R.mixShearY=getValue(F,"mixShearY",1),E.transformConstraints.push(R)}if(C.path)for(let I=0;I<C.path.length;I++){const F=C.path[I],R=new PathConstraintData(F.name);R.order=getValue(F,"order",0),R.skinRequired=getValue(F,"skin",!1);for(let V=0;V<F.bones.length;V++){const L=F.bones[V],D=E.findBone(L);if(!D)throw new Error(`Couldn't find bone ${L} for path constraint ${F.name}.`);R.bones.push(D)}const B=F.target,O=E.findSlot(B);if(!O)throw new Error(`Couldn't find target slot ${B} for path constraint ${F.name}.`);R.target=O,R.positionMode=Utils.enumValue(PositionMode,getValue(F,"positionMode","Percent")),R.spacingMode=Utils.enumValue(SpacingMode,getValue(F,"spacingMode","Length")),R.rotateMode=Utils.enumValue(RotateMode,getValue(F,"rotateMode","Tangent")),R.offsetRotation=getValue(F,"rotation",0),R.position=getValue(F,"position",0),R.positionMode==PositionMode.Fixed&&(R.position*=T),R.spacing=getValue(F,"spacing",0),(R.spacingMode==SpacingMode.Length||R.spacingMode==SpacingMode.Fixed)&&(R.spacing*=T),R.mixRotate=getValue(F,"mixRotate",1),R.mixX=getValue(F,"mixX",1),R.mixY=getValue(F,"mixY",R.mixX),E.pathConstraints.push(R)}if(C.skins)for(let I=0;I<C.skins.length;I++){const F=C.skins[I],R=new Skin(F.name);if(F.bones)for(let B=0;B<F.bones.length;B++){const O=F.bones[B],V=E.findBone(O);if(!V)throw new Error(`Couldn't find bone ${O} for skin ${F.name}.`);R.bones.push(V)}if(F.ik)for(let B=0;B<F.ik.length;B++){const O=F.ik[B],V=E.findIkConstraint(O);if(!V)throw new Error(`Couldn't find IK constraint ${O} for skin ${F.name}.`);R.constraints.push(V)}if(F.transform)for(let B=0;B<F.transform.length;B++){const O=F.transform[B],V=E.findTransformConstraint(O);if(!V)throw new Error(`Couldn't find transform constraint ${O} for skin ${F.name}.`);R.constraints.push(V)}if(F.path)for(let B=0;B<F.path.length;B++){const O=F.path[B],V=E.findPathConstraint(O);if(!V)throw new Error(`Couldn't find path constraint ${O} for skin ${F.name}.`);R.constraints.push(V)}for(const B in F.attachments){const O=E.findSlot(B);if(!O)throw new Error(`Couldn't find slot ${B} for skin ${F.name}.`);const V=F.attachments[B];for(const L in V){const D=this.readAttachment(V[L],R,O.index,L,E);D&&R.setAttachment(O.index,L,D)}}E.skins.push(R),R.name=="default"&&(E.defaultSkin=R)}for(let I=0,F=this.linkedMeshes.length;I<F;I++){const R=this.linkedMeshes[I],B=R.skin?E.findSkin(R.skin):E.defaultSkin;if(!B)throw new Error(`Skin not found: ${R.skin}`);const O=B.getAttachment(R.slotIndex,R.parent);if(!O)throw new Error(`Parent mesh not found: ${R.parent}`);R.mesh.timelineAttachment=R.inheritTimeline?O:R.mesh,R.mesh.setParentMesh(O)}if(this.linkedMeshes.length=0,C.events)for(const I in C.events){const F=C.events[I],R=new EventData(I);R.intValue=getValue(F,"int",0),R.floatValue=getValue(F,"float",0),R.stringValue=getValue(F,"string",""),R.audioPath=getValue(F,"audio",null),R.audioPath&&(R.volume=getValue(F,"volume",1),R.balance=getValue(F,"balance",0)),E.events.push(R)}if(C.animations)for(const I in C.animations){const F=C.animations[I];this.readAnimation(F,I,E)}return E}readAttachment(_,T,E,C,P){const I=this.scale;switch(C=getValue(_,"name",C),getValue(_,"type","region")){case"region":{const F=getValue(_,"path",C),R=this.readSequence(getValue(_,"sequence",null)),B=this.attachmentLoader.newRegionAttachment(T,C,F,R);if(!B)return null;B.path=F,B.x=getValue(_,"x",0)*I,B.y=getValue(_,"y",0)*I,B.scaleX=getValue(_,"scaleX",1),B.scaleY=getValue(_,"scaleY",1),B.rotation=getValue(_,"rotation",0),B.width=_.width*I,B.height=_.height*I,B.sequence=R;const O=getValue(_,"color",null);return O&&B.color.setFromString(O),B}case"boundingbox":{const F=this.attachmentLoader.newBoundingBoxAttachment(T,C);if(!F)return null;this.readVertices(_,F,_.vertexCount<<1);const R=getValue(_,"color",null);return R&&F.color.setFromString(R),F}case"mesh":case"linkedmesh":{const F=getValue(_,"path",C),R=this.readSequence(getValue(_,"sequence",null)),B=this.attachmentLoader.newMeshAttachment(T,C,F,R);if(!B)return null;B.path=F;const O=getValue(_,"color",null);O&&B.color.setFromString(O),B.width=getValue(_,"width",0)*I,B.height=getValue(_,"height",0)*I,B.sequence=R;const V=getValue(_,"parent",null);if(V)return this.linkedMeshes.push(new LinkedMesh(B,getValue(_,"skin",null),E,V,getValue(_,"timelines",!0))),B;const L=_.uvs;return this.readVertices(_,B,L.length),B.triangles=_.triangles,B.regionUVs=new Float32Array(L),B.edges=getValue(_,"edges",null),B.hullLength=getValue(_,"hull",0)*2,B}case"path":{const F=this.attachmentLoader.newPathAttachment(T,C);if(!F)return null;F.closed=getValue(_,"closed",!1),F.constantSpeed=getValue(_,"constantSpeed",!0);const R=_.vertexCount;this.readVertices(_,F,R<<1);const B=Utils.newArray(R/3,0);for(let V=0;V<_.lengths.length;V++)B[V]=_.lengths[V]*I;F.lengths=B;const O=getValue(_,"color",null);return O&&F.color.setFromString(O),F}case"point":{const F=this.attachmentLoader.newPointAttachment(T,C);if(!F)return null;F.x=getValue(_,"x",0)*I,F.y=getValue(_,"y",0)*I,F.rotation=getValue(_,"rotation",0);const R=getValue(_,"color",null);return R&&F.color.setFromString(R),F}case"clipping":{const F=this.attachmentLoader.newClippingAttachment(T,C);if(!F)return null;const R=getValue(_,"end",null);if(R!=null){const V=P.findSlot(R);if(V==null)throw new Error(`Clipping end slot not found: ${R}`);F.endSlot=V}const B=_.vertexCount;this.readVertices(_,F,B<<1);const O=getValue(_,"color",null);return O&&F.color.setFromString(O),F}}return null}readSequence(_){if(_==null)return null;const T=new Sequence(getValue(_,"count",0));return T.start=getValue(_,"start",1),T.digits=getValue(_,"digits",0),T.setupIndex=getValue(_,"setup",0),T}readVertices(_,T,E){const C=this.scale;T.worldVerticesLength=E;const P=_.vertices;if(E==P.length){const R=Utils.toFloatArray(P);if(C!=1)for(let B=0,O=P.length;B<O;B++)R[B]*=C;T.vertices=R;return}const I=new Array,F=new Array;for(let R=0,B=P.length;R<B;){const O=P[R++];F.push(O);for(let V=R+O*4;R<V;R+=4)F.push(P[R]),I.push(P[R+1]*C),I.push(P[R+2]*C),I.push(P[R+3])}T.bones=F,T.vertices=Utils.toFloatArray(I)}readAnimation(_,T,E){const C=this.scale,P=new Array;if(_.slots)for(const F in _.slots){const R=_.slots[F],B=E.findSlot(F);if(!B)throw new Error(`Slot not found: ${F}`);const O=B.index;for(const V in R){const L=R[V];if(!L)continue;const D=L.length;if(V=="attachment"){const U=new AttachmentTimeline(D,O);for(let G=0;G<D;G++){const X=L[G];U.setFrame(G,getValue(X,"time",0),getValue(X,"name",null))}P.push(U)}else if(V=="rgba"){const U=new RGBATimeline(D,D<<2,O);let G=L[0],X=getValue(G,"time",0),z=Color.fromString(G.color);for(let Y=0,W=0;;Y++){U.setFrame(Y,X,z.r,z.g,z.b,z.a);const q=L[Y+1];if(!q){U.shrink(W);break}const K=getValue(q,"time",0),J=Color.fromString(q.color),Z=G.curve;Z&&(W=readCurve(Z,U,W,Y,0,X,K,z.r,J.r,1),W=readCurve(Z,U,W,Y,1,X,K,z.g,J.g,1),W=readCurve(Z,U,W,Y,2,X,K,z.b,J.b,1),W=readCurve(Z,U,W,Y,3,X,K,z.a,J.a,1)),X=K,z=J,G=q}P.push(U)}else if(V=="rgb"){const U=new RGBTimeline(D,D*3,O);let G=L[0],X=getValue(G,"time",0),z=Color.fromString(G.color);for(let Y=0,W=0;;Y++){U.setFrame(Y,X,z.r,z.g,z.b);const q=L[Y+1];if(!q){U.shrink(W);break}const K=getValue(q,"time",0),J=Color.fromString(q.color),Z=G.curve;Z&&(W=readCurve(Z,U,W,Y,0,X,K,z.r,J.r,1),W=readCurve(Z,U,W,Y,1,X,K,z.g,J.g,1),W=readCurve(Z,U,W,Y,2,X,K,z.b,J.b,1)),X=K,z=J,G=q}P.push(U)}else if(V=="alpha")P.push(readTimeline1(L,new AlphaTimeline(D,D,O),0,1));else if(V=="rgba2"){const U=new RGBA2Timeline(D,D*7,O);let G=L[0],X=getValue(G,"time",0),z=Color.fromString(G.light),Y=Color.fromString(G.dark);for(let W=0,q=0;;W++){U.setFrame(W,X,z.r,z.g,z.b,z.a,Y.r,Y.g,Y.b);const K=L[W+1];if(!K){U.shrink(q);break}const J=getValue(K,"time",0),Z=Color.fromString(K.light),se=Color.fromString(K.dark),ae=G.curve;ae&&(q=readCurve(ae,U,q,W,0,X,J,z.r,Z.r,1),q=readCurve(ae,U,q,W,1,X,J,z.g,Z.g,1),q=readCurve(ae,U,q,W,2,X,J,z.b,Z.b,1),q=readCurve(ae,U,q,W,3,X,J,z.a,Z.a,1),q=readCurve(ae,U,q,W,4,X,J,Y.r,se.r,1),q=readCurve(ae,U,q,W,5,X,J,Y.g,se.g,1),q=readCurve(ae,U,q,W,6,X,J,Y.b,se.b,1)),X=J,z=Z,Y=se,G=K}P.push(U)}else if(V=="rgb2"){const U=new RGB2Timeline(D,D*6,O);let G=L[0],X=getValue(G,"time",0),z=Color.fromString(G.light),Y=Color.fromString(G.dark);for(let W=0,q=0;;W++){U.setFrame(W,X,z.r,z.g,z.b,Y.r,Y.g,Y.b);const K=L[W+1];if(!K){U.shrink(q);break}const J=getValue(K,"time",0),Z=Color.fromString(K.light),se=Color.fromString(K.dark),ae=G.curve;ae&&(q=readCurve(ae,U,q,W,0,X,J,z.r,Z.r,1),q=readCurve(ae,U,q,W,1,X,J,z.g,Z.g,1),q=readCurve(ae,U,q,W,2,X,J,z.b,Z.b,1),q=readCurve(ae,U,q,W,3,X,J,Y.r,se.r,1),q=readCurve(ae,U,q,W,4,X,J,Y.g,se.g,1),q=readCurve(ae,U,q,W,5,X,J,Y.b,se.b,1)),X=J,z=Z,Y=se,G=K}P.push(U)}}}if(_.bones)for(const F in _.bones){const R=_.bones[F],B=E.findBone(F);if(!B)throw new Error(`Bone not found: ${F}`);const O=B.index;for(const V in R){const L=R[V],D=L.length;if(D!=0){if(V==="rotate")P.push(readTimeline1(L,new RotateTimeline(D,D,O),0,1));else if(V==="translate"){const U=new TranslateTimeline(D,D<<1,O);P.push(readTimeline2(L,U,"x","y",0,C))}else if(V==="translatex"){const U=new TranslateXTimeline(D,D,O);P.push(readTimeline1(L,U,0,C))}else if(V==="translatey"){const U=new TranslateYTimeline(D,D,O);P.push(readTimeline1(L,U,0,C))}else if(V==="scale"){const U=new ScaleTimeline(D,D<<1,O);P.push(readTimeline2(L,U,"x","y",1,1))}else if(V==="scalex"){const U=new ScaleXTimeline(D,D,O);P.push(readTimeline1(L,U,1,1))}else if(V==="scaley"){const U=new ScaleYTimeline(D,D,O);P.push(readTimeline1(L,U,1,1))}else if(V==="shear"){const U=new ShearTimeline(D,D<<1,O);P.push(readTimeline2(L,U,"x","y",0,1))}else if(V==="shearx"){const U=new ShearXTimeline(D,D,O);P.push(readTimeline1(L,U,0,1))}else if(V==="sheary"){const U=new ShearYTimeline(D,D,O);P.push(readTimeline1(L,U,0,1))}}}}if(_.ik)for(const F in _.ik){const R=_.ik[F];let B=R[0];if(!B)continue;const O=E.findIkConstraint(F);if(!O)throw new Error(`IK Constraint not found: ${F}`);const V=E.ikConstraints.indexOf(O),L=new IkConstraintTimeline(R.length,R.length<<1,V);let D=getValue(B,"time",0),U=getValue(B,"mix",1),G=getValue(B,"softness",0)*C;for(let X=0,z=0;;X++){L.setFrame(X,D,U,G,getValue(B,"bendPositive",!0)?1:-1,getValue(B,"compress",!1),getValue(B,"stretch",!1));const Y=R[X+1];if(!Y){L.shrink(z);break}const W=getValue(Y,"time",0),q=getValue(Y,"mix",1),K=getValue(Y,"softness",0)*C,J=B.curve;J&&(z=readCurve(J,L,z,X,0,D,W,U,q,1),z=readCurve(J,L,z,X,1,D,W,G,K,C)),D=W,U=q,G=K,B=Y}P.push(L)}if(_.transform)for(const F in _.transform){const R=_.transform[F];let B=R[0];if(!B)continue;const O=E.findTransformConstraint(F);if(!O)throw new Error(`Transform constraint not found: ${F}`);const V=E.transformConstraints.indexOf(O),L=new TransformConstraintTimeline(R.length,R.length*6,V);let D=getValue(B,"time",0),U=getValue(B,"mixRotate",1),G=getValue(B,"mixX",1),X=getValue(B,"mixY",G),z=getValue(B,"mixScaleX",1),Y=getValue(B,"mixScaleY",z);const W=getValue(B,"mixShearY",1);for(let q=0,K=0;;q++){L.setFrame(q,D,U,G,X,z,Y,W);const J=R[q+1];if(!J){L.shrink(K);break}const Z=getValue(J,"time",0),se=getValue(J,"mixRotate",1),ae=getValue(J,"mixX",1),ue=getValue(J,"mixY",ae),ce=getValue(J,"mixScaleX",1),he=getValue(J,"mixScaleY",ce),pe=getValue(J,"mixShearY",1),ye=B.curve;ye&&(K=readCurve(ye,L,K,q,0,D,Z,U,se,1),K=readCurve(ye,L,K,q,1,D,Z,G,ae,1),K=readCurve(ye,L,K,q,2,D,Z,X,ue,1),K=readCurve(ye,L,K,q,3,D,Z,z,ce,1),K=readCurve(ye,L,K,q,4,D,Z,Y,he,1),K=readCurve(ye,L,K,q,5,D,Z,W,pe,1)),D=Z,U=se,G=ae,X=ue,z=ce,Y=he,z=ce,B=J}P.push(L)}if(_.path)for(const F in _.path){const R=_.path[F],B=E.findPathConstraint(F);if(!B)throw new Error(`Path constraint not found: ${F}`);const O=E.pathConstraints.indexOf(B);for(const V in R){const L=R[V];let D=L[0];if(!D)continue;const U=L.length;if(V==="position"){const G=new PathConstraintPositionTimeline(U,U,O);P.push(readTimeline1(L,G,0,B.positionMode==PositionMode.Fixed?C:1))}else if(V==="spacing"){const G=new PathConstraintSpacingTimeline(U,U,O);P.push(readTimeline1(L,G,0,B.spacingMode==SpacingMode.Length||B.spacingMode==SpacingMode.Fixed?C:1))}else if(V==="mix"){const G=new PathConstraintMixTimeline(U,U*3,O);let X=getValue(D,"time",0),z=getValue(D,"mixRotate",1),Y=getValue(D,"mixX",1),W=getValue(D,"mixY",Y);for(let q=0,K=0;;q++){G.setFrame(q,X,z,Y,W);const J=L[q+1];if(!J){G.shrink(K);break}const Z=getValue(J,"time",0),se=getValue(J,"mixRotate",1),ae=getValue(J,"mixX",1),ue=getValue(J,"mixY",ae),ce=D.curve;ce&&(K=readCurve(ce,G,K,q,0,X,Z,z,se,1),K=readCurve(ce,G,K,q,1,X,Z,Y,ae,1),K=readCurve(ce,G,K,q,2,X,Z,W,ue,1)),X=Z,z=se,Y=ae,W=ue,D=J}P.push(G)}}}if(_.deform){_.attachments={};for(const F in _.deform){const R=_.deform[F],B=_.attachments[F]={};for(const O in R){const V=R[O],L=B[O]={};for(const D in V)L[D]={deform:V[D]}}}}if(_.attachments)for(const F in _.attachments){const R=_.attachments[F],B=E.findSkin(F);if(B!=null)for(const O in R){const V=R[O],L=E.findSlot(O);if(!L)throw new Error(`Slot not found: ${O}`);const D=L.index;for(const U in V){const G=V[U],X=B.getAttachment(D,U);for(const z in G){const Y=G[z];let W=Y[0];if(W){if(z=="deform"){const q=X.bones,K=X.vertices,J=q?K.length/3*2:K.length,Z=new DeformTimeline(Y.length,Y.length,D,X);let se=getValue(W,"time",0);for(let ae=0,ue=0;;ae++){let ce;const he=getValue(W,"vertices",null);if(!he)ce=q?Utils.newFloatArray(J):K;else{ce=Utils.newFloatArray(J);const ee=getValue(W,"offset",0);if(Utils.arrayCopy(he,0,ce,ee,he.length),C!=1)for(let re=ee,Q=re+he.length;re<Q;re++)ce[re]*=C;if(!q)for(let re=0;re<J;re++)ce[re]+=K[re]}Z.setFrame(ae,se,ce);const pe=Y[ae+1];if(!pe){Z.shrink(ue);break}const ye=getValue(pe,"time",0),_e=W.curve;_e&&(ue=readCurve(_e,Z,ue,ae,0,se,ye,0,1,1)),se=ye,W=pe}P.push(Z)}else if(z=="sequence"){const q=new SequenceTimeline(Y.length,D,X);let K=0;for(let J=0;J<Y.length;J++){const Z=getValue(W,"delay",K),se=getValue(W,"time",0),ae=SequenceMode[getValue(W,"mode","hold")],ue=getValue(W,"index",0);q.setFrame(J,se,ae,ue,Z),K=Z,W=Y[J+1]}P.push(q)}}}}}}if(_.drawOrder){const F=new DrawOrderTimeline(_.drawOrder.length),R=E.slots.length;let B=0;for(let O=0;O<_.drawOrder.length;O++,B++){const V=_.drawOrder[O];let L=null;const D=getValue(V,"offsets",null);if(D){L=Utils.newArray(R,-1);const U=Utils.newArray(R-D.length,0);let G=0,X=0;for(let z=0;z<D.length;z++){const Y=D[z],W=E.findSlot(Y.slot);if(!W)throw new Error(`Slot not found: ${W}`);const q=W.index;for(;G!=q;)U[X++]=G++;L[G+Y.offset]=G++}for(;G<R;)U[X++]=G++;for(let z=R-1;z>=0;z--)L[z]==-1&&(L[z]=U[--X])}F.setFrame(B,getValue(V,"time",0),L)}P.push(F)}if(_.events){const F=new EventTimeline(_.events.length);let R=0;for(let B=0;B<_.events.length;B++,R++){const O=_.events[B],V=E.findEvent(O.name);if(!V)throw new Error(`Event not found: ${O.name}`);const L=new Event$1(Utils.toSinglePrecision(getValue(O,"time",0)),V);L.intValue=getValue(O,"int",V.intValue),L.floatValue=getValue(O,"float",V.floatValue),L.stringValue=getValue(O,"string",V.stringValue),L.data.audioPath&&(L.volume=getValue(O,"volume",1),L.balance=getValue(O,"balance",0)),F.setFrame(R,L)}P.push(F)}let I=0;for(let F=0,R=P.length;F<R;F++)I=Math.max(I,P[F].getDuration());if(isNaN(I))throw new Error("Error while parsing animation, duration is NaN");E.animations.push(new Animation(T,P,I))}static blendModeFromString(_){if(_=_.toLowerCase(),_=="normal")return BLEND_MODES.NORMAL;if(_=="additive")return BLEND_MODES.ADD;if(_=="multiply")return BLEND_MODES.MULTIPLY;if(_=="screen")return BLEND_MODES.SCREEN;throw new Error(`Unknown blend mode: ${_}`)}}class LinkedMesh{constructor(_,T,E,C,P){this.mesh=_,this.skin=T,this.slotIndex=E,this.parent=C,this.inheritTimeline=P}}function readTimeline1(A,_,T,E){let C=A[0],P=getValue(C,"time",0),I=getValue(C,"value",T)*E,F=0;for(let R=0;;R++){_.setFrame(R,P,I);const B=A[R+1];if(!B)return _.shrink(F),_;const O=getValue(B,"time",0),V=getValue(B,"value",T)*E;C.curve&&(F=readCurve(C.curve,_,F,R,0,P,O,I,V,E)),P=O,I=V,C=B}}function readTimeline2(A,_,T,E,C,P){let I=A[0],F=getValue(I,"time",0),R=getValue(I,T,C)*P,B=getValue(I,E,C)*P,O=0;for(let V=0;;V++){_.setFrame(V,F,R,B);const L=A[V+1];if(!L)return _.shrink(O),_;const D=getValue(L,"time",0),U=getValue(L,T,C)*P,G=getValue(L,E,C)*P,X=I.curve;X&&(O=readCurve(X,_,O,V,0,F,D,R,U,P),O=readCurve(X,_,O,V,1,F,D,B,G,P)),F=D,R=U,B=G,I=L}}function readCurve(A,_,T,E,C,P,I,F,R,B){if(A=="stepped")return _.setStepped(E),T;const O=C<<2,V=A[O],L=A[O+1]*B,D=A[O+2],U=A[O+3]*B;return _.setBezier(T,E,C,P,F,V,L,D,U,I,R),T+1}function getValue(A,_,T){return A[_]!==void 0?A[_]:T}var SPINE_VERSION=(A=>(A[A.UNKNOWN=0]="UNKNOWN",A[A.VER37=37]="VER37",A[A.VER38=38]="VER38",A[A.VER40=40]="VER40",A[A.VER41=41]="VER41",A))(SPINE_VERSION||{});function detectSpineVersion(A){const _=A.substr(0,3),T=Math.floor(Number(_)*10+.001);return _==="3.7"?37:_==="3.8"?38:_==="4.0"?40:_==="4.1"?41:T<37?37:0}class UniBinaryParser{constructor(){this.scale=1}readSkeletonData(_,T){let E=null,C=this.readVersionOldFormat(T),P=detectSpineVersion(C);if(P===SPINE_VERSION.VER38&&(E=new SkeletonBinary$1(new AtlasAttachmentLoader$2(_))),C=this.readVersionNewFormat(T),P=detectSpineVersion(C),(P===SPINE_VERSION.VER40||P===SPINE_VERSION.VER41)&&(E=new SkeletonBinary(new AtlasAttachmentLoader(_))),!E){const I=`Unsupported version of spine model ${C}, please update pixi-spine`;console.error(I)}return E.scale=this.scale,E.readSkeletonData(T)}readVersionOldFormat(_){const T=new BinaryInput(_);let E;try{T.readString(),E=T.readString()}catch{E=""}return E||""}readVersionNewFormat(_){const T=new BinaryInput(_);T.readInt32(),T.readInt32();let E;try{E=T.readString()}catch{E=""}return E||""}}class UniJsonParser{constructor(){this.scale=1}readSkeletonData(_,T){const E=T.skeleton.spine,C=detectSpineVersion(E);let P=null;if(C===SPINE_VERSION.VER37&&(P=new SkeletonJson$1(new AtlasAttachmentLoader$1(_))),C===SPINE_VERSION.VER38&&(P=new SkeletonJson$2(new AtlasAttachmentLoader$2(_))),(C===SPINE_VERSION.VER40||C===SPINE_VERSION.VER41)&&(P=new SkeletonJson(new AtlasAttachmentLoader(_))),!P){const I=`Unsupported version of spine model ${E}, please update pixi-spine`;console.error(I)}return P.scale=this.scale,P.readSkeletonData(T)}}class SpineLoader extends SpineLoaderAbstract{createBinaryParser(){return new UniBinaryParser}createJsonParser(){return new UniJsonParser}parseData(_,T,E){return{spineData:_.readSkeletonData(T,E),spineAtlas:T}}}new SpineLoader().installLoader();const _sfc_main$3={__name:"game",setup(A){const _=ref$1(null);return onMounted(async()=>{const T=new Application({width:600,height:600,backgroundAlpha:0});_.value.appendChild(T.view);const E={json:"daiyanren/spine/Anim1/Anim1.json",atlas:"daiyanren/spine/Anim1/Anim1.atlas",png:"daiyanren/spine/Anim1/Anim1.png"};Assets$1.add("spineHero",{alias:"hero",srcs:[E.json,E.atlas,E.png],loadParser:"spine"});const C=await Assets$1.load("spineHero"),P=new(void 0).Spine(C.spineData);P.x=T.screen.width/2,P.y=T.screen.height,P.scale.set(.5),P.state.setAnimation(0,"animation",!0),T.stage.addChild(P)}),(T,E)=>(openBlock(),createElementBlock("div",{ref_key:"container",ref:_,style:{width:"600px",height:"600px"}},null,512))}},_imports_0="/daiyanren/assets/promo_title1-BXoNnwsB.webp",_imports_1="/daiyanren/assets/promo_tab-CNGXdmsy.webp",_imports_2="/daiyanren/assets/promo_banner1-DlyWtbQS.webp",_imports_3="/daiyanren/assets/promo_games-_DmiEpLW.webp",_imports_4="/daiyanren/assets/promo_banner2-CV5ZoMBk.webp";var lottie$1={exports:{}},lottie=lottie$1.exports,hasRequiredLottie;function requireLottie(){return hasRequiredLottie||(hasRequiredLottie=1,function(module,exports){typeof navigator<"u"&&function(A,_){module.exports=_()}(lottie,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(_){_useWebWorker=!!_},getWebWorker=function(){return _useWebWorker},setLocationHref=function(_){locationHref=_},getLocationHref=function(){return locationHref};function createTag(A){return document.createElement(A)}function extendPrototype(A,_){var T,E=A.length,C;for(T=0;T<E;T+=1){C=A[T].prototype;for(var P in C)Object.prototype.hasOwnProperty.call(C,P)&&(_.prototype[P]=C[P])}}function getDescriptor(A,_){return Object.getOwnPropertyDescriptor(A,_)}function createProxyFunction(A){function _(){}return _.prototype=A,_}var audioControllerFactory=function(){function A(_){this.audios=[],this.audioFactory=_,this._volume=1,this._isMuted=!1}return A.prototype={addAudio:function(T){this.audios.push(T)},pause:function(){var T,E=this.audios.length;for(T=0;T<E;T+=1)this.audios[T].pause()},resume:function(){var T,E=this.audios.length;for(T=0;T<E;T+=1)this.audios[T].resume()},setRate:function(T){var E,C=this.audios.length;for(E=0;E<C;E+=1)this.audios[E].setRate(T)},createAudio:function(T){return this.audioFactory?this.audioFactory(T):window.Howl?new window.Howl({src:[T]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(T){this.audioFactory=T},setVolume:function(T){this._volume=T,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var T,E=this.audios.length;for(T=0;T<E;T+=1)this.audios[T].volume(this._volume*(this._isMuted?0:1))}},function(){return new A}}(),createTypedArray=function(){function A(T,E){var C=0,P=[],I;switch(T){case"int16":case"uint8c":I=1;break;default:I=1.1;break}for(C=0;C<E;C+=1)P.push(I);return P}function _(T,E){return T==="float32"?new Float32Array(E):T==="int16"?new Int16Array(E):T==="uint8c"?new Uint8ClampedArray(E):A(T,E)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?_:A}();function createSizedArray(A){return Array.apply(null,{length:A})}function _typeof$6(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(T){return typeof T}:_typeof$6=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof$6(A)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var A=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],_,T=A.length;for(_=0;_<T;_+=1)BMMath[A[_]]=Math[A[_]]})(),BMMath.random=Math.random,BMMath.abs=function(A){var _=_typeof$6(A);if(_==="object"&&A.length){var T=createSizedArray(A.length),E,C=A.length;for(E=0;E<C;E+=1)T[E]=Math.abs(A[E]);return T}return Math.abs(A)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(A){A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.display="block",A.style.transformOrigin="0 0",A.style.webkitTransformOrigin="0 0",A.style.backfaceVisibility="visible",A.style.webkitBackfaceVisibility="visible",A.style.transformStyle="preserve-3d",A.style.webkitTransformStyle="preserve-3d",A.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(A,_,T,E){this.type=A,this.currentTime=_,this.totalTime=T,this.direction=E<0?-1:1}function BMCompleteEvent(A,_){this.type=A,this.direction=_<0?-1:1}function BMCompleteLoopEvent(A,_,T,E){this.type=A,this.currentLoop=T,this.totalLoops=_,this.direction=E<0?-1:1}function BMSegmentStartEvent(A,_,T){this.type=A,this.firstFrame=_,this.totalFrames=T}function BMDestroyEvent(A,_){this.type=A,this.target=_}function BMRenderFrameErrorEvent(A,_){this.type="renderFrameError",this.nativeError=A,this.currentTime=_}function BMConfigErrorEvent(A){this.type="configError",this.nativeError=A}var createElementID=function(){var A=0;return function(){return A+=1,idPrefix$1+"__lottie_element_"+A}}();function HSVtoRGB(A,_,T){var E,C,P,I,F,R,B,O;switch(I=Math.floor(A*6),F=A*6-I,R=T*(1-_),B=T*(1-F*_),O=T*(1-(1-F)*_),I%6){case 0:E=T,C=O,P=R;break;case 1:E=B,C=T,P=R;break;case 2:E=R,C=T,P=O;break;case 3:E=R,C=B,P=T;break;case 4:E=O,C=R,P=T;break;case 5:E=T,C=R,P=B;break}return[E,C,P]}function RGBtoHSV(A,_,T){var E=Math.max(A,_,T),C=Math.min(A,_,T),P=E-C,I,F=E===0?0:P/E,R=E/255;switch(E){case C:I=0;break;case A:I=_-T+P*(_<T?6:0),I/=6*P;break;case _:I=T-A+P*2,I/=6*P;break;case T:I=A-_+P*4,I/=6*P;break}return[I,F,R]}function addSaturationToRGB(A,_){var T=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);return T[1]+=_,T[1]>1?T[1]=1:T[1]<=0&&(T[1]=0),HSVtoRGB(T[0],T[1],T[2])}function addBrightnessToRGB(A,_){var T=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);return T[2]+=_,T[2]>1?T[2]=1:T[2]<0&&(T[2]=0),HSVtoRGB(T[0],T[1],T[2])}function addHueToRGB(A,_){var T=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);return T[0]+=_/360,T[0]>1?T[0]-=1:T[0]<0&&(T[0]+=1),HSVtoRGB(T[0],T[1],T[2])}var rgbToHex=function(){var A=[],_,T;for(_=0;_<256;_+=1)T=_.toString(16),A[_]=T.length===1?"0"+T:T;return function(E,C,P){return E<0&&(E=0),C<0&&(C=0),P<0&&(P=0),"#"+A[E]+A[C]+A[P]}}(),setSubframeEnabled=function(_){subframeEnabled=!!_},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(_){expressionsPlugin=_},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(_){expressionsInterfaces=_},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(_){defaultCurveSegments=_},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(_){idPrefix$1=_};function createNS(A){return document.createElementNS(svgNS,A)}function _typeof$5(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(T){return typeof T}:_typeof$5=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof$5(A)}var dataManager=function(){var A=1,_=[],T,E,C={onmessage:function(){},postMessage:function(D){T({data:D})}},P={postMessage:function(D){C.onmessage({data:D})}};function I(L){if(window.Worker&&window.Blob&&getWebWorker()){var D=new Blob(["var _workerSelf = self; self.onmessage = ",L.toString()],{type:"text/javascript"}),U=URL.createObjectURL(D);return new Worker(U)}return T=L,C}function F(){E||(E=I(function(D){function U(){function X(_e,ee){var re,Q,te=_e.length,ne,ie,fe,me;for(Q=0;Q<te;Q+=1)if(re=_e[Q],"ks"in re&&!re.completed){if(re.completed=!0,re.hasMask){var be=re.masksProperties;for(ie=be.length,ne=0;ne<ie;ne+=1)if(be[ne].pt.k.i)K(be[ne].pt.k);else for(me=be[ne].pt.k.length,fe=0;fe<me;fe+=1)be[ne].pt.k[fe].s&&K(be[ne].pt.k[fe].s[0]),be[ne].pt.k[fe].e&&K(be[ne].pt.k[fe].e[0])}re.ty===0?(re.layers=W(re.refId,ee),X(re.layers,ee)):re.ty===4?q(re.shapes):re.ty===5&&pe(re)}}function z(_e,ee){if(_e){var re=0,Q=_e.length;for(re=0;re<Q;re+=1)_e[re].t===1&&(_e[re].data.layers=W(_e[re].data.refId,ee),X(_e[re].data.layers,ee))}}function Y(_e,ee){for(var re=0,Q=ee.length;re<Q;){if(ee[re].id===_e)return ee[re];re+=1}return null}function W(_e,ee){var re=Y(_e,ee);return re?re.layers.__used?JSON.parse(JSON.stringify(re.layers)):(re.layers.__used=!0,re.layers):null}function q(_e){var ee,re=_e.length,Q,te;for(ee=re-1;ee>=0;ee-=1)if(_e[ee].ty==="sh")if(_e[ee].ks.k.i)K(_e[ee].ks.k);else for(te=_e[ee].ks.k.length,Q=0;Q<te;Q+=1)_e[ee].ks.k[Q].s&&K(_e[ee].ks.k[Q].s[0]),_e[ee].ks.k[Q].e&&K(_e[ee].ks.k[Q].e[0]);else _e[ee].ty==="gr"&&q(_e[ee].it)}function K(_e){var ee,re=_e.i.length;for(ee=0;ee<re;ee+=1)_e.i[ee][0]+=_e.v[ee][0],_e.i[ee][1]+=_e.v[ee][1],_e.o[ee][0]+=_e.v[ee][0],_e.o[ee][1]+=_e.v[ee][1]}function J(_e,ee){var re=ee?ee.split("."):[100,100,100];return _e[0]>re[0]?!0:re[0]>_e[0]?!1:_e[1]>re[1]?!0:re[1]>_e[1]?!1:_e[2]>re[2]?!0:re[2]>_e[2]?!1:null}var Z=function(){var _e=[4,4,14];function ee(Q){var te=Q.t.d;Q.t.d={k:[{s:te,t:0}]}}function re(Q){var te,ne=Q.length;for(te=0;te<ne;te+=1)Q[te].ty===5&&ee(Q[te])}return function(Q){if(J(_e,Q.v)&&(re(Q.layers),Q.assets)){var te,ne=Q.assets.length;for(te=0;te<ne;te+=1)Q.assets[te].layers&&re(Q.assets[te].layers)}}}(),se=function(){var _e=[4,7,99];return function(ee){if(ee.chars&&!J(_e,ee.v)){var re,Q=ee.chars.length;for(re=0;re<Q;re+=1){var te=ee.chars[re];te.data&&te.data.shapes&&(q(te.data.shapes),te.data.ip=0,te.data.op=99999,te.data.st=0,te.data.sr=1,te.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},ee.chars[re].t||(te.data.shapes.push({ty:"no"}),te.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),ae=function(){var _e=[5,7,15];function ee(Q){var te=Q.t.p;typeof te.a=="number"&&(te.a={a:0,k:te.a}),typeof te.p=="number"&&(te.p={a:0,k:te.p}),typeof te.r=="number"&&(te.r={a:0,k:te.r})}function re(Q){var te,ne=Q.length;for(te=0;te<ne;te+=1)Q[te].ty===5&&ee(Q[te])}return function(Q){if(J(_e,Q.v)&&(re(Q.layers),Q.assets)){var te,ne=Q.assets.length;for(te=0;te<ne;te+=1)Q.assets[te].layers&&re(Q.assets[te].layers)}}}(),ue=function(){var _e=[4,1,9];function ee(Q){var te,ne=Q.length,ie,fe;for(te=0;te<ne;te+=1)if(Q[te].ty==="gr")ee(Q[te].it);else if(Q[te].ty==="fl"||Q[te].ty==="st")if(Q[te].c.k&&Q[te].c.k[0].i)for(fe=Q[te].c.k.length,ie=0;ie<fe;ie+=1)Q[te].c.k[ie].s&&(Q[te].c.k[ie].s[0]/=255,Q[te].c.k[ie].s[1]/=255,Q[te].c.k[ie].s[2]/=255,Q[te].c.k[ie].s[3]/=255),Q[te].c.k[ie].e&&(Q[te].c.k[ie].e[0]/=255,Q[te].c.k[ie].e[1]/=255,Q[te].c.k[ie].e[2]/=255,Q[te].c.k[ie].e[3]/=255);else Q[te].c.k[0]/=255,Q[te].c.k[1]/=255,Q[te].c.k[2]/=255,Q[te].c.k[3]/=255}function re(Q){var te,ne=Q.length;for(te=0;te<ne;te+=1)Q[te].ty===4&&ee(Q[te].shapes)}return function(Q){if(J(_e,Q.v)&&(re(Q.layers),Q.assets)){var te,ne=Q.assets.length;for(te=0;te<ne;te+=1)Q.assets[te].layers&&re(Q.assets[te].layers)}}}(),ce=function(){var _e=[4,4,18];function ee(Q){var te,ne=Q.length,ie,fe;for(te=ne-1;te>=0;te-=1)if(Q[te].ty==="sh")if(Q[te].ks.k.i)Q[te].ks.k.c=Q[te].closed;else for(fe=Q[te].ks.k.length,ie=0;ie<fe;ie+=1)Q[te].ks.k[ie].s&&(Q[te].ks.k[ie].s[0].c=Q[te].closed),Q[te].ks.k[ie].e&&(Q[te].ks.k[ie].e[0].c=Q[te].closed);else Q[te].ty==="gr"&&ee(Q[te].it)}function re(Q){var te,ne,ie=Q.length,fe,me,be,Pe;for(ne=0;ne<ie;ne+=1){if(te=Q[ne],te.hasMask){var Me=te.masksProperties;for(me=Me.length,fe=0;fe<me;fe+=1)if(Me[fe].pt.k.i)Me[fe].pt.k.c=Me[fe].cl;else for(Pe=Me[fe].pt.k.length,be=0;be<Pe;be+=1)Me[fe].pt.k[be].s&&(Me[fe].pt.k[be].s[0].c=Me[fe].cl),Me[fe].pt.k[be].e&&(Me[fe].pt.k[be].e[0].c=Me[fe].cl)}te.ty===4&&ee(te.shapes)}}return function(Q){if(J(_e,Q.v)&&(re(Q.layers),Q.assets)){var te,ne=Q.assets.length;for(te=0;te<ne;te+=1)Q.assets[te].layers&&re(Q.assets[te].layers)}}}();function he(_e){_e.__complete||(ue(_e),Z(_e),se(_e),ae(_e),ce(_e),X(_e.layers,_e.assets),z(_e.chars,_e.assets),_e.__complete=!0)}function pe(_e){_e.t.a.length===0&&"m"in _e.t.p}var ye={};return ye.completeData=he,ye.checkColors=ue,ye.checkChars=se,ye.checkPathProperties=ae,ye.checkShapes=ce,ye.completeLayers=X,ye}if(P.dataManager||(P.dataManager=U()),P.assetLoader||(P.assetLoader=function(){function X(Y){var W=Y.getResponseHeader("content-type");return W&&Y.responseType==="json"&&W.indexOf("json")!==-1||Y.response&&_typeof$5(Y.response)==="object"?Y.response:Y.response&&typeof Y.response=="string"?JSON.parse(Y.response):Y.responseText?JSON.parse(Y.responseText):null}function z(Y,W,q,K){var J,Z=new XMLHttpRequest;try{Z.responseType="json"}catch{}Z.onreadystatechange=function(){if(Z.readyState===4)if(Z.status===200)J=X(Z),q(J);else try{J=X(Z),q(J)}catch(se){K&&K(se)}};try{Z.open(["G","E","T"].join(""),Y,!0)}catch{Z.open(["G","E","T"].join(""),W+"/"+Y,!0)}Z.send()}return{load:z}}()),D.data.type==="loadAnimation")P.assetLoader.load(D.data.path,D.data.fullPath,function(X){P.dataManager.completeData(X),P.postMessage({id:D.data.id,payload:X,status:"success"})},function(){P.postMessage({id:D.data.id,status:"error"})});else if(D.data.type==="complete"){var G=D.data.animation;P.dataManager.completeData(G),P.postMessage({id:D.data.id,payload:G,status:"success"})}else D.data.type==="loadData"&&P.assetLoader.load(D.data.path,D.data.fullPath,function(X){P.postMessage({id:D.data.id,payload:X,status:"success"})},function(){P.postMessage({id:D.data.id,status:"error"})})}),E.onmessage=function(L){var D=L.data,U=D.id,G=_[U];_[U]=null,D.status==="success"?G.onComplete(D.payload):G.onError&&G.onError()})}function R(L,D){A+=1;var U="processId_"+A;return _[U]={onComplete:L,onError:D},U}function B(L,D,U){F();var G=R(D,U);E.postMessage({type:"loadAnimation",path:L,fullPath:window.location.origin+window.location.pathname,id:G})}function O(L,D,U){F();var G=R(D,U);E.postMessage({type:"loadData",path:L,fullPath:window.location.origin+window.location.pathname,id:G})}function V(L,D,U){F();var G=R(D,U);E.postMessage({type:"complete",animation:L,id:G})}return{loadAnimation:B,loadData:O,completeAnimation:V}}(),ImagePreloader=function(){var A=function(){var z=createTag("canvas");z.width=1,z.height=1;var Y=z.getContext("2d");return Y.fillStyle="rgba(0,0,0,0)",Y.fillRect(0,0,1,1),z}();function _(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function T(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function E(z,Y,W){var q="";if(z.e)q=z.p;else if(Y){var K=z.p;K.indexOf("images/")!==-1&&(K=K.split("/")[1]),q=Y+K}else q=W,q+=z.u?z.u:"",q+=z.p;return q}function C(z){var Y=0,W=setInterval((function(){var q=z.getBBox();(q.width||Y>500)&&(this._imageLoaded(),clearInterval(W)),Y+=1}).bind(this),50)}function P(z){var Y=E(z,this.assetsPath,this.path),W=createNS("image");isSafari?this.testImageLoaded(W):W.addEventListener("load",this._imageLoaded,!1),W.addEventListener("error",(function(){q.img=A,this._imageLoaded()}).bind(this),!1),W.setAttributeNS("http://www.w3.org/1999/xlink","href",Y),this._elementHelper.append?this._elementHelper.append(W):this._elementHelper.appendChild(W);var q={img:W,assetData:z};return q}function I(z){var Y=E(z,this.assetsPath,this.path),W=createTag("img");W.crossOrigin="anonymous",W.addEventListener("load",this._imageLoaded,!1),W.addEventListener("error",(function(){q.img=A,this._imageLoaded()}).bind(this),!1),W.src=Y;var q={img:W,assetData:z};return q}function F(z){var Y={assetData:z},W=E(z,this.assetsPath,this.path);return dataManager.loadData(W,(function(q){Y.img=q,this._footageLoaded()}).bind(this),(function(){Y.img={},this._footageLoaded()}).bind(this)),Y}function R(z,Y){this.imagesLoadedCb=Y;var W,q=z.length;for(W=0;W<q;W+=1)z[W].layers||(!z[W].t||z[W].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(z[W]))):z[W].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(z[W]))))}function B(z){this.path=z||""}function O(z){this.assetsPath=z||""}function V(z){for(var Y=0,W=this.images.length;Y<W;){if(this.images[Y].assetData===z)return this.images[Y].img;Y+=1}return null}function L(){this.imagesLoadedCb=null,this.images.length=0}function D(){return this.totalImages===this.loadedAssets}function U(){return this.totalFootages===this.loadedFootagesCount}function G(z,Y){z==="svg"?(this._elementHelper=Y,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function X(){this._imageLoaded=_.bind(this),this._footageLoaded=T.bind(this),this.testImageLoaded=C.bind(this),this.createFootageData=F.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return X.prototype={loadAssets:R,setAssetsPath:O,setPath:B,loadedImages:D,loadedFootages:U,destroy:L,getAsset:V,createImgData:I,createImageData:P,imageLoaded:_,footageLoaded:T,setCacheType:G},X}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(_,T){if(this._cbs[_])for(var E=this._cbs[_],C=0;C<E.length;C+=1)E[C](T)},addEventListener:function(_,T){return this._cbs[_]||(this._cbs[_]=[]),this._cbs[_].push(T),(function(){this.removeEventListener(_,T)}).bind(this)},removeEventListener:function(_,T){if(!T)this._cbs[_]=null;else if(this._cbs[_]){for(var E=0,C=this._cbs[_].length;E<C;)this._cbs[_][E]===T&&(this._cbs[_].splice(E,1),E-=1,C-=1),E+=1;this._cbs[_].length||(this._cbs[_]=null)}}};var markerParser=function(){function A(_){for(var T=_.split(`\r
`),E={},C,P=0,I=0;I<T.length;I+=1)C=T[I].split(":"),C.length===2&&(E[C[0]]=C[1].trim(),P+=1);if(P===0)throw new Error;return E}return function(_){for(var T=[],E=0;E<_.length;E+=1){var C=_[E],P={time:C.tm,duration:C.dr};try{P.payload=JSON.parse(_[E].cm)}catch{try{P.payload=A(_[E].cm)}catch{P.payload={name:_[E].cm}}}T.push(P)}return T}}(),ProjectInterface=function(){function A(_){this.compositions.push(_)}return function(){function _(T){for(var E=0,C=this.compositions.length;E<C;){if(this.compositions[E].data&&this.compositions[E].data.nm===T)return this.compositions[E].prepareFrame&&this.compositions[E].data.xt&&this.compositions[E].prepareFrame(this.currentFrame),this.compositions[E].compInterface;E+=1}return null}return _.compositions=[],_.currentFrame=0,_.registerComposition=A,_}}(),renderers={},registerRenderer=function(_,T){renderers[_]=T};function getRenderer(A){return renderers[A]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var A in renderers)if(renderers[A])return A;return""}function _typeof$4(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(T){return typeof T}:_typeof$4=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof$4(A)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(A){(A.wrapper||A.container)&&(this.wrapper=A.wrapper||A.container);var _="svg";A.animType?_=A.animType:A.renderer&&(_=A.renderer);var T=getRenderer(_);this.renderer=new T(this,A.rendererSettings),this.imagePreloader.setCacheType(_,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=_,A.loop===""||A.loop===null||A.loop===void 0||A.loop===!0?this.loop=!0:A.loop===!1?this.loop=!1:this.loop=parseInt(A.loop,10),this.autoplay="autoplay"in A?A.autoplay:!0,this.name=A.name?A.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(A,"autoloadSegments")?A.autoloadSegments:!0,this.assetsPath=A.assetsPath,this.initialSegment=A.initialSegment,A.audioFactory&&this.audioController.setAudioFactory(A.audioFactory),A.animationData?this.setupAnimation(A.animationData):A.path&&(A.path.lastIndexOf("\\")!==-1?this.path=A.path.substr(0,A.path.lastIndexOf("\\")+1):this.path=A.path.substr(0,A.path.lastIndexOf("/")+1),this.fileName=A.path.substr(A.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(A.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(A){dataManager.completeAnimation(A,this.configAnimation)},AnimationItem.prototype.setData=function(A,_){_&&_typeof$4(_)!=="object"&&(_=JSON.parse(_));var T={wrapper:A,animationData:_},E=A.attributes;T.path=E.getNamedItem("data-animation-path")?E.getNamedItem("data-animation-path").value:E.getNamedItem("data-bm-path")?E.getNamedItem("data-bm-path").value:E.getNamedItem("bm-path")?E.getNamedItem("bm-path").value:"",T.animType=E.getNamedItem("data-anim-type")?E.getNamedItem("data-anim-type").value:E.getNamedItem("data-bm-type")?E.getNamedItem("data-bm-type").value:E.getNamedItem("bm-type")?E.getNamedItem("bm-type").value:E.getNamedItem("data-bm-renderer")?E.getNamedItem("data-bm-renderer").value:E.getNamedItem("bm-renderer")?E.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var C=E.getNamedItem("data-anim-loop")?E.getNamedItem("data-anim-loop").value:E.getNamedItem("data-bm-loop")?E.getNamedItem("data-bm-loop").value:E.getNamedItem("bm-loop")?E.getNamedItem("bm-loop").value:"";C==="false"?T.loop=!1:C==="true"?T.loop=!0:C!==""&&(T.loop=parseInt(C,10));var P=E.getNamedItem("data-anim-autoplay")?E.getNamedItem("data-anim-autoplay").value:E.getNamedItem("data-bm-autoplay")?E.getNamedItem("data-bm-autoplay").value:E.getNamedItem("bm-autoplay")?E.getNamedItem("bm-autoplay").value:!0;T.autoplay=P!=="false",T.name=E.getNamedItem("data-name")?E.getNamedItem("data-name").value:E.getNamedItem("data-bm-name")?E.getNamedItem("data-bm-name").value:E.getNamedItem("bm-name")?E.getNamedItem("bm-name").value:"";var I=E.getNamedItem("data-anim-prerender")?E.getNamedItem("data-anim-prerender").value:E.getNamedItem("data-bm-prerender")?E.getNamedItem("data-bm-prerender").value:E.getNamedItem("bm-prerender")?E.getNamedItem("bm-prerender").value:"";I==="false"&&(T.prerender=!1),T.path?this.setParams(T):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(A){A.op>this.animationData.op&&(this.animationData.op=A.op,this.totalFrames=Math.floor(A.op-this.animationData.ip));var _=this.animationData.layers,T,E=_.length,C=A.layers,P,I=C.length;for(P=0;P<I;P+=1)for(T=0;T<E;){if(_[T].id===C[P].id){_[T]=C[P];break}T+=1}if((A.chars||A.fonts)&&(this.renderer.globalData.fontManager.addChars(A.chars),this.renderer.globalData.fontManager.addFonts(A.fonts,this.renderer.globalData.defs)),A.assets)for(E=A.assets.length,T=0;T<E;T+=1)this.animationData.assets.push(A.assets[T]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(A){this.animationData=A;var _=getExpressionsPlugin();_&&_.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var A=this.animationData.segments;if(!A||A.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var _=A.shift();this.timeCompleted=_.time*this.frameRate;var T=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(T,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var A=this.animationData.segments;A||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(A){if(this.renderer)try{this.animationData=A,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(A),A.assets||(A.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(A.assets),this.markers=markerParser(A.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(_){this.triggerConfigError(_)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var A=getExpressionsPlugin();A&&A.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(A,_){var T=typeof A=="number"?A:void 0,E=typeof _=="number"?_:void 0;this.renderer.updateContainerSize(T,E)},AnimationItem.prototype.setSubframe=function(A){this.isSubframeEnabled=!!A},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(A){this.triggerRenderFrameError(A)}},AnimationItem.prototype.play=function(A){A&&this.name!==A||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(A){A&&this.name!==A||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(A){A&&this.name!==A||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(A){A&&this.name!==A||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(A){for(var _,T=0;T<this.markers.length;T+=1)if(_=this.markers[T],_.payload&&_.payload.name===A)return _;return null},AnimationItem.prototype.goToAndStop=function(A,_,T){if(!(T&&this.name!==T)){var E=Number(A);if(isNaN(E)){var C=this.getMarkerData(A);C&&this.goToAndStop(C.time,!0)}else _?this.setCurrentRawFrameValue(A):this.setCurrentRawFrameValue(A*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(A,_,T){if(!(T&&this.name!==T)){var E=Number(A);if(isNaN(E)){var C=this.getMarkerData(A);C&&(C.duration?this.playSegments([C.time,C.time+C.duration],!0):this.goToAndStop(C.time,!0))}else this.goToAndStop(E,_,T);this.play()}},AnimationItem.prototype.advanceTime=function(A){if(!(this.isPaused===!0||this.isLoaded===!1)){var _=this.currentRawFrame+A*this.frameModifier,T=!1;_>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(_>this.totalFrames?_%this.totalFrames:0)||(T=!0,_=this.totalFrames-1):_>=this.totalFrames?(this.playCount+=1,this.checkSegments(_%this.totalFrames)||(this.setCurrentRawFrameValue(_%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(_):_<0?this.checkSegments(_%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+_%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(T=!0,_=0)):this.setCurrentRawFrameValue(_),T&&(this.setCurrentRawFrameValue(_),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(A,_){this.playCount=0,A[1]<A[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=A[0]-A[1],this.timeCompleted=this.totalFrames,this.firstFrame=A[1],this.setCurrentRawFrameValue(this.totalFrames-.001-_)):A[1]>A[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=A[1]-A[0],this.timeCompleted=this.totalFrames,this.firstFrame=A[0],this.setCurrentRawFrameValue(.001+_)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(A,_){var T=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<A?T=A:this.currentRawFrame+this.firstFrame>_&&(T=_-A)),this.firstFrame=A,this.totalFrames=_-A,this.timeCompleted=this.totalFrames,T!==-1&&this.goToAndStop(T,!0)},AnimationItem.prototype.playSegments=function(A,_){if(_&&(this.segments.length=0),_typeof$4(A[0])==="object"){var T,E=A.length;for(T=0;T<E;T+=1)this.segments.push(A[T])}else this.segments.push(A);this.segments.length&&_&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(A){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),A&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(A){return this.segments.length?(this.adjustSegment(this.segments.shift(),A),!0):!1},AnimationItem.prototype.destroy=function(A){A&&this.name!==A||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(A){this.currentRawFrame=A,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(A){this.playSpeed=A,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(A){this.playDirection=A<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(A){this.loop=A},AnimationItem.prototype.setVolume=function(A,_){_&&this.name!==_||this.audioController.setVolume(A)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(A){A&&this.name!==A||this.audioController.mute()},AnimationItem.prototype.unmute=function(A){A&&this.name!==A||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(A){var _="";if(A.e)_=A.p;else if(this.assetsPath){var T=A.p;T.indexOf("images/")!==-1&&(T=T.split("/")[1]),_=this.assetsPath+T}else _=this.path,_+=A.u?A.u:"",_+=A.p;return _},AnimationItem.prototype.getAssetData=function(A){for(var _=0,T=this.assets.length;_<T;){if(A===this.assets[_].id)return this.assets[_];_+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(A){return A?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(A,_,T){try{var E=this.renderer.getElementByPath(A);E.updateDocumentData(_,T)}catch{}},AnimationItem.prototype.trigger=function(A){if(this._cbs&&this._cbs[A])switch(A){case"enterFrame":this.triggerEvent(A,new BMEnterFrameEvent(A,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(A,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(A,new BMCompleteLoopEvent(A,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(A,new BMCompleteEvent(A,this.frameMult));break;case"segmentStart":this.triggerEvent(A,new BMSegmentStartEvent(A,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(A,new BMDestroyEvent(A,this));break;default:this.triggerEvent(A)}A==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(A,this.currentFrame,this.totalFrames,this.frameMult)),A==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(A,this.loop,this.playCount,this.frameMult)),A==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(A,this.frameMult)),A==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(A,this.firstFrame,this.totalFrames)),A==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(A,this))},AnimationItem.prototype.triggerRenderFrameError=function(A){var _=new BMRenderFrameErrorEvent(A,this.currentFrame);this.triggerEvent("error",_),this.onError&&this.onError.call(this,_)},AnimationItem.prototype.triggerConfigError=function(A){var _=new BMConfigErrorEvent(A,this.currentFrame);this.triggerEvent("error",_),this.onError&&this.onError.call(this,_)};var animationManager=function(){var A={},_=[],T=0,E=0,C=0,P=!0,I=!1;function F(ee){for(var re=0,Q=ee.target;re<E;)_[re].animation===Q&&(_.splice(re,1),re-=1,E-=1,Q.isPaused||V()),re+=1}function R(ee,re){if(!ee)return null;for(var Q=0;Q<E;){if(_[Q].elem===ee&&_[Q].elem!==null)return _[Q].animation;Q+=1}var te=new AnimationItem;return L(te,ee),te.setData(ee,re),te}function B(){var ee,re=_.length,Q=[];for(ee=0;ee<re;ee+=1)Q.push(_[ee].animation);return Q}function O(){C+=1,ue()}function V(){C-=1}function L(ee,re){ee.addEventListener("destroy",F),ee.addEventListener("_active",O),ee.addEventListener("_idle",V),_.push({elem:re,animation:ee}),E+=1}function D(ee){var re=new AnimationItem;return L(re,null),re.setParams(ee),re}function U(ee,re){var Q;for(Q=0;Q<E;Q+=1)_[Q].animation.setSpeed(ee,re)}function G(ee,re){var Q;for(Q=0;Q<E;Q+=1)_[Q].animation.setDirection(ee,re)}function X(ee){var re;for(re=0;re<E;re+=1)_[re].animation.play(ee)}function z(ee){var re=ee-T,Q;for(Q=0;Q<E;Q+=1)_[Q].animation.advanceTime(re);T=ee,C&&!I?window.requestAnimationFrame(z):P=!0}function Y(ee){T=ee,window.requestAnimationFrame(z)}function W(ee){var re;for(re=0;re<E;re+=1)_[re].animation.pause(ee)}function q(ee,re,Q){var te;for(te=0;te<E;te+=1)_[te].animation.goToAndStop(ee,re,Q)}function K(ee){var re;for(re=0;re<E;re+=1)_[re].animation.stop(ee)}function J(ee){var re;for(re=0;re<E;re+=1)_[re].animation.togglePause(ee)}function Z(ee){var re;for(re=E-1;re>=0;re-=1)_[re].animation.destroy(ee)}function se(ee,re,Q){var te=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),ne,ie=te.length;for(ne=0;ne<ie;ne+=1)Q&&te[ne].setAttribute("data-bm-type",Q),R(te[ne],ee);if(re&&ie===0){Q||(Q="svg");var fe=document.getElementsByTagName("body")[0];fe.innerText="";var me=createTag("div");me.style.width="100%",me.style.height="100%",me.setAttribute("data-bm-type",Q),fe.appendChild(me),R(me,ee)}}function ae(){var ee;for(ee=0;ee<E;ee+=1)_[ee].animation.resize()}function ue(){!I&&C&&P&&(window.requestAnimationFrame(Y),P=!1)}function ce(){I=!0}function he(){I=!1,ue()}function pe(ee,re){var Q;for(Q=0;Q<E;Q+=1)_[Q].animation.setVolume(ee,re)}function ye(ee){var re;for(re=0;re<E;re+=1)_[re].animation.mute(ee)}function _e(ee){var re;for(re=0;re<E;re+=1)_[re].animation.unmute(ee)}return A.registerAnimation=R,A.loadAnimation=D,A.setSpeed=U,A.setDirection=G,A.play=X,A.pause=W,A.stop=K,A.togglePause=J,A.searchAnimations=se,A.resize=ae,A.goToAndStop=q,A.destroy=Z,A.freeze=ce,A.unfreeze=he,A.setVolume=pe,A.mute=ye,A.unmute=_e,A.getRegisteredAnimations=B,A}(),BezierFactory=function(){var A={};A.getBezierEasing=T;var _={};function T(Y,W,q,K,J){var Z=J||("bez_"+Y+"_"+W+"_"+q+"_"+K).replace(/\./g,"p");if(_[Z])return _[Z];var se=new z([Y,W,q,K]);return _[Z]=se,se}var E=4,C=.001,P=1e-7,I=10,F=11,R=1/(F-1),B=typeof Float32Array=="function";function O(Y,W){return 1-3*W+3*Y}function V(Y,W){return 3*W-6*Y}function L(Y){return 3*Y}function D(Y,W,q){return((O(W,q)*Y+V(W,q))*Y+L(W))*Y}function U(Y,W,q){return 3*O(W,q)*Y*Y+2*V(W,q)*Y+L(W)}function G(Y,W,q,K,J){var Z,se,ae=0;do se=W+(q-W)/2,Z=D(se,K,J)-Y,Z>0?q=se:W=se;while(Math.abs(Z)>P&&++ae<I);return se}function X(Y,W,q,K){for(var J=0;J<E;++J){var Z=U(W,q,K);if(Z===0)return W;var se=D(W,q,K)-Y;W-=se/Z}return W}function z(Y){this._p=Y,this._mSampleValues=B?new Float32Array(F):new Array(F),this._precomputed=!1,this.get=this.get.bind(this)}return z.prototype={get:function(W){var q=this._p[0],K=this._p[1],J=this._p[2],Z=this._p[3];return this._precomputed||this._precompute(),q===K&&J===Z?W:W===0?0:W===1?1:D(this._getTForX(W),K,Z)},_precompute:function(){var W=this._p[0],q=this._p[1],K=this._p[2],J=this._p[3];this._precomputed=!0,(W!==q||K!==J)&&this._calcSampleValues()},_calcSampleValues:function(){for(var W=this._p[0],q=this._p[2],K=0;K<F;++K)this._mSampleValues[K]=D(K*R,W,q)},_getTForX:function(W){for(var q=this._p[0],K=this._p[2],J=this._mSampleValues,Z=0,se=1,ae=F-1;se!==ae&&J[se]<=W;++se)Z+=R;--se;var ue=(W-J[se])/(J[se+1]-J[se]),ce=Z+ue*R,he=U(ce,q,K);return he>=C?X(W,ce,q,K):he===0?ce:G(W,Z,Z+R,q,K)}},A}(),pooling=function(){function A(_){return _.concat(createSizedArray(_.length))}return{double:A}}(),poolFactory=function(){return function(A,_,T){var E=0,C=A,P=createSizedArray(C),I={newElement:F,release:R};function F(){var B;return E?(E-=1,B=P[E]):B=_(),B}function R(B){E===C&&(P=pooling.double(P),C*=2),T&&T(B),P[E]=B,E+=1}return I}}(),bezierLengthPool=function(){function A(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,A)}(),segmentsLengthPool=function(){function A(){return{lengths:[],totalLength:0}}function _(T){var E,C=T.lengths.length;for(E=0;E<C;E+=1)bezierLengthPool.release(T.lengths[E]);T.lengths.length=0}return poolFactory(8,A,_)}();function bezFunction(){var A=Math;function _(L,D,U,G,X,z){var Y=L*G+D*X+U*z-X*G-z*L-U*D;return Y>-.001&&Y<.001}function T(L,D,U,G,X,z,Y,W,q){if(U===0&&z===0&&q===0)return _(L,D,G,X,Y,W);var K=A.sqrt(A.pow(G-L,2)+A.pow(X-D,2)+A.pow(z-U,2)),J=A.sqrt(A.pow(Y-L,2)+A.pow(W-D,2)+A.pow(q-U,2)),Z=A.sqrt(A.pow(Y-G,2)+A.pow(W-X,2)+A.pow(q-z,2)),se;return K>J?K>Z?se=K-J-Z:se=Z-J-K:Z>J?se=Z-J-K:se=J-K-Z,se>-1e-4&&se<1e-4}var E=function(){return function(L,D,U,G){var X=getDefaultCurveSegments(),z,Y,W,q,K,J=0,Z,se=[],ae=[],ue=bezierLengthPool.newElement();for(W=U.length,z=0;z<X;z+=1){for(K=z/(X-1),Z=0,Y=0;Y<W;Y+=1)q=bmPow(1-K,3)*L[Y]+3*bmPow(1-K,2)*K*U[Y]+3*(1-K)*bmPow(K,2)*G[Y]+bmPow(K,3)*D[Y],se[Y]=q,ae[Y]!==null&&(Z+=bmPow(se[Y]-ae[Y],2)),ae[Y]=se[Y];Z&&(Z=bmSqrt(Z),J+=Z),ue.percents[z]=K,ue.lengths[z]=J}return ue.addedLength=J,ue}}();function C(L){var D=segmentsLengthPool.newElement(),U=L.c,G=L.v,X=L.o,z=L.i,Y,W=L._length,q=D.lengths,K=0;for(Y=0;Y<W-1;Y+=1)q[Y]=E(G[Y],G[Y+1],X[Y],z[Y+1]),K+=q[Y].addedLength;return U&&W&&(q[Y]=E(G[Y],G[0],X[Y],z[0]),K+=q[Y].addedLength),D.totalLength=K,D}function P(L){this.segmentLength=0,this.points=new Array(L)}function I(L,D){this.partialLength=L,this.point=D}var F=function(){var L={};return function(D,U,G,X){var z=(D[0]+"_"+D[1]+"_"+U[0]+"_"+U[1]+"_"+G[0]+"_"+G[1]+"_"+X[0]+"_"+X[1]).replace(/\./g,"p");if(!L[z]){var Y=getDefaultCurveSegments(),W,q,K,J,Z,se=0,ae,ue,ce=null;D.length===2&&(D[0]!==U[0]||D[1]!==U[1])&&_(D[0],D[1],U[0],U[1],D[0]+G[0],D[1]+G[1])&&_(D[0],D[1],U[0],U[1],U[0]+X[0],U[1]+X[1])&&(Y=2);var he=new P(Y);for(K=G.length,W=0;W<Y;W+=1){for(ue=createSizedArray(K),Z=W/(Y-1),ae=0,q=0;q<K;q+=1)J=bmPow(1-Z,3)*D[q]+3*bmPow(1-Z,2)*Z*(D[q]+G[q])+3*(1-Z)*bmPow(Z,2)*(U[q]+X[q])+bmPow(Z,3)*U[q],ue[q]=J,ce!==null&&(ae+=bmPow(ue[q]-ce[q],2));ae=bmSqrt(ae),se+=ae,he.points[W]=new I(ae,ue),ce=ue}he.segmentLength=se,L[z]=he}return L[z]}}();function R(L,D){var U=D.percents,G=D.lengths,X=U.length,z=bmFloor((X-1)*L),Y=L*D.addedLength,W=0;if(z===X-1||z===0||Y===G[z])return U[z];for(var q=G[z]>Y?-1:1,K=!0;K;)if(G[z]<=Y&&G[z+1]>Y?(W=(Y-G[z])/(G[z+1]-G[z]),K=!1):z+=q,z<0||z>=X-1){if(z===X-1)return U[z];K=!1}return U[z]+(U[z+1]-U[z])*W}function B(L,D,U,G,X,z){var Y=R(X,z),W=1-Y,q=A.round((W*W*W*L[0]+(Y*W*W+W*Y*W+W*W*Y)*U[0]+(Y*Y*W+W*Y*Y+Y*W*Y)*G[0]+Y*Y*Y*D[0])*1e3)/1e3,K=A.round((W*W*W*L[1]+(Y*W*W+W*Y*W+W*W*Y)*U[1]+(Y*Y*W+W*Y*Y+Y*W*Y)*G[1]+Y*Y*Y*D[1])*1e3)/1e3;return[q,K]}var O=createTypedArray("float32",8);function V(L,D,U,G,X,z,Y){X<0?X=0:X>1&&(X=1);var W=R(X,Y);z=z>1?1:z;var q=R(z,Y),K,J=L.length,Z=1-W,se=1-q,ae=Z*Z*Z,ue=W*Z*Z*3,ce=W*W*Z*3,he=W*W*W,pe=Z*Z*se,ye=W*Z*se+Z*W*se+Z*Z*q,_e=W*W*se+Z*W*q+W*Z*q,ee=W*W*q,re=Z*se*se,Q=W*se*se+Z*q*se+Z*se*q,te=W*q*se+Z*q*q+W*se*q,ne=W*q*q,ie=se*se*se,fe=q*se*se+se*q*se+se*se*q,me=q*q*se+se*q*q+q*se*q,be=q*q*q;for(K=0;K<J;K+=1)O[K*4]=A.round((ae*L[K]+ue*U[K]+ce*G[K]+he*D[K])*1e3)/1e3,O[K*4+1]=A.round((pe*L[K]+ye*U[K]+_e*G[K]+ee*D[K])*1e3)/1e3,O[K*4+2]=A.round((re*L[K]+Q*U[K]+te*G[K]+ne*D[K])*1e3)/1e3,O[K*4+3]=A.round((ie*L[K]+fe*U[K]+me*G[K]+be*D[K])*1e3)/1e3;return O}return{getSegmentsLength:C,getNewSegment:V,getPointInSegment:B,buildBezierData:F,pointOnLine2D:_,pointOnLine3D:T}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(A,_){var T=this.offsetTime,E;this.propType==="multidimensional"&&(E=createTypedArray("float32",this.pv.length));for(var C=_.lastIndex,P=C,I=this.keyframes.length-1,F=!0,R,B,O;F;){if(R=this.keyframes[P],B=this.keyframes[P+1],P===I-1&&A>=B.t-T){R.h&&(R=B),C=0;break}if(B.t-T>A){C=P;break}P<I-1?P+=1:(C=0,F=!1)}O=this.keyframesMetadata[P]||{};var V,L,D,U,G,X,z=B.t-T,Y=R.t-T,W;if(R.to){O.bezierData||(O.bezierData=bez.buildBezierData(R.s,B.s||R.e,R.to,R.ti));var q=O.bezierData;if(A>=z||A<Y){var K=A>=z?q.points.length-1:0;for(L=q.points[K].point.length,V=0;V<L;V+=1)E[V]=q.points[K].point[V]}else{O.__fnct?X=O.__fnct:(X=BezierFactory.getBezierEasing(R.o.x,R.o.y,R.i.x,R.i.y,R.n).get,O.__fnct=X),D=X((A-Y)/(z-Y));var J=q.segmentLength*D,Z,se=_.lastFrame<A&&_._lastKeyframeIndex===P?_._lastAddedLength:0;for(G=_.lastFrame<A&&_._lastKeyframeIndex===P?_._lastPoint:0,F=!0,U=q.points.length;F;){if(se+=q.points[G].partialLength,J===0||D===0||G===q.points.length-1){for(L=q.points[G].point.length,V=0;V<L;V+=1)E[V]=q.points[G].point[V];break}else if(J>=se&&J<se+q.points[G+1].partialLength){for(Z=(J-se)/q.points[G+1].partialLength,L=q.points[G].point.length,V=0;V<L;V+=1)E[V]=q.points[G].point[V]+(q.points[G+1].point[V]-q.points[G].point[V])*Z;break}G<U-1?G+=1:F=!1}_._lastPoint=G,_._lastAddedLength=se-q.points[G].partialLength,_._lastKeyframeIndex=P}}else{var ae,ue,ce,he,pe;if(I=R.s.length,W=B.s||R.e,this.sh&&R.h!==1)if(A>=z)E[0]=W[0],E[1]=W[1],E[2]=W[2];else if(A<=Y)E[0]=R.s[0],E[1]=R.s[1],E[2]=R.s[2];else{var ye=createQuaternion(R.s),_e=createQuaternion(W),ee=(A-Y)/(z-Y);quaternionToEuler(E,slerp(ye,_e,ee))}else for(P=0;P<I;P+=1)R.h!==1&&(A>=z?D=1:A<Y?D=0:(R.o.x.constructor===Array?(O.__fnct||(O.__fnct=[]),O.__fnct[P]?X=O.__fnct[P]:(ae=R.o.x[P]===void 0?R.o.x[0]:R.o.x[P],ue=R.o.y[P]===void 0?R.o.y[0]:R.o.y[P],ce=R.i.x[P]===void 0?R.i.x[0]:R.i.x[P],he=R.i.y[P]===void 0?R.i.y[0]:R.i.y[P],X=BezierFactory.getBezierEasing(ae,ue,ce,he).get,O.__fnct[P]=X)):O.__fnct?X=O.__fnct:(ae=R.o.x,ue=R.o.y,ce=R.i.x,he=R.i.y,X=BezierFactory.getBezierEasing(ae,ue,ce,he).get,R.keyframeMetadata=X),D=X((A-Y)/(z-Y)))),W=B.s||R.e,pe=R.h===1?R.s[P]:R.s[P]+(W[P]-R.s[P])*D,this.propType==="multidimensional"?E[P]=pe:E=pe}return _.lastIndex=C,E}function slerp(A,_,T){var E=[],C=A[0],P=A[1],I=A[2],F=A[3],R=_[0],B=_[1],O=_[2],V=_[3],L,D,U,G,X;return D=C*R+P*B+I*O+F*V,D<0&&(D=-D,R=-R,B=-B,O=-O,V=-V),1-D>1e-6?(L=Math.acos(D),U=Math.sin(L),G=Math.sin((1-T)*L)/U,X=Math.sin(T*L)/U):(G=1-T,X=T),E[0]=G*C+X*R,E[1]=G*P+X*B,E[2]=G*I+X*O,E[3]=G*F+X*V,E}function quaternionToEuler(A,_){var T=_[0],E=_[1],C=_[2],P=_[3],I=Math.atan2(2*E*P-2*T*C,1-2*E*E-2*C*C),F=Math.asin(2*T*E+2*C*P),R=Math.atan2(2*T*P-2*E*C,1-2*T*T-2*C*C);A[0]=I/degToRads,A[1]=F/degToRads,A[2]=R/degToRads}function createQuaternion(A){var _=A[0]*degToRads,T=A[1]*degToRads,E=A[2]*degToRads,C=Math.cos(_/2),P=Math.cos(T/2),I=Math.cos(E/2),F=Math.sin(_/2),R=Math.sin(T/2),B=Math.sin(E/2),O=C*P*I-F*R*B,V=F*R*I+C*P*B,L=F*P*I+C*R*B,D=C*R*I-F*P*B;return[V,L,D,O]}function getValueAtCurrentTime(){var A=this.comp.renderedFrame-this.offsetTime,_=this.keyframes[0].t-this.offsetTime,T=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(A===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=T&&A>=T||this._caching.lastFrame<_&&A<_))){this._caching.lastFrame>=A&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var E=this.interpolateValue(A,this._caching);this.pv=E}return this._caching.lastFrame=A,this.pv}function setVValue(A){var _;if(this.propType==="unidimensional")_=A*this.mult,mathAbs(this.v-_)>1e-5&&(this.v=_,this._mdf=!0);else for(var T=0,E=this.v.length;T<E;)_=A[T]*this.mult,mathAbs(this.v[T]-_)>1e-5&&(this.v[T]=_,this._mdf=!0),T+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var A,_=this.effectsSequence.length,T=this.kf?this.pv:this.data.k;for(A=0;A<_;A+=1)T=this.effectsSequence[A](T);this.setVValue(T),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(A){this.effectsSequence.push(A),this.container.addDynamicProperty(this)}function ValueProperty(A,_,T,E){this.propType="unidimensional",this.mult=T||1,this.data=_,this.v=T?_.k*T:_.k,this.pv=_.k,this._mdf=!1,this.elem=A,this.container=E,this.comp=A.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(A,_,T,E){this.propType="multidimensional",this.mult=T||1,this.data=_,this._mdf=!1,this.elem=A,this.container=E,this.comp=A.comp,this.k=!1,this.kf=!1,this.frameId=-1;var C,P=_.k.length;for(this.v=createTypedArray("float32",P),this.pv=createTypedArray("float32",P),this.vel=createTypedArray("float32",P),C=0;C<P;C+=1)this.v[C]=_.k[C]*this.mult,this.pv[C]=_.k[C];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(A,_,T,E){this.propType="unidimensional",this.keyframes=_.k,this.keyframesMetadata=[],this.offsetTime=A.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=_,this.mult=T||1,this.elem=A,this.container=E,this.comp=A.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(A,_,T,E){this.propType="multidimensional";var C,P=_.k.length,I,F,R,B;for(C=0;C<P-1;C+=1)_.k[C].to&&_.k[C].s&&_.k[C+1]&&_.k[C+1].s&&(I=_.k[C].s,F=_.k[C+1].s,R=_.k[C].to,B=_.k[C].ti,(I.length===2&&!(I[0]===F[0]&&I[1]===F[1])&&bez.pointOnLine2D(I[0],I[1],F[0],F[1],I[0]+R[0],I[1]+R[1])&&bez.pointOnLine2D(I[0],I[1],F[0],F[1],F[0]+B[0],F[1]+B[1])||I.length===3&&!(I[0]===F[0]&&I[1]===F[1]&&I[2]===F[2])&&bez.pointOnLine3D(I[0],I[1],I[2],F[0],F[1],F[2],I[0]+R[0],I[1]+R[1],I[2]+R[2])&&bez.pointOnLine3D(I[0],I[1],I[2],F[0],F[1],F[2],F[0]+B[0],F[1]+B[1],F[2]+B[2]))&&(_.k[C].to=null,_.k[C].ti=null),I[0]===F[0]&&I[1]===F[1]&&R[0]===0&&R[1]===0&&B[0]===0&&B[1]===0&&(I.length===2||I[2]===F[2]&&R[2]===0&&B[2]===0)&&(_.k[C].to=null,_.k[C].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=_,this.keyframes=_.k,this.keyframesMetadata=[],this.offsetTime=A.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=T||1,this.elem=A,this.container=E,this.comp=A.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var O=_.k[0].s.length;for(this.v=createTypedArray("float32",O),this.pv=createTypedArray("float32",O),C=0;C<O;C+=1)this.v[C]=initFrame,this.pv[C]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",O)},this.addEffect=addEffect}var PropertyFactory=function(){function A(T,E,C,P,I){E.sid&&(E=T.globalData.slotManager.getProp(E));var F;if(!E.k.length)F=new ValueProperty(T,E,P,I);else if(typeof E.k[0]=="number")F=new MultiDimensionalProperty(T,E,P,I);else switch(C){case 0:F=new KeyframedValueProperty(T,E,P,I);break;case 1:F=new KeyframedMultidimensionalProperty(T,E,P,I);break}return F.effectsSequence.length&&I.addDynamicProperty(F),F}var _={getProp:A};return _}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(_){this.dynamicProperties.indexOf(_)===-1&&(this.dynamicProperties.push(_),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var _,T=this.dynamicProperties.length;for(_=0;_<T;_+=1)this.dynamicProperties[_].getValue(),this.dynamicProperties[_]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(_){this.container=_,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function A(){return createTypedArray("float32",2)}return poolFactory(8,A)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(A,_){this.c=A,this.setLength(_);for(var T=0;T<_;)this.v[T]=pointPool.newElement(),this.o[T]=pointPool.newElement(),this.i[T]=pointPool.newElement(),T+=1},ShapePath.prototype.setLength=function(A){for(;this._maxLength<A;)this.doubleArrayLength();this._length=A},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(A,_,T,E,C){var P;switch(this._length=Math.max(this._length,E+1),this._length>=this._maxLength&&this.doubleArrayLength(),T){case"v":P=this.v;break;case"i":P=this.i;break;case"o":P=this.o;break;default:P=[];break}(!P[E]||P[E]&&!C)&&(P[E]=pointPool.newElement()),P[E][0]=A,P[E][1]=_},ShapePath.prototype.setTripleAt=function(A,_,T,E,C,P,I,F){this.setXYAt(A,_,"v",I,F),this.setXYAt(T,E,"o",I,F),this.setXYAt(C,P,"i",I,F)},ShapePath.prototype.reverse=function(){var A=new ShapePath;A.setPathData(this.c,this._length);var _=this.v,T=this.o,E=this.i,C=0;this.c&&(A.setTripleAt(_[0][0],_[0][1],E[0][0],E[0][1],T[0][0],T[0][1],0,!1),C=1);var P=this._length-1,I=this._length,F;for(F=C;F<I;F+=1)A.setTripleAt(_[P][0],_[P][1],E[P][0],E[P][1],T[P][0],T[P][1],F,!1),P-=1;return A},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function A(){return new ShapePath}function _(C){var P=C._length,I;for(I=0;I<P;I+=1)pointPool.release(C.v[I]),pointPool.release(C.i[I]),pointPool.release(C.o[I]),C.v[I]=null,C.i[I]=null,C.o[I]=null;C._length=0,C.c=!1}function T(C){var P=E.newElement(),I,F=C._length===void 0?C.v.length:C._length;for(P.setLength(F),P.c=C.c,I=0;I<F;I+=1)P.setTripleAt(C.v[I][0],C.v[I][1],C.o[I][0],C.o[I][1],C.i[I][0],C.i[I][1],I);return P}var E=poolFactory(4,A,_);return E.clone=T,E}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(A){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=A,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var A;for(A=0;A<this._length;A+=1)shapePool.release(this.shapes[A]);this._length=0};var shapeCollectionPool=function(){var A={newShapeCollection:C,release:P},_=0,T=4,E=createSizedArray(T);function C(){var I;return _?(_-=1,I=E[_]):I=new ShapeCollection,I}function P(I){var F,R=I._length;for(F=0;F<R;F+=1)shapePool.release(I.shapes[F]);I._length=0,_===T&&(E=pooling.double(E),T*=2),E[_]=I,_+=1}return A}(),ShapePropertyFactory=function(){var A=-999999;function _(z,Y,W){var q=W.lastIndex,K,J,Z,se,ae,ue,ce,he,pe,ye=this.keyframes;if(z<ye[0].t-this.offsetTime)K=ye[0].s[0],Z=!0,q=0;else if(z>=ye[ye.length-1].t-this.offsetTime)K=ye[ye.length-1].s?ye[ye.length-1].s[0]:ye[ye.length-2].e[0],Z=!0;else{for(var _e=q,ee=ye.length-1,re=!0,Q,te,ne;re&&(Q=ye[_e],te=ye[_e+1],!(te.t-this.offsetTime>z));)_e<ee-1?_e+=1:re=!1;if(ne=this.keyframesMetadata[_e]||{},Z=Q.h===1,q=_e,!Z){if(z>=te.t-this.offsetTime)he=1;else if(z<Q.t-this.offsetTime)he=0;else{var ie;ne.__fnct?ie=ne.__fnct:(ie=BezierFactory.getBezierEasing(Q.o.x,Q.o.y,Q.i.x,Q.i.y).get,ne.__fnct=ie),he=ie((z-(Q.t-this.offsetTime))/(te.t-this.offsetTime-(Q.t-this.offsetTime)))}J=te.s?te.s[0]:Q.e[0]}K=Q.s[0]}for(ue=Y._length,ce=K.i[0].length,W.lastIndex=q,se=0;se<ue;se+=1)for(ae=0;ae<ce;ae+=1)pe=Z?K.i[se][ae]:K.i[se][ae]+(J.i[se][ae]-K.i[se][ae])*he,Y.i[se][ae]=pe,pe=Z?K.o[se][ae]:K.o[se][ae]+(J.o[se][ae]-K.o[se][ae])*he,Y.o[se][ae]=pe,pe=Z?K.v[se][ae]:K.v[se][ae]+(J.v[se][ae]-K.v[se][ae])*he,Y.v[se][ae]=pe}function T(){var z=this.comp.renderedFrame-this.offsetTime,Y=this.keyframes[0].t-this.offsetTime,W=this.keyframes[this.keyframes.length-1].t-this.offsetTime,q=this._caching.lastFrame;return q!==A&&(q<Y&&z<Y||q>W&&z>W)||(this._caching.lastIndex=q<z?this._caching.lastIndex:0,this.interpolateShape(z,this.pv,this._caching)),this._caching.lastFrame=z,this.pv}function E(){this.paths=this.localShapeCollection}function C(z,Y){if(z._length!==Y._length||z.c!==Y.c)return!1;var W,q=z._length;for(W=0;W<q;W+=1)if(z.v[W][0]!==Y.v[W][0]||z.v[W][1]!==Y.v[W][1]||z.o[W][0]!==Y.o[W][0]||z.o[W][1]!==Y.o[W][1]||z.i[W][0]!==Y.i[W][0]||z.i[W][1]!==Y.i[W][1])return!1;return!0}function P(z){C(this.v,z)||(this.v=shapePool.clone(z),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function I(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var z;this.kf?z=this.pv:this.data.ks?z=this.data.ks.k:z=this.data.pt.k;var Y,W=this.effectsSequence.length;for(Y=0;Y<W;Y+=1)z=this.effectsSequence[Y](z);this.setVValue(z),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function F(z,Y,W){this.propType="shape",this.comp=z.comp,this.container=z,this.elem=z,this.data=Y,this.k=!1,this.kf=!1,this._mdf=!1;var q=W===3?Y.pt.k:Y.ks.k;this.v=shapePool.clone(q),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=E,this.effectsSequence=[]}function R(z){this.effectsSequence.push(z),this.container.addDynamicProperty(this)}F.prototype.interpolateShape=_,F.prototype.getValue=I,F.prototype.setVValue=P,F.prototype.addEffect=R;function B(z,Y,W){this.propType="shape",this.comp=z.comp,this.elem=z,this.container=z,this.offsetTime=z.data.st,this.keyframes=W===3?Y.pt.k:Y.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var q=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,q),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=A,this.reset=E,this._caching={lastFrame:A,lastIndex:0},this.effectsSequence=[T.bind(this)]}B.prototype.getValue=I,B.prototype.interpolateShape=_,B.prototype.setVValue=P,B.prototype.addEffect=R;var O=function(){var z=roundCorner;function Y(W,q){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=q.d,this.elem=W,this.comp=W.comp,this.frameId=-1,this.initDynamicPropertyContainer(W),this.p=PropertyFactory.getProp(W,q.p,1,0,this),this.s=PropertyFactory.getProp(W,q.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Y.prototype={reset:E,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var q=this.p.v[0],K=this.p.v[1],J=this.s.v[0]/2,Z=this.s.v[1]/2,se=this.d!==3,ae=this.v;ae.v[0][0]=q,ae.v[0][1]=K-Z,ae.v[1][0]=se?q+J:q-J,ae.v[1][1]=K,ae.v[2][0]=q,ae.v[2][1]=K+Z,ae.v[3][0]=se?q-J:q+J,ae.v[3][1]=K,ae.i[0][0]=se?q-J*z:q+J*z,ae.i[0][1]=K-Z,ae.i[1][0]=se?q+J:q-J,ae.i[1][1]=K-Z*z,ae.i[2][0]=se?q+J*z:q-J*z,ae.i[2][1]=K+Z,ae.i[3][0]=se?q-J:q+J,ae.i[3][1]=K+Z*z,ae.o[0][0]=se?q+J*z:q-J*z,ae.o[0][1]=K-Z,ae.o[1][0]=se?q+J:q-J,ae.o[1][1]=K+Z*z,ae.o[2][0]=se?q-J*z:q+J*z,ae.o[2][1]=K+Z,ae.o[3][0]=se?q-J:q+J,ae.o[3][1]=K-Z*z}},extendPrototype([DynamicPropertyContainer],Y),Y}(),V=function(){function z(Y,W){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Y,this.comp=Y.comp,this.data=W,this.frameId=-1,this.d=W.d,this.initDynamicPropertyContainer(Y),W.sy===1?(this.ir=PropertyFactory.getProp(Y,W.ir,0,0,this),this.is=PropertyFactory.getProp(Y,W.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Y,W.pt,0,0,this),this.p=PropertyFactory.getProp(Y,W.p,1,0,this),this.r=PropertyFactory.getProp(Y,W.r,0,degToRads,this),this.or=PropertyFactory.getProp(Y,W.or,0,0,this),this.os=PropertyFactory.getProp(Y,W.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return z.prototype={reset:E,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var W=Math.floor(this.pt.v)*2,q=Math.PI*2/W,K=!0,J=this.or.v,Z=this.ir.v,se=this.os.v,ae=this.is.v,ue=2*Math.PI*J/(W*2),ce=2*Math.PI*Z/(W*2),he,pe,ye,_e,ee=-Math.PI/2;ee+=this.r.v;var re=this.data.d===3?-1:1;for(this.v._length=0,he=0;he<W;he+=1){pe=K?J:Z,ye=K?se:ae,_e=K?ue:ce;var Q=pe*Math.cos(ee),te=pe*Math.sin(ee),ne=Q===0&&te===0?0:te/Math.sqrt(Q*Q+te*te),ie=Q===0&&te===0?0:-Q/Math.sqrt(Q*Q+te*te);Q+=+this.p.v[0],te+=+this.p.v[1],this.v.setTripleAt(Q,te,Q-ne*_e*ye*re,te-ie*_e*ye*re,Q+ne*_e*ye*re,te+ie*_e*ye*re,he,!0),K=!K,ee+=q*re}},convertPolygonToPath:function(){var W=Math.floor(this.pt.v),q=Math.PI*2/W,K=this.or.v,J=this.os.v,Z=2*Math.PI*K/(W*4),se,ae=-Math.PI*.5,ue=this.data.d===3?-1:1;for(ae+=this.r.v,this.v._length=0,se=0;se<W;se+=1){var ce=K*Math.cos(ae),he=K*Math.sin(ae),pe=ce===0&&he===0?0:he/Math.sqrt(ce*ce+he*he),ye=ce===0&&he===0?0:-ce/Math.sqrt(ce*ce+he*he);ce+=+this.p.v[0],he+=+this.p.v[1],this.v.setTripleAt(ce,he,ce-pe*Z*J*ue,he-ye*Z*J*ue,ce+pe*Z*J*ue,he+ye*Z*J*ue,se,!0),ae+=q*ue}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],z),z}(),L=function(){function z(Y,W){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Y,this.comp=Y.comp,this.frameId=-1,this.d=W.d,this.initDynamicPropertyContainer(Y),this.p=PropertyFactory.getProp(Y,W.p,1,0,this),this.s=PropertyFactory.getProp(Y,W.s,1,0,this),this.r=PropertyFactory.getProp(Y,W.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return z.prototype={convertRectToPath:function(){var W=this.p.v[0],q=this.p.v[1],K=this.s.v[0]/2,J=this.s.v[1]/2,Z=bmMin(K,J,this.r.v),se=Z*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(W+K,q-J+Z,W+K,q-J+Z,W+K,q-J+se,0,!0),this.v.setTripleAt(W+K,q+J-Z,W+K,q+J-se,W+K,q+J-Z,1,!0),Z!==0?(this.v.setTripleAt(W+K-Z,q+J,W+K-Z,q+J,W+K-se,q+J,2,!0),this.v.setTripleAt(W-K+Z,q+J,W-K+se,q+J,W-K+Z,q+J,3,!0),this.v.setTripleAt(W-K,q+J-Z,W-K,q+J-Z,W-K,q+J-se,4,!0),this.v.setTripleAt(W-K,q-J+Z,W-K,q-J+se,W-K,q-J+Z,5,!0),this.v.setTripleAt(W-K+Z,q-J,W-K+Z,q-J,W-K+se,q-J,6,!0),this.v.setTripleAt(W+K-Z,q-J,W+K-se,q-J,W+K-Z,q-J,7,!0)):(this.v.setTripleAt(W-K,q+J,W-K+se,q+J,W-K,q+J,2),this.v.setTripleAt(W-K,q-J,W-K,q-J+se,W-K,q-J,3))):(this.v.setTripleAt(W+K,q-J+Z,W+K,q-J+se,W+K,q-J+Z,0,!0),Z!==0?(this.v.setTripleAt(W+K-Z,q-J,W+K-Z,q-J,W+K-se,q-J,1,!0),this.v.setTripleAt(W-K+Z,q-J,W-K+se,q-J,W-K+Z,q-J,2,!0),this.v.setTripleAt(W-K,q-J+Z,W-K,q-J+Z,W-K,q-J+se,3,!0),this.v.setTripleAt(W-K,q+J-Z,W-K,q+J-se,W-K,q+J-Z,4,!0),this.v.setTripleAt(W-K+Z,q+J,W-K+Z,q+J,W-K+se,q+J,5,!0),this.v.setTripleAt(W+K-Z,q+J,W+K-se,q+J,W+K-Z,q+J,6,!0),this.v.setTripleAt(W+K,q+J-Z,W+K,q+J-Z,W+K,q+J-se,7,!0)):(this.v.setTripleAt(W-K,q-J,W-K+se,q-J,W-K,q-J,1,!0),this.v.setTripleAt(W-K,q+J,W-K,q+J-se,W-K,q+J,2,!0),this.v.setTripleAt(W+K,q+J,W+K-se,q+J,W+K,q+J,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:E},extendPrototype([DynamicPropertyContainer],z),z}();function D(z,Y,W){var q;if(W===3||W===4){var K=W===3?Y.pt:Y.ks,J=K.k;J.length?q=new B(z,Y,W):q=new F(z,Y,W)}else W===5?q=new L(z,Y):W===6?q=new O(z,Y):W===7&&(q=new V(z,Y));return q.k&&z.addDynamicProperty(q),q}function U(){return F}function G(){return B}var X={};return X.getShapeProp=D,X.getConstructorFunction=U,X.getKeyframedConstructorFunction=G,X}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var A=Math.cos,_=Math.sin,T=Math.tan,E=Math.round;function C(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function P(Q){if(Q===0)return this;var te=A(Q),ne=_(Q);return this._t(te,-ne,0,0,ne,te,0,0,0,0,1,0,0,0,0,1)}function I(Q){if(Q===0)return this;var te=A(Q),ne=_(Q);return this._t(1,0,0,0,0,te,-ne,0,0,ne,te,0,0,0,0,1)}function F(Q){if(Q===0)return this;var te=A(Q),ne=_(Q);return this._t(te,0,ne,0,0,1,0,0,-ne,0,te,0,0,0,0,1)}function R(Q){if(Q===0)return this;var te=A(Q),ne=_(Q);return this._t(te,-ne,0,0,ne,te,0,0,0,0,1,0,0,0,0,1)}function B(Q,te){return this._t(1,te,Q,1,0,0)}function O(Q,te){return this.shear(T(Q),T(te))}function V(Q,te){var ne=A(te),ie=_(te);return this._t(ne,ie,0,0,-ie,ne,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,T(Q),1,0,0,0,0,1,0,0,0,0,1)._t(ne,-ie,0,0,ie,ne,0,0,0,0,1,0,0,0,0,1)}function L(Q,te,ne){return!ne&&ne!==0&&(ne=1),Q===1&&te===1&&ne===1?this:this._t(Q,0,0,0,0,te,0,0,0,0,ne,0,0,0,0,1)}function D(Q,te,ne,ie,fe,me,be,Pe,Me,ge,Se,Ee,Ae,Ie,oe,le){return this.props[0]=Q,this.props[1]=te,this.props[2]=ne,this.props[3]=ie,this.props[4]=fe,this.props[5]=me,this.props[6]=be,this.props[7]=Pe,this.props[8]=Me,this.props[9]=ge,this.props[10]=Se,this.props[11]=Ee,this.props[12]=Ae,this.props[13]=Ie,this.props[14]=oe,this.props[15]=le,this}function U(Q,te,ne){return ne=ne||0,Q!==0||te!==0||ne!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Q,te,ne,1):this}function G(Q,te,ne,ie,fe,me,be,Pe,Me,ge,Se,Ee,Ae,Ie,oe,le){var de=this.props;if(Q===1&&te===0&&ne===0&&ie===0&&fe===0&&me===1&&be===0&&Pe===0&&Me===0&&ge===0&&Se===1&&Ee===0)return de[12]=de[12]*Q+de[15]*Ae,de[13]=de[13]*me+de[15]*Ie,de[14]=de[14]*Se+de[15]*oe,de[15]*=le,this._identityCalculated=!1,this;var ve=de[0],xe=de[1],Ce=de[2],Fe=de[3],ke=de[4],Be=de[5],Re=de[6],Le=de[7],$e=de[8],Oe=de[9],Ve=de[10],De=de[11],Ge=de[12],He=de[13],We=de[14],je=de[15];return de[0]=ve*Q+xe*fe+Ce*Me+Fe*Ae,de[1]=ve*te+xe*me+Ce*ge+Fe*Ie,de[2]=ve*ne+xe*be+Ce*Se+Fe*oe,de[3]=ve*ie+xe*Pe+Ce*Ee+Fe*le,de[4]=ke*Q+Be*fe+Re*Me+Le*Ae,de[5]=ke*te+Be*me+Re*ge+Le*Ie,de[6]=ke*ne+Be*be+Re*Se+Le*oe,de[7]=ke*ie+Be*Pe+Re*Ee+Le*le,de[8]=$e*Q+Oe*fe+Ve*Me+De*Ae,de[9]=$e*te+Oe*me+Ve*ge+De*Ie,de[10]=$e*ne+Oe*be+Ve*Se+De*oe,de[11]=$e*ie+Oe*Pe+Ve*Ee+De*le,de[12]=Ge*Q+He*fe+We*Me+je*Ae,de[13]=Ge*te+He*me+We*ge+je*Ie,de[14]=Ge*ne+He*be+We*Se+je*oe,de[15]=Ge*ie+He*Pe+We*Ee+je*le,this._identityCalculated=!1,this}function X(Q){var te=Q.props;return this.transform(te[0],te[1],te[2],te[3],te[4],te[5],te[6],te[7],te[8],te[9],te[10],te[11],te[12],te[13],te[14],te[15])}function z(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function Y(Q){for(var te=0;te<16;){if(Q.props[te]!==this.props[te])return!1;te+=1}return!0}function W(Q){var te;for(te=0;te<16;te+=1)Q.props[te]=this.props[te];return Q}function q(Q){var te;for(te=0;te<16;te+=1)this.props[te]=Q[te]}function K(Q,te,ne){return{x:Q*this.props[0]+te*this.props[4]+ne*this.props[8]+this.props[12],y:Q*this.props[1]+te*this.props[5]+ne*this.props[9]+this.props[13],z:Q*this.props[2]+te*this.props[6]+ne*this.props[10]+this.props[14]}}function J(Q,te,ne){return Q*this.props[0]+te*this.props[4]+ne*this.props[8]+this.props[12]}function Z(Q,te,ne){return Q*this.props[1]+te*this.props[5]+ne*this.props[9]+this.props[13]}function se(Q,te,ne){return Q*this.props[2]+te*this.props[6]+ne*this.props[10]+this.props[14]}function ae(){var Q=this.props[0]*this.props[5]-this.props[1]*this.props[4],te=this.props[5]/Q,ne=-this.props[1]/Q,ie=-this.props[4]/Q,fe=this.props[0]/Q,me=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Q,be=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Q,Pe=new Matrix;return Pe.props[0]=te,Pe.props[1]=ne,Pe.props[4]=ie,Pe.props[5]=fe,Pe.props[12]=me,Pe.props[13]=be,Pe}function ue(Q){var te=this.getInverseMatrix();return te.applyToPointArray(Q[0],Q[1],Q[2]||0)}function ce(Q){var te,ne=Q.length,ie=[];for(te=0;te<ne;te+=1)ie[te]=ue(Q[te]);return ie}function he(Q,te,ne){var ie=createTypedArray("float32",6);if(this.isIdentity())ie[0]=Q[0],ie[1]=Q[1],ie[2]=te[0],ie[3]=te[1],ie[4]=ne[0],ie[5]=ne[1];else{var fe=this.props[0],me=this.props[1],be=this.props[4],Pe=this.props[5],Me=this.props[12],ge=this.props[13];ie[0]=Q[0]*fe+Q[1]*be+Me,ie[1]=Q[0]*me+Q[1]*Pe+ge,ie[2]=te[0]*fe+te[1]*be+Me,ie[3]=te[0]*me+te[1]*Pe+ge,ie[4]=ne[0]*fe+ne[1]*be+Me,ie[5]=ne[0]*me+ne[1]*Pe+ge}return ie}function pe(Q,te,ne){var ie;return this.isIdentity()?ie=[Q,te,ne]:ie=[Q*this.props[0]+te*this.props[4]+ne*this.props[8]+this.props[12],Q*this.props[1]+te*this.props[5]+ne*this.props[9]+this.props[13],Q*this.props[2]+te*this.props[6]+ne*this.props[10]+this.props[14]],ie}function ye(Q,te){if(this.isIdentity())return Q+","+te;var ne=this.props;return Math.round((Q*ne[0]+te*ne[4]+ne[12])*100)/100+","+Math.round((Q*ne[1]+te*ne[5]+ne[13])*100)/100}function _e(){for(var Q=0,te=this.props,ne="matrix3d(",ie=1e4;Q<16;)ne+=E(te[Q]*ie)/ie,ne+=Q===15?")":",",Q+=1;return ne}function ee(Q){var te=1e4;return Q<1e-6&&Q>0||Q>-1e-6&&Q<0?E(Q*te)/te:Q}function re(){var Q=this.props,te=ee(Q[0]),ne=ee(Q[1]),ie=ee(Q[4]),fe=ee(Q[5]),me=ee(Q[12]),be=ee(Q[13]);return"matrix("+te+","+ne+","+ie+","+fe+","+me+","+be+")"}return function(){this.reset=C,this.rotate=P,this.rotateX=I,this.rotateY=F,this.rotateZ=R,this.skew=O,this.skewFromAxis=V,this.shear=B,this.scale=L,this.setTransform=D,this.translate=U,this.transform=G,this.multiply=X,this.applyToPoint=K,this.applyToX=J,this.applyToY=Z,this.applyToZ=se,this.applyToPointArray=pe,this.applyToTriplePoints=he,this.applyToPointStringified=ye,this.toCSS=_e,this.to2dCSS=re,this.clone=W,this.cloneFromProps=q,this.equals=Y,this.inversePoints=ce,this.inversePoint=ue,this.getInverseMatrix=ae,this._t=this.transform,this.isIdentity=z,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(T){return typeof T}:_typeof$3=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof$3(A)}var lottie={};function setLocation(A){setLocationHref(A)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(A){setSubframeEnabled(A)}function setPrefix(A){setIdPrefix(A)}function loadAnimation(A){return animationManager.loadAnimation(A)}function setQuality(A){if(typeof A=="string")switch(A){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(A)&&A>1&&setDefaultCurveSegments(A)}function inBrowser(){return typeof navigator<"u"}function installPlugin(A,_){A==="expressions"&&setExpressionsPlugin(_)}function getFactory(A){switch(A){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(A){for(var _=queryString.split("&"),T=0;T<_.length;T+=1){var E=_[T].split("=");if(decodeURIComponent(E[0])==A)return decodeURIComponent(E[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(A){}var ShapeModifiers=function(){var A={},_={};A.registerModifier=T,A.getModifier=E;function T(C,P){_[C]||(_[C]=P)}function E(C,P,I){return new _[C](P,I)}return A}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(A){if(!this.closed){A.sh.container.addDynamicProperty(A.sh);var _={shape:A.sh,data:A,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(_),this.addShapeToModifier(_),this._isAnimated&&A.setAsAnimated()}},ShapeModifier.prototype.init=function(A,_){this.shapes=[],this.elem=A,this.initDynamicPropertyContainer(A),this.initModifierProperties(A,_),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(A,_){this.s=PropertyFactory.getProp(A,_.s,0,.01,this),this.e=PropertyFactory.getProp(A,_.e,0,.01,this),this.o=PropertyFactory.getProp(A,_.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=_.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(A){A.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(A,_,T,E,C){var P=[];_<=1?P.push({s:A,e:_}):A>=1?P.push({s:A-1,e:_-1}):(P.push({s:A,e:1}),P.push({s:0,e:_-1}));var I=[],F,R=P.length,B;for(F=0;F<R;F+=1)if(B=P[F],!(B.e*C<E||B.s*C>E+T)){var O,V;B.s*C<=E?O=0:O=(B.s*C-E)/T,B.e*C>=E+T?V=1:V=(B.e*C-E)/T,I.push([O,V])}return I.length||I.push([0,0]),I},TrimModifier.prototype.releasePathsData=function(A){var _,T=A.length;for(_=0;_<T;_+=1)segmentsLengthPool.release(A[_]);return A.length=0,A},TrimModifier.prototype.processShapes=function(A){var _,T;if(this._mdf||A){var E=this.o.v%360/360;if(E<0&&(E+=1),this.s.v>1?_=1+E:this.s.v<0?_=0+E:_=this.s.v+E,this.e.v>1?T=1+E:this.e.v<0?T=0+E:T=this.e.v+E,_>T){var C=_;_=T,T=C}_=Math.round(_*1e4)*1e-4,T=Math.round(T*1e4)*1e-4,this.sValue=_,this.eValue=T}else _=this.sValue,T=this.eValue;var P,I,F=this.shapes.length,R,B,O,V,L,D=0;if(T===_)for(I=0;I<F;I+=1)this.shapes[I].localShapeCollection.releaseShapes(),this.shapes[I].shape._mdf=!0,this.shapes[I].shape.paths=this.shapes[I].localShapeCollection,this._mdf&&(this.shapes[I].pathsData.length=0);else if(T===1&&_===0||T===0&&_===1){if(this._mdf)for(I=0;I<F;I+=1)this.shapes[I].pathsData.length=0,this.shapes[I].shape._mdf=!0}else{var U=[],G,X;for(I=0;I<F;I+=1)if(G=this.shapes[I],!G.shape._mdf&&!this._mdf&&!A&&this.m!==2)G.shape.paths=G.localShapeCollection;else{if(P=G.shape.paths,B=P._length,L=0,!G.shape._mdf&&G.pathsData.length)L=G.totalShapeLength;else{for(O=this.releasePathsData(G.pathsData),R=0;R<B;R+=1)V=bez.getSegmentsLength(P.shapes[R]),O.push(V),L+=V.totalLength;G.totalShapeLength=L,G.pathsData=O}D+=L,G.shape._mdf=!0}var z=_,Y=T,W=0,q;for(I=F-1;I>=0;I-=1)if(G=this.shapes[I],G.shape._mdf){for(X=G.localShapeCollection,X.releaseShapes(),this.m===2&&F>1?(q=this.calculateShapeEdges(_,T,G.totalShapeLength,W,D),W+=G.totalShapeLength):q=[[z,Y]],B=q.length,R=0;R<B;R+=1){z=q[R][0],Y=q[R][1],U.length=0,Y<=1?U.push({s:G.totalShapeLength*z,e:G.totalShapeLength*Y}):z>=1?U.push({s:G.totalShapeLength*(z-1),e:G.totalShapeLength*(Y-1)}):(U.push({s:G.totalShapeLength*z,e:G.totalShapeLength}),U.push({s:0,e:G.totalShapeLength*(Y-1)}));var K=this.addShapes(G,U[0]);if(U[0].s!==U[0].e){if(U.length>1){var J=G.shape.paths.shapes[G.shape.paths._length-1];if(J.c){var Z=K.pop();this.addPaths(K,X),K=this.addShapes(G,U[1],Z)}else this.addPaths(K,X),K=this.addShapes(G,U[1])}this.addPaths(K,X)}}G.shape.paths=X}}},TrimModifier.prototype.addPaths=function(A,_){var T,E=A.length;for(T=0;T<E;T+=1)_.addShape(A[T])},TrimModifier.prototype.addSegment=function(A,_,T,E,C,P,I){C.setXYAt(_[0],_[1],"o",P),C.setXYAt(T[0],T[1],"i",P+1),I&&C.setXYAt(A[0],A[1],"v",P),C.setXYAt(E[0],E[1],"v",P+1)},TrimModifier.prototype.addSegmentFromArray=function(A,_,T,E){_.setXYAt(A[1],A[5],"o",T),_.setXYAt(A[2],A[6],"i",T+1),E&&_.setXYAt(A[0],A[4],"v",T),_.setXYAt(A[3],A[7],"v",T+1)},TrimModifier.prototype.addShapes=function(A,_,T){var E=A.pathsData,C=A.shape.paths.shapes,P,I=A.shape.paths._length,F,R,B=0,O,V,L,D,U=[],G,X=!0;for(T?(V=T._length,G=T._length):(T=shapePool.newElement(),V=0,G=0),U.push(T),P=0;P<I;P+=1){for(L=E[P].lengths,T.c=C[P].c,R=C[P].c?L.length:L.length+1,F=1;F<R;F+=1)if(O=L[F-1],B+O.addedLength<_.s)B+=O.addedLength,T.c=!1;else if(B>_.e){T.c=!1;break}else _.s<=B&&_.e>=B+O.addedLength?(this.addSegment(C[P].v[F-1],C[P].o[F-1],C[P].i[F],C[P].v[F],T,V,X),X=!1):(D=bez.getNewSegment(C[P].v[F-1],C[P].v[F],C[P].o[F-1],C[P].i[F],(_.s-B)/O.addedLength,(_.e-B)/O.addedLength,L[F-1]),this.addSegmentFromArray(D,T,V,X),X=!1,T.c=!1),B+=O.addedLength,V+=1;if(C[P].c&&L.length){if(O=L[F-1],B<=_.e){var z=L[F-1].addedLength;_.s<=B&&_.e>=B+z?(this.addSegment(C[P].v[F-1],C[P].o[F-1],C[P].i[0],C[P].v[0],T,V,X),X=!1):(D=bez.getNewSegment(C[P].v[F-1],C[P].v[0],C[P].o[F-1],C[P].i[0],(_.s-B)/z,(_.e-B)/z,L[F-1]),this.addSegmentFromArray(D,T,V,X),X=!1,T.c=!1)}else T.c=!1;B+=O.addedLength,V+=1}if(T._length&&(T.setXYAt(T.v[G][0],T.v[G][1],"i",G),T.setXYAt(T.v[T._length-1][0],T.v[T._length-1][1],"o",T._length-1)),B>_.e)break;P<I-1&&(T=shapePool.newElement(),X=!0,U.push(T),V=0)}return U};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(A,_){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(A,_.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(A,_){var T=_/100,E=[0,0],C=A._length,P=0;for(P=0;P<C;P+=1)E[0]+=A.v[P][0],E[1]+=A.v[P][1];E[0]/=C,E[1]/=C;var I=shapePool.newElement();I.c=A.c;var F,R,B,O,V,L;for(P=0;P<C;P+=1)F=A.v[P][0]+(E[0]-A.v[P][0])*T,R=A.v[P][1]+(E[1]-A.v[P][1])*T,B=A.o[P][0]+(E[0]-A.o[P][0])*-T,O=A.o[P][1]+(E[1]-A.o[P][1])*-T,V=A.i[P][0]+(E[0]-A.i[P][0])*-T,L=A.i[P][1]+(E[1]-A.i[P][1])*-T,I.setTripleAt(F,R,B,O,V,L,P);return I},PuckerAndBloatModifier.prototype.processShapes=function(A){var _,T,E=this.shapes.length,C,P,I=this.amount.v;if(I!==0){var F,R;for(T=0;T<E;T+=1){if(F=this.shapes[T],R=F.localShapeCollection,!(!F.shape._mdf&&!this._mdf&&!A))for(R.releaseShapes(),F.shape._mdf=!0,_=F.shape.paths.shapes,P=F.shape.paths._length,C=0;C<P;C+=1)R.addShape(this.processPath(_[C],I));F.shape.paths=F.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var A=[0,0];function _(R){var B=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||B,this.a&&R.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&R.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&R.skewFromAxis(-this.sk.v,this.sa.v),this.r?R.rotate(-this.r.v):R.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?R.translate(this.px.v,this.py.v,-this.pz.v):R.translate(this.px.v,this.py.v,0):R.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function T(R){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||R){var B;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var O,V;if(B=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(O=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/B,0),V=this.p.getValueAtTime(this.p.keyframes[0].t/B,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(O=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/B,0),V=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/B,0)):(O=this.p.pv,V=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/B,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){O=[],V=[];var L=this.px,D=this.py;L._caching.lastFrame+L.offsetTime<=L.keyframes[0].t?(O[0]=L.getValueAtTime((L.keyframes[0].t+.01)/B,0),O[1]=D.getValueAtTime((D.keyframes[0].t+.01)/B,0),V[0]=L.getValueAtTime(L.keyframes[0].t/B,0),V[1]=D.getValueAtTime(D.keyframes[0].t/B,0)):L._caching.lastFrame+L.offsetTime>=L.keyframes[L.keyframes.length-1].t?(O[0]=L.getValueAtTime(L.keyframes[L.keyframes.length-1].t/B,0),O[1]=D.getValueAtTime(D.keyframes[D.keyframes.length-1].t/B,0),V[0]=L.getValueAtTime((L.keyframes[L.keyframes.length-1].t-.01)/B,0),V[1]=D.getValueAtTime((D.keyframes[D.keyframes.length-1].t-.01)/B,0)):(O=[L.pv,D.pv],V[0]=L.getValueAtTime((L._caching.lastFrame+L.offsetTime-.01)/B,L.offsetTime),V[1]=D.getValueAtTime((D._caching.lastFrame+D.offsetTime-.01)/B,D.offsetTime))}else V=A,O=V;this.v.rotate(-Math.atan2(O[1]-V[1],O[0]-V[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function E(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function C(){}function P(R){this._addDynamicProperty(R),this.elem.addDynamicProperty(R),this._isDirty=!0}function I(R,B,O){if(this.elem=R,this.frameId=-1,this.propType="transform",this.data=B,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(O||R),B.p&&B.p.s?(this.px=PropertyFactory.getProp(R,B.p.x,0,0,this),this.py=PropertyFactory.getProp(R,B.p.y,0,0,this),B.p.z&&(this.pz=PropertyFactory.getProp(R,B.p.z,0,0,this))):this.p=PropertyFactory.getProp(R,B.p||{k:[0,0,0]},1,0,this),B.rx){if(this.rx=PropertyFactory.getProp(R,B.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(R,B.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(R,B.rz,0,degToRads,this),B.or.k[0].ti){var V,L=B.or.k.length;for(V=0;V<L;V+=1)B.or.k[V].to=null,B.or.k[V].ti=null}this.or=PropertyFactory.getProp(R,B.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(R,B.r||{k:0},0,degToRads,this);B.sk&&(this.sk=PropertyFactory.getProp(R,B.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(R,B.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(R,B.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(R,B.s||{k:[100,100,100]},1,.01,this),B.o?this.o=PropertyFactory.getProp(R,B.o,0,.01,R):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}I.prototype={applyToMatrix:_,getValue:T,precalculateMatrix:E,autoOrient:C},extendPrototype([DynamicPropertyContainer],I),I.prototype.addDynamicProperty=P,I.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function F(R,B,O){return new I(R,B,O)}return{getTransformProperty:F}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(A,_){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(A,_.c,0,null,this),this.o=PropertyFactory.getProp(A,_.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(A,_.tr,this),this.so=PropertyFactory.getProp(A,_.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(A,_.tr.eo,0,.01,this),this.data=_,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(A,_,T,E,C,P){var I=P?-1:1,F=E.s.v[0]+(1-E.s.v[0])*(1-C),R=E.s.v[1]+(1-E.s.v[1])*(1-C);A.translate(E.p.v[0]*I*C,E.p.v[1]*I*C,E.p.v[2]),_.translate(-E.a.v[0],-E.a.v[1],E.a.v[2]),_.rotate(-E.r.v*I*C),_.translate(E.a.v[0],E.a.v[1],E.a.v[2]),T.translate(-E.a.v[0],-E.a.v[1],E.a.v[2]),T.scale(P?1/F:F,P?1/R:R),T.translate(E.a.v[0],E.a.v[1],E.a.v[2])},RepeaterModifier.prototype.init=function(A,_,T,E){for(this.elem=A,this.arr=_,this.pos=T,this.elemsData=E,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(A),this.initModifierProperties(A,_[T]);T>0;)T-=1,this._elements.unshift(_[T]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(A){var _,T=A.length;for(_=0;_<T;_+=1)A[_]._processed=!1,A[_].ty==="gr"&&this.resetElements(A[_].it)},RepeaterModifier.prototype.cloneElements=function(A){var _=JSON.parse(JSON.stringify(A));return this.resetElements(_),_},RepeaterModifier.prototype.changeGroupRender=function(A,_){var T,E=A.length;for(T=0;T<E;T+=1)A[T]._render=_,A[T].ty==="gr"&&this.changeGroupRender(A[T].it,_)},RepeaterModifier.prototype.processShapes=function(A){var _,T,E,C,P,I=!1;if(this._mdf||A){var F=Math.ceil(this.c.v);if(this._groups.length<F){for(;this._groups.length<F;){var R={it:this.cloneElements(this._elements),ty:"gr"};R.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,R),this._groups.splice(0,0,R),this._currentCopies+=1}this.elem.reloadShapes(),I=!0}P=0;var B;for(E=0;E<=this._groups.length-1;E+=1){if(B=P<F,this._groups[E]._render=B,this.changeGroupRender(this._groups[E].it,B),!B){var O=this.elemsData[E].it,V=O[O.length-1];V.transform.op.v!==0?(V.transform.op._mdf=!0,V.transform.op.v=0):V.transform.op._mdf=!1}P+=1}this._currentCopies=F;var L=this.o.v,D=L%1,U=L>0?Math.floor(L):Math.ceil(L),G=this.pMatrix.props,X=this.rMatrix.props,z=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var Y=0;if(L>0){for(;Y<U;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),Y+=1;D&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,D,!1),Y+=D)}else if(L<0){for(;Y>U;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),Y-=1;D&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-D,!0),Y-=D)}E=this.data.m===1?0:this._currentCopies-1,C=this.data.m===1?1:-1,P=this._currentCopies;for(var W,q;P;){if(_=this.elemsData[E].it,T=_[_.length-1].transform.mProps.v.props,q=T.length,_[_.length-1].transform.mProps._mdf=!0,_[_.length-1].transform.op._mdf=!0,_[_.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(E/(this._currentCopies-1)),Y!==0){for((E!==0&&C===1||E!==this._currentCopies-1&&C===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15]),this.matrix.transform(z[0],z[1],z[2],z[3],z[4],z[5],z[6],z[7],z[8],z[9],z[10],z[11],z[12],z[13],z[14],z[15]),this.matrix.transform(G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],G[8],G[9],G[10],G[11],G[12],G[13],G[14],G[15]),W=0;W<q;W+=1)T[W]=this.matrix.props[W];this.matrix.reset()}else for(this.matrix.reset(),W=0;W<q;W+=1)T[W]=this.matrix.props[W];Y+=1,P-=1,E+=C}}else for(P=this._currentCopies,E=0,C=1;P;)_=this.elemsData[E].it,T=_[_.length-1].transform.mProps.v.props,_[_.length-1].transform.mProps._mdf=!1,_[_.length-1].transform.op._mdf=!1,P-=1,E+=C;return I},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(A,_){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(A,_.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(A,_){var T=shapePool.newElement();T.c=A.c;var E,C=A._length,P,I,F,R,B,O,V=0,L,D,U,G,X,z;for(E=0;E<C;E+=1)P=A.v[E],F=A.o[E],I=A.i[E],P[0]===F[0]&&P[1]===F[1]&&P[0]===I[0]&&P[1]===I[1]?(E===0||E===C-1)&&!A.c?(T.setTripleAt(P[0],P[1],F[0],F[1],I[0],I[1],V),V+=1):(E===0?R=A.v[C-1]:R=A.v[E-1],B=Math.sqrt(Math.pow(P[0]-R[0],2)+Math.pow(P[1]-R[1],2)),O=B?Math.min(B/2,_)/B:0,X=P[0]+(R[0]-P[0])*O,L=X,z=P[1]-(P[1]-R[1])*O,D=z,U=L-(L-P[0])*roundCorner,G=D-(D-P[1])*roundCorner,T.setTripleAt(L,D,U,G,X,z,V),V+=1,E===C-1?R=A.v[0]:R=A.v[E+1],B=Math.sqrt(Math.pow(P[0]-R[0],2)+Math.pow(P[1]-R[1],2)),O=B?Math.min(B/2,_)/B:0,U=P[0]+(R[0]-P[0])*O,L=U,G=P[1]+(R[1]-P[1])*O,D=G,X=L-(L-P[0])*roundCorner,z=D-(D-P[1])*roundCorner,T.setTripleAt(L,D,U,G,X,z,V),V+=1):(T.setTripleAt(A.v[E][0],A.v[E][1],A.o[E][0],A.o[E][1],A.i[E][0],A.i[E][1],V),V+=1);return T},RoundCornersModifier.prototype.processShapes=function(A){var _,T,E=this.shapes.length,C,P,I=this.rd.v;if(I!==0){var F,R;for(T=0;T<E;T+=1){if(F=this.shapes[T],R=F.localShapeCollection,!(!F.shape._mdf&&!this._mdf&&!A))for(R.releaseShapes(),F.shape._mdf=!0,_=F.shape.paths.shapes,P=F.shape.paths._length,C=0;C<P;C+=1)R.addShape(this.processPath(_[C],I));F.shape.paths=F.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(A,_){return Math.abs(A-_)*1e5<=Math.min(Math.abs(A),Math.abs(_))}function floatZero(A){return Math.abs(A)<=1e-5}function lerp(A,_,T){return A*(1-T)+_*T}function lerpPoint(A,_,T){return[lerp(A[0],_[0],T),lerp(A[1],_[1],T)]}function quadRoots(A,_,T){if(A===0)return[];var E=_*_-4*A*T;if(E<0)return[];var C=-_/(2*A);if(E===0)return[C];var P=Math.sqrt(E)/(2*A);return[C-P,C+P]}function polynomialCoefficients(A,_,T,E){return[-A+3*_-3*T+E,3*A-6*_+3*T,-3*A+3*_,A]}function singlePoint(A){return new PolynomialBezier(A,A,A,A,!1)}function PolynomialBezier(A,_,T,E,C){C&&pointEqual(A,_)&&(_=lerpPoint(A,E,1/3)),C&&pointEqual(T,E)&&(T=lerpPoint(A,E,2/3));var P=polynomialCoefficients(A[0],_[0],T[0],E[0]),I=polynomialCoefficients(A[1],_[1],T[1],E[1]);this.a=[P[0],I[0]],this.b=[P[1],I[1]],this.c=[P[2],I[2]],this.d=[P[3],I[3]],this.points=[A,_,T,E]}PolynomialBezier.prototype.point=function(A){return[((this.a[0]*A+this.b[0])*A+this.c[0])*A+this.d[0],((this.a[1]*A+this.b[1])*A+this.c[1])*A+this.d[1]]},PolynomialBezier.prototype.derivative=function(A){return[(3*A*this.a[0]+2*this.b[0])*A+this.c[0],(3*A*this.a[1]+2*this.b[1])*A+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(A){var _=this.derivative(A);return Math.atan2(_[1],_[0])},PolynomialBezier.prototype.normalAngle=function(A){var _=this.derivative(A);return Math.atan2(_[0],_[1])},PolynomialBezier.prototype.inflectionPoints=function(){var A=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(A))return[];var _=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/A,T=_*_-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/A;if(T<0)return[];var E=Math.sqrt(T);return floatZero(E)?E>0&&E<1?[_]:[]:[_-E,_+E].filter(function(C){return C>0&&C<1})},PolynomialBezier.prototype.split=function(A){if(A<=0)return[singlePoint(this.points[0]),this];if(A>=1)return[this,singlePoint(this.points[this.points.length-1])];var _=lerpPoint(this.points[0],this.points[1],A),T=lerpPoint(this.points[1],this.points[2],A),E=lerpPoint(this.points[2],this.points[3],A),C=lerpPoint(_,T,A),P=lerpPoint(T,E,A),I=lerpPoint(C,P,A);return[new PolynomialBezier(this.points[0],_,C,I,!0),new PolynomialBezier(I,P,E,this.points[3],!0)]};function extrema(A,_){var T=A.points[0][_],E=A.points[A.points.length-1][_];if(T>E){var C=E;E=T,T=C}for(var P=quadRoots(3*A.a[_],2*A.b[_],A.c[_]),I=0;I<P.length;I+=1)if(P[I]>0&&P[I]<1){var F=A.point(P[I])[_];F<T?T=F:F>E&&(E=F)}return{min:T,max:E}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var A=this.bounds();return{left:A.x.min,right:A.x.max,top:A.y.min,bottom:A.y.max,width:A.x.max-A.x.min,height:A.y.max-A.y.min,cx:(A.x.max+A.x.min)/2,cy:(A.y.max+A.y.min)/2}};function intersectData(A,_,T){var E=A.boundingBox();return{cx:E.cx,cy:E.cy,width:E.width,height:E.height,bez:A,t:(_+T)/2,t1:_,t2:T}}function splitData(A){var _=A.bez.split(.5);return[intersectData(_[0],A.t1,A.t),intersectData(_[1],A.t,A.t2)]}function boxIntersect(A,_){return Math.abs(A.cx-_.cx)*2<A.width+_.width&&Math.abs(A.cy-_.cy)*2<A.height+_.height}function intersectsImpl(A,_,T,E,C,P){if(boxIntersect(A,_)){if(T>=P||A.width<=E&&A.height<=E&&_.width<=E&&_.height<=E){C.push([A.t,_.t]);return}var I=splitData(A),F=splitData(_);intersectsImpl(I[0],F[0],T+1,E,C,P),intersectsImpl(I[0],F[1],T+1,E,C,P),intersectsImpl(I[1],F[0],T+1,E,C,P),intersectsImpl(I[1],F[1],T+1,E,C,P)}}PolynomialBezier.prototype.intersections=function(A,_,T){_===void 0&&(_=2),T===void 0&&(T=7);var E=[];return intersectsImpl(intersectData(this,0,1),intersectData(A,0,1),0,_,E,T),E},PolynomialBezier.shapeSegment=function(A,_){var T=(_+1)%A.length();return new PolynomialBezier(A.v[_],A.o[_],A.i[T],A.v[T],!0)},PolynomialBezier.shapeSegmentInverted=function(A,_){var T=(_+1)%A.length();return new PolynomialBezier(A.v[T],A.i[T],A.o[_],A.v[_],!0)};function crossProduct(A,_){return[A[1]*_[2]-A[2]*_[1],A[2]*_[0]-A[0]*_[2],A[0]*_[1]-A[1]*_[0]]}function lineIntersection(A,_,T,E){var C=[A[0],A[1],1],P=[_[0],_[1],1],I=[T[0],T[1],1],F=[E[0],E[1],1],R=crossProduct(crossProduct(C,P),crossProduct(I,F));return floatZero(R[2])?null:[R[0]/R[2],R[1]/R[2]]}function polarOffset(A,_,T){return[A[0]+Math.cos(_)*T,A[1]-Math.sin(_)*T]}function pointDistance(A,_){return Math.hypot(A[0]-_[0],A[1]-_[1])}function pointEqual(A,_){return floatEqual(A[0],_[0])&&floatEqual(A[1],_[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(A,_){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(A,_.s,0,null,this),this.frequency=PropertyFactory.getProp(A,_.r,0,null,this),this.pointsType=PropertyFactory.getProp(A,_.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(A,_,T,E,C,P,I){var F=T-Math.PI/2,R=T+Math.PI/2,B=_[0]+Math.cos(T)*E*C,O=_[1]-Math.sin(T)*E*C;A.setTripleAt(B,O,B+Math.cos(F)*P,O-Math.sin(F)*P,B+Math.cos(R)*I,O-Math.sin(R)*I,A.length())}function getPerpendicularVector(A,_){var T=[_[0]-A[0],_[1]-A[1]],E=-Math.PI*.5,C=[Math.cos(E)*T[0]-Math.sin(E)*T[1],Math.sin(E)*T[0]+Math.cos(E)*T[1]];return C}function getProjectingAngle(A,_){var T=_===0?A.length()-1:_-1,E=(_+1)%A.length(),C=A.v[T],P=A.v[E],I=getPerpendicularVector(C,P);return Math.atan2(0,1)-Math.atan2(I[1],I[0])}function zigZagCorner(A,_,T,E,C,P,I){var F=getProjectingAngle(_,T),R=_.v[T%_._length],B=_.v[T===0?_._length-1:T-1],O=_.v[(T+1)%_._length],V=P===2?Math.sqrt(Math.pow(R[0]-B[0],2)+Math.pow(R[1]-B[1],2)):0,L=P===2?Math.sqrt(Math.pow(R[0]-O[0],2)+Math.pow(R[1]-O[1],2)):0;setPoint(A,_.v[T%_._length],F,I,E,L/((C+1)*2),V/((C+1)*2))}function zigZagSegment(A,_,T,E,C,P){for(var I=0;I<E;I+=1){var F=(I+1)/(E+1),R=C===2?Math.sqrt(Math.pow(_.points[3][0]-_.points[0][0],2)+Math.pow(_.points[3][1]-_.points[0][1],2)):0,B=_.normalAngle(F),O=_.point(F);setPoint(A,O,B,P,T,R/((E+1)*2),R/((E+1)*2)),P=-P}return P}ZigZagModifier.prototype.processPath=function(A,_,T,E){var C=A._length,P=shapePool.newElement();if(P.c=A.c,A.c||(C-=1),C===0)return P;var I=-1,F=PolynomialBezier.shapeSegment(A,0);zigZagCorner(P,A,0,_,T,E,I);for(var R=0;R<C;R+=1)I=zigZagSegment(P,F,_,T,E,-I),R===C-1&&!A.c?F=null:F=PolynomialBezier.shapeSegment(A,(R+1)%C),zigZagCorner(P,A,R+1,_,T,E,I);return P},ZigZagModifier.prototype.processShapes=function(A){var _,T,E=this.shapes.length,C,P,I=this.amplitude.v,F=Math.max(0,Math.round(this.frequency.v)),R=this.pointsType.v;if(I!==0){var B,O;for(T=0;T<E;T+=1){if(B=this.shapes[T],O=B.localShapeCollection,!(!B.shape._mdf&&!this._mdf&&!A))for(O.releaseShapes(),B.shape._mdf=!0,_=B.shape.paths.shapes,P=B.shape.paths._length,C=0;C<P;C+=1)O.addShape(this.processPath(_[C],I,F,R));B.shape.paths=B.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(A,_,T){var E=Math.atan2(_[0]-A[0],_[1]-A[1]);return[polarOffset(A,E,T),polarOffset(_,E,T)]}function offsetSegment(A,_){var T,E,C,P,I,F,R;R=linearOffset(A.points[0],A.points[1],_),T=R[0],E=R[1],R=linearOffset(A.points[1],A.points[2],_),C=R[0],P=R[1],R=linearOffset(A.points[2],A.points[3],_),I=R[0],F=R[1];var B=lineIntersection(T,E,C,P);B===null&&(B=E);var O=lineIntersection(I,F,C,P);return O===null&&(O=I),new PolynomialBezier(T,B,O,F)}function joinLines(A,_,T,E,C){var P=_.points[3],I=T.points[0];if(E===3||pointEqual(P,I))return P;if(E===2){var F=-_.tangentAngle(1),R=-T.tangentAngle(0)+Math.PI,B=lineIntersection(P,polarOffset(P,F+Math.PI/2,100),I,polarOffset(I,F+Math.PI/2,100)),O=B?pointDistance(B,P):pointDistance(P,I)/2,V=polarOffset(P,F,2*O*roundCorner);return A.setXYAt(V[0],V[1],"o",A.length()-1),V=polarOffset(I,R,2*O*roundCorner),A.setTripleAt(I[0],I[1],I[0],I[1],V[0],V[1],A.length()),I}var L=pointEqual(P,_.points[2])?_.points[0]:_.points[2],D=pointEqual(I,T.points[1])?T.points[3]:T.points[1],U=lineIntersection(L,P,I,D);return U&&pointDistance(U,P)<C?(A.setTripleAt(U[0],U[1],U[0],U[1],U[0],U[1],A.length()),U):P}function getIntersection(A,_){var T=A.intersections(_);return T.length&&floatEqual(T[0][0],1)&&T.shift(),T.length?T[0]:null}function pruneSegmentIntersection(A,_){var T=A.slice(),E=_.slice(),C=getIntersection(A[A.length-1],_[0]);return C&&(T[A.length-1]=A[A.length-1].split(C[0])[0],E[0]=_[0].split(C[1])[1]),A.length>1&&_.length>1&&(C=getIntersection(A[0],_[_.length-1]),C)?[[A[0].split(C[0])[0]],[_[_.length-1].split(C[1])[1]]]:[T,E]}function pruneIntersections(A){for(var _,T=1;T<A.length;T+=1)_=pruneSegmentIntersection(A[T-1],A[T]),A[T-1]=_[0],A[T]=_[1];return A.length>1&&(_=pruneSegmentIntersection(A[A.length-1],A[0]),A[A.length-1]=_[0],A[0]=_[1]),A}function offsetSegmentSplit(A,_){var T=A.inflectionPoints(),E,C,P,I;if(T.length===0)return[offsetSegment(A,_)];if(T.length===1||floatEqual(T[1],1))return P=A.split(T[0]),E=P[0],C=P[1],[offsetSegment(E,_),offsetSegment(C,_)];P=A.split(T[0]),E=P[0];var F=(T[1]-T[0])/(1-T[0]);return P=P[1].split(F),I=P[0],C=P[1],[offsetSegment(E,_),offsetSegment(I,_),offsetSegment(C,_)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(A,_){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(A,_.a,0,null,this),this.miterLimit=PropertyFactory.getProp(A,_.ml,0,null,this),this.lineJoin=_.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(A,_,T,E){var C=shapePool.newElement();C.c=A.c;var P=A.length();A.c||(P-=1);var I,F,R,B=[];for(I=0;I<P;I+=1)R=PolynomialBezier.shapeSegment(A,I),B.push(offsetSegmentSplit(R,_));if(!A.c)for(I=P-1;I>=0;I-=1)R=PolynomialBezier.shapeSegmentInverted(A,I),B.push(offsetSegmentSplit(R,_));B=pruneIntersections(B);var O=null,V=null;for(I=0;I<B.length;I+=1){var L=B[I];for(V&&(O=joinLines(C,V,L[0],T,E)),V=L[L.length-1],F=0;F<L.length;F+=1)R=L[F],O&&pointEqual(R.points[0],O)?C.setXYAt(R.points[1][0],R.points[1][1],"o",C.length()-1):C.setTripleAt(R.points[0][0],R.points[0][1],R.points[1][0],R.points[1][1],R.points[0][0],R.points[0][1],C.length()),C.setTripleAt(R.points[3][0],R.points[3][1],R.points[3][0],R.points[3][1],R.points[2][0],R.points[2][1],C.length()),O=R.points[3]}return B.length&&joinLines(C,V,B[0][0],T,E),C},OffsetPathModifier.prototype.processShapes=function(A){var _,T,E=this.shapes.length,C,P,I=this.amount.v,F=this.miterLimit.v,R=this.lineJoin;if(I!==0){var B,O;for(T=0;T<E;T+=1){if(B=this.shapes[T],O=B.localShapeCollection,!(!B.shape._mdf&&!this._mdf&&!A))for(O.releaseShapes(),B.shape._mdf=!0,_=B.shape.paths.shapes,P=B.shape.paths._length,C=0;C<P;C+=1)O.addShape(this.processPath(_[C],I,R,F));B.shape.paths=B.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(A){for(var _=A.fStyle?A.fStyle.split(" "):[],T="normal",E="normal",C=_.length,P,I=0;I<C;I+=1)switch(P=_[I].toLowerCase(),P){case"italic":E="italic";break;case"bold":T="700";break;case"black":T="900";break;case"medium":T="500";break;case"regular":case"normal":T="400";break;case"light":case"thin":T="200";break}return{style:E,weight:A.fWeight||T}}var FontManager=function(){var A=5e3,_={w:0,size:0,shapes:[],data:{shapes:[]}},T=[];T=T.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var E=127988,C=917631,P=917601,I=917626,F=65039,R=8205,B=127462,O=127487,V=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function L(ee){var re=ee.split(","),Q,te=re.length,ne=[];for(Q=0;Q<te;Q+=1)re[Q]!=="sans-serif"&&re[Q]!=="monospace"&&ne.push(re[Q]);return ne.join(",")}function D(ee,re){var Q=createTag("span");Q.setAttribute("aria-hidden",!0),Q.style.fontFamily=re;var te=createTag("span");te.innerText="giItT1WQy@!-/#",Q.style.position="absolute",Q.style.left="-10000px",Q.style.top="-10000px",Q.style.fontSize="300px",Q.style.fontVariant="normal",Q.style.fontStyle="normal",Q.style.fontWeight="normal",Q.style.letterSpacing="0",Q.appendChild(te),document.body.appendChild(Q);var ne=te.offsetWidth;return te.style.fontFamily=L(ee)+", "+re,{node:te,w:ne,parent:Q}}function U(){var ee,re=this.fonts.length,Q,te,ne=re;for(ee=0;ee<re;ee+=1)this.fonts[ee].loaded?ne-=1:this.fonts[ee].fOrigin==="n"||this.fonts[ee].origin===0?this.fonts[ee].loaded=!0:(Q=this.fonts[ee].monoCase.node,te=this.fonts[ee].monoCase.w,Q.offsetWidth!==te?(ne-=1,this.fonts[ee].loaded=!0):(Q=this.fonts[ee].sansCase.node,te=this.fonts[ee].sansCase.w,Q.offsetWidth!==te&&(ne-=1,this.fonts[ee].loaded=!0)),this.fonts[ee].loaded&&(this.fonts[ee].sansCase.parent.parentNode.removeChild(this.fonts[ee].sansCase.parent),this.fonts[ee].monoCase.parent.parentNode.removeChild(this.fonts[ee].monoCase.parent)));ne!==0&&Date.now()-this.initTime<A?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function G(ee,re){var Q=document.body&&re?"svg":"canvas",te,ne=getFontProperties(ee);if(Q==="svg"){var ie=createNS("text");ie.style.fontSize="100px",ie.setAttribute("font-family",ee.fFamily),ie.setAttribute("font-style",ne.style),ie.setAttribute("font-weight",ne.weight),ie.textContent="1",ee.fClass?(ie.style.fontFamily="inherit",ie.setAttribute("class",ee.fClass)):ie.style.fontFamily=ee.fFamily,re.appendChild(ie),te=ie}else{var fe=new OffscreenCanvas(500,500).getContext("2d");fe.font=ne.style+" "+ne.weight+" 100px "+ee.fFamily,te=fe}function me(be){return Q==="svg"?(te.textContent=be,te.getComputedTextLength()):te.measureText(be).width}return{measureText:me}}function X(ee,re){if(!ee){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ee.list;return}if(!document.body){this.isLoaded=!0,ee.list.forEach(function(Se){Se.helper=G(Se),Se.cache={}}),this.fonts=ee.list;return}var Q=ee.list,te,ne=Q.length,ie=ne;for(te=0;te<ne;te+=1){var fe=!0,me,be;if(Q[te].loaded=!1,Q[te].monoCase=D(Q[te].fFamily,"monospace"),Q[te].sansCase=D(Q[te].fFamily,"sans-serif"),!Q[te].fPath)Q[te].loaded=!0,ie-=1;else if(Q[te].fOrigin==="p"||Q[te].origin===3){if(me=document.querySelectorAll('style[f-forigin="p"][f-family="'+Q[te].fFamily+'"], style[f-origin="3"][f-family="'+Q[te].fFamily+'"]'),me.length>0&&(fe=!1),fe){var Pe=createTag("style");Pe.setAttribute("f-forigin",Q[te].fOrigin),Pe.setAttribute("f-origin",Q[te].origin),Pe.setAttribute("f-family",Q[te].fFamily),Pe.type="text/css",Pe.innerText="@font-face {font-family: "+Q[te].fFamily+"; font-style: normal; src: url('"+Q[te].fPath+"');}",re.appendChild(Pe)}}else if(Q[te].fOrigin==="g"||Q[te].origin===1){for(me=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),be=0;be<me.length;be+=1)me[be].href.indexOf(Q[te].fPath)!==-1&&(fe=!1);if(fe){var Me=createTag("link");Me.setAttribute("f-forigin",Q[te].fOrigin),Me.setAttribute("f-origin",Q[te].origin),Me.type="text/css",Me.rel="stylesheet",Me.href=Q[te].fPath,document.body.appendChild(Me)}}else if(Q[te].fOrigin==="t"||Q[te].origin===2){for(me=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),be=0;be<me.length;be+=1)Q[te].fPath===me[be].src&&(fe=!1);if(fe){var ge=createTag("link");ge.setAttribute("f-forigin",Q[te].fOrigin),ge.setAttribute("f-origin",Q[te].origin),ge.setAttribute("rel","stylesheet"),ge.setAttribute("href",Q[te].fPath),re.appendChild(ge)}}Q[te].helper=G(Q[te],re),Q[te].cache={},this.fonts.push(Q[te])}ie===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function z(ee){if(ee){this.chars||(this.chars=[]);var re,Q=ee.length,te,ne=this.chars.length,ie;for(re=0;re<Q;re+=1){for(te=0,ie=!1;te<ne;)this.chars[te].style===ee[re].style&&this.chars[te].fFamily===ee[re].fFamily&&this.chars[te].ch===ee[re].ch&&(ie=!0),te+=1;ie||(this.chars.push(ee[re]),ne+=1)}}}function Y(ee,re,Q){for(var te=0,ne=this.chars.length;te<ne;){if(this.chars[te].ch===ee&&this.chars[te].style===re&&this.chars[te].fFamily===Q)return this.chars[te];te+=1}return(typeof ee=="string"&&ee.charCodeAt(0)!==13||!ee)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ee,re,Q)),_}function W(ee,re,Q){var te=this.getFontByName(re),ne=ee;if(!te.cache[ne]){var ie=te.helper;if(ee===" "){var fe=ie.measureText("|"+ee+"|"),me=ie.measureText("||");te.cache[ne]=(fe-me)/100}else te.cache[ne]=ie.measureText(ee)/100}return te.cache[ne]*Q}function q(ee){for(var re=0,Q=this.fonts.length;re<Q;){if(this.fonts[re].fName===ee)return this.fonts[re];re+=1}return this.fonts[0]}function K(ee){var re=0,Q=ee.charCodeAt(0);if(Q>=55296&&Q<=56319){var te=ee.charCodeAt(1);te>=56320&&te<=57343&&(re=(Q-55296)*1024+te-56320+65536)}return re}function J(ee,re){var Q=ee.toString(16)+re.toString(16);return V.indexOf(Q)!==-1}function Z(ee){return ee===R}function se(ee){return ee===F}function ae(ee){var re=K(ee);return re>=B&&re<=O}function ue(ee){return ae(ee.substr(0,2))&&ae(ee.substr(2,2))}function ce(ee){return T.indexOf(ee)!==-1}function he(ee,re){var Q=K(ee.substr(re,2));if(Q!==E)return!1;var te=0;for(re+=2;te<5;){if(Q=K(ee.substr(re,2)),Q<P||Q>I)return!1;te+=1,re+=2}return K(ee.substr(re,2))===C}function pe(){this.isLoaded=!0}var ye=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};ye.isModifier=J,ye.isZeroWidthJoiner=Z,ye.isFlagEmoji=ue,ye.isRegionalCode=ae,ye.isCombinedCharacter=ce,ye.isRegionalFlag=he,ye.isVariationSelector=se,ye.BLACK_FLAG_CODE_POINT=E;var _e={addChars:z,addFonts:X,getCharData:Y,getFontByName:q,measureText:W,checkLoadedFonts:U,setIsLoaded:pe};return ye.prototype=_e,ye}();function SlotManager(A){this.animationData=A}SlotManager.prototype.getProp=function(A){return this.animationData.slots&&this.animationData.slots[A.sid]?Object.assign(A,this.animationData.slots[A.sid].p):A};function slotFactory(A){return new SlotManager(A)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(_){this.renderableComponents.indexOf(_)===-1&&this.renderableComponents.push(_)},removeRenderableComponent:function(_){this.renderableComponents.indexOf(_)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(_),1)},prepareRenderableFrame:function(_){this.checkLayerLimits(_)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(_){this.data.ip-this.data.st<=_&&this.data.op-this.data.st>_?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var _,T=this.renderableComponents.length;for(_=0;_<T;_+=1)this.renderableComponents[_].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var A={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(_){return A[_]||""}}();function SliderEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,0,0,T)}function AngleEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,0,0,T)}function ColorEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,1,0,T)}function PointEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,1,0,T)}function LayerIndexEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,0,0,T)}function MaskIndexEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,0,0,T)}function CheckboxEffect(A,_,T){this.p=PropertyFactory.getProp(_,A.v,0,0,T)}function NoValueEffect(){this.p={}}function EffectsManager(A,_){var T=A.ef||[];this.effectElements=[];var E,C=T.length,P;for(E=0;E<C;E+=1)P=new GroupEffect(T[E],_),this.effectElements.push(P)}function GroupEffect(A,_){this.init(A,_)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(A,_){this.data=A,this.effectElements=[],this.initDynamicPropertyContainer(_);var T,E=this.data.ef.length,C,P=this.data.ef;for(T=0;T<E;T+=1){switch(C=null,P[T].ty){case 0:C=new SliderEffect(P[T],_,this);break;case 1:C=new AngleEffect(P[T],_,this);break;case 2:C=new ColorEffect(P[T],_,this);break;case 3:C=new PointEffect(P[T],_,this);break;case 4:case 7:C=new CheckboxEffect(P[T],_,this);break;case 10:C=new LayerIndexEffect(P[T],_,this);break;case 11:C=new MaskIndexEffect(P[T],_,this);break;case 5:C=new EffectsManager(P[T],_);break;default:C=new NoValueEffect(P[T]);break}C&&this.effectElements.push(C)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var _=0,T=this.data.masksProperties.length;_<T;){if(this.data.masksProperties[_].mode!=="n"&&this.data.masksProperties[_].cl!==!1)return!0;_+=1}return!1},initExpressions:function(){var _=getExpressionInterfaces();if(_){var T=_("layer"),E=_("effects"),C=_("shape"),P=_("text"),I=_("comp");this.layerInterface=T(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var F=E.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(F),this.data.ty===0||this.data.xt?this.compInterface=I(this):this.data.ty===4?(this.layerInterface.shapeInterface=C(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=P(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var _=getBlendMode(this.data.bm),T=this.baseElement||this.layerElement;T.style["mix-blend-mode"]=_},initBaseData:function(_,T,E){this.globalData=T,this.comp=E,this.data=_,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(_,T){var E,C=this.dynamicProperties.length;for(E=0;E<C;E+=1)(T||this._isParent&&this.dynamicProperties[E].propType==="transform")&&(this.dynamicProperties[E].getValue(),this.dynamicProperties[E]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(_){this.dynamicProperties.indexOf(_)===-1&&this.dynamicProperties.push(_)}};function FootageElement(A,_,T){this.initFrame(),this.initRenderable(),this.assetData=_.getAssetData(A.refId),this.footageData=_.imageLoader.getAsset(this.assetData),this.initBaseData(A,_,T)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var A=getExpressionInterfaces();if(A){var _=A("footage");this.layerInterface=_(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(A,_,T){this.initFrame(),this.initRenderable(),this.assetData=_.getAssetData(A.refId),this.initBaseData(A,_,T),this._isPlaying=!1,this._canPlay=!1;var E=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(E),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,_.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,A.au&&A.au.lv?A.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(A){if(this.prepareRenderableFrame(A,!0),this.prepareProperties(A,!0),this.tm._placeholder)this._currentTime=A/this.data.sr;else{var _=this.tm.v;this._currentTime=_}this._volume=this.lv.v[0];var T=this._volume*this._volumeMultiplier;this._previousVolume!==T&&(this._previousVolume=T,this.audio.volume(T))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(A){this.audio.rate(A)},AudioElement.prototype.volume=function(A){this._volumeMultiplier=A,this._previousVolume=A*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(A){var _,T=this.layers.length,E;for(this.completeLayers=!0,_=T-1;_>=0;_-=1)this.elements[_]||(E=this.layers[_],E.ip-E.st<=A-this.layers[_].st&&E.op-E.st>A-this.layers[_].st&&this.buildItem(_)),this.completeLayers=this.elements[_]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(A){switch(A.ty){case 2:return this.createImage(A);case 0:return this.createComp(A);case 1:return this.createSolid(A);case 3:return this.createNull(A);case 4:return this.createShape(A);case 5:return this.createText(A);case 6:return this.createAudio(A);case 13:return this.createCamera(A);case 15:return this.createFootage(A);default:return this.createNull(A)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(A){return new AudioElement(A,this.globalData,this)},BaseRenderer.prototype.createFootage=function(A){return new FootageElement(A,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var A,_=this.layers.length;for(A=0;A<_;A+=1)this.buildItem(A);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(A){this.completeLayers=!1;var _,T=A.length,E,C=this.layers.length;for(_=0;_<T;_+=1)for(E=0;E<C;){if(this.layers[E].id===A[_].id){this.layers[E]=A[_];break}E+=1}},BaseRenderer.prototype.setProjectInterface=function(A){this.globalData.projectInterface=A},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(A,_,T){for(var E=this.elements,C=this.layers,P=0,I=C.length;P<I;)C[P].ind==_&&(!E[P]||E[P]===!0?(this.buildItem(P),this.addPendingElement(A)):(T.push(E[P]),E[P].setAsParent(),C[P].parent!==void 0?this.buildElementParenting(A,C[P].parent,T):A.setHierarchy(T))),P+=1},BaseRenderer.prototype.addPendingElement=function(A){this.pendingElements.push(A)},BaseRenderer.prototype.searchExtraCompositions=function(A){var _,T=A.length;for(_=0;_<T;_+=1)if(A[_].xt){var E=this.createComp(A[_]);E.initExpressions(),this.globalData.projectInterface.registerComposition(E)}},BaseRenderer.prototype.getElementById=function(A){var _,T=this.elements.length;for(_=0;_<T;_+=1)if(this.elements[_].data.ind===A)return this.elements[_];return null},BaseRenderer.prototype.getElementByPath=function(A){var _=A.shift(),T;if(typeof _=="number")T=this.elements[_];else{var E,C=this.elements.length;for(E=0;E<C;E+=1)if(this.elements[E].data.nm===_){T=this.elements[E];break}}return A.length===0?T:T.getElementByPath(A)},BaseRenderer.prototype.setupGlobalData=function(A,_){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(A),this.globalData.fontManager.addChars(A.chars),this.globalData.fontManager.addFonts(A.fonts,_),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=A.fr,this.globalData.nm=A.nm,this.globalData.compSize={w:A.w,h:A.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var _=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:_,localMat:_,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var _,T=this.finalTransform.mat,E=0,C=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;E<C;){if(this.hierarchy[E].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}E+=1}if(this.finalTransform._matMdf)for(_=this.finalTransform.mProp.v.props,T.cloneFromProps(_),E=0;E<C;E+=1)T.multiply(this.hierarchy[E].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var _=0,T=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;_<T;)this.localTransforms[_]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[_]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),_+=1;if(this.finalTransform._localMatMdf){var E=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(E),_=1;_<T;_+=1){var C=this.localTransforms[_].matrix;E.multiply(C)}E.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var P=this.finalTransform.localOpacity;for(_=0;_<T;_+=1)P*=this.localTransforms[_].opacity*.01;this.finalTransform.localOpacity=P}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var _=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(_.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var T=0,E=_.length;for(T=0;T<E;T+=1)this.localTransforms.push(_[T])}}},globalToLocal:function(_){var T=[];T.push(this.finalTransform);for(var E=!0,C=this.comp;E;)C.finalTransform?(C.data.hasMask&&T.splice(0,0,C.finalTransform),C=C.comp):E=!1;var P,I=T.length,F;for(P=0;P<I;P+=1)F=T[P].mat.applyToPointArray(0,0,0),_=[_[0]-F[0],_[1]-F[1],0];return _},mHelper:new Matrix};function MaskElement(A,_,T){this.data=A,this.element=_,this.globalData=T,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var E=this.globalData.defs,C,P=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(P),this.solidPath="";var I,F=this.masksProperties,R=0,B=[],O,V,L=createElementID(),D,U,G,X,z="clipPath",Y="clip-path";for(C=0;C<P;C+=1)if((F[C].mode!=="a"&&F[C].mode!=="n"||F[C].inv||F[C].o.k!==100||F[C].o.x)&&(z="mask",Y="mask"),(F[C].mode==="s"||F[C].mode==="i")&&R===0?(D=createNS("rect"),D.setAttribute("fill","#ffffff"),D.setAttribute("width",this.element.comp.data.w||0),D.setAttribute("height",this.element.comp.data.h||0),B.push(D)):D=null,I=createNS("path"),F[C].mode==="n")this.viewData[C]={op:PropertyFactory.getProp(this.element,F[C].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,F[C],3),elem:I,lastPath:""},E.appendChild(I);else{R+=1,I.setAttribute("fill",F[C].mode==="s"?"#000000":"#ffffff"),I.setAttribute("clip-rule","nonzero");var W;if(F[C].x.k!==0?(z="mask",Y="mask",X=PropertyFactory.getProp(this.element,F[C].x,0,null,this.element),W=createElementID(),U=createNS("filter"),U.setAttribute("id",W),G=createNS("feMorphology"),G.setAttribute("operator","erode"),G.setAttribute("in","SourceGraphic"),G.setAttribute("radius","0"),U.appendChild(G),E.appendChild(U),I.setAttribute("stroke",F[C].mode==="s"?"#000000":"#ffffff")):(G=null,X=null),this.storedData[C]={elem:I,x:X,expan:G,lastPath:"",lastOperator:"",filterId:W,lastRadius:0},F[C].mode==="i"){V=B.length;var q=createNS("g");for(O=0;O<V;O+=1)q.appendChild(B[O]);var K=createNS("mask");K.setAttribute("mask-type","alpha"),K.setAttribute("id",L+"_"+R),K.appendChild(I),E.appendChild(K),q.setAttribute("mask","url("+getLocationHref()+"#"+L+"_"+R+")"),B.length=0,B.push(q)}else B.push(I);F[C].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[C]={elem:I,lastPath:"",op:PropertyFactory.getProp(this.element,F[C].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,F[C],3),invRect:D},this.viewData[C].prop.k||this.drawPath(F[C],this.viewData[C].prop.v,this.viewData[C])}for(this.maskElement=createNS(z),P=B.length,C=0;C<P;C+=1)this.maskElement.appendChild(B[C]);R>0&&(this.maskElement.setAttribute("id",L),this.element.maskedElement.setAttribute(Y,"url("+getLocationHref()+"#"+L+")"),E.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(A){return this.viewData[A].prop},MaskElement.prototype.renderFrame=function(A){var _=this.element.finalTransform.mat,T,E=this.masksProperties.length;for(T=0;T<E;T+=1)if((this.viewData[T].prop._mdf||A)&&this.drawPath(this.masksProperties[T],this.viewData[T].prop.v,this.viewData[T]),(this.viewData[T].op._mdf||A)&&this.viewData[T].elem.setAttribute("fill-opacity",this.viewData[T].op.v),this.masksProperties[T].mode!=="n"&&(this.viewData[T].invRect&&(this.element.finalTransform.mProp._mdf||A)&&this.viewData[T].invRect.setAttribute("transform",_.getInverseMatrix().to2dCSS()),this.storedData[T].x&&(this.storedData[T].x._mdf||A))){var C=this.storedData[T].expan;this.storedData[T].x.v<0?(this.storedData[T].lastOperator!=="erode"&&(this.storedData[T].lastOperator="erode",this.storedData[T].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[T].filterId+")")),C.setAttribute("radius",-this.storedData[T].x.v)):(this.storedData[T].lastOperator!=="dilate"&&(this.storedData[T].lastOperator="dilate",this.storedData[T].elem.setAttribute("filter",null)),this.storedData[T].elem.setAttribute("stroke-width",this.storedData[T].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var A="M0,0 ";return A+=" h"+this.globalData.compSize.w,A+=" v"+this.globalData.compSize.h,A+=" h-"+this.globalData.compSize.w,A+=" v-"+this.globalData.compSize.h+" ",A},MaskElement.prototype.drawPath=function(A,_,T){var E=" M"+_.v[0][0]+","+_.v[0][1],C,P;for(P=_._length,C=1;C<P;C+=1)E+=" C"+_.o[C-1][0]+","+_.o[C-1][1]+" "+_.i[C][0]+","+_.i[C][1]+" "+_.v[C][0]+","+_.v[C][1];if(_.c&&P>1&&(E+=" C"+_.o[C-1][0]+","+_.o[C-1][1]+" "+_.i[0][0]+","+_.i[0][1]+" "+_.v[0][0]+","+_.v[0][1]),T.lastPath!==E){var I="";T.elem&&(_.c&&(I=A.inv?this.solidPath+E:E),T.elem.setAttribute("d",I)),T.lastPath=E}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var A={};A.createFilter=_,A.createAlphaToLuminanceFilter=T;function _(E,C){var P=createNS("filter");return P.setAttribute("id",E),C!==!0&&(P.setAttribute("filterUnits","objectBoundingBox"),P.setAttribute("x","0%"),P.setAttribute("y","0%"),P.setAttribute("width","100%"),P.setAttribute("height","100%")),P}function T(){var E=createNS("feColorMatrix");return E.setAttribute("type","matrix"),E.setAttribute("color-interpolation-filters","sRGB"),E.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),E}return A}(),featureSupport=function(){var A={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(A.maskType=!1),/firefox/i.test(navigator.userAgent)&&(A.svgLumaHidden=!1),A}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(A){var _,T="SourceGraphic",E=A.data.ef?A.data.ef.length:0,C=createElementID(),P=filtersFactory.createFilter(C,!0),I=0;this.filters=[];var F;for(_=0;_<E;_+=1){F=null;var R=A.data.ef[_].ty;if(registeredEffects$1[R]){var B=registeredEffects$1[R].effect;F=new B(P,A.effectsManager.effectElements[_],A,idPrefix+I,T),T=idPrefix+I,registeredEffects$1[R].countsAsEffect&&(I+=1)}F&&this.filters.push(F)}I&&(A.globalData.defs.appendChild(P),A.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+C+")")),this.filters.length&&A.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(A){var _,T=this.filters.length;for(_=0;_<T;_+=1)this.filters[_].renderFrame(A)},SVGEffects.prototype.getEffects=function(A){var _,T=this.filters.length,E=[];for(_=0;_<T;_+=1)this.filters[_].type===A&&E.push(this.filters[_]);return E};function registerEffect$1(A,_,T){registeredEffects$1[A]={effect:_,countsAsEffect:T}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var _=null;if(this.data.td){this.matteMasks={};var T=createNS("g");T.setAttribute("id",this.layerId),T.appendChild(this.layerElement),_=T,this.globalData.defs.appendChild(T)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),_=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var E=createNS("clipPath"),C=createNS("path");C.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var P=createElementID();if(E.setAttribute("id",P),E.appendChild(C),this.globalData.defs.appendChild(E),this.checkMasks()){var I=createNS("g");I.setAttribute("clip-path","url("+getLocationHref()+"#"+P+")"),I.appendChild(this.layerElement),this.transformedElement=I,_?_.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+P+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(_){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[_]){var T=this.layerId+"_"+_,E,C,P,I;if(_===1||_===3){var F=createNS("mask");F.setAttribute("id",T),F.setAttribute("mask-type",_===3?"luminance":"alpha"),P=createNS("use"),P.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),F.appendChild(P),this.globalData.defs.appendChild(F),!featureSupport.maskType&&_===1&&(F.setAttribute("mask-type","luminance"),E=createElementID(),C=filtersFactory.createFilter(E),this.globalData.defs.appendChild(C),C.appendChild(filtersFactory.createAlphaToLuminanceFilter()),I=createNS("g"),I.appendChild(P),F.appendChild(I),I.setAttribute("filter","url("+getLocationHref()+"#"+E+")"))}else if(_===2){var R=createNS("mask");R.setAttribute("id",T),R.setAttribute("mask-type","alpha");var B=createNS("g");R.appendChild(B),E=createElementID(),C=filtersFactory.createFilter(E);var O=createNS("feComponentTransfer");O.setAttribute("in","SourceGraphic"),C.appendChild(O);var V=createNS("feFuncA");V.setAttribute("type","table"),V.setAttribute("tableValues","1.0 0.0"),O.appendChild(V),this.globalData.defs.appendChild(C);var L=createNS("rect");L.setAttribute("width",this.comp.data.w),L.setAttribute("height",this.comp.data.h),L.setAttribute("x","0"),L.setAttribute("y","0"),L.setAttribute("fill","#ffffff"),L.setAttribute("opacity","0"),B.setAttribute("filter","url("+getLocationHref()+"#"+E+")"),B.appendChild(L),P=createNS("use"),P.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),B.appendChild(P),featureSupport.maskType||(R.setAttribute("mask-type","luminance"),C.appendChild(filtersFactory.createAlphaToLuminanceFilter()),I=createNS("g"),B.appendChild(L),I.appendChild(this.layerElement),B.appendChild(I)),this.globalData.defs.appendChild(R)}this.matteMasks[_]=T}return this.matteMasks[_]},setMatte:function(_){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+_+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(_){this.hierarchy=_},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var A={initElement:function(T,E,C){this.initFrame(),this.initBaseData(T,E,C),this.initTransform(T,E,C),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var T=this.baseElement||this.layerElement;T.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var T=this.baseElement||this.layerElement;T.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(T){this._mdf=!1,this.prepareRenderableFrame(T),this.prepareProperties(T,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(A)],RenderableDOMElement)})();function IImageElement(A,_,T){this.assetData=_.getAssetData(A.refId),this.assetData&&this.assetData.sid&&(this.assetData=_.slotManager.getProp(this.assetData)),this.initElement(A,_,T),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var A=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",A),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(A,_){this.elem=A,this.pos=_}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(_){var T,E=this.shapeModifiers.length;for(T=0;T<E;T+=1)this.shapeModifiers[T].addShape(_)},isShapeInAnimatedModifiers:function(_){for(var T=0,E=this.shapeModifiers.length;T<E;)if(this.shapeModifiers[T].isAnimatedWithShape(_))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var _,T=this.shapes.length;for(_=0;_<T;_+=1)this.shapes[_].sh.reset();T=this.shapeModifiers.length;var E;for(_=T-1;_>=0&&(E=this.shapeModifiers[_].processShapes(this._isFirstFrame),!E);_-=1);}},searchProcessedElement:function(_){for(var T=this.processedElements,E=0,C=T.length;E<C;){if(T[E].elem===_)return T[E].pos;E+=1}return 0},addProcessedElement:function(_,T){for(var E=this.processedElements,C=E.length;C;)if(C-=1,E[C].elem===_){E[C].pos=T;return}E.push(new ProcessedElement(_,T))},prepareFrame:function(_){this.prepareRenderableFrame(_),this.prepareProperties(_,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(A,_,T){this.caches=[],this.styles=[],this.transformers=A,this.lStr="",this.sh=T,this.lvl=_,this._isAnimated=!!T.k;for(var E=0,C=A.length;E<C;){if(A[E].mProps.dynamicProperties.length){this._isAnimated=!0;break}E+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(A,_){this.data=A,this.type=A.ty,this.d="",this.lvl=_,this._mdf=!1,this.closed=A.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(A,_,T,E){this.elem=A,this.frameId=-1,this.dataProps=createSizedArray(_.length),this.renderer=T,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",_.length?_.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(E);var C,P=_.length||0,I;for(C=0;C<P;C+=1)I=PropertyFactory.getProp(A,_[C].v,0,0,this),this.k=I.k||this.k,this.dataProps[C]={n:_[C].n,p:I};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(A){if(!(this.elem.globalData.frameId===this.frameId&&!A)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||A,this._mdf)){var _=0,T=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),_=0;_<T;_+=1)this.dataProps[_].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[_].p.v:this.dashArray[_]=this.dataProps[_].p.v:this.dashoffset[0]=this.dataProps[_].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(A,_,T){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(A,_.o,0,.01,this),this.w=PropertyFactory.getProp(A,_.w,0,null,this),this.d=new DashProperty(A,_.d||{},"svg",this),this.c=PropertyFactory.getProp(A,_.c,1,255,this),this.style=T,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(A,_,T){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(A,_.o,0,.01,this),this.c=PropertyFactory.getProp(A,_.c,1,255,this),this.style=T}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(A,_,T){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.style=T}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(A,_,T){this.data=_,this.c=createTypedArray("uint8c",_.p*4);var E=_.k.k[0].s?_.k.k[0].s.length-_.p*4:_.k.k.length-_.p*4;this.o=createTypedArray("float32",E),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=E,this.initDynamicPropertyContainer(T),this.prop=PropertyFactory.getProp(A,_.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(A,_){for(var T=0,E=this.o.length/2,C;T<E;){if(C=Math.abs(A[T*4]-A[_*4+T*2]),C>.01)return!1;T+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var A=0,_=this.data.k.k.length;A<_;){if(!this.comparePoints(this.data.k.k[A].s,this.data.p))return!1;A+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(A){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||A){var _,T=this.data.p*4,E,C;for(_=0;_<T;_+=1)E=_%4===0?100:255,C=Math.round(this.prop.v[_]*E),this.c[_]!==C&&(this.c[_]=C,this._cmdf=!A);if(this.o.length)for(T=this.prop.v.length,_=this.data.p*4;_<T;_+=1)E=_%2===0?100:1,C=_%2===0?Math.round(this.prop.v[_]*100):this.prop.v[_],this.o[_-this.data.p*4]!==C&&(this.o[_-this.data.p*4]=C,this._omdf=!A);this._mdf=!A}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(A,_,T){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.initGradientData(A,_,T)}SVGGradientFillStyleData.prototype.initGradientData=function(A,_,T){this.o=PropertyFactory.getProp(A,_.o,0,.01,this),this.s=PropertyFactory.getProp(A,_.s,1,null,this),this.e=PropertyFactory.getProp(A,_.e,1,null,this),this.h=PropertyFactory.getProp(A,_.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(A,_.a||{k:0},0,degToRads,this),this.g=new GradientProperty(A,_.g,this),this.style=T,this.stops=[],this.setGradientData(T.pElem,_),this.setGradientOpacity(_,T),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(A,_){var T=createElementID(),E=createNS(_.t===1?"linearGradient":"radialGradient");E.setAttribute("id",T),E.setAttribute("spreadMethod","pad"),E.setAttribute("gradientUnits","userSpaceOnUse");var C=[],P,I,F;for(F=_.g.p*4,I=0;I<F;I+=4)P=createNS("stop"),E.appendChild(P),C.push(P);A.setAttribute(_.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+T+")"),this.gf=E,this.cst=C},SVGGradientFillStyleData.prototype.setGradientOpacity=function(A,_){if(this.g._hasOpacity&&!this.g._collapsable){var T,E,C,P=createNS("mask"),I=createNS("path");P.appendChild(I);var F=createElementID(),R=createElementID();P.setAttribute("id",R);var B=createNS(A.t===1?"linearGradient":"radialGradient");B.setAttribute("id",F),B.setAttribute("spreadMethod","pad"),B.setAttribute("gradientUnits","userSpaceOnUse"),C=A.g.k.k[0].s?A.g.k.k[0].s.length:A.g.k.k.length;var O=this.stops;for(E=A.g.p*4;E<C;E+=2)T=createNS("stop"),T.setAttribute("stop-color","rgb(255,255,255)"),B.appendChild(T),O.push(T);I.setAttribute(A.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+F+")"),A.ty==="gs"&&(I.setAttribute("stroke-linecap",lineCapEnum[A.lc||2]),I.setAttribute("stroke-linejoin",lineJoinEnum[A.lj||2]),A.lj===1&&I.setAttribute("stroke-miterlimit",A.ml)),this.of=B,this.ms=P,this.ost=O,this.maskId=R,_.msElem=I}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(A,_,T){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(A,_.w,0,null,this),this.d=new DashProperty(A,_.d||{},"svg",this),this.initGradientData(A,_,T),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(A,_,T){this.transform={mProps:A,op:_,container:T},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(_,T,E,C){if(T===0)return"";var P=_.o,I=_.i,F=_.v,R,B=" M"+C.applyToPointStringified(F[0][0],F[0][1]);for(R=1;R<T;R+=1)B+=" C"+C.applyToPointStringified(P[R-1][0],P[R-1][1])+" "+C.applyToPointStringified(I[R][0],I[R][1])+" "+C.applyToPointStringified(F[R][0],F[R][1]);return E&&T&&(B+=" C"+C.applyToPointStringified(P[R-1][0],P[R-1][1])+" "+C.applyToPointStringified(I[0][0],I[0][1])+" "+C.applyToPointStringified(F[0][0],F[0][1]),B+="z"),B},SVGElementsRenderer=function(){var A=new Matrix,_=new Matrix,T={createRenderFunction:E};function E(V){switch(V.ty){case"fl":return F;case"gf":return B;case"gs":return R;case"st":return O;case"sh":case"el":case"rc":case"sr":return I;case"tr":return C;case"no":return P;default:return null}}function C(V,L,D){(D||L.transform.op._mdf)&&L.transform.container.setAttribute("opacity",L.transform.op.v),(D||L.transform.mProps._mdf)&&L.transform.container.setAttribute("transform",L.transform.mProps.v.to2dCSS())}function P(){}function I(V,L,D){var U,G,X,z,Y,W,q=L.styles.length,K=L.lvl,J,Z,se,ae;for(W=0;W<q;W+=1){if(z=L.sh._mdf||D,L.styles[W].lvl<K){for(Z=_.reset(),se=K-L.styles[W].lvl,ae=L.transformers.length-1;!z&&se>0;)z=L.transformers[ae].mProps._mdf||z,se-=1,ae-=1;if(z)for(se=K-L.styles[W].lvl,ae=L.transformers.length-1;se>0;)Z.multiply(L.transformers[ae].mProps.v),se-=1,ae-=1}else Z=A;if(J=L.sh.paths,G=J._length,z){for(X="",U=0;U<G;U+=1)Y=J.shapes[U],Y&&Y._length&&(X+=buildShapeString(Y,Y._length,Y.c,Z));L.caches[W]=X}else X=L.caches[W];L.styles[W].d+=V.hd===!0?"":X,L.styles[W]._mdf=z||L.styles[W]._mdf}}function F(V,L,D){var U=L.style;(L.c._mdf||D)&&U.pElem.setAttribute("fill","rgb("+bmFloor(L.c.v[0])+","+bmFloor(L.c.v[1])+","+bmFloor(L.c.v[2])+")"),(L.o._mdf||D)&&U.pElem.setAttribute("fill-opacity",L.o.v)}function R(V,L,D){B(V,L,D),O(V,L,D)}function B(V,L,D){var U=L.gf,G=L.g._hasOpacity,X=L.s.v,z=L.e.v;if(L.o._mdf||D){var Y=V.ty==="gf"?"fill-opacity":"stroke-opacity";L.style.pElem.setAttribute(Y,L.o.v)}if(L.s._mdf||D){var W=V.t===1?"x1":"cx",q=W==="x1"?"y1":"cy";U.setAttribute(W,X[0]),U.setAttribute(q,X[1]),G&&!L.g._collapsable&&(L.of.setAttribute(W,X[0]),L.of.setAttribute(q,X[1]))}var K,J,Z,se;if(L.g._cmdf||D){K=L.cst;var ae=L.g.c;for(Z=K.length,J=0;J<Z;J+=1)se=K[J],se.setAttribute("offset",ae[J*4]+"%"),se.setAttribute("stop-color","rgb("+ae[J*4+1]+","+ae[J*4+2]+","+ae[J*4+3]+")")}if(G&&(L.g._omdf||D)){var ue=L.g.o;for(L.g._collapsable?K=L.cst:K=L.ost,Z=K.length,J=0;J<Z;J+=1)se=K[J],L.g._collapsable||se.setAttribute("offset",ue[J*2]+"%"),se.setAttribute("stop-opacity",ue[J*2+1])}if(V.t===1)(L.e._mdf||D)&&(U.setAttribute("x2",z[0]),U.setAttribute("y2",z[1]),G&&!L.g._collapsable&&(L.of.setAttribute("x2",z[0]),L.of.setAttribute("y2",z[1])));else{var ce;if((L.s._mdf||L.e._mdf||D)&&(ce=Math.sqrt(Math.pow(X[0]-z[0],2)+Math.pow(X[1]-z[1],2)),U.setAttribute("r",ce),G&&!L.g._collapsable&&L.of.setAttribute("r",ce)),L.e._mdf||L.h._mdf||L.a._mdf||D){ce||(ce=Math.sqrt(Math.pow(X[0]-z[0],2)+Math.pow(X[1]-z[1],2)));var he=Math.atan2(z[1]-X[1],z[0]-X[0]),pe=L.h.v;pe>=1?pe=.99:pe<=-1&&(pe=-.99);var ye=ce*pe,_e=Math.cos(he+L.a.v)*ye+X[0],ee=Math.sin(he+L.a.v)*ye+X[1];U.setAttribute("fx",_e),U.setAttribute("fy",ee),G&&!L.g._collapsable&&(L.of.setAttribute("fx",_e),L.of.setAttribute("fy",ee))}}}function O(V,L,D){var U=L.style,G=L.d;G&&(G._mdf||D)&&G.dashStr&&(U.pElem.setAttribute("stroke-dasharray",G.dashStr),U.pElem.setAttribute("stroke-dashoffset",G.dashoffset[0])),L.c&&(L.c._mdf||D)&&U.pElem.setAttribute("stroke","rgb("+bmFloor(L.c.v[0])+","+bmFloor(L.c.v[1])+","+bmFloor(L.c.v[2])+")"),(L.o._mdf||D)&&U.pElem.setAttribute("stroke-opacity",L.o.v),(L.w._mdf||D)&&(U.pElem.setAttribute("stroke-width",L.w.v),U.msElem&&U.msElem.setAttribute("stroke-width",L.w.v))}return T}();function SVGShapeElement(A,_,T){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(A,_,T),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var A,_=this.shapes.length,T,E,C=this.stylesList.length,P,I=[],F=!1;for(E=0;E<C;E+=1){for(P=this.stylesList[E],F=!1,I.length=0,A=0;A<_;A+=1)T=this.shapes[A],T.styles.indexOf(P)!==-1&&(I.push(T),F=T._isAnimated||F);I.length>1&&F&&this.setShapesAsAnimated(I)}},SVGShapeElement.prototype.setShapesAsAnimated=function(A){var _,T=A.length;for(_=0;_<T;_+=1)A[_].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(A,_){var T,E=new SVGStyleData(A,_),C=E.pElem;if(A.ty==="st")T=new SVGStrokeStyleData(this,A,E);else if(A.ty==="fl")T=new SVGFillStyleData(this,A,E);else if(A.ty==="gf"||A.ty==="gs"){var P=A.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;T=new P(this,A,E),this.globalData.defs.appendChild(T.gf),T.maskId&&(this.globalData.defs.appendChild(T.ms),this.globalData.defs.appendChild(T.of),C.setAttribute("mask","url("+getLocationHref()+"#"+T.maskId+")"))}else A.ty==="no"&&(T=new SVGNoStyleData(this,A,E));return(A.ty==="st"||A.ty==="gs")&&(C.setAttribute("stroke-linecap",lineCapEnum[A.lc||2]),C.setAttribute("stroke-linejoin",lineJoinEnum[A.lj||2]),C.setAttribute("fill-opacity","0"),A.lj===1&&C.setAttribute("stroke-miterlimit",A.ml)),A.r===2&&C.setAttribute("fill-rule","evenodd"),A.ln&&C.setAttribute("id",A.ln),A.cl&&C.setAttribute("class",A.cl),A.bm&&(C.style["mix-blend-mode"]=getBlendMode(A.bm)),this.stylesList.push(E),this.addToAnimatedContents(A,T),T},SVGShapeElement.prototype.createGroupElement=function(A){var _=new ShapeGroupData;return A.ln&&_.gr.setAttribute("id",A.ln),A.cl&&_.gr.setAttribute("class",A.cl),A.bm&&(_.gr.style["mix-blend-mode"]=getBlendMode(A.bm)),_},SVGShapeElement.prototype.createTransformElement=function(A,_){var T=TransformPropertyFactory.getTransformProperty(this,A,this),E=new SVGTransformData(T,T.o,_);return this.addToAnimatedContents(A,E),E},SVGShapeElement.prototype.createShapeElement=function(A,_,T){var E=4;A.ty==="rc"?E=5:A.ty==="el"?E=6:A.ty==="sr"&&(E=7);var C=ShapePropertyFactory.getShapeProp(this,A,E,this),P=new SVGShapeData(_,T,C);return this.shapes.push(P),this.addShapeToModifiers(P),this.addToAnimatedContents(A,P),P},SVGShapeElement.prototype.addToAnimatedContents=function(A,_){for(var T=0,E=this.animatedContents.length;T<E;){if(this.animatedContents[T].element===_)return;T+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(A),element:_,data:A})},SVGShapeElement.prototype.setElementStyles=function(A){var _=A.styles,T,E=this.stylesList.length;for(T=0;T<E;T+=1)this.stylesList[T].closed||_.push(this.stylesList[T])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var A,_=this.itemsData.length;for(A=0;A<_;A+=1)this.prevViewData[A]=this.itemsData[A];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),_=this.dynamicProperties.length,A=0;A<_;A+=1)this.dynamicProperties[A].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(A,_,T,E,C,P,I){var F=[].concat(P),R,B=A.length-1,O,V,L=[],D=[],U,G,X;for(R=B;R>=0;R-=1){if(X=this.searchProcessedElement(A[R]),X?_[R]=T[X-1]:A[R]._render=I,A[R].ty==="fl"||A[R].ty==="st"||A[R].ty==="gf"||A[R].ty==="gs"||A[R].ty==="no")X?_[R].style.closed=!1:_[R]=this.createStyleElement(A[R],C),A[R]._render&&_[R].style.pElem.parentNode!==E&&E.appendChild(_[R].style.pElem),L.push(_[R].style);else if(A[R].ty==="gr"){if(!X)_[R]=this.createGroupElement(A[R]);else for(V=_[R].it.length,O=0;O<V;O+=1)_[R].prevViewData[O]=_[R].it[O];this.searchShapes(A[R].it,_[R].it,_[R].prevViewData,_[R].gr,C+1,F,I),A[R]._render&&_[R].gr.parentNode!==E&&E.appendChild(_[R].gr)}else A[R].ty==="tr"?(X||(_[R]=this.createTransformElement(A[R],E)),U=_[R].transform,F.push(U)):A[R].ty==="sh"||A[R].ty==="rc"||A[R].ty==="el"||A[R].ty==="sr"?(X||(_[R]=this.createShapeElement(A[R],F,C)),this.setElementStyles(_[R])):A[R].ty==="tm"||A[R].ty==="rd"||A[R].ty==="ms"||A[R].ty==="pb"||A[R].ty==="zz"||A[R].ty==="op"?(X?(G=_[R],G.closed=!1):(G=ShapeModifiers.getModifier(A[R].ty),G.init(this,A[R]),_[R]=G,this.shapeModifiers.push(G)),D.push(G)):A[R].ty==="rp"&&(X?(G=_[R],G.closed=!0):(G=ShapeModifiers.getModifier(A[R].ty),_[R]=G,G.init(this,A,R,_),this.shapeModifiers.push(G),I=!1),D.push(G));this.addProcessedElement(A[R],R+1)}for(B=L.length,R=0;R<B;R+=1)L[R].closed=!0;for(B=D.length,R=0;R<B;R+=1)D[R].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var A,_=this.stylesList.length;for(A=0;A<_;A+=1)this.stylesList[A].reset();for(this.renderShape(),A=0;A<_;A+=1)(this.stylesList[A]._mdf||this._isFirstFrame)&&(this.stylesList[A].msElem&&(this.stylesList[A].msElem.setAttribute("d",this.stylesList[A].d),this.stylesList[A].d="M0 0"+this.stylesList[A].d),this.stylesList[A].pElem.setAttribute("d",this.stylesList[A].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var A,_=this.animatedContents.length,T;for(A=0;A<_;A+=1)T=this.animatedContents[A],(this._isFirstFrame||T.element._isAnimated)&&T.data!==!0&&T.fn(T.data,T.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(A,_,T,E,C,P){this.o=A,this.sw=_,this.sc=T,this.fc=E,this.m=C,this.p=P,this._mdf={o:!0,sw:!!_,sc:!!T,fc:!!E,m:!0,p:!0}}LetterProps.prototype.update=function(A,_,T,E,C,P){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var I=!1;return this.o!==A&&(this.o=A,this._mdf.o=!0,I=!0),this.sw!==_&&(this.sw=_,this._mdf.sw=!0,I=!0),this.sc!==T&&(this.sc=T,this._mdf.sc=!0,I=!0),this.fc!==E&&(this.fc=E,this._mdf.fc=!0,I=!0),this.m!==C&&(this.m=C,this._mdf.m=!0,I=!0),P.length&&(this.p[0]!==P[0]||this.p[1]!==P[1]||this.p[4]!==P[4]||this.p[5]!==P[5]||this.p[12]!==P[12]||this.p[13]!==P[13])&&(this.p=P,this._mdf.p=!0,I=!0),I};function TextProperty(A,_){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,_.d&&_.d.sid&&(_.d=A.globalData.slotManager.getProp(_.d)),this.data=_,this.elem=A,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(A,_){for(var T in _)Object.prototype.hasOwnProperty.call(_,T)&&(A[T]=_[T]);return A},TextProperty.prototype.setCurrentData=function(A){A.__complete||this.completeTextData(A),this.currentData=A,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(A){this.effectsSequence.push(A),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(A){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!A)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var _=this.currentData,T=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var E,C=this.effectsSequence.length,P=A||this.data.d.k[this.keysIndex].s;for(E=0;E<C;E+=1)T!==this.keysIndex?P=this.effectsSequence[E](P,P.t):P=this.effectsSequence[E](this.currentData,P.t);_!==P&&this.setCurrentData(P),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var A=this.data.d.k,_=this.elem.comp.renderedFrame,T=0,E=A.length;T<=E-1&&!(T===E-1||A[T+1].t>_);)T+=1;return this.keysIndex!==T&&(this.keysIndex=T),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(A){for(var _=[],T=0,E=A.length,C,P,I=!1,F=!1,R="";T<E;)I=F,F=!1,C=A.charCodeAt(T),R=A.charAt(T),FontManager.isCombinedCharacter(C)?I=!0:C>=55296&&C<=56319?FontManager.isRegionalFlag(A,T)?R=A.substr(T,14):(P=A.charCodeAt(T+1),P>=56320&&P<=57343&&(FontManager.isModifier(C,P)?(R=A.substr(T,2),I=!0):FontManager.isFlagEmoji(A.substr(T,4))?R=A.substr(T,4):R=A.substr(T,2))):C>56319?(P=A.charCodeAt(T+1),FontManager.isVariationSelector(C)&&(I=!0)):FontManager.isZeroWidthJoiner(C)&&(I=!0,F=!0),I?(_[_.length-1]+=R,I=!1):_.push(R),T+=R.length;return _},TextProperty.prototype.completeTextData=function(A){A.__complete=!0;var _=this.elem.globalData.fontManager,T=this.data,E=[],C,P,I,F=0,R,B=T.m.g,O=0,V=0,L=0,D=[],U=0,G=0,X,z,Y=_.getFontByName(A.f),W,q=0,K=getFontProperties(Y);A.fWeight=K.weight,A.fStyle=K.style,A.finalSize=A.s,A.finalText=this.buildFinalText(A.t),P=A.finalText.length,A.finalLineHeight=A.lh;var J=A.tr/1e3*A.finalSize,Z;if(A.sz)for(var se=!0,ae=A.sz[0],ue=A.sz[1],ce,he;se;){he=this.buildFinalText(A.t),ce=0,U=0,P=he.length,J=A.tr/1e3*A.finalSize;var pe=-1;for(C=0;C<P;C+=1)Z=he[C].charCodeAt(0),I=!1,he[C]===" "?pe=C:(Z===13||Z===3)&&(U=0,I=!0,ce+=A.finalLineHeight||A.finalSize*1.2),_.chars?(W=_.getCharData(he[C],Y.fStyle,Y.fFamily),q=I?0:W.w*A.finalSize/100):q=_.measureText(he[C],A.f,A.finalSize),U+q>ae&&he[C]!==" "?(pe===-1?P+=1:C=pe,ce+=A.finalLineHeight||A.finalSize*1.2,he.splice(C,pe===C?1:0,"\r"),pe=-1,U=0):(U+=q,U+=J);ce+=Y.ascent*A.finalSize/100,this.canResize&&A.finalSize>this.minimumFontSize&&ue<ce?(A.finalSize-=1,A.finalLineHeight=A.finalSize*A.lh/A.s):(A.finalText=he,P=A.finalText.length,se=!1)}U=-J,q=0;var ye=0,_e;for(C=0;C<P;C+=1)if(I=!1,_e=A.finalText[C],Z=_e.charCodeAt(0),Z===13||Z===3?(ye=0,D.push(U),G=U>G?U:G,U=-2*J,R="",I=!0,L+=1):R=_e,_.chars?(W=_.getCharData(_e,Y.fStyle,_.getFontByName(A.f).fFamily),q=I?0:W.w*A.finalSize/100):q=_.measureText(R,A.f,A.finalSize),_e===" "?ye+=q+J:(U+=q+J+ye,ye=0),E.push({l:q,an:q,add:O,n:I,anIndexes:[],val:R,line:L,animatorJustifyOffset:0}),B==2){if(O+=q,R===""||R===" "||C===P-1){for((R===""||R===" ")&&(O-=q);V<=C;)E[V].an=O,E[V].ind=F,E[V].extra=q,V+=1;F+=1,O=0}}else if(B==3){if(O+=q,R===""||C===P-1){for(R===""&&(O-=q);V<=C;)E[V].an=O,E[V].ind=F,E[V].extra=q,V+=1;O=0,F+=1}}else E[F].ind=F,E[F].extra=0,F+=1;if(A.l=E,G=U>G?U:G,D.push(U),A.sz)A.boxWidth=A.sz[0],A.justifyOffset=0;else switch(A.boxWidth=G,A.j){case 1:A.justifyOffset=-A.boxWidth;break;case 2:A.justifyOffset=-A.boxWidth/2;break;default:A.justifyOffset=0}A.lineWidths=D;var ee=T.a,re,Q;z=ee.length;var te,ne,ie=[];for(X=0;X<z;X+=1){for(re=ee[X],re.a.sc&&(A.strokeColorAnim=!0),re.a.sw&&(A.strokeWidthAnim=!0),(re.a.fc||re.a.fh||re.a.fs||re.a.fb)&&(A.fillColorAnim=!0),ne=0,te=re.s.b,C=0;C<P;C+=1)Q=E[C],Q.anIndexes[X]=ne,(te==1&&Q.val!==""||te==2&&Q.val!==""&&Q.val!==" "||te==3&&(Q.n||Q.val==" "||C==P-1)||te==4&&(Q.n||C==P-1))&&(re.s.rn===1&&ie.push(ne),ne+=1);T.a[X].s.totalChars=ne;var fe=-1,me;if(re.s.rn===1)for(C=0;C<P;C+=1)Q=E[C],fe!=Q.anIndexes[X]&&(fe=Q.anIndexes[X],me=ie.splice(Math.floor(Math.random()*ie.length),1)[0]),Q.anIndexes[X]=me}A.yOffset=A.finalLineHeight||A.finalSize*1.2,A.ls=A.ls||0,A.ascent=Y.ascent*A.finalSize/100},TextProperty.prototype.updateDocumentData=function(A,_){_=_===void 0?this.keysIndex:_;var T=this.copyData({},this.data.d.k[_].s);T=this.copyData(T,A),this.data.d.k[_].s=T,this.recalculate(_),this.setCurrentData(T),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(A){var _=this.data.d.k[A].s;_.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(_)},TextProperty.prototype.canResizeFont=function(A){this.canResize=A,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(A){this.minimumFontSize=Math.floor(A)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var A=Math.max,_=Math.min,T=Math.floor;function E(P,I){this._currentTextLength=-1,this.k=!1,this.data=I,this.elem=P,this.comp=P.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(P),this.s=PropertyFactory.getProp(P,I.s||{k:0},0,0,this),"e"in I?this.e=PropertyFactory.getProp(P,I.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(P,I.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(P,I.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(P,I.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(P,I.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(P,I.a,0,.01,this),this.dynamicProperties.length||this.getValue()}E.prototype={getMult:function(I){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var F=0,R=0,B=1,O=1;this.ne.v>0?F=this.ne.v/100:R=-this.ne.v/100,this.xe.v>0?B=1-this.xe.v/100:O=1+this.xe.v/100;var V=BezierFactory.getBezierEasing(F,R,B,O).get,L=0,D=this.finalS,U=this.finalE,G=this.data.sh;if(G===2)U===D?L=I>=U?1:0:L=A(0,_(.5/(U-D)+(I-D)/(U-D),1)),L=V(L);else if(G===3)U===D?L=I>=U?0:1:L=1-A(0,_(.5/(U-D)+(I-D)/(U-D),1)),L=V(L);else if(G===4)U===D?L=0:(L=A(0,_(.5/(U-D)+(I-D)/(U-D),1)),L<.5?L*=2:L=1-2*(L-.5)),L=V(L);else if(G===5){if(U===D)L=0;else{var X=U-D;I=_(A(0,I+.5-D),U-D);var z=-X/2+I,Y=X/2;L=Math.sqrt(1-z*z/(Y*Y))}L=V(L)}else G===6?(U===D?L=0:(I=_(A(0,I+.5-D),U-D),L=(1+Math.cos(Math.PI+Math.PI*2*I/(U-D)))/2),L=V(L)):(I>=T(D)&&(I-D<0?L=A(0,_(_(U,1)-(D-I),1)):L=A(0,_(U-I,1))),L=V(L));if(this.sm.v!==100){var W=this.sm.v*.01;W===0&&(W=1e-8);var q=.5-W*.5;L<q?L=0:(L=(L-q)/W,L>1&&(L=1))}return L*this.a.v},getValue:function(I){this.iterateDynamicProperties(),this._mdf=I||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,I&&this.data.r===2&&(this.e.v=this._currentTextLength);var F=this.data.r===2?1:100/this.data.totalChars,R=this.o.v/F,B=this.s.v/F+R,O=this.e.v/F+R;if(B>O){var V=B;B=O,O=V}this.finalS=B,this.finalE=O}},extendPrototype([DynamicPropertyContainer],E);function C(P,I,F){return new E(P,I)}return{getTextSelectorProp:C}}();function TextAnimatorDataProperty(A,_,T){var E={propType:!1},C=PropertyFactory.getProp,P=_.a;this.a={r:P.r?C(A,P.r,0,degToRads,T):E,rx:P.rx?C(A,P.rx,0,degToRads,T):E,ry:P.ry?C(A,P.ry,0,degToRads,T):E,sk:P.sk?C(A,P.sk,0,degToRads,T):E,sa:P.sa?C(A,P.sa,0,degToRads,T):E,s:P.s?C(A,P.s,1,.01,T):E,a:P.a?C(A,P.a,1,0,T):E,o:P.o?C(A,P.o,0,.01,T):E,p:P.p?C(A,P.p,1,0,T):E,sw:P.sw?C(A,P.sw,0,0,T):E,sc:P.sc?C(A,P.sc,1,0,T):E,fc:P.fc?C(A,P.fc,1,0,T):E,fh:P.fh?C(A,P.fh,0,0,T):E,fs:P.fs?C(A,P.fs,0,.01,T):E,fb:P.fb?C(A,P.fb,0,.01,T):E,t:P.t?C(A,P.t,0,0,T):E},this.s=TextSelectorProp.getTextSelectorProp(A,_.s,T),this.s.t=_.s.t}function TextAnimatorProperty(A,_,T){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=A,this._renderType=_,this._elem=T,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(T)}TextAnimatorProperty.prototype.searchProperties=function(){var A,_=this._textData.a.length,T,E=PropertyFactory.getProp;for(A=0;A<_;A+=1)T=this._textData.a[A],this._animatorsData[A]=new TextAnimatorDataProperty(this._elem,T,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:E(this._elem,this._textData.p.a,0,0,this),f:E(this._elem,this._textData.p.f,0,0,this),l:E(this._elem,this._textData.p.l,0,0,this),r:E(this._elem,this._textData.p.r,0,0,this),p:E(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=E(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(A,_){if(this.lettersChangedFlag=_,!(!this._mdf&&!this._isFirstFrame&&!_&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var T=this._moreOptions.alignment.v,E=this._animatorsData,C=this._textData,P=this.mHelper,I=this._renderType,F=this.renderedLetters.length,R,B,O,V,L=A.l,D,U,G,X,z,Y,W,q,K,J,Z,se,ae,ue,ce;if(this._hasMaskedPath){if(ce=this._pathData.m,!this._pathData.n||this._pathData._mdf){var he=ce.v;this._pathData.r.v&&(he=he.reverse()),D={tLength:0,segments:[]},V=he._length-1;var pe;for(se=0,O=0;O<V;O+=1)pe=bez.buildBezierData(he.v[O],he.v[O+1],[he.o[O][0]-he.v[O][0],he.o[O][1]-he.v[O][1]],[he.i[O+1][0]-he.v[O+1][0],he.i[O+1][1]-he.v[O+1][1]]),D.tLength+=pe.segmentLength,D.segments.push(pe),se+=pe.segmentLength;O=V,ce.v.c&&(pe=bez.buildBezierData(he.v[O],he.v[0],[he.o[O][0]-he.v[O][0],he.o[O][1]-he.v[O][1]],[he.i[0][0]-he.v[0][0],he.i[0][1]-he.v[0][1]]),D.tLength+=pe.segmentLength,D.segments.push(pe),se+=pe.segmentLength),this._pathData.pi=D}if(D=this._pathData.pi,U=this._pathData.f.v,W=0,Y=1,X=0,z=!0,J=D.segments,U<0&&ce.v.c)for(D.tLength<Math.abs(U)&&(U=-Math.abs(U)%D.tLength),W=J.length-1,K=J[W].points,Y=K.length-1;U<0;)U+=K[Y].partialLength,Y-=1,Y<0&&(W-=1,K=J[W].points,Y=K.length-1);K=J[W].points,q=K[Y-1],G=K[Y],Z=G.partialLength}V=L.length,R=0,B=0;var ye=A.finalSize*1.2*.714,_e=!0,ee,re,Q,te,ne;te=E.length;var ie,fe=-1,me,be,Pe,Me=U,ge=W,Se=Y,Ee=-1,Ae,Ie,oe,le,de,ve,xe,Ce,Fe="",ke=this.defaultPropsArray,Be;if(A.j===2||A.j===1){var Re=0,Le=0,$e=A.j===2?-.5:-1,Oe=0,Ve=!0;for(O=0;O<V;O+=1)if(L[O].n){for(Re&&(Re+=Le);Oe<O;)L[Oe].animatorJustifyOffset=Re,Oe+=1;Re=0,Ve=!0}else{for(Q=0;Q<te;Q+=1)ee=E[Q].a,ee.t.propType&&(Ve&&A.j===2&&(Le+=ee.t.v*$e),re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),ie.length?Re+=ee.t.v*ie[0]*$e:Re+=ee.t.v*ie*$e);Ve=!1}for(Re&&(Re+=Le);Oe<O;)L[Oe].animatorJustifyOffset=Re,Oe+=1}for(O=0;O<V;O+=1){if(P.reset(),Ae=1,L[O].n)R=0,B+=A.yOffset,B+=_e?1:0,U=Me,_e=!1,this._hasMaskedPath&&(W=ge,Y=Se,K=J[W].points,q=K[Y-1],G=K[Y],Z=G.partialLength,X=0),Fe="",Ce="",ve="",Be="",ke=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Ee!==L[O].line){switch(A.j){case 1:U+=se-A.lineWidths[L[O].line];break;case 2:U+=(se-A.lineWidths[L[O].line])/2;break}Ee=L[O].line}fe!==L[O].ind&&(L[fe]&&(U+=L[fe].extra),U+=L[O].an/2,fe=L[O].ind),U+=T[0]*L[O].an*.005;var De=0;for(Q=0;Q<te;Q+=1)ee=E[Q].a,ee.p.propType&&(re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),ie.length?De+=ee.p.v[0]*ie[0]:De+=ee.p.v[0]*ie),ee.a.propType&&(re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),ie.length?De+=ee.a.v[0]*ie[0]:De+=ee.a.v[0]*ie);for(z=!0,this._pathData.a.v&&(U=L[0].an*.5+(se-this._pathData.f.v-L[0].an*.5-L[L.length-1].an*.5)*fe/(V-1),U+=this._pathData.f.v);z;)X+Z>=U+De||!K?(ae=(U+De-X)/G.partialLength,be=q.point[0]+(G.point[0]-q.point[0])*ae,Pe=q.point[1]+(G.point[1]-q.point[1])*ae,P.translate(-T[0]*L[O].an*.005,-(T[1]*ye)*.01),z=!1):K&&(X+=G.partialLength,Y+=1,Y>=K.length&&(Y=0,W+=1,J[W]?K=J[W].points:ce.v.c?(Y=0,W=0,K=J[W].points):(X-=G.partialLength,K=null)),K&&(q=G,G=K[Y],Z=G.partialLength));me=L[O].an/2-L[O].add,P.translate(-me,0,0)}else me=L[O].an/2-L[O].add,P.translate(-me,0,0),P.translate(-T[0]*L[O].an*.005,-T[1]*ye*.01,0);for(Q=0;Q<te;Q+=1)ee=E[Q].a,ee.t.propType&&(re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),(R!==0||A.j!==0)&&(this._hasMaskedPath?ie.length?U+=ee.t.v*ie[0]:U+=ee.t.v*ie:ie.length?R+=ee.t.v*ie[0]:R+=ee.t.v*ie));for(A.strokeWidthAnim&&(oe=A.sw||0),A.strokeColorAnim&&(A.sc?Ie=[A.sc[0],A.sc[1],A.sc[2]]:Ie=[0,0,0]),A.fillColorAnim&&A.fc&&(le=[A.fc[0],A.fc[1],A.fc[2]]),Q=0;Q<te;Q+=1)ee=E[Q].a,ee.a.propType&&(re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),ie.length?P.translate(-ee.a.v[0]*ie[0],-ee.a.v[1]*ie[1],ee.a.v[2]*ie[2]):P.translate(-ee.a.v[0]*ie,-ee.a.v[1]*ie,ee.a.v[2]*ie));for(Q=0;Q<te;Q+=1)ee=E[Q].a,ee.s.propType&&(re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),ie.length?P.scale(1+(ee.s.v[0]-1)*ie[0],1+(ee.s.v[1]-1)*ie[1],1):P.scale(1+(ee.s.v[0]-1)*ie,1+(ee.s.v[1]-1)*ie,1));for(Q=0;Q<te;Q+=1){if(ee=E[Q].a,re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),ee.sk.propType&&(ie.length?P.skewFromAxis(-ee.sk.v*ie[0],ee.sa.v*ie[1]):P.skewFromAxis(-ee.sk.v*ie,ee.sa.v*ie)),ee.r.propType&&(ie.length?P.rotateZ(-ee.r.v*ie[2]):P.rotateZ(-ee.r.v*ie)),ee.ry.propType&&(ie.length?P.rotateY(ee.ry.v*ie[1]):P.rotateY(ee.ry.v*ie)),ee.rx.propType&&(ie.length?P.rotateX(ee.rx.v*ie[0]):P.rotateX(ee.rx.v*ie)),ee.o.propType&&(ie.length?Ae+=(ee.o.v*ie[0]-Ae)*ie[0]:Ae+=(ee.o.v*ie-Ae)*ie),A.strokeWidthAnim&&ee.sw.propType&&(ie.length?oe+=ee.sw.v*ie[0]:oe+=ee.sw.v*ie),A.strokeColorAnim&&ee.sc.propType)for(de=0;de<3;de+=1)ie.length?Ie[de]+=(ee.sc.v[de]-Ie[de])*ie[0]:Ie[de]+=(ee.sc.v[de]-Ie[de])*ie;if(A.fillColorAnim&&A.fc){if(ee.fc.propType)for(de=0;de<3;de+=1)ie.length?le[de]+=(ee.fc.v[de]-le[de])*ie[0]:le[de]+=(ee.fc.v[de]-le[de])*ie;ee.fh.propType&&(ie.length?le=addHueToRGB(le,ee.fh.v*ie[0]):le=addHueToRGB(le,ee.fh.v*ie)),ee.fs.propType&&(ie.length?le=addSaturationToRGB(le,ee.fs.v*ie[0]):le=addSaturationToRGB(le,ee.fs.v*ie)),ee.fb.propType&&(ie.length?le=addBrightnessToRGB(le,ee.fb.v*ie[0]):le=addBrightnessToRGB(le,ee.fb.v*ie))}}for(Q=0;Q<te;Q+=1)ee=E[Q].a,ee.p.propType&&(re=E[Q].s,ie=re.getMult(L[O].anIndexes[Q],C.a[Q].s.totalChars),this._hasMaskedPath?ie.length?P.translate(0,ee.p.v[1]*ie[0],-ee.p.v[2]*ie[1]):P.translate(0,ee.p.v[1]*ie,-ee.p.v[2]*ie):ie.length?P.translate(ee.p.v[0]*ie[0],ee.p.v[1]*ie[1],-ee.p.v[2]*ie[2]):P.translate(ee.p.v[0]*ie,ee.p.v[1]*ie,-ee.p.v[2]*ie));if(A.strokeWidthAnim&&(ve=oe<0?0:oe),A.strokeColorAnim&&(xe="rgb("+Math.round(Ie[0]*255)+","+Math.round(Ie[1]*255)+","+Math.round(Ie[2]*255)+")"),A.fillColorAnim&&A.fc&&(Ce="rgb("+Math.round(le[0]*255)+","+Math.round(le[1]*255)+","+Math.round(le[2]*255)+")"),this._hasMaskedPath){if(P.translate(0,-A.ls),P.translate(0,T[1]*ye*.01+B,0),this._pathData.p.v){ue=(G.point[1]-q.point[1])/(G.point[0]-q.point[0]);var Ge=Math.atan(ue)*180/Math.PI;G.point[0]<q.point[0]&&(Ge+=180),P.rotate(-Ge*Math.PI/180)}P.translate(be,Pe,0),U-=T[0]*L[O].an*.005,L[O+1]&&fe!==L[O+1].ind&&(U+=L[O].an/2,U+=A.tr*.001*A.finalSize)}else{switch(P.translate(R,B,0),A.ps&&P.translate(A.ps[0],A.ps[1]+A.ascent,0),A.j){case 1:P.translate(L[O].animatorJustifyOffset+A.justifyOffset+(A.boxWidth-A.lineWidths[L[O].line]),0,0);break;case 2:P.translate(L[O].animatorJustifyOffset+A.justifyOffset+(A.boxWidth-A.lineWidths[L[O].line])/2,0,0);break}P.translate(0,-A.ls),P.translate(me,0,0),P.translate(T[0]*L[O].an*.005,T[1]*ye*.01,0),R+=L[O].l+A.tr*.001*A.finalSize}I==="html"?Fe=P.toCSS():I==="svg"?Fe=P.to2dCSS():ke=[P.props[0],P.props[1],P.props[2],P.props[3],P.props[4],P.props[5],P.props[6],P.props[7],P.props[8],P.props[9],P.props[10],P.props[11],P.props[12],P.props[13],P.props[14],P.props[15]],Be=Ae}F<=O?(ne=new LetterProps(Be,ve,xe,Ce,Fe,ke),this.renderedLetters.push(ne),F+=1,this.lettersChangedFlag=!0):(ne=this.renderedLetters[O],this.lettersChangedFlag=ne.update(Be,ve,xe,Ce,Fe,ke)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(A,_,T){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(A,_,T),this.textProperty=new TextProperty(this,A.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(A.t,this.renderType,this),this.initTransform(A,_,T),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(A){this._mdf=!1,this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange)},ITextElement.prototype.createPathShape=function(A,_){var T,E=_.length,C,P="";for(T=0;T<E;T+=1)_[T].ty==="sh"&&(C=_[T].ks.k,P+=buildShapeString(C,C.i.length,!0,A));return P},ITextElement.prototype.updateDocumentData=function(A,_){this.textProperty.updateDocumentData(A,_)},ITextElement.prototype.canResizeFont=function(A){this.textProperty.canResizeFont(A)},ITextElement.prototype.setMinimumFontSize=function(A){this.textProperty.setMinimumFontSize(A)},ITextElement.prototype.applyTextPropertiesToMatrix=function(A,_,T,E,C){switch(A.ps&&_.translate(A.ps[0],A.ps[1]+A.ascent,0),_.translate(0,-A.ls,0),A.j){case 1:_.translate(A.justifyOffset+(A.boxWidth-A.lineWidths[T]),0,0);break;case 2:_.translate(A.justifyOffset+(A.boxWidth-A.lineWidths[T])/2,0,0);break}_.translate(E,C,0)},ITextElement.prototype.buildColor=function(A){return"rgb("+Math.round(A[0]*255)+","+Math.round(A[1]*255)+","+Math.round(A[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(A,_,T){this.textSpans=[],this.renderType="svg",this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(A){for(var _=0,T=A.length,E=[],C="";_<T;)A[_]==="\r"||A[_]===""?(E.push(C),C=""):C+=A[_],_+=1;return E.push(C),E},SVGTextLottieElement.prototype.buildShapeData=function(A,_){if(A.shapes&&A.shapes.length){var T=A.shapes[0];if(T.it){var E=T.it[T.it.length-1];E.s&&(E.s.k[0]=_,E.s.k[1]=_)}}return A},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var A,_,T=this.textProperty.currentData;this.renderedLetters=createSizedArray(T?T.l.length:0),T.fc?this.layerElement.setAttribute("fill",this.buildColor(T.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),T.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(T.sc)),this.layerElement.setAttribute("stroke-width",T.sw)),this.layerElement.setAttribute("font-size",T.finalSize);var E=this.globalData.fontManager.getFontByName(T.f);if(E.fClass)this.layerElement.setAttribute("class",E.fClass);else{this.layerElement.setAttribute("font-family",E.fFamily);var C=T.fWeight,P=T.fStyle;this.layerElement.setAttribute("font-style",P),this.layerElement.setAttribute("font-weight",C)}this.layerElement.setAttribute("aria-label",T.t);var I=T.l||[],F=!!this.globalData.fontManager.chars;_=I.length;var R,B=this.mHelper,O="",V=this.data.singleShape,L=0,D=0,U=!0,G=T.tr*.001*T.finalSize;if(V&&!F&&!T.sz){var X=this.textContainer,z="start";switch(T.j){case 1:z="end";break;case 2:z="middle";break;default:z="start";break}X.setAttribute("text-anchor",z),X.setAttribute("letter-spacing",G);var Y=this.buildTextContents(T.finalText);for(_=Y.length,D=T.ps?T.ps[1]+T.ascent:0,A=0;A<_;A+=1)R=this.textSpans[A].span||createNS("tspan"),R.textContent=Y[A],R.setAttribute("x",0),R.setAttribute("y",D),R.style.display="inherit",X.appendChild(R),this.textSpans[A]||(this.textSpans[A]={span:null,glyph:null}),this.textSpans[A].span=R,D+=T.finalLineHeight;this.layerElement.appendChild(X)}else{var W=this.textSpans.length,q;for(A=0;A<_;A+=1){if(this.textSpans[A]||(this.textSpans[A]={span:null,childSpan:null,glyph:null}),!F||!V||A===0){if(R=W>A?this.textSpans[A].span:createNS(F?"g":"text"),W<=A){if(R.setAttribute("stroke-linecap","butt"),R.setAttribute("stroke-linejoin","round"),R.setAttribute("stroke-miterlimit","4"),this.textSpans[A].span=R,F){var K=createNS("g");R.appendChild(K),this.textSpans[A].childSpan=K}this.textSpans[A].span=R,this.layerElement.appendChild(R)}R.style.display="inherit"}if(B.reset(),V&&(I[A].n&&(L=-G,D+=T.yOffset,D+=U?1:0,U=!1),this.applyTextPropertiesToMatrix(T,B,I[A].line,L,D),L+=I[A].l||0,L+=G),F){q=this.globalData.fontManager.getCharData(T.finalText[A],E.fStyle,this.globalData.fontManager.getFontByName(T.f).fFamily);var J;if(q.t===1)J=new SVGCompElement(q.data,this.globalData,this);else{var Z=emptyShapeData;q.data&&q.data.shapes&&(Z=this.buildShapeData(q.data,T.finalSize)),J=new SVGShapeElement(Z,this.globalData,this)}if(this.textSpans[A].glyph){var se=this.textSpans[A].glyph;this.textSpans[A].childSpan.removeChild(se.layerElement),se.destroy()}this.textSpans[A].glyph=J,J._debug=!0,J.prepareFrame(0),J.renderFrame(),this.textSpans[A].childSpan.appendChild(J.layerElement),q.t===1&&this.textSpans[A].childSpan.setAttribute("transform","scale("+T.finalSize/100+","+T.finalSize/100+")")}else V&&R.setAttribute("transform","translate("+B.props[12]+","+B.props[13]+")"),R.textContent=I[A].val,R.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}V&&R&&R.setAttribute("d",O)}for(;A<this.textSpans.length;)this.textSpans[A].span.style.display="none",A+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var A=this.layerElement.getBBox();this.bbox={top:A.y,left:A.x,width:A.width,height:A.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var A,_=this.textSpans.length,T;for(this.renderedFrame=this.comp.renderedFrame,A=0;A<_;A+=1)T=this.textSpans[A].glyph,T&&(T.prepareFrame(this.comp.renderedFrame-this.data.st),T._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var A,_,T=this.textAnimator.renderedLetters,E=this.textProperty.currentData.l;_=E.length;var C,P,I;for(A=0;A<_;A+=1)E[A].n||(C=T[A],P=this.textSpans[A].span,I=this.textSpans[A].glyph,I&&I.renderFrame(),C._mdf.m&&P.setAttribute("transform",C.m),C._mdf.o&&P.setAttribute("opacity",C.o),C._mdf.sw&&P.setAttribute("stroke-width",C.sw),C._mdf.sc&&P.setAttribute("stroke",C.sc),C._mdf.fc&&P.setAttribute("fill",C.fc))}};function ISolidElement(A,_,T){this.initElement(A,_,T)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var A=createNS("rect");A.setAttribute("width",this.data.sw),A.setAttribute("height",this.data.sh),A.setAttribute("fill",this.data.sc),this.layerElement.appendChild(A)};function NullElement(A,_,T){this.initFrame(),this.initBaseData(A,_,T),this.initFrame(),this.initTransform(A,_,T),this.initHierarchy()}NullElement.prototype.prepareFrame=function(A){this.prepareProperties(A,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(A){return new NullElement(A,this.globalData,this)},SVGRendererBase.prototype.createShape=function(A){return new SVGShapeElement(A,this.globalData,this)},SVGRendererBase.prototype.createText=function(A){return new SVGTextLottieElement(A,this.globalData,this)},SVGRendererBase.prototype.createImage=function(A){return new IImageElement(A,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(A){return new ISolidElement(A,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(A){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+A.w+" "+A.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",A.w),this.svgElement.setAttribute("height",A.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var _=this.globalData.defs;this.setupGlobalData(A,_),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=A;var T=createNS("clipPath"),E=createNS("rect");E.setAttribute("width",A.w),E.setAttribute("height",A.h),E.setAttribute("x",0),E.setAttribute("y",0);var C=createElementID();T.setAttribute("id",C),T.appendChild(E),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+C+")"),_.appendChild(T),this.layers=A.layers,this.elements=createSizedArray(A.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var A,_=this.layers?this.layers.length:0;for(A=0;A<_;A+=1)this.elements[A]&&this.elements[A].destroy&&this.elements[A].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(A){var _=0,T=this.layers.length;for(_=0;_<T;_+=1)if(this.layers[_].ind===A)return _;return-1},SVGRendererBase.prototype.buildItem=function(A){var _=this.elements;if(!(_[A]||this.layers[A].ty===99)){_[A]=!0;var T=this.createItem(this.layers[A]);if(_[A]=T,getExpressionsPlugin()&&(this.layers[A].ty===0&&this.globalData.projectInterface.registerComposition(T),T.initExpressions()),this.appendElementInPos(T,A),this.layers[A].tt){var E="tp"in this.layers[A]?this.findIndexByInd(this.layers[A].tp):A-1;if(E===-1)return;if(!this.elements[E]||this.elements[E]===!0)this.buildItem(E),this.addPendingElement(T);else{var C=_[E],P=C.getMatte(this.layers[A].tt);T.setMatte(P)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var A=this.pendingElements.pop();if(A.checkParenting(),A.data.tt)for(var _=0,T=this.elements.length;_<T;){if(this.elements[_]===A){var E="tp"in A.data?this.findIndexByInd(A.data.tp):_-1,C=this.elements[E],P=C.getMatte(this.layers[_].tt);A.setMatte(P);break}_+=1}}},SVGRendererBase.prototype.renderFrame=function(A){if(!(this.renderedFrame===A||this.destroyed)){A===null?A=this.renderedFrame:this.renderedFrame=A,this.globalData.frameNum=A,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=A,this.globalData._mdf=!1;var _,T=this.layers.length;for(this.completeLayers||this.checkLayers(A),_=T-1;_>=0;_-=1)(this.completeLayers||this.elements[_])&&this.elements[_].prepareFrame(A-this.layers[_].st);if(this.globalData._mdf)for(_=0;_<T;_+=1)(this.completeLayers||this.elements[_])&&this.elements[_].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(A,_){var T=A.getBaseElement();if(T){for(var E=0,C;E<_;)this.elements[E]&&this.elements[E]!==!0&&this.elements[E].getBaseElement()&&(C=this.elements[E].getBaseElement()),E+=1;C?this.layerElement.insertBefore(T,C):this.layerElement.appendChild(T)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(A,_,T){this.initFrame(),this.initBaseData(A,_,T),this.initTransform(A,_,T),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!_.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(A){if(this._mdf=!1,this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=A/this.data.sr;else{var _=this.tm.v;_===this.data.op&&(_=this.data.op-1),this.renderedFrame=_}var T,E=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),T=E-1;T>=0;T-=1)(this.completeLayers||this.elements[T])&&(this.elements[T].prepareFrame(this.renderedFrame-this.layers[T].st),this.elements[T]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var A,_=this.layers.length;for(A=0;A<_;A+=1)(this.completeLayers||this.elements[A])&&this.elements[A].renderFrame()},ICompElement.prototype.setElements=function(A){this.elements=A},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var A,_=this.layers.length;for(A=0;A<_;A+=1)this.elements[A]&&this.elements[A].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(A,_,T){this.layers=A.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(A,_,T),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,_.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(A){return new SVGCompElement(A,this.globalData,this)};function SVGRenderer(A,_){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var T="";if(_&&_.title){var E=createNS("title"),C=createElementID();E.setAttribute("id",C),E.textContent=_.title,this.svgElement.appendChild(E),T+=C}if(_&&_.description){var P=createNS("desc"),I=createElementID();P.setAttribute("id",I),P.textContent=_.description,this.svgElement.appendChild(P),T+=" "+I}T&&this.svgElement.setAttribute("aria-labelledby",T);var F=createNS("defs");this.svgElement.appendChild(F);var R=createNS("g");this.svgElement.appendChild(R),this.layerElement=R,this.renderConfig={preserveAspectRatio:_&&_.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:_&&_.contentVisibility||"visible",progressiveLoad:_&&_.progressiveLoad||!1,hideOnTransparent:!(_&&_.hideOnTransparent===!1),viewBoxOnly:_&&_.viewBoxOnly||!1,viewBoxSize:_&&_.viewBoxSize||!1,className:_&&_.className||"",id:_&&_.id||"",focusable:_&&_.focusable,filterSize:{width:_&&_.filterSize&&_.filterSize.width||"100%",height:_&&_.filterSize&&_.filterSize.height||"100%",x:_&&_.filterSize&&_.filterSize.x||"0%",y:_&&_.filterSize&&_.filterSize.y||"0%"},width:_&&_.width,height:_&&_.height,runExpressions:!_||_.runExpressions===void 0||_.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:F,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(A){return new SVGCompElement(A,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(_){var T,E=_.length,C="_";for(T=0;T<E;T+=1)C+=_[T].transform.key+"_";var P=this.sequences[C];return P||(P={transforms:[].concat(_),finalTransform:new Matrix,_mdf:!1},this.sequences[C]=P,this.sequenceList.push(P)),P},processSequence:function(_,T){for(var E=0,C=_.transforms.length,P=T;E<C&&!T;){if(_.transforms[E].transform.mProps._mdf){P=!0;break}E+=1}if(P)for(_.finalTransform.reset(),E=C-1;E>=0;E-=1)_.finalTransform.multiply(_.transforms[E].transform.mProps.v);_._mdf=P},processSequences:function(_){var T,E=this.sequenceList.length;for(T=0;T<E;T+=1)this.processSequence(this.sequenceList[T],_)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var _="__lottie_element_luma_buffer",T=null,E=null,C=null;function P(){var R=createNS("svg"),B=createNS("filter"),O=createNS("feColorMatrix");return B.setAttribute("id",_),O.setAttribute("type","matrix"),O.setAttribute("color-interpolation-filters","sRGB"),O.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),B.appendChild(O),R.appendChild(B),R.setAttribute("id",_+"_svg"),featureSupport.svgLumaHidden&&(R.style.display="none"),R}function I(){T||(C=P(),document.body.appendChild(C),T=createTag("canvas"),E=T.getContext("2d"),E.filter="url(#"+_+")",E.fillStyle="rgba(0,0,0,0)",E.fillRect(0,0,1,1))}function F(R){return T||I(),T.width=R.width,T.height=R.height,E.filter="url(#"+_+")",T}return{load:I,get:F}};function createCanvas(A,_){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(A,_);var T=createTag("canvas");return T.width=A,T.height=_,T}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(A){var _,T=A.data.ef?A.data.ef.length:0;this.filters=[];var E;for(_=0;_<T;_+=1){E=null;var C=A.data.ef[_].ty;if(registeredEffects[C]){var P=registeredEffects[C].effect;E=new P(A.effectsManager.effectElements[_],A)}E&&this.filters.push(E)}this.filters.length&&A.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(A){var _,T=this.filters.length;for(_=0;_<T;_+=1)this.filters[_].renderFrame(A)},CVEffects.prototype.getEffects=function(A){var _,T=this.filters.length,E=[];for(_=0;_<T;_+=1)this.filters[_].type===A&&E.push(this.filters[_]);return E};function registerEffect(A,_){registeredEffects[A]={effect:_}}function CVMaskElement(A,_){this.data=A,this.element=_,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var T,E=this.masksProperties.length,C=!1;for(T=0;T<E;T+=1)this.masksProperties[T].mode!=="n"&&(C=!0),this.viewData[T]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[T],3);this.hasMasks=C,C&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var A=this.element.finalTransform.mat,_=this.element.canvasContext,T,E=this.masksProperties.length,C,P,I;for(_.beginPath(),T=0;T<E;T+=1)if(this.masksProperties[T].mode!=="n"){this.masksProperties[T].inv&&(_.moveTo(0,0),_.lineTo(this.element.globalData.compSize.w,0),_.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),_.lineTo(0,this.element.globalData.compSize.h),_.lineTo(0,0)),I=this.viewData[T].v,C=A.applyToPointArray(I.v[0][0],I.v[0][1],0),_.moveTo(C[0],C[1]);var F,R=I._length;for(F=1;F<R;F+=1)P=A.applyToTriplePoints(I.o[F-1],I.i[F],I.v[F]),_.bezierCurveTo(P[0],P[1],P[2],P[3],P[4],P[5]);P=A.applyToTriplePoints(I.o[F-1],I.i[0],I.v[0]),_.bezierCurveTo(P[0],P[1],P[2],P[3],P[4],P[5])}this.element.globalData.renderer.save(!0),_.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var _=this.globalData.canvasContext,T=assetLoader.createCanvas(_.canvas.width,_.canvas.height);this.buffers.push(T);var E=assetLoader.createCanvas(_.canvas.width,_.canvas.height);this.buffers.push(E),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var _=this.globalData;if(_.blendMode!==this.data.bm){_.blendMode=this.data.bm;var T=getBlendMode(this.data.bm);_.canvasContext.globalCompositeOperation=T}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(_){_.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var _=this.buffers[0],T=_.getContext("2d");this.clearCanvas(T),T.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var _=this.buffers[1],T=_.getContext("2d");this.clearCanvas(T),T.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var E=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(E.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var C=assetLoader.getLumaCanvas(this.canvasContext.canvas),P=C.getContext("2d");P.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(C,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(_,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(_){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!_)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var T=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(T),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(T),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(A,_,T,E){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var C=4;_.ty==="rc"?C=5:_.ty==="el"?C=6:_.ty==="sr"&&(C=7),this.sh=ShapePropertyFactory.getShapeProp(A,_,C,A);var P,I=T.length,F;for(P=0;P<I;P+=1)T[P].closed||(F={transforms:E.addTransformSequence(T[P].transforms),trNodes:[]},this.styledShapes.push(F),T[P].elements.push(F))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(A,_,T){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(A,_){var T={data:A,type:A.ty,preTransforms:this.transformsManager.addTransformSequence(_),transforms:[],elements:[],closed:A.hd===!0},E={};if(A.ty==="fl"||A.ty==="st"?(E.c=PropertyFactory.getProp(this,A.c,1,255,this),E.c.k||(T.co="rgb("+bmFloor(E.c.v[0])+","+bmFloor(E.c.v[1])+","+bmFloor(E.c.v[2])+")")):(A.ty==="gf"||A.ty==="gs")&&(E.s=PropertyFactory.getProp(this,A.s,1,null,this),E.e=PropertyFactory.getProp(this,A.e,1,null,this),E.h=PropertyFactory.getProp(this,A.h||{k:0},0,.01,this),E.a=PropertyFactory.getProp(this,A.a||{k:0},0,degToRads,this),E.g=new GradientProperty(this,A.g,this)),E.o=PropertyFactory.getProp(this,A.o,0,.01,this),A.ty==="st"||A.ty==="gs"){if(T.lc=lineCapEnum[A.lc||2],T.lj=lineJoinEnum[A.lj||2],A.lj==1&&(T.ml=A.ml),E.w=PropertyFactory.getProp(this,A.w,0,null,this),E.w.k||(T.wi=E.w.v),A.d){var C=new DashProperty(this,A.d,"canvas",this);E.d=C,E.d.k||(T.da=E.d.dashArray,T.do=E.d.dashoffset[0])}}else T.r=A.r===2?"evenodd":"nonzero";return this.stylesList.push(T),E.style=T,E},CVShapeElement.prototype.createGroupElement=function(){var A={it:[],prevViewData:[]};return A},CVShapeElement.prototype.createTransformElement=function(A){var _={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,A.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,A,this)}};return _},CVShapeElement.prototype.createShapeElement=function(A){var _=new CVShapeData(this,A,this.stylesList,this.transformsManager);return this.shapes.push(_),this.addShapeToModifiers(_),_},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var A,_=this.itemsData.length;for(A=0;A<_;A+=1)this.prevViewData[A]=this.itemsData[A];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),_=this.dynamicProperties.length,A=0;A<_;A+=1)this.dynamicProperties[A].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(A){var _,T=this.stylesList.length;for(_=0;_<T;_+=1)this.stylesList[_].closed||this.stylesList[_].transforms.push(A)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var A,_=this.stylesList.length;for(A=0;A<_;A+=1)this.stylesList[A].closed||this.stylesList[A].transforms.pop()},CVShapeElement.prototype.closeStyles=function(A){var _,T=A.length;for(_=0;_<T;_+=1)A[_].closed=!0},CVShapeElement.prototype.searchShapes=function(A,_,T,E,C){var P,I=A.length-1,F,R,B=[],O=[],V,L,D,U=[].concat(C);for(P=I;P>=0;P-=1){if(V=this.searchProcessedElement(A[P]),V?_[P]=T[V-1]:A[P]._shouldRender=E,A[P].ty==="fl"||A[P].ty==="st"||A[P].ty==="gf"||A[P].ty==="gs")V?_[P].style.closed=!1:_[P]=this.createStyleElement(A[P],U),B.push(_[P].style);else if(A[P].ty==="gr"){if(!V)_[P]=this.createGroupElement(A[P]);else for(R=_[P].it.length,F=0;F<R;F+=1)_[P].prevViewData[F]=_[P].it[F];this.searchShapes(A[P].it,_[P].it,_[P].prevViewData,E,U)}else A[P].ty==="tr"?(V||(D=this.createTransformElement(A[P]),_[P]=D),U.push(_[P]),this.addTransformToStyleList(_[P])):A[P].ty==="sh"||A[P].ty==="rc"||A[P].ty==="el"||A[P].ty==="sr"?V||(_[P]=this.createShapeElement(A[P])):A[P].ty==="tm"||A[P].ty==="rd"||A[P].ty==="pb"||A[P].ty==="zz"||A[P].ty==="op"?(V?(L=_[P],L.closed=!1):(L=ShapeModifiers.getModifier(A[P].ty),L.init(this,A[P]),_[P]=L,this.shapeModifiers.push(L)),O.push(L)):A[P].ty==="rp"&&(V?(L=_[P],L.closed=!0):(L=ShapeModifiers.getModifier(A[P].ty),_[P]=L,L.init(this,A,P,_),this.shapeModifiers.push(L),E=!1),O.push(L));this.addProcessedElement(A[P],P+1)}for(this.removeTransformFromStyleList(),this.closeStyles(B),I=O.length,P=0;P<I;P+=1)O[P].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(A,_){(A._opMdf||_.op._mdf||this._isFirstFrame)&&(_.opacity=A.opacity,_.opacity*=_.op.v,_._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var A,_=this.stylesList.length,T,E,C,P,I,F,R=this.globalData.renderer,B=this.globalData.canvasContext,O,V;for(A=0;A<_;A+=1)if(V=this.stylesList[A],O=V.type,!((O==="st"||O==="gs")&&V.wi===0||!V.data._shouldRender||V.coOp===0||this.globalData.currentGlobalAlpha===0)){for(R.save(),I=V.elements,O==="st"||O==="gs"?(R.ctxStrokeStyle(O==="st"?V.co:V.grd),R.ctxLineWidth(V.wi),R.ctxLineCap(V.lc),R.ctxLineJoin(V.lj),R.ctxMiterLimit(V.ml||0)):R.ctxFillStyle(O==="fl"?V.co:V.grd),R.ctxOpacity(V.coOp),O!=="st"&&O!=="gs"&&B.beginPath(),R.ctxTransform(V.preTransforms.finalTransform.props),E=I.length,T=0;T<E;T+=1){for((O==="st"||O==="gs")&&(B.beginPath(),V.da&&(B.setLineDash(V.da),B.lineDashOffset=V.do)),F=I[T].trNodes,P=F.length,C=0;C<P;C+=1)F[C].t==="m"?B.moveTo(F[C].p[0],F[C].p[1]):F[C].t==="c"?B.bezierCurveTo(F[C].pts[0],F[C].pts[1],F[C].pts[2],F[C].pts[3],F[C].pts[4],F[C].pts[5]):B.closePath();(O==="st"||O==="gs")&&(R.ctxStroke(),V.da&&B.setLineDash(this.dashResetter))}O!=="st"&&O!=="gs"&&this.globalData.renderer.ctxFill(V.r),R.restore()}},CVShapeElement.prototype.renderShape=function(A,_,T,E){var C,P=_.length-1,I;for(I=A,C=P;C>=0;C-=1)_[C].ty==="tr"?(I=T[C].transform,this.renderShapeTransform(A,I)):_[C].ty==="sh"||_[C].ty==="el"||_[C].ty==="rc"||_[C].ty==="sr"?this.renderPath(_[C],T[C]):_[C].ty==="fl"?this.renderFill(_[C],T[C],I):_[C].ty==="st"?this.renderStroke(_[C],T[C],I):_[C].ty==="gf"||_[C].ty==="gs"?this.renderGradientFill(_[C],T[C],I):_[C].ty==="gr"?this.renderShape(I,_[C].it,T[C].it):_[C].ty;E&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(A,_){if(this._isFirstFrame||_._mdf||A.transforms._mdf){var T=A.trNodes,E=_.paths,C,P,I,F=E._length;T.length=0;var R=A.transforms.finalTransform;for(I=0;I<F;I+=1){var B=E.shapes[I];if(B&&B.v){for(P=B._length,C=1;C<P;C+=1)C===1&&T.push({t:"m",p:R.applyToPointArray(B.v[0][0],B.v[0][1],0)}),T.push({t:"c",pts:R.applyToTriplePoints(B.o[C-1],B.i[C],B.v[C])});P===1&&T.push({t:"m",p:R.applyToPointArray(B.v[0][0],B.v[0][1],0)}),B.c&&P&&(T.push({t:"c",pts:R.applyToTriplePoints(B.o[C-1],B.i[0],B.v[0])}),T.push({t:"z"}))}}A.trNodes=T}},CVShapeElement.prototype.renderPath=function(A,_){if(A.hd!==!0&&A._shouldRender){var T,E=_.styledShapes.length;for(T=0;T<E;T+=1)this.renderStyledShape(_.styledShapes[T],_.sh)}},CVShapeElement.prototype.renderFill=function(A,_,T){var E=_.style;(_.c._mdf||this._isFirstFrame)&&(E.co="rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")"),(_.o._mdf||T._opMdf||this._isFirstFrame)&&(E.coOp=_.o.v*T.opacity)},CVShapeElement.prototype.renderGradientFill=function(A,_,T){var E=_.style,C;if(!E.grd||_.g._mdf||_.s._mdf||_.e._mdf||A.t!==1&&(_.h._mdf||_.a._mdf)){var P=this.globalData.canvasContext,I=_.s.v,F=_.e.v;if(A.t===1)C=P.createLinearGradient(I[0],I[1],F[0],F[1]);else{var R=Math.sqrt(Math.pow(I[0]-F[0],2)+Math.pow(I[1]-F[1],2)),B=Math.atan2(F[1]-I[1],F[0]-I[0]),O=_.h.v;O>=1?O=.99:O<=-1&&(O=-.99);var V=R*O,L=Math.cos(B+_.a.v)*V+I[0],D=Math.sin(B+_.a.v)*V+I[1];C=P.createRadialGradient(L,D,0,I[0],I[1],R)}var U,G=A.g.p,X=_.g.c,z=1;for(U=0;U<G;U+=1)_.g._hasOpacity&&_.g._collapsable&&(z=_.g.o[U*2+1]),C.addColorStop(X[U*4]/100,"rgba("+X[U*4+1]+","+X[U*4+2]+","+X[U*4+3]+","+z+")");E.grd=C}E.coOp=_.o.v*T.opacity},CVShapeElement.prototype.renderStroke=function(A,_,T){var E=_.style,C=_.d;C&&(C._mdf||this._isFirstFrame)&&(E.da=C.dashArray,E.do=C.dashoffset[0]),(_.c._mdf||this._isFirstFrame)&&(E.co="rgb("+bmFloor(_.c.v[0])+","+bmFloor(_.c.v[1])+","+bmFloor(_.c.v[2])+")"),(_.o._mdf||T._opMdf||this._isFirstFrame)&&(E.coOp=_.o.v*T.opacity),(_.w._mdf||this._isFirstFrame)&&(E.wi=_.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(A,_,T){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var A=this.textProperty.currentData;this.renderedLetters=createSizedArray(A.l?A.l.length:0);var _=!1;A.fc?(_=!0,this.values.fill=this.buildColor(A.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=_;var T=!1;A.sc&&(T=!0,this.values.stroke=this.buildColor(A.sc),this.values.sWidth=A.sw);var E=this.globalData.fontManager.getFontByName(A.f),C,P,I=A.l,F=this.mHelper;this.stroke=T,this.values.fValue=A.finalSize+"px "+this.globalData.fontManager.getFontByName(A.f).fFamily,P=A.finalText.length;var R,B,O,V,L,D,U,G,X,z,Y=this.data.singleShape,W=A.tr*.001*A.finalSize,q=0,K=0,J=!0,Z=0;for(C=0;C<P;C+=1){R=this.globalData.fontManager.getCharData(A.finalText[C],E.fStyle,this.globalData.fontManager.getFontByName(A.f).fFamily),B=R&&R.data||{},F.reset(),Y&&I[C].n&&(q=-W,K+=A.yOffset,K+=J?1:0,J=!1),L=B.shapes?B.shapes[0].it:[],U=L.length,F.scale(A.finalSize/100,A.finalSize/100),Y&&this.applyTextPropertiesToMatrix(A,F,I[C].line,q,K),X=createSizedArray(U-1);var se=0;for(D=0;D<U;D+=1)if(L[D].ty==="sh"){for(V=L[D].ks.k.i.length,G=L[D].ks.k,z=[],O=1;O<V;O+=1)O===1&&z.push(F.applyToX(G.v[0][0],G.v[0][1],0),F.applyToY(G.v[0][0],G.v[0][1],0)),z.push(F.applyToX(G.o[O-1][0],G.o[O-1][1],0),F.applyToY(G.o[O-1][0],G.o[O-1][1],0),F.applyToX(G.i[O][0],G.i[O][1],0),F.applyToY(G.i[O][0],G.i[O][1],0),F.applyToX(G.v[O][0],G.v[O][1],0),F.applyToY(G.v[O][0],G.v[O][1],0));z.push(F.applyToX(G.o[O-1][0],G.o[O-1][1],0),F.applyToY(G.o[O-1][0],G.o[O-1][1],0),F.applyToX(G.i[0][0],G.i[0][1],0),F.applyToY(G.i[0][0],G.i[0][1],0),F.applyToX(G.v[0][0],G.v[0][1],0),F.applyToY(G.v[0][0],G.v[0][1],0)),X[se]=z,se+=1}Y&&(q+=I[C].l,q+=W),this.textSpans[Z]?this.textSpans[Z].elem=X:this.textSpans[Z]={elem:X},Z+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var A=this.canvasContext;A.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var _,T,E,C,P,I,F=this.textAnimator.renderedLetters,R=this.textProperty.currentData.l;T=R.length;var B,O=null,V=null,L=null,D,U,G=this.globalData.renderer;for(_=0;_<T;_+=1)if(!R[_].n){if(B=F[_],B&&(G.save(),G.ctxTransform(B.p),G.ctxOpacity(B.o)),this.fill){for(B&&B.fc?O!==B.fc&&(G.ctxFillStyle(B.fc),O=B.fc):O!==this.values.fill&&(O=this.values.fill,G.ctxFillStyle(this.values.fill)),D=this.textSpans[_].elem,C=D.length,this.globalData.canvasContext.beginPath(),E=0;E<C;E+=1)for(U=D[E],I=U.length,this.globalData.canvasContext.moveTo(U[0],U[1]),P=2;P<I;P+=6)this.globalData.canvasContext.bezierCurveTo(U[P],U[P+1],U[P+2],U[P+3],U[P+4],U[P+5]);this.globalData.canvasContext.closePath(),G.ctxFill()}if(this.stroke){for(B&&B.sw?L!==B.sw&&(L=B.sw,G.ctxLineWidth(B.sw)):L!==this.values.sWidth&&(L=this.values.sWidth,G.ctxLineWidth(this.values.sWidth)),B&&B.sc?V!==B.sc&&(V=B.sc,G.ctxStrokeStyle(B.sc)):V!==this.values.stroke&&(V=this.values.stroke,G.ctxStrokeStyle(this.values.stroke)),D=this.textSpans[_].elem,C=D.length,this.globalData.canvasContext.beginPath(),E=0;E<C;E+=1)for(U=D[E],I=U.length,this.globalData.canvasContext.moveTo(U[0],U[1]),P=2;P<I;P+=6)this.globalData.canvasContext.bezierCurveTo(U[P],U[P+1],U[P+2],U[P+3],U[P+4],U[P+5]);this.globalData.canvasContext.closePath(),G.ctxStroke()}B&&this.globalData.renderer.restore()}};function CVImageElement(A,_,T){this.assetData=_.getAssetData(A.refId),this.img=_.imageLoader.getAsset(this.assetData),this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var A=createTag("canvas");A.width=this.assetData.w,A.height=this.assetData.h;var _=A.getContext("2d"),T=this.img.width,E=this.img.height,C=T/E,P=this.assetData.w/this.assetData.h,I,F,R=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;C>P&&R==="xMidYMid slice"||C<P&&R!=="xMidYMid slice"?(F=E,I=F*P):(I=T,F=I/P),_.drawImage(this.img,(T-I)/2,(E-F)/2,I,F,0,0,this.assetData.w,this.assetData.h),this.img=A}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(A,_,T){this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(A){return new CVShapeElement(A,this.globalData,this)},CanvasRendererBase.prototype.createText=function(A){return new CVTextElement(A,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(A){return new CVImageElement(A,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(A){return new CVSolidElement(A,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(A){A[0]===1&&A[1]===0&&A[4]===0&&A[5]===1&&A[12]===0&&A[13]===0||this.canvasContext.transform(A[0],A[1],A[4],A[5],A[12],A[13])},CanvasRendererBase.prototype.ctxOpacity=function(A){this.canvasContext.globalAlpha*=A<0?0:A},CanvasRendererBase.prototype.ctxFillStyle=function(A){this.canvasContext.fillStyle=A},CanvasRendererBase.prototype.ctxStrokeStyle=function(A){this.canvasContext.strokeStyle=A},CanvasRendererBase.prototype.ctxLineWidth=function(A){this.canvasContext.lineWidth=A},CanvasRendererBase.prototype.ctxLineCap=function(A){this.canvasContext.lineCap=A},CanvasRendererBase.prototype.ctxLineJoin=function(A){this.canvasContext.lineJoin=A},CanvasRendererBase.prototype.ctxMiterLimit=function(A){this.canvasContext.miterLimit=A},CanvasRendererBase.prototype.ctxFill=function(A){this.canvasContext.fill(A)},CanvasRendererBase.prototype.ctxFillRect=function(A,_,T,E){this.canvasContext.fillRect(A,_,T,E)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(A){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}A&&(this.globalData.blendMode="source-over"),this.contextData.restore(A)},CanvasRendererBase.prototype.configAnimation=function(A){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var _=this.animationItem.container.style;_.width="100%",_.height="100%";var T="0px 0px 0px";_.transformOrigin=T,_.mozTransformOrigin=T,_.webkitTransformOrigin=T,_["-webkit-transform"]=T,_.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=A,this.layers=A.layers,this.transformCanvas={w:A.w,h:A.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(A,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(A.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(A,_){this.reset();var T,E;A?(T=A,E=_,this.canvasContext.canvas.width=T,this.canvasContext.canvas.height=E):(this.animationItem.wrapper&&this.animationItem.container?(T=this.animationItem.wrapper.offsetWidth,E=this.animationItem.wrapper.offsetHeight):(T=this.canvasContext.canvas.width,E=this.canvasContext.canvas.height),this.canvasContext.canvas.width=T*this.renderConfig.dpr,this.canvasContext.canvas.height=E*this.renderConfig.dpr);var C,P;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var I=this.renderConfig.preserveAspectRatio.split(" "),F=I[1]||"meet",R=I[0]||"xMidYMid",B=R.substr(0,4),O=R.substr(4);C=T/E,P=this.transformCanvas.w/this.transformCanvas.h,P>C&&F==="meet"||P<C&&F==="slice"?(this.transformCanvas.sx=T/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=T/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=E/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.h/this.renderConfig.dpr)),B==="xMid"&&(P<C&&F==="meet"||P>C&&F==="slice")?this.transformCanvas.tx=(T-this.transformCanvas.w*(E/this.transformCanvas.h))/2*this.renderConfig.dpr:B==="xMax"&&(P<C&&F==="meet"||P>C&&F==="slice")?this.transformCanvas.tx=(T-this.transformCanvas.w*(E/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,O==="YMid"&&(P>C&&F==="meet"||P<C&&F==="slice")?this.transformCanvas.ty=(E-this.transformCanvas.h*(T/this.transformCanvas.w))/2*this.renderConfig.dpr:O==="YMax"&&(P>C&&F==="meet"||P<C&&F==="slice")?this.transformCanvas.ty=(E-this.transformCanvas.h*(T/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=T/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var A,_=this.layers?this.layers.length:0;for(A=_-1;A>=0;A-=1)this.elements[A]&&this.elements[A].destroy&&this.elements[A].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(A,_){if(!(this.renderedFrame===A&&this.renderConfig.clearCanvas===!0&&!_||this.destroyed||A===-1)){this.renderedFrame=A,this.globalData.frameNum=A-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||_,this.globalData.projectInterface.currentFrame=A;var T,E=this.layers.length;for(this.completeLayers||this.checkLayers(A),T=E-1;T>=0;T-=1)(this.completeLayers||this.elements[T])&&this.elements[T].prepareFrame(A-this.layers[T].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),T=E-1;T>=0;T-=1)(this.completeLayers||this.elements[T])&&this.elements[T].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(A){var _=this.elements;if(!(_[A]||this.layers[A].ty===99)){var T=this.createItem(this.layers[A],this,this.globalData);_[A]=T,T.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var A=this.pendingElements.pop();A.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var A,_=15;for(A=0;A<_;A+=1){var T=new CanvasContext;this.stack[A]=T}this._length=_,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var A=this._length*2,_=0;for(_=this._length;_<A;_+=1)this.stack[_]=new CanvasContext;this._length=A},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(A){this.cArrPos-=1;var _=this.stack[this.cArrPos],T=_.transform,E,C=this.cTr.props;for(E=0;E<16;E+=1)C[E]=T[E];if(A){this.nativeContext.restore();var P=this.stack[this.cArrPos+1];this.appliedFillStyle=P.fillStyle,this.appliedStrokeStyle=P.strokeStyle,this.appliedLineWidth=P.lineWidth,this.appliedLineCap=P.lineCap,this.appliedLineJoin=P.lineJoin,this.appliedMiterLimit=P.miterLimit}this.nativeContext.setTransform(T[0],T[1],T[4],T[5],T[12],T[13]),(A||_.opacity!==-1&&this.currentOpacity!==_.opacity)&&(this.nativeContext.globalAlpha=_.opacity,this.currentOpacity=_.opacity),this.currentFillStyle=_.fillStyle,this.currentStrokeStyle=_.strokeStyle,this.currentLineWidth=_.lineWidth,this.currentLineCap=_.lineCap,this.currentLineJoin=_.lineJoin,this.currentMiterLimit=_.miterLimit},CVContextData.prototype.save=function(A){A&&this.nativeContext.save();var _=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var T=this.stack[this.cArrPos],E;for(E=0;E<16;E+=1)T.transform[E]=_[E];this.cArrPos+=1;var C=this.stack[this.cArrPos];C.opacity=T.opacity,C.fillStyle=T.fillStyle,C.strokeStyle=T.strokeStyle,C.lineWidth=T.lineWidth,C.lineCap=T.lineCap,C.lineJoin=T.lineJoin,C.miterLimit=T.miterLimit},CVContextData.prototype.setOpacity=function(A){this.stack[this.cArrPos].opacity=A},CVContextData.prototype.setContext=function(A){this.nativeContext=A},CVContextData.prototype.fillStyle=function(A){this.stack[this.cArrPos].fillStyle!==A&&(this.currentFillStyle=A,this.stack[this.cArrPos].fillStyle=A)},CVContextData.prototype.strokeStyle=function(A){this.stack[this.cArrPos].strokeStyle!==A&&(this.currentStrokeStyle=A,this.stack[this.cArrPos].strokeStyle=A)},CVContextData.prototype.lineWidth=function(A){this.stack[this.cArrPos].lineWidth!==A&&(this.currentLineWidth=A,this.stack[this.cArrPos].lineWidth=A)},CVContextData.prototype.lineCap=function(A){this.stack[this.cArrPos].lineCap!==A&&(this.currentLineCap=A,this.stack[this.cArrPos].lineCap=A)},CVContextData.prototype.lineJoin=function(A){this.stack[this.cArrPos].lineJoin!==A&&(this.currentLineJoin=A,this.stack[this.cArrPos].lineJoin=A)},CVContextData.prototype.miterLimit=function(A){this.stack[this.cArrPos].miterLimit!==A&&(this.currentMiterLimit=A,this.stack[this.cArrPos].miterLimit=A)},CVContextData.prototype.transform=function(A){this.transformMat.cloneFromProps(A);var _=this.cTr;this.transformMat.multiply(_),_.cloneFromProps(this.transformMat.props);var T=_.props;this.nativeContext.setTransform(T[0],T[1],T[4],T[5],T[12],T[13])},CVContextData.prototype.opacity=function(A){var _=this.stack[this.cArrPos].opacity;_*=A<0?0:A,this.stack[this.cArrPos].opacity!==_&&(this.currentOpacity!==A&&(this.nativeContext.globalAlpha=A,this.currentOpacity=A),this.stack[this.cArrPos].opacity=_)},CVContextData.prototype.fill=function(A){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(A)},CVContextData.prototype.fillRect=function(A,_,T,E){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(A,_,T,E)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(A,_,T){this.completeLayers=!1,this.layers=A.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(A,_,T),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,_.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var A=this.canvasContext;A.beginPath(),A.moveTo(0,0),A.lineTo(this.data.w,0),A.lineTo(this.data.w,this.data.h),A.lineTo(0,this.data.h),A.lineTo(0,0),A.clip();var _,T=this.layers.length;for(_=T-1;_>=0;_-=1)(this.completeLayers||this.elements[_])&&this.elements[_].renderFrame()},CVCompElement.prototype.destroy=function(){var A,_=this.layers.length;for(A=_-1;A>=0;A-=1)this.elements[A]&&this.elements[A].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(A){return new CVCompElement(A,this.globalData,this)};function CanvasRenderer(A,_){this.animationItem=A,this.renderConfig={clearCanvas:_&&_.clearCanvas!==void 0?_.clearCanvas:!0,context:_&&_.context||null,progressiveLoad:_&&_.progressiveLoad||!1,preserveAspectRatio:_&&_.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:_&&_.contentVisibility||"visible",className:_&&_.className||"",id:_&&_.id||"",runExpressions:!_||_.runExpressions===void 0||_.runExpressions},this.renderConfig.dpr=_&&_.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=_&&_.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(A){return new CVCompElement(A,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var _=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var T=this.finalTransform.mat.toCSS();_.transform=T,_.webkitTransform=T}this.finalTransform._opMdf&&(_.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(A,_,T){this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var A;this.data.hasMask?(A=createNS("rect"),A.setAttribute("width",this.data.sw),A.setAttribute("height",this.data.sh),A.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(A=createTag("div"),A.style.width=this.data.sw+"px",A.style.height=this.data.sh+"px",A.style.backgroundColor=this.data.sc),this.layerElement.appendChild(A)};function HShapeElement(A,_,T){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(A,_,T),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var A;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),A=this.svgElement;else{A=createNS("svg");var _=this.comp.data?this.comp.data:this.globalData.compSize;A.setAttribute("width",_.w),A.setAttribute("height",_.h),A.appendChild(this.shapesContainer),this.layerElement.appendChild(A)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=A},HShapeElement.prototype.getTransformedPoint=function(A,_){var T,E=A.length;for(T=0;T<E;T+=1)_=A[T].mProps.v.applyToPointArray(_[0],_[1],0);return _},HShapeElement.prototype.calculateShapeBoundingBox=function(A,_){var T=A.sh.v,E=A.transformers,C,P=T._length,I,F,R,B;if(!(P<=1)){for(C=0;C<P-1;C+=1)I=this.getTransformedPoint(E,T.v[C]),F=this.getTransformedPoint(E,T.o[C]),R=this.getTransformedPoint(E,T.i[C+1]),B=this.getTransformedPoint(E,T.v[C+1]),this.checkBounds(I,F,R,B,_);T.c&&(I=this.getTransformedPoint(E,T.v[C]),F=this.getTransformedPoint(E,T.o[C]),R=this.getTransformedPoint(E,T.i[0]),B=this.getTransformedPoint(E,T.v[0]),this.checkBounds(I,F,R,B,_))}},HShapeElement.prototype.checkBounds=function(A,_,T,E,C){this.getBoundsOfCurve(A,_,T,E);var P=this.shapeBoundingBox;C.x=bmMin(P.left,C.x),C.xMax=bmMax(P.right,C.xMax),C.y=bmMin(P.top,C.y),C.yMax=bmMax(P.bottom,C.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(A,_,T,E){for(var C=[[A[0],E[0]],[A[1],E[1]]],P,I,F,R,B,O,V,L=0;L<2;++L)I=6*A[L]-12*_[L]+6*T[L],P=-3*A[L]+9*_[L]-9*T[L]+3*E[L],F=3*_[L]-3*A[L],I|=0,P|=0,F|=0,P===0&&I===0||(P===0?(R=-F/I,R>0&&R<1&&C[L].push(this.calculateF(R,A,_,T,E,L))):(B=I*I-4*F*P,B>=0&&(O=(-I+bmSqrt(B))/(2*P),O>0&&O<1&&C[L].push(this.calculateF(O,A,_,T,E,L)),V=(-I-bmSqrt(B))/(2*P),V>0&&V<1&&C[L].push(this.calculateF(V,A,_,T,E,L)))));this.shapeBoundingBox.left=bmMin.apply(null,C[0]),this.shapeBoundingBox.top=bmMin.apply(null,C[1]),this.shapeBoundingBox.right=bmMax.apply(null,C[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,C[1])},HShapeElement.prototype.calculateF=function(A,_,T,E,C,P){return bmPow(1-A,3)*_[P]+3*bmPow(1-A,2)*A*T[P]+3*(1-A)*bmPow(A,2)*E[P]+bmPow(A,3)*C[P]},HShapeElement.prototype.calculateBoundingBox=function(A,_){var T,E=A.length;for(T=0;T<E;T+=1)A[T]&&A[T].sh?this.calculateShapeBoundingBox(A[T],_):A[T]&&A[T].it?this.calculateBoundingBox(A[T].it,_):A[T]&&A[T].style&&A[T].w&&this.expandStrokeBoundingBox(A[T].w,_)},HShapeElement.prototype.expandStrokeBoundingBox=function(A,_){var T=0;if(A.keyframes){for(var E=0;E<A.keyframes.length;E+=1){var C=A.keyframes[E].s;C>T&&(T=C)}T*=A.mult}else T=A.v*A.mult;_.x-=T,_.xMax+=T,_.y-=T,_.yMax+=T},HShapeElement.prototype.currentBoxContains=function(A){return this.currentBBox.x<=A.x&&this.currentBBox.y<=A.y&&this.currentBBox.width+this.currentBBox.x>=A.x+A.width&&this.currentBBox.height+this.currentBBox.y>=A.y+A.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var A=this.tempBoundingBox,_=999999;if(A.x=_,A.xMax=-_,A.y=_,A.yMax=-_,this.calculateBoundingBox(this.itemsData,A),A.width=A.xMax<A.x?0:A.xMax-A.x,A.height=A.yMax<A.y?0:A.yMax-A.y,this.currentBoxContains(A))return;var T=!1;if(this.currentBBox.w!==A.width&&(this.currentBBox.w=A.width,this.shapeCont.setAttribute("width",A.width),T=!0),this.currentBBox.h!==A.height&&(this.currentBBox.h=A.height,this.shapeCont.setAttribute("height",A.height),T=!0),T||this.currentBBox.x!==A.x||this.currentBBox.y!==A.y){this.currentBBox.w=A.width,this.currentBBox.h=A.height,this.currentBBox.x=A.x,this.currentBBox.y=A.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var E=this.shapeCont.style,C="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";E.transform=C,E.webkitTransform=C}}};function HTextElement(A,_,T){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var A=createNS("g");this.maskedElement.appendChild(A),this.innerElem=A}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var A=this.textProperty.currentData;this.renderedLetters=createSizedArray(A.l?A.l.length:0);var _=this.innerElem.style,T=A.fc?this.buildColor(A.fc):"rgba(0,0,0,0)";_.fill=T,_.color=T,A.sc&&(_.stroke=this.buildColor(A.sc),_.strokeWidth=A.sw+"px");var E=this.globalData.fontManager.getFontByName(A.f);if(!this.globalData.fontManager.chars)if(_.fontSize=A.finalSize+"px",_.lineHeight=A.finalSize+"px",E.fClass)this.innerElem.className=E.fClass;else{_.fontFamily=E.fFamily;var C=A.fWeight,P=A.fStyle;_.fontStyle=P,_.fontWeight=C}var I,F,R=A.l;F=R.length;var B,O,V,L=this.mHelper,D,U="",G=0;for(I=0;I<F;I+=1){if(this.globalData.fontManager.chars?(this.textPaths[G]?B=this.textPaths[G]:(B=createNS("path"),B.setAttribute("stroke-linecap",lineCapEnum[1]),B.setAttribute("stroke-linejoin",lineJoinEnum[2]),B.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[G]?(O=this.textSpans[G],V=O.children[0]):(O=createTag("div"),O.style.lineHeight=0,V=createNS("svg"),V.appendChild(B),styleDiv(O)))):this.isMasked?B=this.textPaths[G]?this.textPaths[G]:createNS("text"):this.textSpans[G]?(O=this.textSpans[G],B=this.textPaths[G]):(O=createTag("span"),styleDiv(O),B=createTag("span"),styleDiv(B),O.appendChild(B)),this.globalData.fontManager.chars){var X=this.globalData.fontManager.getCharData(A.finalText[I],E.fStyle,this.globalData.fontManager.getFontByName(A.f).fFamily),z;if(X?z=X.data:z=null,L.reset(),z&&z.shapes&&z.shapes.length&&(D=z.shapes[0].it,L.scale(A.finalSize/100,A.finalSize/100),U=this.createPathShape(L,D),B.setAttribute("d",U)),this.isMasked)this.innerElem.appendChild(B);else{if(this.innerElem.appendChild(O),z&&z.shapes){document.body.appendChild(V);var Y=V.getBBox();V.setAttribute("width",Y.width+2),V.setAttribute("height",Y.height+2),V.setAttribute("viewBox",Y.x-1+" "+(Y.y-1)+" "+(Y.width+2)+" "+(Y.height+2));var W=V.style,q="translate("+(Y.x-1)+"px,"+(Y.y-1)+"px)";W.transform=q,W.webkitTransform=q,R[I].yOffset=Y.y-1}else V.setAttribute("width",1),V.setAttribute("height",1);O.appendChild(V)}}else if(B.textContent=R[I].val,B.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(B);else{this.innerElem.appendChild(O);var K=B.style,J="translate3d(0,"+-A.finalSize/1.2+"px,0)";K.transform=J,K.webkitTransform=J}this.isMasked?this.textSpans[G]=B:this.textSpans[G]=O,this.textSpans[G].style.display="block",this.textPaths[G]=B,G+=1}for(;G<this.textSpans.length;)this.textSpans[G].style.display="none",G+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var A;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),A=this.svgElement.style;var _="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";A.transform=_,A.webkitTransform=_}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var T,E,C=0,P=this.textAnimator.renderedLetters,I=this.textProperty.currentData.l;E=I.length;var F,R,B;for(T=0;T<E;T+=1)I[T].n?C+=1:(R=this.textSpans[T],B=this.textPaths[T],F=P[C],C+=1,F._mdf.m&&(this.isMasked?R.setAttribute("transform",F.m):(R.style.webkitTransform=F.m,R.style.transform=F.m)),R.style.opacity=F.o,F.sw&&F._mdf.sw&&B.setAttribute("stroke-width",F.sw),F.sc&&F._mdf.sc&&B.setAttribute("stroke",F.sc),F.fc&&F._mdf.fc&&(B.setAttribute("fill",F.fc),B.style.color=F.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var O=this.innerElem.getBBox();this.currentBBox.w!==O.width&&(this.currentBBox.w=O.width,this.svgElement.setAttribute("width",O.width)),this.currentBBox.h!==O.height&&(this.currentBBox.h=O.height,this.svgElement.setAttribute("height",O.height));var V=1;if(this.currentBBox.w!==O.width+V*2||this.currentBBox.h!==O.height+V*2||this.currentBBox.x!==O.x-V||this.currentBBox.y!==O.y-V){this.currentBBox.w=O.width+V*2,this.currentBBox.h=O.height+V*2,this.currentBBox.x=O.x-V,this.currentBBox.y=O.y-V,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),A=this.svgElement.style;var L="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";A.transform=L,A.webkitTransform=L}}}};function HCameraElement(A,_,T){this.initFrame(),this.initBaseData(A,_,T),this.initHierarchy();var E=PropertyFactory.getProp;if(this.pe=E(this,A.pe,0,0,this),A.ks.p.s?(this.px=E(this,A.ks.p.x,1,0,this),this.py=E(this,A.ks.p.y,1,0,this),this.pz=E(this,A.ks.p.z,1,0,this)):this.p=E(this,A.ks.p,1,0,this),A.ks.a&&(this.a=E(this,A.ks.a,1,0,this)),A.ks.or.k.length&&A.ks.or.k[0].to){var C,P=A.ks.or.k.length;for(C=0;C<P;C+=1)A.ks.or.k[C].to=null,A.ks.or.k[C].ti=null}this.or=E(this,A.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=E(this,A.ks.rx,0,degToRads,this),this.ry=E(this,A.ks.ry,0,degToRads,this),this.rz=E(this,A.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var A,_=this.comp.threeDElements.length,T,E,C;for(A=0;A<_;A+=1)if(T=this.comp.threeDElements[A],T.type==="3d"){E=T.perspectiveElem.style,C=T.container.style;var P=this.pe.v+"px",I="0px 0px 0px",F="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";E.perspective=P,E.webkitPerspective=P,C.transformOrigin=I,C.mozTransformOrigin=I,C.webkitTransformOrigin=I,E.transform=F,E.webkitTransform=F}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var A=this._isFirstFrame,_,T;if(this.hierarchy)for(T=this.hierarchy.length,_=0;_<T;_+=1)A=this.hierarchy[_].finalTransform.mProp._mdf||A;if(A||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(T=this.hierarchy.length-1,_=T;_>=0;_-=1){var E=this.hierarchy[_].finalTransform.mProp;this.mat.translate(-E.p.v[0],-E.p.v[1],E.p.v[2]),this.mat.rotateX(-E.or.v[0]).rotateY(-E.or.v[1]).rotateZ(E.or.v[2]),this.mat.rotateX(-E.rx.v).rotateY(-E.ry.v).rotateZ(E.rz.v),this.mat.scale(1/E.s.v[0],1/E.s.v[1],1/E.s.v[2]),this.mat.translate(E.a.v[0],E.a.v[1],E.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var C;this.p?C=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:C=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var P=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)+Math.pow(C[2],2)),I=[C[0]/P,C[1]/P,C[2]/P],F=Math.sqrt(I[2]*I[2]+I[0]*I[0]),R=Math.atan2(I[1],F),B=Math.atan2(I[0],-I[2]);this.mat.rotateY(B).rotateX(-R)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var O=!this._prevMat.equals(this.mat);if((O||this.pe._mdf)&&this.comp.threeDElements){T=this.comp.threeDElements.length;var V,L,D;for(_=0;_<T;_+=1)if(V=this.comp.threeDElements[_],V.type==="3d"){if(O){var U=this.mat.toCSS();D=V.container.style,D.transform=U,D.webkitTransform=U}this.pe._mdf&&(L=V.perspectiveElem.style,L.perspective=this.pe.v+"px",L.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(A){this.prepareProperties(A,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(A,_,T){this.assetData=_.getAssetData(A.refId),this.initElement(A,_,T)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var A=this.globalData.getAssetsPath(this.assetData),_=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",A),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(_),_.crossOrigin="anonymous",_.src=A,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(A,_){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:_&&_.className||"",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(_&&_.hideOnTransparent===!1),filterSize:{width:_&&_.filterSize&&_.filterSize.width||"400%",height:_&&_.filterSize&&_.filterSize.height||"400%",x:_&&_.filterSize&&_.filterSize.x||"-100%",y:_&&_.filterSize&&_.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var A=this.pendingElements.pop();A.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(A,_){var T=A.getBaseElement();if(T){var E=this.layers[_];if(!E.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(T,_);else{for(var C=0,P,I,F;C<_;)this.elements[C]&&this.elements[C]!==!0&&this.elements[C].getBaseElement&&(I=this.elements[C],F=this.layers[C].ddd?this.getThreeDContainerByPos(C):I.getBaseElement(),P=F||P),C+=1;P?(!E.ddd||!this.supports3d)&&this.layerElement.insertBefore(T,P):(!E.ddd||!this.supports3d)&&this.layerElement.appendChild(T)}else this.addTo3dContainer(T,_)}},HybridRendererBase.prototype.createShape=function(A){return this.supports3d?new HShapeElement(A,this.globalData,this):new SVGShapeElement(A,this.globalData,this)},HybridRendererBase.prototype.createText=function(A){return this.supports3d?new HTextElement(A,this.globalData,this):new SVGTextLottieElement(A,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(A){return this.camera=new HCameraElement(A,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(A){return this.supports3d?new HImageElement(A,this.globalData,this):new IImageElement(A,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(A){return this.supports3d?new HSolidElement(A,this.globalData,this):new ISolidElement(A,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(A){for(var _=0,T=this.threeDElements.length;_<T;){if(this.threeDElements[_].startPos<=A&&this.threeDElements[_].endPos>=A)return this.threeDElements[_].perspectiveElem;_+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(A,_){var T=createTag("div"),E,C;styleDiv(T);var P=createTag("div");if(styleDiv(P),_==="3d"){E=T.style,E.width=this.globalData.compSize.w+"px",E.height=this.globalData.compSize.h+"px";var I="50% 50%";E.webkitTransformOrigin=I,E.mozTransformOrigin=I,E.transformOrigin=I,C=P.style;var F="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";C.transform=F,C.webkitTransform=F}T.appendChild(P);var R={container:P,perspectiveElem:T,startPos:A,endPos:A,type:_};return this.threeDElements.push(R),R},HybridRendererBase.prototype.build3dContainers=function(){var A,_=this.layers.length,T,E="";for(A=0;A<_;A+=1)this.layers[A].ddd&&this.layers[A].ty!==3?(E!=="3d"&&(E="3d",T=this.createThreeDContainer(A,"3d")),T.endPos=Math.max(T.endPos,A)):(E!=="2d"&&(E="2d",T=this.createThreeDContainer(A,"2d")),T.endPos=Math.max(T.endPos,A));for(_=this.threeDElements.length,A=_-1;A>=0;A-=1)this.resizerElem.appendChild(this.threeDElements[A].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(A,_){for(var T=0,E=this.threeDElements.length;T<E;){if(_<=this.threeDElements[T].endPos){for(var C=this.threeDElements[T].startPos,P;C<_;)this.elements[C]&&this.elements[C].getBaseElement&&(P=this.elements[C].getBaseElement()),C+=1;P?this.threeDElements[T].container.insertBefore(A,P):this.threeDElements[T].container.appendChild(A);break}T+=1}},HybridRendererBase.prototype.configAnimation=function(A){var _=createTag("div"),T=this.animationItem.wrapper,E=_.style;E.width=A.w+"px",E.height=A.h+"px",this.resizerElem=_,styleDiv(_),E.transformStyle="flat",E.mozTransformStyle="flat",E.webkitTransformStyle="flat",this.renderConfig.className&&_.setAttribute("class",this.renderConfig.className),T.appendChild(_),E.overflow="hidden";var C=createNS("svg");C.setAttribute("width","1"),C.setAttribute("height","1"),styleDiv(C),this.resizerElem.appendChild(C);var P=createNS("defs");C.appendChild(P),this.data=A,this.setupGlobalData(A,C),this.globalData.defs=P,this.layers=A.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var A,_=this.layers?this.layers.length:0;for(A=0;A<_;A+=1)this.elements[A]&&this.elements[A].destroy&&this.elements[A].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var A=this.animationItem.wrapper.offsetWidth,_=this.animationItem.wrapper.offsetHeight,T=A/_,E=this.globalData.compSize.w/this.globalData.compSize.h,C,P,I,F;E>T?(C=A/this.globalData.compSize.w,P=A/this.globalData.compSize.w,I=0,F=(_-this.globalData.compSize.h*(A/this.globalData.compSize.w))/2):(C=_/this.globalData.compSize.h,P=_/this.globalData.compSize.h,I=(A-this.globalData.compSize.w*(_/this.globalData.compSize.h))/2,F=0);var R=this.resizerElem.style;R.webkitTransform="matrix3d("+C+",0,0,0,0,"+P+",0,0,0,0,1,0,"+I+","+F+",0,1)",R.transform=R.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var A=this.globalData.compSize.w,_=this.globalData.compSize.h,T,E=this.threeDElements.length;for(T=0;T<E;T+=1){var C=this.threeDElements[T].perspectiveElem.style;C.webkitPerspective=Math.sqrt(Math.pow(A,2)+Math.pow(_,2))+"px",C.perspective=C.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(A){var _,T=A.length,E=createTag("div");for(_=0;_<T;_+=1)if(A[_].xt){var C=this.createComp(A[_],E,this.globalData.comp,null);C.initExpressions(),this.globalData.projectInterface.registerComposition(C)}};function HCompElement(A,_,T){this.layers=A.layers,this.supports3d=!A.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(A,_,T),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,_.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(A,_){for(var T=0,E;T<_;)this.elements[T]&&this.elements[T].getBaseElement&&(E=this.elements[T].getBaseElement()),T+=1;E?this.layerElement.insertBefore(A,E):this.layerElement.appendChild(A)},HCompElement.prototype.createComp=function(A){return this.supports3d?new HCompElement(A,this.globalData,this):new SVGCompElement(A,this.globalData,this)};function HybridRenderer(A,_){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:_&&_.className||"",imagePreserveAspectRatio:_&&_.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(_&&_.hideOnTransparent===!1),filterSize:{width:_&&_.filterSize&&_.filterSize.width||"400%",height:_&&_.filterSize&&_.filterSize.height||"400%",x:_&&_.filterSize&&_.filterSize.x||"-100%",y:_&&_.filterSize&&_.filterSize.y||"-100%"},runExpressions:!_||_.runExpressions===void 0||_.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(A){return this.supports3d?new HCompElement(A,this.globalData,this):new SVGCompElement(A,this.globalData,this)};var CompExpressionInterface=function(){return function(A){function _(T){for(var E=0,C=A.layers.length;E<C;){if(A.layers[E].nm===T||A.layers[E].ind===T)return A.elements[E].layerInterface;E+=1}return null}return Object.defineProperty(_,"_name",{value:A.data.nm}),_.layer=_,_.pixelAspect=1,_.height=A.data.h||A.globalData.compSize.h,_.width=A.data.w||A.globalData.compSize.w,_.pixelAspect=1,_.frameDuration=1/A.globalData.frameRate,_.displayStartTime=0,_.numLayers=A.layers.length,_}}();function _typeof$2(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(T){return typeof T}:_typeof$2=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof$2(A)}function seedRandom(A,_){var T=this,E=256,C=6,P=52,I="random",F=_.pow(E,C),R=_.pow(2,P),B=R*2,O=E-1,V;function L(W,q,K){var J=[];q=q===!0?{entropy:!0}:q||{};var Z=X(G(q.entropy?[W,Y(A)]:W===null?z():W,3),J),se=new D(J),ae=function(){for(var ce=se.g(C),he=F,pe=0;ce<R;)ce=(ce+pe)*E,he*=E,pe=se.g(1);for(;ce>=B;)ce/=2,he/=2,pe>>>=1;return(ce+pe)/he};return ae.int32=function(){return se.g(4)|0},ae.quick=function(){return se.g(4)/4294967296},ae.double=ae,X(Y(se.S),A),(q.pass||K||function(ue,ce,he,pe){return pe&&(pe.S&&U(pe,se),ue.state=function(){return U(se,{})}),he?(_[I]=ue,ce):ue})(ae,Z,"global"in q?q.global:this==_,q.state)}_["seed"+I]=L;function D(W){var q,K=W.length,J=this,Z=0,se=J.i=J.j=0,ae=J.S=[];for(K||(W=[K++]);Z<E;)ae[Z]=Z++;for(Z=0;Z<E;Z++)ae[Z]=ae[se=O&se+W[Z%K]+(q=ae[Z])],ae[se]=q;J.g=function(ue){for(var ce,he=0,pe=J.i,ye=J.j,_e=J.S;ue--;)ce=_e[pe=O&pe+1],he=he*E+_e[O&(_e[pe]=_e[ye=O&ye+ce])+(_e[ye]=ce)];return J.i=pe,J.j=ye,he}}function U(W,q){return q.i=W.i,q.j=W.j,q.S=W.S.slice(),q}function G(W,q){var K=[],J=_typeof$2(W),Z;if(q&&J=="object")for(Z in W)try{K.push(G(W[Z],q-1))}catch{}return K.length?K:J=="string"?W:W+"\0"}function X(W,q){for(var K=W+"",J,Z=0;Z<K.length;)q[O&Z]=O&(J^=q[O&Z]*19)+K.charCodeAt(Z++);return Y(q)}function z(){try{var W=new Uint8Array(E);return(T.crypto||T.msCrypto).getRandomValues(W),Y(W)}catch{var q=T.navigator,K=q&&q.plugins;return[+new Date,T,K,T.screen,Y(A)]}}function Y(W){return String.fromCharCode.apply(0,W)}X(_.random(),A)}function initialize$2(A){seedRandom([],A)}var propTypes={SHAPE:"shape"};function _typeof$1(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(T){return typeof T}:_typeof$1=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof$1(A)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(A){return A.constructor===Array||A.constructor===Float32Array}function isNumerable(A,_){return A==="number"||_ instanceof Number||A==="boolean"||A==="string"}function $bm_neg(A){var _=_typeof$1(A);if(_==="number"||A instanceof Number||_==="boolean")return-A;if($bm_isInstanceOfArray(A)){var T,E=A.length,C=[];for(T=0;T<E;T+=1)C[T]=-A[T];return C}return A.propType?A.v:-A}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(A,_){var T=_typeof$1(A),E=_typeof$1(_);if(isNumerable(T,A)&&isNumerable(E,_)||T==="string"||E==="string")return A+_;if($bm_isInstanceOfArray(A)&&isNumerable(E,_))return A=A.slice(0),A[0]+=_,A;if(isNumerable(T,A)&&$bm_isInstanceOfArray(_))return _=_.slice(0),_[0]=A+_[0],_;if($bm_isInstanceOfArray(A)&&$bm_isInstanceOfArray(_)){for(var C=0,P=A.length,I=_.length,F=[];C<P||C<I;)(typeof A[C]=="number"||A[C]instanceof Number)&&(typeof _[C]=="number"||_[C]instanceof Number)?F[C]=A[C]+_[C]:F[C]=_[C]===void 0?A[C]:A[C]||_[C],C+=1;return F}return 0}var add=sum;function sub(A,_){var T=_typeof$1(A),E=_typeof$1(_);if(isNumerable(T,A)&&isNumerable(E,_))return T==="string"&&(A=parseInt(A,10)),E==="string"&&(_=parseInt(_,10)),A-_;if($bm_isInstanceOfArray(A)&&isNumerable(E,_))return A=A.slice(0),A[0]-=_,A;if(isNumerable(T,A)&&$bm_isInstanceOfArray(_))return _=_.slice(0),_[0]=A-_[0],_;if($bm_isInstanceOfArray(A)&&$bm_isInstanceOfArray(_)){for(var C=0,P=A.length,I=_.length,F=[];C<P||C<I;)(typeof A[C]=="number"||A[C]instanceof Number)&&(typeof _[C]=="number"||_[C]instanceof Number)?F[C]=A[C]-_[C]:F[C]=_[C]===void 0?A[C]:A[C]||_[C],C+=1;return F}return 0}function mul(A,_){var T=_typeof$1(A),E=_typeof$1(_),C;if(isNumerable(T,A)&&isNumerable(E,_))return A*_;var P,I;if($bm_isInstanceOfArray(A)&&isNumerable(E,_)){for(I=A.length,C=createTypedArray("float32",I),P=0;P<I;P+=1)C[P]=A[P]*_;return C}if(isNumerable(T,A)&&$bm_isInstanceOfArray(_)){for(I=_.length,C=createTypedArray("float32",I),P=0;P<I;P+=1)C[P]=A*_[P];return C}return 0}function div(A,_){var T=_typeof$1(A),E=_typeof$1(_),C;if(isNumerable(T,A)&&isNumerable(E,_))return A/_;var P,I;if($bm_isInstanceOfArray(A)&&isNumerable(E,_)){for(I=A.length,C=createTypedArray("float32",I),P=0;P<I;P+=1)C[P]=A[P]/_;return C}if(isNumerable(T,A)&&$bm_isInstanceOfArray(_)){for(I=_.length,C=createTypedArray("float32",I),P=0;P<I;P+=1)C[P]=A/_[P];return C}return 0}function mod(A,_){return typeof A=="string"&&(A=parseInt(A,10)),typeof _=="string"&&(_=parseInt(_,10)),A%_}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(A,_,T){if(_>T){var E=T;T=_,_=E}return Math.min(Math.max(A,_),T)}function radiansToDegrees(A){return A/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(A){return A*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(A,_){if(typeof A=="number"||A instanceof Number)return _=_||0,Math.abs(A-_);_||(_=helperLengthArray);var T,E=Math.min(A.length,_.length),C=0;for(T=0;T<E;T+=1)C+=Math.pow(_[T]-A[T],2);return Math.sqrt(C)}function normalize(A){return div(A,length(A))}function rgbToHsl(A){var _=A[0],T=A[1],E=A[2],C=Math.max(_,T,E),P=Math.min(_,T,E),I,F,R=(C+P)/2;if(C===P)I=0,F=0;else{var B=C-P;switch(F=R>.5?B/(2-C-P):B/(C+P),C){case _:I=(T-E)/B+(T<E?6:0);break;case T:I=(E-_)/B+2;break;case E:I=(_-T)/B+4;break}I/=6}return[I,F,R,A[3]]}function hue2rgb(A,_,T){return T<0&&(T+=1),T>1&&(T-=1),T<1/6?A+(_-A)*6*T:T<1/2?_:T<2/3?A+(_-A)*(2/3-T)*6:A}function hslToRgb(A){var _=A[0],T=A[1],E=A[2],C,P,I;if(T===0)C=E,I=E,P=E;else{var F=E<.5?E*(1+T):E+T-E*T,R=2*E-F;C=hue2rgb(R,F,_+1/3),P=hue2rgb(R,F,_),I=hue2rgb(R,F,_-1/3)}return[C,P,I,A[3]]}function linear(A,_,T,E,C){if((E===void 0||C===void 0)&&(E=_,C=T,_=0,T=1),T<_){var P=T;T=_,_=P}if(A<=_)return E;if(A>=T)return C;var I=T===_?0:(A-_)/(T-_);if(!E.length)return E+(C-E)*I;var F,R=E.length,B=createTypedArray("float32",R);for(F=0;F<R;F+=1)B[F]=E[F]+(C[F]-E[F])*I;return B}function random(A,_){if(_===void 0&&(A===void 0?(A=0,_=1):(_=A,A=void 0)),_.length){var T,E=_.length;A||(A=createTypedArray("float32",E));var C=createTypedArray("float32",E),P=BMMath.random();for(T=0;T<E;T+=1)C[T]=A[T]+P*(_[T]-A[T]);return C}A===void 0&&(A=0);var I=BMMath.random();return A+I*(_-A)}function createPath(A,_,T,E){var C,P=A.length,I=shapePool.newElement();I.setPathData(!!E,P);var F=[0,0],R,B;for(C=0;C<P;C+=1)R=_&&_[C]?_[C]:F,B=T&&T[C]?T[C]:F,I.setTripleAt(A[C][0],A[C][1],B[0]+A[C][0],B[1]+A[C][1],R[0]+A[C][0],R[1]+A[C][1],C,!0);return I}function initiateExpression(elem,data,property){function noOp(A){return A}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function A(_,T){var E,C,P=this.pv.length?this.pv.length:1,I=createTypedArray("float32",P);_=5;var F=Math.floor(time*_);for(E=0,C=0;E<F;){for(C=0;C<P;C+=1)I[C]+=-T+T*2*BMMath.random();E+=1}var R=time*_,B=R-Math.floor(R),O=createTypedArray("float32",P);if(P>1){for(C=0;C<P;C+=1)O[C]=this.pv[C]+I[C]+(-T+T*2*BMMath.random())*B;return O}return this.pv+I[0]+(-T+T*2*BMMath.random())*B}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(A,_){return loopIn(A,_,!0)}function loopOutDuration(A,_){return loopOut(A,_,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(A,_){var T=[_[0]-A[0],_[1]-A[1],_[2]-A[2]],E=Math.atan2(T[0],Math.sqrt(T[1]*T[1]+T[2]*T[2]))/degToRads,C=-Math.atan2(T[1],T[2])/degToRads;return[C,E,0]}function easeOut(A,_,T,E,C){return applyEase(easeOutBez,A,_,T,E,C)}function easeIn(A,_,T,E,C){return applyEase(easeInBez,A,_,T,E,C)}function ease(A,_,T,E,C){return applyEase(easeInOutBez,A,_,T,E,C)}function applyEase(A,_,T,E,C,P){C===void 0?(C=T,P=E):_=(_-T)/(E-T),_>1?_=1:_<0&&(_=0);var I=A(_);if($bm_isInstanceOfArray(C)){var F,R=C.length,B=createTypedArray("float32",R);for(F=0;F<R;F+=1)B[F]=(P[F]-C[F])*I+C[F];return B}return(P-C)*I+C}function nearestKey(A){var _,T=data.k.length,E,C;if(!data.k.length||typeof data.k[0]=="number")E=0,C=0;else if(E=-1,A*=elem.comp.globalData.frameRate,A<data.k[0].t)E=1,C=data.k[0].t;else{for(_=0;_<T-1;_+=1)if(A===data.k[_].t){E=_+1,C=data.k[_].t;break}else if(A>data.k[_].t&&A<data.k[_+1].t){A-data.k[_].t>data.k[_+1].t-A?(E=_+2,C=data.k[_+1].t):(E=_+1,C=data.k[_].t);break}E===-1&&(E=_+1,C=data.k[_].t)}var P={};return P.index=E,P.time=C/elem.comp.globalData.frameRate,P}function key(A){var _,T,E;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+A);A-=1,_={time:data.k[A].t/elem.comp.globalData.frameRate,value:[]};var C=Object.prototype.hasOwnProperty.call(data.k[A],"s")?data.k[A].s:data.k[A-1].e;for(E=C.length,T=0;T<E;T+=1)_[T]=C[T],_.value[T]=C[T];return _}function framesToTime(A,_){return _||(_=elem.comp.globalData.frameRate),A/_}function timeToFrames(A,_){return!A&&A!==0&&(A=time),_||(_=elem.comp.globalData.frameRate),A*_}function seedRandom(A){BMMath.seedrandom(randSeed+A)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(A,_){return typeof value=="string"?_===void 0?value.substring(A):value.substring(A,_):""}function substr(A,_){return typeof value=="string"?_===void 0?value.substr(A):value.substr(A,_):""}function posterizeTime(A){time=A===0?0:Math.floor(time*A)/A,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(A){return value=A,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var A={};A.initExpressions=_,A.resetFrame=ExpressionManager.resetFrame;function _(T){var E=0,C=[];function P(){E+=1}function I(){E-=1,E===0&&R()}function F(B){C.indexOf(B)===-1&&C.push(B)}function R(){var B,O=C.length;for(B=0;B<O;B+=1)C[B].release();C.length=0}T.renderer.compInterface=CompExpressionInterface(T.renderer),T.renderer.globalData.projectInterface.registerComposition(T.renderer),T.renderer.globalData.pushExpression=P,T.renderer.globalData.popExpression=I,T.renderer.globalData.registerExpressionProperty=F}return A}(),MaskManagerInterface=function(){function A(T,E){this._mask=T,this._data=E}Object.defineProperty(A.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(A.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var _=function(E){var C=createSizedArray(E.viewData.length),P,I=E.viewData.length;for(P=0;P<I;P+=1)C[P]=new A(E.viewData[P],E.masksProperties[P]);var F=function(B){for(P=0;P<I;){if(E.masksProperties[P].nm===B)return C[P];P+=1}return null};return F};return _}(),ExpressionPropertyInterface=function(){var A={pv:0,v:0,mult:1},_={pv:[0,0,0],v:[0,0,0],mult:1};function T(I,F,R){Object.defineProperty(I,"velocity",{get:function(){return F.getVelocityAtTime(F.comp.currentFrame)}}),I.numKeys=F.keyframes?F.keyframes.length:0,I.key=function(B){if(!I.numKeys)return 0;var O="";"s"in F.keyframes[B-1]?O=F.keyframes[B-1].s:"e"in F.keyframes[B-2]?O=F.keyframes[B-2].e:O=F.keyframes[B-2].s;var V=R==="unidimensional"?new Number(O):Object.assign({},O);return V.time=F.keyframes[B-1].t/F.elem.comp.globalData.frameRate,V.value=R==="unidimensional"?O[0]:O,V},I.valueAtTime=F.getValueAtTime,I.speedAtTime=F.getSpeedAtTime,I.velocityAtTime=F.getVelocityAtTime,I.propertyGroup=F.propertyGroup}function E(I){(!I||!("pv"in I))&&(I=A);var F=1/I.mult,R=I.pv*F,B=new Number(R);return B.value=R,T(B,I,"unidimensional"),function(){return I.k&&I.getValue(),R=I.v*F,B.value!==R&&(B=new Number(R),B.value=R,T(B,I,"unidimensional")),B}}function C(I){(!I||!("pv"in I))&&(I=_);var F=1/I.mult,R=I.data&&I.data.l||I.pv.length,B=createTypedArray("float32",R),O=createTypedArray("float32",R);return B.value=O,T(B,I,"multidimensional"),function(){I.k&&I.getValue();for(var V=0;V<R;V+=1)O[V]=I.v[V]*F,B[V]=O[V];return B}}function P(){return A}return function(I){return I?I.propType==="unidimensional"?E(I):C(I):P}}(),TransformExpressionInterface=function(){return function(A){function _(I){switch(I){case"scale":case"Scale":case"ADBE Scale":case 6:return _.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return _.rotation;case"ADBE Rotate X":return _.xRotation;case"ADBE Rotate Y":return _.yRotation;case"position":case"Position":case"ADBE Position":case 2:return _.position;case"ADBE Position_0":return _.xPosition;case"ADBE Position_1":return _.yPosition;case"ADBE Position_2":return _.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return _.anchorPoint;case"opacity":case"Opacity":case 11:return _.opacity;default:return null}}Object.defineProperty(_,"rotation",{get:ExpressionPropertyInterface(A.r||A.rz)}),Object.defineProperty(_,"zRotation",{get:ExpressionPropertyInterface(A.rz||A.r)}),Object.defineProperty(_,"xRotation",{get:ExpressionPropertyInterface(A.rx)}),Object.defineProperty(_,"yRotation",{get:ExpressionPropertyInterface(A.ry)}),Object.defineProperty(_,"scale",{get:ExpressionPropertyInterface(A.s)});var T,E,C,P;return A.p?P=ExpressionPropertyInterface(A.p):(T=ExpressionPropertyInterface(A.px),E=ExpressionPropertyInterface(A.py),A.pz&&(C=ExpressionPropertyInterface(A.pz))),Object.defineProperty(_,"position",{get:function(){return A.p?P():[T(),E(),C?C():0]}}),Object.defineProperty(_,"xPosition",{get:ExpressionPropertyInterface(A.px)}),Object.defineProperty(_,"yPosition",{get:ExpressionPropertyInterface(A.py)}),Object.defineProperty(_,"zPosition",{get:ExpressionPropertyInterface(A.pz)}),Object.defineProperty(_,"anchorPoint",{get:ExpressionPropertyInterface(A.a)}),Object.defineProperty(_,"opacity",{get:ExpressionPropertyInterface(A.o)}),Object.defineProperty(_,"skew",{get:ExpressionPropertyInterface(A.sk)}),Object.defineProperty(_,"skewAxis",{get:ExpressionPropertyInterface(A.sa)}),Object.defineProperty(_,"orientation",{get:ExpressionPropertyInterface(A.or)}),_}}(),LayerExpressionInterface=function(){function A(B){var O=new Matrix;if(B!==void 0){var V=this._elem.finalTransform.mProp.getValueAtTime(B);V.clone(O)}else{var L=this._elem.finalTransform.mProp;L.applyToMatrix(O)}return O}function _(B,O){var V=this.getMatrix(O);return V.props[12]=0,V.props[13]=0,V.props[14]=0,this.applyPoint(V,B)}function T(B,O){var V=this.getMatrix(O);return this.applyPoint(V,B)}function E(B,O){var V=this.getMatrix(O);return V.props[12]=0,V.props[13]=0,V.props[14]=0,this.invertPoint(V,B)}function C(B,O){var V=this.getMatrix(O);return this.invertPoint(V,B)}function P(B,O){if(this._elem.hierarchy&&this._elem.hierarchy.length){var V,L=this._elem.hierarchy.length;for(V=0;V<L;V+=1)this._elem.hierarchy[V].finalTransform.mProp.applyToMatrix(B)}return B.applyToPointArray(O[0],O[1],O[2]||0)}function I(B,O){if(this._elem.hierarchy&&this._elem.hierarchy.length){var V,L=this._elem.hierarchy.length;for(V=0;V<L;V+=1)this._elem.hierarchy[V].finalTransform.mProp.applyToMatrix(B)}return B.inversePoint(O)}function F(B){var O=new Matrix;if(O.reset(),this._elem.finalTransform.mProp.applyToMatrix(O),this._elem.hierarchy&&this._elem.hierarchy.length){var V,L=this._elem.hierarchy.length;for(V=0;V<L;V+=1)this._elem.hierarchy[V].finalTransform.mProp.applyToMatrix(O);return O.inversePoint(B)}return O.inversePoint(B)}function R(){return[1,1,1,1]}return function(B){var O;function V(G){D.mask=new MaskManagerInterface(G,B)}function L(G){D.effect=G}function D(G){switch(G){case"ADBE Root Vectors Group":case"Contents":case 2:return D.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return O;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return D.effect;case"ADBE Text Properties":return D.textInterface;default:return null}}D.getMatrix=A,D.invertPoint=I,D.applyPoint=P,D.toWorld=T,D.toWorldVec=_,D.fromWorld=C,D.fromWorldVec=E,D.toComp=T,D.fromComp=F,D.sampleImage=R,D.sourceRectAtTime=B.sourceRectAtTime.bind(B),D._elem=B,O=TransformExpressionInterface(B.finalTransform.mProp);var U=getDescriptor(O,"anchorPoint");return Object.defineProperties(D,{hasParent:{get:function(){return B.hierarchy.length}},parent:{get:function(){return B.hierarchy[0].layerInterface}},rotation:getDescriptor(O,"rotation"),scale:getDescriptor(O,"scale"),position:getDescriptor(O,"position"),opacity:getDescriptor(O,"opacity"),anchorPoint:U,anchor_point:U,transform:{get:function(){return O}},active:{get:function(){return B.isInRange}}}),D.startTime=B.data.st,D.index=B.data.ind,D.source=B.data.refId,D.height=B.data.ty===0?B.data.h:100,D.width=B.data.ty===0?B.data.w:100,D.inPoint=B.data.ip/B.comp.globalData.frameRate,D.outPoint=B.data.op/B.comp.globalData.frameRate,D._name=B.data.nm,D.registerMaskInterface=V,D.registerEffectsInterface=L,D}}(),propertyGroupFactory=function(){return function(A,_){return function(T){return T=T===void 0?1:T,T<=0?A:_(T-1)}}}(),PropertyInterface=function(){return function(A,_){var T={_name:A};function E(C){return C=C===void 0?1:C,C<=0?T:_(C-1)}return E}}(),EffectsExpressionInterface=function(){var A={createEffectsInterface:_};function _(C,P){if(C.effectsManager){var I=[],F=C.data.ef,R,B=C.effectsManager.effectElements.length;for(R=0;R<B;R+=1)I.push(T(F[R],C.effectsManager.effectElements[R],P,C));var O=C.data.ef||[],V=function(D){for(R=0,B=O.length;R<B;){if(D===O[R].nm||D===O[R].mn||D===O[R].ix)return I[R];R+=1}return null};return Object.defineProperty(V,"numProperties",{get:function(){return O.length}}),V}return null}function T(C,P,I,F){function R(D){for(var U=C.ef,G=0,X=U.length;G<X;){if(D===U[G].nm||D===U[G].mn||D===U[G].ix)return U[G].ty===5?O[G]:O[G]();G+=1}throw new Error}var B=propertyGroupFactory(R,I),O=[],V,L=C.ef.length;for(V=0;V<L;V+=1)C.ef[V].ty===5?O.push(T(C.ef[V],P.effectElements[V],P.effectElements[V].propertyGroup,F)):O.push(E(P.effectElements[V],C.ef[V].ty,F,B));return C.mn==="ADBE Color Control"&&Object.defineProperty(R,"color",{get:function(){return O[0]()}}),Object.defineProperties(R,{numProperties:{get:function(){return C.np}},_name:{value:C.nm},propertyGroup:{value:B}}),R.enabled=C.en!==0,R.active=R.enabled,R}function E(C,P,I,F){var R=ExpressionPropertyInterface(C.p);function B(){return P===10?I.comp.compInterface(C.p.v):R()}return C.p.setGroupProperty&&C.p.setGroupProperty(PropertyInterface("",F)),B}return A}(),ShapePathInterface=function(){return function(_,T,E){var C=T.sh;function P(F){return F==="Shape"||F==="shape"||F==="Path"||F==="path"||F==="ADBE Vector Shape"||F===2?P.path:null}var I=propertyGroupFactory(P,E);return C.setGroupProperty(PropertyInterface("Path",I)),Object.defineProperties(P,{path:{get:function(){return C.k&&C.getValue(),C}},shape:{get:function(){return C.k&&C.getValue(),C}},_name:{value:_.nm},ix:{value:_.ix},propertyIndex:{value:_.ix},mn:{value:_.mn},propertyGroup:{value:E}}),P}}(),ShapeExpressionInterface=function(){function A(U,G,X){var z=[],Y,W=U?U.length:0;for(Y=0;Y<W;Y+=1)U[Y].ty==="gr"?z.push(T(U[Y],G[Y],X)):U[Y].ty==="fl"?z.push(E(U[Y],G[Y],X)):U[Y].ty==="st"?z.push(I(U[Y],G[Y],X)):U[Y].ty==="tm"?z.push(F(U[Y],G[Y],X)):U[Y].ty==="tr"||(U[Y].ty==="el"?z.push(B(U[Y],G[Y],X)):U[Y].ty==="sr"?z.push(O(U[Y],G[Y],X)):U[Y].ty==="sh"?z.push(ShapePathInterface(U[Y],G[Y],X)):U[Y].ty==="rc"?z.push(V(U[Y],G[Y],X)):U[Y].ty==="rd"?z.push(L(U[Y],G[Y],X)):U[Y].ty==="rp"?z.push(D(U[Y],G[Y],X)):U[Y].ty==="gf"?z.push(C(U[Y],G[Y],X)):z.push(P(U[Y],G[Y])));return z}function _(U,G,X){var z,Y=function(K){for(var J=0,Z=z.length;J<Z;){if(z[J]._name===K||z[J].mn===K||z[J].propertyIndex===K||z[J].ix===K||z[J].ind===K)return z[J];J+=1}return typeof K=="number"?z[K-1]:null};Y.propertyGroup=propertyGroupFactory(Y,X),z=A(U.it,G.it,Y.propertyGroup),Y.numProperties=z.length;var W=R(U.it[U.it.length-1],G.it[G.it.length-1],Y.propertyGroup);return Y.transform=W,Y.propertyIndex=U.cix,Y._name=U.nm,Y}function T(U,G,X){var z=function(K){switch(K){case"ADBE Vectors Group":case"Contents":case 2:return z.content;default:return z.transform}};z.propertyGroup=propertyGroupFactory(z,X);var Y=_(U,G,z.propertyGroup),W=R(U.it[U.it.length-1],G.it[G.it.length-1],z.propertyGroup);return z.content=Y,z.transform=W,Object.defineProperty(z,"_name",{get:function(){return U.nm}}),z.numProperties=U.np,z.propertyIndex=U.ix,z.nm=U.nm,z.mn=U.mn,z}function E(U,G,X){function z(Y){return Y==="Color"||Y==="color"?z.color:Y==="Opacity"||Y==="opacity"?z.opacity:null}return Object.defineProperties(z,{color:{get:ExpressionPropertyInterface(G.c)},opacity:{get:ExpressionPropertyInterface(G.o)},_name:{value:U.nm},mn:{value:U.mn}}),G.c.setGroupProperty(PropertyInterface("Color",X)),G.o.setGroupProperty(PropertyInterface("Opacity",X)),z}function C(U,G,X){function z(Y){return Y==="Start Point"||Y==="start point"?z.startPoint:Y==="End Point"||Y==="end point"?z.endPoint:Y==="Opacity"||Y==="opacity"?z.opacity:null}return Object.defineProperties(z,{startPoint:{get:ExpressionPropertyInterface(G.s)},endPoint:{get:ExpressionPropertyInterface(G.e)},opacity:{get:ExpressionPropertyInterface(G.o)},type:{get:function(){return"a"}},_name:{value:U.nm},mn:{value:U.mn}}),G.s.setGroupProperty(PropertyInterface("Start Point",X)),G.e.setGroupProperty(PropertyInterface("End Point",X)),G.o.setGroupProperty(PropertyInterface("Opacity",X)),z}function P(){function U(){return null}return U}function I(U,G,X){var z=propertyGroupFactory(Z,X),Y=propertyGroupFactory(J,z);function W(se){Object.defineProperty(J,U.d[se].nm,{get:ExpressionPropertyInterface(G.d.dataProps[se].p)})}var q,K=U.d?U.d.length:0,J={};for(q=0;q<K;q+=1)W(q),G.d.dataProps[q].p.setGroupProperty(Y);function Z(se){return se==="Color"||se==="color"?Z.color:se==="Opacity"||se==="opacity"?Z.opacity:se==="Stroke Width"||se==="stroke width"?Z.strokeWidth:null}return Object.defineProperties(Z,{color:{get:ExpressionPropertyInterface(G.c)},opacity:{get:ExpressionPropertyInterface(G.o)},strokeWidth:{get:ExpressionPropertyInterface(G.w)},dash:{get:function(){return J}},_name:{value:U.nm},mn:{value:U.mn}}),G.c.setGroupProperty(PropertyInterface("Color",z)),G.o.setGroupProperty(PropertyInterface("Opacity",z)),G.w.setGroupProperty(PropertyInterface("Stroke Width",z)),Z}function F(U,G,X){function z(W){return W===U.e.ix||W==="End"||W==="end"?z.end:W===U.s.ix?z.start:W===U.o.ix?z.offset:null}var Y=propertyGroupFactory(z,X);return z.propertyIndex=U.ix,G.s.setGroupProperty(PropertyInterface("Start",Y)),G.e.setGroupProperty(PropertyInterface("End",Y)),G.o.setGroupProperty(PropertyInterface("Offset",Y)),z.propertyIndex=U.ix,z.propertyGroup=X,Object.defineProperties(z,{start:{get:ExpressionPropertyInterface(G.s)},end:{get:ExpressionPropertyInterface(G.e)},offset:{get:ExpressionPropertyInterface(G.o)},_name:{value:U.nm}}),z.mn=U.mn,z}function R(U,G,X){function z(W){return U.a.ix===W||W==="Anchor Point"?z.anchorPoint:U.o.ix===W||W==="Opacity"?z.opacity:U.p.ix===W||W==="Position"?z.position:U.r.ix===W||W==="Rotation"||W==="ADBE Vector Rotation"?z.rotation:U.s.ix===W||W==="Scale"?z.scale:U.sk&&U.sk.ix===W||W==="Skew"?z.skew:U.sa&&U.sa.ix===W||W==="Skew Axis"?z.skewAxis:null}var Y=propertyGroupFactory(z,X);return G.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",Y)),G.transform.mProps.p.setGroupProperty(PropertyInterface("Position",Y)),G.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",Y)),G.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",Y)),G.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",Y)),G.transform.mProps.sk&&(G.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",Y)),G.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",Y))),G.transform.op.setGroupProperty(PropertyInterface("Opacity",Y)),Object.defineProperties(z,{opacity:{get:ExpressionPropertyInterface(G.transform.mProps.o)},position:{get:ExpressionPropertyInterface(G.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(G.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(G.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(G.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(G.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(G.transform.mProps.sa)},_name:{value:U.nm}}),z.ty="tr",z.mn=U.mn,z.propertyGroup=X,z}function B(U,G,X){function z(q){return U.p.ix===q?z.position:U.s.ix===q?z.size:null}var Y=propertyGroupFactory(z,X);z.propertyIndex=U.ix;var W=G.sh.ty==="tm"?G.sh.prop:G.sh;return W.s.setGroupProperty(PropertyInterface("Size",Y)),W.p.setGroupProperty(PropertyInterface("Position",Y)),Object.defineProperties(z,{size:{get:ExpressionPropertyInterface(W.s)},position:{get:ExpressionPropertyInterface(W.p)},_name:{value:U.nm}}),z.mn=U.mn,z}function O(U,G,X){function z(q){return U.p.ix===q?z.position:U.r.ix===q?z.rotation:U.pt.ix===q?z.points:U.or.ix===q||q==="ADBE Vector Star Outer Radius"?z.outerRadius:U.os.ix===q?z.outerRoundness:U.ir&&(U.ir.ix===q||q==="ADBE Vector Star Inner Radius")?z.innerRadius:U.is&&U.is.ix===q?z.innerRoundness:null}var Y=propertyGroupFactory(z,X),W=G.sh.ty==="tm"?G.sh.prop:G.sh;return z.propertyIndex=U.ix,W.or.setGroupProperty(PropertyInterface("Outer Radius",Y)),W.os.setGroupProperty(PropertyInterface("Outer Roundness",Y)),W.pt.setGroupProperty(PropertyInterface("Points",Y)),W.p.setGroupProperty(PropertyInterface("Position",Y)),W.r.setGroupProperty(PropertyInterface("Rotation",Y)),U.ir&&(W.ir.setGroupProperty(PropertyInterface("Inner Radius",Y)),W.is.setGroupProperty(PropertyInterface("Inner Roundness",Y))),Object.defineProperties(z,{position:{get:ExpressionPropertyInterface(W.p)},rotation:{get:ExpressionPropertyInterface(W.r)},points:{get:ExpressionPropertyInterface(W.pt)},outerRadius:{get:ExpressionPropertyInterface(W.or)},outerRoundness:{get:ExpressionPropertyInterface(W.os)},innerRadius:{get:ExpressionPropertyInterface(W.ir)},innerRoundness:{get:ExpressionPropertyInterface(W.is)},_name:{value:U.nm}}),z.mn=U.mn,z}function V(U,G,X){function z(q){return U.p.ix===q?z.position:U.r.ix===q?z.roundness:U.s.ix===q||q==="Size"||q==="ADBE Vector Rect Size"?z.size:null}var Y=propertyGroupFactory(z,X),W=G.sh.ty==="tm"?G.sh.prop:G.sh;return z.propertyIndex=U.ix,W.p.setGroupProperty(PropertyInterface("Position",Y)),W.s.setGroupProperty(PropertyInterface("Size",Y)),W.r.setGroupProperty(PropertyInterface("Rotation",Y)),Object.defineProperties(z,{position:{get:ExpressionPropertyInterface(W.p)},roundness:{get:ExpressionPropertyInterface(W.r)},size:{get:ExpressionPropertyInterface(W.s)},_name:{value:U.nm}}),z.mn=U.mn,z}function L(U,G,X){function z(q){return U.r.ix===q||q==="Round Corners 1"?z.radius:null}var Y=propertyGroupFactory(z,X),W=G;return z.propertyIndex=U.ix,W.rd.setGroupProperty(PropertyInterface("Radius",Y)),Object.defineProperties(z,{radius:{get:ExpressionPropertyInterface(W.rd)},_name:{value:U.nm}}),z.mn=U.mn,z}function D(U,G,X){function z(q){return U.c.ix===q||q==="Copies"?z.copies:U.o.ix===q||q==="Offset"?z.offset:null}var Y=propertyGroupFactory(z,X),W=G;return z.propertyIndex=U.ix,W.c.setGroupProperty(PropertyInterface("Copies",Y)),W.o.setGroupProperty(PropertyInterface("Offset",Y)),Object.defineProperties(z,{copies:{get:ExpressionPropertyInterface(W.c)},offset:{get:ExpressionPropertyInterface(W.o)},_name:{value:U.nm}}),z.mn=U.mn,z}return function(U,G,X){var z;function Y(q){if(typeof q=="number")return q=q===void 0?1:q,q===0?X:z[q-1];for(var K=0,J=z.length;K<J;){if(z[K]._name===q)return z[K];K+=1}return null}function W(){return X}return Y.propertyGroup=propertyGroupFactory(Y,W),z=A(U,G,Y.propertyGroup),Y.numProperties=z.length,Y._name="Contents",Y}}(),TextExpressionInterface=function(){return function(A){var _;function T(E){switch(E){case"ADBE Text Document":return T.sourceText;default:return null}}return Object.defineProperty(T,"sourceText",{get:function(){A.textProperty.getValue();var C=A.textProperty.currentData.t;return(!_||C!==_.value)&&(_=new String(C),_.value=C||new String(C),Object.defineProperty(_,"style",{get:function(){return{fillColor:A.textProperty.currentData.fc}}})),_}}),T}}();function _typeof(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(T){return typeof T}:_typeof=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},_typeof(A)}var FootageInterface=function(){var A=function(E){var C="",P=E.getFootageData();function I(){return C="",P=E.getFootageData(),F}function F(R){if(P[R])return C=R,P=P[R],_typeof(P)==="object"?F:P;var B=R.indexOf(C);if(B!==-1){var O=parseInt(R.substr(B+C.length),10);return P=P[O],_typeof(P)==="object"?F:P}return""}return I},_=function(E){function C(P){return P==="Outline"?C.outlineInterface():null}return C._name="Outline",C.outlineInterface=A(E),C};return function(T){function E(C){return C==="Data"?E.dataInterface:null}return E._name="Data",E.dataInterface=_(T),E}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(A){return interfaces[A]||null}var expressionHelpers=function(){function A(I,F,R){F.x&&(R.k=!0,R.x=!0,R.initiateExpression=ExpressionManager.initiateExpression,R.effectsSequence.push(R.initiateExpression(I,F,R).bind(R)))}function _(I){return I*=this.elem.globalData.frameRate,I-=this.offsetTime,I!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<I?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(I,this._cachingAtTime),this._cachingAtTime.lastFrame=I),this._cachingAtTime.value}function T(I){var F=-.01,R=this.getValueAtTime(I),B=this.getValueAtTime(I+F),O=0;if(R.length){var V;for(V=0;V<R.length;V+=1)O+=Math.pow(B[V]-R[V],2);O=Math.sqrt(O)*100}else O=0;return O}function E(I){if(this.vel!==void 0)return this.vel;var F=-.001,R=this.getValueAtTime(I),B=this.getValueAtTime(I+F),O;if(R.length){O=createTypedArray("float32",R.length);var V;for(V=0;V<R.length;V+=1)O[V]=(B[V]-R[V])/F}else O=(B-R)/F;return O}function C(){return this.pv}function P(I){this.propertyGroup=I}return{searchExpressions:A,getSpeedAtTime:T,getVelocityAtTime:E,getValueAtTime:_,getStaticValueAtTime:C,setGroupProperty:P}}();function addPropertyDecorator(){function A(L,D,U){if(!this.k||!this.keyframes)return this.pv;L=L?L.toLowerCase():"";var G=this.comp.renderedFrame,X=this.keyframes,z=X[X.length-1].t;if(G<=z)return this.pv;var Y,W;U?(D?Y=Math.abs(z-this.elem.comp.globalData.frameRate*D):Y=Math.max(0,z-this.elem.data.ip),W=z-Y):((!D||D>X.length-1)&&(D=X.length-1),W=X[X.length-1-D].t,Y=z-W);var q,K,J;if(L==="pingpong"){var Z=Math.floor((G-W)/Y);if(Z%2!==0)return this.getValueAtTime((Y-(G-W)%Y+W)/this.comp.globalData.frameRate,0)}else if(L==="offset"){var se=this.getValueAtTime(W/this.comp.globalData.frameRate,0),ae=this.getValueAtTime(z/this.comp.globalData.frameRate,0),ue=this.getValueAtTime(((G-W)%Y+W)/this.comp.globalData.frameRate,0),ce=Math.floor((G-W)/Y);if(this.pv.length){for(J=new Array(se.length),K=J.length,q=0;q<K;q+=1)J[q]=(ae[q]-se[q])*ce+ue[q];return J}return(ae-se)*ce+ue}else if(L==="continue"){var he=this.getValueAtTime(z/this.comp.globalData.frameRate,0),pe=this.getValueAtTime((z-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(J=new Array(he.length),K=J.length,q=0;q<K;q+=1)J[q]=he[q]+(he[q]-pe[q])*((G-z)/this.comp.globalData.frameRate)/5e-4;return J}return he+(he-pe)*((G-z)/.001)}return this.getValueAtTime(((G-W)%Y+W)/this.comp.globalData.frameRate,0)}function _(L,D,U){if(!this.k)return this.pv;L=L?L.toLowerCase():"";var G=this.comp.renderedFrame,X=this.keyframes,z=X[0].t;if(G>=z)return this.pv;var Y,W;U?(D?Y=Math.abs(this.elem.comp.globalData.frameRate*D):Y=Math.max(0,this.elem.data.op-z),W=z+Y):((!D||D>X.length-1)&&(D=X.length-1),W=X[D].t,Y=W-z);var q,K,J;if(L==="pingpong"){var Z=Math.floor((z-G)/Y);if(Z%2===0)return this.getValueAtTime(((z-G)%Y+z)/this.comp.globalData.frameRate,0)}else if(L==="offset"){var se=this.getValueAtTime(z/this.comp.globalData.frameRate,0),ae=this.getValueAtTime(W/this.comp.globalData.frameRate,0),ue=this.getValueAtTime((Y-(z-G)%Y+z)/this.comp.globalData.frameRate,0),ce=Math.floor((z-G)/Y)+1;if(this.pv.length){for(J=new Array(se.length),K=J.length,q=0;q<K;q+=1)J[q]=ue[q]-(ae[q]-se[q])*ce;return J}return ue-(ae-se)*ce}else if(L==="continue"){var he=this.getValueAtTime(z/this.comp.globalData.frameRate,0),pe=this.getValueAtTime((z+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(J=new Array(he.length),K=J.length,q=0;q<K;q+=1)J[q]=he[q]+(he[q]-pe[q])*(z-G)/.001;return J}return he+(he-pe)*(z-G)/.001}return this.getValueAtTime((Y-((z-G)%Y+z))/this.comp.globalData.frameRate,0)}function T(L,D){if(!this.k)return this.pv;if(L=(L||.4)*.5,D=Math.floor(D||5),D<=1)return this.pv;var U=this.comp.renderedFrame/this.comp.globalData.frameRate,G=U-L,X=U+L,z=D>1?(X-G)/(D-1):1,Y=0,W=0,q;this.pv.length?q=createTypedArray("float32",this.pv.length):q=0;for(var K;Y<D;){if(K=this.getValueAtTime(G+Y*z),this.pv.length)for(W=0;W<this.pv.length;W+=1)q[W]+=K[W];else q+=K;Y+=1}if(this.pv.length)for(W=0;W<this.pv.length;W+=1)q[W]/=D;else q/=D;return q}function E(L){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var D=this._transformCachingAtTime.v;if(D.cloneFromProps(this.pre.props),this.appliedTransformations<1){var U=this.a.getValueAtTime(L);D.translate(-U[0]*this.a.mult,-U[1]*this.a.mult,U[2]*this.a.mult)}if(this.appliedTransformations<2){var G=this.s.getValueAtTime(L);D.scale(G[0]*this.s.mult,G[1]*this.s.mult,G[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var X=this.sk.getValueAtTime(L),z=this.sa.getValueAtTime(L);D.skewFromAxis(-X*this.sk.mult,z*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var Y=this.r.getValueAtTime(L);D.rotate(-Y*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var W=this.rz.getValueAtTime(L),q=this.ry.getValueAtTime(L),K=this.rx.getValueAtTime(L),J=this.or.getValueAtTime(L);D.rotateZ(-W*this.rz.mult).rotateY(q*this.ry.mult).rotateX(K*this.rx.mult).rotateZ(-J[2]*this.or.mult).rotateY(J[1]*this.or.mult).rotateX(J[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Z=this.px.getValueAtTime(L),se=this.py.getValueAtTime(L);if(this.data.p.z){var ae=this.pz.getValueAtTime(L);D.translate(Z*this.px.mult,se*this.py.mult,-ae*this.pz.mult)}else D.translate(Z*this.px.mult,se*this.py.mult,0)}else{var ue=this.p.getValueAtTime(L);D.translate(ue[0]*this.p.mult,ue[1]*this.p.mult,-ue[2]*this.p.mult)}return D}function C(){return this.v.clone(new Matrix)}var P=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(L,D,U){var G=P(L,D,U);return G.dynamicProperties.length?G.getValueAtTime=E.bind(G):G.getValueAtTime=C.bind(G),G.setGroupProperty=expressionHelpers.setGroupProperty,G};var I=PropertyFactory.getProp;PropertyFactory.getProp=function(L,D,U,G,X){var z=I(L,D,U,G,X);z.kf?z.getValueAtTime=expressionHelpers.getValueAtTime.bind(z):z.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(z),z.setGroupProperty=expressionHelpers.setGroupProperty,z.loopOut=A,z.loopIn=_,z.smooth=T,z.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(z),z.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(z),z.numKeys=D.a===1?D.k.length:0,z.propertyIndex=D.ix;var Y=0;return U!==0&&(Y=createTypedArray("float32",D.a===1?D.k[0].s.length:D.k.length)),z._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:Y},expressionHelpers.searchExpressions(L,D,z),z.k&&X.addDynamicProperty(z),z};function F(L){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),L*=this.elem.globalData.frameRate,L-=this.offsetTime,L!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<L?this._caching.lastIndex:0,this._cachingAtTime.lastTime=L,this.interpolateShape(L,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var R=ShapePropertyFactory.getConstructorFunction(),B=ShapePropertyFactory.getKeyframedConstructorFunction();function O(){}O.prototype={vertices:function(D,U){this.k&&this.getValue();var G=this.v;U!==void 0&&(G=this.getValueAtTime(U,0));var X,z=G._length,Y=G[D],W=G.v,q=createSizedArray(z);for(X=0;X<z;X+=1)D==="i"||D==="o"?q[X]=[Y[X][0]-W[X][0],Y[X][1]-W[X][1]]:q[X]=[Y[X][0],Y[X][1]];return q},points:function(D){return this.vertices("v",D)},inTangents:function(D){return this.vertices("i",D)},outTangents:function(D){return this.vertices("o",D)},isClosed:function(){return this.v.c},pointOnPath:function(D,U){var G=this.v;U!==void 0&&(G=this.getValueAtTime(U,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(G));for(var X=this._segmentsLength,z=X.lengths,Y=X.totalLength*D,W=0,q=z.length,K=0,J;W<q;){if(K+z[W].addedLength>Y){var Z=W,se=G.c&&W===q-1?0:W+1,ae=(Y-K)/z[W].addedLength;J=bez.getPointInSegment(G.v[Z],G.v[se],G.o[Z],G.i[se],ae,z[W]);break}else K+=z[W].addedLength;W+=1}return J||(J=G.c?[G.v[0][0],G.v[0][1]]:[G.v[G._length-1][0],G.v[G._length-1][1]]),J},vectorOnPath:function(D,U,G){D==1?D=this.v.c:D==0&&(D=.999);var X=this.pointOnPath(D,U),z=this.pointOnPath(D+.001,U),Y=z[0]-X[0],W=z[1]-X[1],q=Math.sqrt(Math.pow(Y,2)+Math.pow(W,2));if(q===0)return[0,0];var K=G==="tangent"?[Y/q,W/q]:[-W/q,Y/q];return K},tangentOnPath:function(D,U){return this.vectorOnPath(D,U,"tangent")},normalOnPath:function(D,U){return this.vectorOnPath(D,U,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([O],R),extendPrototype([O],B),B.prototype.getValueAtTime=F,B.prototype.initiateExpression=ExpressionManager.initiateExpression;var V=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(L,D,U,G,X){var z=V(L,D,U,G,X);return z.propertyIndex=D.ix,z.lock=!1,U===3?expressionHelpers.searchExpressions(L,D.pt,z):U===4&&expressionHelpers.searchExpressions(L,D.ks,z),z.k&&L.addDynamicProperty(z),z}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function A(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(_,T){var E=this.calculateExpression(T);if(_.t!==E){var C={};return this.copyData(C,_),C.t=E.toString(),C.__complete=!1,C}return _},TextProperty.prototype.searchProperty=function(){var _=this.searchKeyframes(),T=this.searchExpressions();return this.kf=_||T,this.kf},TextProperty.prototype.searchExpressions=A}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function A(_,T){var E=createNS("feMerge");E.setAttribute("result",_);var C,P;for(P=0;P<T.length;P+=1)C=createNS("feMergeNode"),C.setAttribute("in",T[P]),E.appendChild(C),E.appendChild(C);return E}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(A,_,T,E,C){this.filterManager=_;var P=createNS("feColorMatrix");P.setAttribute("type","matrix"),P.setAttribute("color-interpolation-filters","linearRGB"),P.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=P,P.setAttribute("result",E+"_tint_1"),A.appendChild(P),P=createNS("feColorMatrix"),P.setAttribute("type","matrix"),P.setAttribute("color-interpolation-filters","sRGB"),P.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),P.setAttribute("result",E+"_tint_2"),A.appendChild(P),this.matrixFilter=P;var I=this.createMergeNode(E,[C,E+"_tint_1",E+"_tint_2"]);A.appendChild(I)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var _=this.filterManager.effectElements[0].p.v,T=this.filterManager.effectElements[1].p.v,E=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+E+" 0"),this.matrixFilter.setAttribute("values",T[0]-_[0]+" 0 0 0 "+_[0]+" "+(T[1]-_[1])+" 0 0 0 "+_[1]+" "+(T[2]-_[2])+" 0 0 0 "+_[2]+" 0 0 0 1 0")}};function SVGFillFilter(A,_,T,E){this.filterManager=_;var C=createNS("feColorMatrix");C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),C.setAttribute("result",E),A.appendChild(C),this.matrixFilter=C}SVGFillFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var _=this.filterManager.effectElements[2].p.v,T=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+_[0]+" 0 0 0 0 "+_[1]+" 0 0 0 0 "+_[2]+" 0 0 0 "+T+" 0")}};function SVGStrokeEffect(A,_,T){this.initialized=!1,this.filterManager=_,this.elem=T,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var A=this.elem.layerElement.children||this.elem.layerElement.childNodes,_,T,E,C;for(this.filterManager.effectElements[1].p.v===1?(C=this.elem.maskManager.masksProperties.length,E=0):(E=this.filterManager.effectElements[0].p.v-1,C=E+1),T=createNS("g"),T.setAttribute("fill","none"),T.setAttribute("stroke-linecap","round"),T.setAttribute("stroke-dashoffset",1),E;E<C;E+=1)_=createNS("path"),T.appendChild(_),this.paths.push({p:_,m:E});if(this.filterManager.effectElements[10].p.v===3){var P=createNS("mask"),I=createElementID();P.setAttribute("id",I),P.setAttribute("mask-type","alpha"),P.appendChild(T),this.elem.globalData.defs.appendChild(P);var F=createNS("g");for(F.setAttribute("mask","url("+getLocationHref()+"#"+I+")");A[0];)F.appendChild(A[0]);this.elem.layerElement.appendChild(F),this.masker=P,T.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(A=this.elem.layerElement.children||this.elem.layerElement.childNodes;A.length;)this.elem.layerElement.removeChild(A[0]);this.elem.layerElement.appendChild(T),this.elem.layerElement.removeAttribute("mask"),T.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=T},SVGStrokeEffect.prototype.renderFrame=function(A){this.initialized||this.initialize();var _,T=this.paths.length,E,C;for(_=0;_<T;_+=1)if(this.paths[_].m!==-1&&(E=this.elem.maskManager.viewData[this.paths[_].m],C=this.paths[_].p,(A||this.filterManager._mdf||E.prop._mdf)&&C.setAttribute("d",E.lastPath),A||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||E.prop._mdf)){var P;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var I=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,F=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,R=C.getTotalLength();P="0 0 0 "+R*I+" ";var B=R*(F-I),O=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,V=Math.floor(B/O),L;for(L=0;L<V;L+=1)P+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";P+="0 "+R*10+" 0 0"}else P="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;C.setAttribute("stroke-dasharray",P)}if((A||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(A||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(A||this.filterManager.effectElements[3].p._mdf)){var D=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(D[0]*255)+","+bmFloor(D[1]*255)+","+bmFloor(D[2]*255)+")")}};function SVGTritoneFilter(A,_,T,E){this.filterManager=_;var C=createNS("feColorMatrix");C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","linearRGB"),C.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),A.appendChild(C);var P=createNS("feComponentTransfer");P.setAttribute("color-interpolation-filters","sRGB"),P.setAttribute("result",E),this.matrixFilter=P;var I=createNS("feFuncR");I.setAttribute("type","table"),P.appendChild(I),this.feFuncR=I;var F=createNS("feFuncG");F.setAttribute("type","table"),P.appendChild(F),this.feFuncG=F;var R=createNS("feFuncB");R.setAttribute("type","table"),P.appendChild(R),this.feFuncB=R,A.appendChild(P)}SVGTritoneFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var _=this.filterManager.effectElements[0].p.v,T=this.filterManager.effectElements[1].p.v,E=this.filterManager.effectElements[2].p.v,C=E[0]+" "+T[0]+" "+_[0],P=E[1]+" "+T[1]+" "+_[1],I=E[2]+" "+T[2]+" "+_[2];this.feFuncR.setAttribute("tableValues",C),this.feFuncG.setAttribute("tableValues",P),this.feFuncB.setAttribute("tableValues",I)}};function SVGProLevelsFilter(A,_,T,E){this.filterManager=_;var C=this.filterManager.effectElements,P=createNS("feComponentTransfer");(C[10].p.k||C[10].p.v!==0||C[11].p.k||C[11].p.v!==1||C[12].p.k||C[12].p.v!==1||C[13].p.k||C[13].p.v!==0||C[14].p.k||C[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",P)),(C[17].p.k||C[17].p.v!==0||C[18].p.k||C[18].p.v!==1||C[19].p.k||C[19].p.v!==1||C[20].p.k||C[20].p.v!==0||C[21].p.k||C[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",P)),(C[24].p.k||C[24].p.v!==0||C[25].p.k||C[25].p.v!==1||C[26].p.k||C[26].p.v!==1||C[27].p.k||C[27].p.v!==0||C[28].p.k||C[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",P)),(C[31].p.k||C[31].p.v!==0||C[32].p.k||C[32].p.v!==1||C[33].p.k||C[33].p.v!==1||C[34].p.k||C[34].p.v!==0||C[35].p.k||C[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",P)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(P.setAttribute("color-interpolation-filters","sRGB"),A.appendChild(P)),(C[3].p.k||C[3].p.v!==0||C[4].p.k||C[4].p.v!==1||C[5].p.k||C[5].p.v!==1||C[6].p.k||C[6].p.v!==0||C[7].p.k||C[7].p.v!==1)&&(P=createNS("feComponentTransfer"),P.setAttribute("color-interpolation-filters","sRGB"),P.setAttribute("result",E),A.appendChild(P),this.feFuncRComposed=this.createFeFunc("feFuncR",P),this.feFuncGComposed=this.createFeFunc("feFuncG",P),this.feFuncBComposed=this.createFeFunc("feFuncB",P))}SVGProLevelsFilter.prototype.createFeFunc=function(A,_){var T=createNS(A);return T.setAttribute("type","table"),_.appendChild(T),T},SVGProLevelsFilter.prototype.getTableValue=function(A,_,T,E,C){for(var P=0,I=256,F,R=Math.min(A,_),B=Math.max(A,_),O=Array.call(null,{length:I}),V,L=0,D=C-E,U=_-A;P<=256;)F=P/256,F<=R?V=U<0?C:E:F>=B?V=U<0?E:C:V=E+D*Math.pow((F-A)/U,1/T),O[L]=V,L+=1,P+=256/(I-1);return O.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var _,T=this.filterManager.effectElements;this.feFuncRComposed&&(A||T[3].p._mdf||T[4].p._mdf||T[5].p._mdf||T[6].p._mdf||T[7].p._mdf)&&(_=this.getTableValue(T[3].p.v,T[4].p.v,T[5].p.v,T[6].p.v,T[7].p.v),this.feFuncRComposed.setAttribute("tableValues",_),this.feFuncGComposed.setAttribute("tableValues",_),this.feFuncBComposed.setAttribute("tableValues",_)),this.feFuncR&&(A||T[10].p._mdf||T[11].p._mdf||T[12].p._mdf||T[13].p._mdf||T[14].p._mdf)&&(_=this.getTableValue(T[10].p.v,T[11].p.v,T[12].p.v,T[13].p.v,T[14].p.v),this.feFuncR.setAttribute("tableValues",_)),this.feFuncG&&(A||T[17].p._mdf||T[18].p._mdf||T[19].p._mdf||T[20].p._mdf||T[21].p._mdf)&&(_=this.getTableValue(T[17].p.v,T[18].p.v,T[19].p.v,T[20].p.v,T[21].p.v),this.feFuncG.setAttribute("tableValues",_)),this.feFuncB&&(A||T[24].p._mdf||T[25].p._mdf||T[26].p._mdf||T[27].p._mdf||T[28].p._mdf)&&(_=this.getTableValue(T[24].p.v,T[25].p.v,T[26].p.v,T[27].p.v,T[28].p.v),this.feFuncB.setAttribute("tableValues",_)),this.feFuncA&&(A||T[31].p._mdf||T[32].p._mdf||T[33].p._mdf||T[34].p._mdf||T[35].p._mdf)&&(_=this.getTableValue(T[31].p.v,T[32].p.v,T[33].p.v,T[34].p.v,T[35].p.v),this.feFuncA.setAttribute("tableValues",_))}};function SVGDropShadowEffect(A,_,T,E,C){var P=_.container.globalData.renderConfig.filterSize,I=_.data.fs||P;A.setAttribute("x",I.x||P.x),A.setAttribute("y",I.y||P.y),A.setAttribute("width",I.width||P.width),A.setAttribute("height",I.height||P.height),this.filterManager=_;var F=createNS("feGaussianBlur");F.setAttribute("in","SourceAlpha"),F.setAttribute("result",E+"_drop_shadow_1"),F.setAttribute("stdDeviation","0"),this.feGaussianBlur=F,A.appendChild(F);var R=createNS("feOffset");R.setAttribute("dx","25"),R.setAttribute("dy","0"),R.setAttribute("in",E+"_drop_shadow_1"),R.setAttribute("result",E+"_drop_shadow_2"),this.feOffset=R,A.appendChild(R);var B=createNS("feFlood");B.setAttribute("flood-color","#00ff00"),B.setAttribute("flood-opacity","1"),B.setAttribute("result",E+"_drop_shadow_3"),this.feFlood=B,A.appendChild(B);var O=createNS("feComposite");O.setAttribute("in",E+"_drop_shadow_3"),O.setAttribute("in2",E+"_drop_shadow_2"),O.setAttribute("operator","in"),O.setAttribute("result",E+"_drop_shadow_4"),A.appendChild(O);var V=this.createMergeNode(E,[E+"_drop_shadow_4",C]);A.appendChild(V)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){if((A||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),A||this.filterManager.effectElements[0].p._mdf){var _=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(_[0]*255),Math.round(_[1]*255),Math.round(_[2]*255)))}if((A||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),A||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var T=this.filterManager.effectElements[3].p.v,E=(this.filterManager.effectElements[2].p.v-90)*degToRads,C=T*Math.cos(E),P=T*Math.sin(E);this.feOffset.setAttribute("dx",C),this.feOffset.setAttribute("dy",P)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(A,_,T){this.initialized=!1,this.filterManager=_,this.filterElem=A,this.elem=T,T.matteElement=createNS("g"),T.matteElement.appendChild(T.layerElement),T.matteElement.appendChild(T.transformedElement),T.baseElement=T.matteElement}SVGMatte3Effect.prototype.findSymbol=function(A){for(var _=0,T=_svgMatteSymbols.length;_<T;){if(_svgMatteSymbols[_]===A)return _svgMatteSymbols[_];_+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(A,_){var T=A.layerElement.parentNode;if(T){for(var E=T.children,C=0,P=E.length;C<P&&E[C]!==A.layerElement;)C+=1;var I;C<=P-2&&(I=E[C+1]);var F=createNS("use");F.setAttribute("href","#"+_),I?T.insertBefore(F,I):T.appendChild(F)}},SVGMatte3Effect.prototype.setElementAsMask=function(A,_){if(!this.findSymbol(_)){var T=createElementID(),E=createNS("mask");E.setAttribute("id",_.layerId),E.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(_);var C=A.globalData.defs;C.appendChild(E);var P=createNS("symbol");P.setAttribute("id",T),this.replaceInParent(_,T),P.appendChild(_.layerElement),C.appendChild(P);var I=createNS("use");I.setAttribute("href","#"+T),E.appendChild(I),_.data.hd=!1,_.show()}A.setMatte(_.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var A=this.filterManager.effectElements[0].p.v,_=this.elem.comp.elements,T=0,E=_.length;T<E;)_[T]&&_[T].data.ind===A&&this.setElementAsMask(this.elem,_[T]),T+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(A,_,T,E){A.setAttribute("x","-100%"),A.setAttribute("y","-100%"),A.setAttribute("width","300%"),A.setAttribute("height","300%"),this.filterManager=_;var C=createNS("feGaussianBlur");C.setAttribute("result",E),A.appendChild(C),this.feGaussianBlur=C}SVGGaussianBlurEffect.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var _=.3,T=this.filterManager.effectElements[0].p.v*_,E=this.filterManager.effectElements[1].p.v,C=E==3?0:T,P=E==2?0:T;this.feGaussianBlur.setAttribute("stdDeviation",C+" "+P);var I=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",I)}};function TransformEffect(){}TransformEffect.prototype.init=function(A){this.effectsManager=A,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(A){if(this._opMdf=!1,this._mdf=!1,A||this.effectsManager._mdf){var _=this.effectsManager.effectElements,T=_[0].p.v,E=_[1].p.v,C=_[2].p.v===1,P=_[3].p.v,I=C?P:_[4].p.v,F=_[5].p.v,R=_[6].p.v,B=_[7].p.v;this.matrix.reset(),this.matrix.translate(-T[0],-T[1],T[2]),this.matrix.scale(I*.01,P*.01,1),this.matrix.rotate(-B*degToRads),this.matrix.skewFromAxis(-F*degToRads,(R+90)*degToRads),this.matrix.translate(E[0],E[1],0),this._mdf=!0,this.opacity!==_[8].p.v&&(this.opacity=_[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(A,_){this.init(_)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(A){this.init(A)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})}(lottie$1,lottie$1.exports)),lottie$1.exports}requireLottie();(function(){try{if(typeof document<"u"){var A=document.createElement("style");A.appendChild(document.createTextNode(".lottie-animation-container{width:var(--lottie-animation-container-width);height:var(--lottie-animation-container-height);background-color:var(--lottie-animation-container-background-color);overflow:hidden;margin:var(--lottie-animation-margin)}.lottie-animation-container svg{transform:scale(var(--lottie-animation-scale))}")),document.head.appendChild(A)}}catch(_){console.error("vite-plugin-css-injected-by-js",_)}})();const _hoisted_1$2={class:"ico"},_hoisted_2$1={class:"pic"},_hoisted_3=["src"],_hoisted_4={class:"text"},_sfc_main$2={__name:"promo_ico",props:{msg:String,pic:String},setup(A){return(_,T)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("img",{src:A.pic,width:"100%"},null,8,_hoisted_3)]),createBaseVNode("div",_hoisted_4,toDisplayString(A.msg),1)]))}},Promo_ico=_export_sfc(_sfc_main$2,[["__scopeId","data-v-dbd9022d"]]),pic6888="/daiyanren/assets/6888-Bm9AHMWh.webp",pic300k="/daiyanren/assets/300k-Ccnj22GL.webp",GTCC="/daiyanren/assets/GTCC-yH1H9lOU.webp",VIP="/daiyanren/assets/VIP-RBo3Erce.webp",_hoisted_1$1={id:"wrap",class:"body"},_hoisted_2={class:"exclusive"},_sfc_main$1={__name:"promo",setup(A){return(_,T)=>{const E=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(Top,{msg:"Hello World"}),T[0]||(T[0]=createBaseVNode("div",{class:"promo_title1"},[createBaseVNode("img",{src:_imports_0,width:"100%"})],-1)),createBaseVNode("div",_hoisted_2,[createBaseVNode("ul",null,[createBaseVNode("li",null,[createVNode(Promo_ico,{pic:unref(pic6888),msg:"New Comers"},null,8,["pic"])]),createBaseVNode("li",null,[createVNode(E,{to:"/SpinePixi"},{default:withCtx(()=>[createVNode(Promo_ico,{pic:unref(pic300k),msg:"Daily Bonus"},null,8,["pic"])]),_:1})]),createBaseVNode("li",null,[createVNode(Promo_ico,{pic:unref(VIP),msg:"VIP"},null,8,["pic"])]),createBaseVNode("li",null,[createVNode(Promo_ico,{pic:unref(GTCC),msg:"GTCC"},null,8,["pic"])])])]),T[1]||(T[1]=createStaticVNode('<div class="promo_title1" data-v-6b8be65e><img src="'+_imports_0+'" width="100%" data-v-6b8be65e></div><div class="promo_tab" data-v-6b8be65e><img src="'+_imports_1+'" width="100%" data-v-6b8be65e></div><div class="banners" data-v-6b8be65e><ul data-v-6b8be65e><li data-v-6b8be65e><img src="'+_imports_2+'" width="100%" data-v-6b8be65e></li><li data-v-6b8be65e><img src="'+_imports_3+'" width="100%" data-v-6b8be65e></li><li data-v-6b8be65e><img src="'+_imports_4+'" width="100%" data-v-6b8be65e></li><li data-v-6b8be65e><img src="'+_imports_2+'" width="100%" data-v-6b8be65e></li><li data-v-6b8be65e><img src="'+_imports_4+'" width="100%" data-v-6b8be65e></li></ul></div>',3))])}}},promo=_export_sfc(_sfc_main$1,[["__scopeId","data-v-6b8be65e"]]),_hoisted_1={id:"player",style:{width:"600px",height:"600px"}},_sfc_main={__name:"SpinePixi",setup(A){return onMounted(()=>{const _=document.createElement("script");_.src="https://cdn.jsdelivr.net/npm/@esotericsoftware/spine-player@4.2.82/dist/iife/spine-player.min.js",_.onload=()=>{const T=document.getElementById("player");new spine.SpinePlayer(T,{jsonUrl:"spine/anim1.json",atlasUrl:"spine/anim1.atlas",animation:"animation",showControls:!0,loop:!0,backgroundColor:"#ffffff",alpha:!0,premultipliedAlpha:!1,mipmaps:!1,debugBones:!1,debugMeshes:!1,debugSlots:!1,debugRegionAttachments:!1,debugBoundingBoxes:!1})},document.body.appendChild(_)}),(_,T)=>(openBlock(),createElementBlock("div",_hoisted_1))}},routes=[{path:"/",name:"Home",component:_sfc_main$a},{path:"/reward",name:"reward",component:reward},{path:"/tongits",name:"tongits",component:tongits},{path:"/wallet",name:"wallet",component:wallet},{path:"/promo",name:"promo",component:promo},{path:"/account",name:"account",component:account},{path:"/game_list",name:"game_list",component:game_list},{path:"/game",name:"game",component:_sfc_main$3},{path:"/SpinePixi",name:"SpinePixi",component:_sfc_main}],router=createRouter({history:createWebHistory("/daiyanren/"),routes,scrollBehavior(A,_,T){return{top:0}}});createApp(_sfc_main$l).use(router).mount("#app");export{getLocalBounds as $,AbstractRenderer as A,BufferUsage as B,Container$1 as C,DOMAdapter as D,ExtensionType$1 as E,getGlobalBounds as F,GpuProgram as G,Bounds$1 as H,TexturePool as I,FilterEffect as J,Sprite$1 as K,getAttributeInfoFromFormat as L,Matrix$1 as M,unsafeEvalSupported$1 as N,uid$1 as O,Point$1 as P,Rectangle$1 as Q,RendererType as R,STENCIL_MODES as S,Ticker$1 as T,UPDATE_PRIORITY$1 as U,SystemRunner as V,multiplyColors as W,UPDATE_VISIBLE as X,UPDATE_COLOR as Y,UPDATE_BLEND as Z,Color$2 as _,EventEmitter$1 as a,VERSION as a0,deprecation$1 as a1,v8_0_0 as a2,RendererInitHook as a3,Geometry$1 as a4,compileHighShaderGlProgram as a5,colorBitGl as a6,generateTextureBatchBitGl as a7,roundPixelsBitGl as a8,getBatchSamplersUniformGroup as a9,ViewContainer as aa,GraphicsContext as ab,TextStyle as ac,generateTextStyleKey as ad,BatchableGraphics as ae,getAdjustedBlendModeBlend as af,ViewableBuffer$1 as ag,TextureStyle as ah,BitmapFontManager as ai,getBitmapTextLayout as aj,Cache$1 as ak,updateQuadBounds as al,CanvasTextMetrics as am,nextPow2$1 as an,fontStringFromTextStyle as ao,getCanvasFillStyle as ap,GraphicsContextSystem as aq,Buffer$1 as b,BindGroup as c,createIdFromString as d,extensions$1 as e,fastCopy as f,getTextureBatchBindGroup as g,CLEAR as h,isMobile$1 as i,CanvasSource as j,TextureSource as k,UniformGroup$1 as l,CanvasPool as m,compileHighShaderGpuProgram as n,colorBit as o,generateTextureBatchBit as p,roundPixelsBit as q,removeItems$1 as r,getMaxTexturesPerBatch as s,Shader$1 as t,Texture$1 as u,GlProgram as v,warn as w,TextureMatrix$1 as x,DefaultBatcher as y,BigPool as z};
