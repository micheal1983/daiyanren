const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-CAni9rhl.js","assets/webworkerAll-BXtKzYIp.js","assets/colorToUniform-C2GHuDhf.js","assets/WebGPURenderer-B7Pi2MCb.js","assets/SharedSystems-BieJMGlI.js","assets/WebGLRenderer-CitD4i_k.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Fd(s){const t=Object.create(null);for(const e of s.split(","))t[e]=1;return e=>e in t}const re={},Li=[],Sr=()=>{},rv=()=>!1,Gl=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Bd=s=>s.startsWith("onUpdate:"),is=Object.assign,kd=(s,t)=>{const e=s.indexOf(t);e>-1&&s.splice(e,1)},nv=Object.prototype.hasOwnProperty,Zt=(s,t)=>nv.call(s,t),Tt=Array.isArray,Vi=s=>oo(s)==="[object Map]",Dy=s=>oo(s)==="[object Set]",iv=s=>oo(s)==="[object RegExp]",Rt=s=>typeof s=="function",Te=s=>typeof s=="string",Tn=s=>typeof s=="symbol",le=s=>s!==null&&typeof s=="object",Gy=s=>(le(s)||Rt(s))&&Rt(s.then)&&Rt(s.catch),$y=Object.prototype.toString,oo=s=>$y.call(s),av=s=>oo(s).slice(8,-1),Xy=s=>oo(s)==="[object Object]",Nd=s=>Te(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Ba=Fd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$l=s=>{const t=Object.create(null);return e=>t[e]||(t[e]=s(e))},ov=/-(\w)/g,Hs=$l(s=>s.replace(ov,(t,e)=>e?e.toUpperCase():"")),lv=/\B([A-Z])/g,li=$l(s=>s.replace(lv,"-$1").toLowerCase()),Xl=$l(s=>s.charAt(0).toUpperCase()+s.slice(1)),wh=$l(s=>s?`on${Xl(s)}`:""),An=(s,t)=>!Object.is(s,t),ka=(s,...t)=>{for(let e=0;e<s.length;e++)s[e](...t)},Hy=(s,t,e,r=!1)=>{Object.defineProperty(s,t,{configurable:!0,enumerable:!1,writable:r,value:e})},hv=s=>{const t=parseFloat(s);return isNaN(t)?s:t};let Yf;const Hl=()=>Yf||(Yf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Od(s){if(Tt(s)){const t={};for(let e=0;e<s.length;e++){const r=s[e],n=Te(r)?fv(r):Od(r);if(n)for(const i in n)t[i]=n[i]}return t}else if(Te(s)||le(s))return s}const cv=/;(?![^(]*\))/g,uv=/:([^]+)/,dv=/\/\*[^]*?\*\//g;function fv(s){const t={};return s.replace(dv,"").split(cv).forEach(e=>{if(e){const r=e.split(uv);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function qi(s){let t="";if(Te(s))t=s;else if(Tt(s))for(let e=0;e<s.length;e++){const r=qi(s[e]);r&&(t+=r+" ")}else if(le(s))for(const e in s)s[e]&&(t+=e+" ");return t.trim()}const mv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",pv=Fd(mv);function Yy(s){return!!s||s===""}const jy=s=>!!(s&&s.__v_isRef===!0),Yl=s=>Te(s)?s:s==null?"":Tt(s)||le(s)&&(s.toString===$y||!Rt(s.toString))?jy(s)?Yl(s.value):JSON.stringify(s,zy,2):String(s),zy=(s,t)=>jy(t)?zy(s,t.value):Vi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[r,n],i)=>(e[Eh(r,i)+" =>"]=n,e),{})}:Dy(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Eh(e))}:Tn(t)?Eh(t):le(t)&&!Tt(t)&&!Xy(t)?String(t):t,Eh=(s,t="")=>{var e;return Tn(s)?`Symbol(${(e=s.description)!=null?e:t})`:s};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ts;class gv{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ts,!t&&Ts&&(this.index=(Ts.scopes||(Ts.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Ts;try{return Ts=this,t()}finally{Ts=e}}}on(){Ts=this}off(){Ts=this.parent}stop(t){if(this._active){this._active=!1;let e,r;for(e=0,r=this.effects.length;e<r;e++)this.effects[e].stop();for(this.effects.length=0,e=0,r=this.cleanups.length;e<r;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function yv(){return Ts}let se;const Sh=new WeakSet;class Wy{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ts&&Ts.active&&Ts.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Sh.has(this)&&(Sh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ky(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jf(this),Zy(this);const t=se,e=mr;se=this,mr=!0;try{return this.fn()}finally{Qy(this),se=t,mr=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ud(t);this.deps=this.depsTail=void 0,jf(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Sh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Su(this)&&this.run()}get dirty(){return Su(this)}}let qy=0,Na,Oa;function Ky(s,t=!1){if(s.flags|=8,t){s.next=Oa,Oa=s;return}s.next=Na,Na=s}function Ld(){qy++}function Vd(){if(--qy>0)return;if(Oa){let t=Oa;for(Oa=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let s;for(;Na;){let t=Na;for(Na=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){s||(s=r)}t=e}}if(s)throw s}function Zy(s){for(let t=s.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Qy(s){let t,e=s.depsTail,r=e;for(;r;){const n=r.prevDep;r.version===-1?(r===e&&(e=n),Ud(r),xv(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}s.deps=t,s.depsTail=e}function Su(s){for(let t=s.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Jy(t.dep.computed)||t.dep.version!==t.version))return!0;return!!s._dirty}function Jy(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===Ha))return;s.globalVersion=Ha;const t=s.dep;if(s.flags|=2,t.version>0&&!s.isSSR&&s.deps&&!Su(s)){s.flags&=-3;return}const e=se,r=mr;se=s,mr=!0;try{Zy(s);const n=s.fn(s._value);(t.version===0||An(n,s._value))&&(s._value=n,t.version++)}catch(n){throw t.version++,n}finally{se=e,mr=r,Qy(s),s.flags&=-3}}function Ud(s,t=!1){const{dep:e,prevSub:r,nextSub:n}=s;if(r&&(r.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=r,s.nextSub=void 0),e.subs===s&&(e.subs=r,!r&&e.computed)){e.computed.flags&=-5;for(let i=e.computed.deps;i;i=i.nextDep)Ud(i,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function xv(s){const{prevDep:t,nextDep:e}=s;t&&(t.nextDep=e,s.prevDep=void 0),e&&(e.prevDep=t,s.nextDep=void 0)}let mr=!0;const tx=[];function Cn(){tx.push(mr),mr=!1}function Rn(){const s=tx.pop();mr=s===void 0?!0:s}function jf(s){const{cleanup:t}=s;if(s.cleanup=void 0,t){const e=se;se=void 0;try{t()}finally{se=e}}}let Ha=0;class _v{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!se||!mr||se===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==se)e=this.activeLink=new _v(se,this),se.deps?(e.prevDep=se.depsTail,se.depsTail.nextDep=e,se.depsTail=e):se.deps=se.depsTail=e,ex(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const r=e.nextDep;r.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=r),e.prevDep=se.depsTail,e.nextDep=void 0,se.depsTail.nextDep=e,se.depsTail=e,se.deps===e&&(se.deps=r)}return e}trigger(t){this.version++,Ha++,this.notify(t)}notify(t){Ld();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Vd()}}}function ex(s){if(s.dep.sc++,s.sub.flags&4){const t=s.dep.computed;if(t&&!s.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ex(r)}const e=s.dep.subs;e!==s&&(s.prevSub=e,e&&(e.nextSub=s)),s.dep.subs=s}}const Tu=new WeakMap,si=Symbol(""),Cu=Symbol(""),Ya=Symbol("");function Je(s,t,e){if(mr&&se){let r=Tu.get(s);r||Tu.set(s,r=new Map);let n=r.get(e);n||(r.set(e,n=new Dd),n.map=r,n.key=e),n.track()}}function $r(s,t,e,r,n,i){const o=Tu.get(s);if(!o){Ha++;return}const l=a=>{a&&a.trigger()};if(Ld(),t==="clear")o.forEach(l);else{const a=Tt(s),h=a&&Nd(e);if(a&&e==="length"){const c=Number(r);o.forEach((u,d)=>{(d==="length"||d===Ya||!Tn(d)&&d>=c)&&l(u)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(Ya)),t){case"add":a?h&&l(o.get("length")):(l(o.get(si)),Vi(s)&&l(o.get(Cu)));break;case"delete":a||(l(o.get(si)),Vi(s)&&l(o.get(Cu)));break;case"set":Vi(s)&&l(o.get(si));break}}Vd()}function yi(s){const t=Kt(s);return t===s?t:(Je(t,"iterate",Ya),Gs(s)?t:t.map(ts))}function jl(s){return Je(s=Kt(s),"iterate",Ya),s}const Av={__proto__:null,[Symbol.iterator](){return Th(this,Symbol.iterator,ts)},concat(...s){return yi(this).concat(...s.map(t=>Tt(t)?yi(t):t))},entries(){return Th(this,"entries",s=>(s[1]=ts(s[1]),s))},every(s,t){return Nr(this,"every",s,t,void 0,arguments)},filter(s,t){return Nr(this,"filter",s,t,e=>e.map(ts),arguments)},find(s,t){return Nr(this,"find",s,t,ts,arguments)},findIndex(s,t){return Nr(this,"findIndex",s,t,void 0,arguments)},findLast(s,t){return Nr(this,"findLast",s,t,ts,arguments)},findLastIndex(s,t){return Nr(this,"findLastIndex",s,t,void 0,arguments)},forEach(s,t){return Nr(this,"forEach",s,t,void 0,arguments)},includes(...s){return Ch(this,"includes",s)},indexOf(...s){return Ch(this,"indexOf",s)},join(s){return yi(this).join(s)},lastIndexOf(...s){return Ch(this,"lastIndexOf",s)},map(s,t){return Nr(this,"map",s,t,void 0,arguments)},pop(){return fa(this,"pop")},push(...s){return fa(this,"push",s)},reduce(s,...t){return zf(this,"reduce",s,t)},reduceRight(s,...t){return zf(this,"reduceRight",s,t)},shift(){return fa(this,"shift")},some(s,t){return Nr(this,"some",s,t,void 0,arguments)},splice(...s){return fa(this,"splice",s)},toReversed(){return yi(this).toReversed()},toSorted(s){return yi(this).toSorted(s)},toSpliced(...s){return yi(this).toSpliced(...s)},unshift(...s){return fa(this,"unshift",s)},values(){return Th(this,"values",ts)}};function Th(s,t,e){const r=jl(s),n=r[t]();return r!==s&&!Gs(s)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=e(i.value)),i}),n}const bv=Array.prototype;function Nr(s,t,e,r,n,i){const o=jl(s),l=o!==s&&!Gs(s),a=o[t];if(a!==bv[t]){const u=a.apply(s,i);return l?ts(u):u}let h=e;o!==s&&(l?h=function(u,d){return e.call(this,ts(u),d,s)}:e.length>2&&(h=function(u,d){return e.call(this,u,d,s)}));const c=a.call(o,h,r);return l&&n?n(c):c}function zf(s,t,e,r){const n=jl(s);let i=e;return n!==s&&(Gs(s)?e.length>3&&(i=function(o,l,a){return e.call(this,o,l,a,s)}):i=function(o,l,a){return e.call(this,o,ts(l),a,s)}),n[t](i,...r)}function Ch(s,t,e){const r=Kt(s);Je(r,"iterate",Ya);const n=r[t](...e);return(n===-1||n===!1)&&Xd(e[0])?(e[0]=Kt(e[0]),r[t](...e)):n}function fa(s,t,e=[]){Cn(),Ld();const r=Kt(s)[t].apply(s,e);return Vd(),Rn(),r}const vv=Fd("__proto__,__v_isRef,__isVue"),sx=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(Tn));function wv(s){Tn(s)||(s=String(s));const t=Kt(this);return Je(t,"has",s),t.hasOwnProperty(s)}class rx{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,r){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return i;if(e==="__v_raw")return r===(n?i?Bv:ox:i?ax:ix).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Tt(t);if(!n){let a;if(o&&(a=Av[e]))return a;if(e==="hasOwnProperty")return wv}const l=Reflect.get(t,e,rs(t)?t:r);return(Tn(e)?sx.has(e):vv(e))||(n||Je(t,"get",e),i)?l:rs(l)?o&&Nd(e)?l:l.value:le(l)?n?hx(l):zl(l):l}}class nx extends rx{constructor(t=!1){super(!1,t)}set(t,e,r,n){let i=t[e];if(!this._isShallow){const a=ri(i);if(!Gs(r)&&!ri(r)&&(i=Kt(i),r=Kt(r)),!Tt(t)&&rs(i)&&!rs(r))return a?!1:(i.value=r,!0)}const o=Tt(t)&&Nd(e)?Number(e)<t.length:Zt(t,e),l=Reflect.set(t,e,r,rs(t)?t:n);return t===Kt(n)&&(o?An(r,i)&&$r(t,"set",e,r):$r(t,"add",e,r)),l}deleteProperty(t,e){const r=Zt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&r&&$r(t,"delete",e,void 0),n}has(t,e){const r=Reflect.has(t,e);return(!Tn(e)||!sx.has(e))&&Je(t,"has",e),r}ownKeys(t){return Je(t,"iterate",Tt(t)?"length":si),Reflect.ownKeys(t)}}class Ev extends rx{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Sv=new nx,Tv=new Ev,Cv=new nx(!0);const Ru=s=>s,wo=s=>Reflect.getPrototypeOf(s);function Rv(s,t,e){return function(...r){const n=this.__v_raw,i=Kt(n),o=Vi(i),l=s==="entries"||s===Symbol.iterator&&o,a=s==="keys"&&o,h=n[s](...r),c=e?Ru:t?Iu:ts;return!t&&Je(i,"iterate",a?Cu:si),{next(){const{value:u,done:d}=h.next();return d?{value:u,done:d}:{value:l?[c(u[0]),c(u[1])]:c(u),done:d}},[Symbol.iterator](){return this}}}}function Eo(s){return function(...t){return s==="delete"?!1:s==="clear"?void 0:this}}function Iv(s,t){const e={get(n){const i=this.__v_raw,o=Kt(i),l=Kt(n);s||(An(n,l)&&Je(o,"get",n),Je(o,"get",l));const{has:a}=wo(o),h=t?Ru:s?Iu:ts;if(a.call(o,n))return h(i.get(n));if(a.call(o,l))return h(i.get(l));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!s&&Je(Kt(n),"iterate",si),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=Kt(i),l=Kt(n);return s||(An(n,l)&&Je(o,"has",n),Je(o,"has",l)),n===l?i.has(n):i.has(n)||i.has(l)},forEach(n,i){const o=this,l=o.__v_raw,a=Kt(l),h=t?Ru:s?Iu:ts;return!s&&Je(a,"iterate",si),l.forEach((c,u)=>n.call(i,h(c),h(u),o))}};return is(e,s?{add:Eo("add"),set:Eo("set"),delete:Eo("delete"),clear:Eo("clear")}:{add(n){!t&&!Gs(n)&&!ri(n)&&(n=Kt(n));const i=Kt(this);return wo(i).has.call(i,n)||(i.add(n),$r(i,"add",n,n)),this},set(n,i){!t&&!Gs(i)&&!ri(i)&&(i=Kt(i));const o=Kt(this),{has:l,get:a}=wo(o);let h=l.call(o,n);h||(n=Kt(n),h=l.call(o,n));const c=a.call(o,n);return o.set(n,i),h?An(i,c)&&$r(o,"set",n,i):$r(o,"add",n,i),this},delete(n){const i=Kt(this),{has:o,get:l}=wo(i);let a=o.call(i,n);a||(n=Kt(n),a=o.call(i,n)),l&&l.call(i,n);const h=i.delete(n);return a&&$r(i,"delete",n,void 0),h},clear(){const n=Kt(this),i=n.size!==0,o=n.clear();return i&&$r(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=Rv(n,s,t)}),e}function Gd(s,t){const e=Iv(s,t);return(r,n,i)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?r:Reflect.get(Zt(e,n)&&n in r?e:r,n,i)}const Mv={get:Gd(!1,!1)},Pv={get:Gd(!1,!0)},Fv={get:Gd(!0,!1)};const ix=new WeakMap,ax=new WeakMap,ox=new WeakMap,Bv=new WeakMap;function kv(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nv(s){return s.__v_skip||!Object.isExtensible(s)?0:kv(av(s))}function zl(s){return ri(s)?s:$d(s,!1,Sv,Mv,ix)}function lx(s){return $d(s,!1,Cv,Pv,ax)}function hx(s){return $d(s,!0,Tv,Fv,ox)}function $d(s,t,e,r,n){if(!le(s)||s.__v_raw&&!(t&&s.__v_isReactive))return s;const i=n.get(s);if(i)return i;const o=Nv(s);if(o===0)return s;const l=new Proxy(s,o===2?r:e);return n.set(s,l),l}function Ui(s){return ri(s)?Ui(s.__v_raw):!!(s&&s.__v_isReactive)}function ri(s){return!!(s&&s.__v_isReadonly)}function Gs(s){return!!(s&&s.__v_isShallow)}function Xd(s){return s?!!s.__v_raw:!1}function Kt(s){const t=s&&s.__v_raw;return t?Kt(t):s}function Ov(s){return!Zt(s,"__v_skip")&&Object.isExtensible(s)&&Hy(s,"__v_skip",!0),s}const ts=s=>le(s)?zl(s):s,Iu=s=>le(s)?hx(s):s;function rs(s){return s?s.__v_isRef===!0:!1}function $s(s){return cx(s,!1)}function Lv(s){return cx(s,!0)}function cx(s,t){return rs(s)?s:new Vv(s,t)}class Vv{constructor(t,e){this.dep=new Dd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Kt(t),this._value=e?t:ts(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,r=this.__v_isShallow||Gs(t)||ri(t);t=r?t:Kt(t),An(t,e)&&(this._rawValue=t,this._value=r?t:ts(t),this.dep.trigger())}}function ie(s){return rs(s)?s.value:s}const Uv={get:(s,t,e)=>t==="__v_raw"?s:ie(Reflect.get(s,t,e)),set:(s,t,e,r)=>{const n=s[t];return rs(n)&&!rs(e)?(n.value=e,!0):Reflect.set(s,t,e,r)}};function ux(s){return Ui(s)?s:new Proxy(s,Uv)}class Dv{constructor(t,e,r){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Dd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ha-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&se!==this)return Ky(this,!0),!0}get value(){const t=this.dep.track();return Jy(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Gv(s,t,e=!1){let r,n;return Rt(s)?r=s:(r=s.get,n=s.set),new Dv(r,n,e)}const So={},pl=new WeakMap;let Dn;function $v(s,t=!1,e=Dn){if(e){let r=pl.get(e);r||pl.set(e,r=[]),r.push(s)}}function Xv(s,t,e=re){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:l,call:a}=e,h=A=>n?A:Gs(A)||n===!1||n===0?fn(A,1):fn(A);let c,u,d,f,m=!1,g=!1;if(rs(s)?(u=()=>s.value,m=Gs(s)):Ui(s)?(u=()=>h(s),m=!0):Tt(s)?(g=!0,m=s.some(A=>Ui(A)||Gs(A)),u=()=>s.map(A=>{if(rs(A))return A.value;if(Ui(A))return h(A);if(Rt(A))return a?a(A,2):A()})):Rt(s)?t?u=a?()=>a(s,2):s:u=()=>{if(d){Cn();try{d()}finally{Rn()}}const A=Dn;Dn=c;try{return a?a(s,3,[f]):s(f)}finally{Dn=A}}:u=Sr,t&&n){const A=u,b=n===!0?1/0:n;u=()=>fn(A(),b)}const p=yv(),y=()=>{c.stop(),p&&p.active&&kd(p.effects,c)};if(i&&t){const A=t;t=(...b)=>{A(...b),y()}}let x=g?new Array(s.length).fill(So):So;const _=A=>{if(!(!(c.flags&1)||!c.dirty&&!A))if(t){const b=c.run();if(n||m||(g?b.some((w,v)=>An(w,x[v])):An(b,x))){d&&d();const w=Dn;Dn=c;try{const v=[b,x===So?void 0:g&&x[0]===So?[]:x,f];a?a(t,3,v):t(...v),x=b}finally{Dn=w}}}else c.run()};return l&&l(_),c=new Wy(u),c.scheduler=o?()=>o(_,!1):_,f=A=>$v(A,!1,c),d=c.onStop=()=>{const A=pl.get(c);if(A){if(a)a(A,4);else for(const b of A)b();pl.delete(c)}},t?r?_(!0):x=c.run():o?o(_.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function fn(s,t=1/0,e){if(t<=0||!le(s)||s.__v_skip||(e=e||new Set,e.has(s)))return s;if(e.add(s),t--,rs(s))fn(s.value,t,e);else if(Tt(s))for(let r=0;r<s.length;r++)fn(s[r],t,e);else if(Dy(s)||Vi(s))s.forEach(r=>{fn(r,t,e)});else if(Xy(s)){for(const r in s)fn(s[r],t,e);for(const r of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,r)&&fn(s[r],t,e)}return s}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function lo(s,t,e,r){try{return r?s(...r):s()}catch(n){Wl(n,t,e)}}function Rr(s,t,e,r){if(Rt(s)){const n=lo(s,t,e,r);return n&&Gy(n)&&n.catch(i=>{Wl(i,t,e)}),n}if(Tt(s)){const n=[];for(let i=0;i<s.length;i++)n.push(Rr(s[i],t,e,r));return n}}function Wl(s,t,e,r=!0){const n=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||re;if(t){let l=t.parent;const a=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const c=l.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](s,a,h)===!1)return}l=l.parent}if(i){Cn(),lo(i,null,10,[s,a,h]),Rn();return}}Hv(s,e,n,r,o)}function Hv(s,t,e,r=!0,n=!1){if(n)throw s;console.error(s)}const fs=[];let wr=-1;const Di=[];let cn=null,wi=0;const dx=Promise.resolve();let gl=null;function Hd(s){const t=gl||dx;return s?t.then(this?s.bind(this):s):t}function Yv(s){let t=wr+1,e=fs.length;for(;t<e;){const r=t+e>>>1,n=fs[r],i=ja(n);i<s||i===s&&n.flags&2?t=r+1:e=r}return t}function Yd(s){if(!(s.flags&1)){const t=ja(s),e=fs[fs.length-1];!e||!(s.flags&2)&&t>=ja(e)?fs.push(s):fs.splice(Yv(t),0,s),s.flags|=1,fx()}}function fx(){gl||(gl=dx.then(px))}function jv(s){Tt(s)?Di.push(...s):cn&&s.id===-1?cn.splice(wi+1,0,s):s.flags&1||(Di.push(s),s.flags|=1),fx()}function Wf(s,t,e=wr+1){for(;e<fs.length;e++){const r=fs[e];if(r&&r.flags&2){if(s&&r.id!==s.uid)continue;fs.splice(e,1),e--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function mx(s){if(Di.length){const t=[...new Set(Di)].sort((e,r)=>ja(e)-ja(r));if(Di.length=0,cn){cn.push(...t);return}for(cn=t,wi=0;wi<cn.length;wi++){const e=cn[wi];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}cn=null,wi=0}}const ja=s=>s.id==null?s.flags&2?-1:1/0:s.id;function px(s){try{for(wr=0;wr<fs.length;wr++){const t=fs[wr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),lo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;wr<fs.length;wr++){const t=fs[wr];t&&(t.flags&=-2)}wr=-1,fs.length=0,mx(),gl=null,(fs.length||Di.length)&&px()}}let Os=null,gx=null;function yl(s){const t=Os;return Os=s,gx=s&&s.type.__scopeId||null,t}function Ki(s,t=Os,e){if(!t||s._n)return s;const r=(...n)=>{r._d&&rm(-1);const i=yl(t);let o;try{o=s(...n)}finally{yl(i),r._d&&rm(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function kn(s,t,e,r){const n=s.dirs,i=t&&t.dirs;for(let o=0;o<n.length;o++){const l=n[o];i&&(l.oldValue=i[o].value);let a=l.dir[r];a&&(Cn(),Rr(a,e,8,[s.el,l,s,t]),Rn())}}const zv=Symbol("_vte"),Wv=s=>s.__isTeleport;function ql(s,t){s.shapeFlag&6&&s.component?(s.transition=t,ql(s.component.subTree,t)):s.shapeFlag&128?(s.ssContent.transition=t.clone(s.ssContent),s.ssFallback.transition=t.clone(s.ssFallback)):s.transition=t}/*! #__NO_SIDE_EFFECTS__ */function yx(s,t){return Rt(s)?is({name:s.name},t,{setup:s}):s}function xx(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function xl(s,t,e,r,n=!1){if(Tt(s)){s.forEach((m,g)=>xl(m,t&&(Tt(t)?t[g]:t),e,r,n));return}if(Gi(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xl(s,t,e,r.component.subTree);return}const i=r.shapeFlag&4?Zd(r.component):r.el,o=n?null:i,{i:l,r:a}=s,h=t&&t.r,c=l.refs===re?l.refs={}:l.refs,u=l.setupState,d=Kt(u),f=u===re?()=>!1:m=>Zt(d,m);if(h!=null&&h!==a&&(Te(h)?(c[h]=null,f(h)&&(u[h]=null)):rs(h)&&(h.value=null)),Rt(a))lo(a,l,12,[o,c]);else{const m=Te(a),g=rs(a);if(m||g){const p=()=>{if(s.f){const y=m?f(a)?u[a]:c[a]:a.value;n?Tt(y)&&kd(y,i):Tt(y)?y.includes(i)||y.push(i):m?(c[a]=[i],f(a)&&(u[a]=c[a])):(a.value=[i],s.k&&(c[s.k]=a.value))}else m?(c[a]=o,f(a)&&(u[a]=o)):g&&(a.value=o,s.k&&(c[s.k]=o))};o?(p.id=-1,We(p,e)):p()}}}Hl().requestIdleCallback;Hl().cancelIdleCallback;const Gi=s=>!!s.type.__asyncLoader,_x=s=>s.type.__isKeepAlive,qv={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(s,{slots:t}){const e=Xw(),r=e.ctx;if(!r.renderer)return()=>{const x=t.default&&t.default();return x&&x.length===1?x[0]:x};const n=new Map,i=new Set;let o=null;const l=e.suspense,{renderer:{p:a,m:h,um:c,o:{createElement:u}}}=r,d=u("div");r.activate=(x,_,A,b,w)=>{const v=x.component;h(x,_,A,0,l),a(v.vnode,x,_,A,v,l,b,x.slotScopeIds,w),We(()=>{v.isDeactivated=!1,v.a&&ka(v.a);const R=x.props&&x.props.onVnodeMounted;R&&Bs(R,v.parent,x)},l)},r.deactivate=x=>{const _=x.component;Al(_.m),Al(_.a),h(x,d,null,1,l),We(()=>{_.da&&ka(_.da);const A=x.props&&x.props.onVnodeUnmounted;A&&Bs(A,_.parent,x),_.isDeactivated=!0},l)};function f(x){Rh(x),c(x,e,l,!0)}function m(x){n.forEach((_,A)=>{const b=Nu(_.type);b&&!x(b)&&g(A)})}function g(x){const _=n.get(x);_&&(!o||!Ei(_,o))?f(_):o&&Rh(o),n.delete(x),i.delete(x)}Va(()=>[s.include,s.exclude],([x,_])=>{x&&m(A=>wa(x,A)),_&&m(A=>!wa(_,A))},{flush:"post",deep:!0});let p=null;const y=()=>{p!=null&&(bl(e.subTree.type)?We(()=>{n.set(p,To(e.subTree))},e.subTree.suspense):n.set(p,To(e.subTree)))};return Pr(y),bx(y),jd(()=>{n.forEach(x=>{const{subTree:_,suspense:A}=e,b=To(_);if(x.type===b.type&&x.key===b.key){Rh(b);const w=b.component.da;w&&We(w,A);return}f(x)})}),()=>{if(p=null,!t.default)return o=null;const x=t.default(),_=x[0];if(x.length>1)return o=null,x;if(!qa(_)||!(_.shapeFlag&4)&&!(_.shapeFlag&128))return o=null,_;let A=To(_);if(A.type===vn)return o=null,A;const b=A.type,w=Nu(Gi(A)?A.type.__asyncResolved||{}:b),{include:v,exclude:R,max:P}=s;if(v&&(!w||!wa(v,w))||R&&w&&wa(R,w))return A.shapeFlag&=-257,o=A,_;const F=A.key==null?b:A.key,B=n.get(F);return A.el&&(A=ni(A),_.shapeFlag&128&&(_.ssContent=A)),p=F,B?(A.el=B.el,A.component=B.component,A.transition&&ql(A,A.transition),A.shapeFlag|=512,i.delete(F),i.add(F)):(i.add(F),P&&i.size>parseInt(P,10)&&g(i.values().next().value)),A.shapeFlag|=256,o=A,bl(_.type)?_:A}}},Ie=qv;function wa(s,t){return Tt(s)?s.some(e=>wa(e,t)):Te(s)?s.split(",").includes(t):iv(s)?(s.lastIndex=0,s.test(t)):!1}function Kv(s,t){Ax(s,"a",t)}function Zv(s,t){Ax(s,"da",t)}function Ax(s,t,e=qe){const r=s.__wdc||(s.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(Kl(t,r,e),e){let n=e.parent;for(;n&&n.parent;)_x(n.parent.vnode)&&Qv(r,t,e,n),n=n.parent}}function Qv(s,t,e,r){const n=Kl(t,s,r,!0);zd(()=>{kd(r[t],n)},e)}function Rh(s){s.shapeFlag&=-257,s.shapeFlag&=-513}function To(s){return s.shapeFlag&128?s.ssContent:s}function Kl(s,t,e=qe,r=!1){if(e){const n=e[s]||(e[s]=[]),i=t.__weh||(t.__weh=(...o)=>{Cn();const l=uo(e),a=Rr(t,e,s,o);return l(),Rn(),a});return r?n.unshift(i):n.push(i),i}}const Kr=s=>(t,e=qe)=>{(!Ka||s==="sp")&&Kl(s,(...r)=>t(...r),e)},Jv=Kr("bm"),Pr=Kr("m"),tw=Kr("bu"),bx=Kr("u"),jd=Kr("bum"),zd=Kr("um"),ew=Kr("sp"),sw=Kr("rtg"),rw=Kr("rtc");function nw(s,t=qe){Kl("ec",s,t)}const iw="components";function ho(s,t){return ow(iw,s,!0,t)||s}const aw=Symbol.for("v-ndc");function ow(s,t,e=!0,r=!1){const n=Os||qe;if(n){const i=n.type;{const l=Nu(i,!1);if(l&&(l===t||l===Hs(t)||l===Xl(Hs(t))))return i}const o=qf(n[s]||i[s],t)||qf(n.appContext[s],t);return!o&&r?i:o}}function qf(s,t){return s&&(s[t]||s[Hs(t)]||s[Xl(Hs(t))])}function za(s,t,e,r){let n;const i=e,o=Tt(s);if(o||Te(s)){const l=o&&Ui(s);let a=!1;l&&(a=!Gs(s),s=jl(s)),n=new Array(s.length);for(let h=0,c=s.length;h<c;h++)n[h]=t(a?ts(s[h]):s[h],h,void 0,i)}else if(typeof s=="number"){n=new Array(s);for(let l=0;l<s;l++)n[l]=t(l+1,l,void 0,i)}else if(le(s))if(s[Symbol.iterator])n=Array.from(s,(l,a)=>t(l,a,void 0,i));else{const l=Object.keys(s);n=new Array(l.length);for(let a=0,h=l.length;a<h;a++){const c=l[a];n[a]=t(s[c],c,a,i)}}else n=[];return n}const Mu=s=>s?Gx(s)?Zd(s):Mu(s.parent):null,La=is(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>Mu(s.parent),$root:s=>Mu(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>wx(s),$forceUpdate:s=>s.f||(s.f=()=>{Yd(s.update)}),$nextTick:s=>s.n||(s.n=Hd.bind(s.proxy)),$watch:s=>Rw.bind(s)}),Ih=(s,t)=>s!==re&&!s.__isScriptSetup&&Zt(s,t),lw={get({_:s},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:r,data:n,props:i,accessCache:o,type:l,appContext:a}=s;let h;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return r[t];case 2:return n[t];case 4:return e[t];case 3:return i[t]}else{if(Ih(r,t))return o[t]=1,r[t];if(n!==re&&Zt(n,t))return o[t]=2,n[t];if((h=s.propsOptions[0])&&Zt(h,t))return o[t]=3,i[t];if(e!==re&&Zt(e,t))return o[t]=4,e[t];Pu&&(o[t]=0)}}const c=La[t];let u,d;if(c)return t==="$attrs"&&Je(s.attrs,"get",""),c(s);if((u=l.__cssModules)&&(u=u[t]))return u;if(e!==re&&Zt(e,t))return o[t]=4,e[t];if(d=a.config.globalProperties,Zt(d,t))return d[t]},set({_:s},t,e){const{data:r,setupState:n,ctx:i}=s;return Ih(n,t)?(n[t]=e,!0):r!==re&&Zt(r,t)?(r[t]=e,!0):Zt(s.props,t)||t[0]==="$"&&t.slice(1)in s?!1:(i[t]=e,!0)},has({_:{data:s,setupState:t,accessCache:e,ctx:r,appContext:n,propsOptions:i}},o){let l;return!!e[o]||s!==re&&Zt(s,o)||Ih(t,o)||(l=i[0])&&Zt(l,o)||Zt(r,o)||Zt(La,o)||Zt(n.config.globalProperties,o)},defineProperty(s,t,e){return e.get!=null?s._.accessCache[t]=0:Zt(e,"value")&&this.set(s,t,e.value,null),Reflect.defineProperty(s,t,e)}};function Kf(s){return Tt(s)?s.reduce((t,e)=>(t[e]=null,t),{}):s}let Pu=!0;function hw(s){const t=wx(s),e=s.proxy,r=s.ctx;Pu=!1,t.beforeCreate&&Zf(t.beforeCreate,s,"bc");const{data:n,computed:i,methods:o,watch:l,provide:a,inject:h,created:c,beforeMount:u,mounted:d,beforeUpdate:f,updated:m,activated:g,deactivated:p,beforeDestroy:y,beforeUnmount:x,destroyed:_,unmounted:A,render:b,renderTracked:w,renderTriggered:v,errorCaptured:R,serverPrefetch:P,expose:F,inheritAttrs:B,components:L,directives:Y,filters:Z}=t;if(h&&cw(h,r,null),o)for(const T in o){const C=o[T];Rt(C)&&(r[T]=C.bind(e))}if(n){const T=n.call(e,e);le(T)&&(s.data=zl(T))}if(Pu=!0,i)for(const T in i){const C=i[T],O=Rt(C)?C.bind(e,e):Rt(C.get)?C.get.bind(e,e):Sr,N=!Rt(C)&&Rt(C.set)?C.set.bind(e):Sr,V=Ns({get:O,set:N});Object.defineProperty(r,T,{enumerable:!0,configurable:!0,get:()=>V.value,set:G=>V.value=G})}if(l)for(const T in l)vx(l[T],r,e,T);if(a){const T=Rt(a)?a.call(e):a;Reflect.ownKeys(T).forEach(C=>{Qo(C,T[C])})}c&&Zf(c,s,"c");function E(T,C){Tt(C)?C.forEach(O=>T(O.bind(e))):C&&T(C.bind(e))}if(E(Jv,u),E(Pr,d),E(tw,f),E(bx,m),E(Kv,g),E(Zv,p),E(nw,R),E(rw,w),E(sw,v),E(jd,x),E(zd,A),E(ew,P),Tt(F))if(F.length){const T=s.exposed||(s.exposed={});F.forEach(C=>{Object.defineProperty(T,C,{get:()=>e[C],set:O=>e[C]=O})})}else s.exposed||(s.exposed={});b&&s.render===Sr&&(s.render=b),B!=null&&(s.inheritAttrs=B),L&&(s.components=L),Y&&(s.directives=Y),P&&xx(s)}function cw(s,t,e=Sr){Tt(s)&&(s=Fu(s));for(const r in s){const n=s[r];let i;le(n)?"default"in n?i=Tr(n.from||r,n.default,!0):i=Tr(n.from||r):i=Tr(n),rs(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function Zf(s,t,e){Rr(Tt(s)?s.map(r=>r.bind(t.proxy)):s.bind(t.proxy),t,e)}function vx(s,t,e,r){let n=r.includes(".")?Lx(e,r):()=>e[r];if(Te(s)){const i=t[s];Rt(i)&&Va(n,i)}else if(Rt(s))Va(n,s.bind(e));else if(le(s))if(Tt(s))s.forEach(i=>vx(i,t,e,r));else{const i=Rt(s.handler)?s.handler.bind(e):t[s.handler];Rt(i)&&Va(n,i,s)}}function wx(s){const t=s.type,{mixins:e,extends:r}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=s.appContext,l=i.get(t);let a;return l?a=l:!n.length&&!e&&!r?a=t:(a={},n.length&&n.forEach(h=>_l(a,h,o,!0)),_l(a,t,o)),le(t)&&i.set(t,a),a}function _l(s,t,e,r=!1){const{mixins:n,extends:i}=t;i&&_l(s,i,e,!0),n&&n.forEach(o=>_l(s,o,e,!0));for(const o in t)if(!(r&&o==="expose")){const l=uw[o]||e&&e[o];s[o]=l?l(s[o],t[o]):t[o]}return s}const uw={data:Qf,props:Jf,emits:Jf,methods:Ea,computed:Ea,beforeCreate:os,created:os,beforeMount:os,mounted:os,beforeUpdate:os,updated:os,beforeDestroy:os,beforeUnmount:os,destroyed:os,unmounted:os,activated:os,deactivated:os,errorCaptured:os,serverPrefetch:os,components:Ea,directives:Ea,watch:fw,provide:Qf,inject:dw};function Qf(s,t){return t?s?function(){return is(Rt(s)?s.call(this,this):s,Rt(t)?t.call(this,this):t)}:t:s}function dw(s,t){return Ea(Fu(s),Fu(t))}function Fu(s){if(Tt(s)){const t={};for(let e=0;e<s.length;e++)t[s[e]]=s[e];return t}return s}function os(s,t){return s?[...new Set([].concat(s,t))]:t}function Ea(s,t){return s?is(Object.create(null),s,t):t}function Jf(s,t){return s?Tt(s)&&Tt(t)?[...new Set([...s,...t])]:is(Object.create(null),Kf(s),Kf(t??{})):t}function fw(s,t){if(!s)return t;if(!t)return s;const e=is(Object.create(null),s);for(const r in t)e[r]=os(s[r],t[r]);return e}function Ex(){return{app:null,config:{isNativeTag:rv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mw=0;function pw(s,t){return function(r,n=null){Rt(r)||(r=is({},r)),n!=null&&!le(n)&&(n=null);const i=Ex(),o=new WeakSet,l=[];let a=!1;const h=i.app={_uid:mw++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:qw,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Rt(c.install)?(o.add(c),c.install(h,...u)):Rt(c)&&(o.add(c),c(h,...u))),h},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),h},component(c,u){return u?(i.components[c]=u,h):i.components[c]},directive(c,u){return u?(i.directives[c]=u,h):i.directives[c]},mount(c,u,d){if(!a){const f=h._ceVNode||ht(r,n);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),s(f,c,d),a=!0,h._container=c,c.__vue_app__=h,Zd(f.component)}},onUnmount(c){l.push(c)},unmount(){a&&(Rr(l,h._instance,16),s(null,h._container),delete h._container.__vue_app__)},provide(c,u){return i.provides[c]=u,h},runWithContext(c){const u=$i;$i=h;try{return c()}finally{$i=u}}};return h}}let $i=null;function Qo(s,t){if(qe){let e=qe.provides;const r=qe.parent&&qe.parent.provides;r===e&&(e=qe.provides=Object.create(r)),e[s]=t}}function Tr(s,t,e=!1){const r=qe||Os;if(r||$i){const n=$i?$i._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return e&&Rt(t)?t.call(r&&r.proxy):t}}const Sx={},Tx=()=>Object.create(Sx),Cx=s=>Object.getPrototypeOf(s)===Sx;function gw(s,t,e,r=!1){const n={},i=Tx();s.propsDefaults=Object.create(null),Rx(s,t,n,i);for(const o in s.propsOptions[0])o in n||(n[o]=void 0);e?s.props=r?n:lx(n):s.type.props?s.props=n:s.props=i,s.attrs=i}function yw(s,t,e,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=s,l=Kt(n),[a]=s.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=s.vnode.dynamicProps;for(let u=0;u<c.length;u++){let d=c[u];if(Zl(s.emitsOptions,d))continue;const f=t[d];if(a)if(Zt(i,d))f!==i[d]&&(i[d]=f,h=!0);else{const m=Hs(d);n[m]=Bu(a,l,m,f,s,!1)}else f!==i[d]&&(i[d]=f,h=!0)}}}else{Rx(s,t,n,i)&&(h=!0);let c;for(const u in l)(!t||!Zt(t,u)&&((c=li(u))===u||!Zt(t,c)))&&(a?e&&(e[u]!==void 0||e[c]!==void 0)&&(n[u]=Bu(a,l,u,void 0,s,!0)):delete n[u]);if(i!==l)for(const u in i)(!t||!Zt(t,u))&&(delete i[u],h=!0)}h&&$r(s.attrs,"set","")}function Rx(s,t,e,r){const[n,i]=s.propsOptions;let o=!1,l;if(t)for(let a in t){if(Ba(a))continue;const h=t[a];let c;n&&Zt(n,c=Hs(a))?!i||!i.includes(c)?e[c]=h:(l||(l={}))[c]=h:Zl(s.emitsOptions,a)||(!(a in r)||h!==r[a])&&(r[a]=h,o=!0)}if(i){const a=Kt(e),h=l||re;for(let c=0;c<i.length;c++){const u=i[c];e[u]=Bu(n,a,u,h[u],s,!Zt(h,u))}}return o}function Bu(s,t,e,r,n,i){const o=s[e];if(o!=null){const l=Zt(o,"default");if(l&&r===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&Rt(a)){const{propsDefaults:h}=n;if(e in h)r=h[e];else{const c=uo(n);r=h[e]=a.call(null,t),c()}}else r=a;n.ce&&n.ce._setProp(e,r)}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===li(e))&&(r=!0))}return r}const xw=new WeakMap;function Ix(s,t,e=!1){const r=e?xw:t.propsCache,n=r.get(s);if(n)return n;const i=s.props,o={},l=[];let a=!1;if(!Rt(s)){const c=u=>{a=!0;const[d,f]=Ix(u,t,!0);is(o,d),f&&l.push(...f)};!e&&t.mixins.length&&t.mixins.forEach(c),s.extends&&c(s.extends),s.mixins&&s.mixins.forEach(c)}if(!i&&!a)return le(s)&&r.set(s,Li),Li;if(Tt(i))for(let c=0;c<i.length;c++){const u=Hs(i[c]);tm(u)&&(o[u]=re)}else if(i)for(const c in i){const u=Hs(c);if(tm(u)){const d=i[c],f=o[u]=Tt(d)||Rt(d)?{type:d}:is({},d),m=f.type;let g=!1,p=!0;if(Tt(m))for(let y=0;y<m.length;++y){const x=m[y],_=Rt(x)&&x.name;if(_==="Boolean"){g=!0;break}else _==="String"&&(p=!1)}else g=Rt(m)&&m.name==="Boolean";f[0]=g,f[1]=p,(g||Zt(f,"default"))&&l.push(u)}}const h=[o,l];return le(s)&&r.set(s,h),h}function tm(s){return s[0]!=="$"&&!Ba(s)}const Mx=s=>s[0]==="_"||s==="$stable",Wd=s=>Tt(s)?s.map(Er):[Er(s)],_w=(s,t,e)=>{if(t._n)return t;const r=Ki((...n)=>Wd(t(...n)),e);return r._c=!1,r},Px=(s,t,e)=>{const r=s._ctx;for(const n in s){if(Mx(n))continue;const i=s[n];if(Rt(i))t[n]=_w(n,i,r);else if(i!=null){const o=Wd(i);t[n]=()=>o}}},Fx=(s,t)=>{const e=Wd(t);s.slots.default=()=>e},Bx=(s,t,e)=>{for(const r in t)(e||r!=="_")&&(s[r]=t[r])},Aw=(s,t,e)=>{const r=s.slots=Tx();if(s.vnode.shapeFlag&32){const n=t._;n?(Bx(r,t,e),e&&Hy(r,"_",n,!0)):Px(t,r)}else t&&Fx(s,t)},bw=(s,t,e)=>{const{vnode:r,slots:n}=s;let i=!0,o=re;if(r.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:Bx(n,t,e):(i=!t.$stable,Px(t,n)),o=t}else t&&(Fx(s,t),o={default:1});if(i)for(const l in n)!Mx(l)&&o[l]==null&&delete n[l]},We=Nw;function vw(s){return ww(s)}function ww(s,t){const e=Hl();e.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:l,createComment:a,setText:h,setElementText:c,parentNode:u,nextSibling:d,setScopeId:f=Sr,insertStaticContent:m}=s,g=(S,I,k,D=null,$=null,K=null,rt=void 0,ot=null,it=!!I.dynamicChildren)=>{if(S===I)return;S&&!Ei(S,I)&&(D=U(S),G(S,$,K,!0),S=null),I.patchFlag===-2&&(it=!1,I.dynamicChildren=null);const{type:et,ref:_t,shapeFlag:ct}=I;switch(et){case Ql:p(S,I,k,D);break;case vn:y(S,I,k,D);break;case Jo:S==null&&x(I,k,D,rt);break;case we:L(S,I,k,D,$,K,rt,ot,it);break;default:ct&1?b(S,I,k,D,$,K,rt,ot,it):ct&6?Y(S,I,k,D,$,K,rt,ot,it):(ct&64||ct&128)&&et.process(S,I,k,D,$,K,rt,ot,it,z)}_t!=null&&$&&xl(_t,S&&S.ref,K,I||S,!I)},p=(S,I,k,D)=>{if(S==null)r(I.el=l(I.children),k,D);else{const $=I.el=S.el;I.children!==S.children&&h($,I.children)}},y=(S,I,k,D)=>{S==null?r(I.el=a(I.children||""),k,D):I.el=S.el},x=(S,I,k,D)=>{[S.el,S.anchor]=m(S.children,I,k,D,S.el,S.anchor)},_=({el:S,anchor:I},k,D)=>{let $;for(;S&&S!==I;)$=d(S),r(S,k,D),S=$;r(I,k,D)},A=({el:S,anchor:I})=>{let k;for(;S&&S!==I;)k=d(S),n(S),S=k;n(I)},b=(S,I,k,D,$,K,rt,ot,it)=>{I.type==="svg"?rt="svg":I.type==="math"&&(rt="mathml"),S==null?w(I,k,D,$,K,rt,ot,it):P(S,I,$,K,rt,ot,it)},w=(S,I,k,D,$,K,rt,ot)=>{let it,et;const{props:_t,shapeFlag:ct,transition:gt,dirs:St}=S;if(it=S.el=o(S.type,K,_t&&_t.is,_t),ct&8?c(it,S.children):ct&16&&R(S.children,it,null,D,$,Mh(S,K),rt,ot),St&&kn(S,null,D,"created"),v(it,S,S.scopeId,rt,D),_t){for(const Qt in _t)Qt!=="value"&&!Ba(Qt)&&i(it,Qt,null,_t[Qt],K,D);"value"in _t&&i(it,"value",null,_t.value,K),(et=_t.onVnodeBeforeMount)&&Bs(et,D,S)}St&&kn(S,null,D,"beforeMount");const kt=Ew($,gt);kt&&gt.beforeEnter(it),r(it,I,k),((et=_t&&_t.onVnodeMounted)||kt||St)&&We(()=>{et&&Bs(et,D,S),kt&&gt.enter(it),St&&kn(S,null,D,"mounted")},$)},v=(S,I,k,D,$)=>{if(k&&f(S,k),D)for(let K=0;K<D.length;K++)f(S,D[K]);if($){let K=$.subTree;if(I===K||bl(K.type)&&(K.ssContent===I||K.ssFallback===I)){const rt=$.vnode;v(S,rt,rt.scopeId,rt.slotScopeIds,$.parent)}}},R=(S,I,k,D,$,K,rt,ot,it=0)=>{for(let et=it;et<S.length;et++){const _t=S[et]=ot?un(S[et]):Er(S[et]);g(null,_t,I,k,D,$,K,rt,ot)}},P=(S,I,k,D,$,K,rt)=>{const ot=I.el=S.el;let{patchFlag:it,dynamicChildren:et,dirs:_t}=I;it|=S.patchFlag&16;const ct=S.props||re,gt=I.props||re;let St;if(k&&Nn(k,!1),(St=gt.onVnodeBeforeUpdate)&&Bs(St,k,I,S),_t&&kn(I,S,k,"beforeUpdate"),k&&Nn(k,!0),(ct.innerHTML&&gt.innerHTML==null||ct.textContent&&gt.textContent==null)&&c(ot,""),et?F(S.dynamicChildren,et,ot,k,D,Mh(I,$),K):rt||C(S,I,ot,null,k,D,Mh(I,$),K,!1),it>0){if(it&16)B(ot,ct,gt,k,$);else if(it&2&&ct.class!==gt.class&&i(ot,"class",null,gt.class,$),it&4&&i(ot,"style",ct.style,gt.style,$),it&8){const kt=I.dynamicProps;for(let Qt=0;Qt<kt.length;Qt++){const zt=kt[Qt],Ne=ct[zt],De=gt[zt];(De!==Ne||zt==="value")&&i(ot,zt,Ne,De,$,k)}}it&1&&S.children!==I.children&&c(ot,I.children)}else!rt&&et==null&&B(ot,ct,gt,k,$);((St=gt.onVnodeUpdated)||_t)&&We(()=>{St&&Bs(St,k,I,S),_t&&kn(I,S,k,"updated")},D)},F=(S,I,k,D,$,K,rt)=>{for(let ot=0;ot<I.length;ot++){const it=S[ot],et=I[ot],_t=it.el&&(it.type===we||!Ei(it,et)||it.shapeFlag&70)?u(it.el):k;g(it,et,_t,null,D,$,K,rt,!0)}},B=(S,I,k,D,$)=>{if(I!==k){if(I!==re)for(const K in I)!Ba(K)&&!(K in k)&&i(S,K,I[K],null,$,D);for(const K in k){if(Ba(K))continue;const rt=k[K],ot=I[K];rt!==ot&&K!=="value"&&i(S,K,ot,rt,$,D)}"value"in k&&i(S,"value",I.value,k.value,$)}},L=(S,I,k,D,$,K,rt,ot,it)=>{const et=I.el=S?S.el:l(""),_t=I.anchor=S?S.anchor:l("");let{patchFlag:ct,dynamicChildren:gt,slotScopeIds:St}=I;St&&(ot=ot?ot.concat(St):St),S==null?(r(et,k,D),r(_t,k,D),R(I.children||[],k,_t,$,K,rt,ot,it)):ct>0&&ct&64&&gt&&S.dynamicChildren?(F(S.dynamicChildren,gt,k,$,K,rt,ot),(I.key!=null||$&&I===$.subTree)&&kx(S,I,!0)):C(S,I,k,_t,$,K,rt,ot,it)},Y=(S,I,k,D,$,K,rt,ot,it)=>{I.slotScopeIds=ot,S==null?I.shapeFlag&512?$.ctx.activate(I,k,D,rt,it):Z(I,k,D,$,K,rt,it):pt(S,I,it)},Z=(S,I,k,D,$,K,rt)=>{const ot=S.component=$w(S,D,$);if(_x(S)&&(ot.ctx.renderer=z),Hw(ot,!1,rt),ot.asyncDep){if($&&$.registerDep(ot,E,rt),!S.el){const it=ot.subTree=ht(vn);y(null,it,I,k)}}else E(ot,S,I,k,$,K,rt)},pt=(S,I,k)=>{const D=I.component=S.component;if(Bw(S,I,k))if(D.asyncDep&&!D.asyncResolved){T(D,I,k);return}else D.next=I,D.update();else I.el=S.el,D.vnode=I},E=(S,I,k,D,$,K,rt)=>{const ot=()=>{if(S.isMounted){let{next:ct,bu:gt,u:St,parent:kt,vnode:Qt}=S;{const Fs=Nx(S);if(Fs){ct&&(ct.el=Qt.el,T(S,ct,rt)),Fs.asyncDep.then(()=>{S.isUnmounted||ot()});return}}let zt=ct,Ne;Nn(S,!1),ct?(ct.el=Qt.el,T(S,ct,rt)):ct=Qt,gt&&ka(gt),(Ne=ct.props&&ct.props.onVnodeBeforeUpdate)&&Bs(Ne,kt,ct,Qt),Nn(S,!0);const De=em(S),vs=S.subTree;S.subTree=De,g(vs,De,u(vs.el),U(vs),S,$,K),ct.el=De.el,zt===null&&kw(S,De.el),St&&We(St,$),(Ne=ct.props&&ct.props.onVnodeUpdated)&&We(()=>Bs(Ne,kt,ct,Qt),$)}else{let ct;const{el:gt,props:St}=I,{bm:kt,m:Qt,parent:zt,root:Ne,type:De}=S,vs=Gi(I);Nn(S,!1),kt&&ka(kt),!vs&&(ct=St&&St.onVnodeBeforeMount)&&Bs(ct,zt,I),Nn(S,!0);{Ne.ce&&Ne.ce._injectChildStyle(De);const Fs=S.subTree=em(S);g(null,Fs,k,D,S,$,K),I.el=Fs.el}if(Qt&&We(Qt,$),!vs&&(ct=St&&St.onVnodeMounted)){const Fs=I;We(()=>Bs(ct,zt,Fs),$)}(I.shapeFlag&256||zt&&Gi(zt.vnode)&&zt.vnode.shapeFlag&256)&&S.a&&We(S.a,$),S.isMounted=!0,I=k=D=null}};S.scope.on();const it=S.effect=new Wy(ot);S.scope.off();const et=S.update=it.run.bind(it),_t=S.job=it.runIfDirty.bind(it);_t.i=S,_t.id=S.uid,it.scheduler=()=>Yd(_t),Nn(S,!0),et()},T=(S,I,k)=>{I.component=S;const D=S.vnode.props;S.vnode=I,S.next=null,yw(S,I.props,D,k),bw(S,I.children,k),Cn(),Wf(S),Rn()},C=(S,I,k,D,$,K,rt,ot,it=!1)=>{const et=S&&S.children,_t=S?S.shapeFlag:0,ct=I.children,{patchFlag:gt,shapeFlag:St}=I;if(gt>0){if(gt&128){N(et,ct,k,D,$,K,rt,ot,it);return}else if(gt&256){O(et,ct,k,D,$,K,rt,ot,it);return}}St&8?(_t&16&&at(et,$,K),ct!==et&&c(k,ct)):_t&16?St&16?N(et,ct,k,D,$,K,rt,ot,it):at(et,$,K,!0):(_t&8&&c(k,""),St&16&&R(ct,k,D,$,K,rt,ot,it))},O=(S,I,k,D,$,K,rt,ot,it)=>{S=S||Li,I=I||Li;const et=S.length,_t=I.length,ct=Math.min(et,_t);let gt;for(gt=0;gt<ct;gt++){const St=I[gt]=it?un(I[gt]):Er(I[gt]);g(S[gt],St,k,null,$,K,rt,ot,it)}et>_t?at(S,$,K,!0,!1,ct):R(I,k,D,$,K,rt,ot,it,ct)},N=(S,I,k,D,$,K,rt,ot,it)=>{let et=0;const _t=I.length;let ct=S.length-1,gt=_t-1;for(;et<=ct&&et<=gt;){const St=S[et],kt=I[et]=it?un(I[et]):Er(I[et]);if(Ei(St,kt))g(St,kt,k,null,$,K,rt,ot,it);else break;et++}for(;et<=ct&&et<=gt;){const St=S[ct],kt=I[gt]=it?un(I[gt]):Er(I[gt]);if(Ei(St,kt))g(St,kt,k,null,$,K,rt,ot,it);else break;ct--,gt--}if(et>ct){if(et<=gt){const St=gt+1,kt=St<_t?I[St].el:D;for(;et<=gt;)g(null,I[et]=it?un(I[et]):Er(I[et]),k,kt,$,K,rt,ot,it),et++}}else if(et>gt)for(;et<=ct;)G(S[et],$,K,!0),et++;else{const St=et,kt=et,Qt=new Map;for(et=kt;et<=gt;et++){const Ge=I[et]=it?un(I[et]):Er(I[et]);Ge.key!=null&&Qt.set(Ge.key,et)}let zt,Ne=0;const De=gt-kt+1;let vs=!1,Fs=0;const Fn=new Array(De);for(et=0;et<De;et++)Fn[et]=0;for(et=St;et<=ct;et++){const Ge=S[et];if(Ne>=De){G(Ge,$,K,!0);continue}let H;if(Ge.key!=null)H=Qt.get(Ge.key);else for(zt=kt;zt<=gt;zt++)if(Fn[zt-kt]===0&&Ei(Ge,I[zt])){H=zt;break}H===void 0?G(Ge,$,K,!0):(Fn[H-kt]=et+1,H>=Fs?Fs=H:vs=!0,g(Ge,I[H],k,null,$,K,rt,ot,it),Ne++)}const mi=vs?Sw(Fn):Li;for(zt=mi.length-1,et=De-1;et>=0;et--){const Ge=kt+et,H=I[Ge],W=Ge+1<_t?I[Ge+1].el:D;Fn[et]===0?g(null,H,k,W,$,K,rt,ot,it):vs&&(zt<0||et!==mi[zt]?V(H,k,W,2):zt--)}}},V=(S,I,k,D,$=null)=>{const{el:K,type:rt,transition:ot,children:it,shapeFlag:et}=S;if(et&6){V(S.component.subTree,I,k,D);return}if(et&128){S.suspense.move(I,k,D);return}if(et&64){rt.move(S,I,k,z);return}if(rt===we){r(K,I,k);for(let ct=0;ct<it.length;ct++)V(it[ct],I,k,D);r(S.anchor,I,k);return}if(rt===Jo){_(S,I,k);return}if(D!==2&&et&1&&ot)if(D===0)ot.beforeEnter(K),r(K,I,k),We(()=>ot.enter(K),$);else{const{leave:ct,delayLeave:gt,afterLeave:St}=ot,kt=()=>r(K,I,k),Qt=()=>{ct(K,()=>{kt(),St&&St()})};gt?gt(K,kt,Qt):Qt()}else r(K,I,k)},G=(S,I,k,D=!1,$=!1)=>{const{type:K,props:rt,ref:ot,children:it,dynamicChildren:et,shapeFlag:_t,patchFlag:ct,dirs:gt,cacheIndex:St}=S;if(ct===-2&&($=!1),ot!=null&&xl(ot,null,k,S,!0),St!=null&&(I.renderCache[St]=void 0),_t&256){I.ctx.deactivate(S);return}const kt=_t&1&&gt,Qt=!Gi(S);let zt;if(Qt&&(zt=rt&&rt.onVnodeBeforeUnmount)&&Bs(zt,I,S),_t&6)st(S.component,k,D);else{if(_t&128){S.suspense.unmount(k,D);return}kt&&kn(S,null,I,"beforeUnmount"),_t&64?S.type.remove(S,I,k,z,D):et&&!et.hasOnce&&(K!==we||ct>0&&ct&64)?at(et,I,k,!1,!0):(K===we&&ct&384||!$&&_t&16)&&at(it,I,k),D&&X(S)}(Qt&&(zt=rt&&rt.onVnodeUnmounted)||kt)&&We(()=>{zt&&Bs(zt,I,S),kt&&kn(S,null,I,"unmounted")},k)},X=S=>{const{type:I,el:k,anchor:D,transition:$}=S;if(I===we){tt(k,D);return}if(I===Jo){A(S);return}const K=()=>{n(k),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(S.shapeFlag&1&&$&&!$.persisted){const{leave:rt,delayLeave:ot}=$,it=()=>rt(k,K);ot?ot(S.el,K,it):it()}else K()},tt=(S,I)=>{let k;for(;S!==I;)k=d(S),n(S),S=k;n(I)},st=(S,I,k)=>{const{bum:D,scope:$,job:K,subTree:rt,um:ot,m:it,a:et}=S;Al(it),Al(et),D&&ka(D),$.stop(),K&&(K.flags|=8,G(rt,S,I,k)),ot&&We(ot,I),We(()=>{S.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},at=(S,I,k,D=!1,$=!1,K=0)=>{for(let rt=K;rt<S.length;rt++)G(S[rt],I,k,D,$)},U=S=>{if(S.shapeFlag&6)return U(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const I=d(S.anchor||S.el),k=I&&I[zv];return k?d(k):I};let Q=!1;const q=(S,I,k)=>{S==null?I._vnode&&G(I._vnode,null,null,!0):g(I._vnode||null,S,I,null,null,null,k),I._vnode=S,Q||(Q=!0,Wf(),mx(),Q=!1)},z={p:g,um:G,m:V,r:X,mt:Z,mc:R,pc:C,pbc:F,n:U,o:s};return{render:q,hydrate:void 0,createApp:pw(q)}}function Mh({type:s,props:t},e){return e==="svg"&&s==="foreignObject"||e==="mathml"&&s==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function Nn({effect:s,job:t},e){e?(s.flags|=32,t.flags|=4):(s.flags&=-33,t.flags&=-5)}function Ew(s,t){return(!s||s&&!s.pendingBranch)&&t&&!t.persisted}function kx(s,t,e=!1){const r=s.children,n=t.children;if(Tt(r)&&Tt(n))for(let i=0;i<r.length;i++){const o=r[i];let l=n[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[i]=un(n[i]),l.el=o.el),!e&&l.patchFlag!==-2&&kx(o,l)),l.type===Ql&&(l.el=o.el)}}function Sw(s){const t=s.slice(),e=[0];let r,n,i,o,l;const a=s.length;for(r=0;r<a;r++){const h=s[r];if(h!==0){if(n=e[e.length-1],s[n]<h){t[r]=n,e.push(r);continue}for(i=0,o=e.length-1;i<o;)l=i+o>>1,s[e[l]]<h?i=l+1:o=l;h<s[e[i]]&&(i>0&&(t[r]=e[i-1]),e[i]=r)}}for(i=e.length,o=e[i-1];i-- >0;)e[i]=o,o=t[o];return e}function Nx(s){const t=s.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Nx(t)}function Al(s){if(s)for(let t=0;t<s.length;t++)s[t].flags|=8}const Tw=Symbol.for("v-scx"),Cw=()=>Tr(Tw);function Va(s,t,e){return Ox(s,t,e)}function Ox(s,t,e=re){const{immediate:r,deep:n,flush:i,once:o}=e,l=is({},e),a=t&&r||!t&&i!=="post";let h;if(Ka){if(i==="sync"){const f=Cw();h=f.__watcherHandles||(f.__watcherHandles=[])}else if(!a){const f=()=>{};return f.stop=Sr,f.resume=Sr,f.pause=Sr,f}}const c=qe;l.call=(f,m,g)=>Rr(f,c,m,g);let u=!1;i==="post"?l.scheduler=f=>{We(f,c&&c.suspense)}:i!=="sync"&&(u=!0,l.scheduler=(f,m)=>{m?f():Yd(f)}),l.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=Xv(s,t,l);return Ka&&(h?h.push(d):a&&d()),d}function Rw(s,t,e){const r=this.proxy,n=Te(s)?s.includes(".")?Lx(r,s):()=>r[s]:s.bind(r,r);let i;Rt(t)?i=t:(i=t.handler,e=t);const o=uo(this),l=Ox(n,i.bind(r),e);return o(),l}function Lx(s,t){const e=t.split(".");return()=>{let r=s;for(let n=0;n<e.length&&r;n++)r=r[e[n]];return r}}const Iw=(s,t)=>t==="modelValue"||t==="model-value"?s.modelModifiers:s[`${t}Modifiers`]||s[`${Hs(t)}Modifiers`]||s[`${li(t)}Modifiers`];function Mw(s,t,...e){if(s.isUnmounted)return;const r=s.vnode.props||re;let n=e;const i=t.startsWith("update:"),o=i&&Iw(r,t.slice(7));o&&(o.trim&&(n=e.map(c=>Te(c)?c.trim():c)),o.number&&(n=e.map(hv)));let l,a=r[l=wh(t)]||r[l=wh(Hs(t))];!a&&i&&(a=r[l=wh(li(t))]),a&&Rr(a,s,6,n);const h=r[l+"Once"];if(h){if(!s.emitted)s.emitted={};else if(s.emitted[l])return;s.emitted[l]=!0,Rr(h,s,6,n)}}function Vx(s,t,e=!1){const r=t.emitsCache,n=r.get(s);if(n!==void 0)return n;const i=s.emits;let o={},l=!1;if(!Rt(s)){const a=h=>{const c=Vx(h,t,!0);c&&(l=!0,is(o,c))};!e&&t.mixins.length&&t.mixins.forEach(a),s.extends&&a(s.extends),s.mixins&&s.mixins.forEach(a)}return!i&&!l?(le(s)&&r.set(s,null),null):(Tt(i)?i.forEach(a=>o[a]=null):is(o,i),le(s)&&r.set(s,o),o)}function Zl(s,t){return!s||!Gl(t)?!1:(t=t.slice(2).replace(/Once$/,""),Zt(s,t[0].toLowerCase()+t.slice(1))||Zt(s,li(t))||Zt(s,t))}function em(s){const{type:t,vnode:e,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:l,emit:a,render:h,renderCache:c,props:u,data:d,setupState:f,ctx:m,inheritAttrs:g}=s,p=yl(s);let y,x;try{if(e.shapeFlag&4){const A=n||r,b=A;y=Er(h.call(b,A,c,u,f,d,m)),x=l}else{const A=t;y=Er(A.length>1?A(u,{attrs:l,slots:o,emit:a}):A(u,null)),x=t.props?l:Pw(l)}}catch(A){Ua.length=0,Wl(A,s,1),y=ht(vn)}let _=y;if(x&&g!==!1){const A=Object.keys(x),{shapeFlag:b}=_;A.length&&b&7&&(i&&A.some(Bd)&&(x=Fw(x,i)),_=ni(_,x,!1,!0))}return e.dirs&&(_=ni(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(e.dirs):e.dirs),e.transition&&ql(_,e.transition),y=_,yl(p),y}const Pw=s=>{let t;for(const e in s)(e==="class"||e==="style"||Gl(e))&&((t||(t={}))[e]=s[e]);return t},Fw=(s,t)=>{const e={};for(const r in s)(!Bd(r)||!(r.slice(9)in t))&&(e[r]=s[r]);return e};function Bw(s,t,e){const{props:r,children:n,component:i}=s,{props:o,children:l,patchFlag:a}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return r?sm(r,o,h):!!o;if(a&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const d=c[u];if(o[d]!==r[d]&&!Zl(h,d))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?sm(r,o,h):!0:!!o;return!1}function sm(s,t,e){const r=Object.keys(t);if(r.length!==Object.keys(s).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]!==s[i]&&!Zl(e,i))return!0}return!1}function kw({vnode:s,parent:t},e){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===s&&(r.el=s.el),r===s)(s=t.vnode).el=e,t=t.parent;else break}}const bl=s=>s.__isSuspense;function Nw(s,t){t&&t.pendingBranch?Tt(s)?t.effects.push(...s):t.effects.push(s):jv(s)}const we=Symbol.for("v-fgt"),Ql=Symbol.for("v-txt"),vn=Symbol.for("v-cmt"),Jo=Symbol.for("v-stc"),Ua=[];let Cs=null;function At(s=!1){Ua.push(Cs=s?null:[])}function Ow(){Ua.pop(),Cs=Ua[Ua.length-1]||null}let Wa=1;function rm(s,t=!1){Wa+=s,s<0&&Cs&&t&&(Cs.hasOnce=!0)}function Ux(s){return s.dynamicChildren=Wa>0?Cs||Li:null,Ow(),Wa>0&&Cs&&Cs.push(s),s}function Jt(s,t,e,r,n,i){return Ux(vt(s,t,e,r,n,i,!0))}function ne(s,t,e,r,n){return Ux(ht(s,t,e,r,n,!0))}function qa(s){return s?s.__v_isVNode===!0:!1}function Ei(s,t){return s.type===t.type&&s.key===t.key}const Dx=({key:s})=>s??null,tl=({ref:s,ref_key:t,ref_for:e})=>(typeof s=="number"&&(s=""+s),s!=null?Te(s)||rs(s)||Rt(s)?{i:Os,r:s,k:t,f:!!e}:s:null);function vt(s,t=null,e=null,r=0,n=null,i=s===we?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:s,props:t,key:t&&Dx(t),ref:t&&tl(t),scopeId:gx,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Os};return l?(Kd(a,e),i&128&&s.normalize(a)):e&&(a.shapeFlag|=Te(e)?8:16),Wa>0&&!o&&Cs&&(a.patchFlag>0||i&6)&&a.patchFlag!==32&&Cs.push(a),a}const ht=Lw;function Lw(s,t=null,e=null,r=0,n=null,i=!1){if((!s||s===aw)&&(s=vn),qa(s)){const l=ni(s,t,!0);return e&&Kd(l,e),Wa>0&&!i&&Cs&&(l.shapeFlag&6?Cs[Cs.indexOf(s)]=l:Cs.push(l)),l.patchFlag=-2,l}if(Ww(s)&&(s=s.__vccOpts),t){t=Vw(t);let{class:l,style:a}=t;l&&!Te(l)&&(t.class=qi(l)),le(a)&&(Xd(a)&&!Tt(a)&&(a=is({},a)),t.style=Od(a))}const o=Te(s)?1:bl(s)?128:Wv(s)?64:le(s)?4:Rt(s)?2:0;return vt(s,t,e,r,n,o,i,!0)}function Vw(s){return s?Xd(s)||Cx(s)?is({},s):s:null}function ni(s,t,e=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:l,transition:a}=s,h=t?Uw(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:s.type,props:h,key:h&&Dx(h),ref:t&&t.ref?e&&i?Tt(i)?i.concat(tl(t)):[i,tl(t)]:tl(t):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:l,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:t&&s.type!==we?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:a,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&ni(s.ssContent),ssFallback:s.ssFallback&&ni(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return a&&r&&ql(c,a.clone(c)),c}function qd(s=" ",t=0){return ht(Ql,null,s,t)}function Jl(s,t){const e=ht(Jo,null,s);return e.staticCount=t,e}function co(s="",t=!1){return t?(At(),ne(vn,null,s)):ht(vn,null,s)}function Er(s){return s==null||typeof s=="boolean"?ht(vn):Tt(s)?ht(we,null,s.slice()):qa(s)?un(s):ht(Ql,null,String(s))}function un(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:ni(s)}function Kd(s,t){let e=0;const{shapeFlag:r}=s;if(t==null)t=null;else if(Tt(t))e=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),Kd(s,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!Cx(t)?t._ctx=Os:n===3&&Os&&(Os.slots._===1?t._=1:(t._=2,s.patchFlag|=1024))}else Rt(t)?(t={default:t,_ctx:Os},e=32):(t=String(t),r&64?(e=16,t=[qd(t)]):e=8);s.children=t,s.shapeFlag|=e}function Uw(...s){const t={};for(let e=0;e<s.length;e++){const r=s[e];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=qi([t.class,r.class]));else if(n==="style")t.style=Od([t.style,r.style]);else if(Gl(n)){const i=t[n],o=r[n];o&&i!==o&&!(Tt(i)&&i.includes(o))&&(t[n]=i?[].concat(i,o):o)}else n!==""&&(t[n]=r[n])}return t}function Bs(s,t,e,r=null){Rr(s,t,7,[e,r])}const Dw=Ex();let Gw=0;function $w(s,t,e){const r=s.type,n=(t?t.appContext:s.appContext)||Dw,i={uid:Gw++,vnode:s,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ix(r,n),emitsOptions:Vx(r,n),emit:null,emitted:null,propsDefaults:re,inheritAttrs:r.inheritAttrs,ctx:re,data:re,props:re,attrs:re,slots:re,refs:re,setupState:re,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Mw.bind(null,i),s.ce&&s.ce(i),i}let qe=null;const Xw=()=>qe||Os;let vl,ku;{const s=Hl(),t=(e,r)=>{let n;return(n=s[e])||(n=s[e]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};vl=t("__VUE_INSTANCE_SETTERS__",e=>qe=e),ku=t("__VUE_SSR_SETTERS__",e=>Ka=e)}const uo=s=>{const t=qe;return vl(s),s.scope.on(),()=>{s.scope.off(),vl(t)}},nm=()=>{qe&&qe.scope.off(),vl(null)};function Gx(s){return s.vnode.shapeFlag&4}let Ka=!1;function Hw(s,t=!1,e=!1){t&&ku(t);const{props:r,children:n}=s.vnode,i=Gx(s);gw(s,r,i,t),Aw(s,n,e);const o=i?Yw(s,t):void 0;return t&&ku(!1),o}function Yw(s,t){const e=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,lw);const{setup:r}=e;if(r){Cn();const n=s.setupContext=r.length>1?zw(s):null,i=uo(s),o=lo(r,s,0,[s.props,n]),l=Gy(o);if(Rn(),i(),(l||s.sp)&&!Gi(s)&&xx(s),l){if(o.then(nm,nm),t)return o.then(a=>{im(s,a)}).catch(a=>{Wl(a,s,0)});s.asyncDep=o}else im(s,o)}else $x(s)}function im(s,t,e){Rt(t)?s.type.__ssrInlineRender?s.ssrRender=t:s.render=t:le(t)&&(s.setupState=ux(t)),$x(s)}function $x(s,t,e){const r=s.type;s.render||(s.render=r.render||Sr);{const n=uo(s);Cn();try{hw(s)}finally{Rn(),n()}}}const jw={get(s,t){return Je(s,"get",""),s[t]}};function zw(s){const t=e=>{s.exposed=e||{}};return{attrs:new Proxy(s.attrs,jw),slots:s.slots,emit:s.emit,expose:t}}function Zd(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(ux(Ov(s.exposed)),{get(t,e){if(e in t)return t[e];if(e in La)return La[e](s)},has(t,e){return e in t||e in La}})):s.proxy}function Nu(s,t=!0){return Rt(s)?s.displayName||s.name:s.name||t&&s.__name}function Ww(s){return Rt(s)&&"__vccOpts"in s}const Ns=(s,t)=>Gv(s,t,Ka);function Xx(s,t,e){const r=arguments.length;return r===2?le(t)&&!Tt(t)?qa(t)?ht(s,null,[t]):ht(s,t):ht(s,null,t):(r>3?e=Array.prototype.slice.call(arguments,2):r===3&&qa(e)&&(e=[e]),ht(s,t,e))}const qw="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ou;const am=typeof window<"u"&&window.trustedTypes;if(am)try{Ou=am.createPolicy("vue",{createHTML:s=>s})}catch{}const Hx=Ou?s=>Ou.createHTML(s):s=>s,Kw="http://www.w3.org/2000/svg",Zw="http://www.w3.org/1998/Math/MathML",Dr=typeof document<"u"?document:null,om=Dr&&Dr.createElement("template"),Qw={insert:(s,t,e)=>{t.insertBefore(s,e||null)},remove:s=>{const t=s.parentNode;t&&t.removeChild(s)},createElement:(s,t,e,r)=>{const n=t==="svg"?Dr.createElementNS(Kw,s):t==="mathml"?Dr.createElementNS(Zw,s):e?Dr.createElement(s,{is:e}):Dr.createElement(s);return s==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:s=>Dr.createTextNode(s),createComment:s=>Dr.createComment(s),setText:(s,t)=>{s.nodeValue=t},setElementText:(s,t)=>{s.textContent=t},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>Dr.querySelector(s),setScopeId(s,t){s.setAttribute(t,"")},insertStaticContent(s,t,e,r,n,i){const o=e?e.previousSibling:t.lastChild;if(n&&(n===i||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===i||!(n=n.nextSibling)););else{om.innerHTML=Hx(r==="svg"?`<svg>${s}</svg>`:r==="mathml"?`<math>${s}</math>`:s);const l=om.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},Jw=Symbol("_vtc");function t1(s,t,e){const r=s[Jw];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?s.removeAttribute("class"):e?s.setAttribute("class",t):s.className=t}const lm=Symbol("_vod"),e1=Symbol("_vsh"),s1=Symbol(""),r1=/(^|;)\s*display\s*:/;function n1(s,t,e){const r=s.style,n=Te(e);let i=!1;if(e&&!n){if(t)if(Te(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&el(r,l,"")}else for(const o in t)e[o]==null&&el(r,o,"");for(const o in e)o==="display"&&(i=!0),el(r,o,e[o])}else if(n){if(t!==e){const o=r[s1];o&&(e+=";"+o),r.cssText=e,i=r1.test(e)}}else t&&s.removeAttribute("style");lm in s&&(s[lm]=i?r.display:"",s[e1]&&(r.display="none"))}const hm=/\s*!important$/;function el(s,t,e){if(Tt(e))e.forEach(r=>el(s,t,r));else if(e==null&&(e=""),t.startsWith("--"))s.setProperty(t,e);else{const r=i1(s,t);hm.test(e)?s.setProperty(li(r),e.replace(hm,""),"important"):s[r]=e}}const cm=["Webkit","Moz","ms"],Ph={};function i1(s,t){const e=Ph[t];if(e)return e;let r=Hs(t);if(r!=="filter"&&r in s)return Ph[t]=r;r=Xl(r);for(let n=0;n<cm.length;n++){const i=cm[n]+r;if(i in s)return Ph[t]=i}return t}const um="http://www.w3.org/1999/xlink";function dm(s,t,e,r,n,i=pv(t)){r&&t.startsWith("xlink:")?e==null?s.removeAttributeNS(um,t.slice(6,t.length)):s.setAttributeNS(um,t,e):e==null||i&&!Yy(e)?s.removeAttribute(t):s.setAttribute(t,i?"":Tn(e)?String(e):e)}function fm(s,t,e,r,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(s[t]=t==="innerHTML"?Hx(e):e);return}const i=s.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?s.getAttribute("value")||"":s.value,a=e==null?s.type==="checkbox"?"on":"":String(e);(l!==a||!("_value"in s))&&(s.value=a),e==null&&s.removeAttribute(t),s._value=e;return}let o=!1;if(e===""||e==null){const l=typeof s[t];l==="boolean"?e=Yy(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{s[t]=e}catch{}o&&s.removeAttribute(n||t)}function a1(s,t,e,r){s.addEventListener(t,e,r)}function o1(s,t,e,r){s.removeEventListener(t,e,r)}const mm=Symbol("_vei");function l1(s,t,e,r,n=null){const i=s[mm]||(s[mm]={}),o=i[t];if(r&&o)o.value=r;else{const[l,a]=h1(t);if(r){const h=i[t]=d1(r,n);a1(s,l,h,a)}else o&&(o1(s,l,o,a),i[t]=void 0)}}const pm=/(?:Once|Passive|Capture)$/;function h1(s){let t;if(pm.test(s)){t={};let r;for(;r=s.match(pm);)s=s.slice(0,s.length-r[0].length),t[r[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):li(s.slice(2)),t]}let Fh=0;const c1=Promise.resolve(),u1=()=>Fh||(c1.then(()=>Fh=0),Fh=Date.now());function d1(s,t){const e=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=e.attached)return;Rr(f1(r,e.value),t,5,[r])};return e.value=s,e.attached=u1(),e}function f1(s,t){if(Tt(t)){const e=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{e.call(s),s._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const gm=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,m1=(s,t,e,r,n,i)=>{const o=n==="svg";t==="class"?t1(s,r,o):t==="style"?n1(s,e,r):Gl(t)?Bd(t)||l1(s,t,e,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):p1(s,t,r,o))?(fm(s,t,r),!s.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&dm(s,t,r,o,i,t!=="value")):s._isVueCE&&(/[A-Z]/.test(t)||!Te(r))?fm(s,Hs(t),r,i,t):(t==="true-value"?s._trueValue=r:t==="false-value"&&(s._falseValue=r),dm(s,t,r,o))};function p1(s,t,e,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in s&&gm(t)&&Rt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&s.tagName==="INPUT"||t==="type"&&s.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return gm(t)&&Te(e)?!1:t in s}const g1=is({patchProp:m1},Qw);let ym;function y1(){return ym||(ym=vw(g1))}const x1=(...s)=>{const t=y1().createApp(...s),{mount:e}=t;return t.mount=r=>{const n=A1(r);if(!n)return;const i=t._component;!Rt(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,_1(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function _1(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function A1(s){return Te(s)?document.querySelector(s):s}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Si=typeof document<"u";function Yx(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function b1(s){return s.__esModule||s[Symbol.toStringTag]==="Module"||s.default&&Yx(s.default)}const qt=Object.assign;function Bh(s,t){const e={};for(const r in t){const n=t[r];e[r]=yr(n)?n.map(s):s(n)}return e}const Da=()=>{},yr=Array.isArray,jx=/#/g,v1=/&/g,w1=/\//g,E1=/=/g,S1=/\?/g,zx=/\+/g,T1=/%5B/g,C1=/%5D/g,Wx=/%5E/g,R1=/%60/g,qx=/%7B/g,I1=/%7C/g,Kx=/%7D/g,M1=/%20/g;function Qd(s){return encodeURI(""+s).replace(I1,"|").replace(T1,"[").replace(C1,"]")}function P1(s){return Qd(s).replace(qx,"{").replace(Kx,"}").replace(Wx,"^")}function Lu(s){return Qd(s).replace(zx,"%2B").replace(M1,"+").replace(jx,"%23").replace(v1,"%26").replace(R1,"`").replace(qx,"{").replace(Kx,"}").replace(Wx,"^")}function F1(s){return Lu(s).replace(E1,"%3D")}function B1(s){return Qd(s).replace(jx,"%23").replace(S1,"%3F")}function k1(s){return s==null?"":B1(s).replace(w1,"%2F")}function Za(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const N1=/\/$/,O1=s=>s.replace(N1,"");function kh(s,t,e="/"){let r,n={},i="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(r=t.slice(0,a),i=t.slice(a+1,l>-1?l:t.length),n=s(i)),l>-1&&(r=r||t.slice(0,l),o=t.slice(l,t.length)),r=D1(r??t,e),{fullPath:r+(i&&"?")+i+o,path:r,query:n,hash:Za(o)}}function L1(s,t){const e=t.query?s(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function xm(s,t){return!t||!s.toLowerCase().startsWith(t.toLowerCase())?s:s.slice(t.length)||"/"}function V1(s,t,e){const r=t.matched.length-1,n=e.matched.length-1;return r>-1&&r===n&&Zi(t.matched[r],e.matched[n])&&Zx(t.params,e.params)&&s(t.query)===s(e.query)&&t.hash===e.hash}function Zi(s,t){return(s.aliasOf||s)===(t.aliasOf||t)}function Zx(s,t){if(Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(!U1(s[e],t[e]))return!1;return!0}function U1(s,t){return yr(s)?_m(s,t):yr(t)?_m(t,s):s===t}function _m(s,t){return yr(t)?s.length===t.length&&s.every((e,r)=>e===t[r]):s.length===1&&s[0]===t}function D1(s,t){if(s.startsWith("/"))return s;if(!s)return t;const e=t.split("/"),r=s.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=e.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return e.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const tn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Qa;(function(s){s.pop="pop",s.push="push"})(Qa||(Qa={}));var Ga;(function(s){s.back="back",s.forward="forward",s.unknown=""})(Ga||(Ga={}));function G1(s){if(!s)if(Si){const t=document.querySelector("base");s=t&&t.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),O1(s)}const $1=/^[^#]+#/;function X1(s,t){return s.replace($1,"#")+t}function H1(s,t){const e=document.documentElement.getBoundingClientRect(),r=s.getBoundingClientRect();return{behavior:t.behavior,left:r.left-e.left-(t.left||0),top:r.top-e.top-(t.top||0)}}const th=()=>({left:window.scrollX,top:window.scrollY});function Y1(s){let t;if("el"in s){const e=s.el,r=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?r?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=H1(n,s)}else t=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Am(s,t){return(history.state?history.state.position-t:-1)+s}const Vu=new Map;function j1(s,t){Vu.set(s,t)}function z1(s){const t=Vu.get(s);return Vu.delete(s),t}let W1=()=>location.protocol+"//"+location.host;function Qx(s,t){const{pathname:e,search:r,hash:n}=t,i=s.indexOf("#");if(i>-1){let l=n.includes(s.slice(i))?s.slice(i).length:1,a=n.slice(l);return a[0]!=="/"&&(a="/"+a),xm(a,"")}return xm(e,s)+r+n}function q1(s,t,e,r){let n=[],i=[],o=null;const l=({state:d})=>{const f=Qx(s,location),m=e.value,g=t.value;let p=0;if(d){if(e.value=f,t.value=d,o&&o===m){o=null;return}p=g?d.position-g.position:0}else r(f);n.forEach(y=>{y(e.value,m,{delta:p,type:Qa.pop,direction:p?p>0?Ga.forward:Ga.back:Ga.unknown})})};function a(){o=e.value}function h(d){n.push(d);const f=()=>{const m=n.indexOf(d);m>-1&&n.splice(m,1)};return i.push(f),f}function c(){const{history:d}=window;d.state&&d.replaceState(qt({},d.state,{scroll:th()}),"")}function u(){for(const d of i)d();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:a,listen:h,destroy:u}}function bm(s,t,e,r=!1,n=!1){return{back:s,current:t,forward:e,replaced:r,position:window.history.length,scroll:n?th():null}}function K1(s){const{history:t,location:e}=window,r={value:Qx(s,e)},n={value:t.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(a,h,c){const u=s.indexOf("#"),d=u>-1?(e.host&&document.querySelector("base")?s:s.slice(u))+a:W1()+s+a;try{t[c?"replaceState":"pushState"](h,"",d),n.value=h}catch(f){console.error(f),e[c?"replace":"assign"](d)}}function o(a,h){const c=qt({},t.state,bm(n.value.back,a,n.value.forward,!0),h,{position:n.value.position});i(a,c,!0),r.value=a}function l(a,h){const c=qt({},n.value,t.state,{forward:a,scroll:th()});i(c.current,c,!0);const u=qt({},bm(r.value,a,null),{position:c.position+1},h);i(a,u,!1),r.value=a}return{location:r,state:n,push:l,replace:o}}function Z1(s){s=G1(s);const t=K1(s),e=q1(s,t.state,t.location,t.replace);function r(i,o=!0){o||e.pauseListeners(),history.go(i)}const n=qt({location:"",base:s,go:r,createHref:X1.bind(null,s)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Q1(s){return typeof s=="string"||s&&typeof s=="object"}function Jx(s){return typeof s=="string"||typeof s=="symbol"}const t0=Symbol("");var vm;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(vm||(vm={}));function Qi(s,t){return qt(new Error,{type:s,[t0]:!0},t)}function Or(s,t){return s instanceof Error&&t0 in s&&(t==null||!!(s.type&t))}const wm="[^/]+?",J1={sensitive:!1,strict:!1,start:!0,end:!0},tE=/[.+*?^${}()[\]/\\]/g;function eE(s,t){const e=qt({},J1,t),r=[];let n=e.start?"^":"";const i=[];for(const h of s){const c=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let u=0;u<h.length;u++){const d=h[u];let f=40+(e.sensitive?.25:0);if(d.type===0)u||(n+="/"),n+=d.value.replace(tE,"\\$&"),f+=40;else if(d.type===1){const{value:m,repeatable:g,optional:p,regexp:y}=d;i.push({name:m,repeatable:g,optional:p});const x=y||wm;if(x!==wm){f+=10;try{new RegExp(`(${x})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+A.message)}}let _=g?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;u||(_=p&&h.length<2?`(?:/${_})`:"/"+_),p&&(_+="?"),n+=_,f+=20,p&&(f+=-8),g&&(f+=-20),x===".*"&&(f+=-50)}c.push(f)}r.push(c)}if(e.strict&&e.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function l(h){const c=h.match(o),u={};if(!c)return null;for(let d=1;d<c.length;d++){const f=c[d]||"",m=i[d-1];u[m.name]=f&&m.repeatable?f.split("/"):f}return u}function a(h){let c="",u=!1;for(const d of s){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const f of d)if(f.type===0)c+=f.value;else if(f.type===1){const{value:m,repeatable:g,optional:p}=f,y=m in h?h[m]:"";if(yr(y)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=yr(y)?y.join("/"):y;if(!x)if(p)d.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${m}"`);c+=x}}return c||"/"}return{re:o,score:r,keys:i,parse:l,stringify:a}}function sE(s,t){let e=0;for(;e<s.length&&e<t.length;){const r=t[e]-s[e];if(r)return r;e++}return s.length<t.length?s.length===1&&s[0]===80?-1:1:s.length>t.length?t.length===1&&t[0]===80?1:-1:0}function e0(s,t){let e=0;const r=s.score,n=t.score;for(;e<r.length&&e<n.length;){const i=sE(r[e],n[e]);if(i)return i;e++}if(Math.abs(n.length-r.length)===1){if(Em(r))return 1;if(Em(n))return-1}return n.length-r.length}function Em(s){const t=s[s.length-1];return s.length>0&&t[t.length-1]<0}const rE={type:0,value:""},nE=/[a-zA-Z0-9_]/;function iE(s){if(!s)return[[]];if(s==="/")return[[rE]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function t(f){throw new Error(`ERR (${e})/"${h}": ${f}`)}let e=0,r=e;const n=[];let i;function o(){i&&n.push(i),i=[]}let l=0,a,h="",c="";function u(){h&&(e===0?i.push({type:0,value:h}):e===1||e===2||e===3?(i.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),h="")}function d(){h+=a}for(;l<s.length;){if(a=s[l++],a==="\\"&&e!==2){r=e,e=4;continue}switch(e){case 0:a==="/"?(h&&u(),o()):a===":"?(u(),e=1):d();break;case 4:d(),e=r;break;case 1:a==="("?e=2:nE.test(a)?d():(u(),e=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:e=3:c+=a;break;case 3:u(),e=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),u(),o(),n}function aE(s,t,e){const r=eE(iE(s.path),e),n=qt(r,{record:s,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function oE(s,t){const e=[],r=new Map;t=Rm({strict:!1,end:!0,sensitive:!1},t);function n(u){return r.get(u)}function i(u,d,f){const m=!f,g=Tm(u);g.aliasOf=f&&f.record;const p=Rm(t,u),y=[g];if("alias"in u){const A=typeof u.alias=="string"?[u.alias]:u.alias;for(const b of A)y.push(Tm(qt({},g,{components:f?f.record.components:g.components,path:b,aliasOf:f?f.record:g})))}let x,_;for(const A of y){const{path:b}=A;if(d&&b[0]!=="/"){const w=d.record.path,v=w[w.length-1]==="/"?"":"/";A.path=d.record.path+(b&&v+b)}if(x=aE(A,d,p),f?f.alias.push(x):(_=_||x,_!==x&&_.alias.push(x),m&&u.name&&!Cm(x)&&o(u.name)),s0(x)&&a(x),g.children){const w=g.children;for(let v=0;v<w.length;v++)i(w[v],x,f&&f.children[v])}f=f||x}return _?()=>{o(_)}:Da}function o(u){if(Jx(u)){const d=r.get(u);d&&(r.delete(u),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(u);d>-1&&(e.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function l(){return e}function a(u){const d=cE(u,e);e.splice(d,0,u),u.record.name&&!Cm(u)&&r.set(u.record.name,u)}function h(u,d){let f,m={},g,p;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Qi(1,{location:u});p=f.record.name,m=qt(Sm(d.params,f.keys.filter(_=>!_.optional).concat(f.parent?f.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),u.params&&Sm(u.params,f.keys.map(_=>_.name))),g=f.stringify(m)}else if(u.path!=null)g=u.path,f=e.find(_=>_.re.test(g)),f&&(m=f.parse(g),p=f.record.name);else{if(f=d.name?r.get(d.name):e.find(_=>_.re.test(d.path)),!f)throw Qi(1,{location:u,currentLocation:d});p=f.record.name,m=qt({},d.params,u.params),g=f.stringify(m)}const y=[];let x=f;for(;x;)y.unshift(x.record),x=x.parent;return{name:p,path:g,params:m,matched:y,meta:hE(y)}}s.forEach(u=>i(u));function c(){e.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:n}}function Sm(s,t){const e={};for(const r of t)r in s&&(e[r]=s[r]);return e}function Tm(s){const t={path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:s.aliasOf,beforeEnter:s.beforeEnter,props:lE(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function lE(s){const t={},e=s.props||!1;if("component"in s)t.default=e;else for(const r in s.components)t[r]=typeof e=="object"?e[r]:e;return t}function Cm(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function hE(s){return s.reduce((t,e)=>qt(t,e.meta),{})}function Rm(s,t){const e={};for(const r in s)e[r]=r in t?t[r]:s[r];return e}function cE(s,t){let e=0,r=t.length;for(;e!==r;){const i=e+r>>1;e0(s,t[i])<0?r=i:e=i+1}const n=uE(s);return n&&(r=t.lastIndexOf(n,r-1)),r}function uE(s){let t=s;for(;t=t.parent;)if(s0(t)&&e0(s,t)===0)return t}function s0({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function dE(s){const t={};if(s===""||s==="?")return t;const r=(s[0]==="?"?s.slice(1):s).split("&");for(let n=0;n<r.length;++n){const i=r[n].replace(zx," "),o=i.indexOf("="),l=Za(o<0?i:i.slice(0,o)),a=o<0?null:Za(i.slice(o+1));if(l in t){let h=t[l];yr(h)||(h=t[l]=[h]),h.push(a)}else t[l]=a}return t}function Im(s){let t="";for(let e in s){const r=s[e];if(e=F1(e),r==null){r!==void 0&&(t+=(t.length?"&":"")+e);continue}(yr(r)?r.map(i=>i&&Lu(i)):[r&&Lu(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+e,i!=null&&(t+="="+i))})}return t}function fE(s){const t={};for(const e in s){const r=s[e];r!==void 0&&(t[e]=yr(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return t}const mE=Symbol(""),Mm=Symbol(""),Jd=Symbol(""),tf=Symbol(""),Uu=Symbol("");function ma(){let s=[];function t(r){return s.push(r),()=>{const n=s.indexOf(r);n>-1&&s.splice(n,1)}}function e(){s=[]}return{add:t,list:()=>s.slice(),reset:e}}function dn(s,t,e,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((l,a)=>{const h=d=>{d===!1?a(Qi(4,{from:e,to:t})):d instanceof Error?a(d):Q1(d)?a(Qi(2,{from:t,to:d})):(o&&r.enterCallbacks[n]===o&&typeof d=="function"&&o.push(d),l())},c=i(()=>s.call(r&&r.instances[n],t,e,h));let u=Promise.resolve(c);s.length<3&&(u=u.then(h)),u.catch(d=>a(d))})}function Nh(s,t,e,r,n=i=>i()){const i=[];for(const o of s)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Yx(a)){const c=(a.__vccOpts||a)[t];c&&i.push(dn(c,e,r,o,l,n))}else{let h=a();i.push(()=>h.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const u=b1(c)?c.default:c;o.mods[l]=c,o.components[l]=u;const f=(u.__vccOpts||u)[t];return f&&dn(f,e,r,o,l,n)()}))}}return i}function Pm(s){const t=Tr(Jd),e=Tr(tf),r=Ns(()=>{const a=ie(s.to);return t.resolve(a)}),n=Ns(()=>{const{matched:a}=r.value,{length:h}=a,c=a[h-1],u=e.matched;if(!c||!u.length)return-1;const d=u.findIndex(Zi.bind(null,c));if(d>-1)return d;const f=Fm(a[h-2]);return h>1&&Fm(c)===f&&u[u.length-1].path!==f?u.findIndex(Zi.bind(null,a[h-2])):d}),i=Ns(()=>n.value>-1&&_E(e.params,r.value.params)),o=Ns(()=>n.value>-1&&n.value===e.matched.length-1&&Zx(e.params,r.value.params));function l(a={}){if(xE(a)){const h=t[ie(s.replace)?"replace":"push"](ie(s.to)).catch(Da);return s.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Ns(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}function pE(s){return s.length===1?s[0]:s}const gE=yx({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Pm,setup(s,{slots:t}){const e=zl(Pm(s)),{options:r}=Tr(Jd),n=Ns(()=>({[Bm(s.activeClass,r.linkActiveClass,"router-link-active")]:e.isActive,[Bm(s.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const i=t.default&&pE(t.default(e));return s.custom?i:Xx("a",{"aria-current":e.isExactActive?s.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},i)}}}),yE=gE;function xE(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const t=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return s.preventDefault&&s.preventDefault(),!0}}function _E(s,t){for(const e in t){const r=t[e],n=s[e];if(typeof r=="string"){if(r!==n)return!1}else if(!yr(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function Fm(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Bm=(s,t,e)=>s??t??e,AE=yx({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:t,slots:e}){const r=Tr(Uu),n=Ns(()=>s.route||r.value),i=Tr(Mm,0),o=Ns(()=>{let h=ie(i);const{matched:c}=n.value;let u;for(;(u=c[h])&&!u.components;)h++;return h}),l=Ns(()=>n.value.matched[o.value]);Qo(Mm,Ns(()=>o.value+1)),Qo(mE,l),Qo(Uu,n);const a=$s();return Va(()=>[a.value,l.value,s.name],([h,c,u],[d,f,m])=>{c&&(c.instances[u]=h,f&&f!==c&&h&&h===d&&(c.leaveGuards.size||(c.leaveGuards=f.leaveGuards),c.updateGuards.size||(c.updateGuards=f.updateGuards))),h&&c&&(!f||!Zi(c,f)||!d)&&(c.enterCallbacks[u]||[]).forEach(g=>g(h))},{flush:"post"}),()=>{const h=n.value,c=s.name,u=l.value,d=u&&u.components[c];if(!d)return km(e.default,{Component:d,route:h});const f=u.props[c],m=f?f===!0?h.params:typeof f=="function"?f(h):f:null,p=Xx(d,qt({},m,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(u.instances[c]=null)},ref:a}));return km(e.default,{Component:p,route:h})||p}}});function km(s,t){if(!s)return null;const e=s(t);return e.length===1?e[0]:e}const bE=AE;function vE(s){const t=oE(s.routes,s),e=s.parseQuery||dE,r=s.stringifyQuery||Im,n=s.history,i=ma(),o=ma(),l=ma(),a=Lv(tn);let h=tn;Si&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Bh.bind(null,U=>""+U),u=Bh.bind(null,k1),d=Bh.bind(null,Za);function f(U,Q){let q,z;return Jx(U)?(q=t.getRecordMatcher(U),z=Q):z=U,t.addRoute(z,q)}function m(U){const Q=t.getRecordMatcher(U);Q&&t.removeRoute(Q)}function g(){return t.getRoutes().map(U=>U.record)}function p(U){return!!t.getRecordMatcher(U)}function y(U,Q){if(Q=qt({},Q||a.value),typeof U=="string"){const k=kh(e,U,Q.path),D=t.resolve({path:k.path},Q),$=n.createHref(k.fullPath);return qt(k,D,{params:d(D.params),hash:Za(k.hash),redirectedFrom:void 0,href:$})}let q;if(U.path!=null)q=qt({},U,{path:kh(e,U.path,Q.path).path});else{const k=qt({},U.params);for(const D in k)k[D]==null&&delete k[D];q=qt({},U,{params:u(k)}),Q.params=u(Q.params)}const z=t.resolve(q,Q),nt=U.hash||"";z.params=c(d(z.params));const S=L1(r,qt({},U,{hash:P1(nt),path:z.path})),I=n.createHref(S);return qt({fullPath:S,hash:nt,query:r===Im?fE(U.query):U.query||{}},z,{redirectedFrom:void 0,href:I})}function x(U){return typeof U=="string"?kh(e,U,a.value.path):qt({},U)}function _(U,Q){if(h!==U)return Qi(8,{from:Q,to:U})}function A(U){return v(U)}function b(U){return A(qt(x(U),{replace:!0}))}function w(U){const Q=U.matched[U.matched.length-1];if(Q&&Q.redirect){const{redirect:q}=Q;let z=typeof q=="function"?q(U):q;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=x(z):{path:z},z.params={}),qt({query:U.query,hash:U.hash,params:z.path!=null?{}:U.params},z)}}function v(U,Q){const q=h=y(U),z=a.value,nt=U.state,S=U.force,I=U.replace===!0,k=w(q);if(k)return v(qt(x(k),{state:typeof k=="object"?qt({},nt,k.state):nt,force:S,replace:I}),Q||q);const D=q;D.redirectedFrom=Q;let $;return!S&&V1(r,z,q)&&($=Qi(16,{to:D,from:z}),V(z,z,!0,!1)),($?Promise.resolve($):F(D,z)).catch(K=>Or(K)?Or(K,2)?K:N(K):C(K,D,z)).then(K=>{if(K){if(Or(K,2))return v(qt({replace:I},x(K.to),{state:typeof K.to=="object"?qt({},nt,K.to.state):nt,force:S}),Q||D)}else K=L(D,z,!0,I,nt);return B(D,z,K),K})}function R(U,Q){const q=_(U,Q);return q?Promise.reject(q):Promise.resolve()}function P(U){const Q=tt.values().next().value;return Q&&typeof Q.runWithContext=="function"?Q.runWithContext(U):U()}function F(U,Q){let q;const[z,nt,S]=wE(U,Q);q=Nh(z.reverse(),"beforeRouteLeave",U,Q);for(const k of z)k.leaveGuards.forEach(D=>{q.push(dn(D,U,Q))});const I=R.bind(null,U,Q);return q.push(I),at(q).then(()=>{q=[];for(const k of i.list())q.push(dn(k,U,Q));return q.push(I),at(q)}).then(()=>{q=Nh(nt,"beforeRouteUpdate",U,Q);for(const k of nt)k.updateGuards.forEach(D=>{q.push(dn(D,U,Q))});return q.push(I),at(q)}).then(()=>{q=[];for(const k of S)if(k.beforeEnter)if(yr(k.beforeEnter))for(const D of k.beforeEnter)q.push(dn(D,U,Q));else q.push(dn(k.beforeEnter,U,Q));return q.push(I),at(q)}).then(()=>(U.matched.forEach(k=>k.enterCallbacks={}),q=Nh(S,"beforeRouteEnter",U,Q,P),q.push(I),at(q))).then(()=>{q=[];for(const k of o.list())q.push(dn(k,U,Q));return q.push(I),at(q)}).catch(k=>Or(k,8)?k:Promise.reject(k))}function B(U,Q,q){l.list().forEach(z=>P(()=>z(U,Q,q)))}function L(U,Q,q,z,nt){const S=_(U,Q);if(S)return S;const I=Q===tn,k=Si?history.state:{};q&&(z||I?n.replace(U.fullPath,qt({scroll:I&&k&&k.scroll},nt)):n.push(U.fullPath,nt)),a.value=U,V(U,Q,q,I),N()}let Y;function Z(){Y||(Y=n.listen((U,Q,q)=>{if(!st.listening)return;const z=y(U),nt=w(z);if(nt){v(qt(nt,{replace:!0,force:!0}),z).catch(Da);return}h=z;const S=a.value;Si&&j1(Am(S.fullPath,q.delta),th()),F(z,S).catch(I=>Or(I,12)?I:Or(I,2)?(v(qt(x(I.to),{force:!0}),z).then(k=>{Or(k,20)&&!q.delta&&q.type===Qa.pop&&n.go(-1,!1)}).catch(Da),Promise.reject()):(q.delta&&n.go(-q.delta,!1),C(I,z,S))).then(I=>{I=I||L(z,S,!1),I&&(q.delta&&!Or(I,8)?n.go(-q.delta,!1):q.type===Qa.pop&&Or(I,20)&&n.go(-1,!1)),B(z,S,I)}).catch(Da)}))}let pt=ma(),E=ma(),T;function C(U,Q,q){N(U);const z=E.list();return z.length?z.forEach(nt=>nt(U,Q,q)):console.error(U),Promise.reject(U)}function O(){return T&&a.value!==tn?Promise.resolve():new Promise((U,Q)=>{pt.add([U,Q])})}function N(U){return T||(T=!U,Z(),pt.list().forEach(([Q,q])=>U?q(U):Q()),pt.reset()),U}function V(U,Q,q,z){const{scrollBehavior:nt}=s;if(!Si||!nt)return Promise.resolve();const S=!q&&z1(Am(U.fullPath,0))||(z||!q)&&history.state&&history.state.scroll||null;return Hd().then(()=>nt(U,Q,S)).then(I=>I&&Y1(I)).catch(I=>C(I,U,Q))}const G=U=>n.go(U);let X;const tt=new Set,st={currentRoute:a,listening:!0,addRoute:f,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:p,getRoutes:g,resolve:y,options:s,push:A,replace:b,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:E.add,isReady:O,install(U){const Q=this;U.component("RouterLink",yE),U.component("RouterView",bE),U.config.globalProperties.$router=Q,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>ie(a)}),Si&&!X&&a.value===tn&&(X=!0,A(n.location).catch(nt=>{}));const q={};for(const nt in tn)Object.defineProperty(q,nt,{get:()=>a.value[nt],enumerable:!0});U.provide(Jd,Q),U.provide(tf,lx(q)),U.provide(Uu,a);const z=U.unmount;tt.add(U),U.unmount=function(){tt.delete(U),tt.size<1&&(h=tn,Y&&Y(),Y=null,a.value=tn,X=!1,T=!1),z()}}};function at(U){return U.reduce((Q,q)=>Q.then(()=>P(q)),Promise.resolve())}return st}function wE(s,t){const e=[],r=[],n=[],i=Math.max(t.matched.length,s.matched.length);for(let o=0;o<i;o++){const l=t.matched[o];l&&(s.matched.find(h=>Zi(h,l))?r.push(l):e.push(l));const a=s.matched[o];a&&(t.matched.find(h=>Zi(h,a))||n.push(a))}return[e,r,n]}function EE(s){return Tr(tf)}const Ue=(s,t)=>{const e=s.__vccOpts||s;for(const[r,n]of t)e[r]=n;return e},SE={id:"tab_navigation"},TE={__name:"tab_navigation",setup(s){const t=EE(),e=[{name:"home",label:"home",path:"/",icon:"home"},{name:"reward",label:"reward",path:"/reward",icon:"reward"},{name:"promo",label:"promo",path:"/promo",icon:"tongits_btn"},{name:"wallet",label:"wallet",path:"/wallet",icon:"wallet"},{name:"account",label:"account",path:"/account",icon:"account"}];function r(n){return t.path===n}return(n,i)=>{const o=ho("router-link");return At(),Jt("div",SE,[(At(),Jt(we,null,za(e,l=>ht(o,{key:l.name,to:l.path,class:qi(["item",[l.name,{focus:r(l.path)}]])},{default:Ki(()=>[qd(Yl(l.label),1)]),_:2},1032,["to","class"])),64))])}}},CE=Ue(TE,[["__scopeId","data-v-6cf7ab0a"]]),RE={__name:"App",setup(s){return(t,e)=>{const r=ho("router-view");return At(),Jt(we,null,[ht(r),ht(CE)],64)}}};function ps(){const s=$s([]),t=$s(!1),e=$s(null);return{jsonData:s,fetchImages:async n=>{t.value=!0;try{const i=await fetch(n);if(i.ok){const o=await i.json();s.value=o.map(l=>({id:l[0],url:l[1]}))}else e.value=`HTTP : ${i.status}`}catch(i){e.value=i.message}finally{t.value=!1}},isLoading:t,error:e}}const IE="/daiyanren/assets/logo-D8EmFC1i.webp",ME="data:image/webp;base64,UklGRlYNAABXRUJQVlA4WAoAAAAwAAAAAgEAcgAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIRQEAAA2AUGvblOi1wd/Ar4E0mL+BmEBMwJDghwRqAiCBmGCwAdPgM8HQwH1fXveJiAnAXsW2jIDTWqdlhcPbtg9ijTStFOPiMNaBX+O3vSTbn3UgWZxNsj31PfAsTnq6BxmBa+uiaidJwbaMBvkOkoLwrBpsJSko70+KbX5AeproJgfWTdrZ4Pm0wfPjdSMQH451JQDzJkxWHHUICgAW5H8D6LIXArDsGcDDDfBRoHULuAnKLeDf///+//f/v/9fz6rcAKbNG0DlPQ3UleUP4zZ5GYDMN9zlAOo8pE4VAAaBYS7Bap2HxBX1GsS+x1uEjZ3UsBZhsw77pA1nWyCbOsrKAlvHDUdYOcSOccPRlWfYOR6PhKo6+cMeqyjoElVG2K/Gk9SSpIli79rT+Ev4KRPFQTWeiN/yDC21TqoCR1gWvxWMUKKosU8AVlA4IBoKAAAQMwCdASoDAXMAPm02l0ikIyUhIxYp8KANiWJu3/+NwAgRYJfxV8Jk1vg/xg9u+/P3X8CexH/M+gvTfmTcm/8j+qeq31XfdJ7gH6d9NXzAfsd+zvu3f4b9Vfc/+sXsAf07/L///1a/Yn9CT9yPTK/dD4P/65/1v289pj//xluongB2rN6EzD6A02JV3806HvQ5/cC6xRjdQkqiCum6rJcIvxrRnKL4rH0BJdbchigqrXGYtd7Fyf/7oUIrXjFBYqygcQg3nN8RISMALISqT/HD8KaMbwkXTTWOzqfKEIoTUuf/9QtISFrEtNBXdyW5guHrtnLg7BWATfFktUOJazSlcnAcMF8632P6kgzdJgm8j7Ee4ElCHt75SVC2Ubfne8X4Qh0qmFGBanlbyGtpUfRsA+RAFMjpnsWagrEATHaRMPSXLGjqXaAQfhJe1sFnd9HDsh/qJM1dqoAWcrsm5YIY4qmjAe21IrNmyJgR8KRguf6qZEXJQXRIXfhhtWnsn1ZK3rEuOY2m+4dPAwLQjqc41j66KHLdJr29YSxwNviZsAAA/v72Xf4QdmNd/3keE0SmBm0sOiQZds7Pz1YWlM8dh7iudIKOUGI1aQaZ1+/vWVAxlPljq2yBIK99NNyLQNAjATyVHR1k6tu6KvNRFoEJWJ4sjIwo+OB+fnEyai08qyCbw6I3dsdAv0TxZvysMvzfWt/QB87HmGw+4NhPp1VA26dRoX52md2Em2mdknAmFg/iShp51jf//qSVnuNubwVZkaFMNk712vwGwl+dUvDp+BBmeinQ2RIacqoKg2CnecxIM5wt47WXPXnNdrKqjOxO4qM7Yjo6G81JM0XMjnxQCudjxuqivEFe43WQwB8V1/gofqMgVL56TutUWvDxujDt57Zqnyu/cK1zPiURZKBlXNFItmJPKA/v/O1/rZOfStZQX+3rBKhnjGtCizUcPPuL1pUfhy6TlbiT7dlKslkJwRo7uuc/cyo4lY8xJCdwMnv8cxdXSCWEyZYsiqxfgk+hx/vmydZ/TvOij2eZKkZQP1qzFVTECYbMSDBFtvrAzH4CqQstN/xLGomh2YaA8YpHaLM9m/E+7JBX/7Lm1uUqUpXi4kEryK4A2AYzTEwbSG7YUw4Ai5wxf68Kobp/XuisR9oQE7U9qvdoukFDN7w6/Y8xbxGaGs+eV4DAqLAyeQkCtht+PGS/bY8mODa1DTp3q90FmLXg+CNVZIVfnim8lr763OE++UZrDvNK96LzgbKGzZ3SXR7iju6tc7eb3OVuQsLNnq75L0akVtGSHXsIHiLz1bFmBSBU0UXlqLiyp4VxlRKx7v3ZkWFp/tv7gdqBdXz/DqI+E2VFRNc1j3Cu7a1bT1p1QhKc3vym8Cx9BzT8z69HVZkd9/qSf4+hJHxK+964kivERDJmjnVqojnwnocCeDNkKIl9Tjsf+B2vDAOLzpkrsj4Nr2WERcY9DevDKvu/Mzyz8XJWiwkgI2T8HR4Xef3r0upW7/1GpciQHyU+RA0lCFbyU91dYF5g/pGIMwEQzvJEhqSlhDjfNY+da7fJ2zY9m01QBA317/CayZcaeG1NglG/Yvtbu9HvyhMCcAOuC9EJCfyGK5+SfQGvpmu5GEFUxB/acy89mqZIFJ/d1Dh82qVH/fvpdQfYhACrH54jUyS2JVOnkmbB1QD4t/tqbMsakrsMX7aizZAPhE3gU1nVnC5taP4l79j+Y3RWr13hHCYgdqKTTs3J+CNUSy4fzZIYf8u7cImMlHiAsuOH0fPbbs8IkLAdRdaq1nnmOWpDM2HEqFFtHS/MX5T76jhlzNVwbcK2rMXWJhGSVI8GHYZEq6RgTwyYDd54Ue98Vc1gdH6UTjsZ3efe301WPpQ/+va+8MDCxEiSA+09+I6iMg71cHVooH7MozRclizkeOKe/kDS5Xu1HpVefqkBIi4AI+UUMiwjwzliwTkgztJQo4SAqVz5N7yHvc70fl9i3WxqCSCJgXf9SXR30j9XluMQjzRQYDwvVN55poxqRQUTjlCewOl6JxBTEDd68OHl+9ii1IIemjIMHy/jJzl4kCDQITG6044vBzAJYP9jmODjVZbCfc5ImQkEi+qZFlPMcTcTNp56p39Z+s8k6KM+/jVz+0rA1yKmAuoBzrrb3/z2aXYNJAheRbkUf8NNM3wM3MayMpkve8yg6AIAWQqmJezYGuXRrkb4R00ffmnGPJXHJx9ktZP7A658Y0RQ6KKY3T7H1ZVklaQmoCSgQ5aeU4bH8wYnq8kqRcgiPl5NjJ9tsZQxIrJL/9unH88hRMH0m7pTXXF7PYfqKhJvLZFgQQIxl/sePpvyClALkjYBNV3ZTkA9os3GkSji3YD/Kv/Rg8hfe8iSp57v4LjmI/ya4k7/jgVOo9AfXInzLDREMdkFwqNPh4nfE1BajBjIAHmSIyWLD37glFNB0WjW1eatO3WIuVFPxhr6b5E7ZE+byrWDVFMRPhAx4nKlNwyL/X9xz3Pwh9/QSxBnetf/X7Be+C446G6aOnVeBJ5VyxdSvVhOUkQn2iUZJOamNxZFQ5L01S9AyxN6N0Zd2cP/25JrpTIYdq3xlXDVEjIPTyjdqe9Dpijaq026RhZnbUCQsZrtm0ns145ki62mCXmvjUZ9eETLJKU94KQdECBHGKnkkvFH6+XjahDnZiH8GGXb2HrID2+I7T+McKkR+Iygmgw6jCtNS9Tu7Yuc6wcp9Za1Qxm16y9WROMSE95Xgme7EKR97O/uezc+ORkj98oLMYbtcMuwBsFw+wK75r3fcTClAlg/RfuJ9o9/k27RFSojzDcfTrfgX3wik7yGj7jtPYClufRUbAVTSxZS77riXMnSQe/4z77I54FUrAEboHmdSM7eP4cKQ6Qd7W7oDXdHW6GML6LhebG1O2nf/8wHFHsJ6C+sEF7Z1BNdY4zSCxjEiaB+sqhSAcPMpLesyqbmaQzQNeGdBW+cV2TBCFmQwHbNRlhA/aSWfN5Adpao1hlPMpHX1alnofS+OwDYERtNB/hEMmN8lPeq583jcJ5ylCaoy927qaqoM07/5tgTMNdRT3a8EbZD0ypHzeO/Ay9tF1GzGp9JkrPJm5h4XrYYzzmvE7iZLxqU2i0Q/4GNzwinSfZSs6xDq+w4fkQ3Tk9Mrw5/Q2u15TKzrJ5YYhxzv0XFxJvJ8GWOcih5CdWi0tWE9qRJ/RxuV3/CGaWPQsn5FCa/TFaxOgsyOlto+VcZPvaBWCxdYSIagIXKc/m1kx1b1kabreWDwjFhJjZ7zheWUs/cGQmQCsjjBZnm7n+/XpDTxzj0uAfLP/s2/2C5QGgeAi2eAlI6WqvGpCDlMVrPs75c5BEAD5UhsyLn0rc2oL0jX3U+TFZFTBqz9UeEgfe/iHaBZZUkXajAAAAhpsV4r//4jhn5aZfSOZjfqpaaxMEbV0Urid64LKAAAAA=",PE="/daiyanren/assets/btn-search-CDXuOXdW.webp",FE="/daiyanren/assets/btn-service-C15TZCVT.webp",BE={class:"popup"},kE={__name:"Popup",setup(s){const t=()=>{const e=new CustomEvent("close",{bubbles:!0});window.dispatchEvent(e)};return(e,r)=>(At(),Jt("div",BE,[vt("div",{class:"popup-overlay",onClick:t}),vt("div",{class:"popup-content"},[r[0]||(r[0]=vt("h2",null,"",-1)),r[1]||(r[1]=vt("p",null,"",-1)),vt("button",{onClick:t},"")])]))}},fo=Ue(kE,[["__scopeId","data-v-290eebdf"]]),NE={id:"top"},OE={class:"left"},LE={id:"logo",class:"inline"},VE={__name:"top",props:{msg:String},setup(s){const t=$s(!1),e=()=>{t.value=!0},r=()=>{t.value=!1};return window.addEventListener("close",r),(n,i)=>{const o=ho("router-link");return At(),Jt(we,null,[t.value?(At(),ne(fo,{key:0,onClose:r})):co("",!0),vt("div",NE,[vt("div",OE,[vt("div",LE,[ht(o,{to:"/"},{default:Ki(()=>i[0]||(i[0]=[vt("img",{src:IE},null,-1)])),_:1})])]),vt("div",{class:"right"},[vt("div",{id:"btn-login",class:"inline top-btn",onClick:e},"Sign in"),i[1]||(i[1]=Jl('<div id="btn-reg" class="inline top-btn" data-v-77d3ea17><img src="'+ME+'" width="100%" data-v-77d3ea17></div><div id="btn-search" class="inline top-btn" data-v-77d3ea17><img src="'+PE+'" width="100%" data-v-77d3ea17></div><div id="btn-service" class="inline top-btn" data-v-77d3ea17><img src="'+FE+'" width="100%" data-v-77d3ea17></div>',3))])])],64)}}},hi=Ue(VE,[["__scopeId","data-v-77d3ea17"]]),UE="/daiyanren/assets/bottom-BHzdyFlL.webp",DE={},GE={id:"bottom"};function $E(s,t){return At(),Jt("div",GE,t[0]||(t[0]=[vt("img",{src:UE,width:"100%"},null,-1)]))}const na=Ue(DE,[["render",$E],["__scopeId","data-v-5ededb55"]]),XE={class:"fade-wrapper"},HE=["src"],YE={id:"page"},jE={__name:"Banner",setup(s){const t=["image1.webp","image2.webp","image3.webp"],e=$s(0),r=t.length;let n=null;const i=()=>{n=setInterval(()=>{e.value=(e.value+1)%r},5e3)},o=()=>clearInterval(n);let l=0,a=0;const h=d=>{o(),l=d.touches[0].clientX},c=d=>{a=d.touches[0].clientX-l},u=()=>{a>50?e.value=(e.value-1+r)%r:a<-50&&(e.value=(e.value+1)%r),i(),a=0};return Pr(i),zd(o),(d,f)=>(At(),Jt(we,null,[vt("div",{id:"banner",onTouchstart:h,onTouchmove:c,onTouchend:u},[vt("div",XE,[(At(),Jt(we,null,za(t,(m,g)=>vt("img",{key:g,src:`./images/${m}`,class:qi(["fade-image",{active:g===e.value}])},null,10,HE)),64))])],32),vt("div",YE,[(At(!0),Jt(we,null,za(ie(r),(m,g)=>(At(),Jt("span",{key:g,class:qi({focus:g===e.value})},null,2))),128))])],64))}},ia=Ue(jE,[["__scopeId","data-v-8196a281"]]),zE="data:image/webp;base64,UklGRkYIAABXRUJQVlA4WAoAAAAwAAAAQQAAQQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIhAIAAA2gVVvb9LbZz4fAEBQEMYOoCJIikIJgQOCWQYPANoLaCKowUBkIghg8F/+v6XfHu4iYAP+fbjdru+fd4e2sHmG9WT0/vZk/zK8efDu+jQdnbjc/vYnVlmbO/ebbW1hDo4Kv+90b2CCamH34dXmrFXRUZtb74+LWpuloM7F9WtyXGZqYff/n0lZ3c4Gmcb9f2ta0hA5hdVjaZtKkjTS4Oy7sHk1IG2/zC2IaNd7EGk1FJWa3ZxwP+9utIdJGnHw842519/T9eKPNRJNSoXHhavvx58NtPs1Eh6CGy1ePnw+3+GS2SVMRTaOZNDNWD58vWZ31YaaDEE2HEBqaGWu7s1aP56GSRqOGQEUIKvj621kPLg4dRJpKg1Q0dJi+//Os7WWaoBIijXQgGvOrw1nXDBppOjQ0odF0zF3x+8uJu9/pJNKBpmka0kTRsL9sfzx1T8yHNNGYDaIJflx2YaUxbVKCCg1i+nKjEDTSxOkmKjQOhxvRSRCNiqCS0sHOrTs0TdNAoAk6muD1ZtGBSBNNQ5yssLtZE9NKGR3QIB2wc/Ogo0nTFA2haUyfb6eRjoaIiIaOJg12CwgigkYjdDQR7N2+Yr4RUtHRgYYfC0gbmsZ86BB04GUBYtoBFUhFA4fDEhqklRoUhiamO0uMaRqqyYQ0HXhdQAMNmnSYNmhgt4CoQMRsGU7vLLCRJkqaIKhk5nkJEWmEBk1DaCa7JaAGjbQSce7eQgMpw3yDTH4sRUMHzUyHhoaXRTRmQweNaWg4HK714d2JIzRi2qEJommCnWtvP5yYhs50aMx2oOH1Ksc7V4xpiPkQ4bC/yvPmGtc/fHbVX959vFvK4fXJdY9fX49L+W8bVlA4IMwDAADQFgCdASpCAEIAPhkKg0EhBerVxAQAYS0AGnID72bj19a+5n7Gf5XqpiX9OP3v8wv7Z7KvsA8wD9Ov7XugP1V/4H+I9479QPY16AH6u+rF/ivYf/bv2AP4B/YPSZ/6P9f+CP9sPRl/6ucZ/0DtOb74RRQ84N10ZgYC66TR0MaqfHGx1zD8P5ibe03rxUCHjsI4msMnF/B/5Lugan3cL+VRIR2e0fieuXA+jOQz+bmSLHguOQbEN42hV07PBqjQgAD+/7sALf/mVmYmdFwAh0L2cvM8H3PEd528KXve8OX/3vg4oBviF4ilyC1mz/MHqIynXdpah2Xl4aZ4tfXbwc4x5rao4nqCQP/+C1sATwstPZZbLcS83xiIh3Gz/P4Uhf+ShJlos55gA3sFctZOnbg7VWpca9bcb2sinSLq8mslfSl6Jaq/v1RCixzt8S8xnzgD//mpsUl2ir1VN/JH5E8MMZMQEqysZHNyECmWCEXsuF9ePArGlA4/hoyptH/9OBKQZ1xGQnwLhOPcRFBuLaj3ONXHJeW7xXE2YN5B7y+hCZ75FsuC94A2xg0HPtCu6ZHMzRqxanM9GBpCNwBp7MzUXyOyqi1Oc+kICY93NGjVzJbvJo90WSFGptOeStf3v04+/QdDdjGTXxLE6yz7FW6w1OlrLDsMsyZylqlXTnWmFxh5g8OWLXdto+mv8rOZVowwibyDjfSnmF4x9Yf7LrkIk2D/zqe95JLCHO4ngzjP/C7UIYeIxl1xpA7+JTOGYlKkPX432oUhbGghJk/l/htOVXCczYKePbEsdJXre2ynk+9t3cyOkdl8bVG92lJZ7n4+mfaBtjB+S+1heoiDcyW23IPSRJAZ22rEIMi5LXHeoR5nS9sNK3aXE2xv/+UMkf5CxOV64oAkGWu5Novo8KBf0fXet+EsHm5J6rm0OM3ROB0yix2B8CAdc3D9+Paok6PxwVnhrd1y11lOy3UUaR6PCHKDJUcCvwyIf2QYHghuyytCxgpoTcb7Wn2gXuxCRpSrPhvQCBiG6ODPzPM4aiONFbB7oP//b2umuJ0yg41v+JTdhcMJJBnQbXZm7IJ1TgD/BHNS+yM5sw/KyqfC506GashqBhOA+to7OBMMw7BUSrjJn7uqrPaBu++JcPKzL4SH4E8CL7wX80RrELNB2ym4z4DGJpsdOIyqWIGgcBXsPan7E5CwBr/1H/GYS3rbCb+UaFQEveR69Q1KiPIEoaWebb4t6E7oODPHCwQ9JqtQpBzkhMZc70isV8etHKWpOpf/zVIjlyziOSgAAAA=",WE={id:"recommend"},qE={class:"scroll-content"},KE=["src"],ZE={__name:"recommend",setup(s){const t=$s(null),e=[new URL("/daiyanren/assets/Color%20Game-CSAes9Nt.webp",import.meta.url).href,new URL("/daiyanren/assets/JILI_Mines-d1_C-NHe.webp",import.meta.url).href,new URL("/daiyanren/assets/Jackpot%20Fishing-BKC4kSej.webp",import.meta.url).href,new URL("/daiyanren/assets/Texas-CC1orZST.webp",import.meta.url).href,new URL("/daiyanren/assets/Lucky9-BE_MNCbm.webp",import.meta.url).href,new URL("/daiyanren/assets/JILI_Color%20Game-CkgIPJI_.webp",import.meta.url).href],r=Ns(()=>[...e,...e]);let n=null,i=!1,o=!1,l=null;function a(){const m=t.value;if(!m||i||o||m.scrollWidth===0)return;m.scrollLeft+=.5;const g=m.scrollWidth/2;m.scrollLeft>=g&&(m.scrollLeft-=g)}function h(){c(),n=setInterval(a,16)}function c(){clearInterval(n),n=null}function u(){i=!0,c()}function d(){i=!1,o=!0,clearTimeout(l),l=setTimeout(()=>{o=!1,h()},2e3)}function f(){var p;const m=((p=t.value)==null?void 0:p.querySelectorAll("img"))||[],g=Array.from(m).map(y=>new Promise(x=>{if(y.complete)return x();y.onload=x,y.onerror=x}));return Promise.all(g)}return Pr(async()=>{await Hd(),await f(),t.value.scrollLeft=1,h()}),jd(()=>{c(),clearTimeout(l)}),(m,g)=>{const p=ho("router-link");return At(),Jt("div",WE,[g[0]||(g[0]=vt("div",{id:"recommend-title"},[vt("div",{class:"ico inline"},[vt("img",{src:zE,width:"100%"})]),vt("div",{class:"title inline"},"Recommend")],-1)),vt("div",{ref_key:"scrollEl",ref:t,class:"scroll-container",onPointerdown:u,onPointerup:d,onPointercancel:d,onPointerleave:d},[vt("div",qE,[(At(!0),Jt(we,null,za(r.value,(y,x)=>(At(),Jt("div",{key:x,class:"item"},[ht(p,{to:"/game"},{default:Ki(()=>[vt("img",{src:y},null,8,KE)]),_:2},1024)]))),128))])],544)])}}},mo=Ue(ZE,[["__scopeId","data-v-c1d35b18"]]),QE="/daiyanren/assets/Tongits-9TwT1Tmq.webp",JE="/daiyanren/assets/Poker-SqUmxJ-p.webp",tS="/daiyanren/assets/Slot-XKikKsjy.webp",eS="/daiyanren/assets/Casino-BYJ1f8RR.webp",sS="/daiyanren/assets/Live-XZ_euehB.webp",rS="/daiyanren/assets/Sports-DdY3vjwC.webp",nS={};function iS(s,t){return t[0]||(t[0]=Jl('<div id="mainenter" data-v-83929ad1><div id="a1" class="item" data-v-83929ad1><img src="'+QE+'" width="100%" data-v-83929ad1></div><div id="a2" class="item" data-v-83929ad1><img src="'+JE+'" width="100%" data-v-83929ad1></div><div id="a3" class="item" data-v-83929ad1><img src="'+tS+'" width="100%" data-v-83929ad1></div><div id="a4" class="item" data-v-83929ad1><img src="'+eS+'" width="100%" data-v-83929ad1></div><div id="a5" class="item" data-v-83929ad1><img src="'+sS+'" width="100%" data-v-83929ad1></div><div id="a6" class="item" data-v-83929ad1><img src="'+rS+'" width="100%" data-v-83929ad1></div></div><div class="clear" data-v-83929ad1></div>',2))}const po=Ue(nS,[["render",iS],["__scopeId","data-v-83929ad1"]]),r0="data:image/webp;base64,UklGRsIFAABXRUJQVlA4WAoAAAAwAAAAQQAAQQAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZBTFBIEAMAAA0kAUmKsoiIWFa27XkiRUIcTBxMHdBRACgoKPhR0KkCqAJAwRYFWxRsx0HGQVbBXmne7/2+smdzFBEOHMltG6ZIVDkfyaMfARDEf7mFiChFRES4H5qPT//DqipNUawcjs5P/e1VoUquG+d8NXaxkPgFkRzq2z2+ZqUwbitksGu2ybmz4BN2TQ7lJZN6vZlJSLKHk3Oh8BChtPNk6fnduhChVIfktjkVfBK7ccn5TNHAZTO41J01dqEzFBMqtD7a6Kyezo2VV7iEtuYTWSskZ/tz7t5kNuqECwJ0YhYEPMq5sWZ8mCBuHbPzMk2A2Rh9vu3JrpSFfSNNypfw9RdhzUJdTsm5x9rIqe1Fm8rA7IeLay1OmGabtW5gFMe/yb/XzJ2Cx4ojUSa9CXmqX9RH+po2bWCgH+z7O2gvm5IbfgILWyZDHRB0gTuJBzxX2o8lZwmoiBkeoNHiP89Bg8ke+BSl36DNIGUuTRUH3fiSmVhOJmmDiIHLrBPdVTnnPWRXHB7+FfsA2ZICZSMxbGQ+RZHzvRJjzghzY9bOnBlsHT6SDVlLS3cBKORnzgxlVaQlDfqNq2LFDUFLfvKILQQmimHYSKh1ws17AQrtcIeRI0vXKLNbn6L74xloTDjafAiMdsf3GykFB51wtPnQb4gDbLIAbe+FC45cxib3/QtuZdUyI66UBxG9bhjjWNy0vQYLqDpiORRQWK4HcE8+BBVUH3toTgvouUsQ2BT1ATO2h1apsRF0V3TiFrNi3lBFqILiq+i8V88jHZFuVYQqqOB4HfuIkmqO/LD9jwu4uTukFF2FIBq86Fr42VyWK29YKek4rhf5pd9YB9gCo+8K5TYXDKYJP0tT6STbBjPDWslWo4+WDIcFv30Za5bp2V7rjo+xoFyV8QUuC/M+iCbJZLTbVlDD+U40Rn3myYRusYJqkTwuMwV8F1CEWcYLKt21StYSxep2TWD8ZjOX6tlKBvcSH0/Y7V63YnJapNfP78Iu9RdGih+oD9VcEja3svM+vz8WsOpjMJLSyobU7EXOD/oB+QBWUDggvAAAANAHAJ0BKkIAQgA+ZSiQRaQioZo0cEAGRLOAalbYXZ92m7zDkVfQD6AAVY+Xcdsop1WGpzCIpXNeuPXSZydOk/dBXgnYvw4AAP7LQ+7AzpIOi28CKXetU23r9R+dvuBnWYFwy/Ouf8lgIDvDYmxSBLAr0jRewFbwlXQQ6X/45ZyJhgFOAaRJtx5haDeDEYkkh2QpMXPzyXw83925X8X07/yVv//eKVRSKn8t+8tTUJ28Ls3g28KE/+3qAAAA",aS={class:"scrolling-warp"},oS={class:"scrolling-title"},lS={class:"title inline"},hS={class:"all"},cS={class:"scrolling-list"},uS=["src"],dS={__name:"scrolling_home",props:{tit:String,items:Array},setup(s){return(t,e)=>{const r=ho("router-link");return At(),Jt("div",aS,[vt("div",oS,[e[1]||(e[1]=vt("div",{class:"ico inline"},[vt("img",{src:r0,width:"100%"})],-1)),vt("div",lS,Yl(s.tit),1),vt("div",hS,[ht(r,{to:"/game_list"},{default:Ki(()=>e[0]||(e[0]=[qd("All")])),_:1})])]),vt("div",cS,[(At(!0),Jt(we,null,za(s.items,(n,i)=>(At(),Jt("span",{key:n.id},[ht(r,{to:"/game"},{default:Ki(()=>[vt("img",{src:n.url,width:"100%",loading:"lazy"},null,8,uS)]),_:2},1024)]))),128))])])}}},gs=Ue(dS,[["__scopeId","data-v-c2c0ce70"]]),fS="/daiyanren/assets/Game%20Providers-r3AOSeam.webp",mS={},pS={id:"game_providers"};function gS(s,t){return At(),Jt("div",pS,t[0]||(t[0]=[vt("img",{src:fS,width:"100%"},null,-1)]))}const go=Ue(mS,[["render",gS],["__scopeId","data-v-01dd73a2"]]),yS="/daiyanren/assets/About%20GameZone-goSm_sgG.webp",xS={},_S={id:"about_gamezone"};function AS(s,t){return At(),Jt("div",_S,t[0]||(t[0]=[vt("img",{src:yS,width:"100%"},null,-1)]))}const yo=Ue(xS,[["render",AS],["__scopeId","data-v-0b987486"]]),bS="/daiyanren/assets/Biggest%20Winings-O4djG0wa.webp",vS={},wS={id:"biggest_winings"};function ES(s,t){return At(),Jt("div",wS,t[0]||(t[0]=[vt("img",{src:bS,width:"100%"},null,-1)]))}const xo=Ue(vS,[["render",ES],["__scopeId","data-v-9762e30a"]]),SS={id:"wrap"},TS={__name:"home",setup(s){const{jsonData:t,fetchImages:e}=ps(),{jsonData:r,fetchImages:n}=ps(),{jsonData:i,fetchImages:o}=ps();return Pr(()=>{e("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),n("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),o("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(l,a)=>(At(),Jt("div",SS,[ht(hi,{msg:"Hello World"}),ht(ia),ht(mo),ht(po),ht(gs,{tit:"GZ Originals",items:ie(t)},null,8,["items"]),(At(),ne(Ie,null,[ht(xo)],1024)),ht(gs,{tit:"Table Game",items:ie(r)},null,8,["items"]),ht(gs,{tit:"New Game",items:ie(i)},null,8,["items"]),(At(),ne(Ie,null,[ht(go)],1024)),(At(),ne(Ie,null,[ht(yo)],1024)),(At(),ne(Ie,null,[ht(na)],1024))]))}},CS="/daiyanren/assets/Color%20Game-CSAes9Nt.webp",RS="/daiyanren/assets/green-joker-CB29A2If.webp",IS="/daiyanren/assets/green-pusoy-CFVk24gc.webp",MS="/daiyanren/assets/green-texas-33ZuLDm3.webp",PS="/daiyanren/assets/green-tongits-DUg54LvJ.webp",FS="/daiyanren/assets/Jackpot%20Bingo-BgahXjly.webp",BS="/daiyanren/assets/Jackpot%20Fishing-BKC4kSej.webp",kS="/daiyanren/assets/JILI_Color%20Game-CkgIPJI_.webp",NS="/daiyanren/assets/JILI_Mines-d1_C-NHe.webp",OS="/daiyanren/assets/Lucky%20Hilo-9ou0b5mH.webp",LS="/daiyanren/assets/Lucky9-BE_MNCbm.webp",VS="/daiyanren/assets/Mega%20Fishing-IwO63i97.webp",US="/daiyanren/assets/Mines-BF3GnRZO.webp",DS="/daiyanren/assets/Piggy%20Tap-Bw9PV_ny.webp",GS="/daiyanren/assets/Pusoy-BsfIYJFa.webp",$S="/daiyanren/assets/Texas-CC1orZST.webp",XS="/daiyanren/assets/Texas%20Plus-DiRujbbx.webp",HS="/daiyanren/assets/Tongits%20Joker-CLici77f.webp",YS="/daiyanren/assets/Tongits%20Plus-C_jT0bwB.webp",jS={},zS={id:"all_game"};function WS(s,t){return At(),Jt("div",zS,t[0]||(t[0]=[Jl('<div id="all_game-title" data-v-10b4c672><div class="ico inline" data-v-10b4c672><img src="'+r0+'" width="100%" data-v-10b4c672></div><div class="title inline" data-v-10b4c672>All Game</div></div><div id="all_game-list" data-v-10b4c672><span data-v-10b4c672><img src="'+CS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+RS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+IS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+MS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+PS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+FS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+BS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+kS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+NS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+OS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+LS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+VS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+US+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+DS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+GS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+$S+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+XS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+HS+'" width="100%" data-v-10b4c672></span><span data-v-10b4c672><img src="'+YS+'" width="100%" data-v-10b4c672></span></div>',2)]))}const qS=Ue(jS,[["render",WS],["__scopeId","data-v-10b4c672"]]),KS={id:"wrap",class:"content"},ZS={__name:"game_list",setup(s){return(t,e)=>(At(),Jt("div",KS,[ht(hi,{msg:"Hello World"}),ht(ia),ht(qS),ht(na)]))}},QS=Ue(ZS,[["__scopeId","data-v-a4748cb0"]]),JS={id:"wrap"},tT={__name:"reward",setup(s){const t=$s(!1),e=()=>{t.value=!1};window.addEventListener("close",e);const{jsonData:r,fetchImages:n}=ps(),{jsonData:i,fetchImages:o}=ps(),{jsonData:l,fetchImages:a}=ps();return Pr(()=>{n("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),o("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),a("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(h,c)=>(At(),Jt(we,null,[t.value?(At(),ne(fo,{key:0,onClose:e})):co("",!0),vt("div",JS,[ht(hi,{msg:"Hello World"}),ht(ia),ht(mo),ht(po),ht(gs,{tit:"GZ Originals",items:ie(r)},null,8,["items"]),(At(),ne(Ie,null,[ht(xo)],1024)),ht(gs,{tit:"Table Game",items:ie(i)},null,8,["items"]),ht(gs,{tit:"New Game",items:ie(l)},null,8,["items"]),(At(),ne(Ie,null,[ht(go)],1024)),(At(),ne(Ie,null,[ht(yo)],1024)),(At(),ne(Ie,null,[ht(na)],1024))])],64))}},eT=Ue(tT,[["__scopeId","data-v-7e6f536b"]]),sT={id:"wrap"},rT={__name:"tongits",setup(s){const t=$s(!1),e=()=>{t.value=!1};window.addEventListener("close",e);const{jsonData:r,fetchImages:n}=ps(),{jsonData:i,fetchImages:o}=ps(),{jsonData:l,fetchImages:a}=ps();return Pr(()=>{n("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),o("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),a("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(h,c)=>(At(),Jt(we,null,[t.value?(At(),ne(fo,{key:0,onClose:e})):co("",!0),vt("div",sT,[ht(hi,{msg:"Hello World"}),ht(ia),ht(mo),ht(po),ht(gs,{tit:"GZ Originals",items:ie(r)},null,8,["items"]),(At(),ne(Ie,null,[ht(xo)],1024)),ht(gs,{tit:"Table Game",items:ie(i)},null,8,["items"]),ht(gs,{tit:"New Game",items:ie(l)},null,8,["items"]),(At(),ne(Ie,null,[ht(go)],1024)),(At(),ne(Ie,null,[ht(yo)],1024)),(At(),ne(Ie,null,[ht(na)],1024))])],64))}},nT=Ue(rT,[["__scopeId","data-v-ee1531c1"]]),iT={id:"wrap"},aT={__name:"wallet",setup(s){const t=$s(!1),e=()=>{t.value=!1};window.addEventListener("close",e);const{jsonData:r,fetchImages:n}=ps(),{jsonData:i,fetchImages:o}=ps(),{jsonData:l,fetchImages:a}=ps();return Pr(()=>{n("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),o("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),a("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(h,c)=>(At(),Jt(we,null,[t.value?(At(),ne(fo,{key:0,onClose:e})):co("",!0),vt("div",iT,[ht(hi,{msg:"Hello World"}),ht(ia),ht(mo),ht(po),ht(gs,{tit:"GZ Originals",items:ie(r)},null,8,["items"]),(At(),ne(Ie,null,[ht(xo)],1024)),ht(gs,{tit:"Table Game",items:ie(i)},null,8,["items"]),ht(gs,{tit:"New Game",items:ie(l)},null,8,["items"]),(At(),ne(Ie,null,[ht(go)],1024)),(At(),ne(Ie,null,[ht(yo)],1024)),(At(),ne(Ie,null,[ht(na)],1024))])],64))}},oT=Ue(aT,[["__scopeId","data-v-312265d8"]]),lT={id:"wrap"},hT={__name:"account",setup(s){const t=$s(!1),e=()=>{t.value=!1};window.addEventListener("close",e);const{jsonData:r,fetchImages:n}=ps(),{jsonData:i,fetchImages:o}=ps(),{jsonData:l,fetchImages:a}=ps();return Pr(()=>{n("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=gz"),o("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=tg"),a("https://script.google.com/macros/s/AKfycbyv04RsxX1bjlqMsU555dzXH76PTCUIk_tEG64eSduq0dXor-CwS5v4tqiog4szodje0A/exec?type=ng")}),(h,c)=>(At(),Jt(we,null,[t.value?(At(),ne(fo,{key:0,onClose:e})):co("",!0),vt("div",lT,[ht(hi,{msg:"Hello World"}),ht(ia),ht(mo),ht(po),ht(gs,{tit:"GZ Originals",items:ie(r)},null,8,["items"]),(At(),ne(Ie,null,[ht(xo)],1024)),ht(gs,{tit:"Table Game",items:ie(i)},null,8,["items"]),ht(gs,{tit:"New Game",items:ie(l)},null,8,["items"]),(At(),ne(Ie,null,[ht(go)],1024)),(At(),ne(Ie,null,[ht(yo)],1024)),(At(),ne(Ie,null,[ht(na)],1024))])],64))}},cT=Ue(hT,[["__scopeId","data-v-d6c444b9"]]),uT="modulepreload",dT=function(s){return"/daiyanren/"+s},Nm={},wl=function(t,e,r){let n=Promise.resolve();if(e&&e.length>0){let o=function(h){return Promise.all(h.map(c=>Promise.resolve(c).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),a=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(e.map(h=>{if(h=dT(h),h in Nm)return;Nm[h]=!0;const c=h.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":uT,c||(d.as="script"),d.crossOrigin="",d.href=h,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var bt=(s=>(s.Application="application",s.WebGLPipes="webgl-pipes",s.WebGLPipesAdaptor="webgl-pipes-adaptor",s.WebGLSystem="webgl-system",s.WebGPUPipes="webgpu-pipes",s.WebGPUPipesAdaptor="webgpu-pipes-adaptor",s.WebGPUSystem="webgpu-system",s.CanvasSystem="canvas-system",s.CanvasPipesAdaptor="canvas-pipes-adaptor",s.CanvasPipes="canvas-pipes",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s.MaskEffect="mask-effect",s.BlendMode="blend-mode",s.TextureSource="texture-source",s.Environment="environment",s.ShapeBuilder="shape-builder",s.Batcher="batcher",s))(bt||{});const Du=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},Co=(s,t)=>Du(s).priority??t,Ze={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(Du).forEach(t=>{t.type.forEach(e=>{var r,n;return(n=(r=this._removeHandlers)[e])==null?void 0:n.call(r,t)})}),this},add(...s){return s.map(Du).forEach(t=>{t.type.forEach(e=>{var i,o;const r=this._addHandlers,n=this._queue;r[e]?(o=r[e])==null||o.call(r,t):(n[e]=n[e]||[],(i=n[e])==null||i.push(t))})}),this},handle(s,t,e){var o;const r=this._addHandlers,n=this._removeHandlers;if(r[s]||n[s])throw new Error(`Extension type ${s} already has a handler`);r[s]=t,n[s]=e;const i=this._queue;return i[s]&&((o=i[s])==null||o.forEach(l=>t(l)),delete i[s]),this},handleByMap(s,t){return this.handle(s,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(s,t,e=-1){return this.handle(s,r=>{t.findIndex(i=>i.name===r.name)>=0||(t.push({name:r.name,value:r.ref}),t.sort((i,o)=>Co(o.value,e)-Co(i.value,e)))},r=>{const n=t.findIndex(i=>i.name===r.name);n!==-1&&t.splice(n,1)})},handleByList(s,t,e=-1){return this.handle(s,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((n,i)=>Co(i,e)-Co(n,e)))},r=>{const n=t.indexOf(r.ref);n!==-1&&t.splice(n,1)})},mixin(s,...t){for(const e of t)Object.defineProperties(s.prototype,Object.getOwnPropertyDescriptors(e))}},fT={extension:{type:bt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await wl(()=>import("./browserAll-CAni9rhl.js"),__vite__mapDeps([0,1,2]))}},mT={extension:{type:bt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await wl(()=>import("./webworkerAll-BXtKzYIp.js"),__vite__mapDeps([1,2]))}};let lr=class n0{constructor(t,e,r){this._x=e||0,this._y=r||0,this._observer=t}clone(t){return new n0(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}};var El=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function pT(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var n=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return s[r]}})}),e}var Oh={exports:{}},Om;function gT(){return Om||(Om=1,function(s){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function n(a,h,c){this.fn=a,this.context=h,this.once=c||!1}function i(a,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new n(c,u||a,d),m=e?e+h:h;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],f]:a._events[m].push(f):(a._events[m]=f,a._eventsCount++),a}function o(a,h){--a._eventsCount===0?a._events=new r:delete a._events[h]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},l.prototype.listeners=function(h){var c=e?e+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,m=new Array(f);d<f;d++)m[d]=u[d].fn;return m},l.prototype.listenerCount=function(h){var c=e?e+h:h,u=this._events[c];return u?u.fn?1:u.length:0},l.prototype.emit=function(h,c,u,d,f,m){var g=e?e+h:h;if(!this._events[g])return!1;var p=this._events[g],y=arguments.length,x,_;if(p.fn){switch(p.once&&this.removeListener(h,p.fn,void 0,!0),y){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,u),!0;case 4:return p.fn.call(p.context,c,u,d),!0;case 5:return p.fn.call(p.context,c,u,d,f),!0;case 6:return p.fn.call(p.context,c,u,d,f,m),!0}for(_=1,x=new Array(y-1);_<y;_++)x[_-1]=arguments[_];p.fn.apply(p.context,x)}else{var A=p.length,b;for(_=0;_<A;_++)switch(p[_].once&&this.removeListener(h,p[_].fn,void 0,!0),y){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,c);break;case 3:p[_].fn.call(p[_].context,c,u);break;case 4:p[_].fn.call(p[_].context,c,u,d);break;default:if(!x)for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];p[_].fn.apply(p[_].context,x)}}return!0},l.prototype.on=function(h,c,u){return i(this,h,c,u,!1)},l.prototype.once=function(h,c,u){return i(this,h,c,u,!0)},l.prototype.removeListener=function(h,c,u,d){var f=e?e+h:h;if(!this._events[f])return this;if(!c)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===c&&(!d||m.once)&&(!u||m.context===u)&&o(this,f);else{for(var g=0,p=[],y=m.length;g<y;g++)(m[g].fn!==c||d&&!m[g].once||u&&m[g].context!==u)&&p.push(m[g]);p.length?this._events[f]=p.length===1?p[0]:p:o(this,f)}return this},l.prototype.removeAllListeners=function(h){var c;return h?(c=e?e+h:h,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,s.exports=l}(Oh)),Oh.exports}var yT=gT();const xr=eh(yT),xT=Math.PI*2,_T=180/Math.PI,AT=Math.PI/180;let _s=class i0{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new i0(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Lh.x=0,Lh.y=0,Lh}};const Lh=new _s;let Xt=class a0{constructor(t=1,e=0,r=0,n=1,i=0,o=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new _s;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new _s;const r=this.a,n=this.b,i=this.c,o=this.d,l=this.tx,a=this.ty,h=1/(r*o+i*-n),c=t.x,u=t.y;return e.x=o*h*c+-i*h*u+(a*i-l*o)*h,e.y=r*h*u+-n*h*c+(-a*r+l*n)*h,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}appendFrom(t,e){const r=t.a,n=t.b,i=t.c,o=t.d,l=t.tx,a=t.ty,h=e.a,c=e.b,u=e.c,d=e.d;return this.a=r*h+n*u,this.b=r*c+n*d,this.c=i*h+o*u,this.d=i*c+o*d,this.tx=l*h+a*u+e.tx,this.ty=l*c+a*d+e.ty,this}setTransform(t,e,r,n,i,o,l,a,h){return this.a=Math.cos(l+h)*i,this.b=Math.sin(l+h)*i,this.c=-Math.sin(l-a)*o,this.d=Math.cos(l-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,i=this.d,o=t.pivot,l=-Math.atan2(-n,i),a=Math.atan2(r,e),h=Math.abs(l+a);return h<1e-5||Math.abs(xT-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*i),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new a0;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return vT.identity()}static get shared(){return bT.identity()}};const bT=new Xt,vT=new Xt,Gn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],$n=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Xn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Hn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Gu=[],o0=[],Ro=Math.sign;function wT(){for(let s=0;s<16;s++){const t=[];Gu.push(t);for(let e=0;e<16;e++){const r=Ro(Gn[s]*Gn[e]+Xn[s]*$n[e]),n=Ro($n[s]*Gn[e]+Hn[s]*$n[e]),i=Ro(Gn[s]*Xn[e]+Xn[s]*Hn[e]),o=Ro($n[s]*Xn[e]+Hn[s]*Hn[e]);for(let l=0;l<16;l++)if(Gn[l]===r&&$n[l]===n&&Xn[l]===i&&Hn[l]===o){t.push(l);break}}}for(let s=0;s<16;s++){const t=new Xt;t.set(Gn[s],$n[s],Xn[s],Hn[s],0,0),o0.push(t)}}wT();const fe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>Gn[s],uY:s=>$n[s],vX:s=>Xn[s],vY:s=>Hn[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>Gu[s][t],sub:(s,t)=>Gu[s][fe.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?fe.S:fe.N:Math.abs(t)*2<=Math.abs(s)?s>0?fe.E:fe.W:t>0?s>0?fe.SE:fe.SW:s>0?fe.NE:fe.NW,matrixAppendRotationInv:(s,t,e=0,r=0)=>{const n=o0[fe.inv(t)];n.tx=e,n.ty=r,s.append(n)}},Io=[new _s,new _s,new _s,new _s];let ss=class sl{constructor(t=0,e=0,r=0,n=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new sl(0,0,0,0)}clone(){return new sl(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,r,n=.5){const{width:i,height:o}=this;if(i<=0||o<=0)return!1;const l=this.x,a=this.y,h=r*(1-n),c=r-h,u=l-h,d=l+i+h,f=a-h,m=a+o+h,g=l+c,p=l+i-c,y=a+c,x=a+o-c;return t>=u&&t<=d&&e>=f&&e<=m&&!(t>g&&t<p&&e>y&&e<x)}intersects(t,e){if(!e){const R=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=R)return!1;const F=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>F}const r=this.left,n=this.right,i=this.top,o=this.bottom;if(n<=r||o<=i)return!1;const l=Io[0].set(t.left,t.top),a=Io[1].set(t.left,t.bottom),h=Io[2].set(t.right,t.top),c=Io[3].set(t.right,t.bottom);if(h.x<=l.x||a.y<=l.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(l,l),e.apply(a,a),e.apply(h,h),e.apply(c,c),Math.max(l.x,a.x,h.x,c.x)<=r||Math.min(l.x,a.x,h.x,c.x)>=n||Math.max(l.y,a.y,h.y,c.y)<=i||Math.min(l.y,a.y,h.y,c.y)>=o))return!1;const d=u*(a.y-l.y),f=u*(l.x-a.x),m=d*r+f*i,g=d*n+f*i,p=d*r+f*o,y=d*n+f*o;if(Math.max(m,g,p,y)<=d*l.x+f*l.y||Math.min(m,g,p,y)>=d*c.x+f*c.y)return!1;const x=u*(l.y-h.y),_=u*(h.x-l.x),A=x*r+_*i,b=x*n+_*i,w=x*r+_*o,v=x*n+_*o;return!(Math.max(A,b,w,v)<=x*l.x+_*l.y||Math.min(A,b,w,v)>=x*c.x+_*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this}getBounds(t){return t||(t=new sl),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const e=t.x,r=t.y,n=t.x+t.width,i=t.y+t.height;return e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height&&n>=this.x&&n<this.x+this.width&&i>=this.y&&i<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}};const Vh={default:-1};function Me(s="default"){return Vh[s]===void 0&&(Vh[s]=-1),++Vh[s]}const Lm={},Le="8.0.0",ET="8.3.4";function oe(s,t,e=3){if(Lm[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(r))),Lm[t]=!0}const l0=()=>{};function Sl(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function Vm(s){return!(s&s-1)&&!!s}function h0(s){const t={};for(const e in s)s[e]!==void 0&&(t[e]=s[e]);return t}const Um=Object.create(null);function ST(s){const t=Um[s];return t===void 0&&(Um[s]=Me("resource")),t}const c0=class u0 extends xr{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...u0.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){oe(Le,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=ST(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};c0.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let TT=c0;const d0=class f0 extends xr{constructor(t={}){super(),this.options=t,this.uid=Me("textureSource"),this._resourceType="textureSource",this._resourceId=Me("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...f0.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new TT(h0(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,r;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(r=this._style)==null||r.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Me("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,r){r||(r=this._resolution),t||(t=this.width),e||(e=this.height);const n=Math.round(t*r),i=Math.round(e*r);return this.width=n/r,this.height=i/r,this._resolution=r,this.pixelWidth===n&&this.pixelHeight===i?!1:(this._refreshPOT(),this.pixelWidth=n,this.pixelHeight=i,this.emit("resize",this),this._resourceId=Me("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Vm(this.pixelWidth)&&Vm(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};d0.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Fr=d0;class ef extends Fr{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let r=t.format;r||(e instanceof Float32Array?r="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?r="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?r="rgba16uint":(e instanceof Int8Array,r="bgra8unorm")),super({...t,resource:e,format:r}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}ef.extension=bt.TextureSource;const Dm=new Xt;let CT=class{constructor(t,e){this.mapCoord=new Xt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const r=t.orig,n=t.trim;n&&(Dm.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Dm));const i=t.source,o=this.uClampFrame,l=this.clampMargin/i._resolution,a=this.clampOffset/i._resolution;return o[0]=(t.frame.x+l+a)/i.width,o[1]=(t.frame.y+l+a)/i.height,o[2]=(t.frame.x+t.frame.width-l+a)/i.width,o[3]=(t.frame.y+t.frame.height-l+a)/i.height,this.uClampOffset[0]=this.clampOffset/i.pixelWidth,this.uClampOffset[1]=this.clampOffset/i.pixelHeight,this.isSimple=t.frame.width===i.width&&t.frame.height===i.height&&t.rotate===0,!0}},Gt=class extends xr{constructor({source:t,label:e,frame:r,orig:n,trim:i,defaultAnchor:o,defaultBorders:l,rotate:a,dynamic:h}={}){if(super(),this.uid=Me("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ss,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new Fr,this.noFrame=!r,r)this.frame.copyFrom(r);else{const{width:c,height:u}=this._source;this.frame.width=c,this.frame.height=u}this.orig=n||this.frame,this.trim=i,this.rotate=a??0,this.defaultAnchor=o,this.defaultBorders=l,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new CT(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:r,height:n}=this._source,i=e.x/r,o=e.y/n,l=e.width/r,a=e.height/n;let h=this.rotate;if(h){const c=l/2,u=a/2,d=i+c,f=o+u;h=fe.add(h,fe.NW),t.x0=d+c*fe.uX(h),t.y0=f+u*fe.uY(h),h=fe.add(h,2),t.x1=d+c*fe.uX(h),t.y1=f+u*fe.uY(h),h=fe.add(h,2),t.x2=d+c*fe.uX(h),t.y2=f+u*fe.uY(h),h=fe.add(h,2),t.x3=d+c*fe.uX(h),t.y3=f+u*fe.uY(h)}else t.x0=i,t.y0=o,t.x1=i+l,t.y1=o,t.x2=i+l,t.y2=o+a,t.x3=i,t.y3=o+a}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return oe(Le,"Texture.baseTexture is now Texture.source"),this._source}};Gt.EMPTY=new Gt({label:"EMPTY",source:new Fr({label:"EMPTY"})});Gt.EMPTY.destroy=l0;Gt.WHITE=new Gt({source:new ef({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Gt.WHITE.destroy=l0;function RT(s,t,e){const{width:r,height:n}=e.orig,i=e.trim;if(i){const o=i.width,l=i.height;s.minX=i.x-t._x*r,s.maxX=s.minX+o,s.minY=i.y-t._y*n,s.maxY=s.minY+l}else s.minX=-t._x*r,s.maxX=s.minX+r,s.minY=-t._y*n,s.maxY=s.minY+n}const Gm=new Xt;let jr=class m0{constructor(t=1/0,e=1/0,r=-1/0,n=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gm,this.minX=t,this.minY=e,this.maxX=r,this.maxY=n}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ss);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gm,this}set(t,e,r,n){this.minX=t,this.minY=e,this.maxX=r,this.maxY=n}addFrame(t,e,r,n,i){i||(i=this.matrix);const o=i.a,l=i.b,a=i.c,h=i.d,c=i.tx,u=i.ty;let d=this.minX,f=this.minY,m=this.maxX,g=this.maxY,p=o*t+a*e+c,y=l*t+h*e+u;p<d&&(d=p),y<f&&(f=y),p>m&&(m=p),y>g&&(g=y),p=o*r+a*e+c,y=l*r+h*e+u,p<d&&(d=p),y<f&&(f=y),p>m&&(m=p),y>g&&(g=y),p=o*t+a*n+c,y=l*t+h*n+u,p<d&&(d=p),y<f&&(f=y),p>m&&(m=p),y>g&&(g=y),p=o*r+a*n+c,y=l*r+h*n+u,p<d&&(d=p),y<f&&(f=y),p>m&&(m=p),y>g&&(g=y),this.minX=d,this.minY=f,this.maxX=m,this.maxY=g}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,{a:o,b:l,c:a,d:h,tx:c,ty:u}=t;let d=o*e+a*r+c,f=l*e+h*r+u;this.minX=d,this.minY=f,this.maxX=d,this.maxY=f,d=o*n+a*r+c,f=l*n+h*r+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*e+a*i+c,f=l*e+h*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY,d=o*n+a*i+c,f=l*n+h*i+u,this.minX=d<this.minX?d:this.minX,this.minY=f<this.minY?f:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=f>this.maxY?f:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,r,n){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<r&&(this.minY=r),this.maxY>n&&(this.maxY=n),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new m0(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,r,n){let i=this.minX,o=this.minY,l=this.maxX,a=this.maxY;n||(n=this.matrix);const h=n.a,c=n.b,u=n.c,d=n.d,f=n.tx,m=n.ty;for(let g=e;g<r;g+=2){const p=t[g],y=t[g+1],x=h*p+u*y+f,_=c*p+d*y+m;i=x<i?x:i,o=_<o?_:o,l=x>l?x:l,a=_>a?_:a}this.minX=i,this.minY=o,this.maxX=l,this.maxY=a}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}};var IT={grad:.9,turn:360,rad:360/(2*Math.PI)},Lr=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},Xe=function(s,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*s)/e+0},Ls=function(s,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),s>e?e:s>t?s:t},p0=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},$m=function(s){return{r:Ls(s.r,0,255),g:Ls(s.g,0,255),b:Ls(s.b,0,255),a:Ls(s.a)}},Uh=function(s){return{r:Xe(s.r),g:Xe(s.g),b:Xe(s.b),a:Xe(s.a,3)}},MT=/^#([0-9a-f]{3,8})$/i,Mo=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},g0=function(s){var t=s.r,e=s.g,r=s.b,n=s.a,i=Math.max(t,e,r),o=i-Math.min(t,e,r),l=o?i===t?(e-r)/o:i===e?2+(r-t)/o:4+(t-e)/o:0;return{h:60*(l<0?l+6:l),s:i?o/i*100:0,v:i/255*100,a:n}},y0=function(s){var t=s.h,e=s.s,r=s.v,n=s.a;t=t/360*6,e/=100,r/=100;var i=Math.floor(t),o=r*(1-e),l=r*(1-(t-i)*e),a=r*(1-(1-t+i)*e),h=i%6;return{r:255*[r,l,o,o,a,r][h],g:255*[a,r,r,l,o,o][h],b:255*[o,o,a,r,r,l][h],a:n}},Xm=function(s){return{h:p0(s.h),s:Ls(s.s,0,100),l:Ls(s.l,0,100),a:Ls(s.a)}},Hm=function(s){return{h:Xe(s.h),s:Xe(s.s),l:Xe(s.l),a:Xe(s.a,3)}},Ym=function(s){return y0((e=(t=s).s,{h:t.h,s:(e*=((r=t.l)<50?r:100-r)/100)>0?2*e/(r+e)*100:0,v:r+e,a:t.a}));var t,e,r},$a=function(s){return{h:(t=g0(s)).h,s:(n=(200-(e=t.s))*(r=t.v)/100)>0&&n<200?e*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,e,r,n},PT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,FT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,BT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,kT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,$u={string:[[function(s){var t=MT.exec(s);return t?(s=t[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?Xe(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?Xe(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var t=BT.exec(s)||kT.exec(s);return t?t[2]!==t[4]||t[4]!==t[6]?null:$m({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(s){var t=PT.exec(s)||FT.exec(s);if(!t)return null;var e,r,n=Xm({h:(e=t[1],r=t[2],r===void 0&&(r="deg"),Number(e)*(IT[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Ym(n)},"hsl"]],object:[[function(s){var t=s.r,e=s.g,r=s.b,n=s.a,i=n===void 0?1:n;return Lr(t)&&Lr(e)&&Lr(r)?$m({r:Number(t),g:Number(e),b:Number(r),a:Number(i)}):null},"rgb"],[function(s){var t=s.h,e=s.s,r=s.l,n=s.a,i=n===void 0?1:n;if(!Lr(t)||!Lr(e)||!Lr(r))return null;var o=Xm({h:Number(t),s:Number(e),l:Number(r),a:Number(i)});return Ym(o)},"hsl"],[function(s){var t=s.h,e=s.s,r=s.v,n=s.a,i=n===void 0?1:n;if(!Lr(t)||!Lr(e)||!Lr(r))return null;var o=function(l){return{h:p0(l.h),s:Ls(l.s,0,100),v:Ls(l.v,0,100),a:Ls(l.a)}}({h:Number(t),s:Number(e),v:Number(r),a:Number(i)});return y0(o)},"hsv"]]},jm=function(s,t){for(var e=0;e<t.length;e++){var r=t[e][0](s);if(r)return[r,t[e][1]]}return[null,void 0]},NT=function(s){return typeof s=="string"?jm(s.trim(),$u.string):typeof s=="object"&&s!==null?jm(s,$u.object):[null,void 0]},Dh=function(s,t){var e=$a(s);return{h:e.h,s:Ls(e.s+100*t,0,100),l:e.l,a:e.a}},Gh=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},zm=function(s,t){var e=$a(s);return{h:e.h,s:e.s,l:Ls(e.l+100*t,0,100),a:e.a}},Xu=function(){function s(t){this.parsed=NT(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return Xe(Gh(this.rgba),2)},s.prototype.isDark=function(){return Gh(this.rgba)<.5},s.prototype.isLight=function(){return Gh(this.rgba)>=.5},s.prototype.toHex=function(){return t=Uh(this.rgba),e=t.r,r=t.g,n=t.b,o=(i=t.a)<1?Mo(Xe(255*i)):"","#"+Mo(e)+Mo(r)+Mo(n)+o;var t,e,r,n,i,o},s.prototype.toRgb=function(){return Uh(this.rgba)},s.prototype.toRgbString=function(){return t=Uh(this.rgba),e=t.r,r=t.g,n=t.b,(i=t.a)<1?"rgba("+e+", "+r+", "+n+", "+i+")":"rgb("+e+", "+r+", "+n+")";var t,e,r,n,i},s.prototype.toHsl=function(){return Hm($a(this.rgba))},s.prototype.toHslString=function(){return t=Hm($a(this.rgba)),e=t.h,r=t.s,n=t.l,(i=t.a)<1?"hsla("+e+", "+r+"%, "+n+"%, "+i+")":"hsl("+e+", "+r+"%, "+n+"%)";var t,e,r,n,i},s.prototype.toHsv=function(){return t=g0(this.rgba),{h:Xe(t.h),s:Xe(t.s),v:Xe(t.v),a:Xe(t.a,3)};var t},s.prototype.invert=function(){return ir({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},s.prototype.saturate=function(t){return t===void 0&&(t=.1),ir(Dh(this.rgba,t))},s.prototype.desaturate=function(t){return t===void 0&&(t=.1),ir(Dh(this.rgba,-t))},s.prototype.grayscale=function(){return ir(Dh(this.rgba,-1))},s.prototype.lighten=function(t){return t===void 0&&(t=.1),ir(zm(this.rgba,t))},s.prototype.darken=function(t){return t===void 0&&(t=.1),ir(zm(this.rgba,-t))},s.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},s.prototype.alpha=function(t){return typeof t=="number"?ir({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Xe(this.rgba.a,3);var e},s.prototype.hue=function(t){var e=$a(this.rgba);return typeof t=="number"?ir({h:t,s:e.s,l:e.l,a:e.a}):Xe(e.h)},s.prototype.isEqual=function(t){return this.toHex()===ir(t).toHex()},s}(),ir=function(s){return s instanceof Xu?s:new Xu(s)},Wm=[],x0=function(s){s.forEach(function(t){Wm.indexOf(t)<0&&(t(Xu,$u),Wm.push(t))})};function _0(s,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var n in e)r[e[n]]=n;var i={};s.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,a,h=r[this.toHex()];if(h)return h;if(o!=null&&o.closest){var c=this.toRgb(),u=1/0,d="black";if(!i.length)for(var f in e)i[f]=new s(e[f]).toRgb();for(var m in e){var g=(l=c,a=i[m],Math.pow(l.r-a.r,2)+Math.pow(l.g-a.g,2)+Math.pow(l.b-a.b,2));g<u&&(u=g,d=m)}return d}},t.string.push([function(o){var l=o.toLowerCase(),a=l==="transparent"?"#0000":e[l];return a?new s(a).toRgb():null},"name"])}x0([_0]);const Ji=class Sa{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Sa)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((i,o)=>i===e[o]);if(t!==null&&e!==null){const i=Object.keys(t),o=Object.keys(e);return i.length!==o.length?!1:i.every(l=>t[l]===e[l])}return t===e}toRgba(){const[t,e,r,n]=this._components;return{r:t,g:e,b:r,a:n}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,n]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(n*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,r,n,i]=this._components;return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,r,n]=this._components;return t[0]=e,t[1]=r,t[2]=n,t}toNumber(){return this._int}toBgrNumber(){const[t,e,r]=this.toUint8RgbArray();return(r<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,n,i]=Sa._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=n,this._components[3]*=i,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=this._int&255;return e&&(r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0),(t*255<<24)+(r<<16)+(n<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,r,n,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,r=(o>>8&255)/255,n=(o&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,n,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,n,i=255]=t,e/=255,r/=255,n/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const l=Sa.HEX_PATTERN.exec(t);l&&(t=`#${l[2]}`)}const o=ir(t);o.isValid()&&({r:e,g:r,b:n,a:i}=o.rgba,e/=255,r/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=n,this._components[3]=i,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((n,i)=>{t[i]=Math.min(Math.max(n,e),r)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Sa||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};Ji.shared=new Ji;Ji._temp=new Ji;Ji.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Pe=Ji;const OT={cullArea:null,cullable:!1,cullableChildren:!0};class sf{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var r;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(r=e.init)==null||r.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class LT{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new sf(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const r=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[r]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const Xr=new LT,VT={get isCachedAsTexture(){var s;return!!((s=this.renderGroup)!=null&&s.isCachedAsTexture)},cacheAsTexture(s){typeof s=="boolean"&&s===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(s===!0?{}:s))},updateCacheTexture(){var s;(s=this.renderGroup)==null||s.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(s){oe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(s)}};function UT(s,t,e){const r=s.length;let n;if(t>=r||e===0)return;e=t+e>r?r-t:e;const i=r-e;for(n=t;n<i;++n)s[n]=s[n+e];s.length=i}const DT={allowChildren:!0,removeChildren(s=0,t){var i;const e=t??this.children.length,r=e-s,n=[];if(r>0&&r<=e){for(let l=e-1;l>=s;l--){const a=this.children[l];a&&(n.push(a),a.parent=null)}UT(this.children,s,e);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(n);for(let l=0;l<n.length;++l){const a=n[l];(i=a.parentRenderLayer)==null||i.detach(a),this.emit("childRemoved",a,this,l),n[l].emit("removed",this)}return n.length>0&&this._didViewChangeTick++,n}else if(r===0&&this.children.length===0)return n;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(s){const t=this.getChildAt(s);return this.removeChild(t)},getChildAt(s){if(s<0||s>=this.children.length)throw new Error(`getChildAt: Index (${s}) does not exist.`);return this.children[s]},setChildIndex(s,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(s),this.addChildAt(s,t)},getChildIndex(s){const t=this.children.indexOf(s);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(s,t){this.allowChildren||oe(Le,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${s}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(s.parent){const n=s.parent.children.indexOf(s);if(s.parent===this&&n===t)return s;n!==-1&&s.parent.children.splice(n,1)}t===e.length?e.push(s):e.splice(t,0,s),s.parent=this,s.didChange=!0,s._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(s),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",s,this,t),s.emit("added",this),s},swapChildren(s,t){if(s===t)return;const e=this.getChildIndex(s),r=this.getChildIndex(t);this.children[e]=t,this.children[r]=s;const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var s;(s=this.parent)==null||s.removeChild(this)},reparentChild(...s){return s.length===1?this.reparentChildAt(s[0],this.children.length):(s.forEach(t=>this.reparentChildAt(t,this.children.length)),s[0])},reparentChildAt(s,t){if(s.parent===this)return this.setChildIndex(s,t),s;const e=s.worldTransform.clone();s.removeFromParent(),this.addChildAt(s,t);const r=this.worldTransform.clone();return r.invert(),e.prepend(r),s.setFromMatrix(e),s}},GT={collectRenderables(s,t,e){this.parentRenderLayer&&this.parentRenderLayer!==e||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(s,t,e):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,s):this.collectRenderablesWithEffects(s,t,e))},collectRenderablesSimple(s,t,e){const r=this.children,n=r.length;for(let i=0;i<n;i++)r[i].collectRenderables(s,t,e)},collectRenderablesWithEffects(s,t,e){const{renderPipes:r}=t;for(let n=0;n<this.effects.length;n++){const i=this.effects[n];r[i.pipe].push(i,this,s)}this.collectRenderablesSimple(s,t,e);for(let n=this.effects.length-1;n>=0;n--){const i=this.effects[n];r[i.pipe].pop(i,this,s)}}};class qm{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class $T{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const r=this._tests[e];if(r.test(t))return Xr.get(r.maskClass,t)}return t}returnMaskEffect(t){Xr.return(t)}}const Hu=new $T;Ze.handleByList(bt.MaskEffect,Hu._effectClasses);const XT={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)},addEffect(s){this.effects.indexOf(s)===-1&&(this.effects.push(s),this.effects.sort((e,r)=>e.priority-r.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(s){const t=this.effects.indexOf(s);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(s){const t=this._maskEffect;(t==null?void 0:t.mask)!==s&&(t&&(this.removeEffect(t),Hu.returnMaskEffect(t),this._maskEffect=null),s!=null&&(this._maskEffect=Hu.getMaskEffect(s),this.addEffect(this._maskEffect)))},setMask(s){this._maskOptions={...this._maskOptions,...s},s.mask&&(this.mask=s.mask),this._markStructureAsChanged()},get mask(){var s;return(s=this._maskEffect)==null?void 0:s.mask},set filters(s){var i;!Array.isArray(s)&&s&&(s=[s]);const t=this._filterEffect||(this._filterEffect=new qm);s=s;const e=(s==null?void 0:s.length)>0,r=((i=t.filters)==null?void 0:i.length)>0,n=e!==r;s=Array.isArray(s)?s.slice(0):s,t.filters=Object.freeze(s),n&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=s??null))},get filters(){var s;return(s=this._filterEffect)==null?void 0:s.filters},set filterArea(s){this._filterEffect||(this._filterEffect=new qm),this._filterEffect.filterArea=s},get filterArea(){var s;return(s=this._filterEffect)==null?void 0:s.filterArea}},HT={label:null,get name(){return oe(Le,"Container.name property has been removed, use Container.label instead"),this.label},set name(s){oe(Le,"Container.name property has been removed, use Container.label instead"),this.label=s},getChildByName(s,t=!1){return this.getChildByLabel(s,t)},getChildByLabel(s,t=!1){const e=this.children;for(let r=0;r<e.length;r++){const n=e[r];if(n.label===s||s instanceof RegExp&&s.test(n.label))return n}if(t)for(let r=0;r<e.length;r++){const i=e[r].getChildByLabel(s,!0);if(i)return i}return null},getChildrenByLabel(s,t=!1,e=[]){const r=this.children;for(let n=0;n<r.length;n++){const i=r[n];(i.label===s||s instanceof RegExp&&s.test(i.label))&&e.push(i)}if(t)for(let n=0;n<r.length;n++)r[n].getChildrenByLabel(s,!0,e);return e}},ms=new sf(Xt),Hr=new sf(jr),YT=new Xt,jT={getFastGlobalBounds(s,t){t||(t=new jr),t.clear(),this._getGlobalBoundsRecursive(!!s,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const e=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(e.worldTransform),t},_getGlobalBoundsRecursive(s,t,e){let r=t;if(s&&this.parentRenderLayer&&this.parentRenderLayer!==e||this.localDisplayStatus!==7||!this.measurable)return;const n=!!this.effects.length;if((this.renderGroup||n)&&(r=Hr.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const o=this.bounds;r.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}const i=this.children;for(let o=0;o<i.length;o++)i[o]._getGlobalBoundsRecursive(s,r,e)}if(n){let i=!1;const o=this.renderGroup||this.parentRenderGroup;for(let l=0;l<this.effects.length;l++)this.effects[l].addBounds&&(i||(i=!0,r.applyMatrix(o.worldTransform)),this.effects[l].addBounds(r,!0));i&&(r.applyMatrix(o.worldTransform.copyTo(YT).invert()),t.addBounds(r,this.relativeGroupTransform)),t.addBounds(r),Hr.return(r)}else this.renderGroup&&(t.addBounds(r,this.relativeGroupTransform),Hr.return(r))}};function A0(s,t,e){e.clear();let r,n;return s.parent?t?r=s.parent.worldTransform:(n=ms.get().identity(),r=rf(s,n)):r=Xt.IDENTITY,b0(s,e,r,t),n&&ms.return(n),e.isValid||e.set(0,0,0,0),e}function b0(s,t,e,r){var l,a;if(!s.visible||!s.measurable)return;let n;r?n=s.worldTransform:(s.updateLocalTransform(),n=ms.get(),n.appendFrom(s.localTransform,e));const i=t,o=!!s.effects.length;if(o&&(t=Hr.get().clear()),s.boundsArea)t.addRect(s.boundsArea,n);else{s.bounds&&(t.matrix=n,t.addBounds(s.bounds));for(let h=0;h<s.children.length;h++)b0(s.children[h],t,n,r)}if(o){for(let h=0;h<s.effects.length;h++)(a=(l=s.effects[h]).addBounds)==null||a.call(l,t);i.addBounds(t,Xt.IDENTITY),Hr.return(t)}r||ms.return(n)}function rf(s,t){const e=s.parent;return e&&(rf(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}function v0(s,t){if(s===16777215||!t)return t;if(t===16777215||!s)return s;const e=s>>16&255,r=s>>8&255,n=s&255,i=t>>16&255,o=t>>8&255,l=t&255,a=e*i/255|0,h=r*o/255|0,c=n*l/255|0;return(a<<16)+(h<<8)+c}const Km=16777215;function Zm(s,t){return s===Km?t:t===Km?s:v0(s,t)}function rl(s){return((s&255)<<16)+(s&65280)+(s>>16&255)}const zT={getGlobalAlpha(s){if(s)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,e=this.parent;for(;e;)t*=e.alpha,e=e.parent;return t},getGlobalTransform(s,t){if(t)return s.copyFrom(this.worldTransform);this.updateLocalTransform();const e=rf(this,ms.get().identity());return s.appendFrom(this.localTransform,e),ms.return(e),s},getGlobalTint(s){if(s)return this.renderGroup?rl(this.renderGroup.worldColor):this.parentRenderGroup?rl(Zm(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,e=this.parent;for(;e;)t=Zm(t,e.localColor),e=e.parent;return rl(t)}};let $h=0;const Qm=500;function pe(...s){$h!==Qm&&($h++,$h===Qm?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...s))}function w0(s,t,e){return t.clear(),e||(e=Xt.IDENTITY),E0(s,t,e,s,!0),t.isValid||t.set(0,0,0,0),t}function E0(s,t,e,r,n){var a,h;let i;if(n)i=ms.get(),i=e.copyTo(i);else{if(!s.visible||!s.measurable)return;s.updateLocalTransform();const c=s.localTransform;i=ms.get(),i.appendFrom(c,e)}const o=t,l=!!s.effects.length;if(l&&(t=Hr.get().clear()),s.boundsArea)t.addRect(s.boundsArea,i);else{s.renderPipeId&&(t.matrix=i,t.addBounds(s.bounds));const c=s.children;for(let u=0;u<c.length;u++)E0(c[u],t,i,r,!1)}if(l){for(let c=0;c<s.effects.length;c++)(h=(a=s.effects[c]).addLocalBounds)==null||h.call(a,t,r);o.addBounds(t,Xt.IDENTITY),Hr.return(t)}ms.return(i)}function S0(s,t){const e=s.children;for(let r=0;r<e.length;r++){const n=e[r],i=n.uid,o=(n._didViewChangeTick&65535)<<16|n._didContainerChangeTick&65535,l=t.index;(t.data[l]!==i||t.data[l+1]!==o)&&(t.data[t.index]=i,t.data[t.index+1]=o,t.didChange=!0),t.index=l+2,n.children.length&&S0(n,t)}return t.didChange}const WT=new Xt,qT={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(s,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=s/t*e:this.scale.x=e},_setHeight(s,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=s/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new jr});const s=this._localBoundsCacheData;return s.index=1,s.didChange=!1,s.data[0]!==this._didViewChangeTick&&(s.didChange=!0,s.data[0]=this._didViewChangeTick),S0(this,s),s.didChange&&w0(this,s.localBounds,WT),s.localBounds},getBounds(s,t){return A0(this,s,t||new jr)}},KT={_onRender:null,set onRender(s){const t=this.renderGroup||this.parentRenderGroup;if(!s){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=s},get onRender(){return this._onRender}},ZT={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(s){this._zIndex!==s&&(this._zIndex=s,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(QT))}};function QT(s,t){return s._zIndex-t._zIndex}const JT={getGlobalPosition(s=new _s,t=!1){return this.parent?this.parent.toGlobal(this._position,s,t):(s.x=this._position.x,s.y=this._position.y),s},toGlobal(s,t,e=!1){const r=this.getGlobalTransform(ms.get(),e);return t=r.apply(s,t),ms.return(r),t},toLocal(s,t,e,r){t&&(s=t.toGlobal(s,e,r));const n=this.getGlobalTransform(ms.get(),r);return e=n.applyInverse(s,e),ms.return(n),e}};class T0{constructor(){this.uid=Me("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let tC=0;class eC{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,r){const n=new Fr({...this.textureOptions,width:t,height:e,resolution:1,antialias:r,autoGarbageCollect:!1});return new Gt({source:n,label:`texturePool_${tC++}`})}getOptimalTexture(t,e,r=1,n){let i=Math.ceil(t*r-1e-6),o=Math.ceil(e*r-1e-6);i=Sl(i),o=Sl(o);const l=(i<<17)+(o<<1)+(n?1:0);this._texturePool[l]||(this._texturePool[l]=[]);let a=this._texturePool[l].pop();return a||(a=this.createTexture(i,o,n)),a.source._resolution=r,a.source.width=i/r,a.source.height=o/r,a.source.pixelWidth=i,a.source.pixelHeight=o,a.frame.x=0,a.frame.y=0,a.frame.width=t,a.frame.height=e,a.updateUvs(),this._poolKeyHash[a.uid]=l,a}getSameSizeTexture(t,e=!1){const r=t.source;return this.getOptimalTexture(t.width,t.height,r._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=t!==!1,t)for(const e in this._texturePool){const r=this._texturePool[e];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0)}this._texturePool={}}}const sC=new eC;class rC{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Xt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new T0,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let r=0;r<e.length;r++){const n=e[r];n._updateFlags=15,this.addChild(n)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(sC.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let r=0;r<e.length;r++)this.addChild(e[r])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let r=0;r<e.length;r++)this.removeChild(e[r])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let r=0;r<e.length;r++)this._getChildren(e[r],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const r=t.children;for(let n=0;n<r.length;n++)this._getChildren(r[n],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Xt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Xt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Xt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function nC(s,t,e={}){for(const r in t)!e[r]&&t[r]!==void 0&&(s[r]=t[r])}const Xh=new lr(null),Hh=new lr(null),Yh=new lr(null,1,1),Jm=1,iC=2,jh=4;let _o=class C0 extends xr{constructor(t={}){var e,r;super(),this.uid=Me("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Xt,this.relativeGroupTransform=new Xt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new lr(this,0,0),this._scale=Yh,this._pivot=Hh,this._skew=Xh,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],nC(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(n=>this.addChild(n)),(r=t.parent)==null||r.addChild(this)}static mixin(t){oe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),Ze.mixin(C0,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||oe(Le,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let n=0;n<t.length;n++)this.addChild(t[n]);return t[0]}const e=t[0],r=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),r&&(r.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,r&&r.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let n=0;n<t.length;n++)this.removeChild(t[n]);return t[0]}const e=t[0],r=this.children.indexOf(e);return r>-1&&(this._didViewChangeTick++,this.children.splice(r,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,r),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=Xr.get(rC,this),this.groupTransform=Xt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),Xr.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Xt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*_T}set angle(t){this.rotation=t*AT}get pivot(){return this._pivot===Hh&&(this._pivot=new lr(this,0,0)),this._pivot}set pivot(t){this._pivot===Hh&&(this._pivot=new lr(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Xh&&(this._skew=new lr(this,0,0)),this._skew}set skew(t){this._skew===Xh&&(this._skew=new lr(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Yh&&(this._scale=new lr(this,1,1)),this._scale}set scale(t){this._scale===Yh&&(this._scale=new lr(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const r=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,r.width),e!==void 0&&this._setHeight(e,r.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,r=this._scale,n=this._pivot,i=this._position,o=r._x,l=r._y,a=n._x,h=n._y;e.a=this._cx*o,e.b=this._sx*o,e.c=this._cy*l,e.d=this._sy*l,e.tx=i._x-(a*e.a+h*e.c),e.ty=i._y-(a*e.b+h*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Jm,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const r=Pe.shared.setValue(t??16777215).toBgrNumber();r!==this.localColor&&(this.localColor=r,this._updateFlags|=Jm,this._onUpdate())}get tint(){return rl(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=iC,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=jh,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=jh,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=jh,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var n;if(this.destroyed)return;this.destroyed=!0;let e;if(this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t==null?void 0:t.children)&&e)for(let i=0;i<e.length;++i)e[i].destroy(t);(n=this.renderGroup)==null||n.destroy(),this.renderGroup=null}};Ze.mixin(_o,DT,jT,JT,KT,qT,XT,HT,ZT,OT,VT,zT,GT);class aC extends _o{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new jr(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:r,y:n}=t;return r>=e.minX&&r<=e.maxX&&n>=e.minY&&n<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,r){const{renderPipes:n,renderableGC:i}=e;n.blendMode.setBlendMode(this,this.groupBlendMode,t),n[this.renderPipeId].addRenderable(this,t),i.addRenderable(this),this.didViewUpdate=!1;const l=this.children,a=l.length;for(let h=0;h<a;h++)l[h].collectRenderables(t,e,r)}}let tp=class Yu extends aC{constructor(t=Gt.EMPTY){t instanceof Gt&&(t={texture:t});const{texture:e=Gt.EMPTY,anchor:r,roundPixels:n,width:i,height:o,...l}=t;super({label:"Sprite",...l}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new lr({_onUpdate:()=>{this.onViewUpdate()}}),r?this.anchor=r:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=n??!1,i!==void 0&&(this.width=i),o!==void 0&&(this.height=o)}static from(t,e=!1){return t instanceof Gt?new Yu(t):new Yu(Gt.from(t,e))}set texture(t){t||(t=Gt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return RT(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return oe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,r=this._bounds,{width:n,height:i}=e.orig;r.minX=-t._x*n,r.maxX=r.minX+n,r.minY=-t._y*i,r.maxY=r.minY+i}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(r)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}};const oC=new jr;function R0(s,t,e){const r=oC;s.measurable=!0,A0(s,e,r),t.addBoundsMask(r),s.measurable=!1}function I0(s,t,e){const r=Hr.get();s.measurable=!0;const n=ms.get().identity(),i=M0(s,e,n);w0(s,r,i),s.measurable=!1,t.addBoundsMask(r),ms.return(n),Hr.return(r)}function M0(s,t,e){return s?(s!==t&&(M0(s.parent,t,e),s.updateLocalTransform(),e.append(s.localTransform)),e):(pe("Mask bounds, renderable is not inside the root container"),e)}class P0{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof tp),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||R0(this.mask,t,e)}addLocalBounds(t,e){I0(this.mask,t,e)}containsPoint(t,e){const r=this.mask;return e(r,t)}destroy(){this.reset()}static test(t){return t instanceof tp}}P0.extension=bt.MaskEffect;class F0{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}F0.extension=bt.MaskEffect;class B0{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){R0(this.mask,t,e)}addLocalBounds(t,e){I0(this.mask,t,e)}containsPoint(t,e){const r=this.mask;return e(r,t)}destroy(){this.reset()}static test(t){return t instanceof _o}}B0.extension=bt.MaskEffect;const lC={createCanvas:(s,t)=>{const e=document.createElement("canvas");return e.width=s,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")};let ep=lC;const Ae={get(){return ep},set(s){ep=s}};class k0 extends Fr{constructor(t){t.resource||(t.resource=Ae.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,r=this._resolution){const n=super.resize(t,e,r);return n&&this.resizeCanvas(),n}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}k0.extension=bt.TextureSource;class ii extends Fr{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=Ae.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,pe("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}ii.extension=bt.TextureSource;var ju=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(ju||{});let zh=class{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=r,this._once=n}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}};const N0=class Es{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new zh(null,null,1/0),this.deltaMS=1/Es.targetFPMS,this.elapsedMS=1/Es.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=ju.NORMAL){return this._addListener(new zh(t,e,r))}addOnce(t,e,r=ju.NORMAL){return this._addListener(new zh(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Es.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Es.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Es._shared){const t=Es._shared=new Es;t.autoStart=!0,t._protected=!0}return Es._shared}static get system(){if(!Es._system){const t=Es._system=new Es;t.autoStart=!0,t._protected=!0}return Es._system}};N0.targetFPMS=.06;let Po=N0,Wh;async function O0(){return Wh??(Wh=(async()=>{var o;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(l=>{const a=document.createElement("video");a.onloadeddata=()=>l(a),a.onerror=()=>l(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return"premultiply-alpha-on-upload";const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(n),t.deleteTexture(r),(o=t.getExtension("WEBGL_lose_context"))==null||o.loseContext(),i[0]<=i[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Wh}const sh=class L0 extends Fr{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...L0.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=Po.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await O0(),this._load=new Promise((r,n)=>{this.isValid?r(this):(this._resolve=r,this._reject=n,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Po.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Po.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Po.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};sh.extension=bt.TextureSource;sh.defaultOptions={...Fr.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};sh.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let nl=sh;const hr=(s,t,e=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(r=>typeof r=="string"||e?t(r):r):s);let hC=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||pe(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=hr(t);let n;for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];if(h.test(e)){n=h.getCacheableAssets(r,e);break}}const i=new Map(Object.entries(n||{}));n||r.forEach(a=>{i.set(a,e)});const o=[...i.keys()],l={cacheKeys:o,keys:r};r.forEach(a=>{this._cacheMap.set(a,l)}),o.forEach(a=>{const h=n?n[a]:e;this._cache.has(a)&&this._cache.get(a)!==h&&pe("[Cache] already has key:",a),this._cache.set(a,i.get(a))})}remove(t){if(!this._cacheMap.has(t)){pe(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(n=>{this._cache.delete(n)}),e.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}};const xe=new hC,zu=[];Ze.handleByList(bt.TextureSource,zu);function V0(s={}){const t=s&&s.resource,e=t?s.resource:s,r=t?s:{resource:s};for(let n=0;n<zu.length;n++){const i=zu[n];if(i.test(e))return new i(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}function cC(s={},t=!1){const e=s&&s.resource,r=e?s.resource:s,n=e?s:{resource:s};if(!t&&xe.has(r))return xe.get(r);const i=new Gt({source:V0(n)});return i.on("destroy",()=>{xe.has(r)&&xe.remove(r)}),t||xe.set(r,i),i}function uC(s,t=!1){return typeof s=="string"?xe.get(s):s instanceof Fr?new Gt({source:s}):cC(s,t)}Gt.from=uC;Fr.from=V0;Ze.add(P0,F0,B0,nl,ii,k0,ef);var In=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(In||{});function Ks(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function pa(s){return s.split("?")[0].split("#")[0]}function dC(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fC(s,t,e){return s.replace(new RegExp(dC(t),"g"),e)}function mC(s,t){let e="",r=0,n=-1,i=0,o=-1;for(let l=0;l<=s.length;++l){if(l<s.length)o=s.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(n===l-1||i===1))if(n!==l-1&&i===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",r=0):(e=e.slice(0,a),r=e.length-1-e.lastIndexOf("/")),n=l,i=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=l,i=0;continue}}}else e.length>0?e+=`/${s.slice(n+1,l)}`:e=s.slice(n+1,l),r=l-n-1;n=l,i=0}else o===46&&i!==-1?++i:i=-1}return e}const Is={toPosix(s){return fC(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){Ks(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(s);return e?e[0]:""},toAbsolute(s,t,e){if(Ks(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const r=pa(this.toPosix(t??Ae.get().getBaseUrl())),n=pa(this.toPosix(e??this.rootname(r)));return s=this.toPosix(s),s.startsWith("/")?Is.join(n,s.slice(1)):this.isAbsolute(s)?s:this.join(r,s)},normalize(s){if(Ks(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const e=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const r=s.endsWith("/");return s=mC(s),s.length>0&&r&&(s+="/"),e?`/${s}`:t+s},isAbsolute(s){return Ks(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let e=0;e<s.length;++e){const r=s[e];if(Ks(r),r.length>0)if(t===void 0)t=r;else{const n=s[e-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(Ks(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const e=t===47;let r=-1,n=!0;const i=this.getProtocol(s),o=s;s=s.slice(i.length);for(let l=s.length-1;l>=1;--l)if(t=s.charCodeAt(l),t===47){if(!n){r=l;break}}else n=!1;return r===-1?e?"/":this.isUrl(o)?i+s:i:e&&r===1?"//":i+s.slice(0,r)},rootname(s){Ks(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const e=s.indexOf("/",t.length);e!==-1?t=s.slice(0,e):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){Ks(s),t&&Ks(t),s=pa(this.toPosix(s));let e=0,r=-1,n=!0,i;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let o=t.length-1,l=-1;for(i=s.length-1;i>=0;--i){const a=s.charCodeAt(i);if(a===47){if(!n){e=i+1;break}}else l===-1&&(n=!1,l=i+1),o>=0&&(a===t.charCodeAt(o)?--o===-1&&(r=i):(o=-1,r=l))}return e===r?r=l:r===-1&&(r=s.length),s.slice(e,r)}for(i=s.length-1;i>=0;--i)if(s.charCodeAt(i)===47){if(!n){e=i+1;break}}else r===-1&&(n=!1,r=i+1);return r===-1?"":s.slice(e,r)},extname(s){Ks(s),s=pa(this.toPosix(s));let t=-1,e=0,r=-1,n=!0,i=0;for(let o=s.length-1;o>=0;--o){const l=s.charCodeAt(o);if(l===47){if(!n){e=o+1;break}continue}r===-1&&(n=!1,r=o+1),l===46?t===-1?t=o:i!==1&&(i=1):t!==-1&&(i=-1)}return t===-1||r===-1||i===0||i===1&&t===r-1&&t===e+1?"":s.slice(t,r)},parse(s){Ks(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=pa(this.toPosix(s));let e=s.charCodeAt(0);const r=this.isAbsolute(s);let n;t.root=this.rootname(s),r||this.hasProtocol(s)?n=1:n=0;let i=-1,o=0,l=-1,a=!0,h=s.length-1,c=0;for(;h>=n;--h){if(e=s.charCodeAt(h),e===47){if(!a){o=h+1;break}continue}l===-1&&(a=!1,l=h+1),e===46?i===-1?i=h:c!==1&&(c=1):i!==-1&&(c=-1)}return i===-1||l===-1||c===0||c===1&&i===l-1&&i===o+1?l!==-1&&(o===0&&r?t.base=t.name=s.slice(1,l):t.base=t.name=s.slice(o,l)):(o===0&&r?(t.name=s.slice(1,i),t.base=s.slice(1,l)):(t.name=s.slice(o,i),t.base=s.slice(o,l)),t.ext=s.slice(i,l)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function U0(s,t,e,r,n){const i=t[e];for(let o=0;o<i.length;o++){const l=i[o];e<t.length-1?U0(s.replace(r[e],l),t,e+1,r,n):n.push(s.replace(r[e],l))}}function pC(s){const t=/\{(.*?)\}/g,e=s.match(t),r=[];if(e){const n=[];e.forEach(i=>{const o=i.substring(1,i.length-1).split(",");n.push(o)}),U0(s,n,0,e,r)}else r.push(s);return r}const Tl=s=>!Array.isArray(s);let aa=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`).join("&")}}getAlias(t){const{alias:e,src:r}=t;return hr(e||r,i=>typeof i=="string"?i:Array.isArray(i)?i.map(o=>(o==null?void 0:o.src)??o):i!=null&&i.src?i.src:i,!0)}addManifest(t){this._manifest&&pe("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const r=[];let n=e;Array.isArray(e)||(n=Object.entries(e).map(([i,o])=>typeof o=="string"||Array.isArray(o)?{alias:i,src:o}:{alias:i,...o})),n.forEach(i=>{const o=i.src,l=i.alias;let a;if(typeof l=="string"){const h=this._createBundleAssetId(t,l);r.push(h),a=[l,h]}else{const h=l.map(c=>this._createBundleAssetId(t,c));r.push(...h),a=[...l,...h]}this.add({...i,alias:a,src:o})}),this._bundles[t]=r}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let r;r=i=>{this.hasKey(i)&&pe(`[Resolver] already has key: ${i} overwriting`)},hr(e).forEach(i=>{const{src:o}=i;let{data:l,format:a,loadParser:h}=i;const c=hr(o).map(f=>typeof f=="string"?pC(f):Array.isArray(f)?f:[f]),u=this.getAlias(i);Array.isArray(u)?u.forEach(r):r(u);const d=[];c.forEach(f=>{f.forEach(m=>{let g={};if(typeof m!="object"){g.src=m;for(let p=0;p<this._parsers.length;p++){const y=this._parsers[p];if(y.test(m)){g=y.parse(m);break}}}else l=m.data??l,a=m.format??a,h=m.loadParser??h,g={...g,...m};if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this._buildResolvedAsset(g,{aliases:u,data:l,format:a,loadParser:h}),d.push(g)})}),u.forEach(f=>{this._assetMap[f]=d})})}resolveBundle(t){const e=Tl(t);t=hr(t);const r={};return t.forEach(n=>{const i=this._bundles[n];if(i){const o=this.resolve(i),l={};for(const a in o){const h=o[a];l[this._extractAssetIdFromBundle(n,a)]=h}r[n]=l}}),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const r={};for(const n in e)r[n]=e[n].src;return r}return e.src}resolve(t){const e=Tl(t);t=hr(t);const r={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let i=this._assetMap[n];const o=this._getPreferredOrder(i);o==null||o.priority.forEach(l=>{o.params[l].forEach(a=>{const h=i.filter(c=>c[l]?c[l]===a:!1);h.length&&(i=h)})}),this._resolverHash[n]=i[0]}else this._resolverHash[n]=this._buildResolvedAsset({alias:[n],src:n},{});r[n]=this._resolverHash[n]}),e?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const r=t[e],n=this._preferredOrder.find(i=>i.params.format.includes(r.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:r,data:n,loadParser:i,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=Is.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=r??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=i??t.loadParser,t.format=o??t.format??gC(t.src),t}};aa.RETINA_PREFIX=/@([0-9\.]+)x/;function gC(s){return s.split(".").pop().split("?").shift().split("#").shift()}const Wu=(s,t)=>{const e=t.split("?")[1];return e&&(s+=`?${e}`),s},D0=class Ta{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof Gt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const r=parseFloat(e.meta.scale);r?(this.resolution=r,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Ta.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=Ta.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const n=this._frameKeys[e],i=this._frames[n],o=i.frame;if(o){let l=null,a=null;const h=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,c=new ss(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);i.rotated?l=new ss(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):l=new ss(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new ss(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new Gt({source:this.textureSource,frame:l,orig:c,trim:a,rotate:i.rotated?2:0,defaultAnchor:i.anchor,defaultBorders:i.borders,label:n.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ta.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ta.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};D0.BATCH_SIZE=1e3;let sp=D0;const yC=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function G0(s,t,e){const r={};if(s.forEach(n=>{r[n]=t}),Object.keys(t.textures).forEach(n=>{r[n]=t.textures[n]}),!e){const n=Is.dirname(s[0]);t.linkedSheets.forEach((i,o)=>{const l=G0([`${n}/${t.data.meta.related_multi_packs[o]}`],i,!0);Object.assign(r,l)})}return r}const xC={extension:bt.Asset,cache:{test:s=>s instanceof sp,getCacheableAssets:(s,t)=>G0(s,t,!1)},resolver:{extension:{type:bt.ResolveParser,name:"resolveSpritesheet"},test:s=>{const e=s.split("?")[0].split("."),r=e.pop(),n=e.pop();return r==="json"&&yC.includes(n)},parse:s=>{var e;const t=s.split(".");return{resolution:parseFloat(((e=aa.RETINA_PREFIX.exec(s))==null?void 0:e[1])??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:bt.LoadParser,priority:In.Normal,name:"spritesheetLoader"},async testParse(s,t){return Is.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,e){var c,u;const{texture:r,imageFilename:n,textureOptions:i}=(t==null?void 0:t.data)??{};let o=Is.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(r instanceof Gt)l=r;else{const d=Wu(o+(n??s.meta.image),t.src);l=(await e.load([{src:d,data:i}]))[d]}const a=new sp(l.source,s);await a.parse();const h=(c=s==null?void 0:s.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(h)){const d=[];for(const m of h){if(typeof m!="string")continue;let g=o+m;(u=t.data)!=null&&u.ignoreMultiPack||(g=Wu(g,t.src),d.push(e.load({src:g,data:{textureOptions:i,ignoreMultiPack:!0}})))}const f=await Promise.all(d);a.linkedSheets=f,f.forEach(m=>{m.linkedSheets=[a].concat(a.linkedSheets.filter(g=>g!==m))})}return a},async unload(s,t,e){await e.unload(s.textureSource._sourceOrigin),s.destroy(!1)}}};Ze.add(xC);var qh=/iPhone/i,rp=/iPod/i,np=/iPad/i,ip=/\biOS-universal(?:.+)Mac\b/i,Kh=/\bAndroid(?:.+)Mobile\b/i,ap=/Android/i,xi=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Fo=/Silk/i,Vr=/Windows Phone/i,op=/\bWindows(?:.+)ARM\b/i,lp=/BlackBerry/i,hp=/BB10/i,cp=/Opera Mini/i,up=/\b(CriOS|Chrome)(?:.+)Mobile/i,dp=/Mobile(?:.+)Firefox\b/i,fp=function(s){return typeof s<"u"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream>"u"};function _C(s){return function(t){return t.test(s)}}function mp(s){var t={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?t.userAgent=s:s&&s.userAgent&&(t={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var e=t.userAgent,r=e.split("[FBAN");typeof r[1]<"u"&&(e=r[0]),r=e.split("Twitter"),typeof r[1]<"u"&&(e=r[0]);var n=_C(e),i={apple:{phone:n(qh)&&!n(Vr),ipod:n(rp),tablet:!n(qh)&&(n(np)||fp(t))&&!n(Vr),universal:n(ip),device:(n(qh)||n(rp)||n(np)||n(ip)||fp(t))&&!n(Vr)},amazon:{phone:n(xi),tablet:!n(xi)&&n(Fo),device:n(xi)||n(Fo)},android:{phone:!n(Vr)&&n(xi)||!n(Vr)&&n(Kh),tablet:!n(Vr)&&!n(xi)&&!n(Kh)&&(n(Fo)||n(ap)),device:!n(Vr)&&(n(xi)||n(Fo)||n(Kh)||n(ap))||n(/\bokhttp\b/i)},windows:{phone:n(Vr),tablet:n(op),device:n(Vr)||n(op)},other:{blackberry:n(lp),blackberry10:n(hp),opera:n(cp),firefox:n(dp),chrome:n(up),device:n(lp)||n(hp)||n(cp)||n(dp)||n(up)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}const Zh=Object.create(null),pp=Object.create(null);function nf(s,t){let e=pp[s];return e===void 0&&(Zh[t]===void 0&&(Zh[t]=1),pp[s]=e=Zh[t]++),e}let _i;function $0(){return(!_i||_i!=null&&_i.isContextLost())&&(_i=Ae.get().createCanvas().getContext("webgl",{})),_i}let Bo;function AC(){if(!Bo){Bo="mediump";const s=$0();s&&s.getShaderPrecisionFormat&&(Bo=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision?"highp":"mediump")}return Bo}function bC(s,t,e){return t?s:e?(s=s.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${s}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${s}
        `}function vC(s,t,e){const r=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(s.substring(0,9)!=="precision"){let n=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return n==="highp"&&r!=="highp"&&(n="mediump"),`precision ${n} float;
${s}`}else if(r!=="highp"&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}function wC(s,t){return t?`#version 300 es
${s}`:s}const EC={},SC={};function TC(s,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const r=e?EC:SC;return r[t]?(r[t]++,t+=`-${r[t]}`):r[t]=1,s.indexOf("#define SHADER_NAME")!==-1?s:`${`#define SHADER_NAME ${t}`}
${s}`}function CC(s,t){return t?s.replace("#version 300 es",""):s}const Qh={stripVersion:CC,ensurePrecision:vC,addProgramDefines:bC,setProgramName:TC,insertVersion:wC},Jh=Object.create(null),X0=class qu{constructor(t){t={...qu.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,r={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:AC()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let n=t.fragment,i=t.vertex;Object.keys(Qh).forEach(o=>{const l=r[o];n=Qh[o](n,l,!0),i=Qh[o](i,l,!1)}),this.fragment=n,this.vertex=i,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=nf(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return Jh[e]||(Jh[e]=new qu(t)),Jh[e]}};X0.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let H0=X0;const gp={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function RC(s){return gp[s]??gp.float32}const IC={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function MC({source:s,entryPoint:t}){const e={},r=s.indexOf(`fn ${t}`);if(r!==-1){const n=s.indexOf("->",r);if(n!==-1){const i=s.substring(r,n),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let l;for(;(l=o.exec(i))!==null;){const a=IC[l[3]]??"float32";e[l[2]]={location:parseInt(l[1],10),format:a,stride:RC(a).stride,offset:0,instance:!1,start:0}}}}return e}function tc(s){var u,d;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,r=/@binding\((\d+)\)/,n=/var(<[^>]+>)? (\w+)/,i=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,l=/(\w+)\s*:\s*([\w\<\>]+)/g,a=/struct\s+(\w+)/,h=(u=s.match(t))==null?void 0:u.map(f=>({group:parseInt(f.match(e)[1],10),binding:parseInt(f.match(r)[1],10),name:f.match(n)[2],isUniform:f.match(n)[1]==="<uniform>",type:f.match(i)[1]}));if(!h)return{groups:[],structs:[]};const c=((d=s.match(o))==null?void 0:d.map(f=>{const m=f.match(a)[1],g=f.match(l).reduce((p,y)=>{const[x,_]=y.split(":");return p[x.trim()]=_.trim(),p},{});return g?{name:m,members:g}:null}).filter(({name:f})=>h.some(m=>m.type===f)))??[];return{groups:h,structs:c}}var Ca=(s=>(s[s.VERTEX=1]="VERTEX",s[s.FRAGMENT=2]="FRAGMENT",s[s.COMPUTE=4]="COMPUTE",s))(Ca||{});function PC({groups:s}){const t=[];for(let e=0;e<s.length;e++){const r=s[e];t[r.group]||(t[r.group]=[]),r.isUniform?t[r.group].push({binding:r.binding,visibility:Ca.VERTEX|Ca.FRAGMENT,buffer:{type:"uniform"}}):r.type==="sampler"?t[r.group].push({binding:r.binding,visibility:Ca.FRAGMENT,sampler:{type:"filtering"}}):r.type==="texture_2d"&&t[r.group].push({binding:r.binding,visibility:Ca.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function FC({groups:s}){const t=[];for(let e=0;e<s.length;e++){const r=s[e];t[r.group]||(t[r.group]={}),t[r.group][r.name]=r.binding}return t}function BC(s,t){const e=new Set,r=new Set,n=[...s.structs,...t.structs].filter(o=>e.has(o.name)?!1:(e.add(o.name),!0)),i=[...s.groups,...t.groups].filter(o=>{const l=`${o.name}-${o.binding}`;return r.has(l)?!1:(r.add(l),!0)});return{structs:n,groups:i}}const ec=Object.create(null);class rh{constructor(t){var l,a;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:r,layout:n,gpuLayout:i,name:o}=t;if(this.name=o,this.fragment=e,this.vertex=r,e.source===r.source){const h=tc(e.source);this.structsAndGroups=h}else{const h=tc(r.source),c=tc(e.source);this.structsAndGroups=BC(h,c)}this.layout=n??FC(this.structsAndGroups),this.gpuLayout=i??PC(this.structsAndGroups),this.autoAssignGlobalUniforms=((l=this.layout[0])==null?void 0:l.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((a=this.layout[1])==null?void 0:a.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,r=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=nf(r,"program")}get attributeData(){return this._attributeData??(this._attributeData=MC(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return ec[e]||(ec[e]=new rh(t)),ec[e]}}const Y0=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],kC=Y0.reduce((s,t)=>(s[t]=!0,s),{});function NC(s,t){switch(s){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const j0=class z0{constructor(t,e){this._touched=0,this.uid=Me("uniform"),this._resourceType="uniformGroup",this._resourceId=Me("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...z0.defaultOptions,...e},this.uniformStructures=t;const r={};for(const n in t){const i=t[n];if(i.name=n,i.size=i.size??1,!kC[i.type])throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${Y0.join(", ")}`);i.value??(i.value=NC(i.type,i.size)),r[n]=i.value}this.uniforms=r,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=nf(Object.keys(r).map(n=>`${n}-${t[n].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};j0.defaultOptions={ubo:!1,isStatic:!1};let W0=j0;class il{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const r in t){const n=t[r];this.setResource(n,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const r in this.resources)t[e++]=this.resources[r]._resourceId;this._key=t.join("|")}setResource(t,e){var n,i;const r=this.resources[e];t!==r&&(r&&((n=t.off)==null||n.call(t,"change",this.onResourceChange,this)),(i=t.on)==null||i.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const r in e)e[r]._touched=t}destroy(){var e;const t=this.resources;for(const r in t){const n=t[r];(e=n.off)==null||e.call(n,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const r in e)e[r]===t&&(e[r]=null)}else this._updateKey()}}var Ku=(s=>(s[s.WEBGL=1]="WEBGL",s[s.WEBGPU=2]="WEBGPU",s[s.BOTH=3]="BOTH",s))(Ku||{});let OC=class q0 extends xr{constructor(t){super(),this.uid=Me("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:r,groups:n,resources:i,compatibleRenderers:o,groupMap:l}=t;this.gpuProgram=e,this.glProgram=r,o===void 0&&(o=0,e&&(o|=Ku.WEBGPU),r&&(o|=Ku.WEBGL)),this.compatibleRenderers=o;const a={};if(!i&&!n&&(i={}),i&&n)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&n&&!l)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&n&&l)for(const h in l)for(const c in l[h]){const u=l[h][c];a[u]={group:h,binding:c,name:u}}else if(e&&n&&!l){const h=e.structsAndGroups.groups;l={},h.forEach(c=>{l[c.group]=l[c.group]||{},l[c.group][c.binding]=c.name,a[c.name]=c})}else if(i){n={},l={},e&&e.structsAndGroups.groups.forEach(u=>{l[u.group]=l[u.group]||{},l[u.group][u.binding]=u.name,a[u.name]=u});let h=0;for(const c in i)a[c]||(n[99]||(n[99]=new il,this._ownedBindGroups.push(n[99])),a[c]={group:99,binding:h,name:c},l[99]=l[99]||{},l[99][h]=c,h++);for(const c in i){const u=c;let d=i[c];!d.source&&!d._resourceType&&(d=new W0(d));const f=a[u];f&&(n[f.group]||(n[f.group]=new il,this._ownedBindGroups.push(n[f.group])),n[f.group].setResource(d,f.binding))}}this.groups=n,this._uniformBindMap=l,this.resources=this._buildResourceAccessor(n,a)}addResource(t,e,r){var n,i;(n=this._uniformBindMap)[e]||(n[e]={}),(i=this._uniformBindMap[e])[r]||(i[r]=t),this.groups[e]||(this.groups[e]=new il,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const r={};for(const n in e){const i=e[n];Object.defineProperty(r,i.name,{get(){return t[i.group].getResource(i.binding)},set(o){t[i.group].setResource(o,i.binding)}})}return r}destroy(t=!1){var e,r;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(r=this.glProgram)==null||r.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:r,...n}=t;let i,o;return e&&(i=rh.from(e)),r&&(o=H0.from(r)),new q0({gpuProgram:i,glProgram:o,...n})}};const Zu=[];Ze.handleByNamedList(bt.Environment,Zu);async function LC(s){if(!s)for(let t=0;t<Zu.length;t++){const e=Zu[t];if(e.value.test()){await e.value.load();return}}}let ga;function VC(){if(typeof ga=="boolean")return ga;try{ga=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ga=!1}return ga}var ko={exports:{}},yp;function UC(){if(yp)return ko.exports;yp=1,ko.exports=s,ko.exports.default=s;function s(E,T,C){C=C||2;var O=T&&T.length,N=O?T[0]*C:E.length,V=t(E,0,N,C,!0),G=[];if(!V||V.next===V.prev)return G;var X,tt,st,at,U,Q,q;if(O&&(V=a(E,T,V,C)),E.length>80*C){X=st=E[0],tt=at=E[1];for(var z=C;z<N;z+=C)U=E[z],Q=E[z+1],U<X&&(X=U),Q<tt&&(tt=Q),U>st&&(st=U),Q>at&&(at=Q);q=Math.max(st-X,at-tt),q=q!==0?32767/q:0}return r(V,G,C,X,tt,q,0),G}function t(E,T,C,O,N){var V,G;if(N===pt(E,T,C,O)>0)for(V=T;V<C;V+=O)G=L(V,E[V],E[V+1],G);else for(V=C-O;V>=T;V-=O)G=L(V,E[V],E[V+1],G);return G&&A(G,G.next)&&(Y(G),G=G.next),G}function e(E,T){if(!E)return E;T||(T=E);var C=E,O;do if(O=!1,!C.steiner&&(A(C,C.next)||_(C.prev,C,C.next)===0)){if(Y(C),C=T=C.prev,C===C.next)break;O=!0}else C=C.next;while(O||C!==T);return T}function r(E,T,C,O,N,V,G){if(E){!G&&V&&f(E,O,N,V);for(var X=E,tt,st;E.prev!==E.next;){if(tt=E.prev,st=E.next,V?i(E,O,N,V):n(E)){T.push(tt.i/C|0),T.push(E.i/C|0),T.push(st.i/C|0),Y(E),E=st.next,X=st.next;continue}if(E=st,E===X){G?G===1?(E=o(e(E),T,C),r(E,T,C,O,N,V,2)):G===2&&l(E,T,C,O,N,V):r(e(E),T,C,O,N,V,1);break}}}}function n(E){var T=E.prev,C=E,O=E.next;if(_(T,C,O)>=0)return!1;for(var N=T.x,V=C.x,G=O.x,X=T.y,tt=C.y,st=O.y,at=N<V?N<G?N:G:V<G?V:G,U=X<tt?X<st?X:st:tt<st?tt:st,Q=N>V?N>G?N:G:V>G?V:G,q=X>tt?X>st?X:st:tt>st?tt:st,z=O.next;z!==T;){if(z.x>=at&&z.x<=Q&&z.y>=U&&z.y<=q&&y(N,X,V,tt,G,st,z.x,z.y)&&_(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function i(E,T,C,O){var N=E.prev,V=E,G=E.next;if(_(N,V,G)>=0)return!1;for(var X=N.x,tt=V.x,st=G.x,at=N.y,U=V.y,Q=G.y,q=X<tt?X<st?X:st:tt<st?tt:st,z=at<U?at<Q?at:Q:U<Q?U:Q,nt=X>tt?X>st?X:st:tt>st?tt:st,S=at>U?at>Q?at:Q:U>Q?U:Q,I=g(q,z,T,C,O),k=g(nt,S,T,C,O),D=E.prevZ,$=E.nextZ;D&&D.z>=I&&$&&$.z<=k;){if(D.x>=q&&D.x<=nt&&D.y>=z&&D.y<=S&&D!==N&&D!==G&&y(X,at,tt,U,st,Q,D.x,D.y)&&_(D.prev,D,D.next)>=0||(D=D.prevZ,$.x>=q&&$.x<=nt&&$.y>=z&&$.y<=S&&$!==N&&$!==G&&y(X,at,tt,U,st,Q,$.x,$.y)&&_($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;D&&D.z>=I;){if(D.x>=q&&D.x<=nt&&D.y>=z&&D.y<=S&&D!==N&&D!==G&&y(X,at,tt,U,st,Q,D.x,D.y)&&_(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;$&&$.z<=k;){if($.x>=q&&$.x<=nt&&$.y>=z&&$.y<=S&&$!==N&&$!==G&&y(X,at,tt,U,st,Q,$.x,$.y)&&_($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function o(E,T,C){var O=E;do{var N=O.prev,V=O.next.next;!A(N,V)&&b(N,O,O.next,V)&&P(N,V)&&P(V,N)&&(T.push(N.i/C|0),T.push(O.i/C|0),T.push(V.i/C|0),Y(O),Y(O.next),O=E=V),O=O.next}while(O!==E);return e(O)}function l(E,T,C,O,N,V){var G=E;do{for(var X=G.next.next;X!==G.prev;){if(G.i!==X.i&&x(G,X)){var tt=B(G,X);G=e(G,G.next),tt=e(tt,tt.next),r(G,T,C,O,N,V,0),r(tt,T,C,O,N,V,0);return}X=X.next}G=G.next}while(G!==E)}function a(E,T,C,O){var N=[],V,G,X,tt,st;for(V=0,G=T.length;V<G;V++)X=T[V]*O,tt=V<G-1?T[V+1]*O:E.length,st=t(E,X,tt,O,!1),st===st.next&&(st.steiner=!0),N.push(p(st));for(N.sort(h),V=0;V<N.length;V++)C=c(N[V],C);return C}function h(E,T){return E.x-T.x}function c(E,T){var C=u(E,T);if(!C)return T;var O=B(C,E);return e(O,O.next),e(C,C.next)}function u(E,T){var C=T,O=E.x,N=E.y,V=-1/0,G;do{if(N<=C.y&&N>=C.next.y&&C.next.y!==C.y){var X=C.x+(N-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(X<=O&&X>V&&(V=X,G=C.x<C.next.x?C:C.next,X===O))return G}C=C.next}while(C!==T);if(!G)return null;var tt=G,st=G.x,at=G.y,U=1/0,Q;C=G;do O>=C.x&&C.x>=st&&O!==C.x&&y(N<at?O:V,N,st,at,N<at?V:O,N,C.x,C.y)&&(Q=Math.abs(N-C.y)/(O-C.x),P(C,E)&&(Q<U||Q===U&&(C.x>G.x||C.x===G.x&&d(G,C)))&&(G=C,U=Q)),C=C.next;while(C!==tt);return G}function d(E,T){return _(E.prev,E,T.prev)<0&&_(T.next,E,E.next)<0}function f(E,T,C,O){var N=E;do N.z===0&&(N.z=g(N.x,N.y,T,C,O)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==E);N.prevZ.nextZ=null,N.prevZ=null,m(N)}function m(E){var T,C,O,N,V,G,X,tt,st=1;do{for(C=E,E=null,V=null,G=0;C;){for(G++,O=C,X=0,T=0;T<st&&(X++,O=O.nextZ,!!O);T++);for(tt=st;X>0||tt>0&&O;)X!==0&&(tt===0||!O||C.z<=O.z)?(N=C,C=C.nextZ,X--):(N=O,O=O.nextZ,tt--),V?V.nextZ=N:E=N,N.prevZ=V,V=N;C=O}V.nextZ=null,st*=2}while(G>1);return E}function g(E,T,C,O,N){return E=(E-C)*N|0,T=(T-O)*N|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,E|T<<1}function p(E){var T=E,C=E;do(T.x<C.x||T.x===C.x&&T.y<C.y)&&(C=T),T=T.next;while(T!==E);return C}function y(E,T,C,O,N,V,G,X){return(N-G)*(T-X)>=(E-G)*(V-X)&&(E-G)*(O-X)>=(C-G)*(T-X)&&(C-G)*(V-X)>=(N-G)*(O-X)}function x(E,T){return E.next.i!==T.i&&E.prev.i!==T.i&&!R(E,T)&&(P(E,T)&&P(T,E)&&F(E,T)&&(_(E.prev,E,T.prev)||_(E,T.prev,T))||A(E,T)&&_(E.prev,E,E.next)>0&&_(T.prev,T,T.next)>0)}function _(E,T,C){return(T.y-E.y)*(C.x-T.x)-(T.x-E.x)*(C.y-T.y)}function A(E,T){return E.x===T.x&&E.y===T.y}function b(E,T,C,O){var N=v(_(E,T,C)),V=v(_(E,T,O)),G=v(_(C,O,E)),X=v(_(C,O,T));return!!(N!==V&&G!==X||N===0&&w(E,C,T)||V===0&&w(E,O,T)||G===0&&w(C,E,O)||X===0&&w(C,T,O))}function w(E,T,C){return T.x<=Math.max(E.x,C.x)&&T.x>=Math.min(E.x,C.x)&&T.y<=Math.max(E.y,C.y)&&T.y>=Math.min(E.y,C.y)}function v(E){return E>0?1:E<0?-1:0}function R(E,T){var C=E;do{if(C.i!==E.i&&C.next.i!==E.i&&C.i!==T.i&&C.next.i!==T.i&&b(C,C.next,E,T))return!0;C=C.next}while(C!==E);return!1}function P(E,T){return _(E.prev,E,E.next)<0?_(E,T,E.next)>=0&&_(E,E.prev,T)>=0:_(E,T,E.prev)<0||_(E,E.next,T)<0}function F(E,T){var C=E,O=!1,N=(E.x+T.x)/2,V=(E.y+T.y)/2;do C.y>V!=C.next.y>V&&C.next.y!==C.y&&N<(C.next.x-C.x)*(V-C.y)/(C.next.y-C.y)+C.x&&(O=!O),C=C.next;while(C!==E);return O}function B(E,T){var C=new Z(E.i,E.x,E.y),O=new Z(T.i,T.x,T.y),N=E.next,V=T.prev;return E.next=T,T.prev=E,C.next=N,N.prev=C,O.next=C,C.prev=O,V.next=O,O.prev=V,O}function L(E,T,C,O){var N=new Z(E,T,C);return O?(N.next=O.next,N.prev=O,O.next.prev=N,O.next=N):(N.prev=N,N.next=N),N}function Y(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function Z(E,T,C){this.i=E,this.x=T,this.y=C,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(E,T,C,O){var N=T&&T.length,V=N?T[0]*C:E.length,G=Math.abs(pt(E,0,V,C));if(N)for(var X=0,tt=T.length;X<tt;X++){var st=T[X]*C,at=X<tt-1?T[X+1]*C:E.length;G-=Math.abs(pt(E,st,at,C))}var U=0;for(X=0;X<O.length;X+=3){var Q=O[X]*C,q=O[X+1]*C,z=O[X+2]*C;U+=Math.abs((E[Q]-E[z])*(E[q+1]-E[Q+1])-(E[Q]-E[q])*(E[z+1]-E[Q+1]))}return G===0&&U===0?0:Math.abs((U-G)/G)};function pt(E,T,C,O){for(var N=0,V=T,G=C-O;V<C;V+=O)N+=(E[G]-E[V])*(E[V+1]+E[G+1]),G=V;return N}return s.flatten=function(E){for(var T=E[0][0].length,C={vertices:[],holes:[],dimensions:T},O=0,N=0;N<E.length;N++){for(var V=0;V<E[N].length;V++)for(var G=0;G<T;G++)C.vertices.push(E[N][V][G]);N>0&&(O+=E[N-1].length,C.holes.push(O))}return C},ko.exports}var DC=UC();const K0=eh(DC);var Z0=(s=>(s[s.NONE=0]="NONE",s[s.COLOR=16384]="COLOR",s[s.STENCIL=1024]="STENCIL",s[s.DEPTH=256]="DEPTH",s[s.COLOR_DEPTH=16640]="COLOR_DEPTH",s[s.COLOR_STENCIL=17408]="COLOR_STENCIL",s[s.DEPTH_STENCIL=1280]="DEPTH_STENCIL",s[s.ALL=17664]="ALL",s))(Z0||{});class GC{constructor(t){this.items=[],this._name=t}emit(t,e,r,n,i,o,l,a){const{name:h,items:c}=this;for(let u=0,d=c.length;u<d;u++)c[u][h](t,e,r,n,i,o,l,a);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const $C=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Q0=class J0 extends xr{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...$C,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await LC(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const r in this._systemsHash)t={...this._systemsHash[r].constructor.defaultOptions,...t};t={...J0.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let r=0;r<this.runners.init.items.length;r++)await this.runners.init.items[r].init(t);this._initOptions=t}render(t,e){let r=t;if(r instanceof _o&&(r={container:r},e&&(oe(Le,"passing a second argument is deprecated, please use render options instead"),r.target=e.renderTexture)),r.target||(r.target=this.view.renderTarget),r.target===this.view.renderTarget&&(this._lastObjectRendered=r.container,r.clearColor??(r.clearColor=this.background.colorRgba),r.clear??(r.clear=this.background.clearBeforeRender)),r.clearColor){const n=Array.isArray(r.clearColor)&&r.clearColor.length===4;r.clearColor=n?r.clearColor:Pe.shared.setValue(r.clearColor).toArray()}r.transform||(r.container.updateLocalTransform(),r.transform=r.container.localTransform),r.container.enableRenderGroup(),this.runners.prerender.emit(r),this.runners.renderStart.emit(r),this.runners.render.emit(r),this.runners.renderEnd.emit(r),this.runners.postrender.emit(r)}resize(t,e,r){const n=this.view.resolution;this.view.resize(t,e,r),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),r!==void 0&&r!==n&&this.runners.resolutionChange.emit(r)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Z0.ALL);const{clear:r,clearColor:n,target:i}=t;Pe.shared.setValue(n??this.background.colorRgba),e.renderTarget.clear(i,r,Pe.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new GC(e)})}_addSystems(t){let e;for(e in t){const r=t[e];this._addSystem(r.value,r.name)}}_addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const n in this.runners)this.runners[n].add(r);return this}_addPipes(t,e){const r=e.reduce((n,i)=>(n[i.name]=i.value,n),{});t.forEach(n=>{const i=n.value,o=n.name,l=r[o];this.renderPipes[o]=new i(this,l?new l:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!VC())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Q0.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let t_=Q0,No;function XC(s){return No!==void 0||(No=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:s??t_.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ae.get().getWebGLRenderingContext())return!1;let n=Ae.get().createCanvas().getContext("webgl",t);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch{return!1}})()),No}let Oo;async function HC(s={}){return Oo!==void 0||(Oo=await(async()=>{const t=Ae.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(s)).requestDevice(),!0}catch{return!1}})()),Oo}const xp=["webgl","webgpu","canvas"];async function YC(s){let t=[];s.preference?(t.push(s.preference),xp.forEach(i=>{i!==s.preference&&t.push(i)})):t=xp.slice();let e,r={};for(let i=0;i<t.length;i++){const o=t[i];if(o==="webgpu"&&await HC()){const{WebGPURenderer:l}=await wl(async()=>{const{WebGPURenderer:a}=await import("./WebGPURenderer-B7Pi2MCb.js");return{WebGPURenderer:a}},__vite__mapDeps([3,2,4]));e=l,r={...s,...s.webgpu};break}else if(o==="webgl"&&XC(s.failIfMajorPerformanceCaveat??t_.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:l}=await wl(async()=>{const{WebGLRenderer:a}=await import("./WebGLRenderer-CitD4i_k.js");return{WebGLRenderer:a}},__vite__mapDeps([5,2,4]));e=l,r={...s,...s.webgl};break}else if(o==="canvas")throw r={...s},new Error("CanvasRenderer is not yet implemented")}if(delete r.webgpu,delete r.webgl,!e)throw new Error("No available renderer for the current environment");const n=new e;return await n.init(r),n}const e_="8.9.2";class s_{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,e_)}static destroy(){}}s_.extension=bt.Application;class jC{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,e_)}destroy(){this._renderer=null}}jC.extension={type:[bt.WebGLSystem,bt.WebGPUSystem],name:"initHook",priority:-10};const r_=class Qu{constructor(...t){this.stage=new _o,t[0]!==void 0&&oe(Le,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await YC(t),Qu._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return oe(Le,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const r=Qu._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};r_._plugins=[];let n_=r_;Ze.handleByList(bt.Application,n_._plugins);Ze.add(s_);class i_ extends xr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return oe(Le,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return oe(Le,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return oe(Le,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return oe(Le,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return oe(Le,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const r in this.chars)(e=this.chars[r].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(r=>r.texture.destroy(!0)),this.pages=null)}}const _p=[{offset:0,color:"white"},{offset:1,color:"black"}],af=class Ju{constructor(...t){this.uid=Me("fillGradient"),this.type="linear",this.colorStops=[];let e=zC(t);e={...e.type==="radial"?Ju.defaultRadialOptions:Ju.defaultLinearOptions,...h0(e)},this._textureSize=e.textureSize,this._wrapMode=e.wrapMode,e.type==="radial"?(this.center=e.center,this.outerCenter=e.outerCenter??this.center,this.innerRadius=e.innerRadius,this.outerRadius=e.outerRadius,this.scale=e.scale,this.rotation=e.rotation):(this.start=e.start,this.end=e.end),this.textureSpace=e.textureSpace,this.type=e.type,e.colorStops.forEach(n=>{this.addColorStop(n.offset,n.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:Pe.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:r,y:n}=this.end,i=r-t,o=n-e;const l=i<0||o<0;if(this._wrapMode==="clamp-to-edge"){if(i<0){const p=t;t=r,r=p,i*=-1}if(o<0){const p=e;e=n,n=p,o*=-1}}const a=this.colorStops.length?this.colorStops:_p,h=this._textureSize,{canvas:c,context:u}=bp(h,1),d=l?u.createLinearGradient(this._textureSize,0,0,0):u.createLinearGradient(0,0,this._textureSize,0);Ap(d,a),u.fillStyle=d,u.fillRect(0,0,h,1),this.texture=new Gt({source:new ii({resource:c,addressMode:this._wrapMode})});const f=Math.sqrt(i*i+o*o),m=Math.atan2(o,i),g=new Xt;g.scale(f/h,1),g.rotate(m),g.translate(t,e),this.textureSpace==="local"&&g.scale(h,h),this.transform=g}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:_p,e=this._textureSize,{canvas:r,context:n}=bp(e,e),{x:i,y:o}=this.center,{x:l,y:a}=this.outerCenter,h=this.innerRadius,c=this.outerRadius,u=l-c,d=a-c,f=e/(c*2),m=(i-u)*f,g=(o-d)*f,p=n.createRadialGradient(m,g,h*f,(l-u)*f,(a-d)*f,c*f);Ap(p,t),n.fillStyle=t[t.length-1].color,n.fillRect(0,0,e,e),n.fillStyle=p,n.translate(m,g),n.rotate(this.rotation),n.scale(1,this.scale),n.translate(-m,-g),n.fillRect(0,0,e,e),this.texture=new Gt({source:new ii({resource:r,addressMode:this._wrapMode})});const y=new Xt;y.scale(1/f,1/f),y.translate(u,d),this.textureSpace==="local"&&y.scale(e,e),this.transform=y}get styleKey(){return this.uid}destroy(){var t;(t=this.texture)==null||t.destroy(!0),this.texture=null}};af.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};af.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let zr=af;function Ap(s,t){for(let e=0;e<t.length;e++){const r=t[e];s.addColorStop(r.offset,r.color)}}function bp(s,t){const e=Ae.get().createCanvas(s,t),r=e.getContext("2d");return{canvas:e,context:r}}function zC(s){let t=s[0]??{};return(typeof t=="number"||s[1])&&(oe("8.5.2","use options object instead"),t={type:"linear",start:{x:s[0],y:s[1]},end:{x:s[2],y:s[3]},textureSpace:s[4],textureSize:s[5]??zr.defaultLinearOptions.textureSize}),t}const vp={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class nh{constructor(t,e){this.uid=Me("fillPattern"),this.transform=new Xt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=vp[e].addressModeU,t.source.style.addressModeV=vp[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var sc,wp;function WC(){if(wp)return sc;wp=1,sc=e;var s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function e(i){var o=[];return i.replace(t,function(l,a,h){var c=a.toLowerCase();for(h=n(h),c=="m"&&h.length>2&&(o.push([a].concat(h.splice(0,2))),c="l",a=a=="m"?"l":"L");;){if(h.length==s[c])return h.unshift(a),o.push(h);if(h.length<s[c])throw new Error("malformed path data");o.push([a].concat(h.splice(0,s[c])))}}),o}var r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function n(i){var o=i.match(r);return o?o.map(Number):[]}return sc}var qC=WC();const KC=eh(qC);function ZC(s,t){const e=KC(s),r=[];let n=null,i=0,o=0;for(let l=0;l<e.length;l++){const a=e[l],h=a[0],c=a;switch(h){case"M":i=c[1],o=c[2],t.moveTo(i,o);break;case"m":i+=c[1],o+=c[2],t.moveTo(i,o);break;case"H":i=c[1],t.lineTo(i,o);break;case"h":i+=c[1],t.lineTo(i,o);break;case"V":o=c[1],t.lineTo(i,o);break;case"v":o+=c[1],t.lineTo(i,o);break;case"L":i=c[1],o=c[2],t.lineTo(i,o);break;case"l":i+=c[1],o+=c[2],t.lineTo(i,o);break;case"C":i=c[5],o=c[6],t.bezierCurveTo(c[1],c[2],c[3],c[4],i,o);break;case"c":t.bezierCurveTo(i+c[1],o+c[2],i+c[3],o+c[4],i+c[5],o+c[6]),i+=c[5],o+=c[6];break;case"S":i=c[3],o=c[4],t.bezierCurveToShort(c[1],c[2],i,o);break;case"s":t.bezierCurveToShort(i+c[1],o+c[2],i+c[3],o+c[4]),i+=c[3],o+=c[4];break;case"Q":i=c[3],o=c[4],t.quadraticCurveTo(c[1],c[2],i,o);break;case"q":t.quadraticCurveTo(i+c[1],o+c[2],i+c[3],o+c[4]),i+=c[3],o+=c[4];break;case"T":i=c[1],o=c[2],t.quadraticCurveToShort(i,o);break;case"t":i+=c[1],o+=c[2],t.quadraticCurveToShort(i,o);break;case"A":i=c[6],o=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],i,o);break;case"a":i+=c[6],o+=c[7],t.arcToSvg(c[1],c[2],c[3],c[4],c[5],i,o);break;case"Z":case"z":t.closePath(),r.length>0&&(n=r.pop(),n?(i=n.startX,o=n.startY):(i=0,o=0)),n=null;break;default:pe(`Unknown SVG path command: ${h}`)}h!=="Z"&&h!=="z"&&n===null&&(n={startX:i,startY:o},r.push(n))}return t}let QC=class a_{constructor(t=0,e=0,r=0){this.type="circle",this.x=t,this.y=e,this.radius=r}clone(){return new a_(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r}strokeContains(t,e,r,n=.5){if(this.radius===0)return!1;const i=this.x-t,o=this.y-e,l=this.radius,a=(1-n)*r,h=Math.sqrt(i*i+o*o);return h<=l+a&&h>l-(r-a)}getBounds(t){return t||(t=new ss),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}},JC=class o_{constructor(t=0,e=0,r=0,n=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=r,this.halfHeight=n}clone(){return new o_(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let r=(t-this.x)/this.halfWidth,n=(e-this.y)/this.halfHeight;return r*=r,n*=n,r+n<=1}strokeContains(t,e,r,n=.5){const{halfWidth:i,halfHeight:o}=this;if(i<=0||o<=0)return!1;const l=r*(1-n),a=r-l,h=i-a,c=o-a,u=i+l,d=o+l,f=t-this.x,m=e-this.y,g=f*f/(h*h)+m*m/(c*c),p=f*f/(u*u)+m*m/(d*d);return g>1&&p<=1}getBounds(t){return t||(t=new ss),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}};function tR(s,t,e,r,n,i){const o=s-e,l=t-r,a=n-e,h=i-r,c=o*a+l*h,u=a*a+h*h;let d=-1;u!==0&&(d=c/u);let f,m;d<0?(f=e,m=r):d>1?(f=n,m=i):(f=e+d*a,m=r+d*h);const g=s-f,p=t-m;return g*g+p*p}let eR,sR,rc=class l_{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const r=[];for(let n=0,i=e.length;n<i;n++)r.push(e[n].x,e[n].y);e=r}this.points=e,this.closePath=!0}isClockwise(){let t=0;const e=this.points,r=e.length;for(let n=0;n<r;n+=2){const i=e[n],o=e[n+1],l=e[(n+2)%r],a=e[(n+3)%r];t+=(l-i)*(a+o)}return t<0}containsPolygon(t){const e=this.getBounds(eR),r=t.getBounds(sR);if(!e.containsRect(r))return!1;const n=t.points;for(let i=0;i<n.length;i+=2){const o=n[i],l=n[i+1];if(!this.contains(o,l))return!1}return!0}clone(){const t=this.points.slice(),e=new l_(t);return e.closePath=this.closePath,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let i=0,o=n-1;i<n;o=i++){const l=this.points[i*2],a=this.points[i*2+1],h=this.points[o*2],c=this.points[o*2+1];a>e!=c>e&&t<(h-l)*((e-a)/(c-a))+l&&(r=!r)}return r}strokeContains(t,e,r,n=.5){const i=r*r,o=i*(1-n),l=i-o,{points:a}=this,h=a.length-(this.closePath?0:2);for(let c=0;c<h;c+=2){const u=a[c],d=a[c+1],f=a[(c+2)%a.length],m=a[(c+3)%a.length],g=tR(t,e,u,d,f,m),p=Math.sign((f-u)*(e-d)-(m-d)*(t-u));if(g<=(p<0?l:o))return!0}return!1}getBounds(t){t||(t=new ss);const e=this.points;let r=1/0,n=-1/0,i=1/0,o=-1/0;for(let l=0,a=e.length;l<a;l+=2){const h=e[l],c=e[l+1];r=h<r?h:r,n=h>n?h:n,i=c<i?c:i,o=c>o?c:o}return t.x=r,t.width=n-r,t.y=i,t.height=o-i,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}};const Lo=(s,t,e,r,n,i,o)=>{const l=s-e,a=t-r,h=Math.sqrt(l*l+a*a);return h>=n-i&&h<=n+o};let rR=class h_{constructor(t=0,e=0,r=0,n=0,i=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i}getBounds(t){return t||(t=new ss),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new h_(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=e-(this.y+r);const o=r*r;if(n*n+i*i<=o||(n=t-(this.x+this.width-r),n*n+i*i<=o)||(i=e-(this.y+this.height-r),n*n+i*i<=o)||(n=t-(this.x+r),n*n+i*i<=o))return!0}return!1}strokeContains(t,e,r,n=.5){const{x:i,y:o,width:l,height:a,radius:h}=this,c=r*(1-n),u=r-c,d=i+h,f=o+h,m=l-h*2,g=a-h*2,p=i+l,y=o+a;return(t>=i-c&&t<=i+u||t>=p-u&&t<=p+c)&&e>=f&&e<=f+g||(e>=o-c&&e<=o+u||e>=y-u&&e<=y+c)&&t>=d&&t<=d+m?!0:t<d&&e<f&&Lo(t,e,d,f,h,u,c)||t>p-h&&e<f&&Lo(t,e,p-h,f,h,u,c)||t>p-h&&e>y-h&&Lo(t,e,p-h,y-h,h,u,c)||t<d&&e>y-h&&Lo(t,e,d,y-h,h,u,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}};const nR=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function iR(s){let t="";for(let e=0;e<s;++e)e>0&&(t+=`
else `),e<s-1&&(t+=`if(test == ${e}.0){}`);return t}function aR(s,t){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const r=nR.replace(/%forloop%/gi,iR(s));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))s=s/2|0;else break}}finally{t.deleteShader(e)}return s}let Ai=null;function c_(){var t;if(Ai)return Ai;const s=$0();return Ai=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),Ai=aR(Ai,s),(t=s.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Ai}const u_={};function oR(s,t){let e=2166136261;for(let r=0;r<t;r++)e^=s[r].uid,e=Math.imul(e,16777619),e>>>=0;return u_[e]||lR(s,t,e)}let nc=0;function lR(s,t,e){const r={};let n=0;nc||(nc=c_());for(let o=0;o<nc;o++){const l=o<t?s[o]:Gt.EMPTY.source;r[n++]=l.source,r[n++]=l.style}const i=new il(r);return u_[e]=i,i}let Ep=class{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}};function Sp(s,t){const e=s.byteLength/8|0,r=new Float64Array(s,0,e);new Float64Array(t,0,e).set(r);const i=s.byteLength-e*8;if(i>0){const o=new Uint8Array(s,e*8,i);new Uint8Array(t,e*8,i).set(o)}}const hR={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var cR=(s=>(s[s.DISABLED=0]="DISABLED",s[s.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",s[s.MASK_ACTIVE=2]="MASK_ACTIVE",s[s.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",s[s.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",s[s.NONE=5]="NONE",s))(cR||{});function Tp(s,t){return t.alphaMode==="no-premultiply-alpha"&&hR[s]||s}let uR=class{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}};class dR{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new uR,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const d_=[];let td=0;function Cp(){return td>0?d_[--td]:new dR}function Rp(s){d_[td++]=s}let ya=0;const f_=class al{constructor(t={}){this.uid=Me("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],al.defaultOptions.maxTextures=al.defaultOptions.maxTextures??c_(),t={...al.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:r,indicesInitialSize:n}=t;this.attributeBuffer=new Ep(r*4),this.indexBuffer=new Uint16Array(n),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Rp(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const r=t._batch.textures.ids[e._source.uid];return!r&&r!==0?!1:(t._textureId=r,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let r=Cp(),n=r.textures;n.clear();const i=e[this.elementStart];let o=Tp(i.blendMode,i.texture._source),l=i.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const a=this.attributeBuffer.float32View,h=this.attributeBuffer.uint32View,c=this.indexBuffer;let u=this._batchIndexSize,d=this._batchIndexStart,f="startBatch";const m=this.maxTextures;for(let g=this.elementStart;g<this.elementSize;++g){const p=e[g];e[g]=null;const x=p.texture._source,_=Tp(p.blendMode,x),A=o!==_||l!==p.topology;if(x._batchTick===ya&&!A){p._textureId=x._textureBindLocation,u+=p.indexSize,p.packAsQuad?(this.packQuadAttributes(p,a,h,p._attributeStart,p._textureId),this.packQuadIndex(c,p._indexStart,p._attributeStart/this.vertexSize)):(this.packAttributes(p,a,h,p._attributeStart,p._textureId),this.packIndex(p,c,p._indexStart,p._attributeStart/this.vertexSize)),p._batch=r;continue}x._batchTick=ya,(n.count>=m||A)&&(this._finishBatch(r,d,u-d,n,o,l,t,f),f="renderBatch",d=u,o=_,l=p.topology,r=Cp(),n=r.textures,n.clear(),++ya),p._textureId=x._textureBindLocation=n.count,n.ids[x.uid]=n.count,n.textures[n.count++]=x,p._batch=r,u+=p.indexSize,p.packAsQuad?(this.packQuadAttributes(p,a,h,p._attributeStart,p._textureId),this.packQuadIndex(c,p._indexStart,p._attributeStart/this.vertexSize)):(this.packAttributes(p,a,h,p._attributeStart,p._textureId),this.packIndex(p,c,p._indexStart,p._attributeStart/this.vertexSize))}n.count>0&&(this._finishBatch(r,d,u-d,n,o,l,t,f),d=u,++ya),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=u}_finishBatch(t,e,r,n,i,o,l,a){t.gpuBindGroup=null,t.bindGroup=null,t.action=a,t.batcher=this,t.textures=n,t.blendMode=i,t.topology=o,t.start=e,t.size=r,++ya,this.batches[this.batchIndex++]=t,l.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),r=new Ep(e);Sp(this.attributeBuffer.rawBinaryData,r.rawBinaryData),this.attributeBuffer=r}_resizeIndexBuffer(t){const e=this.indexBuffer;let r=Math.max(t,e.length*1.5);r+=r%2;const n=r>65535?new Uint32Array(r):new Uint16Array(r);if(n.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let i=0;i<e.length;i++)n[i]=e[i];else Sp(e.buffer,n.buffer);this.indexBuffer=n}packQuadIndex(t,e,r){t[e]=r+0,t[e+1]=r+1,t[e+2]=r+2,t[e+3]=r+0,t[e+4]=r+2,t[e+5]=r+3}packIndex(t,e,r,n){const i=t.indices,o=t.indexSize,l=t.indexOffset,a=t.attributeOffset;for(let h=0;h<o;h++)e[r++]=n+i[h+l]-a}destroy(){for(let t=0;t<this.batches.length;t++)Rp(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};f_.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let fR=f_;var xs=(s=>(s[s.MAP_READ=1]="MAP_READ",s[s.MAP_WRITE=2]="MAP_WRITE",s[s.COPY_SRC=4]="COPY_SRC",s[s.COPY_DST=8]="COPY_DST",s[s.INDEX=16]="INDEX",s[s.VERTEX=32]="VERTEX",s[s.UNIFORM=64]="UNIFORM",s[s.STORAGE=128]="STORAGE",s[s.INDIRECT=256]="INDIRECT",s[s.QUERY_RESOLVE=512]="QUERY_RESOLVE",s[s.STATIC=1024]="STATIC",s))(xs||{});let Ja=class extends xr{constructor(t){let{data:e,size:r}=t;const{usage:n,label:i,shrinkToFit:o}=t;super(),this.uid=Me("buffer"),this._resourceType="buffer",this._resourceId=Me("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,r??(r=e==null?void 0:e.byteLength);const l=!!e;this.descriptor={size:r,usage:n,mappedAtCreation:l,label:i},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&xs.STATIC)}set static(t){t?this.descriptor.usage|=xs.STATIC:this.descriptor.usage&=~xs.STATIC}setDataWithSize(t,e,r){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){r&&this.emit("update",this);return}const n=this._data;if(this._data=t,this._dataInt32=null,!n||n.length!==t.length){!this.shrinkToFit&&n&&t.byteLength<n.byteLength?r&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Me("resource"),this.emit("change",this));return}r&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function m_(s,t){if(!(s instanceof Ja)){let e=t?xs.INDEX:xs.VERTEX;s instanceof Array&&(t?(s=new Uint32Array(s),e=xs.INDEX|xs.COPY_DST):(s=new Float32Array(s),e=xs.VERTEX|xs.COPY_DST)),s=new Ja({data:s,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return s}function mR(s,t,e){const r=s.getAttribute(t);if(!r)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const n=r.buffer.data;let i=1/0,o=1/0,l=-1/0,a=-1/0;const h=n.BYTES_PER_ELEMENT,c=(r.offset||0)/h,u=(r.stride||2*4)/h;for(let d=c;d<n.length;d+=u){const f=n[d],m=n[d+1];f>l&&(l=f),m>a&&(a=m),f<i&&(i=f),m<o&&(o=m)}return e.minX=i,e.minY=o,e.maxX=l,e.maxY=a,e}function pR(s){return(s instanceof Ja||Array.isArray(s)||s.BYTES_PER_ELEMENT)&&(s={buffer:s}),s.buffer=m_(s.buffer,!1),s}let gR=class extends xr{constructor(t={}){super(),this.uid=Me("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new jr,this._boundsDirty=!0;const{attributes:e,indexBuffer:r,topology:n}=t;if(this.buffers=[],this.attributes={},e)for(const i in e)this.addAttribute(i,e[i]);this.instanceCount=t.instanceCount??1,r&&this.addIndex(r),this.topology=n||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const r=pR(e);this.buffers.indexOf(r.buffer)===-1&&(this.buffers.push(r.buffer),r.buffer.on("update",this.onBufferUpdate,this),r.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=r}addIndex(t){this.indexBuffer=m_(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,mR(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}};const yR=new Float32Array(1),xR=new Uint32Array(1);let _R=class extends gR{constructor(){const e=new Ja({data:yR,label:"attribute-batch-buffer",usage:xs.VERTEX|xs.COPY_DST,shrinkToFit:!1}),r=new Ja({data:xR,label:"index-batch-buffer",usage:xs.INDEX|xs.COPY_DST,shrinkToFit:!1}),n=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:n,offset:0},aUV:{buffer:e,format:"float32x2",stride:n,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:n,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:n,offset:5*4}},indexBuffer:r})}};function Ip(s,t,e){if(s)for(const r in s){const n=r.toLocaleLowerCase(),i=t[n];if(i){let o=s[r];r==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&i.push(`//----${e}----//`),i.push(o)}else pe(`${r} placement hook does not exist in shader`)}}const AR=/\{\{(.*?)\}\}/g;function Mp(s){var r;const t={};return(((r=s.match(AR))==null?void 0:r.map(n=>n.replace(/[{()}]/g,"")))??[]).forEach(n=>{t[n]=[]}),t}function Pp(s,t){let e;const r=/@in\s+([^;]+);/g;for(;(e=r.exec(s))!==null;)t.push(e[1])}function Fp(s,t,e=!1){const r=[];Pp(t,r),s.forEach(l=>{l.header&&Pp(l.header,r)});const n=r;e&&n.sort();const i=n.map((l,a)=>`       @location(${a}) ${l},`).join(`
`);let o=t.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${i}
`),o}function Bp(s,t){let e;const r=/@out\s+([^;]+);/g;for(;(e=r.exec(s))!==null;)t.push(e[1])}function bR(s){const e=/\b(\w+)\s*:/g.exec(s);return e?e[1]:""}function vR(s){const t=/@.*?\s+/g;return s.replace(t,"")}function wR(s,t){const e=[];Bp(t,e),s.forEach(a=>{a.header&&Bp(a.header,e)});let r=0;const n=e.sort().map(a=>a.indexOf("builtin")>-1?a:`@location(${r++}) ${a}`).join(`,
`),i=e.sort().map(a=>`       var ${vR(a)};`).join(`
`),o=`return VSOutput(
            ${e.sort().map(a=>` ${bR(a)}`).join(`,
`)});`;let l=t.replace(/@out\s+[^;]+;\s*/g,"");return l=l.replace("{{struct}}",`
${n}
`),l=l.replace("{{start}}",`
${i}
`),l=l.replace("{{return}}",`
${o}
`),l}function kp(s,t){let e=s;for(const r in t){const n=t[r];n.join(`
`).length?e=e.replace(`{{${r}}}`,`//-----${r} START-----//
${n.join(`
`)}
//----${r} FINISH----//`):e=e.replace(`{{${r}}}`,"")}return e}const mn=Object.create(null),ic=new Map;let ER=0;function SR({template:s,bits:t}){const e=p_(s,t);if(mn[e])return mn[e];const{vertex:r,fragment:n}=CR(s,t);return mn[e]=g_(r,n,t),mn[e]}function TR({template:s,bits:t}){const e=p_(s,t);return mn[e]||(mn[e]=g_(s.vertex,s.fragment,t)),mn[e]}function CR(s,t){const e=t.map(o=>o.vertex).filter(o=>!!o),r=t.map(o=>o.fragment).filter(o=>!!o);let n=Fp(e,s.vertex,!0);n=wR(e,n);const i=Fp(r,s.fragment,!0);return{vertex:n,fragment:i}}function p_(s,t){return t.map(e=>(ic.has(e)||ic.set(e,ER++),ic.get(e))).sort((e,r)=>e-r).join("-")+s.vertex+s.fragment}function g_(s,t,e){const r=Mp(s),n=Mp(t);return e.forEach(i=>{Ip(i.vertex,r,i.name),Ip(i.fragment,n,i.name)}),{vertex:kp(s,r),fragment:kp(t,n)}}const RR=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,IR=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,MR=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,PR=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,FR={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},BR={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function kR({bits:s,name:t}){const e=SR({template:{fragment:IR,vertex:RR},bits:[FR,...s]});return rh.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function NR({bits:s,name:t}){return new H0({name:t,...TR({template:{vertex:MR,fragment:PR},bits:[BR,...s]})})}const OR={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},LR={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},ac={};function VR(s){const t=[];if(s===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let r=0;r<s;r++)t.push(`@group(1) @binding(${e++}) var textureSource${r+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${r+1}: sampler;`)}return t.join(`
`)}function UR(s){const t=[];if(s===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<s;e++)e===s-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function DR(s){return ac[s]||(ac[s]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${VR(s)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${UR(s)}
            `}}),ac[s]}const oc={};function GR(s){const t=[];for(let e=0;e<s;e++)e>0&&t.push("else"),e<s-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function $R(s){return oc[s]||(oc[s]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${s}];

            `,main:`

                ${GR(s)}
            `}}),oc[s]}const XR={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},HR={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Np={};function YR(s){let t=Np[s];if(t)return t;const e=new Int32Array(s);for(let r=0;r<s;r++)e[r]=r;return t=Np[s]=new W0({uTextures:{value:e,type:"i32",size:s}},{isStatic:!0}),t}class jR extends OC{constructor(t){const e=NR({name:"batch",bits:[LR,$R(t),HR]}),r=kR({name:"batch",bits:[OR,DR(t),XR]});super({glProgram:e,gpuProgram:r,resources:{batchSamplers:YR(t)}})}}let Op=null;const y_=class x_ extends fR{constructor(){super(...arguments),this.geometry=new _R,this.shader=Op||(Op=new jR(this.maxTextures)),this.name=x_.extension.name,this.vertexSize=6}packAttributes(t,e,r,n,i){const o=i<<16|t.roundPixels&65535,l=t.transform,a=l.a,h=l.b,c=l.c,u=l.d,d=l.tx,f=l.ty,{positions:m,uvs:g}=t,p=t.color,y=t.attributeOffset,x=y+t.attributeSize;for(let _=y;_<x;_++){const A=_*2,b=m[A],w=m[A+1];e[n++]=a*b+c*w+d,e[n++]=u*w+h*b+f,e[n++]=g[A],e[n++]=g[A+1],r[n++]=p,r[n++]=o}}packQuadAttributes(t,e,r,n,i){const o=t.texture,l=t.transform,a=l.a,h=l.b,c=l.c,u=l.d,d=l.tx,f=l.ty,m=t.bounds,g=m.maxX,p=m.minX,y=m.maxY,x=m.minY,_=o.uvs,A=t.color,b=i<<16|t.roundPixels&65535;e[n+0]=a*p+c*x+d,e[n+1]=u*x+h*p+f,e[n+2]=_.x0,e[n+3]=_.y0,r[n+4]=A,r[n+5]=b,e[n+6]=a*g+c*x+d,e[n+7]=u*x+h*g+f,e[n+8]=_.x1,e[n+9]=_.y1,r[n+10]=A,r[n+11]=b,e[n+12]=a*g+c*y+d,e[n+13]=u*y+h*g+f,e[n+14]=_.x2,e[n+15]=_.y2,r[n+16]=A,r[n+17]=b,e[n+18]=a*p+c*y+d,e[n+19]=u*y+h*p+f,e[n+20]=_.x3,e[n+21]=_.y3,r[n+22]=A,r[n+23]=b}};y_.extension={type:[bt.Batcher],name:"default"};let zR=y_;function WR(s,t,e,r,n,i,o,l=null){let a=0;e*=t,n*=i;const h=l.a,c=l.b,u=l.c,d=l.d,f=l.tx,m=l.ty;for(;a<o;){const g=s[e],p=s[e+1];r[n]=h*g+u*p+f,r[n+1]=c*g+d*p+m,n+=i,e+=t,a++}}function qR(s,t,e,r){let n=0;for(t*=e;n<r;)s[t]=0,s[t+1]=0,t+=e,n++}function __(s,t,e,r,n){const i=t.a,o=t.b,l=t.c,a=t.d,h=t.tx,c=t.ty;e||(e=0),r||(r=2),n||(n=s.length/r-e);let u=e*r;for(let d=0;d<n;d++){const f=s[u],m=s[u+1];s[u]=i*f+l*m+h,s[u+1]=o*f+a*m+c,u+=r}}const KR=new Xt;class A_{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,r=this.renderable;return r?v0(e,r.groupColor)+(this.alpha*r.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||KR}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const to={extension:{type:bt.ShapeBuilder,name:"circle"},build(s,t){let e,r,n,i,o,l;if(s.type==="circle"){const A=s;e=A.x,r=A.y,o=l=A.radius,n=i=0}else if(s.type==="ellipse"){const A=s;e=A.x,r=A.y,o=A.halfWidth,l=A.halfHeight,n=i=0}else{const A=s,b=A.width/2,w=A.height/2;e=A.x+b,r=A.y+w,o=l=Math.max(0,Math.min(A.radius,Math.min(b,w))),n=b-o,i=w-l}if(!(o>=0&&l>=0&&n>=0&&i>=0))return t;const a=Math.ceil(2.3*Math.sqrt(o+l)),h=a*8+(n?4:0)+(i?4:0);if(h===0)return t;if(a===0)return t[0]=t[6]=e+n,t[1]=t[3]=r+i,t[2]=t[4]=e-n,t[5]=t[7]=r-i,t;let c=0,u=a*4+(n?2:0)+2,d=u,f=h,m=n+o,g=i,p=e+m,y=e-m,x=r+g;if(t[c++]=p,t[c++]=x,t[--u]=x,t[--u]=y,i){const A=r-g;t[d++]=y,t[d++]=A,t[--f]=A,t[--f]=p}for(let A=1;A<a;A++){const b=Math.PI/2*(A/a),w=n+Math.cos(b)*o,v=i+Math.sin(b)*l,R=e+w,P=e-w,F=r+v,B=r-v;t[c++]=R,t[c++]=F,t[--u]=F,t[--u]=P,t[d++]=P,t[d++]=B,t[--f]=B,t[--f]=R}m=n,g=i+l,p=e+m,y=e-m,x=r+g;const _=r-g;return t[c++]=p,t[c++]=x,t[--f]=_,t[--f]=p,n&&(t[c++]=y,t[c++]=x,t[--f]=_,t[--f]=y),t},triangulate(s,t,e,r,n,i){if(s.length===0)return;let o=0,l=0;for(let c=0;c<s.length;c+=2)o+=s[c],l+=s[c+1];o/=s.length/2,l/=s.length/2;let a=r;t[a*e]=o,t[a*e+1]=l;const h=a++;for(let c=0;c<s.length;c+=2)t[a*e]=s[c],t[a*e+1]=s[c+1],c>0&&(n[i++]=a,n[i++]=h,n[i++]=a-1),a++;n[i++]=h+1,n[i++]=h,n[i++]=a-1}},ZR={...to,extension:{...to.extension,name:"ellipse"}},QR={...to,extension:{...to.extension,name:"roundedRectangle"}},b_=1e-4,Lp=1e-4;function JR(s){const t=s.length;if(t<6)return 1;let e=0;for(let r=0,n=s[t-2],i=s[t-1];r<t;r+=2){const o=s[r],l=s[r+1];e+=(o-n)*(l+i),n=o,i=l}return e<0?-1:1}function Vp(s,t,e,r,n,i,o,l){const a=s-e*n,h=t-r*n,c=s+e*i,u=t+r*i;let d,f;o?(d=r,f=-e):(d=-r,f=e);const m=a+d,g=h+f,p=c+d,y=u+f;return l.push(m,g),l.push(p,y),2}function On(s,t,e,r,n,i,o,l){const a=e-s,h=r-t;let c=Math.atan2(a,h),u=Math.atan2(n-s,i-t);l&&c<u?c+=Math.PI*2:!l&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,m=Math.abs(f),g=Math.sqrt(a*a+h*h),p=(15*m*Math.sqrt(g)/Math.PI>>0)+1,y=f/p;if(d+=y,l){o.push(s,t),o.push(e,r);for(let x=1,_=d;x<p;x++,_+=y)o.push(s,t),o.push(s+Math.sin(_)*g,t+Math.cos(_)*g);o.push(s,t),o.push(n,i)}else{o.push(e,r),o.push(s,t);for(let x=1,_=d;x<p;x++,_+=y)o.push(s+Math.sin(_)*g,t+Math.cos(_)*g),o.push(s,t);o.push(n,i),o.push(s,t)}return p*2}function tI(s,t,e,r,n,i){const o=b_;if(s.length===0)return;const l=t;let a=l.alignment;if(t.alignment!==.5){let O=JR(s);a=(a-.5)*O+.5}const h=new _s(s[0],s[1]),c=new _s(s[s.length-2],s[s.length-1]),u=r,d=Math.abs(h.x-c.x)<o&&Math.abs(h.y-c.y)<o;if(u){s=s.slice(),d&&(s.pop(),s.pop(),c.set(s[s.length-2],s[s.length-1]));const O=(h.x+c.x)*.5,N=(c.y+h.y)*.5;s.unshift(O,N),s.push(O,N)}const f=n,m=s.length/2;let g=s.length;const p=f.length/2,y=l.width/2,x=y*y,_=l.miterLimit*l.miterLimit;let A=s[0],b=s[1],w=s[2],v=s[3],R=0,P=0,F=-(b-v),B=A-w,L=0,Y=0,Z=Math.sqrt(F*F+B*B);F/=Z,B/=Z,F*=y,B*=y;const pt=a,E=(1-pt)*2,T=pt*2;u||(l.cap==="round"?g+=On(A-F*(E-T)*.5,b-B*(E-T)*.5,A-F*E,b-B*E,A+F*T,b+B*T,f,!0)+2:l.cap==="square"&&(g+=Vp(A,b,F,B,E,T,!0,f))),f.push(A-F*E,b-B*E),f.push(A+F*T,b+B*T);for(let O=1;O<m-1;++O){A=s[(O-1)*2],b=s[(O-1)*2+1],w=s[O*2],v=s[O*2+1],R=s[(O+1)*2],P=s[(O+1)*2+1],F=-(b-v),B=A-w,Z=Math.sqrt(F*F+B*B),F/=Z,B/=Z,F*=y,B*=y,L=-(v-P),Y=w-R,Z=Math.sqrt(L*L+Y*Y),L/=Z,Y/=Z,L*=y,Y*=y;const N=w-A,V=b-v,G=w-R,X=P-v,tt=N*G+V*X,st=V*G-X*N,at=st<0;if(Math.abs(st)<.001*Math.abs(tt)){f.push(w-F*E,v-B*E),f.push(w+F*T,v+B*T),tt>=0&&(l.join==="round"?g+=On(w,v,w-F*E,v-B*E,w-L*E,v-Y*E,f,!1)+4:g+=2,f.push(w-L*T,v-Y*T),f.push(w+L*E,v+Y*E));continue}const U=(-F+A)*(-B+v)-(-F+w)*(-B+b),Q=(-L+R)*(-Y+v)-(-L+w)*(-Y+P),q=(N*Q-G*U)/st,z=(X*U-V*Q)/st,nt=(q-w)*(q-w)+(z-v)*(z-v),S=w+(q-w)*E,I=v+(z-v)*E,k=w-(q-w)*T,D=v-(z-v)*T,$=Math.min(N*N+V*V,G*G+X*X),K=at?E:T,rt=$+K*K*x;nt<=rt?l.join==="bevel"||nt/x>_?(at?(f.push(S,I),f.push(w+F*T,v+B*T),f.push(S,I),f.push(w+L*T,v+Y*T)):(f.push(w-F*E,v-B*E),f.push(k,D),f.push(w-L*E,v-Y*E),f.push(k,D)),g+=2):l.join==="round"?at?(f.push(S,I),f.push(w+F*T,v+B*T),g+=On(w,v,w+F*T,v+B*T,w+L*T,v+Y*T,f,!0)+4,f.push(S,I),f.push(w+L*T,v+Y*T)):(f.push(w-F*E,v-B*E),f.push(k,D),g+=On(w,v,w-F*E,v-B*E,w-L*E,v-Y*E,f,!1)+4,f.push(w-L*E,v-Y*E),f.push(k,D)):(f.push(S,I),f.push(k,D)):(f.push(w-F*E,v-B*E),f.push(w+F*T,v+B*T),l.join==="round"?at?g+=On(w,v,w+F*T,v+B*T,w+L*T,v+Y*T,f,!0)+2:g+=On(w,v,w-F*E,v-B*E,w-L*E,v-Y*E,f,!1)+2:l.join==="miter"&&nt/x<=_&&(at?(f.push(k,D),f.push(k,D)):(f.push(S,I),f.push(S,I)),g+=2),f.push(w-L*E,v-Y*E),f.push(w+L*T,v+Y*T),g+=2)}A=s[(m-2)*2],b=s[(m-2)*2+1],w=s[(m-1)*2],v=s[(m-1)*2+1],F=-(b-v),B=A-w,Z=Math.sqrt(F*F+B*B),F/=Z,B/=Z,F*=y,B*=y,f.push(w-F*E,v-B*E),f.push(w+F*T,v+B*T),u||(l.cap==="round"?g+=On(w-F*(E-T)*.5,v-B*(E-T)*.5,w-F*E,v-B*E,w+F*T,v+B*T,f,!1)+2:l.cap==="square"&&(g+=Vp(w,v,F,B,E,T,!1,f)));const C=Lp*Lp;for(let O=p;O<g+p-2;++O)A=f[O*2],b=f[O*2+1],w=f[(O+1)*2],v=f[(O+1)*2+1],R=f[(O+2)*2],P=f[(O+2)*2+1],!(Math.abs(A*(v-P)+w*(P-b)+R*(b-v))<C)&&i.push(O,O+1,O+2)}function eI(s,t,e,r){const n=b_;if(s.length===0)return;const i=s[0],o=s[1],l=s[s.length-2],a=s[s.length-1],h=t||Math.abs(i-l)<n&&Math.abs(o-a)<n,c=e,u=s.length/2,d=c.length/2;for(let f=0;f<u;f++)c.push(s[f*2]),c.push(s[f*2+1]);for(let f=0;f<u-1;f++)r.push(d+f,d+f+1);h&&r.push(d+u-1,d)}function v_(s,t,e,r,n,i,o){const l=K0(s,t,2);if(!l)return;for(let h=0;h<l.length;h+=3)i[o++]=l[h]+n,i[o++]=l[h+1]+n,i[o++]=l[h+2]+n;let a=n*r;for(let h=0;h<s.length;h+=2)e[a]=s[h],e[a+1]=s[h+1],a+=r}const sI=[],rI={extension:{type:bt.ShapeBuilder,name:"polygon"},build(s,t){for(let e=0;e<s.points.length;e++)t[e]=s.points[e];return t},triangulate(s,t,e,r,n,i){v_(s,sI,t,e,r,n,i)}},nI={extension:{type:bt.ShapeBuilder,name:"rectangle"},build(s,t){const e=s,r=e.x,n=e.y,i=e.width,o=e.height;return i>=0&&o>=0&&(t[0]=r,t[1]=n,t[2]=r+i,t[3]=n,t[4]=r+i,t[5]=n+o,t[6]=r,t[7]=n+o),t},triangulate(s,t,e,r,n,i){let o=0;r*=e,t[r+o]=s[0],t[r+o+1]=s[1],o+=e,t[r+o]=s[2],t[r+o+1]=s[3],o+=e,t[r+o]=s[6],t[r+o+1]=s[7],o+=e,t[r+o]=s[4],t[r+o+1]=s[5],o+=e;const l=r/e;n[i++]=l,n[i++]=l+1,n[i++]=l+2,n[i++]=l+1,n[i++]=l+3,n[i++]=l+2}},iI={extension:{type:bt.ShapeBuilder,name:"triangle"},build(s,t){return t[0]=s.x,t[1]=s.y,t[2]=s.x2,t[3]=s.y2,t[4]=s.x3,t[5]=s.y3,t},triangulate(s,t,e,r,n,i){let o=0;r*=e,t[r+o]=s[0],t[r+o+1]=s[1],o+=e,t[r+o]=s[2],t[r+o+1]=s[3],o+=e,t[r+o]=s[4],t[r+o+1]=s[5];const l=r/e;n[i++]=l,n[i++]=l+1,n[i++]=l+2}},aI=new Xt,oI=new ss;function lI(s,t,e,r){const n=t.matrix?s.copyFrom(t.matrix).invert():s.identity();if(t.textureSpace==="local"){const o=e.getBounds(oI);t.width&&o.pad(t.width);const{x:l,y:a}=o,h=1/o.width,c=1/o.height,u=-l*h,d=-a*c,f=n.a,m=n.b,g=n.c,p=n.d;n.a*=h,n.b*=h,n.c*=c,n.d*=c,n.tx=u*f+d*g+n.tx,n.ty=u*m+d*p+n.ty}else n.translate(t.texture.frame.x,t.texture.frame.y),n.scale(1/t.texture.source.width,1/t.texture.source.height);const i=t.texture.source.style;return!(t.fill instanceof zr)&&i.addressMode==="clamp-to-edge"&&(i.addressMode="repeat",i.update()),r&&n.append(aI.copyFrom(r).invert()),n}const ih={};Ze.handleByMap(bt.ShapeBuilder,ih);Ze.add(nI,rI,iI,to,ZR,QR);const hI=new ss,cI=new Xt;function uI(s,t){const{geometryData:e,batches:r}=t;r.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let n=0;n<s.instructions.length;n++){const i=s.instructions[n];if(i.action==="texture")dI(i.data,r,e);else if(i.action==="fill"||i.action==="stroke"){const o=i.action==="stroke",l=i.data.path.shapePath,a=i.data.style,h=i.data.hole;o&&h&&Up(h.shapePath,a,!0,r,e),h&&(l.shapePrimitives[l.shapePrimitives.length-1].holes=h.shapePath.shapePrimitives),Up(l,a,o,r,e)}}}function dI(s,t,e){const{vertices:r,uvs:n,indices:i}=e,o=i.length,l=r.length/2,a=[],h=ih.rectangle,c=hI,u=s.image;c.x=s.dx,c.y=s.dy,c.width=s.dw,c.height=s.dh;const d=s.transform;h.build(c,a),d&&__(a,d),h.triangulate(a,r,2,l,i,o);const f=u.uvs;n.push(f.x0,f.y0,f.x1,f.y1,f.x3,f.y3,f.x2,f.y2);const m=Xr.get(A_);m.indexOffset=o,m.indexSize=i.length-o,m.attributeOffset=l,m.attributeSize=r.length/2-l,m.baseColor=s.style,m.alpha=s.alpha,m.texture=u,m.geometryData=e,t.push(m)}function Up(s,t,e,r,n){const{vertices:i,uvs:o,indices:l}=n;s.shapePrimitives.forEach(({shape:a,transform:h,holes:c})=>{const u=l.length,d=i.length/2,f=[],m=ih[a.type];let g="triangle-list";if(m.build(a,f),h&&__(f,h),e){const _=a.closePath??!0,A=t;A.pixelLine?(eI(f,_,i,l),g="line-list"):tI(f,A,!1,_,i,l)}else if(c){const _=[],A=f.slice();fI(c).forEach(w=>{_.push(A.length/2),A.push(...w)}),v_(A,_,i,2,d,l,u)}else m.triangulate(f,i,2,d,l,u);const p=o.length/2,y=t.texture;if(y!==Gt.WHITE){const _=lI(cI,t,a,h);WR(i,2,d,o,p,2,i.length/2-d,_)}else qR(o,p,2,i.length/2-d);const x=Xr.get(A_);x.indexOffset=u,x.indexSize=l.length-u,x.attributeOffset=d,x.attributeSize=i.length/2-d,x.baseColor=t.color,x.alpha=t.alpha,x.texture=y,x.geometryData=n,x.topology=g,r.push(x)})}function fI(s){const t=[];for(let e=0;e<s.length;e++){const r=s[e].shape,n=[];ih[r.type].build(r,n),t.push(n)}return t}class mI{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class pI{constructor(){this.batcher=new zR,this.instructions=new T0}init(){this.instructions.reset()}get geometry(){return oe(ET,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const of=class ed{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){ed.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??ed.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),uI(t,e);const r=t.batchMode;t.customShader||r==="no-batch"?e.isBatchable=!1:r==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=Xr.get(pI),{batches:r,geometryData:n}=this._gpuContextHash[t.uid],i=n.vertices.length,o=n.indices.length;for(let c=0;c<r.length;c++)r[c].applyTransform=!1;const l=e.batcher;l.ensureAttributeBuffer(i),l.ensureIndexBuffer(o),l.begin();for(let c=0;c<r.length;c++){const u=r[c];l.add(u)}l.finish(e.instructions);const a=l.geometry;a.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),a.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);const h=l.batches;for(let c=0;c<h.length;c++){const u=h[c];u.bindGroup=oR(u.textures.textures,u.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new mI;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Xr.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(r=>{Xr.return(r)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};of.extension={type:[bt.WebGLSystem,bt.WebGPUSystem,bt.CanvasSystem],name:"graphicsContext"};of.defaultOptions={bezierSmoothness:.5};let w_=of;const gI=8,Vo=11920929e-14,yI=1;function E_(s,t,e,r,n,i,o,l,a,h){const u=Math.min(.99,Math.max(0,h??w_.defaultOptions.bezierSmoothness));let d=(yI-u)/1;return d*=d,xI(t,e,r,n,i,o,l,a,s,d),s}function xI(s,t,e,r,n,i,o,l,a,h){sd(s,t,e,r,n,i,o,l,a,h,0),a.push(o,l)}function sd(s,t,e,r,n,i,o,l,a,h,c){if(c>gI)return;const u=(s+e)/2,d=(t+r)/2,f=(e+n)/2,m=(r+i)/2,g=(n+o)/2,p=(i+l)/2,y=(u+f)/2,x=(d+m)/2,_=(f+g)/2,A=(m+p)/2,b=(y+_)/2,w=(x+A)/2;if(c>0){let v=o-s,R=l-t;const P=Math.abs((e-o)*R-(r-l)*v),F=Math.abs((n-o)*R-(i-l)*v);if(P>Vo&&F>Vo){if((P+F)*(P+F)<=h*(v*v+R*R)){a.push(b,w);return}}else if(P>Vo){if(P*P<=h*(v*v+R*R)){a.push(b,w);return}}else if(F>Vo){if(F*F<=h*(v*v+R*R)){a.push(b,w);return}}else if(v=b-(s+o)/2,R=w-(t+l)/2,v*v+R*R<=h){a.push(b,w);return}}sd(s,t,u,d,y,x,b,w,a,h,c+1),sd(b,w,_,A,g,p,o,l,a,h,c+1)}const _I=8,AI=11920929e-14,bI=1;function vI(s,t,e,r,n,i,o,l){const h=Math.min(.99,Math.max(0,l??w_.defaultOptions.bezierSmoothness));let c=(bI-h)/1;return c*=c,wI(t,e,r,n,i,o,s,c),s}function wI(s,t,e,r,n,i,o,l){rd(o,s,t,e,r,n,i,l,0),o.push(n,i)}function rd(s,t,e,r,n,i,o,l,a){if(a>_I)return;const h=(t+r)/2,c=(e+n)/2,u=(r+i)/2,d=(n+o)/2,f=(h+u)/2,m=(c+d)/2;let g=i-t,p=o-e;const y=Math.abs((r-i)*p-(n-o)*g);if(y>AI){if(y*y<=l*(g*g+p*p)){s.push(f,m);return}}else if(g=f-(t+i)/2,p=m-(e+o)/2,g*g+p*p<=l){s.push(f,m);return}rd(s,t,e,h,c,f,m,l,a+1),rd(s,f,m,u,d,i,o,l,a+1)}function S_(s,t,e,r,n,i,o,l){let a=Math.abs(n-i);(!o&&n>i||o&&i>n)&&(a=2*Math.PI-a),l||(l=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(a/Math.PI)))),l=Math.max(l,3);let h=a/l,c=n;h*=o?-1:1;for(let u=0;u<l+1;u++){const d=Math.cos(c),f=Math.sin(c),m=t+d*r,g=e+f*r;s.push(m,g),c+=h}}function EI(s,t,e,r,n,i){const o=s[s.length-2],a=s[s.length-1]-e,h=o-t,c=n-e,u=r-t,d=Math.abs(a*u-h*c);if(d<1e-8||i===0){(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e);return}const f=a*a+h*h,m=c*c+u*u,g=a*c+h*u,p=i*Math.sqrt(f)/d,y=i*Math.sqrt(m)/d,x=p*g/f,_=y*g/m,A=p*u+y*h,b=p*c+y*a,w=h*(y+x),v=a*(y+x),R=u*(p+_),P=c*(p+_),F=Math.atan2(v-b,w-A),B=Math.atan2(P-b,R-A);S_(s,A+t,b+e,i,F,B,h*c>u*a)}const Xa=Math.PI*2,lc={centerX:0,centerY:0,ang1:0,ang2:0},hc=({x:s,y:t},e,r,n,i,o,l,a)=>{s*=e,t*=r;const h=n*s-i*t,c=i*s+n*t;return a.x=h+o,a.y=c+l,a};function SI(s,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=t===1.5707963267948966?.551915024494:e,n=Math.cos(s),i=Math.sin(s),o=Math.cos(s+t),l=Math.sin(s+t);return[{x:n-i*r,y:i+n*r},{x:o+l*r,y:l-o*r},{x:o,y:l}]}const Dp=(s,t,e,r)=>{const n=s*r-t*e<0?-1:1;let i=s*e+t*r;return i>1&&(i=1),i<-1&&(i=-1),n*Math.acos(i)},TI=(s,t,e,r,n,i,o,l,a,h,c,u,d)=>{const f=Math.pow(n,2),m=Math.pow(i,2),g=Math.pow(c,2),p=Math.pow(u,2);let y=f*m-f*p-m*g;y<0&&(y=0),y/=f*p+m*g,y=Math.sqrt(y)*(o===l?-1:1);const x=y*n/i*u,_=y*-i/n*c,A=h*x-a*_+(s+e)/2,b=a*x+h*_+(t+r)/2,w=(c-x)/n,v=(u-_)/i,R=(-c-x)/n,P=(-u-_)/i,F=Dp(1,0,w,v);let B=Dp(w,v,R,P);l===0&&B>0&&(B-=Xa),l===1&&B<0&&(B+=Xa),d.centerX=A,d.centerY=b,d.ang1=F,d.ang2=B};function CI(s,t,e,r,n,i,o,l=0,a=0,h=0){if(i===0||o===0)return;const c=Math.sin(l*Xa/360),u=Math.cos(l*Xa/360),d=u*(t-r)/2+c*(e-n)/2,f=-c*(t-r)/2+u*(e-n)/2;if(d===0&&f===0)return;i=Math.abs(i),o=Math.abs(o);const m=Math.pow(d,2)/Math.pow(i,2)+Math.pow(f,2)/Math.pow(o,2);m>1&&(i*=Math.sqrt(m),o*=Math.sqrt(m)),TI(t,e,r,n,i,o,a,h,c,u,d,f,lc);let{ang1:g,ang2:p}=lc;const{centerX:y,centerY:x}=lc;let _=Math.abs(p)/(Xa/4);Math.abs(1-_)<1e-7&&(_=1);const A=Math.max(Math.ceil(_),1);p/=A;let b=s[s.length-2],w=s[s.length-1];const v={x:0,y:0};for(let R=0;R<A;R++){const P=SI(g,p),{x:F,y:B}=hc(P[0],i,o,u,c,y,x,v),{x:L,y:Y}=hc(P[1],i,o,u,c,y,x,v),{x:Z,y:pt}=hc(P[2],i,o,u,c,y,x,v);E_(s,b,w,F,B,L,Y,Z,pt),b=Z,w=pt,g+=p}}function RI(s,t,e){const r=(o,l)=>{const a=l.x-o.x,h=l.y-o.y,c=Math.sqrt(a*a+h*h),u=a/c,d=h/c;return{len:c,nx:u,ny:d}},n=(o,l)=>{o===0?s.moveTo(l.x,l.y):s.lineTo(l.x,l.y)};let i=t[t.length-1];for(let o=0;o<t.length;o++){const l=t[o%t.length],a=l.radius??e;if(a<=0){n(o,l),i=l;continue}const h=t[(o+1)%t.length],c=r(l,i),u=r(l,h);if(c.len<1e-4||u.len<1e-4){n(o,l),i=l;continue}let d=Math.asin(c.nx*u.ny-c.ny*u.nx),f=1,m=!1;c.nx*u.nx-c.ny*-u.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,f=-1,m=!0):d>0&&(f=-1,m=!0);const g=d/2;let p,y=Math.abs(Math.cos(g)*a/Math.sin(g));y>Math.min(c.len/2,u.len/2)?(y=Math.min(c.len/2,u.len/2),p=Math.abs(y*Math.sin(g)/Math.cos(g))):p=a;const x=l.x+u.nx*y+-u.ny*p*f,_=l.y+u.ny*y+u.nx*p*f,A=Math.atan2(c.ny,c.nx)+Math.PI/2*f,b=Math.atan2(u.ny,u.nx)-Math.PI/2*f;o===0&&s.moveTo(x+Math.cos(A)*p,_+Math.sin(A)*p),s.arc(x,_,p,A,b,m),i=l}}function II(s,t,e,r){const n=(l,a)=>Math.sqrt((l.x-a.x)**2+(l.y-a.y)**2),i=(l,a,h)=>({x:l.x+(a.x-l.x)*h,y:l.y+(a.y-l.y)*h}),o=t.length;for(let l=0;l<o;l++){const a=t[(l+1)%o],h=a.radius??e;if(h<=0){l===0?s.moveTo(a.x,a.y):s.lineTo(a.x,a.y);continue}const c=t[l],u=t[(l+2)%o],d=n(c,a);let f;if(d<1e-4)f=a;else{const p=Math.min(d/2,h);f=i(a,c,p/d)}const m=n(u,a);let g;if(m<1e-4)g=a;else{const p=Math.min(m/2,h);g=i(a,u,p/m)}l===0?s.moveTo(f.x,f.y):s.lineTo(f.x,f.y),s.quadraticCurveTo(a.x,a.y,g.x,g.y,r)}}const MI=new ss;class PI{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new jr,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const r=this._currentPoly.points,n=r[r.length-2],i=r[r.length-1];return(n!==t||i!==e)&&r.push(t,e),this}arc(t,e,r,n,i,o){this._ensurePoly(!1);const l=this._currentPoly.points;return S_(l,t,e,r,n,i,o),this}arcTo(t,e,r,n,i){this._ensurePoly();const o=this._currentPoly.points;return EI(o,t,e,r,n,i),this}arcToSvg(t,e,r,n,i,o,l){const a=this._currentPoly.points;return CI(a,this._currentPoly.lastX,this._currentPoly.lastY,o,l,t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,o,l){this._ensurePoly();const a=this._currentPoly;return E_(this._currentPoly.points,a.lastX,a.lastY,t,e,r,n,i,o,l),this}quadraticCurveTo(t,e,r,n,i){this._ensurePoly();const o=this._currentPoly;return vI(this._currentPoly.points,o.lastX,o.lastY,t,e,r,n,i),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));const r=this.shapePrimitives,n=r.length;for(let i=0;i<t.instructions.length;i++){const o=t.instructions[i];this[o.action](...o.data)}if(t.checkForHoles&&r.length-n>1){let i=null;for(let o=n;o<r.length;o++){const l=r[o];if(l.shape.type==="polygon"){const a=l.shape,h=i==null?void 0:i.shape;h&&h.containsPolygon(a)?(i.holes||(i.holes=[]),i.holes.push(l),r.copyWithin(o,o+1),r.length--,o--):i=l}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,r,n,i){return this.drawShape(new ss(t,e,r,n),i),this}circle(t,e,r,n){return this.drawShape(new QC(t,e,r),n),this}poly(t,e,r){const n=new rc(t);return n.closePath=e,this.drawShape(n,r),this}regularPoly(t,e,r,n,i=0,o){n=Math.max(n|0,3);const l=-1*Math.PI/2+i,a=Math.PI*2/n,h=[];for(let c=0;c<n;c++){const u=l-c*a;h.push(t+r*Math.cos(u),e+r*Math.sin(u))}return this.poly(h,!0,o),this}roundPoly(t,e,r,n,i,o=0,l){if(n=Math.max(n|0,3),i<=0)return this.regularPoly(t,e,r,n,o);const a=r*Math.sin(Math.PI/n)-.001;i=Math.min(i,a);const h=-1*Math.PI/2+o,c=Math.PI*2/n,u=(n-2)*Math.PI/n/2;for(let d=0;d<n;d++){const f=d*c+h,m=t+r*Math.cos(f),g=e+r*Math.sin(f),p=f+Math.PI+u,y=f-Math.PI-u,x=m+i*Math.cos(p),_=g+i*Math.sin(p),A=m+i*Math.cos(y),b=g+i*Math.sin(y);d===0?this.moveTo(x,_):this.lineTo(x,_),this.quadraticCurveTo(m,g,A,b,l)}return this.closePath()}roundShape(t,e,r=!1,n){return t.length<3?this:(r?II(this,t,e,n):RI(this,t,e),this.closePath())}filletRect(t,e,r,n,i){if(i===0)return this.rect(t,e,r,n);const o=Math.min(r,n)/2,l=Math.min(o,Math.max(-o,i)),a=t+r,h=e+n,c=l<0?-l:0,u=Math.abs(l);return this.moveTo(t,e+u).arcTo(t+c,e+c,t+u,e,u).lineTo(a-u,e).arcTo(a-c,e+c,a,e+u,u).lineTo(a,h-u).arcTo(a-c,h-c,t+r-u,h,u).lineTo(t+u,h).arcTo(t+c,h-c,t,h-u,u).closePath()}chamferRect(t,e,r,n,i,o){if(i<=0)return this.rect(t,e,r,n);const l=Math.min(i,Math.min(r,n)/2),a=t+r,h=e+n,c=[t+l,e,a-l,e,a,e+l,a,h-l,a-l,h,t+l,h,t,h-l,t,e+l];for(let u=c.length-1;u>=2;u-=2)c[u]===c[u-2]&&c[u-1]===c[u-3]&&c.splice(u-1,2);return this.poly(c,!0,o)}ellipse(t,e,r,n,i){return this.drawShape(new JC(t,e,r,n),i),this}roundRect(t,e,r,n,i,o){return this.drawShape(new rR(t,e,r,n,i),o),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let r=this._currentPoly;return r&&this.endPoly(),r=new rc,r.points.push(t,e),this._currentPoly=r,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new rc,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let r=e.shape.x,n=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const i=e.transform,o=r;r=i.a*r+i.c*n+i.tx,n=i.b*o+i.d*n+i.ty}this._currentPoly.points.push(r,n)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const r=t.instructions[e];this[r.action](...r.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let r=0;r<e.length;r++){const n=e[r],i=n.shape.getBounds(MI);n.transform?t.addRect(i,n.transform):t.addRect(i)}return t}}class ta{constructor(t,e=!1){this.instructions=[],this.uid=Me("graphicsPath"),this._dirty=!0,this.checkForHoles=e,typeof t=="string"?ZC(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new PI(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,r,n,i){const o=this.instructions[this.instructions.length-1],l=this.getLastPoint(_s.shared);let a=0,h=0;if(!o||o.action!=="bezierCurveTo")a=l.x,h=l.y;else{a=o.data[2],h=o.data[3];const c=l.x,u=l.y;a=c+(c-a),h=u+(u-h)}return this.instructions.push({action:"bezierCurveTo",data:[a,h,t,e,r,n,i]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,r){const n=this.instructions[this.instructions.length-1],i=this.getLastPoint(_s.shared);let o=0,l=0;if(!n||n.action!=="quadraticCurveTo")o=i.x,l=i.y;else{o=n.data[0],l=n.data[1];const a=i.x,h=i.y;o=a+(a-o),l=h+(h-l)}return this.instructions.push({action:"quadraticCurveTo",data:[o,l,t,e,r]}),this._dirty=!0,this}rect(t,e,r,n,i){return this.instructions.push({action:"rect",data:[t,e,r,n,i]}),this._dirty=!0,this}circle(t,e,r,n){return this.instructions.push({action:"circle",data:[t,e,r,n]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,r,n,i,o,l){i||(i=n/2);const a=-1*Math.PI/2+o,h=r*2,c=Math.PI*2/h,u=[];for(let d=0;d<h;d++){const f=d%2?i:n,m=d*c+a;u.push(t+f*Math.cos(m),e+f*Math.sin(m))}return this.poly(u,!0,l),this}clone(t=!1){const e=new ta;if(e.checkForHoles=this.checkForHoles,!t)e.instructions=this.instructions.slice();else for(let r=0;r<this.instructions.length;r++){const n=this.instructions[r];e.instructions.push({action:n.action,data:n.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,r=t.b,n=t.c,i=t.d,o=t.tx,l=t.ty;let a=0,h=0,c=0,u=0,d=0,f=0,m=0,g=0;for(let p=0;p<this.instructions.length;p++){const y=this.instructions[p],x=y.data;switch(y.action){case"moveTo":case"lineTo":a=x[0],h=x[1],x[0]=e*a+n*h+o,x[1]=r*a+i*h+l;break;case"bezierCurveTo":c=x[0],u=x[1],d=x[2],f=x[3],a=x[4],h=x[5],x[0]=e*c+n*u+o,x[1]=r*c+i*u+l,x[2]=e*d+n*f+o,x[3]=r*d+i*f+l,x[4]=e*a+n*h+o,x[5]=r*a+i*h+l;break;case"quadraticCurveTo":c=x[0],u=x[1],a=x[2],h=x[3],x[0]=e*c+n*u+o,x[1]=r*c+i*u+l,x[2]=e*a+n*h+o,x[3]=r*a+i*h+l;break;case"arcToSvg":a=x[5],h=x[6],m=x[0],g=x[1],x[0]=e*m+n*g,x[1]=r*m+i*g,x[5]=e*a+n*h+o,x[6]=r*a+i*h+l;break;case"circle":x[4]=xa(x[3],t);break;case"rect":x[4]=xa(x[4],t);break;case"ellipse":x[8]=xa(x[8],t);break;case"roundRect":x[5]=xa(x[5],t);break;case"addPath":x[0].transform(t);break;case"poly":x[2]=xa(x[2],t);break;default:pe("unknown transform action",y.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,r=this.instructions[e];if(!r)return t.x=0,t.y=0,t;for(;r.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;r=this.instructions[e]}switch(r.action){case"moveTo":case"lineTo":t.x=r.data[0],t.y=r.data[1];break;case"quadraticCurveTo":t.x=r.data[2],t.y=r.data[3];break;case"bezierCurveTo":t.x=r.data[4],t.y=r.data[5];break;case"arc":case"arcToSvg":t.x=r.data[5],t.y=r.data[6];break;case"addPath":r.data[0].getLastPoint(t);break}return t}}function xa(s,t){return s?s.prepend(t):t.clone()}function ye(s,t,e){const r=s.getAttribute(t);return r?Number(r):e}function FI(s,t){const e=s.querySelectorAll("defs");for(let r=0;r<e.length;r++){const n=e[r];for(let i=0;i<n.children.length;i++){const o=n.children[i];switch(o.nodeName.toLowerCase()){case"lineargradient":t.defs[o.id]=BI(o);break;case"radialgradient":t.defs[o.id]=kI();break}}}}function BI(s){const t=ye(s,"x1",0),e=ye(s,"y1",0),r=ye(s,"x2",1),n=ye(s,"y2",0),i=s.getAttribute("gradientUnits")||"objectBoundingBox",o=new zr(t,e,r,n,i==="objectBoundingBox"?"local":"global");for(let l=0;l<s.children.length;l++){const a=s.children[l],h=ye(a,"offset",0),c=Pe.shared.setValue(a.getAttribute("stop-color")).toNumber();o.addColorStop(h,c)}return o}function kI(s){return pe("[SVG Parser] Radial gradients are not yet supported"),new zr(0,0,1,0)}function Gp(s){const t=s.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const $p={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function T_(s,t){const e=s.getAttribute("style"),r={},n={},i={strokeStyle:r,fillStyle:n,useFill:!1,useStroke:!1};for(const o in $p){const l=s.getAttribute(o);l&&Xp(t,i,o,l.trim())}if(e){const o=e.split(";");for(let l=0;l<o.length;l++){const a=o[l].trim(),[h,c]=a.split(":");$p[h]&&Xp(t,i,h,c.trim())}}return{strokeStyle:i.useStroke?r:null,fillStyle:i.useFill?n:null,useFill:i.useFill,useStroke:i.useStroke}}function Xp(s,t,e,r){switch(e){case"stroke":if(r!=="none"){if(r.startsWith("url(")){const n=Gp(r);t.strokeStyle.fill=s.defs[n]}else t.strokeStyle.color=Pe.shared.setValue(r).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(r);break;case"fill":if(r!=="none"){if(r.startsWith("url(")){const n=Gp(r);t.fillStyle.fill=s.defs[n]}else t.fillStyle.color=Pe.shared.setValue(r).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(r);break;case"stroke-opacity":t.strokeStyle.alpha=Number(r);break;case"opacity":t.fillStyle.alpha=Number(r),t.strokeStyle.alpha=Number(r);break}}function NI(s,t){if(typeof s=="string"){const o=document.createElement("div");o.innerHTML=s.trim(),s=o.querySelector("svg")}const e={context:t,defs:{},path:new ta};FI(s,e);const r=s.children,{fillStyle:n,strokeStyle:i}=T_(s,e);for(let o=0;o<r.length;o++){const l=r[o];l.nodeName.toLowerCase()!=="defs"&&C_(l,e,n,i)}return t}function C_(s,t,e,r){const n=s.children,{fillStyle:i,strokeStyle:o}=T_(s,t);i&&e?e={...e,...i}:i&&(e=i),o&&r?r={...r,...o}:o&&(r=o);const l=!e&&!r;l&&(e={color:0});let a,h,c,u,d,f,m,g,p,y,x,_,A,b,w,v,R;switch(s.nodeName.toLowerCase()){case"path":b=s.getAttribute("d"),s.getAttribute("fill-rule")==="evenodd"&&pe("SVG Evenodd fill rule not supported, your svg may render incorrectly"),w=new ta(b,!0),t.context.path(w),e&&t.context.fill(e),r&&t.context.stroke(r);break;case"circle":m=ye(s,"cx",0),g=ye(s,"cy",0),p=ye(s,"r",0),t.context.ellipse(m,g,p,p),e&&t.context.fill(e),r&&t.context.stroke(r);break;case"rect":a=ye(s,"x",0),h=ye(s,"y",0),v=ye(s,"width",0),R=ye(s,"height",0),y=ye(s,"rx",0),x=ye(s,"ry",0),y||x?t.context.roundRect(a,h,v,R,y||x):t.context.rect(a,h,v,R),e&&t.context.fill(e),r&&t.context.stroke(r);break;case"ellipse":m=ye(s,"cx",0),g=ye(s,"cy",0),y=ye(s,"rx",0),x=ye(s,"ry",0),t.context.beginPath(),t.context.ellipse(m,g,y,x),e&&t.context.fill(e),r&&t.context.stroke(r);break;case"line":c=ye(s,"x1",0),u=ye(s,"y1",0),d=ye(s,"x2",0),f=ye(s,"y2",0),t.context.beginPath(),t.context.moveTo(c,u),t.context.lineTo(d,f),r&&t.context.stroke(r);break;case"polygon":A=s.getAttribute("points"),_=A.match(/\d+/g).map(P=>parseInt(P,10)),t.context.poly(_,!0),e&&t.context.fill(e),r&&t.context.stroke(r);break;case"polyline":A=s.getAttribute("points"),_=A.match(/\d+/g).map(P=>parseInt(P,10)),t.context.poly(_,!1),r&&t.context.stroke(r);break;case"g":case"svg":break;default:{pe(`[SVG parser] <${s.nodeName}> elements unsupported`);break}}l&&(e=null);for(let P=0;P<n.length;P++)C_(n[P],t,e,r)}function OI(s){return Pe.isColorLike(s)}function Hp(s){return s instanceof nh}function Yp(s){return s instanceof zr}function LI(s){return s instanceof Gt}function VI(s,t,e){const r=Pe.shared.setValue(t??0);return s.color=r.toNumber(),s.alpha=r.alpha===1?e.alpha:r.alpha,s.texture=Gt.WHITE,{...e,...s}}function UI(s,t,e){return s.texture=t,{...e,...s}}function jp(s,t,e){return s.fill=t,s.color=16777215,s.texture=t.texture,s.matrix=t.transform,{...e,...s}}function zp(s,t,e){return t.buildGradient(),s.fill=t,s.color=16777215,s.texture=t.texture,s.matrix=t.transform,s.textureSpace=t.textureSpace,{...e,...s}}function DI(s,t){const e={...t,...s},r=Pe.shared.setValue(e.color);return e.alpha*=r.alpha,e.color=r.toNumber(),e}function ti(s,t){if(s==null)return null;const e={},r=s;return OI(s)?VI(e,s,t):LI(s)?UI(e,s,t):Hp(s)?jp(e,s,t):Yp(s)?zp(e,s,t):r.fill&&Hp(r.fill)?jp(r,r.fill,t):r.fill&&Yp(r.fill)?zp(r,r.fill,t):DI(r,t)}function Cl(s,t){const{width:e,alignment:r,miterLimit:n,cap:i,join:o,pixelLine:l,...a}=t,h=ti(s,a);return h?{width:e,alignment:r,miterLimit:n,cap:i,join:o,pixelLine:l,...h}:null}const GI=new _s,Wp=new Xt,lf=class br extends xr{constructor(){super(...arguments),this.uid=Me("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new ta,this._transform=new Xt,this._fillStyle={...br.defaultFillStyle},this._strokeStyle={...br.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new jr,this._boundsDirty=!0}clone(){const t=new br;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=ti(t,br.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=Cl(t,br.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=ti(t,br.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=ti(t,br.defaultStrokeStyle),this}texture(t,e,r,n,i,o){return this.instructions.push({action:"texture",data:{image:t,dx:r||0,dy:n||0,dw:i||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Pe.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new ta,this}fill(t,e){let r;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="stroke"?r=n.data.path:r=this._activePath.clone(),r?(t!=null&&(e!==void 0&&typeof t=="number"&&(oe(Le,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=ti(t,br.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(_s.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="fill"?e=r.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=Cl(t,br.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],r=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(r);else{e.data.hole=r;break}}return this._initNextPathLocation(),this}arc(t,e,r,n,i,o){this._tick++;const l=this._transform;return this._activePath.arc(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,r,n,i,o),this}arcTo(t,e,r,n,i){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*r+o.c*n+o.tx,o.b*r+o.d*n+o.ty,i),this}arcToSvg(t,e,r,n,i,o,l){this._tick++;const a=this._transform;return this._activePath.arcToSvg(t,e,r,n,i,a.a*o+a.c*l+a.tx,a.b*o+a.d*l+a.ty),this}bezierCurveTo(t,e,r,n,i,o,l){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*r+a.c*n+a.tx,a.b*r+a.d*n+a.ty,a.a*i+a.c*o+a.tx,a.b*i+a.d*o+a.ty,l),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,r,n){return this._tick++,this._activePath.ellipse(t,e,r,n,this._transform.clone()),this}circle(t,e,r){return this._tick++,this._activePath.circle(t,e,r,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const r=this._transform;return this._activePath.lineTo(r.a*t+r.c*e+r.tx,r.b*t+r.d*e+r.ty),this}moveTo(t,e){this._tick++;const r=this._transform,n=this._activePath.instructions,i=r.a*t+r.c*e+r.tx,o=r.b*t+r.d*e+r.ty;return n.length===1&&n[0].action==="moveTo"?(n[0].data[0]=i,n[0].data[1]=o,this):(this._activePath.moveTo(i,o),this)}quadraticCurveTo(t,e,r,n,i){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*r+o.c*n+o.tx,o.b*r+o.d*n+o.ty,i),this}rect(t,e,r,n){return this._tick++,this._activePath.rect(t,e,r,n,this._transform.clone()),this}roundRect(t,e,r,n,i){return this._tick++,this._activePath.roundRect(t,e,r,n,i,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,r,n,i=0,o){return this._tick++,this._activePath.regularPoly(t,e,r,n,i,o),this}roundPoly(t,e,r,n,i,o){return this._tick++,this._activePath.roundPoly(t,e,r,n,i,o),this}roundShape(t,e,r,n){return this._tick++,this._activePath.roundShape(t,e,r,n),this}filletRect(t,e,r,n,i){return this._tick++,this._activePath.filletRect(t,e,r,n,i),this}chamferRect(t,e,r,n,i,o){return this._tick++,this._activePath.chamferRect(t,e,r,n,i,o),this}star(t,e,r,n,i=0,o=0){return this._tick++,this._activePath.star(t,e,r,n,i,o,this._transform.clone()),this}svg(t){return this._tick++,NI(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,r,n,i,o){return t instanceof Xt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,r,n,i,o),this)}transform(t,e,r,n,i,o){return t instanceof Xt?(this._transform.append(t),this):(Wp.set(t,e,r,n,i,o),this._transform.append(Wp),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const r=this.instructions[e],n=r.action;if(n==="fill"){const i=r.data;t.addBounds(i.path.bounds)}else if(n==="texture"){const i=r.data;t.addFrame(i.dx,i.dy,i.dx+i.dw,i.dy+i.dh,i.transform)}if(n==="stroke"){const i=r.data,o=i.style.alignment,l=i.style.width*(1-o),a=i.path.bounds;t.addFrame(a.minX-l,a.minY-l,a.maxX+l,a.maxY+l)}}return t}containsPoint(t){var n;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let r=!1;for(let i=0;i<e.length;i++){const o=e[i],l=o.data,a=l.path;if(!o.action||!a)continue;const h=l.style,c=a.shapePath.shapePrimitives;for(let u=0;u<c.length;u++){const d=c[u].shape;if(!h||!d)continue;const f=c[u].transform,m=f?f.applyInverse(t,GI):t;if(o.action==="fill")r=d.contains(m.x,m.y);else{const p=h;r=d.strokeContains(m.x,m.y,p.width,p.alignment)}const g=l.hole;if(g){const p=(n=g.shapePath)==null?void 0:n.shapePrimitives;if(p)for(let y=0;y<p.length;y++)p[y].shape.contains(m.x,m.y)&&(r=!1)}if(r)return!0}}return r}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const r=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(r),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(r)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};lf.defaultFillStyle={color:16777215,alpha:1,texture:Gt.WHITE,matrix:null,fill:null,textureSpace:"local"};lf.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Gt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Yn=lf;const qp=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function $I(s){const t=[];let e=0;for(let r=0;r<qp.length;r++){const n=`_${qp[r]}`;t[e++]=s[n]}return e=R_(s._fill,t,e),e=XI(s._stroke,t,e),e=HI(s.dropShadow,t,e),t.join("-")}function R_(s,t,e){var r;return s&&(t[e++]=s.color,t[e++]=s.alpha,t[e++]=(r=s.fill)==null?void 0:r.styleKey),e}function XI(s,t,e){return s&&(e=R_(s,t,e),t[e++]=s.width,t[e++]=s.alignment,t[e++]=s.cap,t[e++]=s.join,t[e++]=s.miterLimit),e}function HI(s,t,e){return s&&(t[e++]=s.alpha,t[e++]=s.angle,t[e++]=s.blur,t[e++]=s.distance,t[e++]=Pe.shared.setValue(s.color).toNumber()),e}const hf=class Ti extends xr{constructor(t={}){super(),YI(t);const e={...Ti.defaultTextStyle,...t};for(const r in e){const n=r;this[n]=e[r]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...Ti.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...Ti.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...Yn.defaultFillStyle,...t},()=>{this._fill=ti({...this._originalFill},Yn.defaultFillStyle)})),this._fill=ti(t===0?"black":t,Yn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...Yn.defaultStrokeStyle,...t},()=>{this._stroke=Cl({...this._originalStroke},Yn.defaultStrokeStyle)})),this._stroke=Cl(t,Yn.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=$I(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=Ti.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Ti({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var r,n,i,o;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const l=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(r=this._fill)!=null&&r.texture&&this._fill.texture.destroy(l),(n=this._originalFill)!=null&&n.texture&&this._originalFill.texture.destroy(l),(i=this._stroke)!=null&&i.texture&&this._stroke.texture.destroy(l),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(l)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(r,n,i)=>(r[n]=i,e==null||e(n,i),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Pe.isColorLike(t)||t instanceof zr||t instanceof nh)}};hf.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};hf.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let eo=hf;function YI(s){const t=s;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=eo.defaultDropShadow;s.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){oe(Le,"strokeThickness is now a part of stroke");const e=t.stroke;let r={};if(Pe.isColorLike(e))r.color=e;else if(e instanceof zr||e instanceof nh)r.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))r=e;else throw new Error("Invalid stroke value.");s.stroke={...r,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){oe(Le,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;s.fontSize==null?s.fontSize=eo.defaultTextStyle.fontSize:typeof s.fontSize=="string"?e=parseInt(s.fontSize,10):e=s.fontSize;const r=new zr({start:{x:0,y:0},end:{x:0,y:(e||0)*1.7}}),n=t.fillGradientStops.map(i=>Pe.shared.setValue(i).toNumber());n.forEach((i,o)=>{const l=o/(n.length-1);r.addColorStop(l,i)}),s.fill={fill:r}}}class jI{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const r=Ae.get().createCanvas();r.width=t,r.height=e;const n=r.getContext("2d");return{canvas:r,context:n}}getOptimalCanvasAndContext(t,e,r=1){t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),t=Sl(t),e=Sl(e);const n=(t<<17)+(e<<1);this._canvasPool[n]||(this._canvasPool[n]=[]);let i=this._canvasPool[n].pop();return i||(i=this._createCanvasAndContext(t,e)),i}returnCanvasAndContext(t){const e=t.canvas,{width:r,height:n}=e,i=(r<<17)+(n<<1);t.context.clearRect(0,0,r,n),this._canvasPool[i].push(t)}clear(){this._canvasPool={}}}const Kp=new jI,zI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function nd(s){const t=typeof s.fontSize=="number"?`${s.fontSize}px`:s.fontSize;let e=s.fontFamily;Array.isArray(s.fontFamily)||(e=s.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!zI.includes(n)&&(n=`"${n}"`),e[r]=n}return`${s.fontStyle} ${s.fontVariant} ${s.fontWeight} ${t} ${e.join(",")}`}const cc={willReadFrequently:!0},_r=class yt{static get experimentalLetterSpacingSupported(){let t=yt._experimentalLetterSpacingSupported;if(t!==void 0){const e=Ae.get().getCanvasRenderingContext2D().prototype;t=yt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,n,i,o,l,a,h){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=l,this.maxLineWidth=a,this.fontProperties=h}static measureText(t=" ",e,r=yt._canvas,n=e.wordWrap){var x;const i=`${t}:${e.styleKey}`;if(yt._measurementCache[i])return yt._measurementCache[i];const o=nd(e),l=yt.measureFont(o);l.fontSize===0&&(l.fontSize=e.fontSize,l.ascent=e.fontSize);const a=yt.__context;a.font=o;const c=(n?yt._wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),u=new Array(c.length);let d=0;for(let _=0;_<c.length;_++){const A=yt._measureText(c[_],e.letterSpacing,a);u[_]=A,d=Math.max(d,A)}const f=((x=e._stroke)==null?void 0:x.width)||0;let m=d+f;e.dropShadow&&(m+=e.dropShadow.distance);const g=e.lineHeight||l.fontSize;let p=Math.max(g,l.fontSize+f)+(c.length-1)*(g+e.leading);return e.dropShadow&&(p+=e.dropShadow.distance),new yt(t,e,m,p,c,u,g+e.leading,d,l)}static _measureText(t,e,r){let n=!1;yt.experimentalLetterSpacingSupported&&(yt.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));const i=r.measureText(t);let o=i.width;const l=-i.actualBoundingBoxLeft;let h=i.actualBoundingBoxRight-l;if(o>0)if(n)o-=e,h-=e;else{const c=(yt.graphemeSegmenter(t).length-1)*e;o+=c,h+=c}return Math.max(o,h)}static _wordWrap(t,e,r=yt._canvas){const n=r.getContext("2d",cc);let i=0,o="",l="";const a=Object.create(null),{letterSpacing:h,whiteSpace:c}=e,u=yt._collapseSpaces(c),d=yt._collapseNewlines(c);let f=!u;const m=e.wordWrapWidth+h,g=yt._tokenize(t);for(let p=0;p<g.length;p++){let y=g[p];if(yt._isNewline(y)){if(!d){l+=yt._addLine(o),f=!u,o="",i=0;continue}y=" "}if(u){const _=yt.isBreakingSpace(y),A=yt.isBreakingSpace(o[o.length-1]);if(_&&A)continue}const x=yt._getFromCache(y,h,a,n);if(x>m)if(o!==""&&(l+=yt._addLine(o),o="",i=0),yt.canBreakWords(y,e.breakWords)){const _=yt.wordWrapSplit(y);for(let A=0;A<_.length;A++){let b=_[A],w=b,v=1;for(;_[A+v];){const P=_[A+v];if(!yt.canBreakChars(w,P,y,A,e.breakWords))b+=P;else break;w=P,v++}A+=v-1;const R=yt._getFromCache(b,h,a,n);R+i>m&&(l+=yt._addLine(o),f=!1,o="",i=0),o+=b,i+=R}}else{o.length>0&&(l+=yt._addLine(o),o="",i=0);const _=p===g.length-1;l+=yt._addLine(y,!_),f=!1,o="",i=0}else x+i>m&&(f=!1,l+=yt._addLine(o),o="",i=0),(o.length>0||!yt.isBreakingSpace(y)||f)&&(o+=y,i+=x)}return l+=yt._addLine(o,!1),l}static _addLine(t,e=!0){return t=yt._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,r,n){let i=r[t];return typeof i!="number"&&(i=yt._measureText(t,e,n)+e,r[t]=i),i}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!yt.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:yt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:yt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let r="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const i=t[n],o=t[n+1];if(yt.isBreakingSpace(i,o)||yt._isNewline(i)){r!==""&&(e.push(r),r=""),e.push(i);continue}r+=i}return r!==""&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,i){return!0}static wordWrapSplit(t){return yt.graphemeSegmenter(t)}static measureFont(t){if(yt._fonts[t])return yt._fonts[t];const e=yt._context;e.font=t;const r=e.measureText(yt.METRICS_STRING+yt.BASELINE_SYMBOL),n={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return yt._fonts[t]=n,n}static clearMetrics(t=""){t?delete yt._fonts[t]:yt._fonts={}}static get _canvas(){if(!yt.__canvas){let t;try{const e=new OffscreenCanvas(0,0),r=e.getContext("2d",cc);if(r!=null&&r.measureText)return yt.__canvas=e,e;t=Ae.get().createCanvas()}catch{t=Ae.get().createCanvas()}t.width=t.height=10,yt.__canvas=t}return yt.__canvas}static get _context(){return yt.__context||(yt.__context=yt._canvas.getContext("2d",cc)),yt.__context}};_r.METRICS_STRING="|q";_r.BASELINE_SYMBOL="M";_r.BASELINE_MULTIPLIER=1.4;_r.HEIGHT_MULTIPLIER=2;_r.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const s=new Intl.Segmenter;return t=>[...s.segment(t)].map(e=>e.segment)}return s=>[...s]})();_r.experimentalLetterSpacing=!1;_r._fonts={};_r._newlines=[10,13];_r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];_r._measurementCache={};let Zp=_r;const Qp=1e5;function Jp(s,t,e,r=0){if(s.texture===Gt.WHITE&&!s.fill)return Pe.shared.setValue(s.color).setAlpha(s.alpha??1).toHexa();if(s.fill){if(s.fill instanceof nh){const n=s.fill,i=t.createPattern(n.texture.source.resource,"repeat"),o=n.transform.copyTo(Xt.shared);return o.scale(n.texture.frame.width,n.texture.frame.height),i.setTransform(o),i}else if(s.fill instanceof zr){const n=s.fill,i=n.type==="linear",o=n.textureSpace==="local";let l=1,a=1;o&&e&&(l=e.width+r,a=e.height+r);let h,c=!1;if(i){const{start:u,end:d}=n;h=t.createLinearGradient(u.x*l,u.y*a,d.x*l,d.y*a),c=Math.abs(d.x-u.x)<Math.abs((d.y-u.y)*.1)}else{const{center:u,innerRadius:d,outerCenter:f,outerRadius:m}=n;h=t.createRadialGradient(u.x*l,u.y*a,d*l,f.x*l,f.y*a,m*l)}if(c&&o&&e){const u=e.lineHeight/a;for(let d=0;d<e.lines.length;d++){const f=(d*e.lineHeight+r/2)/a;n.colorStops.forEach(m=>{const g=f+m.offset*u;h.addColorStop(Math.floor(g*Qp)/Qp,Pe.shared.setValue(m.color).toHex())})}}else n.colorStops.forEach(u=>{h.addColorStop(u.offset,Pe.shared.setValue(u.color).toHex())});return h}}else{const n=t.createPattern(s.texture.source.resource,"repeat"),i=s.matrix.copyTo(Xt.shared);return i.scale(s.texture.frame.width,s.texture.frame.height),n.setTransform(i),n}return pe("FillStyle not recognised",s),"red"}function I_(s){if(s==="")return[];typeof s=="string"&&(s=[s]);const t=[];for(let e=0,r=s.length;e<r;e++){const n=s[e];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);if(n[0].length===0||n[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const i=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<i)throw new Error("[BitmapFont]: Invalid character range.");for(let l=i,a=o;l<=a;l++)t.push(String.fromCharCode(l))}else t.push(...Array.from(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const M_=class P_ extends i_{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...P_.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const r=e.style.clone();e.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=Gt.WHITE,r._fill.fill=null),this.applyFillAsTint=e.overrideFill;const n=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const i=nd(r);e.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/n):r.fontSize=this.baseRenderedFontSize=n,this._style=r,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=Zp.measureFont(i),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(t){var p,y;const e=I_(t).filter(x=>!this._currentChars.includes(x)).filter((x,_,A)=>A.indexOf(x)===_);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let r;this._currentPageIndex===-1?r=this._nextPage():r=this.pages[this._currentPageIndex];let{canvas:n,context:i}=r.canvasAndContext,o=r.texture.source;const l=this._style;let a=this._currentX,h=this._currentY;const c=this.baseRenderedFontSize/this.baseMeasurementFontSize,u=this._padding*c;let d=0,f=!1;const m=n.width/this.resolution,g=n.height/this.resolution;for(let x=0;x<e.length;x++){const _=e[x],A=Zp.measureText(_,l,n,!1);A.lineHeight=A.height;const b=A.width*c,w=Math.ceil((l.fontStyle==="italic"?2:1)*b),v=A.height*c,R=w+u*2,P=v+u*2;if(f=!1,_!==`
`&&_!=="\r"&&_!=="	"&&_!==" "&&(f=!0,d=Math.ceil(Math.max(P,d))),a+R>m&&(h+=d,d=P,a=0,h+d>g)){o.update();const B=this._nextPage();n=B.canvasAndContext.canvas,i=B.canvasAndContext.context,o=B.texture.source,h=0}const F=b/c-(((p=l.dropShadow)==null?void 0:p.distance)??0)-(((y=l._stroke)==null?void 0:y.width)??0);if(this.chars[_]={id:_.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:F,kerning:{}},f){this._drawGlyph(i,A,a+u,h+u,c,l);const B=o.width*c,L=o.height*c,Y=new ss(a/B*o.width,h/L*o.height,R/B*o.width,P/L*o.height);this.chars[_].texture=new Gt({source:o,frame:Y}),a+=Math.ceil(R)}}o.update(),this._currentX=a,this._currentY=h,this._skipKerning&&this._applyKerning(e,i)}get pageTextures(){return oe(Le,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const r=this._measureCache;for(let n=0;n<t.length;n++){const i=t[n];for(let o=0;o<this._currentChars.length;o++){const l=this._currentChars[o];let a=r[i];a||(a=r[i]=e.measureText(i).width);let h=r[l];h||(h=r[l]=e.measureText(l).width);let c=e.measureText(i+l).width,u=c-(a+h);u&&(this.chars[i].kerning[l]=u),c=e.measureText(i+l).width,u=c-(a+h),u&&(this.chars[l].kerning[i]=u)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=Kp.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const r=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),n=new Gt({source:new ii({resource:e.canvas,resolution:r,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),i={canvasAndContext:e,texture:n};return this.pages[this._currentPageIndex]=i,i}_setupContext(t,e,r){e.fontSize=this.baseRenderedFontSize,t.scale(r,r),t.font=nd(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const n=e._stroke,i=(n==null?void 0:n.width)??0;if(n&&(t.lineWidth=i,t.lineJoin=n.join,t.miterLimit=n.miterLimit,t.strokeStyle=Jp(n,t)),e._fill&&(t.fillStyle=Jp(e._fill,t)),e.dropShadow){const o=e.dropShadow,l=Pe.shared.setValue(o.color).toArray(),a=o.blur*r,h=o.distance*r;t.shadowColor=`rgba(${l[0]*255},${l[1]*255},${l[2]*255},${o.alpha})`,t.shadowBlur=a,t.shadowOffsetX=Math.cos(o.angle)*h,t.shadowOffsetY=Math.sin(o.angle)*h}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,r,n,i,o){const l=e.text,a=e.fontProperties,h=o._stroke,c=((h==null?void 0:h.width)??0)*i,u=r+c/2,d=n-c/2,f=a.descent*i,m=e.lineHeight*i;o.stroke&&c&&t.strokeText(l,u,d+m-f),o._fill&&t.fillText(l,u,d+m-f)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:r}=this.pages[t];Kp.returnCanvasAndContext(e),r.destroy(!0)}this.pages=null}};M_.defaultOptions={textureSize:512,style:new eo,mipmap:!0};let tg=M_;function WI(s,t,e,r){const n={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};n.offsetY=e.baseLineOffset;let i=n.lines[0],o=null,l=!0;const a={width:0,start:0,index:0,positions:[],chars:[]},h=m=>{const g=i.width;for(let p=0;p<a.index;p++){const y=m.positions[p];i.chars.push(m.chars[p]),i.charPositions.push(y+g)}i.width+=m.width,l=!1,a.width=0,a.index=0,a.chars.length=0},c=()=>{let m=i.chars.length-1;if(r){let g=i.chars[m];for(;g===" ";)i.width-=e.chars[g].xAdvance,g=i.chars[--m]}n.width=Math.max(n.width,i.width),i={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},l=!0,n.lines.push(i),n.height+=e.lineHeight},u=e.baseMeasurementFontSize/t.fontSize,d=t.letterSpacing*u,f=t.wordWrapWidth*u;for(let m=0;m<s.length+1;m++){let g;const p=m===s.length;p||(g=s[m]);const y=e.chars[g]||e.chars[" "];if(/(?:\s)/.test(g)||g==="\r"||g===`
`||p){if(!l&&t.wordWrap&&i.width+a.width-d>f?(c(),h(a),p||i.charPositions.push(0)):(a.start=i.width,h(a),p||i.charPositions.push(0)),g==="\r"||g===`
`)i.width!==0&&c();else if(!p){const b=y.xAdvance+(y.kerning[o]||0)+d;i.width+=b,i.spaceWidth=b,i.spacesIndex.push(i.charPositions.length),i.chars.push(g)}}else{const A=y.kerning[o]||0,b=y.xAdvance+A+d;a.positions[a.index++]=a.width+A,a.chars.push(g),a.width+=b}o=g}return c(),t.align==="center"?qI(n):t.align==="right"?KI(n):t.align==="justify"&&ZI(n),n}function qI(s){for(let t=0;t<s.lines.length;t++){const e=s.lines[t],r=s.width/2-e.width/2;for(let n=0;n<e.charPositions.length;n++)e.charPositions[n]+=r}}function KI(s){for(let t=0;t<s.lines.length;t++){const e=s.lines[t],r=s.width-e.width;for(let n=0;n<e.charPositions.length;n++)e.charPositions[n]+=r}}function ZI(s){const t=s.width;for(let e=0;e<s.lines.length;e++){const r=s.lines[e];let n=0,i=r.spacesIndex[n++],o=0;const l=r.spacesIndex.length,h=(t-r.width)/l;for(let c=0;c<r.charPositions.length;c++)c===i&&(i=r.spacesIndex[n++],o+=h),r.charPositions[c]+=o}}let Uo=0;class QI{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var o;let r=`${e.fontFamily}-bitmap`,n=!0;if(e._fill.fill&&!e._stroke)r+=e._fill.fill.styleKey,n=!1;else if(e._stroke||e.dropShadow){let l=e.styleKey;l=l.substring(0,l.lastIndexOf("-")),r=`${l}-bitmap`,n=!1}if(!xe.has(r)){const l=new tg({style:e,overrideFill:n,overrideSize:!0,...this.defaultOptions});Uo++,Uo>50&&pe("BitmapText",`You have dynamically created ${Uo} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),l.once("destroy",()=>{Uo--,xe.remove(r)}),xe.set(r,l)}const i=xe.get(r);return(o=i.ensureCharacters)==null||o.call(i,t),i}getLayout(t,e,r=!0){const n=this.getFont(t,e);return WI([...t],e,n,r)}measureText(t,e,r=!0){return this.getLayout(t,e,r)}install(...t){var h,c,u,d;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(h=t[2])==null?void 0:h.chars,resolution:(c=t[2])==null?void 0:c.resolution,padding:(u=t[2])==null?void 0:u.padding,skipKerning:(d=t[2])==null?void 0:d.skipKerning},oe(Le,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const r=e==null?void 0:e.name;if(!r)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const n=e.style,i=n instanceof eo?n:new eo(n),o=i._fill.fill!==null&&i._fill.fill!==void 0,l=new tg({style:i,overrideFill:o,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),a=I_(e.chars);return l.ensureCharacters(a.join("")),xe.set(`${r}-bitmap`,l),l.once("destroy",()=>xe.remove(`${r}-bitmap`)),l}uninstall(t){const e=`${t}-bitmap`,r=xe.get(e);r&&r.destroy()}}const eg=new QI;class F_ extends i_{constructor(t,e){super();const{textures:r,data:n}=t;Object.keys(n.pages).forEach(i=>{const o=n.pages[parseInt(i,10)],l=r[o.id];this.pages.push({texture:l})}),Object.keys(n.chars).forEach(i=>{const o=n.chars[i],{frame:l,source:a}=r[o.page],h=new ss(o.x+l.x,o.y+l.y,o.width,o.height),c=new Gt({source:a,frame:h});this.chars[i]={id:i.codePointAt(0),xOffset:o.xOffset,yOffset:o.yOffset,xAdvance:o.xAdvance,kerning:o.kerning??{},texture:c}}),this.baseRenderedFontSize=n.fontSize,this.baseMeasurementFontSize=n.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:n.fontSize},this.baseLineOffset=n.baseLineOffset,this.lineHeight=n.lineHeight,this.fontFamily=n.fontFamily,this.distanceField=n.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){eg.install(t)}static uninstall(t){eg.uninstall(t)}}const uc={test(s){return typeof s=="string"&&s.startsWith("info face=")},parse(s){const t=s.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const u in t){const d=t[u].match(/^[a-z]+/gm)[0],f=t[u].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const g in f){const p=f[g].split("="),y=p[0],x=p[1].replace(/"/gm,""),_=parseFloat(x),A=isNaN(_)?x:_;m[y]=A}e[d].push(m)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[n]=e.info,[i]=e.common,[o]=e.distanceField??[];o&&(r.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),r.fontSize=parseInt(n.size,10),r.fontFamily=n.face,r.lineHeight=parseInt(i.lineHeight,10);const l=e.page;for(let u=0;u<l.length;u++)r.pages.push({id:parseInt(l[u].id,10)||0,file:l[u].file});const a={};r.baseLineOffset=r.lineHeight-parseInt(i.base,10);const h=e.char;for(let u=0;u<h.length;u++){const d=h[u],f=parseInt(d.id,10);let m=d.letter??d.char??String.fromCharCode(f);m==="space"&&(m=" "),a[f]=m,r.chars[m]={id:f,page:parseInt(d.page,10)||0,x:parseInt(d.x,10),y:parseInt(d.y,10),width:parseInt(d.width,10),height:parseInt(d.height,10),xOffset:parseInt(d.xoffset,10),yOffset:parseInt(d.yoffset,10),xAdvance:parseInt(d.xadvance,10),kerning:{}}}const c=e.kerning||[];for(let u=0;u<c.length;u++){const d=parseInt(c[u].first,10),f=parseInt(c[u].second,10),m=parseInt(c[u].amount,10);r.chars[a[f]].kerning[a[d]]=m}return r}},sg={test(s){const t=s;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(s){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=s.getElementsByTagName("info")[0],r=s.getElementsByTagName("common")[0],n=s.getElementsByTagName("distanceField")[0];n&&(t.distanceField={type:n.getAttribute("fieldType"),range:parseInt(n.getAttribute("distanceRange"),10)});const i=s.getElementsByTagName("page"),o=s.getElementsByTagName("char"),l=s.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let h=0;h<i.length;h++)t.pages.push({id:parseInt(i[h].getAttribute("id"),10)||0,file:i[h].getAttribute("file")});const a={};t.baseLineOffset=t.lineHeight-parseInt(r.getAttribute("base"),10);for(let h=0;h<o.length;h++){const c=o[h],u=parseInt(c.getAttribute("id"),10);let d=c.getAttribute("letter")??c.getAttribute("char")??String.fromCharCode(u);d==="space"&&(d=" "),a[u]=d,t.chars[d]={id:u,page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xOffset:parseInt(c.getAttribute("xoffset"),10),yOffset:parseInt(c.getAttribute("yoffset"),10),xAdvance:parseInt(c.getAttribute("xadvance"),10),kerning:{}}}for(let h=0;h<l.length;h++){const c=parseInt(l[h].getAttribute("first"),10),u=parseInt(l[h].getAttribute("second"),10),d=parseInt(l[h].getAttribute("amount"),10);t.chars[a[u]].kerning[a[c]]=d}return t}},rg={test(s){return typeof s=="string"&&s.includes("<font>")?sg.test(Ae.get().parseXML(s)):!1},parse(s){return sg.parse(Ae.get().parseXML(s))}},JI=[".xml",".fnt"],tM={extension:{type:bt.CacheParser,name:"cacheBitmapFont"},test:s=>s instanceof F_,getCacheableAssets(s,t){const e={};return s.forEach(r=>{e[r]=t,e[`${r}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},eM={extension:{type:bt.LoadParser,priority:In.Normal},name:"loadBitmapFont",test(s){return JI.includes(Is.extname(s).toLowerCase())},async testParse(s){return uc.test(s)||rg.test(s)},async parse(s,t,e){const r=uc.test(s)?uc.parse(s):rg.parse(s),{src:n}=t,{pages:i}=r,o=[],l=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<i.length;++u){const d=i[u].file;let f=Is.join(Is.dirname(n),d);f=Wu(f,n),o.push({src:f,data:l})}const a=await e.load(o),h=o.map(u=>a[u.src]);return new F_({data:r,textures:h},n)},async load(s,t){return await(await Ae.get().fetch(s)).text()},async unload(s,t,e){await Promise.all(s.pages.map(r=>e.unload(r.texture.source._sourceOrigin))),s.destroy()}};let sM=class{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}};const rM={extension:{type:bt.CacheParser,name:"cacheTextureArray"},test:s=>Array.isArray(s)&&s.every(t=>t instanceof Gt),getCacheableAssets:(s,t)=>{const e={};return s.forEach(r=>{t.forEach((n,i)=>{e[r+(i===0?"":i+1)]=n})}),e}};async function B_(s){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(s)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const nM={extension:{type:bt.DetectionParser,priority:1},test:async()=>B_("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(t=>t!=="avif")},ng=["png","jpg","jpeg"],iM={extension:{type:bt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...ng],remove:async s=>s.filter(t=>!ng.includes(t))},aM="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function cf(s){return aM?!1:document.createElement("video").canPlayType(s)!==""}const oM={extension:{type:bt.DetectionParser,priority:0},test:async()=>cf("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(t=>t!=="mp4"&&t!=="m4v")},lM={extension:{type:bt.DetectionParser,priority:0},test:async()=>cf("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(t=>t!=="ogv")},hM={extension:{type:bt.DetectionParser,priority:0},test:async()=>cf("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(t=>t!=="webm")},cM={extension:{type:bt.DetectionParser,priority:0},test:async()=>B_("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(t=>t!=="webp")};let uM=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,r)=>(this._parsersValidated=!1,t[e]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{var o,l;let n=null,i=null;if(e.loadParser&&(i=this._parserHash[e.loadParser],i||pe(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!i){for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];if(h.load&&((o=h.test)!=null&&o.call(h,t,e,this))){i=h;break}}if(!i)return pe(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await i.load(t,e,this),r.parser=i;for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];h.parse&&h.parse&&await((l=h.testParse)==null?void 0:l.call(h,n,e,this))&&(n=await h.parse(n,e,this)||n,r.parser=h)}return n})(),r}async load(t,e){this._parsersValidated||this._validateParsers();let r=0;const n={},i=Tl(t),o=hr(t,h=>({alias:[h],src:h,data:{}})),l=o.length,a=o.map(async h=>{const c=Is.toAbsolute(h.src);if(!n[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),n[h.src]=await this.promiseCache[c].promise,e&&e(++r/l)}catch(u){throw delete this.promiseCache[c],delete n[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(a),i?n[o[0].src]:n}async unload(t){const r=hr(t,n=>({alias:[n],src:n})).map(async n=>{var l,a;const i=Is.toAbsolute(n.src),o=this.promiseCache[i];if(o){const h=await o.promise;delete this.promiseCache[i],await((a=(l=o.parser)==null?void 0:l.unload)==null?void 0:a.call(l,h,n,this))}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&pe(`[Assets] loadParser name conflict "${e.name}"`):pe("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}};function oa(s,t){if(Array.isArray(t)){for(const e of t)if(s.startsWith(`data:${e}`))return!0;return!1}return s.startsWith(`data:${t}`)}function la(s,t){const e=s.split("?")[0],r=Is.extname(e).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const dM=".json",fM="application/json",mM={extension:{type:bt.LoadParser,priority:In.Low},name:"loadJson",test(s){return oa(s,fM)||la(s,dM)},async load(s){return await(await Ae.get().fetch(s)).json()}},pM=".txt",gM="text/plain",yM={name:"loadTxt",extension:{type:bt.LoadParser,priority:In.Low,name:"loadTxt"},test(s){return oa(s,gM)||la(s,pM)},async load(s){return await(await Ae.get().fetch(s)).text()}},xM=["normal","bold","100","200","300","400","500","600","700","800","900"],_M=[".ttf",".otf",".woff",".woff2"],AM=["font/ttf","font/otf","font/woff","font/woff2"],bM=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function vM(s){const t=Is.extname(s),n=Is.basename(s,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1));let i=n.length>0;for(const l of n)if(!l.match(bM)){i=!1;break}let o=n.join(" ");return i||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const wM=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function EM(s){return wM.test(s)?s:encodeURI(s)}const SM={extension:{type:bt.LoadParser,priority:In.Low},name:"loadWebFont",test(s){return oa(s,AM)||la(s,_M)},async load(s,t){var r,n,i;const e=Ae.get().getFontFaceSet();if(e){const o=[],l=((r=t.data)==null?void 0:r.family)??vM(s),a=((i=(n=t.data)==null?void 0:n.weights)==null?void 0:i.filter(c=>xM.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<a.length;c++){const u=a[c],d=new FontFace(l,`url(${EM(s)})`,{...h,weight:u});await d.load(),e.add(d),o.push(d)}return xe.set(`${l}-and-url`,{url:s,fontFaces:o}),o.length===1?o[0]:o}return pe("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(t=>{xe.remove(`${t.family}-and-url`),Ae.get().getFontFaceSet().delete(t)})}};function uf(s,t=1){var r;const e=(r=aa.RETINA_PREFIX)==null?void 0:r.exec(s);return e?parseFloat(e[1]):t}function df(s,t,e){s.label=e,s._sourceOrigin=e;const r=new Gt({source:s,label:e}),n=()=>{delete t.promiseCache[e],xe.has(e)&&xe.remove(e)};return r.source.once("destroy",()=>{t.promiseCache[e]&&(pe("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),n())}),r.once("destroy",()=>{s.destroyed||(pe("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),r}const TM=".svg",CM="image/svg+xml",RM={extension:{type:bt.LoadParser,priority:In.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(s){return oa(s,CM)||la(s,TM)},async load(s,t,e){var r;return((r=t.data)==null?void 0:r.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?MM(s):IM(s,t,e,this.config.crossOrigin)},unload(s){s.destroy(!0)}};async function IM(s,t,e,r){var p,y,x;const i=await(await Ae.get().fetch(s)).blob(),o=URL.createObjectURL(i),l=new Image;l.src=o,l.crossOrigin=r,await l.decode(),URL.revokeObjectURL(o);const a=document.createElement("canvas"),h=a.getContext("2d"),c=((p=t.data)==null?void 0:p.resolution)||uf(s),u=((y=t.data)==null?void 0:y.width)??l.width,d=((x=t.data)==null?void 0:x.height)??l.height;a.width=u*c,a.height=d*c,h.drawImage(l,0,0,u*c,d*c);const{parseAsGraphicsContext:f,...m}=t.data??{},g=new ii({resource:a,alphaMode:"premultiply-alpha-on-upload",resolution:c,...m});return df(g,e,s)}async function MM(s){const e=await(await Ae.get().fetch(s)).text(),r=new Yn;return r.svg(e),r}const PM=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Xi=null,id=class{constructor(){Xi||(Xi=URL.createObjectURL(new Blob([PM],{type:"application/javascript"}))),this.worker=new Worker(Xi)}};id.revokeObjectURL=function(){Xi&&(URL.revokeObjectURL(Xi),Xi=null)};const FM=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Hi=null,k_=class{constructor(){Hi||(Hi=URL.createObjectURL(new Blob([FM],{type:"application/javascript"}))),this.worker=new Worker(Hi)}};k_.revokeObjectURL=function(){Hi&&(URL.revokeObjectURL(Hi),Hi=null)};let ig=0,dc,BM=class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new id;e.addEventListener("message",r=>{e.terminate(),id.revokeObjectURL(),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var r;return this._run("loadImageBitmap",[t,(r=e==null?void 0:e.data)==null?void 0:r.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){dc===void 0&&(dc=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<dc&&(this._createdWorkers++,t=new k_().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise((n,i)=>{this._queue.push({id:t,arguments:e,resolve:n,reject:i})});return this._next(),r}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),r=e.id;this._resolveHash[ig]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:ig++,id:r})}};const ag=new BM,kM=[".jpeg",".jpg",".png",".webp",".avif"],NM=["image/jpeg","image/png","image/webp","image/avif"];async function OM(s,t){var n;const e=await Ae.get().fetch(s);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${e.status} ${e.statusText}`);const r=await e.blob();return((n=t==null?void 0:t.data)==null?void 0:n.alphaMode)==="premultiplied-alpha"?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}const N_={name:"loadTextures",extension:{type:bt.LoadParser,priority:In.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return oa(s,NM)||la(s,kM)},async load(s,t,e){var i;let r=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ag.isImageBitmapSupported()?r=await ag.loadImageBitmap(s,t):r=await OM(s,t):r=await new Promise((o,l)=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=s,r.complete?o(r):(r.onload=()=>{o(r)},r.onerror=l)});const n=new ii({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:((i=t.data)==null?void 0:i.resolution)||uf(s),...t.data});return df(n,e,s)},unload(s){s.destroy(!0)}},O_=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],LM=O_.map(s=>`video/${s.substring(1)}`);function VM(s,t,e){e===void 0&&!t.startsWith("data:")?s.crossOrigin=DM(t):e!==!1&&(s.crossOrigin=typeof e=="string"?e:"anonymous")}function UM(s){return new Promise((t,e)=>{s.addEventListener("canplaythrough",r),s.addEventListener("error",n),s.load();function r(){i(),t()}function n(o){i(),e(o)}function i(){s.removeEventListener("canplaythrough",r),s.removeEventListener("error",n)}})}function DM(s,t=globalThis.location){if(s.startsWith("data:"))return"";t||(t=globalThis.location);const e=new URL(s,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const GM={name:"loadVideo",extension:{type:bt.LoadParser,name:"loadVideo"},test(s){const t=oa(s,LM),e=la(s,O_);return t||e},async load(s,t,e){var a,h;const r={...nl.defaultOptions,resolution:((a=t.data)==null?void 0:a.resolution)||uf(s),alphaMode:((h=t.data)==null?void 0:h.alphaMode)||await O0(),...t.data},n=document.createElement("video"),i={preload:r.autoLoad!==!1?"auto":void 0,"webkit-playsinline":r.playsinline!==!1?"":void 0,playsinline:r.playsinline!==!1?"":void 0,muted:r.muted===!0?"":void 0,loop:r.loop===!0?"":void 0,autoplay:r.autoPlay!==!1?"":void 0};Object.keys(i).forEach(c=>{const u=i[c];u!==void 0&&n.setAttribute(c,u)}),r.muted===!0&&(n.muted=!0),VM(n,s,r.crossorigin);const o=document.createElement("source");let l;if(s.startsWith("data:"))l=s.slice(5,s.indexOf(";"));else if(!s.startsWith("blob:")){const c=s.split("?")[0].slice(s.lastIndexOf(".")+1).toLowerCase();l=nl.MIME_TYPES[c]||`video/${c}`}return o.src=s,l&&(o.type=l),new Promise(c=>{const u=async()=>{const d=new nl({...r,resource:n});n.removeEventListener("canplay",u),t.data.preload&&await UM(n),c(df(d,e,s))};n.addEventListener("canplay",u),n.appendChild(o)})},unload(s){s.destroy(!0)}},L_={extension:{type:bt.ResolveParser,name:"resolveTexture"},test:N_.test,parse:s=>{var t;return{resolution:parseFloat(((t=aa.RETINA_PREFIX.exec(s))==null?void 0:t[1])??"1"),format:s.split(".").pop(),src:s}}},$M={extension:{type:bt.ResolveParser,priority:-2,name:"resolveJson"},test:s=>aa.RETINA_PREFIX.test(s)&&s.endsWith(".json"),parse:L_.parse};let XM=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new aa,this.loader=new uM,this.cache=xe,this._backgroundLoader=new sM(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var i,o;if(this._initialized){pe("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((i=t.texturePreference)==null?void 0:i.resolution)??1,r=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:r}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const r=Tl(t),n=hr(t).map(l=>{if(typeof l!="string"){const a=this.resolver.getAlias(l);return a.some(h=>!this.resolver.hasKey(h))&&this.add(l),Array.isArray(a)?a[0]:a}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),i=this.resolver.resolve(n),o=await this._mapLoadToResolve(i,e);return r?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;typeof t=="string"&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),i={},o=Object.keys(n);let l=0,a=0;const h=()=>{e==null||e(++l/a)},c=o.map(u=>{const d=n[u];return a+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{i[u]=f})});return await Promise.all(c),r?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return xe.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=xe.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const n=await this.loader.load(r,e);this._backgroundLoader.active=!0;const i={};return r.forEach(o=>{const l=n[o.src],a=[o.src];o.alias&&a.push(...o.alias),a.forEach(h=>{i[h]=l}),xe.set(a,l)}),i}async unload(t){this._initialized||await this.init();const e=hr(t).map(n=>typeof n!="string"?n.src:n),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=hr(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(r=>{xe.remove(r.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const r of t.detections)t.skipDetections||await r.test()?e=await r.add(e):t.skipDetections||(e=await r.remove(e));return e=e.filter((r,n)=>e.indexOf(r)===n),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(r=>r in t).forEach(r=>{e.config[r]=t[r]})})}};const Bi=new XM;Ze.handleByList(bt.LoadParser,Bi.loader.parsers).handleByList(bt.ResolveParser,Bi.resolver.parsers).handleByList(bt.CacheParser,Bi.cache.parsers).handleByList(bt.DetectionParser,Bi.detections);Ze.add(rM,iM,nM,cM,oM,lM,hM,mM,yM,SM,RM,N_,GM,eM,tM,L_,$M);const og={loader:bt.LoadParser,resolver:bt.ResolveParser,cache:bt.CacheParser,detection:bt.DetectionParser};Ze.handle(bt.Asset,s=>{const t=s.ref;Object.entries(og).filter(([e])=>!!t[e]).forEach(([e,r])=>Ze.add(Object.assign(t[e],{extension:t[e].extension??r})))},s=>{const t=s.ref;Object.keys(og).filter(e=>!!t[e]).forEach(e=>Ze.remove(t[e]))});Ze.add(fT,mT);var Bt=(s=>(s[s.Region=0]="Region",s[s.BoundingBox=1]="BoundingBox",s[s.Mesh=2]="Mesh",s[s.LinkedMesh=3]="LinkedMesh",s[s.Path=4]="Path",s[s.Point=5]="Point",s[s.Clipping=6]="Clipping",s))(Bt||{});class Rl{constructor(t,e=new Array,r=0,n=new DataView(t.buffer)){this.strings=e,this.index=r,this.buffer=n}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){const t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),r=e&127;return(e&128)!=0&&(e=this.readByte(),r|=(e&127)<<7,(e&128)!=0&&(e=this.readByte(),r|=(e&127)<<14,(e&128)!=0&&(e=this.readByte(),r|=(e&127)<<21,(e&128)!=0&&(e=this.readByte(),r|=(e&127)<<28)))),t?r:r>>>1^-(r&1)}readStringRef(){const t=this.readInt(!0);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let r=0;r<t;){const n=this.readUnsignedByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((n&31)<<6|this.readByte()&63),r+=2;break;case 14:e+=String.fromCharCode((n&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),r+=3;break;default:e+=String.fromCharCode(n),r++}}return e}readFloat(){const t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}}var M=(s=>(s[s.setup=0]="setup",s[s.first=1]="first",s[s.replace=2]="replace",s[s.add=3]="add",s))(M||{}),_e=(s=>(s[s.mixIn=0]="mixIn",s[s.mixOut=1]="mixOut",s))(_e||{}),Ve=(s=>(s[s.Fixed=0]="Fixed",s[s.Percent=1]="Percent",s))(Ve||{}),Xs=(s=>(s[s.Tangent=0]="Tangent",s[s.Chain=1]="Chain",s[s.ChainScale=2]="ChainScale",s))(Xs||{}),Re=(s=>(s[s.Normal=0]="Normal",s[s.OnlyTranslation=1]="OnlyTranslation",s[s.NoRotationOrReflection=2]="NoRotationOrReflection",s[s.NoScale=3]="NoScale",s[s.NoScaleOrReflection=4]="NoScaleOrReflection",s))(Re||{}),ci=(s=>(s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2",s))(ci||{}),V_=(s=>(s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS",s))(V_||{}),ad=(s=>(s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL",s))(ad||{}),ft=(s=>(s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR",s))(ft||{}),dr=(s=>(s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",s))(dr||{}),ut=(s=>(s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL",s))(ut||{}),Yi=(s=>(s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",s))(Yi||{}),Ft=(s=>(s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT",s))(Ft||{}),dt=(s=>(s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT",s))(dt||{}),Rs=(s=>(s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR",s))(Rs||{}),so=(s=>(s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",s))(so||{}),wn=(s=>(s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL",s))(wn||{}),Vs=(s=>(s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",s))(Vs||{}),jn=(s=>(s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT",s))(jn||{}),ff=(s=>(s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL",s))(ff||{}),Us=(s=>(s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp",s))(Us||{}),Oe=(s=>(s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR",s))(Oe||{}),Ce=(s=>(s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH",s))(Ce||{}),Cr=(s=>(s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",s))(Cr||{});const HM={createCanvas:(s,t)=>{const e=document.createElement("canvas");return e.width=s,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")},Et={ADAPTER:HM,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},YM=mp.default??mp,ki=YM(globalThis.navigator);Et.RETINA_PREFIX=/@([0-9\.]+)x/;Et.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var fc={exports:{}},lg;function jM(){return lg||(lg=1,function(s){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function n(a,h,c){this.fn=a,this.context=h,this.once=c||!1}function i(a,h,c,u,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new n(c,u||a,d),m=e?e+h:h;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],f]:a._events[m].push(f):(a._events[m]=f,a._eventsCount++),a}function o(a,h){--a._eventsCount===0?a._events=new r:delete a._events[h]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],c,u;if(this._eventsCount===0)return h;for(u in c=this._events)t.call(c,u)&&h.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(c)):h},l.prototype.listeners=function(h){var c=e?e+h:h,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,m=new Array(f);d<f;d++)m[d]=u[d].fn;return m},l.prototype.listenerCount=function(h){var c=e?e+h:h,u=this._events[c];return u?u.fn?1:u.length:0},l.prototype.emit=function(h,c,u,d,f,m){var g=e?e+h:h;if(!this._events[g])return!1;var p=this._events[g],y=arguments.length,x,_;if(p.fn){switch(p.once&&this.removeListener(h,p.fn,void 0,!0),y){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,c),!0;case 3:return p.fn.call(p.context,c,u),!0;case 4:return p.fn.call(p.context,c,u,d),!0;case 5:return p.fn.call(p.context,c,u,d,f),!0;case 6:return p.fn.call(p.context,c,u,d,f,m),!0}for(_=1,x=new Array(y-1);_<y;_++)x[_-1]=arguments[_];p.fn.apply(p.context,x)}else{var A=p.length,b;for(_=0;_<A;_++)switch(p[_].once&&this.removeListener(h,p[_].fn,void 0,!0),y){case 1:p[_].fn.call(p[_].context);break;case 2:p[_].fn.call(p[_].context,c);break;case 3:p[_].fn.call(p[_].context,c,u);break;case 4:p[_].fn.call(p[_].context,c,u,d);break;default:if(!x)for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];p[_].fn.apply(p[_].context,x)}}return!0},l.prototype.on=function(h,c,u){return i(this,h,c,u,!1)},l.prototype.once=function(h,c,u){return i(this,h,c,u,!0)},l.prototype.removeListener=function(h,c,u,d){var f=e?e+h:h;if(!this._events[f])return this;if(!c)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===c&&(!d||m.once)&&(!u||m.context===u)&&o(this,f);else{for(var g=0,p=[],y=m.length;g<y;g++)(m[g].fn!==c||d&&!m[g].once||u&&m[g].context!==u)&&p.push(m[g]);p.length?this._events[f]=p.length===1?p[0]:p:o(this,f)}return this},l.prototype.removeAllListeners=function(h){var c;return h?(c=e?e+h:h,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,s.exports=l}(fc)),fc.exports}var zM=jM();const ah=eh(zM);var Ln={},Ra={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var WM=Ra.exports,hg;function qM(){return hg||(hg=1,function(s,t){(function(e){var r=t&&!t.nodeType&&t,n=s&&!s.nodeType&&s,i=typeof El=="object"&&El;(i.global===i||i.window===i||i.self===i)&&(e=i);var o,l=2147483647,a=36,h=1,c=26,u=38,d=700,f=72,m=128,g="-",p=/^xn--/,y=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=a-h,b=Math.floor,w=String.fromCharCode,v;function R(N){throw new RangeError(_[N])}function P(N,V){for(var G=N.length,X=[];G--;)X[G]=V(N[G]);return X}function F(N,V){var G=N.split("@"),X="";G.length>1&&(X=G[0]+"@",N=G[1]),N=N.replace(x,".");var tt=N.split("."),st=P(tt,V).join(".");return X+st}function B(N){for(var V=[],G=0,X=N.length,tt,st;G<X;)tt=N.charCodeAt(G++),tt>=55296&&tt<=56319&&G<X?(st=N.charCodeAt(G++),(st&64512)==56320?V.push(((tt&1023)<<10)+(st&1023)+65536):(V.push(tt),G--)):V.push(tt);return V}function L(N){return P(N,function(V){var G="";return V>65535&&(V-=65536,G+=w(V>>>10&1023|55296),V=56320|V&1023),G+=w(V),G}).join("")}function Y(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:a}function Z(N,V){return N+22+75*(N<26)-((V!=0)<<5)}function pt(N,V,G){var X=0;for(N=G?b(N/d):N>>1,N+=b(N/V);N>A*c>>1;X+=a)N=b(N/A);return b(X+(A+1)*N/(N+u))}function E(N){var V=[],G=N.length,X,tt=0,st=m,at=f,U,Q,q,z,nt,S,I,k,D;for(U=N.lastIndexOf(g),U<0&&(U=0),Q=0;Q<U;++Q)N.charCodeAt(Q)>=128&&R("not-basic"),V.push(N.charCodeAt(Q));for(q=U>0?U+1:0;q<G;){for(z=tt,nt=1,S=a;q>=G&&R("invalid-input"),I=Y(N.charCodeAt(q++)),(I>=a||I>b((l-tt)/nt))&&R("overflow"),tt+=I*nt,k=S<=at?h:S>=at+c?c:S-at,!(I<k);S+=a)D=a-k,nt>b(l/D)&&R("overflow"),nt*=D;X=V.length+1,at=pt(tt-z,X,z==0),b(tt/X)>l-st&&R("overflow"),st+=b(tt/X),tt%=X,V.splice(tt++,0,st)}return L(V)}function T(N){var V,G,X,tt,st,at,U,Q,q,z,nt,S=[],I,k,D,$;for(N=B(N),I=N.length,V=m,G=0,st=f,at=0;at<I;++at)nt=N[at],nt<128&&S.push(w(nt));for(X=tt=S.length,tt&&S.push(g);X<I;){for(U=l,at=0;at<I;++at)nt=N[at],nt>=V&&nt<U&&(U=nt);for(k=X+1,U-V>b((l-G)/k)&&R("overflow"),G+=(U-V)*k,V=U,at=0;at<I;++at)if(nt=N[at],nt<V&&++G>l&&R("overflow"),nt==V){for(Q=G,q=a;z=q<=st?h:q>=st+c?c:q-st,!(Q<z);q+=a)$=Q-z,D=a-z,S.push(w(Z(z+$%D,0))),Q=b($/D);S.push(w(Z(Q,0))),st=pt(G,k,X==tt),G=0,++X}++G,++V}return S.join("")}function C(N){return F(N,function(V){return p.test(V)?E(V.slice(4).toLowerCase()):V})}function O(N){return F(N,function(V){return y.test(V)?"xn--"+T(V):V})}if(o={version:"1.4.1",ucs2:{decode:B,encode:L},decode:E,encode:T,toASCII:O,toUnicode:C},r&&n)if(s.exports==r)n.exports=o;else for(v in o)o.hasOwnProperty(v)&&(r[v]=o[v]);else e.punycode=o})(WM)}(Ra,Ra.exports)),Ra.exports}var mc,cg;function ha(){return cg||(cg=1,mc=TypeError),mc}const KM={},ZM=Object.freeze(Object.defineProperty({__proto__:null,default:KM},Symbol.toStringTag,{value:"Module"})),QM=pT(ZM);var pc,ug;function oh(){if(ug)return pc;ug=1;var s=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e=s&&t&&typeof t.get=="function"?t.get:null,r=s&&Map.prototype.forEach,n=typeof Set=="function"&&Set.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=n&&i&&typeof i.get=="function"?i.get:null,l=n&&Set.prototype.forEach,a=typeof WeakMap=="function"&&WeakMap.prototype,h=a?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,u=c?WeakSet.prototype.has:null,d=typeof WeakRef=="function"&&WeakRef.prototype,f=d?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,g=Object.prototype.toString,p=Function.prototype.toString,y=String.prototype.match,x=String.prototype.slice,_=String.prototype.replace,A=String.prototype.toUpperCase,b=String.prototype.toLowerCase,w=RegExp.prototype.test,v=Array.prototype.concat,R=Array.prototype.join,P=Array.prototype.slice,F=Math.floor,B=typeof BigInt=="function"?BigInt.prototype.valueOf:null,L=Object.getOwnPropertySymbols,Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Z=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Z||!0)?Symbol.toStringTag:null,E=Object.prototype.propertyIsEnumerable,T=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(H){return H.__proto__}:null);function C(H,W){if(H===1/0||H===-1/0||H!==H||H&&H>-1e3&&H<1e3||w.call(/e/,W))return W;var Wt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof H=="number"){var ee=H<0?-F(-H):F(H);if(ee!==H){var ae=String(ee),Pt=x.call(W,ae.length+1);return _.call(ae,Wt,"$&_")+"."+_.call(_.call(Pt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(W,Wt,"$&_")}var O=QM,N=O.custom,V=k(N)?N:null,G={__proto__:null,double:'"',single:"'"},X={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};pc=function H(W,Wt,ee,ae){var Pt=Wt||{};if(K(Pt,"quoteStyle")&&!K(G,Pt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(K(Pt,"maxStringLength")&&(typeof Pt.maxStringLength=="number"?Pt.maxStringLength<0&&Pt.maxStringLength!==1/0:Pt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var Qr=K(Pt,"customInspect")?Pt.customInspect:!0;if(typeof Qr!="boolean"&&Qr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(K(Pt,"indent")&&Pt.indent!==null&&Pt.indent!=="	"&&!(parseInt(Pt.indent,10)===Pt.indent&&Pt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(K(Pt,"numericSeparator")&&typeof Pt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Bn=Pt.numericSeparator;if(typeof W>"u")return"undefined";if(W===null)return"null";if(typeof W=="boolean")return W?"true":"false";if(typeof W=="string")return Qt(W,Pt);if(typeof W=="number"){if(W===0)return 1/0/W>0?"0":"-0";var ws=String(W);return Bn?C(W,ws):ws}if(typeof W=="bigint"){var Jr=String(W)+"n";return Bn?C(W,Jr):Jr}var gh=typeof Pt.depth>"u"?5:Pt.depth;if(typeof ee>"u"&&(ee=0),ee>=gh&&gh>0&&typeof W=="object")return U(W)?"[Array]":"[Object]";var pi=Fn(Pt,ee);if(typeof ae>"u")ae=[];else if(it(ae,W)>=0)return"[Circular]";function qs(gi,vo,sv){if(vo&&(ae=P.call(ae),ae.push(vo)),sv){var Hf={depth:Pt.depth};return K(Pt,"quoteStyle")&&(Hf.quoteStyle=Pt.quoteStyle),H(gi,Hf,ee+1,ae)}return H(gi,Pt,ee+1,ae)}if(typeof W=="function"&&!q(W)){var Lf=ot(W),Vf=Ge(W,qs);return"[Function"+(Lf?": "+Lf:" (anonymous)")+"]"+(Vf.length>0?" { "+R.call(Vf,", ")+" }":"")}if(k(W)){var Uf=Z?_.call(String(W),/^(Symbol\(.*\))_[^)]*$/,"$1"):Y.call(W);return typeof W=="object"&&!Z?Ne(Uf):Uf}if(kt(W)){for(var da="<"+b.call(String(W.nodeName)),yh=W.attributes||[],bo=0;bo<yh.length;bo++)da+=" "+yh[bo].name+"="+tt(st(yh[bo].value),"double",Pt);return da+=">",W.childNodes&&W.childNodes.length&&(da+="..."),da+="</"+b.call(String(W.nodeName))+">",da}if(U(W)){if(W.length===0)return"[]";var xh=Ge(W,qs);return pi&&!Fs(xh)?"["+mi(xh,pi)+"]":"[ "+R.call(xh,", ")+" ]"}if(z(W)){var _h=Ge(W,qs);return!("cause"in Error.prototype)&&"cause"in W&&!E.call(W,"cause")?"{ ["+String(W)+"] "+R.call(v.call("[cause]: "+qs(W.cause),_h),", ")+" }":_h.length===0?"["+String(W)+"]":"{ ["+String(W)+"] "+R.call(_h,", ")+" }"}if(typeof W=="object"&&Qr){if(V&&typeof W[V]=="function"&&O)return O(W,{depth:gh-ee});if(Qr!=="symbol"&&typeof W.inspect=="function")return W.inspect()}if(et(W)){var Df=[];return r&&r.call(W,function(gi,vo){Df.push(qs(vo,W,!0)+" => "+qs(gi,W))}),vs("Map",e.call(W),Df,pi)}if(gt(W)){var Gf=[];return l&&l.call(W,function(gi){Gf.push(qs(gi,W))}),vs("Set",o.call(W),Gf,pi)}if(_t(W))return De("WeakMap");if(St(W))return De("WeakSet");if(ct(W))return De("WeakRef");if(S(W))return Ne(qs(Number(W)));if(D(W))return Ne(qs(B.call(W)));if(I(W))return Ne(m.call(W));if(nt(W))return Ne(qs(String(W)));if(typeof window<"u"&&W===window)return"{ [object Window] }";if(typeof globalThis<"u"&&W===globalThis||typeof El<"u"&&W===El)return"{ [object globalThis] }";if(!Q(W)&&!q(W)){var Ah=Ge(W,qs),$f=T?T(W)===Object.prototype:W instanceof Object||W.constructor===Object,bh=W instanceof Object?"":"null prototype",Xf=!$f&&pt&&Object(W)===W&&pt in W?x.call(rt(W),8,-1):bh?"Object":"",ev=$f||typeof W.constructor!="function"?"":W.constructor.name?W.constructor.name+" ":"",vh=ev+(Xf||bh?"["+R.call(v.call([],Xf||[],bh||[]),": ")+"] ":"");return Ah.length===0?vh+"{}":pi?vh+"{"+mi(Ah,pi)+"}":vh+"{ "+R.call(Ah,", ")+" }"}return String(W)};function tt(H,W,Wt){var ee=Wt.quoteStyle||W,ae=G[ee];return ae+H+ae}function st(H){return _.call(String(H),/"/g,"&quot;")}function at(H){return!pt||!(typeof H=="object"&&(pt in H||typeof H[pt]<"u"))}function U(H){return rt(H)==="[object Array]"&&at(H)}function Q(H){return rt(H)==="[object Date]"&&at(H)}function q(H){return rt(H)==="[object RegExp]"&&at(H)}function z(H){return rt(H)==="[object Error]"&&at(H)}function nt(H){return rt(H)==="[object String]"&&at(H)}function S(H){return rt(H)==="[object Number]"&&at(H)}function I(H){return rt(H)==="[object Boolean]"&&at(H)}function k(H){if(Z)return H&&typeof H=="object"&&H instanceof Symbol;if(typeof H=="symbol")return!0;if(!H||typeof H!="object"||!Y)return!1;try{return Y.call(H),!0}catch{}return!1}function D(H){if(!H||typeof H!="object"||!B)return!1;try{return B.call(H),!0}catch{}return!1}var $=Object.prototype.hasOwnProperty||function(H){return H in this};function K(H,W){return $.call(H,W)}function rt(H){return g.call(H)}function ot(H){if(H.name)return H.name;var W=y.call(p.call(H),/^function\s*([\w$]+)/);return W?W[1]:null}function it(H,W){if(H.indexOf)return H.indexOf(W);for(var Wt=0,ee=H.length;Wt<ee;Wt++)if(H[Wt]===W)return Wt;return-1}function et(H){if(!e||!H||typeof H!="object")return!1;try{e.call(H);try{o.call(H)}catch{return!0}return H instanceof Map}catch{}return!1}function _t(H){if(!h||!H||typeof H!="object")return!1;try{h.call(H,h);try{u.call(H,u)}catch{return!0}return H instanceof WeakMap}catch{}return!1}function ct(H){if(!f||!H||typeof H!="object")return!1;try{return f.call(H),!0}catch{}return!1}function gt(H){if(!o||!H||typeof H!="object")return!1;try{o.call(H);try{e.call(H)}catch{return!0}return H instanceof Set}catch{}return!1}function St(H){if(!u||!H||typeof H!="object")return!1;try{u.call(H,u);try{h.call(H,h)}catch{return!0}return H instanceof WeakSet}catch{}return!1}function kt(H){return!H||typeof H!="object"?!1:typeof HTMLElement<"u"&&H instanceof HTMLElement?!0:typeof H.nodeName=="string"&&typeof H.getAttribute=="function"}function Qt(H,W){if(H.length>W.maxStringLength){var Wt=H.length-W.maxStringLength,ee="... "+Wt+" more character"+(Wt>1?"s":"");return Qt(x.call(H,0,W.maxStringLength),W)+ee}var ae=X[W.quoteStyle||"single"];ae.lastIndex=0;var Pt=_.call(_.call(H,ae,"\\$1"),/[\x00-\x1f]/g,zt);return tt(Pt,"single",W)}function zt(H){var W=H.charCodeAt(0),Wt={8:"b",9:"t",10:"n",12:"f",13:"r"}[W];return Wt?"\\"+Wt:"\\x"+(W<16?"0":"")+A.call(W.toString(16))}function Ne(H){return"Object("+H+")"}function De(H){return H+" { ? }"}function vs(H,W,Wt,ee){var ae=ee?mi(Wt,ee):R.call(Wt,", ");return H+" ("+W+") {"+ae+"}"}function Fs(H){for(var W=0;W<H.length;W++)if(it(H[W],`
`)>=0)return!1;return!0}function Fn(H,W){var Wt;if(H.indent==="	")Wt="	";else if(typeof H.indent=="number"&&H.indent>0)Wt=R.call(Array(H.indent+1)," ");else return null;return{base:Wt,prev:R.call(Array(W+1),Wt)}}function mi(H,W){if(H.length===0)return"";var Wt=`
`+W.prev+W.base;return Wt+R.call(H,","+Wt)+`
`+W.prev}function Ge(H,W){var Wt=U(H),ee=[];if(Wt){ee.length=H.length;for(var ae=0;ae<H.length;ae++)ee[ae]=K(H,ae)?W(H[ae],H):""}var Pt=typeof L=="function"?L(H):[],Qr;if(Z){Qr={};for(var Bn=0;Bn<Pt.length;Bn++)Qr["$"+Pt[Bn]]=Pt[Bn]}for(var ws in H)K(H,ws)&&(Wt&&String(Number(ws))===ws&&ws<H.length||Z&&Qr["$"+ws]instanceof Symbol||(w.call(/[^\w$]/,ws)?ee.push(W(ws,H)+": "+W(H[ws],H)):ee.push(ws+": "+W(H[ws],H))));if(typeof L=="function")for(var Jr=0;Jr<Pt.length;Jr++)E.call(H,Pt[Jr])&&ee.push("["+W(Pt[Jr])+"]: "+W(H[Pt[Jr]],H));return ee}return pc}var gc,dg;function JM(){if(dg)return gc;dg=1;var s=oh(),t=ha(),e=function(l,a,h){for(var c=l,u;(u=c.next)!=null;c=u)if(u.key===a)return c.next=u.next,h||(u.next=l.next,l.next=u),u},r=function(l,a){if(l){var h=e(l,a);return h&&h.value}},n=function(l,a,h){var c=e(l,a);c?c.value=h:l.next={key:a,next:l.next,value:h}},i=function(l,a){return l?!!e(l,a):!1},o=function(l,a){if(l)return e(l,a,!0)};return gc=function(){var a,h={assert:function(c){if(!h.has(c))throw new t("Side channel does not contain "+s(c))},delete:function(c){var u=a&&a.next,d=o(a,c);return d&&u&&u===d&&(a=void 0),!!d},get:function(c){return r(a,c)},has:function(c){return i(a,c)},set:function(c,u){a||(a={next:void 0}),n(a,c,u)}};return h},gc}var yc,fg;function U_(){return fg||(fg=1,yc=Object),yc}var xc,mg;function tP(){return mg||(mg=1,xc=Error),xc}var _c,pg;function eP(){return pg||(pg=1,_c=EvalError),_c}var Ac,gg;function sP(){return gg||(gg=1,Ac=RangeError),Ac}var bc,yg;function rP(){return yg||(yg=1,bc=ReferenceError),bc}var vc,xg;function nP(){return xg||(xg=1,vc=SyntaxError),vc}var wc,_g;function iP(){return _g||(_g=1,wc=URIError),wc}var Ec,Ag;function aP(){return Ag||(Ag=1,Ec=Math.abs),Ec}var Sc,bg;function oP(){return bg||(bg=1,Sc=Math.floor),Sc}var Tc,vg;function lP(){return vg||(vg=1,Tc=Math.max),Tc}var Cc,wg;function hP(){return wg||(wg=1,Cc=Math.min),Cc}var Rc,Eg;function cP(){return Eg||(Eg=1,Rc=Math.pow),Rc}var Ic,Sg;function uP(){return Sg||(Sg=1,Ic=Math.round),Ic}var Mc,Tg;function dP(){return Tg||(Tg=1,Mc=Number.isNaN||function(t){return t!==t}),Mc}var Pc,Cg;function fP(){if(Cg)return Pc;Cg=1;var s=dP();return Pc=function(e){return s(e)||e===0?e:e<0?-1:1},Pc}var Fc,Rg;function mP(){return Rg||(Rg=1,Fc=Object.getOwnPropertyDescriptor),Fc}var Bc,Ig;function D_(){if(Ig)return Bc;Ig=1;var s=mP();if(s)try{s([],"length")}catch{s=null}return Bc=s,Bc}var kc,Mg;function pP(){if(Mg)return kc;Mg=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return kc=s,kc}var Nc,Pg;function gP(){return Pg||(Pg=1,Nc=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),r=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var n=42;t[e]=n;for(var i in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(t,e);if(l.value!==n||l.enumerable!==!0)return!1}return!0}),Nc}var Oc,Fg;function yP(){if(Fg)return Oc;Fg=1;var s=typeof Symbol<"u"&&Symbol,t=gP();return Oc=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Oc}var Lc,Bg;function G_(){return Bg||(Bg=1,Lc=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Lc}var Vc,kg;function $_(){if(kg)return Vc;kg=1;var s=U_();return Vc=s.getPrototypeOf||null,Vc}var Uc,Ng;function xP(){if(Ng)return Uc;Ng=1;var s="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,r="[object Function]",n=function(a,h){for(var c=[],u=0;u<a.length;u+=1)c[u]=a[u];for(var d=0;d<h.length;d+=1)c[d+a.length]=h[d];return c},i=function(a,h){for(var c=[],u=h,d=0;u<a.length;u+=1,d+=1)c[d]=a[u];return c},o=function(l,a){for(var h="",c=0;c<l.length;c+=1)h+=l[c],c+1<l.length&&(h+=a);return h};return Uc=function(a){var h=this;if(typeof h!="function"||t.apply(h)!==r)throw new TypeError(s+h);for(var c=i(arguments,1),u,d=function(){if(this instanceof u){var y=h.apply(this,n(c,arguments));return Object(y)===y?y:this}return h.apply(a,n(c,arguments))},f=e(0,h.length-c.length),m=[],g=0;g<f;g++)m[g]="$"+g;if(u=Function("binder","return function ("+o(m,",")+"){ return binder.apply(this,arguments); }")(d),h.prototype){var p=function(){};p.prototype=h.prototype,u.prototype=new p,p.prototype=null}return u},Uc}var Dc,Og;function lh(){if(Og)return Dc;Og=1;var s=xP();return Dc=Function.prototype.bind||s,Dc}var Gc,Lg;function mf(){return Lg||(Lg=1,Gc=Function.prototype.call),Gc}var $c,Vg;function X_(){return Vg||(Vg=1,$c=Function.prototype.apply),$c}var Xc,Ug;function _P(){return Ug||(Ug=1,Xc=typeof Reflect<"u"&&Reflect&&Reflect.apply),Xc}var Hc,Dg;function AP(){if(Dg)return Hc;Dg=1;var s=lh(),t=X_(),e=mf(),r=_P();return Hc=r||s.call(e,t),Hc}var Yc,Gg;function H_(){if(Gg)return Yc;Gg=1;var s=lh(),t=ha(),e=mf(),r=AP();return Yc=function(i){if(i.length<1||typeof i[0]!="function")throw new t("a function is required");return r(s,e,i)},Yc}var jc,$g;function bP(){if($g)return jc;$g=1;var s=H_(),t=D_(),e;try{e=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var r=!!e&&t&&t(Object.prototype,"__proto__"),n=Object,i=n.getPrototypeOf;return jc=r&&typeof r.get=="function"?s([r.get]):typeof i=="function"?function(l){return i(l==null?l:n(l))}:!1,jc}var zc,Xg;function vP(){if(Xg)return zc;Xg=1;var s=G_(),t=$_(),e=bP();return zc=s?function(n){return s(n)}:t?function(n){if(!n||typeof n!="object"&&typeof n!="function")throw new TypeError("getProto: not an object");return t(n)}:e?function(n){return e(n)}:null,zc}var Wc,Hg;function wP(){if(Hg)return Wc;Hg=1;var s=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=lh();return Wc=e.call(s,t),Wc}var qc,Yg;function pf(){if(Yg)return qc;Yg=1;var s,t=U_(),e=tP(),r=eP(),n=sP(),i=rP(),o=nP(),l=ha(),a=iP(),h=aP(),c=oP(),u=lP(),d=hP(),f=cP(),m=uP(),g=fP(),p=Function,y=function(q){try{return p('"use strict"; return ('+q+").constructor;")()}catch{}},x=D_(),_=pP(),A=function(){throw new l},b=x?function(){try{return arguments.callee,A}catch{try{return x(arguments,"callee").get}catch{return A}}}():A,w=yP()(),v=vP(),R=$_(),P=G_(),F=X_(),B=mf(),L={},Y=typeof Uint8Array>"u"||!v?s:v(Uint8Array),Z={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":w&&v?v([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":L,"%AsyncGenerator%":L,"%AsyncGeneratorFunction%":L,"%AsyncIteratorPrototype%":L,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":r,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":p,"%GeneratorFunction%":L,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":w&&v?v(v([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!w||!v?s:v(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":n,"%ReferenceError%":i,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!w||!v?s:v(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":w&&v?v(""[Symbol.iterator]()):s,"%Symbol%":w?Symbol:s,"%SyntaxError%":o,"%ThrowTypeError%":b,"%TypedArray%":Y,"%TypeError%":l,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":a,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":B,"%Function.prototype.apply%":F,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":R,"%Math.abs%":h,"%Math.floor%":c,"%Math.max%":u,"%Math.min%":d,"%Math.pow%":f,"%Math.round%":m,"%Math.sign%":g,"%Reflect.getPrototypeOf%":P};if(v)try{null.error}catch(q){var pt=v(v(q));Z["%Error.prototype%"]=pt}var E=function q(z){var nt;if(z==="%AsyncFunction%")nt=y("async function () {}");else if(z==="%GeneratorFunction%")nt=y("function* () {}");else if(z==="%AsyncGeneratorFunction%")nt=y("async function* () {}");else if(z==="%AsyncGenerator%"){var S=q("%AsyncGeneratorFunction%");S&&(nt=S.prototype)}else if(z==="%AsyncIteratorPrototype%"){var I=q("%AsyncGenerator%");I&&v&&(nt=v(I.prototype))}return Z[z]=nt,nt},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},C=lh(),O=wP(),N=C.call(B,Array.prototype.concat),V=C.call(F,Array.prototype.splice),G=C.call(B,String.prototype.replace),X=C.call(B,String.prototype.slice),tt=C.call(B,RegExp.prototype.exec),st=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,at=/\\(\\)?/g,U=function(z){var nt=X(z,0,1),S=X(z,-1);if(nt==="%"&&S!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(S==="%"&&nt!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var I=[];return G(z,st,function(k,D,$,K){I[I.length]=$?G(K,at,"$1"):D||k}),I},Q=function(z,nt){var S=z,I;if(O(T,S)&&(I=T[S],S="%"+I[0]+"%"),O(Z,S)){var k=Z[S];if(k===L&&(k=E(S)),typeof k>"u"&&!nt)throw new l("intrinsic "+z+" exists, but is not available. Please file an issue!");return{alias:I,name:S,value:k}}throw new o("intrinsic "+z+" does not exist!")};return qc=function(z,nt){if(typeof z!="string"||z.length===0)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof nt!="boolean")throw new l('"allowMissing" argument must be a boolean');if(tt(/^%?[^%]*%?$/,z)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var S=U(z),I=S.length>0?S[0]:"",k=Q("%"+I+"%",nt),D=k.name,$=k.value,K=!1,rt=k.alias;rt&&(I=rt[0],V(S,N([0,1],rt)));for(var ot=1,it=!0;ot<S.length;ot+=1){var et=S[ot],_t=X(et,0,1),ct=X(et,-1);if((_t==='"'||_t==="'"||_t==="`"||ct==='"'||ct==="'"||ct==="`")&&_t!==ct)throw new o("property names with quotes must have matching quotes");if((et==="constructor"||!it)&&(K=!0),I+="."+et,D="%"+I+"%",O(Z,D))$=Z[D];else if($!=null){if(!(et in $)){if(!nt)throw new l("base intrinsic for "+z+" exists, but the property is not available.");return}if(x&&ot+1>=S.length){var gt=x($,et);it=!!gt,it&&"get"in gt&&!("originalValue"in gt.get)?$=gt.get:$=$[et]}else it=O($,et),$=$[et];it&&!K&&(Z[D]=$)}}return $},qc}var Kc,jg;function Y_(){if(jg)return Kc;jg=1;var s=pf(),t=H_(),e=t([s("%String.prototype.indexOf%")]);return Kc=function(n,i){var o=s(n,!!i);return typeof o=="function"&&e(n,".prototype.")>-1?t([o]):o},Kc}var Zc,zg;function j_(){if(zg)return Zc;zg=1;var s=pf(),t=Y_(),e=oh(),r=ha(),n=s("%Map%",!0),i=t("Map.prototype.get",!0),o=t("Map.prototype.set",!0),l=t("Map.prototype.has",!0),a=t("Map.prototype.delete",!0),h=t("Map.prototype.size",!0);return Zc=!!n&&function(){var u,d={assert:function(f){if(!d.has(f))throw new r("Side channel does not contain "+e(f))},delete:function(f){if(u){var m=a(u,f);return h(u)===0&&(u=void 0),m}return!1},get:function(f){if(u)return i(u,f)},has:function(f){return u?l(u,f):!1},set:function(f,m){u||(u=new n),o(u,f,m)}};return d},Zc}var Qc,Wg;function EP(){if(Wg)return Qc;Wg=1;var s=pf(),t=Y_(),e=oh(),r=j_(),n=ha(),i=s("%WeakMap%",!0),o=t("WeakMap.prototype.get",!0),l=t("WeakMap.prototype.set",!0),a=t("WeakMap.prototype.has",!0),h=t("WeakMap.prototype.delete",!0);return Qc=i?function(){var u,d,f={assert:function(m){if(!f.has(m))throw new n("Side channel does not contain "+e(m))},delete:function(m){if(i&&m&&(typeof m=="object"||typeof m=="function")){if(u)return h(u,m)}else if(r&&d)return d.delete(m);return!1},get:function(m){return i&&m&&(typeof m=="object"||typeof m=="function")&&u?o(u,m):d&&d.get(m)},has:function(m){return i&&m&&(typeof m=="object"||typeof m=="function")&&u?a(u,m):!!d&&d.has(m)},set:function(m,g){i&&m&&(typeof m=="object"||typeof m=="function")?(u||(u=new i),l(u,m,g)):r&&(d||(d=r()),d.set(m,g))}};return f}:r,Qc}var Jc,qg;function SP(){if(qg)return Jc;qg=1;var s=ha(),t=oh(),e=JM(),r=j_(),n=EP(),i=n||r||e;return Jc=function(){var l,a={assert:function(h){if(!a.has(h))throw new s("Side channel does not contain "+t(h))},delete:function(h){return!!l&&l.delete(h)},get:function(h){return l&&l.get(h)},has:function(h){return!!l&&l.has(h)},set:function(h,c){l||(l=i()),l.set(h,c)}};return a},Jc}var tu,Kg;function gf(){if(Kg)return tu;Kg=1;var s=String.prototype.replace,t=/%20/g,e={RFC1738:"RFC1738",RFC3986:"RFC3986"};return tu={default:e.RFC3986,formatters:{RFC1738:function(r){return s.call(r,t,"+")},RFC3986:function(r){return String(r)}},RFC1738:e.RFC1738,RFC3986:e.RFC3986},tu}var eu,Zg;function z_(){if(Zg)return eu;Zg=1;var s=gf(),t=Object.prototype.hasOwnProperty,e=Array.isArray,r=function(){for(var p=[],y=0;y<256;++y)p.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return p}(),n=function(y){for(;y.length>1;){var x=y.pop(),_=x.obj[x.prop];if(e(_)){for(var A=[],b=0;b<_.length;++b)typeof _[b]<"u"&&A.push(_[b]);x.obj[x.prop]=A}}},i=function(y,x){for(var _=x&&x.plainObjects?{__proto__:null}:{},A=0;A<y.length;++A)typeof y[A]<"u"&&(_[A]=y[A]);return _},o=function p(y,x,_){if(!x)return y;if(typeof x!="object"&&typeof x!="function"){if(e(y))y.push(x);else if(y&&typeof y=="object")(_&&(_.plainObjects||_.allowPrototypes)||!t.call(Object.prototype,x))&&(y[x]=!0);else return[y,x];return y}if(!y||typeof y!="object")return[y].concat(x);var A=y;return e(y)&&!e(x)&&(A=i(y,_)),e(y)&&e(x)?(x.forEach(function(b,w){if(t.call(y,w)){var v=y[w];v&&typeof v=="object"&&b&&typeof b=="object"?y[w]=p(v,b,_):y.push(b)}else y[w]=b}),y):Object.keys(x).reduce(function(b,w){var v=x[w];return t.call(b,w)?b[w]=p(b[w],v,_):b[w]=v,b},A)},l=function(y,x){return Object.keys(x).reduce(function(_,A){return _[A]=x[A],_},y)},a=function(p,y,x){var _=p.replace(/\+/g," ");if(x==="iso-8859-1")return _.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(_)}catch{return _}},h=1024,c=function(y,x,_,A,b){if(y.length===0)return y;var w=y;if(typeof y=="symbol"?w=Symbol.prototype.toString.call(y):typeof y!="string"&&(w=String(y)),_==="iso-8859-1")return escape(w).replace(/%u[0-9a-f]{4}/gi,function(Y){return"%26%23"+parseInt(Y.slice(2),16)+"%3B"});for(var v="",R=0;R<w.length;R+=h){for(var P=w.length>=h?w.slice(R,R+h):w,F=[],B=0;B<P.length;++B){var L=P.charCodeAt(B);if(L===45||L===46||L===95||L===126||L>=48&&L<=57||L>=65&&L<=90||L>=97&&L<=122||b===s.RFC1738&&(L===40||L===41)){F[F.length]=P.charAt(B);continue}if(L<128){F[F.length]=r[L];continue}if(L<2048){F[F.length]=r[192|L>>6]+r[128|L&63];continue}if(L<55296||L>=57344){F[F.length]=r[224|L>>12]+r[128|L>>6&63]+r[128|L&63];continue}B+=1,L=65536+((L&1023)<<10|P.charCodeAt(B)&1023),F[F.length]=r[240|L>>18]+r[128|L>>12&63]+r[128|L>>6&63]+r[128|L&63]}v+=F.join("")}return v},u=function(y){for(var x=[{obj:{o:y},prop:"o"}],_=[],A=0;A<x.length;++A)for(var b=x[A],w=b.obj[b.prop],v=Object.keys(w),R=0;R<v.length;++R){var P=v[R],F=w[P];typeof F=="object"&&F!==null&&_.indexOf(F)===-1&&(x.push({obj:w,prop:P}),_.push(F))}return n(x),y},d=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},f=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},m=function(y,x){return[].concat(y,x)},g=function(y,x){if(e(y)){for(var _=[],A=0;A<y.length;A+=1)_.push(x(y[A]));return _}return x(y)};return eu={arrayToObject:i,assign:l,combine:m,compact:u,decode:a,encode:c,isBuffer:f,isRegExp:d,maybeMap:g,merge:o},eu}var su,Qg;function TP(){if(Qg)return su;Qg=1;var s=SP(),t=z_(),e=gf(),r=Object.prototype.hasOwnProperty,n={brackets:function(p){return p+"[]"},comma:"comma",indices:function(p,y){return p+"["+y+"]"},repeat:function(p){return p}},i=Array.isArray,o=Array.prototype.push,l=function(g,p){o.apply(g,i(p)?p:[p])},a=Date.prototype.toISOString,h=e.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:h,formatter:e.formatters[h],indices:!1,serializeDate:function(p){return a.call(p)},skipNulls:!1,strictNullHandling:!1},u=function(p){return typeof p=="string"||typeof p=="number"||typeof p=="boolean"||typeof p=="symbol"||typeof p=="bigint"},d={},f=function g(p,y,x,_,A,b,w,v,R,P,F,B,L,Y,Z,pt,E,T){for(var C=p,O=T,N=0,V=!1;(O=O.get(d))!==void 0&&!V;){var G=O.get(p);if(N+=1,typeof G<"u"){if(G===N)throw new RangeError("Cyclic object value");V=!0}typeof O.get(d)>"u"&&(N=0)}if(typeof P=="function"?C=P(y,C):C instanceof Date?C=L(C):x==="comma"&&i(C)&&(C=t.maybeMap(C,function(D){return D instanceof Date?L(D):D})),C===null){if(b)return R&&!pt?R(y,c.encoder,E,"key",Y):y;C=""}if(u(C)||t.isBuffer(C)){if(R){var X=pt?y:R(y,c.encoder,E,"key",Y);return[Z(X)+"="+Z(R(C,c.encoder,E,"value",Y))]}return[Z(y)+"="+Z(String(C))]}var tt=[];if(typeof C>"u")return tt;var st;if(x==="comma"&&i(C))pt&&R&&(C=t.maybeMap(C,R)),st=[{value:C.length>0?C.join(",")||null:void 0}];else if(i(P))st=P;else{var at=Object.keys(C);st=F?at.sort(F):at}var U=v?String(y).replace(/\./g,"%2E"):String(y),Q=_&&i(C)&&C.length===1?U+"[]":U;if(A&&i(C)&&C.length===0)return Q+"[]";for(var q=0;q<st.length;++q){var z=st[q],nt=typeof z=="object"&&z&&typeof z.value<"u"?z.value:C[z];if(!(w&&nt===null)){var S=B&&v?String(z).replace(/\./g,"%2E"):String(z),I=i(C)?typeof x=="function"?x(Q,S):Q:Q+(B?"."+S:"["+S+"]");T.set(p,N);var k=s();k.set(d,T),l(tt,g(nt,I,x,_,A,b,w,v,x==="comma"&&pt&&i(C)?null:R,P,F,B,L,Y,Z,pt,E,k))}}return tt},m=function(p){if(!p)return c;if(typeof p.allowEmptyArrays<"u"&&typeof p.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof p.encodeDotInKeys<"u"&&typeof p.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(p.encoder!==null&&typeof p.encoder<"u"&&typeof p.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=p.charset||c.charset;if(typeof p.charset<"u"&&p.charset!=="utf-8"&&p.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var x=e.default;if(typeof p.format<"u"){if(!r.call(e.formatters,p.format))throw new TypeError("Unknown format option provided.");x=p.format}var _=e.formatters[x],A=c.filter;(typeof p.filter=="function"||i(p.filter))&&(A=p.filter);var b;if(p.arrayFormat in n?b=p.arrayFormat:"indices"in p?b=p.indices?"indices":"repeat":b=c.arrayFormat,"commaRoundTrip"in p&&typeof p.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var w=typeof p.allowDots>"u"?p.encodeDotInKeys===!0?!0:c.allowDots:!!p.allowDots;return{addQueryPrefix:typeof p.addQueryPrefix=="boolean"?p.addQueryPrefix:c.addQueryPrefix,allowDots:w,allowEmptyArrays:typeof p.allowEmptyArrays=="boolean"?!!p.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:b,charset:y,charsetSentinel:typeof p.charsetSentinel=="boolean"?p.charsetSentinel:c.charsetSentinel,commaRoundTrip:!!p.commaRoundTrip,delimiter:typeof p.delimiter>"u"?c.delimiter:p.delimiter,encode:typeof p.encode=="boolean"?p.encode:c.encode,encodeDotInKeys:typeof p.encodeDotInKeys=="boolean"?p.encodeDotInKeys:c.encodeDotInKeys,encoder:typeof p.encoder=="function"?p.encoder:c.encoder,encodeValuesOnly:typeof p.encodeValuesOnly=="boolean"?p.encodeValuesOnly:c.encodeValuesOnly,filter:A,format:x,formatter:_,serializeDate:typeof p.serializeDate=="function"?p.serializeDate:c.serializeDate,skipNulls:typeof p.skipNulls=="boolean"?p.skipNulls:c.skipNulls,sort:typeof p.sort=="function"?p.sort:null,strictNullHandling:typeof p.strictNullHandling=="boolean"?p.strictNullHandling:c.strictNullHandling}};return su=function(g,p){var y=g,x=m(p),_,A;typeof x.filter=="function"?(A=x.filter,y=A("",y)):i(x.filter)&&(A=x.filter,_=A);var b=[];if(typeof y!="object"||y===null)return"";var w=n[x.arrayFormat],v=w==="comma"&&x.commaRoundTrip;_||(_=Object.keys(y)),x.sort&&_.sort(x.sort);for(var R=s(),P=0;P<_.length;++P){var F=_[P],B=y[F];x.skipNulls&&B===null||l(b,f(B,F,w,v,x.allowEmptyArrays,x.strictNullHandling,x.skipNulls,x.encodeDotInKeys,x.encode?x.encoder:null,x.filter,x.sort,x.allowDots,x.serializeDate,x.format,x.formatter,x.encodeValuesOnly,x.charset,R))}var L=b.join(x.delimiter),Y=x.addQueryPrefix===!0?"?":"";return x.charsetSentinel&&(x.charset==="iso-8859-1"?Y+="utf8=%26%2310003%3B&":Y+="utf8=%E2%9C%93&"),L.length>0?Y+L:""},su}var ru,Jg;function CP(){if(Jg)return ru;Jg=1;var s=z_(),t=Object.prototype.hasOwnProperty,e=Array.isArray,r={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:s.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},n=function(d){return d.replace(/&#(\d+);/g,function(f,m){return String.fromCharCode(parseInt(m,10))})},i=function(d,f,m){if(d&&typeof d=="string"&&f.comma&&d.indexOf(",")>-1)return d.split(",");if(f.throwOnLimitExceeded&&m>=f.arrayLimit)throw new RangeError("Array limit exceeded. Only "+f.arrayLimit+" element"+(f.arrayLimit===1?"":"s")+" allowed in an array.");return d},o="utf8=%26%2310003%3B",l="utf8=%E2%9C%93",a=function(f,m){var g={__proto__:null},p=m.ignoreQueryPrefix?f.replace(/^\?/,""):f;p=p.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=m.parameterLimit===1/0?void 0:m.parameterLimit,x=p.split(m.delimiter,m.throwOnLimitExceeded?y+1:y);if(m.throwOnLimitExceeded&&x.length>y)throw new RangeError("Parameter limit exceeded. Only "+y+" parameter"+(y===1?"":"s")+" allowed.");var _=-1,A,b=m.charset;if(m.charsetSentinel)for(A=0;A<x.length;++A)x[A].indexOf("utf8=")===0&&(x[A]===l?b="utf-8":x[A]===o&&(b="iso-8859-1"),_=A,A=x.length);for(A=0;A<x.length;++A)if(A!==_){var w=x[A],v=w.indexOf("]="),R=v===-1?w.indexOf("="):v+1,P,F;R===-1?(P=m.decoder(w,r.decoder,b,"key"),F=m.strictNullHandling?null:""):(P=m.decoder(w.slice(0,R),r.decoder,b,"key"),F=s.maybeMap(i(w.slice(R+1),m,e(g[P])?g[P].length:0),function(L){return m.decoder(L,r.decoder,b,"value")})),F&&m.interpretNumericEntities&&b==="iso-8859-1"&&(F=n(String(F))),w.indexOf("[]=")>-1&&(F=e(F)?[F]:F);var B=t.call(g,P);B&&m.duplicates==="combine"?g[P]=s.combine(g[P],F):(!B||m.duplicates==="last")&&(g[P]=F)}return g},h=function(d,f,m,g){var p=0;if(d.length>0&&d[d.length-1]==="[]"){var y=d.slice(0,-1).join("");p=Array.isArray(f)&&f[y]?f[y].length:0}for(var x=g?f:i(f,m,p),_=d.length-1;_>=0;--_){var A,b=d[_];if(b==="[]"&&m.parseArrays)A=m.allowEmptyArrays&&(x===""||m.strictNullHandling&&x===null)?[]:s.combine([],x);else{A=m.plainObjects?{__proto__:null}:{};var w=b.charAt(0)==="["&&b.charAt(b.length-1)==="]"?b.slice(1,-1):b,v=m.decodeDotInKeys?w.replace(/%2E/g,"."):w,R=parseInt(v,10);!m.parseArrays&&v===""?A={0:x}:!isNaN(R)&&b!==v&&String(R)===v&&R>=0&&m.parseArrays&&R<=m.arrayLimit?(A=[],A[R]=x):v!=="__proto__"&&(A[v]=x)}x=A}return x},c=function(f,m,g,p){if(f){var y=g.allowDots?f.replace(/\.([^.[]+)/g,"[$1]"):f,x=/(\[[^[\]]*])/,_=/(\[[^[\]]*])/g,A=g.depth>0&&x.exec(y),b=A?y.slice(0,A.index):y,w=[];if(b){if(!g.plainObjects&&t.call(Object.prototype,b)&&!g.allowPrototypes)return;w.push(b)}for(var v=0;g.depth>0&&(A=_.exec(y))!==null&&v<g.depth;){if(v+=1,!g.plainObjects&&t.call(Object.prototype,A[1].slice(1,-1))&&!g.allowPrototypes)return;w.push(A[1])}if(A){if(g.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+g.depth+" and strictDepth is true");w.push("["+y.slice(A.index)+"]")}return h(w,m,g,p)}},u=function(f){if(!f)return r;if(typeof f.allowEmptyArrays<"u"&&typeof f.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof f.decodeDotInKeys<"u"&&typeof f.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(f.decoder!==null&&typeof f.decoder<"u"&&typeof f.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof f.charset<"u"&&f.charset!=="utf-8"&&f.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof f.throwOnLimitExceeded<"u"&&typeof f.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var m=typeof f.charset>"u"?r.charset:f.charset,g=typeof f.duplicates>"u"?r.duplicates:f.duplicates;if(g!=="combine"&&g!=="first"&&g!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var p=typeof f.allowDots>"u"?f.decodeDotInKeys===!0?!0:r.allowDots:!!f.allowDots;return{allowDots:p,allowEmptyArrays:typeof f.allowEmptyArrays=="boolean"?!!f.allowEmptyArrays:r.allowEmptyArrays,allowPrototypes:typeof f.allowPrototypes=="boolean"?f.allowPrototypes:r.allowPrototypes,allowSparse:typeof f.allowSparse=="boolean"?f.allowSparse:r.allowSparse,arrayLimit:typeof f.arrayLimit=="number"?f.arrayLimit:r.arrayLimit,charset:m,charsetSentinel:typeof f.charsetSentinel=="boolean"?f.charsetSentinel:r.charsetSentinel,comma:typeof f.comma=="boolean"?f.comma:r.comma,decodeDotInKeys:typeof f.decodeDotInKeys=="boolean"?f.decodeDotInKeys:r.decodeDotInKeys,decoder:typeof f.decoder=="function"?f.decoder:r.decoder,delimiter:typeof f.delimiter=="string"||s.isRegExp(f.delimiter)?f.delimiter:r.delimiter,depth:typeof f.depth=="number"||f.depth===!1?+f.depth:r.depth,duplicates:g,ignoreQueryPrefix:f.ignoreQueryPrefix===!0,interpretNumericEntities:typeof f.interpretNumericEntities=="boolean"?f.interpretNumericEntities:r.interpretNumericEntities,parameterLimit:typeof f.parameterLimit=="number"?f.parameterLimit:r.parameterLimit,parseArrays:f.parseArrays!==!1,plainObjects:typeof f.plainObjects=="boolean"?f.plainObjects:r.plainObjects,strictDepth:typeof f.strictDepth=="boolean"?!!f.strictDepth:r.strictDepth,strictNullHandling:typeof f.strictNullHandling=="boolean"?f.strictNullHandling:r.strictNullHandling,throwOnLimitExceeded:typeof f.throwOnLimitExceeded=="boolean"?f.throwOnLimitExceeded:!1}};return ru=function(d,f){var m=u(f);if(d===""||d===null||typeof d>"u")return m.plainObjects?{__proto__:null}:{};for(var g=typeof d=="string"?a(d,m):d,p=m.plainObjects?{__proto__:null}:{},y=Object.keys(g),x=0;x<y.length;++x){var _=y[x],A=c(_,g[_],m,typeof d=="string");p=s.merge(p,A,m)}return m.allowSparse===!0?p:s.compact(p)},ru}var nu,ty;function RP(){if(ty)return nu;ty=1;var s=TP(),t=CP(),e=gf();return nu={formats:e,parse:t,stringify:s},nu}var ey;function IP(){if(ey)return Ln;ey=1;var s=qM();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var e=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,n=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,i=["<",">",'"',"`"," ","\r",`
`,"	"],o=["{","}","|","\\","^","`"].concat(i),l=["'"].concat(o),a=["%","/","?",";","#"].concat(l),h=["/","?","#"],c=255,u=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},p=RP();function y(b,w,v){if(b&&typeof b=="object"&&b instanceof t)return b;var R=new t;return R.parse(b,w,v),R}t.prototype.parse=function(b,w,v){if(typeof b!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof b);var R=b.indexOf("?"),P=R!==-1&&R<b.indexOf("#")?"?":"#",F=b.split(P),B=/\\/g;F[0]=F[0].replace(B,"/"),b=F.join(P);var L=b;if(L=L.trim(),!v&&b.split("#").length===1){var Y=n.exec(L);if(Y)return this.path=L,this.href=L,this.pathname=Y[1],Y[2]?(this.search=Y[2],w?this.query=p.parse(this.search.substr(1)):this.query=this.search.substr(1)):w&&(this.search="",this.query={}),this}var Z=e.exec(L);if(Z){Z=Z[0];var pt=Z.toLowerCase();this.protocol=pt,L=L.substr(Z.length)}if(v||Z||L.match(/^\/\/[^@/]+@[^@/]+/)){var E=L.substr(0,2)==="//";E&&!(Z&&m[Z])&&(L=L.substr(2),this.slashes=!0)}if(!m[Z]&&(E||Z&&!g[Z])){for(var T=-1,C=0;C<h.length;C++){var O=L.indexOf(h[C]);O!==-1&&(T===-1||O<T)&&(T=O)}var N,V;T===-1?V=L.lastIndexOf("@"):V=L.lastIndexOf("@",T),V!==-1&&(N=L.slice(0,V),L=L.slice(V+1),this.auth=decodeURIComponent(N)),T=-1;for(var C=0;C<a.length;C++){var O=L.indexOf(a[C]);O!==-1&&(T===-1||O<T)&&(T=O)}T===-1&&(T=L.length),this.host=L.slice(0,T),L=L.slice(T),this.parseHost(),this.hostname=this.hostname||"";var G=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!G)for(var X=this.hostname.split(/\./),C=0,tt=X.length;C<tt;C++){var st=X[C];if(st&&!st.match(u)){for(var at="",U=0,Q=st.length;U<Q;U++)st.charCodeAt(U)>127?at+="x":at+=st[U];if(!at.match(u)){var q=X.slice(0,C),z=X.slice(C+1),nt=st.match(d);nt&&(q.push(nt[1]),z.unshift(nt[2])),z.length&&(L="/"+z.join(".")+L),this.hostname=q.join(".");break}}}this.hostname.length>c?this.hostname="":this.hostname=this.hostname.toLowerCase(),G||(this.hostname=s.toASCII(this.hostname));var S=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+S,this.href+=this.host,G&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),L[0]!=="/"&&(L="/"+L))}if(!f[pt])for(var C=0,tt=l.length;C<tt;C++){var k=l[C];if(L.indexOf(k)!==-1){var D=encodeURIComponent(k);D===k&&(D=escape(k)),L=L.split(k).join(D)}}var $=L.indexOf("#");$!==-1&&(this.hash=L.substr($),L=L.slice(0,$));var K=L.indexOf("?");if(K!==-1?(this.search=L.substr(K),this.query=L.substr(K+1),w&&(this.query=p.parse(this.query)),L=L.slice(0,K)):w&&(this.search="",this.query={}),L&&(this.pathname=L),g[pt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var S=this.pathname||"",rt=this.search||"";this.path=S+rt}return this.href=this.format(),this};function x(b){return typeof b=="string"&&(b=y(b)),b instanceof t?b.format():t.prototype.format.call(b)}t.prototype.format=function(){var b=this.auth||"";b&&(b=encodeURIComponent(b),b=b.replace(/%3A/i,":"),b+="@");var w=this.protocol||"",v=this.pathname||"",R=this.hash||"",P=!1,F="";this.host?P=b+this.host:this.hostname&&(P=b+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(P+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(F=p.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var B=this.search||F&&"?"+F||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||g[w])&&P!==!1?(P="//"+(P||""),v&&v.charAt(0)!=="/"&&(v="/"+v)):P||(P=""),R&&R.charAt(0)!=="#"&&(R="#"+R),B&&B.charAt(0)!=="?"&&(B="?"+B),v=v.replace(/[?#]/g,function(L){return encodeURIComponent(L)}),B=B.replace("#","%23"),w+P+v+B+R};function _(b,w){return y(b,!1,!0).resolve(w)}t.prototype.resolve=function(b){return this.resolveObject(y(b,!1,!0)).format()};function A(b,w){return b?y(b,!1,!0).resolveObject(w):w}return t.prototype.resolveObject=function(b){if(typeof b=="string"){var w=new t;w.parse(b,!1,!0),b=w}for(var v=new t,R=Object.keys(this),P=0;P<R.length;P++){var F=R[P];v[F]=this[F]}if(v.hash=b.hash,b.href==="")return v.href=v.format(),v;if(b.slashes&&!b.protocol){for(var B=Object.keys(b),L=0;L<B.length;L++){var Y=B[L];Y!=="protocol"&&(v[Y]=b[Y])}return g[v.protocol]&&v.hostname&&!v.pathname&&(v.pathname="/",v.path=v.pathname),v.href=v.format(),v}if(b.protocol&&b.protocol!==v.protocol){if(!g[b.protocol]){for(var Z=Object.keys(b),pt=0;pt<Z.length;pt++){var E=Z[pt];v[E]=b[E]}return v.href=v.format(),v}if(v.protocol=b.protocol,!b.host&&!m[b.protocol]){for(var tt=(b.pathname||"").split("/");tt.length&&!(b.host=tt.shift()););b.host||(b.host=""),b.hostname||(b.hostname=""),tt[0]!==""&&tt.unshift(""),tt.length<2&&tt.unshift(""),v.pathname=tt.join("/")}else v.pathname=b.pathname;if(v.search=b.search,v.query=b.query,v.host=b.host||"",v.auth=b.auth,v.hostname=b.hostname||b.host,v.port=b.port,v.pathname||v.search){var T=v.pathname||"",C=v.search||"";v.path=T+C}return v.slashes=v.slashes||b.slashes,v.href=v.format(),v}var O=v.pathname&&v.pathname.charAt(0)==="/",N=b.host||b.pathname&&b.pathname.charAt(0)==="/",V=N||O||v.host&&b.pathname,G=V,X=v.pathname&&v.pathname.split("/")||[],tt=b.pathname&&b.pathname.split("/")||[],st=v.protocol&&!g[v.protocol];if(st&&(v.hostname="",v.port=null,v.host&&(X[0]===""?X[0]=v.host:X.unshift(v.host)),v.host="",b.protocol&&(b.hostname=null,b.port=null,b.host&&(tt[0]===""?tt[0]=b.host:tt.unshift(b.host)),b.host=null),V=V&&(tt[0]===""||X[0]==="")),N)v.host=b.host||b.host===""?b.host:v.host,v.hostname=b.hostname||b.hostname===""?b.hostname:v.hostname,v.search=b.search,v.query=b.query,X=tt;else if(tt.length)X||(X=[]),X.pop(),X=X.concat(tt),v.search=b.search,v.query=b.query;else if(b.search!=null){if(st){v.host=X.shift(),v.hostname=v.host;var at=v.host&&v.host.indexOf("@")>0?v.host.split("@"):!1;at&&(v.auth=at.shift(),v.hostname=at.shift(),v.host=v.hostname)}return v.search=b.search,v.query=b.query,(v.pathname!==null||v.search!==null)&&(v.path=(v.pathname?v.pathname:"")+(v.search?v.search:"")),v.href=v.format(),v}if(!X.length)return v.pathname=null,v.search?v.path="/"+v.search:v.path=null,v.href=v.format(),v;for(var U=X.slice(-1)[0],Q=(v.host||b.host||X.length>1)&&(U==="."||U==="..")||U==="",q=0,z=X.length;z>=0;z--)U=X[z],U==="."?X.splice(z,1):U===".."?(X.splice(z,1),q++):q&&(X.splice(z,1),q--);if(!V&&!G)for(;q--;q)X.unshift("..");V&&X[0]!==""&&(!X[0]||X[0].charAt(0)!=="/")&&X.unshift(""),Q&&X.join("/").substr(-1)!=="/"&&X.push("");var nt=X[0]===""||X[0]&&X[0].charAt(0)==="/";if(st){v.hostname=nt?"":X.length?X.shift():"",v.host=v.hostname;var at=v.host&&v.host.indexOf("@")>0?v.host.split("@"):!1;at&&(v.auth=at.shift(),v.hostname=at.shift(),v.host=v.hostname)}return V=V||v.host&&X.length,V&&!nt&&X.unshift(""),X.length>0?v.pathname=X.join("/"):(v.pathname=null,v.path=null),(v.pathname!==null||v.search!==null)&&(v.path=(v.pathname?v.pathname:"")+(v.search?v.search:"")),v.auth=b.auth||v.auth,v.slashes=v.slashes||b.slashes,v.href=v.format(),v},t.prototype.parseHost=function(){var b=this.host,w=r.exec(b);w&&(w=w[0],w!==":"&&(this.port=w.substr(1)),b=b.substr(0,b.length-w.length)),b&&(this.hostname=b)},Ln.parse=y,Ln.resolve=_,Ln.resolveObject=A,Ln.format=x,Ln.Url=t,Ln}IP();const sy={};function $t(s,t,e=3){if(sy[t])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(r=r.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(r))),sy[t]=!0}function Zs(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function _a(s){return s.split("?")[0].split("#")[0]}function MP(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function PP(s,t,e){return s.replace(new RegExp(MP(t),"g"),e)}function FP(s,t){let e="",r=0,n=-1,i=0,o=-1;for(let l=0;l<=s.length;++l){if(l<s.length)o=s.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(n===l-1||i===1))if(n!==l-1&&i===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",r=0):(e=e.slice(0,a),r=e.length-1-e.lastIndexOf("/")),n=l,i=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=l,i=0;continue}}}else e.length>0?e+=`/${s.slice(n+1,l)}`:e=s.slice(n+1,l),r=l-n-1;n=l,i=0}else o===46&&i!==-1?++i:i=-1}return e}const ns={toPosix(s){return PP(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){Zs(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(s);return e?e[0]:""},toAbsolute(s,t,e){if(Zs(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const r=_a(this.toPosix(t??Et.ADAPTER.getBaseUrl())),n=_a(this.toPosix(e??this.rootname(r)));return s=this.toPosix(s),s.startsWith("/")?ns.join(n,s.slice(1)):this.isAbsolute(s)?s:this.join(r,s)},normalize(s){if(Zs(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const e=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const r=s.endsWith("/");return s=FP(s),s.length>0&&r&&(s+="/"),e?`/${s}`:t+s},isAbsolute(s){return Zs(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let e=0;e<s.length;++e){const r=s[e];if(Zs(r),r.length>0)if(t===void 0)t=r;else{const n=s[e-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?t+=`/../${r}`:t+=`/${r}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(Zs(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const e=t===47;let r=-1,n=!0;const i=this.getProtocol(s),o=s;s=s.slice(i.length);for(let l=s.length-1;l>=1;--l)if(t=s.charCodeAt(l),t===47){if(!n){r=l;break}}else n=!1;return r===-1?e?"/":this.isUrl(o)?i+s:i:e&&r===1?"//":i+s.slice(0,r)},rootname(s){Zs(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const e=s.indexOf("/",t.length);e!==-1?t=s.slice(0,e):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){Zs(s),t&&Zs(t),s=_a(this.toPosix(s));let e=0,r=-1,n=!0,i;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let o=t.length-1,l=-1;for(i=s.length-1;i>=0;--i){const a=s.charCodeAt(i);if(a===47){if(!n){e=i+1;break}}else l===-1&&(n=!1,l=i+1),o>=0&&(a===t.charCodeAt(o)?--o===-1&&(r=i):(o=-1,r=l))}return e===r?r=l:r===-1&&(r=s.length),s.slice(e,r)}for(i=s.length-1;i>=0;--i)if(s.charCodeAt(i)===47){if(!n){e=i+1;break}}else r===-1&&(n=!1,r=i+1);return r===-1?"":s.slice(e,r)},extname(s){Zs(s),s=_a(this.toPosix(s));let t=-1,e=0,r=-1,n=!0,i=0;for(let o=s.length-1;o>=0;--o){const l=s.charCodeAt(o);if(l===47){if(!n){e=o+1;break}continue}r===-1&&(n=!1,r=o+1),l===46?t===-1?t=o:i!==1&&(i=1):t!==-1&&(i=-1)}return t===-1||r===-1||i===0||i===1&&t===r-1&&t===e+1?"":s.slice(t,r)},parse(s){Zs(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=_a(this.toPosix(s));let e=s.charCodeAt(0);const r=this.isAbsolute(s);let n;t.root=this.rootname(s),r||this.hasProtocol(s)?n=1:n=0;let i=-1,o=0,l=-1,a=!0,h=s.length-1,c=0;for(;h>=n;--h){if(e=s.charCodeAt(h),e===47){if(!a){o=h+1;break}continue}l===-1&&(a=!1,l=h+1),e===46?i===-1?i=h:c!==1&&(c=1):i!==-1&&(c=-1)}return i===-1||l===-1||c===0||c===1&&i===l-1&&i===o+1?l!==-1&&(o===0&&r?t.base=t.name=s.slice(1,l):t.base=t.name=s.slice(o,l)):(o===0&&r?(t.name=s.slice(1,i),t.base=s.slice(1,l)):(t.name=s.slice(o,i),t.base=s.slice(o,l)),t.ext=s.slice(i,l)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let iu;async function BP(){return iu??(iu=(async()=>{var i;const s=document.createElement("canvas").getContext("webgl");if(!s)return Vs.UNPACK;const t=await new Promise(o=>{const l=document.createElement("video");l.onloadeddata=()=>o(l),l.onerror=()=>o(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!t)return Vs.UNPACK;const e=s.createTexture();s.bindTexture(s.TEXTURE_2D,e);const r=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,r),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,e,0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t);const n=new Uint8Array(4);return s.readPixels(0,0,1,1,s.RGBA,s.UNSIGNED_BYTE,n),s.deleteFramebuffer(r),s.deleteTexture(e),(i=s.getExtension("WEBGL_lose_context"))==null||i.loseContext(),n[0]<=n[3]?Vs.PMA:Vs.UNPACK})()),iu}let au;function kP(){return typeof au>"u"&&(au=function(){var t;const s={stencil:!0,failIfMajorPerformanceCaveat:Et.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Et.ADAPTER.getWebGLRenderingContext())return!1;const e=Et.ADAPTER.createCanvas();let r=e.getContext("webgl",s)||e.getContext("experimental-webgl",s);const n=!!((t=r==null?void 0:r.getContextAttributes())!=null&&t.stencil);if(r){const i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch{return!1}}()),au}x0([_0]);const Ci=class ol{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof ol)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,i)=>n===e[i]);if(t!==null&&e!==null){const n=Object.keys(t),i=Object.keys(e);return n.length!==i.length?!1:n.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,r,n]=this._components;return{r:t,g:e,b:r,a:n}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,r,n]=this._components;return t[0]=e,t[1]=r,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,n,i]=ol.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=n,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=this._int&255;return e&&(r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0),(t*255<<24)+(r<<16)+(n<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,r,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(r*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,r,n,i]=this._components;return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}normalize(t){let e,r,n,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,r=(o>>8&255)/255,n=(o&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,n,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,n,i=255]=t,e/=255,r/=255,n/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const l=ol.HEX_PATTERN.exec(t);l&&(t=`#${l[2]}`)}const o=ir(t);o.isValid()&&({r:e,g:r,b:n,a:i}=o.rgba,e/=255,r/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=n,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((n,i)=>{t[i]=Math.min(Math.max(n,e),r)}),t)}};Ci.shared=new Ci,Ci.temp=new Ci,Ci.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let es=Ci;function NP(s,t=[]){return $t("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),es.shared.setValue(s).toRgbArray(t)}function ou(s){return $t("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),es.shared.setValue(s).toNumber()}function OP(){const s=[],t=[];for(let r=0;r<32;r++)s[r]=r,t[r]=r;s[ft.NORMAL_NPM]=ft.NORMAL,s[ft.ADD_NPM]=ft.ADD,s[ft.SCREEN_NPM]=ft.SCREEN,t[ft.NORMAL]=ft.NORMAL_NPM,t[ft.ADD]=ft.ADD_NPM,t[ft.SCREEN]=ft.SCREEN_NPM;const e=[];return e.push(t),e.push(s),e}const LP=OP();function W_(s){if(s.BYTES_PER_ELEMENT===4)return s instanceof Float32Array?"Float32Array":s instanceof Uint32Array?"Uint32Array":"Int32Array";if(s.BYTES_PER_ELEMENT===2){if(s instanceof Uint16Array)return"Uint16Array"}else if(s.BYTES_PER_ELEMENT===1&&s instanceof Uint8Array)return"Uint8Array";return null}function Il(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function ry(s){return!(s&s-1)&&!!s}function ny(s){let t=(s>65535?1:0)<<4;s>>>=t;let e=(s>255?1:0)<<3;return s>>>=e,t|=e,e=(s>15?1:0)<<2,s>>>=e,t|=e,e=(s>3?1:0)<<1,s>>>=e,t|=e,t|s>>1}function ll(s,t,e){const r=s.length;let n;if(t>=r||e===0)return;e=t+e>r?r-t:e;const i=r-e;for(n=t;n<i;++n)s[n]=s[n+e];s.length=i}function Do(s){return s===0?0:s<0?-1:1}let VP=0;function ro(){return++VP}const iy={},vr=Object.create(null),en=Object.create(null);function UP(s,t=globalThis.location){if(s.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(s,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function no(s,t=1){var r;const e=(r=Et.RETINA_PREFIX)==null?void 0:r.exec(s);return e?parseFloat(e[1]):t}var mt=(s=>(s.Renderer="renderer",s.Application="application",s.RendererSystem="renderer-webgl-system",s.RendererPlugin="renderer-webgl-plugin",s.CanvasRendererSystem="renderer-canvas-system",s.CanvasRendererPlugin="renderer-canvas-plugin",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s))(mt||{});const od=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},ay=(s,t)=>od(s).priority??t,wt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(od).forEach(t=>{t.type.forEach(e=>{var r,n;return(n=(r=this._removeHandlers)[e])==null?void 0:n.call(r,t)})}),this},add(...s){return s.map(od).forEach(t=>{t.type.forEach(e=>{var i,o;const r=this._addHandlers,n=this._queue;r[e]?(i=r[e])==null||i.call(r,t):(n[e]=n[e]||[],(o=n[e])==null||o.push(t))})}),this},handle(s,t,e){var o;const r=this._addHandlers,n=this._removeHandlers;if(r[s]||n[s])throw new Error(`Extension type ${s} already has a handler`);r[s]=t,n[s]=e;const i=this._queue;return i[s]&&((o=i[s])==null||o.forEach(l=>t(l)),delete i[s]),this},handleByMap(s,t){return this.handle(s,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(s,t,e=-1){return this.handle(s,r=>{t.includes(r.ref)||(t.push(r.ref),t.sort((n,i)=>ay(i,e)-ay(n,e)))},r=>{const n=t.indexOf(r.ref);n!==-1&&t.splice(n,1)})}};class DP{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const GP=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function $P(s){let t="";for(let e=0;e<s;++e)e>0&&(t+=`
else `),e<s-1&&(t+=`if(test == ${e}.0){}`);return t}function XP(s,t){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const r=GP.replace(/%forloop%/gi,$P(s));if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))s=s/2|0;else break}return s}const lu=0,hu=1,cu=2,uu=3,du=4,fu=5;class Mn{constructor(){this.data=0,this.blendMode=ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<lu)}set blend(t){!!(this.data&1<<lu)!==t&&(this.data^=1<<lu)}get offsets(){return!!(this.data&1<<hu)}set offsets(t){!!(this.data&1<<hu)!==t&&(this.data^=1<<hu)}get culling(){return!!(this.data&1<<cu)}set culling(t){!!(this.data&1<<cu)!==t&&(this.data^=1<<cu)}get depthTest(){return!!(this.data&1<<uu)}set depthTest(t){!!(this.data&1<<uu)!==t&&(this.data^=1<<uu)}get depthMask(){return!!(this.data&1<<fu)}set depthMask(t){!!(this.data&1<<fu)!==t&&(this.data^=1<<fu)}get clockwiseFrontFace(){return!!(this.data&1<<du)}set clockwiseFrontFace(t){!!(this.data&1<<du)!==t&&(this.data^=1<<du)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ft.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new Mn;return t.depthTest=!1,t.blend=!0,t}}Mn.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const ld=[];function q_(s,t){if(!s)return null;let e="";if(typeof s=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(s);r&&(e=r[1].toLowerCase())}for(let r=ld.length-1;r>=0;--r){const n=ld[r];if(n.test&&n.test(s,e))return new n(s,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class pr{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,r,n,i,o,l,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:c}=this;this._aliasCount++;for(let u=0,d=c.length;u<d;u++)c[u][h](t,e,r,n,i,o,l,a);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(pr.prototype,{dispatch:{value:pr.prototype.emit},run:{value:pr.prototype.emit}});class io{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new pr("setRealSize"),this.onUpdate=new pr("update"),this.onError=new pr("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class K_ extends io{constructor(t,e){const{width:r,height:n}=e||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,r){const n=t.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Vs.UNPACK);const i=e.realWidth,o=e.realHeight;return r.width===i&&r.height===o?n.texSubImage2D(e.target,0,0,0,i,o,e.format,r.type,this.data):(r.width=i,r.height=o,n.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const HP={scaleMode:Rs.NEAREST,alphaMode:Vs.NPM},hd=class Ri extends ah{constructor(t=null,e=null){super(),e=Object.assign({},Ri.defaultOptions,e);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:o,width:l,height:a,wrapMode:h,format:c,type:u,target:d,resolution:f,resourceOptions:m}=e;t&&!(t instanceof io)&&(t=q_(t,m),t.internal=!0),this.resolution=f||Et.RESOLUTION,this.width=Math.round((l||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=h,this._scaleMode=o,this.format=c,this.type=u,this.target=d,this.alphaMode=r,this.uid=ro(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=l>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=ry(this.realWidth)&&ry(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete en[this.cacheId],delete vr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Ri.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=Et.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let i=null;if(n)i=t;else{if(!t._pixiId){const l=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${l}_${ro()}`}i=t._pixiId}let o=en[i];if(n&&r&&!o)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return o||(o=new Ri(t,e),o.cacheId=i,Ri.addToCache(o,i)),o}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const i=new K_(t,{width:e,height:r,...n==null?void 0:n.resourceOptions});let o,l;return t instanceof Float32Array?(o=ut.RGBA,l=Ft.FLOAT):t instanceof Int32Array?(o=ut.RGBA_INTEGER,l=Ft.INT):t instanceof Uint32Array?(o=ut.RGBA_INTEGER,l=Ft.UNSIGNED_INT):t instanceof Int16Array?(o=ut.RGBA_INTEGER,l=Ft.SHORT):t instanceof Uint16Array?(o=ut.RGBA_INTEGER,l=Ft.UNSIGNED_SHORT):t instanceof Int8Array?(o=ut.RGBA,l=Ft.BYTE):(o=ut.RGBA,l=Ft.UNSIGNED_BYTE),i.internal=!0,new Ri(i,Object.assign({},HP,{type:l,format:o},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),en[e]&&en[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),en[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=en[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete en[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete en[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};hd.defaultOptions={mipmap:wn.POW2,anisotropicLevel:0,scaleMode:Rs.LINEAR,wrapMode:so.CLAMP,alphaMode:Vs.UNPACK,target:Yi.TEXTURE_2D,format:ut.RGBA,type:Ft.UNSIGNED_BYTE},hd._globalBatch=0;let Dt=hd;class cd{constructor(){this.texArray=null,this.blend=0,this.type=dr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let YP=0;class He{constructor(t,e=!0,r=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=YP++,this.disposeRunner=new pr("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Cr.ELEMENT_ARRAY_BUFFER:Cr.ARRAY_BUFFER}get index(){return this.type===Cr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new He(t)}}class Ml{constructor(t,e=0,r=!1,n=Ft.FLOAT,i,o,l,a=1){this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=o,this.instance=l,this.divisor=a}destroy(){this.buffer=null}static from(t,e,r,n,i){return new Ml(t,e,r,n,i)}}const jP={Float32Array,Uint32Array,Int32Array,Uint8Array};function zP(s,t){let e=0,r=0;const n={};for(let a=0;a<s.length;a++)r+=t[a],e+=s[a].length;const i=new ArrayBuffer(e*4);let o=null,l=0;for(let a=0;a<s.length;a++){const h=t[a],c=s[a],u=W_(c);n[u]||(n[u]=new jP[u](i)),o=n[u];for(let d=0;d<c.length;d++){const f=(d/h|0)*r+l,m=d%h;o[f+m]=c[d]}l+=h}return new Float32Array(i)}const oy={5126:4,5123:2,5121:1};let WP=0;const qP={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ai{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=WP++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new pr("disposeGeometry"),this.refCount=0}addAttribute(t,e,r=0,n=!1,i,o,l,a=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof He||(e instanceof Array&&(e=new Float32Array(e)),e=new He(e));const h=t.split("|");if(h.length>1){for(let u=0;u<h.length;u++)this.addAttribute(h[u],e,r,n,i);return this}let c=this.buffers.indexOf(e);return c===-1&&(this.buffers.push(e),c=this.buffers.length-1),this.attributes[t]=new Ml(c,r,n,i,o,l,a),this.instanced=this.instanced||a,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof He||(t instanceof Array&&(t=new Uint16Array(t)),t=new He(t)),t.type=Cr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],r=new He;let n;for(n in this.attributes){const i=this.attributes[n],o=this.buffers[i.buffer];t.push(o.data),e.push(i.size*oy[i.type]/4),i.buffer=0}for(r.data=zP(t,e),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new ai;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new He(this.buffers[e].data.slice(0));for(const e in this.attributes){const r=this.attributes[e];t.attributes[e]=new Ml(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Cr.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new ai,r=[],n=[],i=[];let o;for(let l=0;l<t.length;l++){o=t[l];for(let a=0;a<o.buffers.length;a++)n[a]=n[a]||0,n[a]+=o.buffers[a].data.length,i[a]=0}for(let l=0;l<o.buffers.length;l++)r[l]=new qP[W_(o.buffers[l].data)](n[l]),e.buffers[l]=new He(r[l]);for(let l=0;l<t.length;l++){o=t[l];for(let a=0;a<o.buffers.length;a++)r[a].set(o.buffers[a].data,i[a]),i[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=Cr.ELEMENT_ARRAY_BUFFER;let l=0,a=0,h=0,c=0;for(let u=0;u<o.buffers.length;u++)if(o.buffers[u]!==o.indexBuffer){c=u;break}for(const u in o.attributes){const d=o.attributes[u];(d.buffer|0)===c&&(a+=d.size*oy[d.type]/4)}for(let u=0;u<t.length;u++){const d=t[u].indexBuffer.data;for(let f=0;f<d.length;f++)e.indexBuffer.data[f+h]+=l;l+=t[u].buffers[c].data.length/a,h+=d.length}}return e}}class Z_ extends ai{constructor(t=!1){super(),this._buffer=new He(null,t,!1),this._indexBuffer=new He(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ft.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ft.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ft.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ft.FLOAT).addIndex(this._indexBuffer)}}const Pl=Math.PI*2,KP=180/Math.PI,ZP=Math.PI/180;var Ke=(s=>(s[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC",s))(Ke||{});class Ee{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Ee(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}Ee.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Go=[new Ee,new Ee,new Ee,new Ee];class Ht{constructor(t=0,e=0,r=0,n=0){this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=Ke.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ht(0,0,0,0)}clone(){return new Ht(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const R=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=R)return!1;const P=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>P}const r=this.left,n=this.right,i=this.top,o=this.bottom;if(n<=r||o<=i)return!1;const l=Go[0].set(t.left,t.top),a=Go[1].set(t.left,t.bottom),h=Go[2].set(t.right,t.top),c=Go[3].set(t.right,t.bottom);if(h.x<=l.x||a.y<=l.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(l,l),e.apply(a,a),e.apply(h,h),e.apply(c,c),Math.max(l.x,a.x,h.x,c.x)<=r||Math.min(l.x,a.x,h.x,c.x)>=n||Math.max(l.y,a.y,h.y,c.y)<=i||Math.min(l.y,a.y,h.y,c.y)>=o))return!1;const d=u*(a.y-l.y),f=u*(l.x-a.x),m=d*r+f*i,g=d*n+f*i,p=d*r+f*o,y=d*n+f*o;if(Math.max(m,g,p,y)<=d*l.x+f*l.y||Math.min(m,g,p,y)>=d*c.x+f*c.y)return!1;const x=u*(l.y-h.y),_=u*(h.x-l.x),A=x*r+_*i,b=x*n+_*i,w=x*r+_*o,v=x*n+_*o;return!(Math.max(A,b,w,v)<=x*l.x+_*l.y||Math.min(A,b,w,v)>=x*c.x+_*c.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(t=1,e=.001){const r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this}}Ht.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class hh{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.radius=r,this.type=Ke.CIRC}clone(){return new hh(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const r=this.radius*this.radius;let n=this.x-t,i=this.y-e;return n*=n,i*=i,n+i<=r}getBounds(){return new Ht(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}hh.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class ch{constructor(t=0,e=0,r=0,n=0){this.x=t,this.y=e,this.width=r,this.height=n,this.type=Ke.ELIP}clone(){return new ch(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let r=(t-this.x)/this.width,n=(e-this.y)/this.height;return r*=r,n*=n,r+n<=1}getBounds(){return new Ht(this.x-this.width,this.y-this.height,this.width,this.height)}}ch.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class bn{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const r=[];for(let n=0,i=e.length;n<i;n++)r.push(e[n].x,e[n].y);e=r}this.points=e,this.type=Ke.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new bn(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let r=!1;const n=this.points.length/2;for(let i=0,o=n-1;i<n;o=i++){const l=this.points[i*2],a=this.points[i*2+1],h=this.points[o*2],c=this.points[o*2+1];a>e!=c>e&&t<(h-l)*((e-a)/(c-a))+l&&(r=!r)}return r}}bn.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((s,t)=>`${s}, ${t}`,"")}]`};class uh{constructor(t=0,e=0,r=0,n=0,i=20){this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=Ke.RREC}clone(){return new uh(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;let n=t-(this.x+r),i=e-(this.y+r);const o=r*r;if(n*n+i*i<=o||(n=t-(this.x+this.width-r),n*n+i*i<=o)||(i=e-(this.y+this.height-r),n*n+i*i<=o)||(n=t-(this.x+r),n*n+i*i<=o))return!0}return!1}}uh.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Se{constructor(t=1,e=0,r=0,n=1,i=0,o=0){this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(t,e){e=e||new Ee;const r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e}applyInverse(t,e){e=e||new Ee;const r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this}append(t){const e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this}setTransform(t,e,r,n,i,o,l,a,h){return this.a=Math.cos(l+h)*i,this.b=Math.sin(l+h)*i,this.c=-Math.sin(l-a)*o,this.d=Math.cos(l-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,r=this.b,n=this.c,i=this.d,o=t.pivot,l=-Math.atan2(-n,i),a=Math.atan2(r,e),h=Math.abs(l+a);return h<1e-5||Math.abs(Pl-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*i),t}invert(){const t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Se;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Se}static get TEMP_MATRIX(){return new Se}}Se.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const zn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Wn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],qn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Kn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ud=[],Q_=[],$o=Math.sign;function QP(){for(let s=0;s<16;s++){const t=[];ud.push(t);for(let e=0;e<16;e++){const r=$o(zn[s]*zn[e]+qn[s]*Wn[e]),n=$o(Wn[s]*zn[e]+Kn[s]*Wn[e]),i=$o(zn[s]*qn[e]+qn[s]*Kn[e]),o=$o(Wn[s]*qn[e]+Kn[s]*Kn[e]);for(let l=0;l<16;l++)if(zn[l]===r&&Wn[l]===n&&qn[l]===i&&Kn[l]===o){t.push(l);break}}}for(let s=0;s<16;s++){const t=new Se;t.set(zn[s],Wn[s],qn[s],Kn[s],0,0),Q_.push(t)}}QP();const me={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>zn[s],uY:s=>Wn[s],vX:s=>qn[s],vY:s=>Kn[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>ud[s][t],sub:(s,t)=>ud[s][me.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?me.S:me.N:Math.abs(t)*2<=Math.abs(s)?s>0?me.E:me.W:t>0?s>0?me.SE:me.SW:s>0?me.NE:me.NW,matrixAppendRotationInv:(s,t,e=0,r=0)=>{const n=Q_[me.inv(t)];n.tx=e,n.ty=r,s.append(n)}};class pn{constructor(t,e,r=0,n=0){this._x=r,this._y=n,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new pn(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}pn.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const dd=class{constructor(){this.worldTransform=new Se,this.localTransform=new Se,this.position=new pn(this.onChange,this,0,0),this.scale=new pn(this.onChange,this,1,1),this.pivot=new pn(this.onChange,this,0,0),this.skew=new pn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const s=this.localTransform;this._localID!==this._currentLocalID&&(s.a=this._cx*this.scale.x,s.b=this._sx*this.scale.x,s.c=this._cy*this.scale.y,s.d=this._sy*this.scale.y,s.tx=this.position.x-(this.pivot.x*s.a+this.pivot.y*s.c),s.ty=this.position.y-(this.pivot.x*s.b+this.pivot.y*s.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(s){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==s._worldID){const e=s.worldTransform,r=this.worldTransform;r.a=t.a*e.a+t.b*e.c,r.b=t.a*e.b+t.b*e.d,r.c=t.c*e.a+t.d*e.c,r.d=t.c*e.b+t.d*e.d,r.tx=t.tx*e.a+t.ty*e.c+e.tx,r.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=s._worldID,this._worldID++}}setFromMatrix(s){s.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(s){this._rotation!==s&&(this._rotation=s,this.updateSkew())}};dd.IDENTITY=new dd;let dh=dd;dh.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var JP=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,tF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function ly(s,t,e){const r=s.createShader(t);return s.shaderSource(r,e),s.compileShader(r),r}function mu(s){const t=new Array(s);for(let e=0;e<t.length;e++)t[e]=!1;return t}function J_(s,t){switch(s){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return mu(2*t);case"bvec3":return mu(3*t);case"bvec4":return mu(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ji=[{test:s=>s.type==="float"&&s.size===1&&!s.isArray,code:s=>`
            if(uv["${s}"] !== ud["${s}"].value)
            {
                ud["${s}"].value = uv["${s}"]
                gl.uniform1f(ud["${s}"].location, uv["${s}"])
            }
            `},{test:(s,t)=>(s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray&&(t==null||t.castToBaseTexture!==void 0),code:s=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${s}"], t);

            if(ud["${s}"].value !== t)
            {
                ud["${s}"].value = t;
                gl.uniform1i(ud["${s}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(s,t)=>s.type==="mat3"&&s.size===1&&!s.isArray&&t.a!==void 0,code:s=>`
            gl.uniformMatrix3fv(ud["${s}"].location, false, uv["${s}"].toArray(true));
            `,codeUbo:s=>`
                var ${s}_matrix = uv.${s}.toArray(true);

                data[offset] = ${s}_matrix[0];
                data[offset+1] = ${s}_matrix[1];
                data[offset+2] = ${s}_matrix[2];
        
                data[offset + 4] = ${s}_matrix[3];
                data[offset + 5] = ${s}_matrix[4];
                data[offset + 6] = ${s}_matrix[5];
        
                data[offset + 8] = ${s}_matrix[6];
                data[offset + 9] = ${s}_matrix[7];
                data[offset + 10] = ${s}_matrix[8];
            `},{test:(s,t)=>s.type==="vec2"&&s.size===1&&!s.isArray&&t.x!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${s}"].location, v.x, v.y);
                }`,codeUbo:s=>`
                v = uv.${s};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:s=>s.type==="vec2"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${s}"].location, v[0], v[1]);
                }
            `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.width!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${s}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${s}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(s,t)=>s.type==="vec3"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${s}"].location, v.red, v.green, v.blue)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:s=>s.type==="vec4"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${s}"].location, v[0], v[1], v[2], v[3])
                }`}],eF={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},sF={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function rF(s,t){var r;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in s.uniforms){const i=t[n];if(!i){((r=s.uniforms[n])==null?void 0:r.group)===!0&&(s.uniforms[n].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=s.uniforms[n];let l=!1;for(let a=0;a<ji.length;a++)if(ji[a].test(i,o)){e.push(ji[a].code(n,o)),l=!0;break}if(!l){const a=(i.size===1&&!i.isArray?eF:sF)[i.type].replace("location",`ud["${n}"].location`);e.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const tA={};let bi=tA;function nF(){if(bi===tA||bi!=null&&bi.isContextLost()){const s=Et.ADAPTER.createCanvas();let t;Et.PREFER_ENV>=ci.WEBGL2&&(t=s.getContext("webgl2",{})),t||(t=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),bi=t}return bi}let Xo;function iF(){if(!Xo){Xo=Us.MEDIUM;const s=nF();if(s&&s.getShaderPrecisionFormat){const t=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);t&&(Xo=t.precision?Us.HIGH:Us.MEDIUM)}}return Xo}function hy(s,t){const e=s.getShaderSource(t).split(`
`).map((h,c)=>`${c}: ${h}`),r=s.getShaderInfoLog(t),n=r.split(`
`),i={},o=n.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!i[h]?(i[h]=!0,!0):!1),l=[""];o.forEach(h=>{e[h-1]=`%c${e[h-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const a=e.join(`
`);l[0]=a,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function aF(s,t,e,r){s.getProgramParameter(t,s.LINK_STATUS)||(s.getShaderParameter(e,s.COMPILE_STATUS)||hy(s,e),s.getShaderParameter(r,s.COMPILE_STATUS)||hy(s,r),console.error("PixiJS Error: Could not initialize shader."),s.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",s.getProgramInfoLog(t)))}const oF={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function eA(s){return oF[s]}let Ho=null;const cy={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function sA(s,t){if(!Ho){const e=Object.keys(cy);Ho={};for(let r=0;r<e.length;++r){const n=e[r];Ho[s[n]]=cy[n]}}return Ho[t]}function uy(s,t,e){if(s.substring(0,9)!=="precision"){let r=t;return t===Us.HIGH&&e!==Us.HIGH&&(r=Us.MEDIUM),`precision ${r} float;
${s}`}else if(e!==Us.HIGH&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}let Aa;function lF(){if(typeof Aa=="boolean")return Aa;try{Aa=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Aa=!1}return Aa}let hF=0;const Yo={},fd=class Ii{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=hF++,this.vertexSrc=t||Ii.defaultVertexSrc,this.fragmentSrc=e||Ii.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Yo[r]?(Yo[r]++,r+=`-${Yo[r]}`):Yo[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=uy(this.vertexSrc,Ii.defaultVertexPrecision,Us.HIGH),this.fragmentSrc=uy(this.fragmentSrc,Ii.defaultFragmentPrecision,iF())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return tF}static get defaultFragmentSrc(){return JP}static from(t,e,r){const n=t+e;let i=iy[n];return i||(iy[n]=i=new Ii(t,e,r)),i}};fd.defaultVertexPrecision=Us.HIGH,fd.defaultFragmentPrecision=ki.apple.device?Us.HIGH:Us.MEDIUM;let gn=fd,cF=0;class gr{constructor(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=cF++,this.static=!!e,this.ubo=!!r,t instanceof He?(this.buffer=t,this.buffer.type=Cr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new He(new Float32Array(1)),this.buffer.type=Cr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,r){if(!this.ubo)this.uniforms[t]=new gr(e,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,r){return new gr(t,e,r)}static uboFrom(t,e){return new gr(t,e??!0,!0)}}class ca{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof gr?this.uniformGroup=e:this.uniformGroup=new gr(e):this.uniformGroup=new gr({}),this.disposeRunner=new pr("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const r in e.uniforms){const n=e.uniforms[r];if(n.group===!0&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,r){const n=gn.from(t,e);return new ca(n,r)}}class uF{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const r=new Int32Array(t);for(let i=0;i<t;i++)r[i]=i;this.defaultGroupCache[t]=gr.from({uSamplers:r},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new gn(this.vertexSrc,n)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Se,default:this.defaultGroupCache[t]};return new ca(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let r=0;r<t;r++)r>0&&(e+=`
else `),r<t-1&&(e+=`if(vTextureId < ${r}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class md{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function dF(){return!ki.apple.device}function fF(s){let t=!0;const e=Et.ADAPTER.getNavigator();if(ki.tablet||ki.phone){if(ki.apple.device){const r=e.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(t=!1)}if(ki.android.device){const r=e.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(t=!1)}}return t?s:4}class rA{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var mF=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,pF=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Ia=class Qs extends rA{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Z_,this.vertexSize=6,this.state=Mn.for2d(),this.size=Qs.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??fF(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??dF(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return $t("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return pF}static get defaultFragmentTemplate(){return mF}setShaderGenerator({vertex:t=Qs.defaultVertexSrc,fragment:e=Qs.defaultFragmentTemplate}={}){this.shaderGenerator=new uF(t,e)}contextChange(){const t=this.renderer.gl;Et.PREFER_ENV===ci.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Qs.defaultMaxTextures),this.maxTextures=XP(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Qs,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new cd);for(;e.length<n;)e.push(new md);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=Qs._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,o=this.renderer.textureGC.count;let l=++Dt._globalBatch,a=0,h=r[0],c=0;n.copyBoundTextures(i,e);for(let u=0;u<this._bufferSize;++u){const d=t[u];t[u]=null,d._batchEnabled!==l&&(h.count>=e&&(n.boundArray(h,i,l,e),this.buildDrawCalls(h,c,u),c=u,h=r[++a],++l),d._batchEnabled=l,d.touched=o,h.elements[h.count++]=d)}h.count>0&&(n.boundArray(h,i,l,e),this.buildDrawCalls(h,c,this._bufferSize),++a,++l);for(let u=0;u<i.length;u++)i[u]=null;Dt._globalBatch=l}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:o,vertexSize:l}=this,a=Qs._drawCallPool;let h=this._dcIndex,c=this._aIndex,u=this._iIndex,d=a[h];d.start=this._iIndex,d.texArray=t;for(let f=e;f<r;++f){const m=n[f],g=m._texture.baseTexture,p=LP[g.alphaMode?1:0][m.blendMode];n[f]=null,e<f&&d.blend!==p&&(d.size=u-d.start,e=f,d=a[++h],d.texArray=t,d.start=u),this.packInterleavedGeometry(m,i,o,c,u),c+=m.vertexData.length/2*l,u+=m.indices.length,d.blend=p}e<r&&(d.size=u-d.start,++h),this._dcIndex=h,this._aIndex=c,this._iIndex=u}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;Qs.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=Qs._drawCallPool;let i=null;for(let o=0;o<t;o++){const{texArray:l,type:a,size:h,start:c,blend:u}=n[o];i!==l&&(i=l,this.bindAndClearTexArray(l)),this.state.blendMode=u,r.set(this.state),e.drawElements(a,h,e.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Qs.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Il(Math.ceil(t/8)),r=ny(e),n=e*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new DP(n*this.vertexSize*4)),i}getIndexBuffer(t){const e=Il(Math.ceil(t/12)),r=ny(e),n=e*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(t,e,r,n,i){const{uint32View:o,float32View:l}=e,a=n/this.vertexSize,h=t.uvs,c=t.indices,u=t.vertexData,d=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),m=es.shared.setValue(t._tintRGB).toPremultiplied(f,t._texture.baseTexture.alphaMode>0);for(let g=0;g<u.length;g+=2)l[n++]=u[g],l[n++]=u[g+1],l[n++]=h[g],l[n++]=h[g+1],o[n++]=m,l[n++]=d;for(let g=0;g<c.length;g++)r[i++]=a+c[g]}};Ia.defaultBatchSize=4096,Ia.extension={name:"batch",type:mt.RendererPlugin},Ia._drawCallPool=[],Ia._textureArrayPool=[];let Zn=Ia;wt.add(Zn);var gF=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,yF=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const pd=class Ma extends ca{constructor(t,e,r){const n=gn.from(t||Ma.defaultVertexSrc,e||Ma.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=Ma.defaultResolution,this.multisample=Ma.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Mn}apply(t,e,r,n,i){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return yF}static get defaultFragmentSrc(){return gF}};pd.defaultResolution=1,pd.defaultMultisample=Ce.NONE;let Ni=pd;class Fl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new es(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:r,backgroundAlpha:n}=t,i=r??e;i!==void 0&&(this.color=i),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Fl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Fl.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"background"};wt.add(Fl);class nA{constructor(t){this.renderer=t,this.emptyRenderer=new rA(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:r}=this.renderer.texture;for(let n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,e,r,n){const{elements:i,ids:o,count:l}=t;let a=0;for(let h=0;h<l;h++){const c=i[h],u=c._batchLocation;if(u>=0&&u<n&&e[u]===c){o[h]=u;continue}for(;a<n;){const d=e[a];if(d&&d._batchEnabled===r&&d._batchLocation===a){a++;continue}o[h]=a,c._batchLocation=a,e[a]=c;break}}}destroy(){this.renderer=null}}nA.extension={type:mt.RendererSystem,name:"batch"};wt.add(nA);let dy=0;class Bl{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=dy++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,r=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:r,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=dy++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let r;if(Et.PREFER_ENV>=ci.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Bl.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Bl.extension={type:mt.RendererSystem,name:"context"};wt.add(Bl);class gd{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new pr("disposeFramebuffer"),this.multisample=Ce.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Dt(null,{scaleMode:Rs.NEAREST,resolution:1,mipmap:wn.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Dt(null,{scaleMode:Rs.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:wn.OFF,format:ut.DEPTH_COMPONENT,type:Ft.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(t/r,e/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class iA extends Dt{constructor(t={}){if(typeof t=="number"){const e=arguments[0],r=arguments[1],n=arguments[2],i=arguments[3];t={width:e,height:r,scaleMode:n,resolution:i}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=Ce.NONE),super(null,t),this.mipmap=wn.OFF,this.valid=!0,this._clear=new es([0,0,0,0]),this.framebuffer=new gd(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Wr extends io{constructor(t){const e=t,r=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,n=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(r,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,r){r===void 0&&!e.startsWith("data:")?t.crossOrigin=UP(e):r!==!1&&(t.crossOrigin=typeof r=="string"?r:"anonymous")}upload(t,e,r,n){const i=t.gl,o=e.realWidth,l=e.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Vs.UNPACK),!this.noSubImage&&e.target===i.TEXTURE_2D&&r.width===o&&r.height===l?i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,r.type,n):(r.width=o,r.height=l,i.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(e,r),super.update()}dispose(){this.source=null}}class aA extends Wr{constructor(t,e){if(e=e||{},typeof t=="string"){const r=new Image;Wr.crossOrigin(r,t,e.crossorigin),r.src=t,t=r}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??Et.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,r)=>{const n=this.source;this.url=n.src;const i=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?i():(n.onload=i,n.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,r=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then(n=>n.blob()).then(n=>e(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vs.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,r){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,r,this.bitmap),!this.preserveBitmap){let n=!0;const i=e._glTextures;for(const o in i){const l=i[o];if(l!==r&&l.dirtyId!==e.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class yf{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,r){const n=e.width,i=e.height;if(r){const o=t.width/2/n,l=t.height/2/i,a=t.x/n+o,h=t.y/i+l;r=me.add(r,me.NW),this.x0=a+o*me.uX(r),this.y0=h+l*me.uY(r),r=me.add(r,2),this.x1=a+o*me.uX(r),this.y1=h+l*me.uY(r),r=me.add(r,2),this.x2=a+o*me.uX(r),this.y2=h+l*me.uY(r),r=me.add(r,2),this.x3=a+o*me.uX(r),this.y3=h+l*me.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}yf.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const fy=new yf;function jo(s){s.destroy=function(){},s.on=function(){},s.once=function(){},s.emit=function(){}}class Ct extends ah{constructor(t,e,r,n,i,o,l){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Ht(0,0,1,1)),t instanceof Ct&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=fy,this.uvMatrix=null,this.orig=r||e,this._rotate=Number(i||0),i===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Ee(o.x,o.y):new Ee(0,0),this.defaultBorders=l,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&vr[e.url]&&Ct.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Ct.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var n;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),r=new Ct(this.baseTexture,!this.noFrame&&t,e,(n=this.trim)==null?void 0:n.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=t),r}updateUvs(){this._uvs===fy&&(this._uvs=new yf),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},r=Et.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let i=null;if(n)i=t;else if(t instanceof Dt){if(!t.cacheId){const l=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${l}-${ro()}`,Dt.addToCache(t,t.cacheId)}i=t.cacheId}else{if(!t._pixiId){const l=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${l}_${ro()}`}i=t._pixiId}let o=vr[i];if(n&&r&&!o)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return!o&&!(t instanceof Dt)?(e.resolution||(e.resolution=no(t)),o=new Ct(new Dt(t,e)),o.baseTexture.cacheId=i,Dt.addToCache(o.baseTexture,i),Ct.addToCache(o,i)):!o&&t instanceof Dt&&(o=new Ct(t),Ct.addToCache(o,i)),o}static fromURL(t,e){const r=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),n=Ct.from(t,Object.assign({resourceOptions:r},e),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(()=>Promise.resolve(n))}static fromBuffer(t,e,r,n){return new Ct(Dt.fromBuffer(t,e,r,n))}static fromLoader(t,e,r,n){const i=new Dt(t,Object.assign({scaleMode:Dt.defaultOptions.scaleMode,resolution:no(e)},n)),{resource:o}=i;o instanceof aA&&(o.url=e);const l=new Ct(i);return r||(r=e),Dt.addToCache(l.baseTexture,r),Ct.addToCache(l,r),r!==e&&(Dt.addToCache(l.baseTexture,e),Ct.addToCache(l,e)),l.baseTexture.valid?Promise.resolve(l):new Promise(a=>{l.baseTexture.once("loaded",()=>a(l))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),vr[e]&&vr[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),vr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=vr[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete vr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)vr[t.textureCacheIds[e]]===t&&delete vr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:r,width:n,height:i}=t,o=e+n>this.baseTexture.width,l=r+i>this.baseTexture.height;if(o||l){const a=o&&l?"and":"or",h=`X: ${e} + ${n} = ${e+n} > ${this.baseTexture.width}`,c=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${a} ${c}`)}this.valid=n&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Ct._EMPTY||(Ct._EMPTY=new Ct(new Dt),jo(Ct._EMPTY),jo(Ct._EMPTY.baseTexture)),Ct._EMPTY}static get WHITE(){if(!Ct._WHITE){const t=Et.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),Ct._WHITE=new Ct(Dt.from(t)),jo(Ct._WHITE),jo(Ct._WHITE.baseTexture)}return Ct._WHITE}}class fh extends Ct{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,r=!0){const n=this.baseTexture.resolution,i=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(i,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new fh(new iA(t))}}class oA{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,r=Ce.NONE){const n=new iA(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new fh(n)}getOptimalTexture(t,e,r=1,n=Ce.NONE){let i;t=Math.max(Math.ceil(t*r-1e-6),1),e=Math.max(Math.ceil(e*r-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=Il(t),e=Il(e),i=((t&65535)<<16|e&65535)>>>0,n>1&&(i+=n*4294967296)):i=n>1?-n:-1,this.texturePool[i]||(this.texturePool[i]=[]);let o=this.texturePool[i].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=i,o.setResolution(r),o}getFilterTexture(t,e,r){const n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||Ce.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const r=this.texturePool[e];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const r=this.texturePool[e];if(r)for(let n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}oA.SCREEN_KEY=-1;class xF extends ai{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class _F extends ai{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new He(this.vertices),this.uvBuffer=new He(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class AF{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ce.NONE,this.sourceFrame=new Ht,this.destinationFrame=new Ht,this.bindingSourceFrame=new Ht,this.bindingDestinationFrame=new Ht,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const zo=[new Ee,new Ee,new Ee,new Ee],pu=new Se;class lA{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new oA,this.statePool=[],this.quad=new xF,this.quadUv=new _F,this.tempRect=new Ht,this.activeState={},this.globalUniforms=new gr({outputFrame:new Ht,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new AF,o=r.renderTexture;let l,a;if(o.current){const p=o.current;l=p.resolution,a=p.multisample}else l=r.resolution,a=r.multisample;let h=e[0].resolution||l,c=e[0].multisample??a,u=e[0].padding,d=e[0].autoFit,f=e[0].legacy??!0;for(let p=1;p<e.length;p++){const y=e[p];h=Math.min(h,y.resolution||l),c=Math.min(c,y.multisample??a),u=this.useMaxPadding?Math.max(u,y.padding):u+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),n.push(i),i.resolution=h,i.multisample=c,i.legacy=f,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(u);const m=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(pu.copyFrom(r.projection.transform).invert(),m),d?(i.sourceFrame.fit(m),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(m)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,h,c),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const g=this.tempRect;g.x=0,g.y=0,g.width=i.sourceFrame.width,g.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,g),r.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;const n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;const i=n.inputSize,o=n.inputPixel,l=n.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*e.resolution),o[1]=Math.round(i[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],l[0]=.5*o[2],l[1]=.5*o[3],l[2]=e.sourceFrame.width*i[2]-.5*o[2],l[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){const h=n.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const a=t[t.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,e.renderTexture,a.renderTexture,jn.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let h=e.renderTexture,c=this.getOptimalFilterTexture(h.width,h.height,e.resolution);c.filterFrame=h.filterFrame;let u=0;for(u=0;u<r.length-1;++u){u===1&&e.multisample>1&&(c=this.getOptimalFilterTexture(h.width,h.height,e.resolution),c.filterFrame=h.filterFrame),r[u].apply(this,h,c,jn.CLEAR,e);const d=h;h=c,c=d}r[u].apply(this,h,a.renderTexture,jn.BLEND,e),u>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=jn.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=n.stateId&1||this.forceClear;(e===jn.CLEAR||e===jn.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,r,n){const i=this.renderer;i.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(dr.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(dr.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=e._texture,o=t.set(n.width,0,0,n.height,r.x,r.y),l=e.worldTransform.copyTo(Se.TEMP_MATRIX);return l.invert(),o.prepend(l),o.scale(1/i.width,1/i.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,r=1,n=Ce.NONE){return this.texturePool.getOptimalTexture(t,e,r,n)}getFilterTexture(t,e,r){if(typeof t=="number"){const i=t;t=e,e=i}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||Ce.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const r=zo[0],n=zo[1],i=zo[2],o=zo[3];r.set(e.left,e.top),n.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(i,i),t.apply(o,o);const l=Math.min(r.x,n.x,i.x,o.x),a=Math.min(r.y,n.y,i.y,o.y),h=Math.max(r.x,n.x,i.x,o.x),c=Math.max(r.y,n.y,i.y,o.y);e.x=l,e.y=a,e.width=h-l,e.height=c-a}roundFrame(t,e,r,n,i){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(i){const{a:o,b:l,c:a,d:h}=i;if((Math.abs(l)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}i=i?pu.copyFrom(i):pu.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}}}lA.extension={type:mt.RendererSystem,name:"filter"};wt.add(lA);class bF{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ce.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const vF=new Ht;class hA{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new gd(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ht,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Et.PREFER_ENV===ci.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=n=>e.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,r=0){const{gl:n}=this;if(t){const i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=r),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const l=t.colorTextures[o];this.renderer.texture.unbind(l.parentTextureArray||l)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>r,l=e.height>>r,a=o/e.width;this.setViewport(e.x*a,e.y*a,o,l)}else{const o=t.width>>r,l=t.height>>r;this.setViewport(0,0,o,l)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,r,n){const i=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),(i.width!==r||i.height!==n||i.x!==t||i.y!==e)&&(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,r,n,i=ad.COLOR|ad.DEPTH){const{gl:o}=this;o.clearColor(t,e,r,n),o.clear(i)}initFramebuffer(t){const{gl:e}=this,r=new bF(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r}resizeFramebuffer(t){const{gl:e}=this,r=t.glFramebuffers[this.CONTEXT_UID];if(r.stencil){e.bindRenderbuffer(e.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const n=t.colorTextures;let i=n.length;e.drawBuffers||(i=Math.min(i,1));for(let o=0;o<i;o++){const l=n[o],a=l.parentTextureArray||l;this.renderer.texture.bind(a,0),o===0&&r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,a._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:r}=this,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures;let o=i.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const l=[];for(let a=0;a<o;a++){const h=i[a],c=h.parentTextureArray||h;this.renderer.texture.bind(c,0),a===0&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,h.target,c._glTextures[this.CONTEXT_UID].texture,e),l.push(r.COLOR_ATTACHMENT0+a))}if(l.length>1&&r.drawBuffers(l),t.depthTexture&&this.writeDepthTexture){const a=t.depthTexture;this.renderer.texture.bind(a,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){n.stencil=n.stencil||r.createRenderbuffer();let a,h;this.renderer.context.webGLVersion===1?(a=r.DEPTH_STENCIL_ATTACHMENT,h=r.DEPTH_STENCIL):t.depth&&t.stencil?(a=r.DEPTH_STENCIL_ATTACHMENT,h=r.DEPTH24_STENCIL8):t.depth?(a=r.DEPTH_ATTACHMENT,h=r.DEPTH_COMPONENT24):(a=r.STENCIL_ATTACHMENT,h=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,h,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,h,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,a,r.RENDERBUFFER,n.stencil)}else n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let r=Ce.NONE;if(t<=1||e===null)return r;for(let n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return r===1&&(r=Ce.NONE),r}blit(t,e,r){const{current:n,renderer:i,gl:o,CONTEXT_UID:l}=this;if(i.context.webGLVersion!==2||!n)return;const a=n.glFramebuffers[l];if(!a)return;if(!t){if(!a.msaaBuffer)return;const c=n.colorTextures[0];if(!c)return;a.blitFramebuffer||(a.blitFramebuffer=new gd(n.width,n.height),a.blitFramebuffer.addColorTexture(0,c)),t=a.blitFramebuffer,t.colorTextures[0]!==c&&(t.colorTextures[0]=c,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||(e=vF,e.width=n.width,e.height=n.height),r||(r=e);const h=e.width===r.width&&e.height===r.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete t.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const r=t.width,n=t.height,i=this.gl,o=e.stencil=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o);let l,a;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH_STENCIL):t.depth?(l=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH24_STENCIL8):(l=i.STENCIL_ATTACHMENT,a=i.STENCIL_INDEX8),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,a,r,n):i.renderbufferStorage(i.RENDERBUFFER,a,r,n),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ht}destroy(){this.renderer=null}}hA.extension={type:mt.RendererSystem,name:"framebuffer"};wt.add(hA);const gu={5126:4,5123:2,5121:1};class cA{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;Et.PREFER_ENV===ci.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=()=>r.createVertexArrayOES(),t.bindVertexArray=n=>r.bindVertexArrayOES(n),t.deleteVertexArray=n=>r.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=(n,i)=>r.vertexAttribDivisorANGLE(n,i),t.drawElementsInstanced=(n,i,o,l,a)=>r.drawElementsInstancedANGLE(n,i,o,l,a),t.drawArraysInstanced=(n,i,o,l)=>r.drawArraysInstancedANGLE(n,i,o,l)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:r}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const o=n[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let r=0;r<t.buffers.length;r++){const n=t.buffers[r];e.update(n)}}checkCompatibility(t,e){const r=t.attributes,n=e.attributeData;for(const i in n)if(!r[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(t,e){const r=t.attributes,n=e.attributeData,i=["g",t.id];for(const o in r)n[o]&&i.push(o,n[o].location);return i.join("-")}initGeometryVao(t,e,r=!0){const n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,l=e.program;l.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,l);const a=this.getSignature(t,l),h=t.glVertexArrayObjects[this.CONTEXT_UID];let c=h[a];if(c)return h[l.id]=c,c;const u=t.buffers,d=t.attributes,f={},m={};for(const g in u)f[g]=0,m[g]=0;for(const g in d)!d[g].size&&l.attributeData[g]?d[g].size=l.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*gu[d[g].type];for(const g in d){const p=d[g],y=p.size;p.stride===void 0&&(f[p.buffer]===y*gu[p.type]?p.stride=0:p.stride=f[p.buffer]),p.start===void 0&&(p.start=m[p.buffer],m[p.buffer]+=y*gu[p.type])}c=n.createVertexArray(),n.bindVertexArray(c);for(let g=0;g<u.length;g++){const p=u[g];o.bind(p),r&&p._glBuffers[i].refCount++}return this.activateVao(t,l),h[l.id]=c,h[a]=c,n.bindVertexArray(null),o.unbind(Cr.ARRAY_BUFFER),c}disposeGeometry(t,e){var l;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=t.buffers,o=(l=this.renderer)==null?void 0:l.buffer;if(t.disposeRunner.remove(this),!!r){if(o)for(let a=0;a<i.length;a++){const h=i[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!e&&o.dispose(i[a],e))}if(!e){for(const a in r)if(a[0]==="g"){const h=r[a];this._activeVao===h&&this.unbind(),n.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)}activateVao(t,e){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,l=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);let a=null;for(const h in l){const c=l[h],u=o[c.buffer],d=u._glBuffers[n];if(e.attributeData[h]){a!==d&&(i.bind(u),a=d);const f=e.attributeData[h].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,c.size,c.type||r.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)r.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,r,n){const{gl:i}=this,o=this._activeGeometry;if(o.indexBuffer){const l=o.indexBuffer.data.BYTES_PER_ELEMENT,a=l===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*l,n||1):i.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*l):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,r,e||o.getSize(),n||1):i.drawArrays(t,r,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}cA.extension={type:mt.RendererSystem,name:"geometry"};wt.add(cA);const my=new Se;class uA{constructor(t,e){this._texture=t,this.mapCoord=new Se,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const r=this.mapCoord;for(let n=0;n<t.length;n+=2){const i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,i=e.trim;i&&(my.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(my));const o=e.baseTexture,l=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return l[0]=(e._frame.x+a+h)/o.width,l[1]=(e._frame.y+a+h)/o.height,l[2]=(e._frame.x+e._frame.width-a+h)/o.width,l[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var wF=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,EF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SF extends Ni{constructor(t,e,r){let n=null;typeof t!="string"&&e===void 0&&r===void 0&&(n=t,t=void 0,e=void 0,r=void 0),super(t||EF,e||wF,r),this.maskSprite=n,this.maskMatrix=new Se}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,r,n){const i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new uA(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))}}class TF{constructor(t=null){this.type=Oe.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ni.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Oe.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class dA{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let r=e;if(!r.isMaskData){const i=this.maskDataPool.pop()||new TF;i.pooled=!0,i.maskObject=e,r=i}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==Oe.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Oe.SCISSOR:this.renderer.scissor.push(r);break;case Oe.STENCIL:this.renderer.stencil.push(r);break;case Oe.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Oe.COLOR:this.pushColorMask(r);break}r.type===Oe.SPRITE&&this.maskStack.push(r)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Oe.SCISSOR:this.renderer.scissor.pop(e);break;case Oe.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Oe.SPRITE:this.popSpriteMask(e);break;case Oe.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Oe.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Oe.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Oe.SCISSOR:t.type=Oe.STENCIL:t.type=Oe.COLOR}pushSpriteMask(t){const{maskObject:e}=t,r=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new SF])),n[0].resolution=t.resolution,n[0].multisample=t.multisample,n[0].maskSprite=e;const i=r.filterArea;r.filterArea=e.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=i,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(t){const e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}dA.extension={type:mt.RendererSystem,name:"mask"};wt.add(dA);class fA{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,r=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==r&&(n===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const py=new Se,gy=[],mA=class hl extends fA{constructor(t){super(t),this.glConst=Et.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,i=n.renderTexture,o=r.getBounds(!0,gy.pop()??new Ht);this.roundFrameToPixels(o,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:i}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||hl.isMatrixRotated(e.worldTransform)||hl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,i){hl.isMatrixRotated(i)||(i=i?py.copyFrom(i):py.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&gy.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};mA.extension={type:mt.RendererSystem,name:"scissor"};let CF=mA;wt.add(CF);class pA extends fA{constructor(t){super(t),this.glConst=Et.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:r}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;const i=t._colorMask;i!==0&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(t._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;n!==0&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(r._colorMask=n,e.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}pA.extension={type:mt.RendererSystem,name:"stencil"};wt.add(pA);class gA{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return $t("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return $t("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return $t("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}gA.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"_plugin"};wt.add(gA);class yA{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Se,this.transform=null}update(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(t,e,r,n){const i=this.projectionMatrix,o=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d}setTransform(t){}destroy(){this.renderer=null}}yA.extension={type:mt.RendererSystem,name:"projection"};wt.add(yA);const RF=new dh,yy=new Ht;class xA{constructor(t){this.renderer=t,this._tempMatrix=new Se}generateTexture(t,e){const{region:r,...n}=e||{},i=(r==null?void 0:r.copyTo(yy))||t.getLocalBounds(yy,!0),o=n.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/o),i.height=Math.max(i.height,1/o),n.width=i.width,n.height=i.height,n.resolution=o,n.multisample??(n.multisample=this.renderer.multisample);const l=fh.create(n);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const a=t.transform;return t.transform=RF,this.renderer.render(t,{renderTexture:l,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,l}destroy(){}}xA.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"textureGenerator"};wt.add(xA);const Vn=new Ht,ba=new Ht;class _A{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ht,this.destinationFrame=new Ht,this.viewportFrame=new Ht}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,r){const n=this.renderer;this.current=t;let i,o,l;t?(i=t.baseTexture,l=i.resolution,e||(Vn.width=t.frame.width,Vn.height=t.frame.height,e=Vn),r||(ba.x=t.frame.x,ba.y=t.frame.y,ba.width=e.width,ba.height=e.height,r=ba),o=i.framebuffer):(l=n.resolution,e||(Vn.width=n._view.screen.width,Vn.height=n._view.screen.height,e=Vn),r||(r=Vn,r.width=e.width,r.height=e.height));const a=this.viewportFrame;a.x=r.x*l,a.y=r.y*l,a.width=r.width*l,a.height=r.height*l,t||(a.y=n.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(o,a),this.renderer.projection.update(r,e,l,!o),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)}clear(t,e){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=es.shared.setValue(t||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,l=i.width!==o.width||i.height!==o.height;if(l){let{x:a,y:h,width:c,height:u}=this.viewportFrame;a=Math.round(a),h=Math.round(h),c=Math.round(c),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,h,c,u)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,e),l&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}_A.extension={type:mt.RendererSystem,name:"renderTexture"};wt.add(_A);class IF{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function MF(s,t){const e={},r=t.getProgramParameter(s,t.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){const i=t.getActiveAttrib(s,n);if(i.name.startsWith("gl_"))continue;const o=sA(t,i.type),l={type:o,name:i.name,size:eA(o),location:t.getAttribLocation(s,i.name)};e[i.name]=l}return e}function PF(s,t){const e={},r=t.getProgramParameter(s,t.ACTIVE_UNIFORMS);for(let n=0;n<r;n++){const i=t.getActiveUniform(s,n),o=i.name.replace(/\[.*?\]$/,""),l=!!i.name.match(/\[.*?\]$/),a=sA(t,i.type);e[o]={name:o,index:n,type:a,size:i.size,isArray:l,value:J_(a,i.size)}}return e}function FF(s,t){var l;const e=ly(s,s.VERTEX_SHADER,t.vertexSrc),r=ly(s,s.FRAGMENT_SHADER,t.fragmentSrc),n=s.createProgram();s.attachShader(n,e),s.attachShader(n,r);const i=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(i&&(typeof s.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):s.transformFeedbackVaryings(n,i.names,i.bufferMode==="separate"?s.SEPARATE_ATTRIBS:s.INTERLEAVED_ATTRIBS)),s.linkProgram(n),s.getProgramParameter(n,s.LINK_STATUS)||aF(s,n,e,r),t.attributeData=MF(n,s),t.uniformData=PF(n,s),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const a=Object.keys(t.attributeData);a.sort((h,c)=>h>c?1:-1);for(let h=0;h<a.length;h++)t.attributeData[a[h]].location=h,s.bindAttribLocation(n,h,a[h]);s.linkProgram(n)}s.deleteShader(e),s.deleteShader(r);const o={};for(const a in t.uniformData){const h=t.uniformData[a];o[a]={location:s.getUniformLocation(n,a),value:J_(h.type,h.size)}}return new IF(n,o)}function BF(s,t,e,r,n){e.buffer.update(n)}const kF={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},AA={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function NF(s){const t=s.map(i=>({data:i,offset:0,dataLen:0,dirty:0}));let e=0,r=0,n=0;for(let i=0;i<t.length;i++){const o=t[i];if(e=AA[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,r%e!==0&&r<16){const l=r%e%16;r+=l,n+=l}r+e>16?(n=Math.ceil(n/16)*16,o.offset=n,n+=e,r=e):(o.offset=n,r+=e,n+=e)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function OF(s,t){const e=[];for(const r in s)t[r]&&e.push(t[r]);return e.sort((r,n)=>r.index-n.index),e}function LF(s,t){if(!s.autoManage)return{size:0,syncFunc:BF};const e=OF(s.uniforms,t),{uboElements:r,size:n}=NF(e),i=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const l=r[o],a=s.uniforms[l.data.name],h=l.data.name;let c=!1;for(let u=0;u<ji.length;u++){const d=ji[u];if(d.codeUbo&&d.test(l.data,a)){i.push(`offset = ${l.offset/4};`,ji[u].codeUbo(l.data.name,a)),c=!0;break}}if(!c)if(l.data.size>1){const u=eA(l.data.type),d=Math.max(AA[l.data.type]/16,1),f=u/d,m=(4-f%4)%4;i.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${l.offset/4};

                t = 0;

                for(var i=0; i < ${l.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const u=kF[l.data.type];i.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${l.offset/4};
                ${u};
                `)}}return i.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",i.join(`
`))}}let VF=0;const Wo={textureCount:0,uboCount:0};class bA{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=VF++}systemCheck(){if(!lF())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Wo.textureCount=0,Wo.uboCount=0,this.syncUniformGroup(t.uniformGroup,Wo)),n}setUniforms(t){const e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)}syncUniformGroup(t,e){const r=this.getGlProgram();(!t.static||t.dirtyId!==r.uniformDirtyGroups[t.id])&&(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))}syncUniforms(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=rF(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const r=this.getGlProgram();if(!t.static||t.dirtyId!==0||!r.uniformGroups[t.id]){t.dirtyId=0;const n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,Wo,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])}createSyncBufferGroup(t,e,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const i=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let l=this._uboCache[o];if(l||(l=this._uboCache[o]=LF(t,this.shader.program.uniformData)),t.autoManage){const a=new Float32Array(l.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=l.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,r){const n=t.uniforms,i=[`${r}-`];for(const o in n)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,r=t.program,n=FF(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}bA.extension={type:mt.RendererSystem,name:"shader"};wt.add(bA);class kl{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.3 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}kl.defaultOptions={hello:!1},kl.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"startup"};wt.add(kl);function UF(s,t=[]){return t[ft.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.ADD]=[s.ONE,s.ONE],t[ft.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.SCREEN]=[s.ONE,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.NONE]=[0,0],t[ft.NORMAL_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.ADD_NPM]=[s.SRC_ALPHA,s.ONE,s.ONE,s.ONE],t[ft.SCREEN_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[ft.SRC_IN]=[s.DST_ALPHA,s.ZERO],t[ft.SRC_OUT]=[s.ONE_MINUS_DST_ALPHA,s.ZERO],t[ft.SRC_ATOP]=[s.DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[ft.DST_OVER]=[s.ONE_MINUS_DST_ALPHA,s.ONE],t[ft.DST_IN]=[s.ZERO,s.SRC_ALPHA],t[ft.DST_OUT]=[s.ZERO,s.ONE_MINUS_SRC_ALPHA],t[ft.DST_ATOP]=[s.ONE_MINUS_DST_ALPHA,s.SRC_ALPHA],t[ft.XOR]=[s.ONE_MINUS_DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[ft.SUBTRACT]=[s.ONE,s.ONE,s.ONE,s.ONE,s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD],t}const DF=0,GF=1,$F=2,XF=3,HF=4,YF=5,vA=class yd{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ft.NONE,this._blendEq=!1,this.map=[],this.map[DF]=this.setBlend,this.map[GF]=this.setOffset,this.map[$F]=this.setCullFace,this.map[XF]=this.setDepthTest,this.map[HF]=this.setFrontFace,this.map[YF]=this.setDepthMask,this.checks=[],this.defaultState=new Mn,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=UF(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(yd.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(yd.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};vA.extension={type:mt.RendererSystem,name:"state"};let jF=vA;wt.add(jF);class zF extends ah{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(n=>t.systems[n]),r=[...e,...Object.keys(t.systems).filter(n=>!e.includes(n))];for(const n of r)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(e=>{this.runners[e]=new pr(e)})}addSystem(t,e){const r=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=r,this._systemsHash[e]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(t,e){const r=Object.keys(this._systemsHash);t.items.forEach(n=>{const i=r.find(o=>this._systemsHash[o]===n);n[t.name](e[i])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Pa=class cl{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=cl.defaultMaxIdle,this.checkCountMax=cl.defaultCheckCountMax,this.mode=cl.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==ff.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const i=e[n];i.resource&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){let n=0;for(let i=0;i<e.length;i++)e[i]!==null&&(e[n++]=e[i]);e.length=n}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};Pa.defaultMode=ff.AUTO,Pa.defaultMaxIdle=60*60,Pa.defaultCheckCountMax=60*10,Pa.extension={type:mt.RendererSystem,name:"textureGC"};let Qn=Pa;wt.add(Qn);class yu{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ft.UNSIGNED_BYTE,this.internalFormat=ut.RGBA,this.samplerType=0}}function WF(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[s.RGB]:dt.FLOAT,[s.RGBA]:dt.FLOAT,[s.ALPHA]:dt.FLOAT,[s.LUMINANCE]:dt.FLOAT,[s.LUMINANCE_ALPHA]:dt.FLOAT,[s.R8]:dt.FLOAT,[s.R8_SNORM]:dt.FLOAT,[s.RG8]:dt.FLOAT,[s.RG8_SNORM]:dt.FLOAT,[s.RGB8]:dt.FLOAT,[s.RGB8_SNORM]:dt.FLOAT,[s.RGB565]:dt.FLOAT,[s.RGBA4]:dt.FLOAT,[s.RGB5_A1]:dt.FLOAT,[s.RGBA8]:dt.FLOAT,[s.RGBA8_SNORM]:dt.FLOAT,[s.RGB10_A2]:dt.FLOAT,[s.RGB10_A2UI]:dt.FLOAT,[s.SRGB8]:dt.FLOAT,[s.SRGB8_ALPHA8]:dt.FLOAT,[s.R16F]:dt.FLOAT,[s.RG16F]:dt.FLOAT,[s.RGB16F]:dt.FLOAT,[s.RGBA16F]:dt.FLOAT,[s.R32F]:dt.FLOAT,[s.RG32F]:dt.FLOAT,[s.RGB32F]:dt.FLOAT,[s.RGBA32F]:dt.FLOAT,[s.R11F_G11F_B10F]:dt.FLOAT,[s.RGB9_E5]:dt.FLOAT,[s.R8I]:dt.INT,[s.R8UI]:dt.UINT,[s.R16I]:dt.INT,[s.R16UI]:dt.UINT,[s.R32I]:dt.INT,[s.R32UI]:dt.UINT,[s.RG8I]:dt.INT,[s.RG8UI]:dt.UINT,[s.RG16I]:dt.INT,[s.RG16UI]:dt.UINT,[s.RG32I]:dt.INT,[s.RG32UI]:dt.UINT,[s.RGB8I]:dt.INT,[s.RGB8UI]:dt.UINT,[s.RGB16I]:dt.INT,[s.RGB16UI]:dt.UINT,[s.RGB32I]:dt.INT,[s.RGB32UI]:dt.UINT,[s.RGBA8I]:dt.INT,[s.RGBA8UI]:dt.UINT,[s.RGBA16I]:dt.INT,[s.RGBA16UI]:dt.UINT,[s.RGBA32I]:dt.INT,[s.RGBA32UI]:dt.UINT,[s.DEPTH_COMPONENT16]:dt.FLOAT,[s.DEPTH_COMPONENT24]:dt.FLOAT,[s.DEPTH_COMPONENT32F]:dt.FLOAT,[s.DEPTH_STENCIL]:dt.FLOAT,[s.DEPTH24_STENCIL8]:dt.FLOAT,[s.DEPTH32F_STENCIL8]:dt.FLOAT}:t={[s.RGB]:dt.FLOAT,[s.RGBA]:dt.FLOAT,[s.ALPHA]:dt.FLOAT,[s.LUMINANCE]:dt.FLOAT,[s.LUMINANCE_ALPHA]:dt.FLOAT,[s.DEPTH_STENCIL]:dt.FLOAT},t}function qF(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[Ft.UNSIGNED_BYTE]:{[ut.RGBA]:s.RGBA8,[ut.RGB]:s.RGB8,[ut.RG]:s.RG8,[ut.RED]:s.R8,[ut.RGBA_INTEGER]:s.RGBA8UI,[ut.RGB_INTEGER]:s.RGB8UI,[ut.RG_INTEGER]:s.RG8UI,[ut.RED_INTEGER]:s.R8UI,[ut.ALPHA]:s.ALPHA,[ut.LUMINANCE]:s.LUMINANCE,[ut.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[Ft.BYTE]:{[ut.RGBA]:s.RGBA8_SNORM,[ut.RGB]:s.RGB8_SNORM,[ut.RG]:s.RG8_SNORM,[ut.RED]:s.R8_SNORM,[ut.RGBA_INTEGER]:s.RGBA8I,[ut.RGB_INTEGER]:s.RGB8I,[ut.RG_INTEGER]:s.RG8I,[ut.RED_INTEGER]:s.R8I},[Ft.UNSIGNED_SHORT]:{[ut.RGBA_INTEGER]:s.RGBA16UI,[ut.RGB_INTEGER]:s.RGB16UI,[ut.RG_INTEGER]:s.RG16UI,[ut.RED_INTEGER]:s.R16UI,[ut.DEPTH_COMPONENT]:s.DEPTH_COMPONENT16},[Ft.SHORT]:{[ut.RGBA_INTEGER]:s.RGBA16I,[ut.RGB_INTEGER]:s.RGB16I,[ut.RG_INTEGER]:s.RG16I,[ut.RED_INTEGER]:s.R16I},[Ft.UNSIGNED_INT]:{[ut.RGBA_INTEGER]:s.RGBA32UI,[ut.RGB_INTEGER]:s.RGB32UI,[ut.RG_INTEGER]:s.RG32UI,[ut.RED_INTEGER]:s.R32UI,[ut.DEPTH_COMPONENT]:s.DEPTH_COMPONENT24},[Ft.INT]:{[ut.RGBA_INTEGER]:s.RGBA32I,[ut.RGB_INTEGER]:s.RGB32I,[ut.RG_INTEGER]:s.RG32I,[ut.RED_INTEGER]:s.R32I},[Ft.FLOAT]:{[ut.RGBA]:s.RGBA32F,[ut.RGB]:s.RGB32F,[ut.RG]:s.RG32F,[ut.RED]:s.R32F,[ut.DEPTH_COMPONENT]:s.DEPTH_COMPONENT32F},[Ft.HALF_FLOAT]:{[ut.RGBA]:s.RGBA16F,[ut.RGB]:s.RGB16F,[ut.RG]:s.RG16F,[ut.RED]:s.R16F},[Ft.UNSIGNED_SHORT_5_6_5]:{[ut.RGB]:s.RGB565},[Ft.UNSIGNED_SHORT_4_4_4_4]:{[ut.RGBA]:s.RGBA4},[Ft.UNSIGNED_SHORT_5_5_5_1]:{[ut.RGBA]:s.RGB5_A1},[Ft.UNSIGNED_INT_2_10_10_10_REV]:{[ut.RGBA]:s.RGB10_A2,[ut.RGBA_INTEGER]:s.RGB10_A2UI},[Ft.UNSIGNED_INT_10F_11F_11F_REV]:{[ut.RGB]:s.R11F_G11F_B10F},[Ft.UNSIGNED_INT_5_9_9_9_REV]:{[ut.RGB]:s.RGB9_E5},[Ft.UNSIGNED_INT_24_8]:{[ut.DEPTH_STENCIL]:s.DEPTH24_STENCIL8},[Ft.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ut.DEPTH_STENCIL]:s.DEPTH32F_STENCIL8}}:t={[Ft.UNSIGNED_BYTE]:{[ut.RGBA]:s.RGBA,[ut.RGB]:s.RGB,[ut.ALPHA]:s.ALPHA,[ut.LUMINANCE]:s.LUMINANCE,[ut.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[Ft.UNSIGNED_SHORT_5_6_5]:{[ut.RGB]:s.RGB},[Ft.UNSIGNED_SHORT_4_4_4_4]:{[ut.RGBA]:s.RGBA},[Ft.UNSIGNED_SHORT_5_5_5_1]:{[ut.RGBA]:s.RGBA}},t}class wA{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Dt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=qF(t),this.samplerTypes=WF(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new yu(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new yu(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,e=0){const{gl:r}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let i=t-1;i>=0;--i){const o=e[i];o&&o._glTextures[n].samplerType!==dt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new yu(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var r;e.internalFormat=((r=this.internalFormats[t.type])==null?void 0:r[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??dt.FLOAT,this.webGLVersion===2&&t.type===Ft.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var n;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const r=this.renderer;if(this.initTextureType(t,e),(n=t.resource)==null?void 0:n.upload(r,t,e))e.samplerType!==dt.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,o=t.realHeight,l=r.gl;(e.width!==i||e.height!==o||e.dirtyId<0)&&(e.width=i,e.height=o,l.texImage2D(t.target,0,e.internalFormat,i,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:r}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const n=this.managedTextures.indexOf(t);n!==-1&&ll(this.managedTextures,n,1)}}updateTextureStyle(t){var r;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===wn.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=so.CLAMP:e.wrapMode=t.wrapMode,(r=t.resource)!=null&&r.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const r=this.gl;if(e.mipmap&&t.mipmap!==wn.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Rs.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===Rs.LINEAR){const i=Math.min(t.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===Rs.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===Rs.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}wA.extension={type:mt.RendererSystem,name:"texture"};wt.add(wA);class EA{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glTransformFeedbacks[r]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:r,renderer:n}=this;e&&n.shader.bind(e),r.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:r,CONTEXT_UID:n}=this,i=e.createTransformFeedback();t._glTransformFeedbacks[n]=i,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i);for(let o=0;o<t.buffers.length;o++){const l=t.buffers[o];l&&(r.buffer.update(l),l._glBuffers[n].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,l._glBuffers[n].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),i}disposeTransformFeedback(t,e){const r=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let o=0;o<t.buffers.length;o++){const l=t.buffers[o];if(!l)continue;const a=l._glBuffers[this.CONTEXT_UID];a&&(a.refCount--,a.refCount===0&&!e&&i.dispose(l,e))}r&&(e||n.deleteTransformFeedback(r),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}EA.extension={type:mt.RendererSystem,name:"transformFeedback"};wt.add(EA);class Nl{constructor(t){this.renderer=t}init(t){this.screen=new Ht(0,0,t.width,t.height),this.element=t.view||Et.ADAPTER.createCanvas(),this.resolution=t.resolution||Et.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Nl.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Nl.extension={type:[mt.RendererSystem,mt.CanvasRendererSystem],name:"_view"};wt.add(Nl);Et.PREFER_ENV=ci.WEBGL2;Et.STRICT_TEXTURE_CACHE=!1;Et.RENDER_OPTIONS={...Bl.defaultOptions,...Fl.defaultOptions,...Nl.defaultOptions,...kl.defaultOptions};Object.defineProperties(Et,{WRAP_MODE:{get(){return Dt.defaultOptions.wrapMode},set(s){$t("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Dt.defaultOptions.wrapMode=s}},SCALE_MODE:{get(){return Dt.defaultOptions.scaleMode},set(s){$t("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Dt.defaultOptions.scaleMode=s}},MIPMAP_TEXTURES:{get(){return Dt.defaultOptions.mipmap},set(s){$t("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Dt.defaultOptions.mipmap=s}},ANISOTROPIC_LEVEL:{get(){return Dt.defaultOptions.anisotropicLevel},set(s){$t("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Dt.defaultOptions.anisotropicLevel=s}},FILTER_RESOLUTION:{get(){return $t("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ni.defaultResolution},set(s){Ni.defaultResolution=s}},FILTER_MULTISAMPLE:{get(){return $t("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ni.defaultMultisample},set(s){Ni.defaultMultisample=s}},SPRITE_MAX_TEXTURES:{get(){return Zn.defaultMaxTextures},set(s){$t("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Zn.defaultMaxTextures=s}},SPRITE_BATCH_SIZE:{get(){return Zn.defaultBatchSize},set(s){$t("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Zn.defaultBatchSize=s}},CAN_UPLOAD_SAME_BUFFER:{get(){return Zn.canUploadSameBuffer},set(s){$t("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Zn.canUploadSameBuffer=s}},GC_MODE:{get(){return Qn.defaultMode},set(s){$t("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Qn.defaultMode=s}},GC_MAX_IDLE:{get(){return Qn.defaultMaxIdle},set(s){$t("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Qn.defaultMaxIdle=s}},GC_MAX_CHECK_COUNT:{get(){return Qn.defaultCheckCountMax},set(s){$t("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Qn.defaultCheckCountMax=s}},PRECISION_VERTEX:{get(){return gn.defaultVertexPrecision},set(s){$t("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),gn.defaultVertexPrecision=s}},PRECISION_FRAGMENT:{get(){return gn.defaultFragmentPrecision},set(s){$t("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),gn.defaultFragmentPrecision=s}}});var Ol=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(Ol||{});class xu{constructor(t,e=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const SA=class Ss{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xu(null,null,1/0),this.deltaMS=1/Ss.targetFPMS,this.elapsedMS=1/Ss.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=Ol.NORMAL){return this._addListener(new xu(t,e,r))}addOnce(t,e,r=Ol.NORMAL){return this._addListener(new xu(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Ss.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,Ss.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Ss._shared){const t=Ss._shared=new Ss;t.autoStart=!0,t._protected=!0}return Ss._shared}static get system(){if(!Ss._system){const t=Ss._system=new Ss;t.autoStart=!0,t._protected=!0}return Ss._system}};SA.targetFPMS=.06;let yn=SA;Object.defineProperties(Et,{TARGET_FPMS:{get(){return yn.targetFPMS},set(s){$t("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),yn.targetFPMS=s}}});class TA{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Ol.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?yn.shared:new yn,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}TA.extension=mt.Application;wt.add(TA);const KF=[];wt.handleByList(mt.Renderer,KF);class CA{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const r=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,r)}else{const r=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,r)}e>=Ce.HIGH?this.multisample=Ce.HIGH:e>=Ce.MEDIUM?this.multisample=Ce.MEDIUM:e>=Ce.LOW?this.multisample=Ce.LOW:this.multisample=Ce.NONE}destroy(){}}CA.extension={type:mt.RendererSystem,name:"_multisample"};wt.add(CA);class ZF{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class RA{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[e]!==t){const i=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,i.buffer)}}bindBufferRange(t,e,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,r*256,256)}update(t){const{gl:e,CONTEXT_UID:r}=this,n=t._glBuffers[r]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:r}=this;return t._glBuffers[e]=new ZF(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}RA.extension={type:mt.RendererSystem,name:"buffer"};wt.add(RA);class IA{constructor(t){this.renderer=t}render(t,e){const r=this.renderer;let n,i,o,l;if(e&&(n=e.renderTexture,i=e.clear,o=e.transform,l=e.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(n||(this.lastObjectRendered=t),!l){const a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),t.render(r),r.batch.currentRenderer.flush(),n&&(e.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}IA.extension={type:mt.RendererSystem,name:"objectRenderer"};wt.add(IA);const ul=class xd extends zF{constructor(t){super(),this.type=V_.WEBGL,t=Object.assign({},Et.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new gr({projectionMatrix:new Se},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:xd.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&($t("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=xd.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:kP()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return $t("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return $t("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return $t("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return $t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){$t("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return $t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){$t("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return $t("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};ul.extension={type:mt.Renderer,priority:1},ul.__plugins={},ul.__systems={};let xf=ul;wt.handleByMap(mt.RendererPlugin,xf.__plugins);wt.handleByMap(mt.RendererSystem,xf.__systems);wt.add(xf);class MA extends io{constructor(t,e){const{width:r,height:n}=e||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<t;i++){const o=new Dt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof io?this.addResourceAt(t[r],r):this.addResourceAt(q_(t[r],e),r))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:r}=this.items[0];return this.resize(e,r),this.update(),Promise.resolve(this)}),this._load}}class QF extends MA{constructor(t,e){const{width:r,height:n}=e||{};let i,o;Array.isArray(t)?(i=t,o=t.length):o=t,super(o,{width:r,height:n}),i&&this.initFromArray(i,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Yi.TEXTURE_2D_ARRAY}upload(t,e,r){const{length:n,itemDirtyIds:i,items:o}=this,{gl:l}=t;r.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,e.format,r.type,null);for(let a=0;a<n;a++){const h=o[a];i[a]<h.dirtyId&&(i[a]=h.dirtyId,h.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,r.type,h.resource.source))}return!0}}class JF extends Wr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const PA=class Fa extends MA{constructor(t,e){const{width:r,height:n,autoLoad:i,linkBaseTexture:o}=e||{};if(t&&t.length!==Fa.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let l=0;l<Fa.SIDES;l++)this.items[l].target=Yi.TEXTURE_CUBE_MAP_POSITIVE_X+l;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),i!==!1&&this.load()}bind(t){super.bind(t),t.target=Yi.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Yi.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let i=0;i<Fa.SIDES;i++){const o=this.items[i];(n[i]<o.dirtyId||r.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,r),n[i]=o.dirtyId):n[i]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Fa.SIDES}};PA.SIDES=6;let t2=PA;class Oi extends Wr{constructor(t,e){e=e||{};let r,n,i;typeof t=="string"?(r=Oi.EMPTY,n=t,i=!0):(r=t,n=null,i=!1),super(r),this.url=n,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??i,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const r=await Et.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await r.blob();if(this.destroyed)return;const i=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vs.UNPACK?"premultiply":"none"});if(this.destroyed){i.close();return}this.source=i,this.update(),t(this)}catch(r){if(this.destroyed)return;e(r),this.onError.emit(r)}}),this._load)}upload(t,e,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Oi._EMPTY=Oi._EMPTY??Et.ADAPTER.createCanvas(0,0),Oi._EMPTY}}const _d=class dl extends Wr{constructor(t,e){e=e||{},super(Et.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},dl.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Wr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,i=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),i=Math.round(i);const o=this.source;o.width=n,o.height=i,o._pixiId=`canvas_${ro()}`,o.getContext("2d").drawImage(t,0,0,e,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const e=dl.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&dl.SVG_XML.test(t)}};_d.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_d.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Ad=_d;class e2 extends Wr{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const bd=class vd extends Wr{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");e.autoLoad!==!1&&r.setAttribute("preload","auto"),e.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),e.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),e.loop===!0&&r.setAttribute("loop",""),e.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];Wr.crossOrigin(r,n,e.crossorigin);for(let i=0;i<t.length;++i){const o=document.createElement("source");let{src:l,mime:a}=t[i];if(l=l||t[i],l.startsWith("data:"))a=l.slice(5,l.indexOf(";"));else if(!l.startsWith("blob:")){const h=l.split("?").shift().toLowerCase(),c=h.slice(h.lastIndexOf(".")+1);a=a||vd.MIME_TYPES[c]||`video/${c}`}o.src=l,a&&(o.type=a),r.appendChild(o)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=yn.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,r)=>{this.valid?e(this):(this._resolve=e,this._reject=r,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(yn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(yn.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(yn.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||vd.TYPES.includes(e)}};bd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],bd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let FA=bd;ld.push(Oi,aA,JF,FA,e2,Ad,K_,t2,QF);function xy(s){switch(s.toLowerCase()){case"nearest":return ys.Nearest;case"linear":return ys.Linear;case"mipmap":return ys.MipMap;case"mipmapnearestnearest":return ys.MipMapNearestNearest;case"mipmaplinearnearest":return ys.MipMapLinearNearest;case"mipmapnearestlinear":return ys.MipMapNearestLinear;case"mipmaplinearlinear":return ys.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${s}`)}}var ys=(s=>(s[s.Nearest=9728]="Nearest",s[s.Linear=9729]="Linear",s[s.MipMap=9987]="MipMap",s[s.MipMapNearestNearest=9984]="MipMapNearestNearest",s[s.MipMapLinearNearest=9985]="MipMapLinearNearest",s[s.MipMapNearestLinear=9986]="MipMapNearestLinear",s[s.MipMapLinearLinear=9987]="MipMapLinearLinear",s))(ys||{}),ei=(s=>(s[s.MirroredRepeat=33648]="MirroredRepeat",s[s.ClampToEdge=33071]="ClampToEdge",s[s.Repeat=10497]="Repeat",s))(ei||{});class wd{constructor(){this.size=null,this.names=null,this.values=null,this.renderObject=null}get width(){const t=this.texture;return t.trim?t.trim.width:t.orig.width}get height(){const t=this.texture;return t.trim?t.trim.height:t.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const t=this.texture;return t.trim?t.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const t=this.texture;return t.trim?t.trim.y:0}get spineOffsetY(){const t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return this.texture.rotate!==0}get degrees(){return(360-this.texture.rotate*45)%360}}class s2{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}}class Ed{constructor(t,e,r){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,r)}addTexture(t,e){const r=this.pages;let n=null;for(let o=0;o<r.length;o++)if(r[o].baseTexture===e.baseTexture){n=r[o];break}if(n===null){n=new _y,n.name="texturePage";const o=e.baseTexture;n.width=o.realWidth,n.height=o.realHeight,n.baseTexture=o,n.minFilter=n.magFilter=ys.Nearest,n.uWrap=ei.ClampToEdge,n.vWrap=ei.ClampToEdge,r.push(n)}const i=new Ay;return i.name=t,i.page=n,i.texture=e,i.index=-1,this.regions.push(i),i}addTextureHash(t,e){for(const r in t)t.hasOwnProperty(r)&&this.addTexture(e&&r.indexOf(".")!==-1?r.substr(0,r.lastIndexOf(".")):r,t[r])}addSpineAtlas(t,e,r){return this.load(t,e,r)}load(t,e,r){if(e==null)throw new Error("textureLoader cannot be null.");const n=new r2(t),i=new Array(4);let o=null;const l={};let a=null;l.size=()=>{o.width=parseInt(i[1]),o.height=parseInt(i[2])},l.format=()=>{},l.filter=()=>{o.minFilter=xy(i[1]),o.magFilter=xy(i[2])},l.repeat=()=>{i[1].indexOf("x")!=-1&&(o.uWrap=ei.Repeat),i[1].indexOf("y")!=-1&&(o.vWrap=ei.Repeat)},l.pma=()=>{o.pma=i[1]=="true"};const h={};h.xy=()=>{a.x=parseInt(i[1]),a.y=parseInt(i[2])},h.size=()=>{a.width=parseInt(i[1]),a.height=parseInt(i[2])},h.bounds=()=>{a.x=parseInt(i[1]),a.y=parseInt(i[2]),a.width=parseInt(i[3]),a.height=parseInt(i[4])},h.offset=()=>{a.offsetX=parseInt(i[1]),a.offsetY=parseInt(i[2])},h.orig=()=>{a.originalWidth=parseInt(i[1]),a.originalHeight=parseInt(i[2])},h.offsets=()=>{a.offsetX=parseInt(i[1]),a.offsetY=parseInt(i[2]),a.originalWidth=parseInt(i[3]),a.originalHeight=parseInt(i[4])},h.rotate=()=>{const d=i[1];let f=0;d.toLocaleLowerCase()=="true"?f=6:d.toLocaleLowerCase()=="false"?f=0:f=(720-parseFloat(d))%360/45,a.rotate=f},h.index=()=>{a.index=parseInt(i[1])};let c=n.readLine();for(;c!=null&&c.trim().length==0;)c=n.readLine();for(;!(c==null||c.trim().length==0||n.readEntry(i,c)==0);)c=n.readLine();const u=()=>{for(;;){if(c==null)return r&&r(this);if(c.trim().length==0)o=null,c=n.readLine();else if(o===null){for(o=new _y,o.name=c.trim();n.readEntry(i,c=n.readLine())!=0;){const d=l[i[0]];d&&d()}this.pages.push(o),e(o.name,d=>{if(d===null)return this.pages.splice(this.pages.indexOf(o),1),r&&r(null);o.baseTexture=d,o.pma&&(d.alphaMode=Vs.PMA),d.valid||d.setSize(o.width,o.height),o.setFilters(),(!o.width||!o.height)&&(o.width=d.realWidth,o.height=d.realHeight,(!o.width||!o.height)&&console.log(`ERROR spine atlas page ${o.name}: meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)`)),u()});break}else{a=new s2;const d=new Ay;d.name=c,d.page=o;let f=null,m=null;for(;;){const A=n.readEntry(i,c=n.readLine());if(A==0)break;const b=h[i[0]];if(b)b();else{f==null&&(f=[],m=[]),f.push(i[0]);const w=[];for(let v=0;v<A;v++)w.push(parseInt(i[v+1]));m.push(w)}}a.originalWidth==0&&a.originalHeight==0&&(a.originalWidth=a.width,a.originalHeight=a.height);const g=o.baseTexture.resolution;a.x/=g,a.y/=g,a.width/=g,a.height/=g,a.originalWidth/=g,a.originalHeight/=g,a.offsetX/=g,a.offsetY/=g;const p=a.rotate%4!==0,y=new Ht(a.x,a.y,p?a.height:a.width,p?a.width:a.height),x=new Ht(0,0,a.originalWidth,a.originalHeight),_=new Ht(a.offsetX,a.originalHeight-a.height-a.offsetY,a.width,a.height);d.texture=new Ct(d.page.baseTexture,y,x,_,a.rotate),d.index=a.index,d.texture.updateUvs(),this.regions.push(d)}}};u()}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()}}class r2{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(e==null||(e=e.trim(),e.length==0))return 0;const r=e.indexOf(":");if(r==-1)return 0;t[0]=e.substr(0,r).trim();for(let n=1,i=r+1;;n++){const o=e.indexOf(",",i);if(o==-1)return t[n]=e.substr(i).trim(),n;if(t[n]=e.substr(i,o-i).trim(),i=o+1,n==4)return 4}}}class _y{constructor(){this.minFilter=ys.Nearest,this.magFilter=ys.Nearest,this.uWrap=ei.ClampToEdge,this.vWrap=ei.ClampToEdge}setFilters(){const t=this.baseTexture,e=this.minFilter;e==ys.Linear?t.scaleMode=Rs.LINEAR:this.minFilter==ys.Nearest?t.scaleMode=Rs.NEAREST:(t.mipmap=wn.POW2,e==ys.MipMapNearestNearest?t.scaleMode=Rs.NEAREST:t.scaleMode=Rs.LINEAR)}}class Ay extends wd{}class n2{constructor(){this.entries={},this.size=0}add(t){const e=this.entries[t];return this.entries[t]=!0,e?!1:(this.size++,!0)}addAll(t){const e=this.size;for(let r=0,n=t.length;r<n;r++)this.add(t[r]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}const ui=class{constructor(s=0,t=0,e=0,r=0){this.r=s,this.g=t,this.b=e,this.a=r}set(s,t,e,r){return this.r=s,this.g=t,this.b=e,this.a=r,this.clamp()}setFromColor(s){return this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this}setFromString(s){return s=s.charAt(0)=="#"?s.substr(1):s,this.r=parseInt(s.substr(0,2),16)/255,this.g=parseInt(s.substr(2,2),16)/255,this.b=parseInt(s.substr(4,2),16)/255,this.a=s.length!=8?1:parseInt(s.substr(6,2),16)/255,this}add(s,t,e,r){return this.r+=s,this.g+=t,this.b+=e,this.a+=r,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(s,t){s.r=((t&4278190080)>>>24)/255,s.g=((t&16711680)>>>16)/255,s.b=((t&65280)>>>8)/255,s.a=(t&255)/255}static rgb888ToColor(s,t){s.r=((t&16711680)>>>16)/255,s.g=((t&65280)>>>8)/255,s.b=(t&255)/255}static fromString(s){return new ui().setFromString(s)}};let lt=ui;lt.WHITE=new ui(1,1,1,1);lt.RED=new ui(1,0,0,1);lt.GREEN=new ui(0,1,0,1);lt.BLUE=new ui(0,0,1,1);lt.MAGENTA=new ui(1,0,1,1);const Yr=class{static clamp(s,t,e){return s<t?t:s>e?e:s}static cosDeg(s){return Math.cos(s*Yr.degRad)}static sinDeg(s){return Math.sin(s*Yr.degRad)}static signum(s){return Math.sign(s)}static toInt(s){return s>0?Math.floor(s):Math.ceil(s)}static cbrt(s){const t=Math.pow(Math.abs(s),.3333333333333333);return s<0?-t:t}static randomTriangular(s,t){return Yr.randomTriangularWith(s,t,(s+t)*.5)}static randomTriangularWith(s,t,e){const r=Math.random(),n=t-s;return r<=(e-s)/n?s+Math.sqrt(r*n*(e-s)):t-Math.sqrt((1-r)*n*(t-e))}static isPowerOfTwo(s){return s&&(s&s-1)===0}};let xt=Yr;xt.PI=3.1415927;xt.PI2=Yr.PI*2;xt.radiansToDegrees=180/Yr.PI;xt.radDeg=Yr.radiansToDegrees;xt.degreesToRadians=Yr.PI/180;xt.degRad=Yr.degreesToRadians;class i2{apply(t,e,r){return t+(e-t)*this.applyInternal(r)}}class a2 extends i2{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(t*2,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}}class BA extends a2{applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}const Mi=class{static arrayCopy(s,t,e,r,n){for(let i=t,o=r;i<t+n;i++,o++)e[o]=s[i]}static arrayFill(s,t,e,r){for(let n=t;n<e;n++)s[n]=r}static setArraySize(s,t,e=0){const r=s.length;if(r==t)return s;if(s.length=t,r<t)for(let n=r;n<t;n++)s[n]=e;return s}static ensureArrayCapacity(s,t,e=0){return s.length>=t?s:Mi.setArraySize(s,t,e)}static newArray(s,t){const e=new Array(s);for(let r=0;r<s;r++)e[r]=t;return e}static newFloatArray(s){if(Mi.SUPPORTS_TYPED_ARRAYS)return new Float32Array(s);const t=new Array(s);for(let e=0;e<t.length;e++)t[e]=0;return t}static newShortArray(s){if(Mi.SUPPORTS_TYPED_ARRAYS)return new Int16Array(s);const t=new Array(s);for(let e=0;e<t.length;e++)t[e]=0;return t}static toFloatArray(s){return Mi.SUPPORTS_TYPED_ARRAYS?new Float32Array(s):s}static toSinglePrecision(s){return Mi.SUPPORTS_TYPED_ARRAYS?Math.fround(s):s}static webkit602BugfixHelper(s,t){}static contains(s,t,e=!0){for(let r=0;r<s.length;r++)if(s[r]==t)return!0;return!1}static enumValue(s,t){return s[t[0].toUpperCase()+t.slice(1)]}};let J=Mi;J.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";const o2={GLOBAL_DELAY_LIMIT:0};class Ll{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ht.EMPTY:(t=t||new Ht(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:r,b:n,c:i,d:o,tx:l,ty:a}=t,h=r*e.x+i*e.y+l,c=n*e.x+o*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(t){let e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],l=t[1];e=o<e?o:e,r=l<r?l:r,n=o>n?o:n,i=l>i?l:i,o=t[2],l=t[3],e=o<e?o:e,r=l<r?l:r,n=o>n?o:n,i=l>i?l:i,o=t[4],l=t[5],e=o<e?o:e,r=l<r?l:r,n=o>n?o:n,i=l>i?l:i,o=t[6],l=t[7],e=o<e?o:e,r=l<r?l:r,n=o>n?o:n,i=l>i?l:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i}addFrame(t,e,r,n,i){this.addFrameMatrix(t.worldTransform,e,r,n,i)}addFrameMatrix(t,e,r,n,i){const o=t.a,l=t.b,a=t.c,h=t.d,c=t.tx,u=t.ty;let d=this.minX,f=this.minY,m=this.maxX,g=this.maxY,p=o*e+a*r+c,y=l*e+h*r+u;d=p<d?p:d,f=y<f?y:f,m=p>m?p:m,g=y>g?y:g,p=o*n+a*r+c,y=l*n+h*r+u,d=p<d?p:d,f=y<f?y:f,m=p>m?p:m,g=y>g?y:g,p=o*e+a*i+c,y=l*e+h*i+u,d=p<d?p:d,f=y<f?y:f,m=p>m?p:m,g=y>g?y:g,p=o*n+a*i+c,y=l*n+h*i+u,d=p<d?p:d,f=y<f?y:f,m=p>m?p:m,g=y>g?y:g,this.minX=d,this.minY=f,this.maxX=m,this.maxY=g}addVertexData(t,e,r){let n=this.minX,i=this.minY,o=this.maxX,l=this.maxY;for(let a=e;a<r;a+=2){const h=t[a],c=t[a+1];n=h<n?h:n,i=c<i?c:i,o=h>o?h:o,l=c>l?c:l}this.minX=n,this.minY=i,this.maxX=o,this.maxY=l}addVertices(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)}addVerticesMatrix(t,e,r,n,i=0,o=i){const l=t.a,a=t.b,h=t.c,c=t.d,u=t.tx,d=t.ty;let f=this.minX,m=this.minY,g=this.maxX,p=this.maxY;for(let y=r;y<n;y+=2){const x=e[y],_=e[y+1],A=l*x+h*_+u,b=c*_+a*x+d;f=Math.min(f,A-i),g=Math.max(g,A+i),m=Math.min(m,b-o),p=Math.max(p,b+o)}this.minX=f,this.minY=m,this.maxX=g,this.maxY=p}addBounds(t){const e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i}addBoundsMask(t,e){const r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){const l=this.minX,a=this.minY,h=this.maxX,c=this.maxY;this.minX=r<l?r:l,this.minY=n<a?n:a,this.maxX=i>h?i:h,this.maxY=o>c?o:c}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){const l=this.minX,a=this.minY,h=this.maxX,c=this.maxY;this.minX=r<l?r:l,this.minY=n<a?n:a,this.maxX=i>h?i:h,this.maxY=o>c?o:c}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,r,n,i,o){t-=i,e-=o,r+=i,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n}}class ea extends ah{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new dh,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Ll,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let r=0;r<e.length;++r){const n=e[r];Object.defineProperty(ea.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ht),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ht),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ll);const e=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-i,o}toGlobal(t,e,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,r=1,n=1,i=0,o=0,l=0,a=0,h=0){return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=l,this.pivot.x=a,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new l2),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*KP}set angle(t){this.transform.rotation=t*ZP}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class l2 extends ea{constructor(){super(...arguments),this.sortDirty=null}}ea.prototype.displayObjectUpdateTransform=ea.prototype.updateTransform;const h2=new Se;function c2(s,t){return s.zIndex===t.zIndex?s._lastSortedIndex-t._lastSortedIndex:s.zIndex-t.zIndex}const kA=class Sd extends ea{constructor(){super(),this.children=[],this.sortableChildren=Sd.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);ll(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(r===-1)return null;e.parent=null,e.transform._parentID=-1,ll(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ll(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e,i=n-r;let o;if(i>0&&i<=n){o=this.children.splice(r,i);for(let l=0;l<o.length;++l)o[l].parent=null,o[l].transform&&(o[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let l=0;l<o.length;++l)o[l].emit("removed",this),this.emit("childRemoved",o[l],this,l);return o}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(c2),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const r=this.children[t];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let n=0,i=this.children.length;n<i;++n){const o=this.children[n];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==Sd.prototype._render&&(r=this.getBounds(!0));const i=t.projection.transform;if(i&&(n?(n=h2.copyFrom(n),n.prepend(i)):n=i),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let o=0,l=this.children.length;o<l;++o){const a=this.children[o],h=a.cullable;a.cullable=h||!this.cullArea,a.render(t),a.cullable=h}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}}renderAdvanced(t){var i,o,l;const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const n=e&&((i=this._enabledFilters)==null?void 0:i.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Oe.NONE));if(n&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,h=this.children.length;a<h;++a)this.children[a].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&((l=this._enabledFilters)!=null&&l.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,r=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<r.length;++n)r[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};kA.defaultSortableChildren=!1;let fr=kA;fr.prototype.containerUpdateTransform=fr.prototype.updateTransform;Object.defineProperties(Et,{SORTABLE_CHILDREN:{get(){return fr.defaultSortableChildren},set(s){$t("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),fr.defaultSortableChildren=s}}});const va=new Ee,u2=new Uint16Array([0,1,2,0,2,3]);class _f extends fr{constructor(t){super(),this._anchor=new pn(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new es(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ft.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||Ct.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=u2,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Et.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Do(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Do(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,l=e.tx,a=e.ty,h=this.vertexData,c=t.trim,u=t.orig,d=this._anchor;let f=0,m=0,g=0,p=0;if(c?(m=c.x-d._x*u.width,f=m+c.width,p=c.y-d._y*u.height,g=p+c.height):(m=-d._x*u.width,f=m+u.width,p=-d._y*u.height,g=p+u.height),h[0]=r*m+i*p+l,h[1]=o*p+n*m+a,h[2]=r*f+i*p+l,h[3]=o*p+n*f+a,h[4]=r*f+i*g+l,h[5]=o*g+n*f+a,h[6]=r*m+i*g+l,h[7]=o*g+n*m+a,this._roundPixels){const y=Et.RESOLUTION;for(let x=0;x<h.length;++x)h[x]=Math.round(h[x]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,l=i.b,a=i.c,h=i.d,c=i.tx,u=i.ty,d=-n._x*r.width,f=d+r.width,m=-n._y*r.height,g=m+r.height;if(e[0]=o*d+a*m+c,e[1]=h*m+l*d+u,e[2]=o*f+a*m+c,e[3]=h*m+l*f+u,e[4]=o*f+a*g+c,e[5]=h*g+l*f+u,e[6]=o*d+a*g+c,e[7]=h*g+l*d+u,this._roundPixels){const p=Et.RESOLUTION;for(let y=0;y<e.length;++y)e[y]=Math.round(e[y]*p)/p}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new Ll),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ht),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,va);const e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x;let i=0;return va.x>=n&&va.x<n+e&&(i=-r*this.anchor.y,va.y>=i&&va.y<i+r)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const r=t instanceof Ct?t:Ct.from(t,e);return new _f(r)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=Do(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=Do(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ct.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}class d2{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const _u=new Ee,by=new bn,NA=class OA extends fr{constructor(t,e,r,n=dr.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||Mn.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Et.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===dr.TRIANGLES&&e.length<OA.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const n=this.transform.worldTransform,i=n.a,o=n.b,l=n.c,a=n.d,h=n.tx,c=n.ty,u=this.vertexData;for(let d=0;d<u.length/2;d++){const f=e[d*2],m=e[d*2+1];u[d*2]=i*f+l*m+h,u[d*2+1]=o*f+a*m+c}if(this._roundPixels){const d=Et.RESOLUTION;for(let f=0;f<u.length;++f)u[f]=Math.round(u[f]*d)/d}this.vertexDirty=r}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new d2(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,_u);const e=this.geometry.getBuffer("aVertexPosition").data,r=by.points,n=this.geometry.getIndex().data,i=n.length,o=this.drawMode===4?3:1;for(let l=0;l+2<i;l+=o){const a=n[l]*2,h=n[l+1]*2,c=n[l+2]*2;if(r[0]=e[a],r[1]=e[a+1],r[2]=e[h],r[3]=e[h+1],r[4]=e[c],r[5]=e[c+1],by.contains(_u.x,_u.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};NA.BATCHABLE_SIZE=100;let f2=NA;class m2 extends ai{constructor(t,e,r){super();const n=new He(t),i=new He(e,!0),o=new He(r,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,Ft.FLOAT).addAttribute("aTextureCoord",i,2,!1,Ft.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var p2=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,g2=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class y2 extends ca{constructor(t,e){const r={uSampler:t,alpha:1,uTextureMatrix:Se.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(r,e.uniforms),super(e.program||gn.from(g2,p2),r),this._colorDirty=!1,this.uvMatrix=new uA(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new es(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;es.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class x2 extends f2{constructor(t=Ct.EMPTY,e,r,n,i){const o=new m2(e,r,n);o.getBuffer("aVertexPosition").static=!1;const l=new y2(t);super(o,l,null,i),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}const Vl={build(s){const t=s.points;let e,r,n,i,o,l;if(s.type===Ke.CIRC){const m=s.shape;e=m.x,r=m.y,o=l=m.radius,n=i=0}else if(s.type===Ke.ELIP){const m=s.shape;e=m.x,r=m.y,o=m.width,l=m.height,n=i=0}else{const m=s.shape,g=m.width/2,p=m.height/2;e=m.x+g,r=m.y+p,o=l=Math.max(0,Math.min(m.radius,Math.min(g,p))),n=g-o,i=p-l}if(!(o>=0&&l>=0&&n>=0&&i>=0)){t.length=0;return}const a=Math.ceil(2.3*Math.sqrt(o+l)),h=a*8+(n?4:0)+(i?4:0);if(t.length=h,h===0)return;if(a===0){t.length=8,t[0]=t[6]=e+n,t[1]=t[3]=r+i,t[2]=t[4]=e-n,t[5]=t[7]=r-i;return}let c=0,u=a*4+(n?2:0)+2,d=u,f=h;{const m=n+o,g=i,p=e+m,y=e-m,x=r+g;if(t[c++]=p,t[c++]=x,t[--u]=x,t[--u]=y,i){const _=r-g;t[d++]=y,t[d++]=_,t[--f]=_,t[--f]=p}}for(let m=1;m<a;m++){const g=Math.PI/2*(m/a),p=n+Math.cos(g)*o,y=i+Math.sin(g)*l,x=e+p,_=e-p,A=r+y,b=r-y;t[c++]=x,t[c++]=A,t[--u]=A,t[--u]=_,t[d++]=_,t[d++]=b,t[--f]=b,t[--f]=x}{const m=n,g=i+l,p=e+m,y=e-m,x=r+g,_=r-g;t[c++]=p,t[c++]=x,t[--f]=_,t[--f]=p,n&&(t[c++]=y,t[c++]=x,t[--f]=_,t[--f]=y)}},triangulate(s,t){const e=s.points,r=t.points,n=t.indices;if(e.length===0)return;let i=r.length/2;const o=i;let l,a;if(s.type!==Ke.RREC){const c=s.shape;l=c.x,a=c.y}else{const c=s.shape;l=c.x+c.width/2,a=c.y+c.height/2}const h=s.matrix;r.push(s.matrix?h.a*l+h.c*a+h.tx:l,s.matrix?h.b*l+h.d*a+h.ty:a),i++,r.push(e[0],e[1]);for(let c=2;c<e.length;c+=2)r.push(e[c],e[c+1]),n.push(i++,o,i);n.push(o+1,o,i)}};function vy(s,t=!1){const e=s.length;if(e<6)return;let r=0;for(let n=0,i=s[e-2],o=s[e-1];n<e;n+=2){const l=s[n],a=s[n+1];r+=(l-i)*(a+o),i=l,o=a}if(!t&&r>0||t&&r<=0){const n=e/2;for(let i=n+n%2;i<e;i+=2){const o=e-i-2,l=e-i-1,a=i,h=i+1;[s[o],s[a]]=[s[a],s[o]],[s[l],s[h]]=[s[h],s[l]]}}}const LA={build(s){s.points=s.shape.points.slice()},triangulate(s,t){let e=s.points;const r=s.holes,n=t.points,i=t.indices;if(e.length>=6){vy(e,!1);const o=[];for(let h=0;h<r.length;h++){const c=r[h];vy(c.points,!0),o.push(e.length/2),e=e.concat(c.points)}const l=K0(e,o,2);if(!l)return;const a=n.length/2;for(let h=0;h<l.length;h+=3)i.push(l[h]+a),i.push(l[h+1]+a),i.push(l[h+2]+a);for(let h=0;h<e.length;h++)n.push(e[h])}}},_2={build(s){const t=s.shape,e=t.x,r=t.y,n=t.width,i=t.height,o=s.points;o.length=0,n>=0&&i>=0&&o.push(e,r,e+n,r,e+n,r+i,e,r+i)},triangulate(s,t){const e=s.points,r=t.points;if(e.length===0)return;const n=r.length/2;r.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},A2={build(s){Vl.build(s)},triangulate(s,t){Vl.triangulate(s,t)}};var ks=(s=>(s.MITER="miter",s.BEVEL="bevel",s.ROUND="round",s))(ks||{}),xn=(s=>(s.BUTT="butt",s.ROUND="round",s.SQUARE="square",s))(xn||{});const sa={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(s,t=20){if(!this.adaptive||!s||isNaN(s))return t;let e=Math.ceil(s/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class wy{static curveTo(t,e,r,n,i,o){const l=o[o.length-2],a=o[o.length-1]-e,h=l-t,c=n-e,u=r-t,d=Math.abs(a*u-h*c);if(d<1e-8||i===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const f=a*a+h*h,m=c*c+u*u,g=a*c+h*u,p=i*Math.sqrt(f)/d,y=i*Math.sqrt(m)/d,x=p*g/f,_=y*g/m,A=p*u+y*h,b=p*c+y*a,w=h*(y+x),v=a*(y+x),R=u*(p+_),P=c*(p+_),F=Math.atan2(v-b,w-A),B=Math.atan2(P-b,R-A);return{cx:A+t,cy:b+e,radius:i,startAngle:F,endAngle:B,anticlockwise:h*c>u*a}}static arc(t,e,r,n,i,o,l,a,h){const c=l-o,u=sa._segmentsCount(Math.abs(c)*i,Math.ceil(Math.abs(c)/Pl)*40),d=c/(u*2),f=d*2,m=Math.cos(d),g=Math.sin(d),p=u-1,y=p%1/p;for(let x=0;x<=p;++x){const _=x+y*x,A=d+o+f*_,b=Math.cos(A),w=-Math.sin(A);h.push((m*b+g*w)*i+r,(m*-w+g*b)*i+n)}}}class b2{constructor(){this.reset()}begin(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Af{static curveLength(t,e,r,n,i,o,l,a){let h=0,c=0,u=0,d=0,f=0,m=0,g=0,p=0,y=0,x=0,_=0,A=t,b=e;for(let w=1;w<=10;++w)c=w/10,u=c*c,d=u*c,f=1-c,m=f*f,g=m*f,p=g*t+3*m*c*r+3*f*u*i+d*l,y=g*e+3*m*c*n+3*f*u*o+d*a,x=A-p,_=b-y,A=p,b=y,h+=Math.sqrt(x*x+_*_);return h}static curveTo(t,e,r,n,i,o,l){const a=l[l.length-2],h=l[l.length-1];l.length-=2;const c=sa._segmentsCount(Af.curveLength(a,h,t,e,r,n,i,o));let u=0,d=0,f=0,m=0,g=0;l.push(a,h);for(let p=1,y=0;p<=c;++p)y=p/c,u=1-y,d=u*u,f=d*u,m=y*y,g=m*y,l.push(f*a+3*d*y*t+3*u*m*r+g*i,f*h+3*d*y*e+3*u*m*n+g*o)}}function Ey(s,t,e,r,n,i,o,l){const a=s-e*n,h=t-r*n,c=s+e*i,u=t+r*i;let d,f;o?(d=r,f=-e):(d=-r,f=e);const m=a+d,g=h+f,p=c+d,y=u+f;return l.push(m,g,p,y),2}function Un(s,t,e,r,n,i,o,l){const a=e-s,h=r-t;let c=Math.atan2(a,h),u=Math.atan2(n-s,i-t);l&&c<u?c+=Math.PI*2:!l&&c>u&&(u+=Math.PI*2);let d=c;const f=u-c,m=Math.abs(f),g=Math.sqrt(a*a+h*h),p=(15*m*Math.sqrt(g)/Math.PI>>0)+1,y=f/p;if(d+=y,l){o.push(s,t,e,r);for(let x=1,_=d;x<p;x++,_+=y)o.push(s,t,s+Math.sin(_)*g,t+Math.cos(_)*g);o.push(s,t,n,i)}else{o.push(e,r,s,t);for(let x=1,_=d;x<p;x++,_+=y)o.push(s+Math.sin(_)*g,t+Math.cos(_)*g,s,t);o.push(n,i,s,t)}return p*2}function v2(s,t){const e=s.shape;let r=s.points||e.points.slice();const n=t.closePointEps;if(r.length===0)return;const i=s.lineStyle,o=new Ee(r[0],r[1]),l=new Ee(r[r.length-2],r[r.length-1]),a=e.type!==Ke.POLY||e.closeStroke,h=Math.abs(o.x-l.x)<n&&Math.abs(o.y-l.y)<n;if(a){r=r.slice(),h&&(r.pop(),r.pop(),l.set(r[r.length-2],r[r.length-1]));const T=(o.x+l.x)*.5,C=(l.y+o.y)*.5;r.unshift(T,C),r.push(T,C)}const c=t.points,u=r.length/2;let d=r.length;const f=c.length/2,m=i.width/2,g=m*m,p=i.miterLimit*i.miterLimit;let y=r[0],x=r[1],_=r[2],A=r[3],b=0,w=0,v=-(x-A),R=y-_,P=0,F=0,B=Math.sqrt(v*v+R*R);v/=B,R/=B,v*=m,R*=m;const L=i.alignment,Y=(1-L)*2,Z=L*2;a||(i.cap===xn.ROUND?d+=Un(y-v*(Y-Z)*.5,x-R*(Y-Z)*.5,y-v*Y,x-R*Y,y+v*Z,x+R*Z,c,!0)+2:i.cap===xn.SQUARE&&(d+=Ey(y,x,v,R,Y,Z,!0,c))),c.push(y-v*Y,x-R*Y,y+v*Z,x+R*Z);for(let T=1;T<u-1;++T){y=r[(T-1)*2],x=r[(T-1)*2+1],_=r[T*2],A=r[T*2+1],b=r[(T+1)*2],w=r[(T+1)*2+1],v=-(x-A),R=y-_,B=Math.sqrt(v*v+R*R),v/=B,R/=B,v*=m,R*=m,P=-(A-w),F=_-b,B=Math.sqrt(P*P+F*F),P/=B,F/=B,P*=m,F*=m;const C=_-y,O=x-A,N=_-b,V=w-A,G=C*N+O*V,X=O*N-V*C,tt=X<0;if(Math.abs(X)<.001*Math.abs(G)){c.push(_-v*Y,A-R*Y,_+v*Z,A+R*Z),G>=0&&(i.join===ks.ROUND?d+=Un(_,A,_-v*Y,A-R*Y,_-P*Y,A-F*Y,c,!1)+4:d+=2,c.push(_-P*Z,A-F*Z,_+P*Y,A+F*Y));continue}const st=(-v+y)*(-R+A)-(-v+_)*(-R+x),at=(-P+b)*(-F+A)-(-P+_)*(-F+w),U=(C*at-N*st)/X,Q=(V*st-O*at)/X,q=(U-_)*(U-_)+(Q-A)*(Q-A),z=_+(U-_)*Y,nt=A+(Q-A)*Y,S=_-(U-_)*Z,I=A-(Q-A)*Z,k=Math.min(C*C+O*O,N*N+V*V),D=tt?Y:Z,$=k+D*D*g,K=q<=$;let rt=i.join;if(rt===ks.MITER&&q/g>p&&(rt=ks.BEVEL),K)switch(rt){case ks.MITER:{c.push(z,nt,S,I);break}case ks.BEVEL:{tt?c.push(z,nt,_+v*Z,A+R*Z,z,nt,_+P*Z,A+F*Z):c.push(_-v*Y,A-R*Y,S,I,_-P*Y,A-F*Y,S,I),d+=2;break}case ks.ROUND:{tt?(c.push(z,nt,_+v*Z,A+R*Z),d+=Un(_,A,_+v*Z,A+R*Z,_+P*Z,A+F*Z,c,!0)+4,c.push(z,nt,_+P*Z,A+F*Z)):(c.push(_-v*Y,A-R*Y,S,I),d+=Un(_,A,_-v*Y,A-R*Y,_-P*Y,A-F*Y,c,!1)+4,c.push(_-P*Y,A-F*Y,S,I));break}}else{switch(c.push(_-v*Y,A-R*Y,_+v*Z,A+R*Z),rt){case ks.MITER:{tt?c.push(S,I,S,I):c.push(z,nt,z,nt),d+=2;break}case ks.ROUND:{tt?d+=Un(_,A,_+v*Z,A+R*Z,_+P*Z,A+F*Z,c,!0)+2:d+=Un(_,A,_-v*Y,A-R*Y,_-P*Y,A-F*Y,c,!1)+2;break}}c.push(_-P*Y,A-F*Y,_+P*Z,A+F*Z),d+=2}}y=r[(u-2)*2],x=r[(u-2)*2+1],_=r[(u-1)*2],A=r[(u-1)*2+1],v=-(x-A),R=y-_,B=Math.sqrt(v*v+R*R),v/=B,R/=B,v*=m,R*=m,c.push(_-v*Y,A-R*Y,_+v*Z,A+R*Z),a||(i.cap===xn.ROUND?d+=Un(_-v*(Y-Z)*.5,A-R*(Y-Z)*.5,_-v*Y,A-R*Y,_+v*Z,A+R*Z,c,!1)+2:i.cap===xn.SQUARE&&(d+=Ey(_,A,v,R,Y,Z,!1,c)));const pt=t.indices,E=sa.epsilon*sa.epsilon;for(let T=f;T<d+f-2;++T)y=c[T*2],x=c[T*2+1],_=c[(T+1)*2],A=c[(T+1)*2+1],b=c[(T+2)*2],w=c[(T+2)*2+1],!(Math.abs(y*(A-w)+_*(w-x)+b*(x-A))<E)&&pt.push(T,T+1,T+2)}function w2(s,t){let e=0;const r=s.shape,n=s.points||r.points,i=r.type!==Ke.POLY||r.closeStroke;if(n.length===0)return;const o=t.points,l=t.indices,a=n.length/2,h=o.length/2;let c=h;for(o.push(n[0],n[1]),e=1;e<a;e++)o.push(n[e*2],n[e*2+1]),l.push(c,c+1),c++;i&&l.push(c,h)}function Sy(s,t){s.lineStyle.native?w2(s,t):v2(s,t)}class bf{static curveLength(t,e,r,n,i,o){const l=t-2*r+i,a=e-2*n+o,h=2*r-2*t,c=2*n-2*e,u=4*(l*l+a*a),d=4*(l*h+a*c),f=h*h+c*c,m=2*Math.sqrt(u+d+f),g=Math.sqrt(u),p=2*u*g,y=2*Math.sqrt(f),x=d/g;return(p*m+g*d*(m-y)+(4*f*u-d*d)*Math.log((2*g+x+m)/(x+y)))/(4*p)}static curveTo(t,e,r,n,i){const o=i[i.length-2],l=i[i.length-1],a=sa._segmentsCount(bf.curveLength(o,l,t,e,r,n));let h=0,c=0;for(let u=1;u<=a;++u){const d=u/a;h=o+(t-o)*d,c=l+(e-l)*d,i.push(h+(t+(r-t)*d-h)*d,c+(e+(n-e)*d-c)*d)}}}const Au={[Ke.POLY]:LA,[Ke.CIRC]:Vl,[Ke.ELIP]:Vl,[Ke.RECT]:_2,[Ke.RREC]:A2},Ty=[],qo=[];class Ul{constructor(t,e=null,r=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}clone(){return new Ul(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const vi=new Ee,VA=class UA extends Z_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Ll,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),qo.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),Ty.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const i=new Ul(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new Ul(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,vi):vi.copyFrom(t),n.shape.contains(vi.x,vi.y))){let i=!1;if(n.holes){for(let o=0;o<n.holes.length;o++)if(n.holes[o].shape.contains(vi.x,vi.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const h=e[a],c=h.fillStyle,u=h.lineStyle;Au[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(c.visible||u.visible)&&this.processHoles(h.holes);for(let d=0;d<2;d++){const f=d===0?c:u;if(!f.visible)continue;const m=f.texture.baseTexture,g=this.indices.length,p=this.points.length/2;m.wrapMode=so.REPEAT,d===0?this.processFill(h):this.processLine(h);const y=this.points.length/2-p;y!==0&&(r&&!this._compareStyles(n,f)&&(r.end(g,p),r=null),r||(r=Ty.pop()||new b2,r.begin(f,g,p),this.batches.push(r),n=f),this.addUvs(this.points,t,f.texture,p,y,f.matrix))}}const i=this.indices.length,o=this.points.length/2;if(r&&r.end(i,o),this.batches.length===0){this.batchable=!0;return}const l=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&l===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=l?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const r=this.graphicsData[t],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const n=t[e];for(let i=0;i<n.size;i++){const o=n.start+i;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<UA.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Dt._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),qo.push(this.drawCalls[u]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=qo.pop();n||(n=new cd,n.texArray=new md),n.texArray.count=0,n.start=0,n.size=0,n.type=dr.TRIANGLES;let i=0,o=null,l=0,a=!1,h=dr.TRIANGLES,c=0;this.drawCalls.push(n);for(let u=0;u<this.batches.length;u++){const d=this.batches[u],f=8,m=d.style,g=m.texture.baseTexture;a!==!!m.native&&(a=!!m.native,h=a?dr.LINES:dr.TRIANGLES,o=null,i=f,t++),o!==g&&(o=g,g._batchEnabled!==t&&(i===f&&(t++,i=0,n.size>0&&(n=qo.pop(),n||(n=new cd,n.texArray=new md),this.drawCalls.push(n)),n.start=c,n.size=0,n.texArray.count=0,n.type=h),g.touched=1,g._batchEnabled=t,g._batchLocation=i,g.wrapMode=so.REPEAT,n.texArray.elements[n.texArray.count++]=g,i++)),n.size+=d.size,c+=d.size,l=g._batchLocation,this.addColors(e,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,l,d.attribSize,d.attribStart)}Dt._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(t.length*3*4),o=new Float32Array(i),l=new Uint32Array(i);let a=0;for(let h=0;h<t.length/2;h++)o[a++]=t[h*2],o[a++]=t[h*2+1],o[a++]=e[h*2],o[a++]=e[h*2+1],l[a++]=r[h],o[a++]=n[h];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?LA.triangulate(t,this):Au[t.type].triangulate(t,this)}processLine(t){Sy(t,this);for(let e=0;e<t.holes.length;e++)Sy(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];Au[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[r*2],i=t[r*2+1];t[r*2]=e.a*n+e.c*i+e.tx,t[r*2+1]=e.b*n+e.d*i+e.ty}}addColors(t,e,r,n,i=0){const o=es.shared.setValue(e).toLittleEndianNumber(),l=es.shared.setValue(o).toPremultiplied(r);t.length=Math.max(t.length,i+n);for(let a=0;a<n;a++)t[i+a]=l}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let i=0;i<r;i++)t[n+i]=e}addUvs(t,e,r,n,i,o=null){let l=0;const a=e.length,h=r.frame;for(;l<i;){let u=t[(n+l)*2],d=t[(n+l)*2+1];if(o){const f=o.a*u+o.c*d+o.tx;d=o.b*u+o.d*d+o.ty,u=f}l++,e.push(u/h.width,d/h.height)}const c=r.baseTexture;(h.width<c.width||h.height<c.height)&&this.adjustUvs(e,r,a,i)}adjustUvs(t,e,r,n){const i=e.baseTexture,o=1e-6,l=r+n*2,a=e.frame,h=a.width/i.width,c=a.height/i.height;let u=a.x/a.width,d=a.y/a.height,f=Math.floor(t[r]+o),m=Math.floor(t[r+1]+o);for(let g=r+2;g<l;g+=2)f=Math.min(f,Math.floor(t[g]+o)),m=Math.min(m,Math.floor(t[g+1]+o));u-=f,d-=m;for(let g=r;g<l;g+=2)t[g]=(t[g]+u)*h,t[g+1]=(t[g+1]+d)*c}};VA.BATCHABLE_SIZE=100;let E2=VA;class mh{constructor(){this.color=16777215,this.alpha=1,this.texture=Ct.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new mh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=Ct.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class vf extends mh{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=xn.BUTT,this.join=ks.MITER,this.miterLimit=10}clone(){const t=new vf;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=xn.BUTT,this.join=ks.MITER,this.miterLimit=10}}const bu={},Td=class fl extends fr{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new mh,this._lineStyle=new vf,this._matrix=null,this._holeMode=!1,this.state=Mn.for2d(),this._geometry=t||new E2,this._geometry.refCount++,this._transformID=-1,this._tintColor=new es(16777215),this.blendMode=ft.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new fl(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r,n=.5,i=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:Ct.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:xn.BUTT,join:ks.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new bn,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new bn,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==t||i!==e)&&r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),bf.curveTo(t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,o){return this._initCurve(),Af.curveTo(t,e,r,n,i,o,this.currentPath.points),this}arcTo(t,e,r,n,i){this._initCurve(t,e);const o=this.currentPath.points,l=wy.curveTo(t,e,r,n,i,o);if(l){const{cx:a,cy:h,radius:c,startAngle:u,endAngle:d,anticlockwise:f}=l;this.arc(a,h,c,u,d,f)}return this}arc(t,e,r,n,i,o=!1){if(n===i)return this;if(!o&&i<=n?i+=Pl:o&&n<=i&&(n+=Pl),i-n===0)return this;const l=t+Math.cos(n)*r,a=e+Math.sin(n)*r,h=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const u=Math.abs(c[c.length-2]-l),d=Math.abs(c[c.length-1]-a);u<h&&d<h||c.push(l,a)}else this.moveTo(l,a),c=this.currentPath.points;return wy.arc(l,a,t,e,r,n,i,o,c),this}beginFill(t=0,e){return this.beginTextureFill({texture:Ct.WHITE,color:t,alpha:e})}normalizeColor(t){const e=es.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:Ct.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new Ht(t,e,r,n))}drawRoundedRect(t,e,r,n,i){return this.drawShape(new uh(t,e,r,n,i))}drawCircle(t,e,r){return this.drawShape(new hh(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new ch(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const i=new bn(e);return i.closeStroke=r,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Ke.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const i=t.batches[n],o=i.style.color,l=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),h=new Uint16Array(t.indicesUint16.buffer,i.start*2,i.size),c={vertexData:l,blendMode:e,indices:h,uvs:a,_batchRGB:es.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.worldAlpha,i=e.uniforms,o=r.drawCalls;i.translationMatrix=this.transform.worldTransform,es.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let l=0,a=o.length;l<a;l++)this._renderDrawCallDirect(t,r.drawCalls[l])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:i,start:o}=e,l=r.count;for(let a=0;a<l;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,i,o)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!bu[r]){const{maxTextures:n}=t.plugins[r],i=new Int32Array(n);for(let a=0;a<n;a++)i[a]=a;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Se,default:gr.from({uSamplers:i},!0)},l=t.plugins[r]._shader.program;bu[r]=new ca(l,o)}e=bu[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,i)}containsPoint(t){return this.worldTransform.applyInverse(t,fl._TEMP_POINT),this._geometry.containsPoint(fl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=es.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,l=e.tx,a=e.ty,h=this._geometry.points,c=this.vertexData;let u=0;for(let d=0;d<h.length;d+=2){const f=h[d],m=h[d+1];c[u++]=r*f+i*m+l,c[u++]=o*m+n*f+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Td.curves=sa,Td._TEMP_POINT=new Ee;let S2=Td;const sn=[0,0,0];class T2 extends _f{constructor(){super(...arguments),this.region=null,this.attachment=null}}class C2 extends x2{constructor(t,e,r,n,i){super(t,e,r,n,i),this.region=null,this.attachment=null}}const DA=class extends fr{constructor(s){if(super(),!s)throw new Error("The spineData param is required.");if(typeof s=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=s,this.createSkeleton(s),this.slotContainers=[],this.tempClipContainers=[];for(let t=0,e=this.skeleton.slots.length;t<e;t++){const r=this.skeleton.slots[t],n=r.getAttachment(),i=this.newContainer();if(this.slotContainers.push(i),this.addChild(i),this.tempClipContainers.push(null),!!n)if(n.type===Bt.Region){const o=n.name,l=this.createSprite(r,n,o);r.currentSprite=l,r.currentSpriteName=o,i.addChild(l)}else if(n.type===Bt.Mesh){const o=this.createMesh(r,n);r.currentMesh=o,r.currentMeshId=n.id,r.currentMeshName=n.name,i.addChild(o)}else n.type===Bt.Clipping&&(this.createGraphics(r,n),i.addChild(r.clippingContainer),i.addChild(r.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get debug(){return this._debug}set debug(s){var t;s!=this._debug&&((t=this._debug)==null||t.unregisterSpine(this),s==null||s.registerSpine(this),this._debug=s)}get autoUpdate(){return this._autoUpdate}set autoUpdate(s){s!==this._autoUpdate&&(this._autoUpdate=s,this.updateTransform=s?DA.prototype.autoUpdateTransform:fr.prototype.updateTransform)}get tint(){return ou(this.tintRgb)}set tint(s){this.tintRgb=NP(s,this.tintRgb)}get delayLimit(){return(typeof this.localDelayLimit<"u"?this.localDelayLimit:o2.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE}update(s){var h;const t=this.delayLimit;if(s>t&&(s=t),this.state.update(s),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();const e=this.skeleton.slots,r=this.color;let n=null,i=null;r?(n=r.light,i=r.dark):n=this.tintRgb;for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.getAttachment(),m=this.slotContainers[c];if(!f){m.visible=!1;continue}let g=null;f.sequence&&f.sequence.apply(d,f);let p=f.region;const y=f.color;switch(f!=null&&f.type){case Bt.Region:if(m.transform.setFromMatrix(d.bone.matrix),p=f.region,d.currentMesh&&(d.currentMesh.visible=!1,d.currentMesh=null,d.currentMeshId=void 0,d.currentMeshName=void 0),!p){d.currentSprite&&(d.currentSprite.renderable=!1);break}if(!d.currentSpriteName||d.currentSpriteName!==f.name){const A=f.name;if(d.currentSprite&&(d.currentSprite.visible=!1),d.sprites=d.sprites||{},d.sprites[A]!==void 0)d.sprites[A].visible=!0;else{const b=this.createSprite(d,f,A);m.addChild(b)}d.currentSprite=d.sprites[A],d.currentSpriteName=A}d.currentSprite.renderable=!0,d.hackRegion||this.setSpriteRegion(f,d.currentSprite,p),d.currentSprite.color?g=d.currentSprite.color:(sn[0]=n[0]*d.color.r*y.r,sn[1]=n[1]*d.color.g*y.g,sn[2]=n[2]*d.color.b*y.b,d.currentSprite.tint=ou(sn)),d.currentSprite.blendMode=d.blendMode;break;case Bt.Mesh:if(d.currentSprite){d.currentSprite.visible=!1,d.currentSprite=null,d.currentSpriteName=void 0;const A=new dh;A._parentID=-1,A._worldID=m.transform._worldID,m.transform=A}if(!p){d.currentMesh&&(d.currentMesh.renderable=!1);break}const _=f.id;if(d.currentMeshId===void 0||d.currentMeshId!==_){const A=_;if(d.currentMesh&&(d.currentMesh.visible=!1),d.meshes=d.meshes||{},d.meshes[A]!==void 0)d.meshes[A].visible=!0;else{const b=this.createMesh(d,f);m.addChild(b)}d.currentMesh=d.meshes[A],d.currentMeshName=f.name,d.currentMeshId=A}d.currentMesh.renderable=!0,f.computeWorldVerticesOld(d,d.currentMesh.vertices),d.currentMesh.color?g=d.currentMesh.color:(sn[0]=n[0]*d.color.r*y.r,sn[1]=n[1]*d.color.g*y.g,sn[2]=n[2]*d.color.b*y.b,d.currentMesh.tint=ou(sn)),d.currentMesh.blendMode=d.blendMode,d.hackRegion||this.setMeshRegion(f,d.currentMesh,p);break;case Bt.Clipping:d.currentGraphics||(this.createGraphics(d,f),m.addChild(d.clippingContainer),m.addChild(d.currentGraphics)),this.updateGraphics(d,f),m.alpha=1,m.visible=!0;continue;default:m.visible=!1;continue}if(m.visible=!0,g){let x=d.color.r*y.r,_=d.color.g*y.g,A=d.color.b*y.b;g.setLight(n[0]*x+i[0]*(1-x),n[1]*_+i[1]*(1-_),n[2]*A+i[2]*(1-A)),d.darkColor?(x=d.darkColor.r,_=d.darkColor.g,A=d.darkColor.b):(x=0,_=0,A=0),g.setDark(n[0]*x+i[0]*(1-x),n[1]*_+i[1]*(1-_),n[2]*A+i[2]*(1-A))}m.alpha=d.color.a}const o=this.skeleton.drawOrder;let l=null,a=null;for(let c=0,u=o.length;c<u;c++){const d=e[o[c].data.index],f=this.slotContainers[o[c].data.index];if(a||f.parent!==null&&f.parent!==this&&(f.parent.removeChild(f),f.parent=this),d.currentGraphics&&d.getAttachment())a=d.clippingContainer,l=d.getAttachment(),a.children.length=0,this.children[c]=f,l.endSlot===d.data&&(l.endSlot=null);else if(a){let m=this.tempClipContainers[c];m||(m=this.tempClipContainers[c]=this.newContainer(),m.visible=!1),this.children[c]=m,f.parent=null,a.addChild(f),l.endSlot==d.data&&(a.renderable=!0,a=null,l=null)}else this.children[c]=f}(h=this._debug)==null||h.renderDebug(this)}setSpriteRegion(s,t,e){t.attachment===s&&t.region===e||(t.region=e,t.attachment=s,t.texture=e.texture,t.rotation=s.rotation*xt.degRad,t.position.x=s.x,t.position.y=s.y,t.alpha=s.color.a,e.size?(t.scale.x=e.size.width/e.originalWidth,t.scale.y=-e.size.height/e.originalHeight):(t.scale.x=s.scaleX*s.width/e.originalWidth,t.scale.y=-s.scaleY*s.height/e.originalHeight))}setMeshRegion(s,t,e){t.attachment===s&&t.region===e||(t.region=e,t.attachment=s,t.texture=e.texture,e.texture.updateUvs(),t.uvBuffer.update(s.regionUVs))}autoUpdateTransform(){{this.lastTime=this.lastTime||Date.now();const s=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(s)}fr.prototype.updateTransform.call(this)}createSprite(s,t,e){let r=t.region;s.hackAttachment===t&&(r=s.hackRegion);const n=r?r.texture:null,i=this.newSprite(n);return i.anchor.set(.5),r&&this.setSpriteRegion(t,i,t.region),s.sprites=s.sprites||{},s.sprites[e]=i,i}createMesh(s,t){!t.region&&t.sequence&&t.sequence.apply(s,t);let e=t.region;s.hackAttachment===t&&(e=s.hackRegion,s.hackAttachment=null,s.hackRegion=null);const r=this.newMesh(e?e.texture:null,new Float32Array(t.regionUVs.length),t.regionUVs,new Uint16Array(t.triangles),dr.TRIANGLES);return typeof r._canvasPadding<"u"&&(r._canvasPadding=1.5),r.alpha=t.color.a,r.region=t.region,e&&this.setMeshRegion(t,r,e),s.meshes=s.meshes||{},s.meshes[t.id]=r,r}createGraphics(s,t){const e=this.newGraphics(),r=new bn([]);return e.clear(),e.beginFill(16777215,1),e.drawPolygon(r),e.renderable=!1,s.currentGraphics=e,s.clippingContainer=this.newContainer(),s.clippingContainer.mask=s.currentGraphics,e}updateGraphics(s,t){const e=s.currentGraphics.geometry,r=e.graphicsData[0].shape.points,n=t.worldVerticesLength;r.length=n,t.computeWorldVertices(s,0,n,r,0,2),e.invalidate()}hackTextureBySlotIndex(s,t=null,e=null){const r=this.skeleton.slots[s];if(!r)return!1;const n=r.getAttachment();let i=n.region;return t?(i=new wd,i.texture=t,i.size=e,r.hackRegion=i,r.hackAttachment=n):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite?this.setSpriteRegion(n,r.currentSprite,i):r.currentMesh&&this.setMeshRegion(n,r.currentMesh,i),!0}hackTextureBySlotName(s,t=null,e=null){const r=this.skeleton.findSlotIndex(s);return r==-1?!1:this.hackTextureBySlotIndex(r,t,e)}hackTextureAttachment(s,t,e,r=null){const n=this.skeleton.findSlotIndex(s),i=this.skeleton.getAttachmentByName(s,t);i.region.texture=e;const o=this.skeleton.slots[n];if(!o)return!1;const l=o.getAttachment();if(t===l.name){let a=i.region;return e?(a=new wd,a.texture=e,a.size=r,o.hackRegion=a,o.hackAttachment=l):(o.hackRegion=null,o.hackAttachment=null),o.currentSprite&&o.currentSprite.region!=a?(this.setSpriteRegion(l,o.currentSprite,a),o.currentSprite.region=a):o.currentMesh&&o.currentMesh.region!=a&&this.setMeshRegion(l,o.currentMesh,a),!0}return!1}newContainer(){return new fr}newSprite(s){return new T2(s)}newGraphics(){return new S2}newMesh(s,t,e,r,n){return new C2(s,t,e,r,n)}transformHack(){return 1}hackAttachmentGroups(s,t,e){if(!s)return;const r=[],n=[];for(let i=0,o=this.skeleton.slots.length;i<o;i++){const l=this.skeleton.slots[i],a=l.currentSpriteName||l.currentMeshName||"",h=l.currentSprite||l.currentMesh;a.endsWith(s)?(h.parentGroup=t,n.push(h)):e&&h&&(h.parentGroup=e,r.push(h))}return[r,n]}destroy(s){this.debug=null;for(let t=0,e=this.skeleton.slots.length;t<e;t++){const r=this.skeleton.slots[t];for(const n in r.meshes)r.meshes[n].destroy(s);r.meshes=null;for(const n in r.sprites)r.sprites[n].destroy(s);r.sprites=null}for(let t=0,e=this.slotContainers.length;t<e;t++)this.slotContainers[t].destroy(s);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(s)}};let GA=DA;GA.clippingPolygon=[];Object.defineProperty(GA.prototype,"visible",{get(){return this._visible},set(s){s!==this._visible&&(this._visible=s,s&&(this.lastTime=0))}});const Cy={loader:mt.LoadParser,resolver:mt.ResolveParser,cache:mt.CacheParser,detection:mt.DetectionParser};wt.handle(mt.Asset,s=>{const t=s.ref;Object.entries(Cy).filter(([e])=>!!t[e]).forEach(([e,r])=>wt.add(Object.assign(t[e],{extension:t[e].extension??r})))},s=>{const t=s.ref;Object.keys(Cy).filter(e=>!!t[e]).forEach(e=>wt.remove(t[e]))});class R2{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<e;r++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function ua(s,t){if(Array.isArray(t)){for(const e of t)if(s.startsWith(`data:${e}`))return!0;return!1}return s.startsWith(`data:${t}`)}function Ds(s,t){const e=s.split("?")[0],r=ns.extname(e).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}const cr=(s,t,e=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(r=>typeof r=="string"||e?t(r):r):s);function $A(s,t,e,r,n){const i=t[e];for(let o=0;o<i.length;o++){const l=i[o];e<t.length-1?$A(s.replace(r[e],l),t,e+1,r,n):n.push(s.replace(r[e],l))}}function I2(s){const t=/\{(.*?)\}/g,e=s.match(t),r=[];if(e){const n=[];e.forEach(i=>{const o=i.substring(1,i.length-1).split(",");n.push(o)}),$A(s,n,0,e,r)}else r.push(s);return r}const Dl=s=>!Array.isArray(s);class M2{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const r=cr(t);let n;for(let l=0;l<this.parsers.length;l++){const a=this.parsers[l];if(a.test(e)){n=a.getCacheableAssets(r,e);break}}n||(n={},r.forEach(l=>{n[l]=e}));const i=Object.keys(n),o={cacheKeys:i,keys:r};if(r.forEach(l=>{this._cacheMap.set(l,o)}),i.forEach(l=>{const a=n?n[l]:e;this._cache.has(l)&&this._cache.get(l)!==a&&console.warn("[Cache] already has key:",l),this._cache.set(l,n[l])}),e instanceof Ct){const l=e;r.forEach(a=>{l.baseTexture!==Ct.EMPTY.baseTexture&&Dt.addToCache(l.baseTexture,a),Ct.addToCache(l,a)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Jn=new M2;class P2{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,r)=>(this._parsersValidated=!1,t[e]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const r={promise:null,parser:null};return r.promise=(async()=>{var o,l;let n=null,i=null;if(e.loadParser&&(i=this._parserHash[e.loadParser],i||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!i){for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];if(h.load&&((o=h.test)!=null&&o.call(h,t,e,this))){i=h;break}}if(!i)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await i.load(t,e,this),r.parser=i;for(let a=0;a<this.parsers.length;a++){const h=this.parsers[a];h.parse&&h.parse&&await((l=h.testParse)==null?void 0:l.call(h,n,e,this))&&(n=await h.parse(n,e,this)||n,r.parser=h)}return n})(),r}async load(t,e){this._parsersValidated||this._validateParsers();let r=0;const n={},i=Dl(t),o=cr(t,h=>({alias:[h],src:h})),l=o.length,a=o.map(async h=>{const c=ns.toAbsolute(h.src);if(!n[h.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,h)),n[h.src]=await this.promiseCache[c].promise,e&&e(++r/l)}catch(u){throw delete this.promiseCache[c],delete n[h.src],new Error(`[Loader.load] Failed to load ${c}.
${u}`)}});return await Promise.all(a),i?n[o[0].src]:n}async unload(t){const e=cr(t,r=>({alias:[r],src:r})).map(async r=>{var o,l;const n=ns.toAbsolute(r.src),i=this.promiseCache[n];if(i){const a=await i.promise;delete this.promiseCache[n],(l=(o=i.parser)==null?void 0:o.unload)==null||l.call(o,a,r,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var Zr=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(Zr||{});const F2=".json",B2="application/json",k2={extension:{type:mt.LoadParser,priority:Zr.Low},name:"loadJson",test(s){return ua(s,B2)||Ds(s,F2)},async load(s){return await(await Et.ADAPTER.fetch(s)).json()}};wt.add(k2);const N2=".txt",O2="text/plain",L2={name:"loadTxt",extension:{type:mt.LoadParser,priority:Zr.Low},test(s){return ua(s,O2)||Ds(s,N2)},async load(s){return await(await Et.ADAPTER.fetch(s)).text()}};wt.add(L2);const V2=["normal","bold","100","200","300","400","500","600","700","800","900"],U2=[".ttf",".otf",".woff",".woff2"],D2=["font/ttf","font/otf","font/woff","font/woff2"],G2=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function $2(s){const t=ns.extname(s),e=ns.basename(s,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1));let r=e.length>0;for(const i of e)if(!i.match(G2)){r=!1;break}let n=e.join(" ");return r||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const X2=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function H2(s){return X2.test(s)?s:encodeURI(s)}const Y2={extension:{type:mt.LoadParser,priority:Zr.Low},name:"loadWebFont",test(s){return ua(s,D2)||Ds(s,U2)},async load(s,t){var r,n,i;const e=Et.ADAPTER.getFontFaceSet();if(e){const o=[],l=((r=t.data)==null?void 0:r.family)??$2(s),a=((i=(n=t.data)==null?void 0:n.weights)==null?void 0:i.filter(c=>V2.includes(c)))??["normal"],h=t.data??{};for(let c=0;c<a.length;c++){const u=a[c],d=new FontFace(l,`url(${H2(s)})`,{...h,weight:u});await d.load(),e.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(t=>Et.ADAPTER.getFontFaceSet().delete(t))}};wt.add(Y2);const j2=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let zi=null,Cd=class{constructor(){zi||(zi=URL.createObjectURL(new Blob([j2],{type:"application/javascript"}))),this.worker=new Worker(zi)}};Cd.revokeObjectURL=function(){zi&&(URL.revokeObjectURL(zi),zi=null)};const z2=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Wi=null;class XA{constructor(){Wi||(Wi=URL.createObjectURL(new Blob([z2],{type:"application/javascript"}))),this.worker=new Worker(Wi)}}XA.revokeObjectURL=function(){Wi&&(URL.revokeObjectURL(Wi),Wi=null)};let Ry=0,vu;class W2{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Cd;e.addEventListener("message",r=>{e.terminate(),Cd.revokeObjectURL(),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){vu===void 0&&(vu=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<vu&&(this._createdWorkers++,t=new XA().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const r=new Promise((n,i)=>{this.queue.push({id:t,arguments:e,resolve:n,reject:i})});return this.next(),r}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),r=e.id;this.resolveHash[Ry]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Ry++,id:r})}}const Iy=new W2;function wf(s,t,e){s.resource.internal=!0;const r=new Ct(s),n=()=>{delete t.promiseCache[e],Jn.has(e)&&Jn.remove(e)};return r.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),n())}),r.once("destroyed",()=>{s.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),r}const q2=[".jpeg",".jpg",".png",".webp",".avif"],K2=["image/jpeg","image/png","image/webp","image/avif"];async function Z2(s){const t=await Et.ADAPTER.fetch(s);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const ph={name:"loadTextures",extension:{type:mt.LoadParser,priority:Zr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return ua(s,K2)||Ds(s,q2)},async load(s,t,e){var l;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let n;r?this.config.preferWorkers&&await Iy.isImageBitmapSupported()?n=await Iy.loadImageBitmap(s):n=await Z2(s):n=await new Promise((a,h)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=s,c.complete?a(c):(c.onload=()=>a(c),c.onerror=u=>h(u))});const i={...t.data};i.resolution??(i.resolution=no(s)),r&&((l=i.resourceOptions)==null?void 0:l.ownsImageBitmap)===void 0&&(i.resourceOptions={...i.resourceOptions},i.resourceOptions.ownsImageBitmap=!0);const o=new Dt(n,i);return o.resource.src=s,wf(o,e,s)},unload(s){s.destroy(!0)}};wt.add(ph);const Q2=".svg",J2="image/svg+xml",tB={extension:{type:mt.LoadParser,priority:Zr.High},name:"loadSVG",test(s){return ua(s,J2)||Ds(s,Q2)},async testParse(s){return Ad.test(s)},async parse(s,t,e){var i;const r=new Ad(s,(i=t==null?void 0:t.data)==null?void 0:i.resourceOptions);await r.load();const n=new Dt(r,{resolution:no(s),...t==null?void 0:t.data});return n.resource.src=t.src,wf(n,e,t.src)},async load(s,t){return(await Et.ADAPTER.fetch(s)).text()},unload:ph.unload};wt.add(tB);const eB=[".mp4",".m4v",".webm",".ogv"],sB=["video/mp4","video/webm","video/ogg"],rB={name:"loadVideo",extension:{type:mt.LoadParser,priority:Zr.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(s){return ua(s,sB)||Ds(s,eB)},async load(s,t,e){var o;let r;const n=await(await Et.ADAPTER.fetch(s)).blob(),i=URL.createObjectURL(n);try{const l={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},a=new FA(i,l);await a.load();const h=new Dt(a,{alphaMode:await BP(),resolution:no(s),...t==null?void 0:t.data});h.resource.src=s,r=wf(h,e,s),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(i)})}catch(l){throw URL.revokeObjectURL(i),l}return r},unload(s){s.destroy(!0)}};wt.add(rB);class nB{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`).join("&")}}getAlias(t){const{alias:e,name:r,src:n,srcs:i}=t;return cr(e||r||n||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(l=>(l==null?void 0:l.src)??(l==null?void 0:l.srcs)??l):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const r=[];Array.isArray(e)?e.forEach(n=>{const i=n.src??n.srcs,o=n.alias??n.name;let l;if(typeof o=="string"){const a=this._createBundleAssetId(t,o);r.push(a),l=[o,a]}else{const a=o.map(h=>this._createBundleAssetId(t,h));r.push(...a),l=[...o,...a]}this.add({...n,alias:l,src:i})}):Object.keys(e).forEach(n=>{const i=[n,this._createBundleAssetId(t,n)];if(typeof e[n]=="string")this.add({alias:i,src:e[n]});else if(Array.isArray(e[n]))this.add({alias:i,src:e[n]});else{const o=e[n],l=o.src??o.srcs;this.add({...o,alias:i,src:Array.isArray(l)?l:[l]})}r.push(...i)}),this._bundles[t]=r}add(t,e,r,n,i){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?($t("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:r,format:n,loadParser:i})):Array.isArray(t)?o.push(...t):o.push(t);let l;l=a=>{this.hasKey(a)&&console.warn(`[Resolver] already has key: ${a} overwriting`)},cr(o).forEach(a=>{const{src:h,srcs:c}=a;let{data:u,format:d,loadParser:f}=a;const m=cr(h||c).map(y=>typeof y=="string"?I2(y):Array.isArray(y)?y:[y]),g=this.getAlias(a);Array.isArray(g)?g.forEach(l):l(g);const p=[];m.forEach(y=>{y.forEach(x=>{let _={};if(typeof x!="object"){_.src=x;for(let A=0;A<this._parsers.length;A++){const b=this._parsers[A];if(b.test(x)){_=b.parse(x);break}}}else u=x.data??u,d=x.format??d,f=x.loadParser??f,_={..._,...x};if(!g)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:g,data:u,format:d,loadParser:f}),p.push(_)})}),g.forEach(y=>{this._assetMap[y]=p})})}resolveBundle(t){const e=Dl(t);t=cr(t);const r={};return t.forEach(n=>{const i=this._bundles[n];if(i){const o=this.resolve(i),l={};for(const a in o){const h=o[a];l[this._extractAssetIdFromBundle(n,a)]=h}r[n]=l}}),e?r[t[0]]:r}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const r={};for(const n in e)r[n]=e[n].src;return r}return e.src}resolve(t){const e=Dl(t);t=cr(t);const r={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let i=this._assetMap[n];const o=i[0],l=this._getPreferredOrder(i);l==null||l.priority.forEach(a=>{l.params[a].forEach(h=>{const c=i.filter(u=>u[a]?u[a]===h:!1);c.length&&(i=c)})}),this._resolverHash[n]=i[0]??o}else this._resolverHash[n]=this.buildResolvedAsset({alias:[n],src:n},{});r[n]=this._resolverHash[n]}),e?r[t[0]]:r}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const r=t[0],n=this._preferredOrder.find(i=>i.params.format.includes(r.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:r,data:n,loadParser:i,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=ns.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=r??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...n||{},...t.data},t.loadParser=i??t.loadParser,t.format=o??t.format??ns.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class iB{constructor(){this._detections=[],this._initialized=!1,this.resolver=new nB,this.loader=new P2,this.cache=Jn,this._backgroundLoader=new R2(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var i,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((i=t.texturePreference)==null?void 0:i.resolution)??1,r=typeof e=="number"?[e]:e,n=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:n,resolution:r}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,r,n,i){this.resolver.add(t,e,r,n,i)}async load(t,e){this._initialized||await this.init();const r=Dl(t),n=cr(t).map(l=>{if(typeof l!="string"){const a=this.resolver.getAlias(l);return a.some(h=>!this.resolver.hasKey(h))&&this.add(l),Array.isArray(a)?a[0]:a}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),i=this.resolver.resolve(n),o=await this._mapLoadToResolve(i,e);return r?o[n[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let r=!1;typeof t=="string"&&(r=!0,t=[t]);const n=this.resolver.resolveBundle(t),i={},o=Object.keys(n);let l=0,a=0;const h=()=>{e==null||e(++l/a)},c=o.map(u=>{const d=n[u];return a+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{i[u]=f})});return await Promise.all(c),r?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Jn.get(t);const e={};for(let r=0;r<t.length;r++)e[r]=Jn.get(t[r]);return e}async _mapLoadToResolve(t,e){const r=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const i=await this.loader.load(r,e);this._backgroundLoader.active=!0;const o={};return r.forEach((l,a)=>{const h=i[l.src],c=[l.src];l.alias&&c.push(...l.alias),o[n[a]]=h,Jn.set(c,h)}),o}async unload(t){this._initialized||await this.init();const e=cr(t).map(n=>typeof n!="string"?n.src:n),r=this.resolver.resolve(e);await this._unloadFromResolved(r)}async unloadBundle(t){this._initialized||await this.init(),t=cr(t);const e=this.resolver.resolveBundle(t),r=Object.keys(e).map(n=>this._unloadFromResolved(e[n]));await Promise.all(r)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(r=>{Jn.remove(r.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const r of t.detections)t.skipDetections||await r.test()?e=await r.add(e):t.skipDetections||(e=await r.remove(e));return e=e.filter((r,n)=>e.indexOf(r)===n),e}get detections(){return this._detections}get preferWorkers(){return ph.config.preferWorkers}set preferWorkers(t){$t("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(r=>r in t).forEach(r=>{e.config[r]=t[r]})})}}const Ko=new iB;wt.handleByList(mt.LoadParser,Ko.loader.parsers).handleByList(mt.ResolveParser,Ko.resolver.parsers).handleByList(mt.CacheParser,Ko.cache.parsers).handleByList(mt.DetectionParser,Ko.detections);const aB={extension:mt.CacheParser,test:s=>Array.isArray(s)&&s.every(t=>t instanceof Ct),getCacheableAssets:(s,t)=>{const e={};return s.forEach(r=>{t.forEach((n,i)=>{e[r+(i===0?"":i+1)]=n})}),e}};wt.add(aB);async function HA(s){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(s)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const oB={extension:{type:mt.DetectionParser,priority:1},test:async()=>HA("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(t=>t!=="avif")};wt.add(oB);const lB={extension:{type:mt.DetectionParser,priority:0},test:async()=>HA("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(t=>t!=="webp")};wt.add(lB);const My=["png","jpg","jpeg"],hB={extension:{type:mt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...My],remove:async s=>s.filter(t=>!My.includes(t))};wt.add(hB);const cB="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ef(s){return cB?!1:document.createElement("video").canPlayType(s)!==""}const uB={extension:{type:mt.DetectionParser,priority:0},test:async()=>Ef("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(t=>t!=="webm")};wt.add(uB);const dB={extension:{type:mt.DetectionParser,priority:0},test:async()=>Ef("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(t=>t!=="mp4"&&t!=="m4v")};wt.add(dB);const fB={extension:{type:mt.DetectionParser,priority:0},test:async()=>Ef("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(t=>t!=="ogv")};wt.add(fB);const mB={extension:mt.ResolveParser,test:ph.test,parse:s=>{var t;return{resolution:parseFloat(((t=Et.RETINA_PREFIX.exec(s))==null?void 0:t[1])??"1"),format:ns.extname(s).slice(1),src:s}}};wt.add(mB);const pB={extension:mt.Asset,loader:{extension:{type:mt.LoadParser,priority:Zr.Normal},test(s){return Ds(s,".atlas")},async load(s){return await(await Et.ADAPTER.fetch(s)).text()},testParse(s,t){const e=Ds(t.src,".atlas"),r=typeof s=="string";return Promise.resolve(e&&r)},async parse(s,t,e){const r=t.data;let n=ns.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=null,o=null;const l=new Promise((c,u)=>{i=c,o=u});let a;const h=c=>{c||o(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),i(a)};if(r.image||r.images){const c=Object.assign(r.image?{default:r.image}:{},r.images);a=new Ed(s,(u,d)=>{const f=c[u]||c.default;f&&f.baseTexture?d(f.baseTexture):d(f)},h)}else a=new Ed(s,YA(e,n,r.imageMetadata),h);return await l},unload(s){s.dispose()}}},YA=(s,t,e)=>async(r,n)=>{try{const i=ns.normalize([...t.split(ns.sep),r].join(ns.sep)),o=await s.load({src:i,data:e});n(o.baseTexture)}catch(i){console.error("Spine: error in texture loader",i),n(null)}};wt.add(pB);function Py(s){return s.hasOwnProperty("bones")}function gB(s){return s instanceof ArrayBuffer}class yB{constructor(){}installLoader(){const t=this,e={extension:mt.Asset,loader:{extension:{type:mt.LoadParser,priority:Zr.Normal},test(r){return Ds(r,".skel")},async load(r){return await(await Et.ADAPTER.fetch(r)).arrayBuffer()},testParse(r,n){var a;const i=Ds(n.src,".json")&&Py(r),o=Ds(n.src,".skel")&&gB(r),l=((a=n.data)==null?void 0:a.spineAtlas)===!1;return Promise.resolve(i&&!l||o)},async parse(r,n,i){const o=ns.extname(n.src).toLowerCase(),l=ns.basename(n.src,o);let a=ns.dirname(n.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");const h=Ds(n.src,".json")&&Py(r);let c=null,u=r;h?c=t.createJsonParser():(c=t.createBinaryParser(),u=new Uint8Array(r));const d=n.data||{},f=(d==null?void 0:d.spineSkeletonScale)??null;f&&(c.scale=f);const m=d.spineAtlas;if(m&&m.pages)return t.parseData(c,m,u);const g=d.atlasRawData;if(g){let x=null,_=null;const A=new Promise((v,R)=>{x=v,_=R}),b=new Ed(g,YA(i,a,d.imageMetadata),v=>{v||_(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),x(b)}),w=await A;return t.parseData(c,w,u)}let p=d.spineAtlasFile;p||(p=`${a+l}.atlas`);const y=await i.load({src:p,data:d,alias:d.spineAtlasAlias});return t.parseData(c,y,u)}}};return wt.add(e),e}}let jA=class{constructor(t){if(t==null)throw new Error("name cannot be null.");this.name=t}};const zA=class extends jA{constructor(t){super(t),this.id=(zA.nextID++&65535)<<11,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,r,n,i,o){r=i+(r>>1)*o;const l=t.bone.skeleton,a=t.deform;let h=this.vertices;const c=this.bones;if(c==null){a.length>0&&(h=a);const m=t.bone.matrix,g=m.tx,p=m.ty,y=m.a,x=m.c,_=m.b,A=m.d;for(let b=e,w=i;w<r;b+=2,w+=o){const v=h[b],R=h[b+1];n[w]=v*y+R*x+g,n[w+1]=v*_+R*A+p}return}let u=0,d=0;for(let m=0;m<e;m+=2){const g=c[u];u+=g+1,d+=g}const f=l.bones;if(a.length==0)for(let m=i,g=d*3;m<r;m+=o){let p=0,y=0,x=c[u++];for(x+=u;u<x;u++,g+=3){const _=f[c[u]].matrix,A=h[g],b=h[g+1],w=h[g+2];p+=(A*_.a+b*_.c+_.tx)*w,y+=(A*_.b+b*_.d+_.ty)*w}n[m]=p,n[m+1]=y}else{const m=a;for(let g=i,p=d*3,y=d<<1;g<r;g+=o){let x=0,_=0,A=c[u++];for(A+=u;u<A;u++,p+=3,y+=2){const b=f[c[u]].matrix,w=h[p]+m[y],v=h[p+1]+m[y+1],R=h[p+2];x+=(w*b.a+v*b.c+b.tx)*R,_+=(w*b.b+v*b.d+b.ty)*R}n[g]=x,n[g+1]=_}}}copyTo(t){this.bones!=null?(t.bones=new Array(this.bones.length),J.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices!=null?(t.vertices=J.newFloatArray(this.vertices.length),J.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}};let di=zA;di.nextID=0;let xB=class WA extends di{constructor(t){super(t),this.type=Bt.BoundingBox,this.color=new lt(1,1,1,1)}copy(){const t=new WA(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},_B=class qA extends di{constructor(t){super(t),this.type=Bt.Clipping,this.color=new lt(.2275,.2275,.8078,1)}copy(){const t=new qA(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},KA=class Rd extends di{constructor(t){super(t),this.type=Bt.Mesh,this.color=new lt(1,1,1,1),this.tempColor=new lt(0,0,0,0)}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh!=null)return this.newLinkedMesh();const t=new Rd(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),J.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),J.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges!=null&&(t.edges=new Array(this.edges.length),J.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){const t=new Rd(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh!=null?this.parentMesh:this),t}},AB=class ZA extends di{constructor(t){super(t),this.type=Bt.Path,this.closed=!1,this.constantSpeed=!1,this.color=new lt(1,1,1,1)}copy(){const t=new ZA(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),J.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},bB=class QA extends di{constructor(t){super(t),this.type=Bt.Point,this.color=new lt(.38,.94,0,1)}computeWorldPosition(t,e){const r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,r=xt.cosDeg(this.rotation),n=xt.sinDeg(this.rotation),i=r*e.a+n*e.c,o=r*e.b+n*e.d;return Math.atan2(o,i)*xt.radDeg}copy(){const t=new QA(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},vB=class{constructor(t,e){if(this.deform=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new lt,this.darkColor=t.darkColor==null?null:new lt,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}};const $e=class extends jA{constructor(t){super(t),this.type=Bt.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new lt(1,1,1,1),this.offset=J.newFloatArray(8),this.uvs=J.newFloatArray(8),this.tempColor=new lt(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,i=r+this.region.width*t,o=n+this.region.height*e,l=this.rotation*Math.PI/180,a=Math.cos(l),h=Math.sin(l),c=r*a+this.x,u=r*h,d=n*a+this.y,f=n*h,m=i*a+this.x,g=i*h,p=o*a+this.y,y=o*h,x=this.offset;x[$e.OX1]=c-f,x[$e.OY1]=d+u,x[$e.OX2]=c-y,x[$e.OY2]=p+u,x[$e.OX3]=m-y,x[$e.OY3]=p+g,x[$e.OX4]=m-f,x[$e.OY4]=d+g}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,r,n){const i=this.offset,o=t instanceof vB?t.bone.matrix:t.matrix,l=o.tx,a=o.ty,h=o.a,c=o.c,u=o.b,d=o.d;let f=0,m=0;f=i[$e.OX1],m=i[$e.OY1],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a,r+=n,f=i[$e.OX2],m=i[$e.OY2],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a,r+=n,f=i[$e.OX3],m=i[$e.OY3],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a,r+=n,f=i[$e.OX4],m=i[$e.OY4],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a}copy(){const t=new $e(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,J.arrayCopy(this.uvs,0,t.uvs,0,8),J.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}};let It=$e;It.OX1=0;It.OY1=1;It.OX2=2;It.OY2=3;It.OX3=4;It.OY3=5;It.OX4=6;It.OY4=7;It.X1=0;It.Y1=1;It.C1R=2;It.C1G=3;It.C1B=4;It.C1A=5;It.U1=6;It.V1=7;It.X2=8;It.Y2=9;It.C2R=10;It.C2G=11;It.C2B=12;It.C2A=13;It.U2=14;It.V2=15;It.X3=16;It.Y3=17;It.C3R=18;It.C3G=19;It.C3B=20;It.C3A=21;It.U3=22;It.V3=23;It.X4=24;It.Y4=25;It.C4R=26;It.C4G=27;It.C4B=28;It.C4A=29;It.U4=30;It.V4=31;new BA(2);let je=class{constructor(t,e,r){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(let n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=r}hasTimeline(t){return this.timelineIds[t]==!0}apply(t,e,r,n,i,o,l,a){if(t==null)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));const h=this.timelines;for(let c=0,u=h.length;c<u;c++)h[c].apply(t,e,r,i,o,l,a)}static binarySearch(t,e,r=1){let n=0,i=t.length/r-2;if(i==0)return r;let o=i>>>1;for(;;){if(t[(o+1)*r]<=e?n=o+1:i=o,n==i)return(n+1)*r;o=n+i>>>1}}static linearSearch(t,e,r){for(let n=0,i=t.length-r;n<=i;n+=r)if(t[n]>e)return n;return-1}};const be=class{constructor(t){if(t<=0)throw new Error(`frameCount must be > 0: ${t}`);this.curves=J.newFloatArray((t-1)*be.BEZIER_SIZE)}getFrameCount(){return this.curves.length/be.BEZIER_SIZE+1}setLinear(t){this.curves[t*be.BEZIER_SIZE]=be.LINEAR}setStepped(t){this.curves[t*be.BEZIER_SIZE]=be.STEPPED}getCurveType(t){const e=t*be.BEZIER_SIZE;if(e==this.curves.length)return be.LINEAR;const r=this.curves[e];return r==be.LINEAR?be.LINEAR:r==be.STEPPED?be.STEPPED:be.BEZIER}setCurve(t,e,r,n,i){const o=(-e*2+n)*.03,l=(-r*2+i)*.03,a=((e-n)*3+1)*.006,h=((r-i)*3+1)*.006;let c=o*2+a,u=l*2+h,d=e*.3+o+a*.16666667,f=r*.3+l+h*.16666667,m=t*be.BEZIER_SIZE;const g=this.curves;g[m++]=be.BEZIER;let p=d,y=f;for(let x=m+be.BEZIER_SIZE-1;m<x;m+=2)g[m]=p,g[m+1]=y,d+=c,f+=u,c+=a,u+=h,p+=d,y+=f}getCurvePercent(t,e){e=xt.clamp(e,0,1);const r=this.curves;let n=t*be.BEZIER_SIZE;const i=r[n];if(i==be.LINEAR)return e;if(i==be.STEPPED)return 0;n++;let o=0;for(let a=n,h=n+be.BEZIER_SIZE-1;n<h;n+=2)if(o=r[n],o>=e){let c,u;return n==a?(c=0,u=0):(c=r[n-2],u=r[n-1]),u+(r[n+1]-u)*(e-c)/(o-c)}const l=r[n-1];return l+(1-l)*(e-o)/(1-o)}};let Ms=be;Ms.LINEAR=0;Ms.STEPPED=1;Ms.BEZIER=2;Ms.BEZIER_SIZE=10*2-1;const rn=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+rn.ROTATION]=r}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.rotation=h.data.rotation;return;case M.first:const g=h.data.rotation-h.rotation;h.rotation+=(g-(16384-(16384.499999999996-g/360|0))*360)*i}return}if(r>=a[a.length-rn.ENTRIES]){let g=a[a.length+rn.PREV_ROTATION];switch(o){case M.setup:h.rotation=h.data.rotation+g*i;break;case M.first:case M.replace:g+=h.data.rotation-h.rotation,g-=(16384-(16384.499999999996-g/360|0))*360;case M.add:h.rotation+=g*i}return}const c=je.binarySearch(a,r,rn.ENTRIES),u=a[c+rn.PREV_ROTATION],d=a[c],f=this.getCurvePercent((c>>1)-1,1-(r-d)/(a[c+rn.PREV_TIME]-d));let m=a[c+rn.ROTATION]-u;switch(m=u+(m-(16384-(16384.499999999996-m/360|0))*360)*f,o){case M.setup:h.rotation=h.data.rotation+(m-(16384-(16384.499999999996-m/360|0))*360)*i;break;case M.first:case M.replace:m+=h.data.rotation-h.rotation;case M.add:h.rotation+=(m-(16384-(16384.499999999996-m/360|0))*360)*i}}};let En=rn;En.ENTRIES=2;En.PREV_TIME=-2;En.PREV_ROTATION=-1;En.ROTATION=1;const ls=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*ls.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(t,e,r,n){t*=ls.ENTRIES,this.frames[t]=e,this.frames[t+ls.X]=r,this.frames[t+ls.Y]=n}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.x=h.data.x,h.y=h.data.y;return;case M.first:h.x+=(h.data.x-h.x)*i,h.y+=(h.data.y-h.y)*i}return}let c=0,u=0;if(r>=a[a.length-ls.ENTRIES])c=a[a.length+ls.PREV_X],u=a[a.length+ls.PREV_Y];else{const d=je.binarySearch(a,r,ls.ENTRIES);c=a[d+ls.PREV_X],u=a[d+ls.PREV_Y];const f=a[d],m=this.getCurvePercent(d/ls.ENTRIES-1,1-(r-f)/(a[d+ls.PREV_TIME]-f));c+=(a[d+ls.X]-c)*m,u+=(a[d+ls.Y]-u)*m}switch(o){case M.setup:h.x=h.data.x+c*i,h.y=h.data.y+u*i;break;case M.first:case M.replace:h.x+=(h.data.x+c-h.x)*i,h.y+=(h.data.y+u-h.y)*i;break;case M.add:h.x+=c*i,h.y+=u*i}}};let Ys=ls;Ys.ENTRIES=3;Ys.PREV_TIME=-3;Ys.PREV_X=-2;Ys.PREV_Y=-1;Ys.X=1;Ys.Y=2;let JA=class Js extends Ys{constructor(t){super(t)}getPropertyId(){return(2<<24)+this.boneIndex}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.scaleX=h.data.scaleX,h.scaleY=h.data.scaleY;return;case M.first:h.scaleX+=(h.data.scaleX-h.scaleX)*i,h.scaleY+=(h.data.scaleY-h.scaleY)*i}return}let c=0,u=0;if(r>=a[a.length-Js.ENTRIES])c=a[a.length+Js.PREV_X]*h.data.scaleX,u=a[a.length+Js.PREV_Y]*h.data.scaleY;else{const d=je.binarySearch(a,r,Js.ENTRIES);c=a[d+Js.PREV_X],u=a[d+Js.PREV_Y];const f=a[d],m=this.getCurvePercent(d/Js.ENTRIES-1,1-(r-f)/(a[d+Js.PREV_TIME]-f));c=(c+(a[d+Js.X]-c)*m)*h.data.scaleX,u=(u+(a[d+Js.Y]-u)*m)*h.data.scaleY}if(i==1)o==M.add?(h.scaleX+=c-h.data.scaleX,h.scaleY+=u-h.data.scaleY):(h.scaleX=c,h.scaleY=u);else{let d=0,f=0;if(l==_e.mixOut)switch(o){case M.setup:d=h.data.scaleX,f=h.data.scaleY,h.scaleX=d+(Math.abs(c)*xt.signum(d)-d)*i,h.scaleY=f+(Math.abs(u)*xt.signum(f)-f)*i;break;case M.first:case M.replace:d=h.scaleX,f=h.scaleY,h.scaleX=d+(Math.abs(c)*xt.signum(d)-d)*i,h.scaleY=f+(Math.abs(u)*xt.signum(f)-f)*i;break;case M.add:d=h.scaleX,f=h.scaleY,h.scaleX=d+(Math.abs(c)*xt.signum(d)-h.data.scaleX)*i,h.scaleY=f+(Math.abs(u)*xt.signum(f)-h.data.scaleY)*i}else switch(o){case M.setup:d=Math.abs(h.data.scaleX)*xt.signum(c),f=Math.abs(h.data.scaleY)*xt.signum(u),h.scaleX=d+(c-d)*i,h.scaleY=f+(u-f)*i;break;case M.first:case M.replace:d=Math.abs(h.scaleX)*xt.signum(c),f=Math.abs(h.scaleY)*xt.signum(u),h.scaleX=d+(c-d)*i,h.scaleY=f+(u-f)*i;break;case M.add:d=xt.signum(c),f=xt.signum(u),h.scaleX=Math.abs(h.scaleX)*d+(c-Math.abs(h.data.scaleX)*d)*i,h.scaleY=Math.abs(h.scaleY)*f+(u-Math.abs(h.data.scaleY)*f)*i}}}},tb=class tr extends Ys{constructor(t){super(t)}getPropertyId(){return(3<<24)+this.boneIndex}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.bones[this.boneIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.shearX=h.data.shearX,h.shearY=h.data.shearY;return;case M.first:h.shearX+=(h.data.shearX-h.shearX)*i,h.shearY+=(h.data.shearY-h.shearY)*i}return}let c=0,u=0;if(r>=a[a.length-tr.ENTRIES])c=a[a.length+tr.PREV_X],u=a[a.length+tr.PREV_Y];else{const d=je.binarySearch(a,r,tr.ENTRIES);c=a[d+tr.PREV_X],u=a[d+tr.PREV_Y];const f=a[d],m=this.getCurvePercent(d/tr.ENTRIES-1,1-(r-f)/(a[d+tr.PREV_TIME]-f));c=c+(a[d+tr.X]-c)*m,u=u+(a[d+tr.Y]-u)*m}switch(o){case M.setup:h.shearX=h.data.shearX+c*i,h.shearY=h.data.shearY+u*i;break;case M.first:case M.replace:h.shearX+=(h.data.shearX+c-h.shearX)*i,h.shearY+=(h.data.shearY+u-h.shearY)*i;break;case M.add:h.shearX+=c*i,h.shearY+=u*i}}};const he=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*he.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(t,e,r,n,i,o){t*=he.ENTRIES,this.frames[t]=e,this.frames[t+he.R]=r,this.frames[t+he.G]=n,this.frames[t+he.B]=i,this.frames[t+he.A]=o}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.color.setFromColor(a.data.color);return;case M.first:const m=a.color,g=a.data.color;m.add((g.r-m.r)*i,(g.g-m.g)*i,(g.b-m.b)*i,(g.a-m.a)*i)}return}let c=0,u=0,d=0,f=0;if(r>=h[h.length-he.ENTRIES]){const m=h.length;c=h[m+he.PREV_R],u=h[m+he.PREV_G],d=h[m+he.PREV_B],f=h[m+he.PREV_A]}else{const m=je.binarySearch(h,r,he.ENTRIES);c=h[m+he.PREV_R],u=h[m+he.PREV_G],d=h[m+he.PREV_B],f=h[m+he.PREV_A];const g=h[m],p=this.getCurvePercent(m/he.ENTRIES-1,1-(r-g)/(h[m+he.PREV_TIME]-g));c+=(h[m+he.R]-c)*p,u+=(h[m+he.G]-u)*p,d+=(h[m+he.B]-d)*p,f+=(h[m+he.A]-f)*p}if(i==1)a.color.set(c,u,d,f);else{const m=a.color;o==M.setup&&m.setFromColor(a.data.color),m.add((c-m.r)*i,(u-m.g)*i,(d-m.b)*i,(f-m.a)*i)}}};let As=he;As.ENTRIES=5;As.PREV_TIME=-5;As.PREV_R=-4;As.PREV_G=-3;As.PREV_B=-2;As.PREV_A=-1;As.R=1;As.G=2;As.B=3;As.A=4;const Ot=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*Ot.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(t,e,r,n,i,o,l,a,h){t*=Ot.ENTRIES,this.frames[t]=e,this.frames[t+Ot.R]=r,this.frames[t+Ot.G]=n,this.frames[t+Ot.B]=i,this.frames[t+Ot.A]=o,this.frames[t+Ot.R2]=l,this.frames[t+Ot.G2]=a,this.frames[t+Ot.B2]=h}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.color.setFromColor(a.data.color),a.darkColor.setFromColor(a.data.darkColor);return;case M.first:const y=a.color,x=a.darkColor,_=a.data.color,A=a.data.darkColor;y.add((_.r-y.r)*i,(_.g-y.g)*i,(_.b-y.b)*i,(_.a-y.a)*i),x.add((A.r-x.r)*i,(A.g-x.g)*i,(A.b-x.b)*i,0)}return}let c=0,u=0,d=0,f=0,m=0,g=0,p=0;if(r>=h[h.length-Ot.ENTRIES]){const y=h.length;c=h[y+Ot.PREV_R],u=h[y+Ot.PREV_G],d=h[y+Ot.PREV_B],f=h[y+Ot.PREV_A],m=h[y+Ot.PREV_R2],g=h[y+Ot.PREV_G2],p=h[y+Ot.PREV_B2]}else{const y=je.binarySearch(h,r,Ot.ENTRIES);c=h[y+Ot.PREV_R],u=h[y+Ot.PREV_G],d=h[y+Ot.PREV_B],f=h[y+Ot.PREV_A],m=h[y+Ot.PREV_R2],g=h[y+Ot.PREV_G2],p=h[y+Ot.PREV_B2];const x=h[y],_=this.getCurvePercent(y/Ot.ENTRIES-1,1-(r-x)/(h[y+Ot.PREV_TIME]-x));c+=(h[y+Ot.R]-c)*_,u+=(h[y+Ot.G]-u)*_,d+=(h[y+Ot.B]-d)*_,f+=(h[y+Ot.A]-f)*_,m+=(h[y+Ot.R2]-m)*_,g+=(h[y+Ot.G2]-g)*_,p+=(h[y+Ot.B2]-p)*_}if(i==1)a.color.set(c,u,d,f),a.darkColor.set(m,g,p,1);else{const y=a.color,x=a.darkColor;o==M.setup&&(y.setFromColor(a.data.color),x.setFromColor(a.data.darkColor)),y.add((c-y.r)*i,(u-y.g)*i,(d-y.b)*i,(f-y.a)*i),x.add((m-x.r)*i,(g-x.g)*i,(p-x.b)*i,0)}}};let Fe=Ot;Fe.ENTRIES=8;Fe.PREV_TIME=-8;Fe.PREV_R=-7;Fe.PREV_G=-6;Fe.PREV_B=-5;Fe.PREV_A=-4;Fe.PREV_R2=-3;Fe.PREV_G2=-2;Fe.PREV_B2=-1;Fe.R=1;Fe.G=2;Fe.B=3;Fe.A=4;Fe.R2=5;Fe.G2=6;Fe.B2=7;let eb=class{constructor(t){this.frames=J.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;if(l==_e.mixOut){o==M.setup&&this.setAttachment(t,a,a.data.attachmentName);return}const h=this.frames;if(r<h[0]){(o==M.setup||o==M.first)&&this.setAttachment(t,a,a.data.attachmentName);return}let c=0;r>=h[h.length-1]?c=h.length-1:c=je.binarySearch(h,r,1)-1;const u=this.attachmentNames[c];t.slots[this.slotIndex].setAttachment(u==null?null:t.getAttachment(this.slotIndex,u))}setAttachment(t,e,r){e.setAttachment(r==null?null:t.getAttachment(this.slotIndex,r))}},Fy=null,sb=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t),this.frameVertices=new Array(t),Fy==null&&(Fy=J.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(t,e,r){this.frames[t]=e,this.frameVertices[t]=r}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.getAttachment();if(!(h instanceof di)||h.deformAttachment!=this.attachment)return;const c=a.deform;c.length==0&&(o=M.setup);const u=this.frameVertices,d=u[0].length,f=this.frames;if(r<f[0]){const A=h;switch(o){case M.setup:c.length=0;return;case M.first:if(i==1){c.length=0;break}const b=J.setArraySize(c,d);if(A.bones==null){const w=A.vertices;for(let v=0;v<d;v++)b[v]+=(w[v]-b[v])*i}else{i=1-i;for(let w=0;w<d;w++)b[w]*=i}}return}const m=J.setArraySize(c,d);if(r>=f[f.length-1]){const A=u[f.length-1];if(i==1)if(o==M.add){const b=h;if(b.bones==null){const w=b.vertices;for(let v=0;v<d;v++)m[v]+=A[v]-w[v]}else for(let w=0;w<d;w++)m[w]+=A[w]}else J.arrayCopy(A,0,m,0,d);else switch(o){case M.setup:{const w=h;if(w.bones==null){const v=w.vertices;for(let R=0;R<d;R++){const P=v[R];m[R]=P+(A[R]-P)*i}}else for(let v=0;v<d;v++)m[v]=A[v]*i;break}case M.first:case M.replace:for(let w=0;w<d;w++)m[w]+=(A[w]-m[w])*i;break;case M.add:const b=h;if(b.bones==null){const w=b.vertices;for(let v=0;v<d;v++)m[v]+=(A[v]-w[v])*i}else for(let w=0;w<d;w++)m[w]+=A[w]*i}return}const g=je.binarySearch(f,r),p=u[g-1],y=u[g],x=f[g],_=this.getCurvePercent(g-1,1-(r-x)/(f[g-1]-x));if(i==1)if(o==M.add){const A=h;if(A.bones==null){const b=A.vertices;for(let w=0;w<d;w++){const v=p[w];m[w]+=v+(y[w]-v)*_-b[w]}}else for(let b=0;b<d;b++){const w=p[b];m[b]+=w+(y[b]-w)*_}}else for(let A=0;A<d;A++){const b=p[A];m[A]=b+(y[A]-b)*_}else switch(o){case M.setup:{const b=h;if(b.bones==null){const w=b.vertices;for(let v=0;v<d;v++){const R=p[v],P=w[v];m[v]=P+(R+(y[v]-R)*_-P)*i}}else for(let w=0;w<d;w++){const v=p[w];m[w]=(v+(y[w]-v)*_)*i}break}case M.first:case M.replace:for(let b=0;b<d;b++){const w=p[b];m[b]+=(w+(y[b]-w)*_-m[b])*i}break;case M.add:const A=h;if(A.bones==null){const b=A.vertices;for(let w=0;w<d;w++){const v=p[w];m[w]+=(v+(y[w]-v)*_-b[w])*i}}else for(let b=0;b<d;b++){const w=p[b];m[b]+=(w+(y[b]-w)*_)*i}}}},rb=class{constructor(t){this.frames=J.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,r,n,i,o,l){if(n==null)return;const a=this.frames,h=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,i,o,l),e=-1;else if(e>=a[h-1])return;if(r<a[0])return;let c=0;if(e<a[0])c=0;else{c=je.binarySearch(a,e);const u=a[c];for(;c>0&&a[c-1]==u;)c--}for(;c<h&&r>=a[c];c++)n.push(this.events[c])}},nb=class{constructor(t){this.frames=J.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.drawOrders[t]=r}apply(t,e,r,n,i,o,l){const a=t.drawOrder,h=t.slots;if(l==_e.mixOut&&o==M.setup){J.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}const c=this.frames;if(r<c[0]){(o==M.setup||o==M.first)&&J.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let u=0;r>=c[c.length-1]?u=c.length-1:u=je.binarySearch(c,r)-1;const d=this.drawOrders[u];if(d==null)J.arrayCopy(h,0,a,0,h.length);else for(let f=0,m=d.length;f<m;f++)a[f]=h[d[f]]}};const Ut=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*Ut.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(t,e,r,n,i,o,l){t*=Ut.ENTRIES,this.frames[t]=e,this.frames[t+Ut.MIX]=r,this.frames[t+Ut.SOFTNESS]=n,this.frames[t+Ut.BEND_DIRECTION]=i,this.frames[t+Ut.COMPRESS]=o?1:0,this.frames[t+Ut.STRETCH]=l?1:0}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.ikConstraints[this.ikConstraintIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.mix=h.data.mix,h.softness=h.data.softness,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch;return;case M.first:h.mix+=(h.data.mix-h.mix)*i,h.softness+=(h.data.softness-h.softness)*i,h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch}return}if(r>=a[a.length-Ut.ENTRIES]){o==M.setup?(h.mix=h.data.mix+(a[a.length+Ut.PREV_MIX]-h.data.mix)*i,h.softness=h.data.softness+(a[a.length+Ut.PREV_SOFTNESS]-h.data.softness)*i,l==_e.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=a[a.length+Ut.PREV_BEND_DIRECTION],h.compress=a[a.length+Ut.PREV_COMPRESS]!=0,h.stretch=a[a.length+Ut.PREV_STRETCH]!=0)):(h.mix+=(a[a.length+Ut.PREV_MIX]-h.mix)*i,h.softness+=(a[a.length+Ut.PREV_SOFTNESS]-h.softness)*i,l==_e.mixIn&&(h.bendDirection=a[a.length+Ut.PREV_BEND_DIRECTION],h.compress=a[a.length+Ut.PREV_COMPRESS]!=0,h.stretch=a[a.length+Ut.PREV_STRETCH]!=0));return}const c=je.binarySearch(a,r,Ut.ENTRIES),u=a[c+Ut.PREV_MIX],d=a[c+Ut.PREV_SOFTNESS],f=a[c],m=this.getCurvePercent(c/Ut.ENTRIES-1,1-(r-f)/(a[c+Ut.PREV_TIME]-f));o==M.setup?(h.mix=h.data.mix+(u+(a[c+Ut.MIX]-u)*m-h.data.mix)*i,h.softness=h.data.softness+(d+(a[c+Ut.SOFTNESS]-d)*m-h.data.softness)*i,l==_e.mixOut?(h.bendDirection=h.data.bendDirection,h.compress=h.data.compress,h.stretch=h.data.stretch):(h.bendDirection=a[c+Ut.PREV_BEND_DIRECTION],h.compress=a[c+Ut.PREV_COMPRESS]!=0,h.stretch=a[c+Ut.PREV_STRETCH]!=0)):(h.mix+=(u+(a[c+Ut.MIX]-u)*m-h.mix)*i,h.softness+=(d+(a[c+Ut.SOFTNESS]-d)*m-h.softness)*i,l==_e.mixIn&&(h.bendDirection=a[c+Ut.PREV_BEND_DIRECTION],h.compress=a[c+Ut.PREV_COMPRESS]!=0,h.stretch=a[c+Ut.PREV_STRETCH]!=0))}};let as=Ut;as.ENTRIES=6;as.PREV_TIME=-6;as.PREV_MIX=-5;as.PREV_SOFTNESS=-4;as.PREV_BEND_DIRECTION=-3;as.PREV_COMPRESS=-2;as.PREV_STRETCH=-1;as.MIX=1;as.SOFTNESS=2;as.BEND_DIRECTION=3;as.COMPRESS=4;as.STRETCH=5;const ce=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*ce.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(t,e,r,n,i,o){t*=ce.ENTRIES,this.frames[t]=e,this.frames[t+ce.ROTATE]=r,this.frames[t+ce.TRANSLATE]=n,this.frames[t+ce.SCALE]=i,this.frames[t+ce.SHEAR]=o}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(!h.active)return;if(r<a[0]){const m=h.data;switch(o){case M.setup:h.rotateMix=m.rotateMix,h.translateMix=m.translateMix,h.scaleMix=m.scaleMix,h.shearMix=m.shearMix;return;case M.first:h.rotateMix+=(m.rotateMix-h.rotateMix)*i,h.translateMix+=(m.translateMix-h.translateMix)*i,h.scaleMix+=(m.scaleMix-h.scaleMix)*i,h.shearMix+=(m.shearMix-h.shearMix)*i}return}let c=0,u=0,d=0,f=0;if(r>=a[a.length-ce.ENTRIES]){const m=a.length;c=a[m+ce.PREV_ROTATE],u=a[m+ce.PREV_TRANSLATE],d=a[m+ce.PREV_SCALE],f=a[m+ce.PREV_SHEAR]}else{const m=je.binarySearch(a,r,ce.ENTRIES);c=a[m+ce.PREV_ROTATE],u=a[m+ce.PREV_TRANSLATE],d=a[m+ce.PREV_SCALE],f=a[m+ce.PREV_SHEAR];const g=a[m],p=this.getCurvePercent(m/ce.ENTRIES-1,1-(r-g)/(a[m+ce.PREV_TIME]-g));c+=(a[m+ce.ROTATE]-c)*p,u+=(a[m+ce.TRANSLATE]-u)*p,d+=(a[m+ce.SCALE]-d)*p,f+=(a[m+ce.SHEAR]-f)*p}if(o==M.setup){const m=h.data;h.rotateMix=m.rotateMix+(c-m.rotateMix)*i,h.translateMix=m.translateMix+(u-m.translateMix)*i,h.scaleMix=m.scaleMix+(d-m.scaleMix)*i,h.shearMix=m.shearMix+(f-m.shearMix)*i}else h.rotateMix+=(c-h.rotateMix)*i,h.translateMix+=(u-h.translateMix)*i,h.scaleMix+=(d-h.scaleMix)*i,h.shearMix+=(f-h.shearMix)*i}};let bs=ce;bs.ENTRIES=5;bs.PREV_TIME=-5;bs.PREV_ROTATE=-4;bs.PREV_TRANSLATE=-3;bs.PREV_SCALE=-2;bs.PREV_SHEAR=-1;bs.ROTATE=1;bs.TRANSLATE=2;bs.SCALE=3;bs.SHEAR=4;const er=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*er.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(t,e,r){t*=er.ENTRIES,this.frames[t]=e,this.frames[t+er.VALUE]=r}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.position=h.data.position;return;case M.first:h.position+=(h.data.position-h.position)*i}return}let c=0;if(r>=a[a.length-er.ENTRIES])c=a[a.length+er.PREV_VALUE];else{const u=je.binarySearch(a,r,er.ENTRIES);c=a[u+er.PREV_VALUE];const d=a[u],f=this.getCurvePercent(u/er.ENTRIES-1,1-(r-d)/(a[u+er.PREV_TIME]-d));c+=(a[u+er.VALUE]-c)*f}o==M.setup?h.position=h.data.position+(c-h.data.position)*i:h.position+=(c-h.position)*i}};let qr=er;qr.ENTRIES=2;qr.PREV_TIME=-2;qr.PREV_VALUE=-1;qr.VALUE=1;let ib=class nn extends qr{constructor(t){super(t)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.spacing=h.data.spacing;return;case M.first:h.spacing+=(h.data.spacing-h.spacing)*i}return}let c=0;if(r>=a[a.length-nn.ENTRIES])c=a[a.length+nn.PREV_VALUE];else{const u=je.binarySearch(a,r,nn.ENTRIES);c=a[u+nn.PREV_VALUE];const d=a[u],f=this.getCurvePercent(u/nn.ENTRIES-1,1-(r-d)/(a[u+nn.PREV_TIME]-d));c+=(a[u+nn.VALUE]-c)*f}o==M.setup?h.spacing=h.data.spacing+(c-h.data.spacing)*i:h.spacing+=(c-h.spacing)*i}};const hs=class extends Ms{constructor(t){super(t),this.frames=J.newFloatArray(t*hs.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(t,e,r,n){t*=hs.ENTRIES,this.frames[t]=e,this.frames[t+hs.ROTATE]=r,this.frames[t+hs.TRANSLATE]=n}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(!h.active)return;if(r<a[0]){switch(o){case M.setup:h.rotateMix=h.data.rotateMix,h.translateMix=h.data.translateMix;return;case M.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*i,h.translateMix+=(h.data.translateMix-h.translateMix)*i}return}let c=0,u=0;if(r>=a[a.length-hs.ENTRIES])c=a[a.length+hs.PREV_ROTATE],u=a[a.length+hs.PREV_TRANSLATE];else{const d=je.binarySearch(a,r,hs.ENTRIES);c=a[d+hs.PREV_ROTATE],u=a[d+hs.PREV_TRANSLATE];const f=a[d],m=this.getCurvePercent(d/hs.ENTRIES-1,1-(r-f)/(a[d+hs.PREV_TIME]-f));c+=(a[d+hs.ROTATE]-c)*m,u+=(a[d+hs.TRANSLATE]-u)*m}o==M.setup?(h.rotateMix=h.data.rotateMix+(c-h.data.rotateMix)*i,h.translateMix=h.data.translateMix+(u-h.data.translateMix)*i):(h.rotateMix+=(c-h.rotateMix)*i,h.translateMix+=(u-h.translateMix)*i)}};let Ir=hs;Ir.ENTRIES=3;Ir.PREV_TIME=-3;Ir.PREV_ROTATE=-2;Ir.PREV_TRANSLATE=-1;Ir.ROTATE=1;Ir.TRANSLATE=2;new je("<empty>",[],0);let ab=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (region attachment: ${e})`);const i=new It(e);return i.region=n,i}newMeshAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (mesh attachment: ${e})`);const i=new KA(e);return i.region=n,i}newBoundingBoxAttachment(t,e){return new xB(e)}newPathAttachment(t,e){return new AB(e)}newPointAttachment(t,e){return new bB(e)}newClippingAttachment(t,e){return new _B(e)}},ob=class{constructor(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Re.Normal,this.skinRequired=!1,this.color=new lt,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}},Sf=class{constructor(t,e,r){this.name=t,this.order=e,this.skinRequired=r}},lb=class{constructor(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}},hb=class{constructor(t){this.name=t}},cb=class extends Sf{constructor(t){super(t,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},ub=class extends Sf{constructor(t){super(t,0,!1),this.bones=new Array}};var ds=(s=>(s[s.Length=0]="Length",s[s.Fixed=1]="Fixed",s[s.Percent=2]="Percent",s))(ds||{});let db=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSkin(t){if(t==null)throw new Error("skinName cannot be null.");const e=this.skins;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findEvent(t){if(t==null)throw new Error("eventDataName cannot be null.");const e=this.events;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findAnimation(t){if(t==null)throw new Error("animationName cannot be null.");const e=this.animations;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}},fb=class{constructor(t,e,r){if(this.color=new lt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}},mb=class extends Sf{constructor(t){super(t,0,!1),this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},By=class{constructor(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}},Id=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,r){if(r==null)throw new Error("attachment cannot be null.");const n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r}addSkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){i=!0;break}i||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){i=!0;break}i||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){i=!0;break}i||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){i=!0;break}i||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];n.attachment!=null&&(n.attachment instanceof KA?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(t,e){const r=this.attachments[t];return r?r[e]:null}removeAttachment(t,e){const r=this.attachments[t];r&&(r[e]=null)}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const r=this.attachments[e];if(r)for(const n in r){const i=r[n];i&&t.push(new By(e,n,i))}}return t}getAttachmentsForSlot(t,e){const r=this.attachments[t];if(r)for(const n in r){const i=r[n];i&&e.push(new By(t,n,i))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let r=0;for(let n=0;n<t.slots.length;n++){const i=t.slots[n],o=i.getAttachment();if(o&&r<e.attachments.length){const l=e.attachments[r];for(const a in l){const h=l[a];if(o==h){const c=this.getAttachment(r,a);c!=null&&i.setAttachment(c);break}}}r++}}};const ge=class{constructor(s){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=s}readSkeletonData(s){const t=this.scale,e=new db;e.name="";const r=new Rl(s);e.hash=r.readString(),e.version=r.readString(),e.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),e.x=r.readFloat(),e.y=r.readFloat(),e.width=r.readFloat(),e.height=r.readFloat();const n=r.readBoolean();n&&(e.fps=r.readFloat(),e.imagesPath=r.readString(),e.audioPath=r.readString());let i=0;i=r.readInt(!0);for(let l=0;l<i;l++)r.strings.push(r.readString());i=r.readInt(!0);for(let l=0;l<i;l++){const a=r.readString(),h=l==0?null:e.bones[r.readInt(!0)],c=new ob(l,a,h);c.rotation=r.readFloat(),c.x=r.readFloat()*t,c.y=r.readFloat()*t,c.scaleX=r.readFloat(),c.scaleY=r.readFloat(),c.shearX=r.readFloat(),c.shearY=r.readFloat(),c.length=r.readFloat()*t,c.transformMode=ge.TransformModeValues[r.readInt(!0)],c.skinRequired=r.readBoolean(),n&&lt.rgba8888ToColor(c.color,r.readInt32()),e.bones.push(c)}i=r.readInt(!0);for(let l=0;l<i;l++){const a=r.readString(),h=e.bones[r.readInt(!0)],c=new fb(l,a,h);lt.rgba8888ToColor(c.color,r.readInt32());const u=r.readInt32();u!=-1&&lt.rgb888ToColor(c.darkColor=new lt,u),c.attachmentName=r.readStringRef(),c.blendMode=ge.BlendModeValues[r.readInt(!0)],e.slots.push(c)}i=r.readInt(!0);for(let l=0,a;l<i;l++){const h=new cb(r.readString());h.order=r.readInt(!0),h.skinRequired=r.readBoolean(),a=r.readInt(!0);for(let c=0;c<a;c++)h.bones.push(e.bones[r.readInt(!0)]);h.target=e.bones[r.readInt(!0)],h.mix=r.readFloat(),h.softness=r.readFloat()*t,h.bendDirection=r.readByte(),h.compress=r.readBoolean(),h.stretch=r.readBoolean(),h.uniform=r.readBoolean(),e.ikConstraints.push(h)}i=r.readInt(!0);for(let l=0,a;l<i;l++){const h=new mb(r.readString());h.order=r.readInt(!0),h.skinRequired=r.readBoolean(),a=r.readInt(!0);for(let c=0;c<a;c++)h.bones.push(e.bones[r.readInt(!0)]);h.target=e.bones[r.readInt(!0)],h.local=r.readBoolean(),h.relative=r.readBoolean(),h.offsetRotation=r.readFloat(),h.offsetX=r.readFloat()*t,h.offsetY=r.readFloat()*t,h.offsetScaleX=r.readFloat(),h.offsetScaleY=r.readFloat(),h.offsetShearY=r.readFloat(),h.rotateMix=r.readFloat(),h.translateMix=r.readFloat(),h.scaleMix=r.readFloat(),h.shearMix=r.readFloat(),e.transformConstraints.push(h)}i=r.readInt(!0);for(let l=0,a;l<i;l++){const h=new ub(r.readString());h.order=r.readInt(!0),h.skinRequired=r.readBoolean(),a=r.readInt(!0);for(let c=0;c<a;c++)h.bones.push(e.bones[r.readInt(!0)]);h.target=e.slots[r.readInt(!0)],h.positionMode=ge.PositionModeValues[r.readInt(!0)],h.spacingMode=ge.SpacingModeValues[r.readInt(!0)],h.rotateMode=ge.RotateModeValues[r.readInt(!0)],h.offsetRotation=r.readFloat(),h.position=r.readFloat(),h.positionMode==Ve.Fixed&&(h.position*=t),h.spacing=r.readFloat(),(h.spacingMode==ds.Length||h.spacingMode==ds.Fixed)&&(h.spacing*=t),h.rotateMix=r.readFloat(),h.translateMix=r.readFloat(),e.pathConstraints.push(h)}const o=this.readSkin(r,e,!0,n);o!=null&&(e.defaultSkin=o,e.skins.push(o));{let l=e.skins.length;for(J.setArraySize(e.skins,i=l+r.readInt(!0));l<i;l++)e.skins[l]=this.readSkin(r,e,!1,n)}i=this.linkedMeshes.length;for(let l=0;l<i;l++){const a=this.linkedMeshes[l],h=a.skin==null?e.defaultSkin:e.findSkin(a.skin);if(h==null)throw new Error(`Skin not found: ${a.skin}`);const c=h.getAttachment(a.slotIndex,a.parent);if(c==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.deformAttachment=a.inheritDeform?c:a.mesh,a.mesh.setParentMesh(c)}this.linkedMeshes.length=0,i=r.readInt(!0);for(let l=0;l<i;l++){const a=new hb(r.readStringRef());a.intValue=r.readInt(!1),a.floatValue=r.readFloat(),a.stringValue=r.readString(),a.audioPath=r.readString(),a.audioPath!=null&&(a.volume=r.readFloat(),a.balance=r.readFloat()),e.events.push(a)}i=r.readInt(!0);for(let l=0;l<i;l++)e.animations.push(this.readAnimation(r,r.readString(),e));return e}readSkin(s,t,e,r){let n=null,i=0;if(e){if(i=s.readInt(!0),i==0)return null;n=new Id("default")}else{n=new Id(s.readStringRef()),n.bones.length=s.readInt(!0);for(let o=0,l=n.bones.length;o<l;o++)n.bones[o]=t.bones[s.readInt(!0)];for(let o=0,l=s.readInt(!0);o<l;o++)n.constraints.push(t.ikConstraints[s.readInt(!0)]);for(let o=0,l=s.readInt(!0);o<l;o++)n.constraints.push(t.transformConstraints[s.readInt(!0)]);for(let o=0,l=s.readInt(!0);o<l;o++)n.constraints.push(t.pathConstraints[s.readInt(!0)]);i=s.readInt(!0)}for(let o=0;o<i;o++){const l=s.readInt(!0);for(let a=0,h=s.readInt(!0);a<h;a++){const c=s.readStringRef(),u=this.readAttachment(s,t,n,l,c,r);u!=null&&n.setAttachment(l,c,u)}}return n}readAttachment(s,t,e,r,n,i){const o=this.scale;let l=s.readStringRef();l==null&&(l=n);const a=s.readByte();switch(ge.AttachmentTypeValues[a]){case Bt.Region:{let c=s.readStringRef();const u=s.readFloat(),d=s.readFloat(),f=s.readFloat(),m=s.readFloat(),g=s.readFloat(),p=s.readFloat(),y=s.readFloat(),x=s.readInt32();c==null&&(c=l);const _=this.attachmentLoader.newRegionAttachment(e,l,c);return _==null?null:(_.path=c,_.x=d*o,_.y=f*o,_.scaleX=m,_.scaleY=g,_.rotation=u,_.width=p*o,_.height=y*o,lt.rgba8888ToColor(_.color,x),_)}case Bt.BoundingBox:{const c=s.readInt(!0),u=this.readVertices(s,c),d=i?s.readInt32():0,f=this.attachmentLoader.newBoundingBoxAttachment(e,l);return f==null?null:(f.worldVerticesLength=c<<1,f.vertices=u.vertices,f.bones=u.bones,i&&lt.rgba8888ToColor(f.color,d),f)}case Bt.Mesh:{let c=s.readStringRef();const u=s.readInt32(),d=s.readInt(!0),f=this.readFloatArray(s,d<<1,1),m=this.readShortArray(s),g=this.readVertices(s,d),p=s.readInt(!0);let y=null,x=0,_=0;i&&(y=this.readShortArray(s),x=s.readFloat(),_=s.readFloat()),c==null&&(c=l);const A=this.attachmentLoader.newMeshAttachment(e,l,c);return A==null?null:(A.path=c,lt.rgba8888ToColor(A.color,u),A.bones=g.bones,A.vertices=g.vertices,A.worldVerticesLength=d<<1,A.triangles=m,A.regionUVs=new Float32Array(f),A.hullLength=p<<1,i&&(A.edges=y,A.width=x*o,A.height=_*o),A)}case Bt.LinkedMesh:{let c=s.readStringRef();const u=s.readInt32(),d=s.readStringRef(),f=s.readStringRef(),m=s.readBoolean();let g=0,p=0;i&&(g=s.readFloat(),p=s.readFloat()),c==null&&(c=l);const y=this.attachmentLoader.newMeshAttachment(e,l,c);return y==null?null:(y.path=c,lt.rgba8888ToColor(y.color,u),i&&(y.width=g*o,y.height=p*o),this.linkedMeshes.push(new wB(y,d,r,f,m)),y)}case Bt.Path:{const c=s.readBoolean(),u=s.readBoolean(),d=s.readInt(!0),f=this.readVertices(s,d),m=J.newArray(d/3,0);for(let y=0,x=m.length;y<x;y++)m[y]=s.readFloat()*o;const g=i?s.readInt32():0,p=this.attachmentLoader.newPathAttachment(e,l);return p==null?null:(p.closed=c,p.constantSpeed=u,p.worldVerticesLength=d<<1,p.vertices=f.vertices,p.bones=f.bones,p.lengths=m,i&&lt.rgba8888ToColor(p.color,g),p)}case Bt.Point:{const c=s.readFloat(),u=s.readFloat(),d=s.readFloat(),f=i?s.readInt32():0,m=this.attachmentLoader.newPointAttachment(e,l);return m==null?null:(m.x=u*o,m.y=d*o,m.rotation=c,i&&lt.rgba8888ToColor(m.color,f),m)}case Bt.Clipping:{const c=s.readInt(!0),u=s.readInt(!0),d=this.readVertices(s,u),f=i?s.readInt32():0,m=this.attachmentLoader.newClippingAttachment(e,l);return m==null?null:(m.endSlot=t.slots[c],m.worldVerticesLength=u<<1,m.vertices=d.vertices,m.bones=d.bones,i&&lt.rgba8888ToColor(m.color,f),m)}}return null}readVertices(s,t){const e=t<<1,r=new EB,n=this.scale;if(!s.readBoolean())return r.vertices=this.readFloatArray(s,e,n),r;const i=new Array,o=new Array;for(let l=0;l<t;l++){const a=s.readInt(!0);o.push(a);for(let h=0;h<a;h++)o.push(s.readInt(!0)),i.push(s.readFloat()*n),i.push(s.readFloat()*n),i.push(s.readFloat())}return r.vertices=J.toFloatArray(i),r.bones=o,r}readFloatArray(s,t,e){const r=new Array(t);if(e==1)for(let n=0;n<t;n++)r[n]=s.readFloat();else for(let n=0;n<t;n++)r[n]=s.readFloat()*e;return r}readShortArray(s){const t=s.readInt(!0),e=new Array(t);for(let r=0;r<t;r++)e[r]=s.readShort();return e}readAnimation(s,t,e){const r=new Array,n=this.scale;let i=0;const o=new lt,l=new lt;for(let c=0,u=s.readInt(!0);c<u;c++){const d=s.readInt(!0);for(let f=0,m=s.readInt(!0);f<m;f++){const g=s.readByte(),p=s.readInt(!0);switch(g){case ge.SLOT_ATTACHMENT:{const y=new eb(p);y.slotIndex=d;for(let x=0;x<p;x++)y.setFrame(x,s.readFloat(),s.readStringRef());r.push(y),i=Math.max(i,y.frames[p-1]);break}case ge.SLOT_COLOR:{const y=new As(p);y.slotIndex=d;for(let x=0;x<p;x++){const _=s.readFloat();lt.rgba8888ToColor(o,s.readInt32()),y.setFrame(x,_,o.r,o.g,o.b,o.a),x<p-1&&this.readCurve(s,x,y)}r.push(y),i=Math.max(i,y.frames[(p-1)*As.ENTRIES]);break}case ge.SLOT_TWO_COLOR:{const y=new Fe(p);y.slotIndex=d;for(let x=0;x<p;x++){const _=s.readFloat();lt.rgba8888ToColor(o,s.readInt32()),lt.rgb888ToColor(l,s.readInt32()),y.setFrame(x,_,o.r,o.g,o.b,o.a,l.r,l.g,l.b),x<p-1&&this.readCurve(s,x,y)}r.push(y),i=Math.max(i,y.frames[(p-1)*Fe.ENTRIES]);break}}}}for(let c=0,u=s.readInt(!0);c<u;c++){const d=s.readInt(!0);for(let f=0,m=s.readInt(!0);f<m;f++){const g=s.readByte(),p=s.readInt(!0);switch(g){case ge.BONE_ROTATE:{const y=new En(p);y.boneIndex=d;for(let x=0;x<p;x++)y.setFrame(x,s.readFloat(),s.readFloat()),x<p-1&&this.readCurve(s,x,y);r.push(y),i=Math.max(i,y.frames[(p-1)*En.ENTRIES]);break}case ge.BONE_TRANSLATE:case ge.BONE_SCALE:case ge.BONE_SHEAR:{let y,x=1;g==ge.BONE_SCALE?y=new JA(p):g==ge.BONE_SHEAR?y=new tb(p):(y=new Ys(p),x=n),y.boneIndex=d;for(let _=0;_<p;_++)y.setFrame(_,s.readFloat(),s.readFloat()*x,s.readFloat()*x),_<p-1&&this.readCurve(s,_,y);r.push(y),i=Math.max(i,y.frames[(p-1)*Ys.ENTRIES]);break}}}}for(let c=0,u=s.readInt(!0);c<u;c++){const d=s.readInt(!0),f=s.readInt(!0),m=new as(f);m.ikConstraintIndex=d;for(let g=0;g<f;g++)m.setFrame(g,s.readFloat(),s.readFloat(),s.readFloat()*n,s.readByte(),s.readBoolean(),s.readBoolean()),g<f-1&&this.readCurve(s,g,m);r.push(m),i=Math.max(i,m.frames[(f-1)*as.ENTRIES])}for(let c=0,u=s.readInt(!0);c<u;c++){const d=s.readInt(!0),f=s.readInt(!0),m=new bs(f);m.transformConstraintIndex=d;for(let g=0;g<f;g++)m.setFrame(g,s.readFloat(),s.readFloat(),s.readFloat(),s.readFloat(),s.readFloat()),g<f-1&&this.readCurve(s,g,m);r.push(m),i=Math.max(i,m.frames[(f-1)*bs.ENTRIES])}for(let c=0,u=s.readInt(!0);c<u;c++){const d=s.readInt(!0),f=e.pathConstraints[d];for(let m=0,g=s.readInt(!0);m<g;m++){const p=s.readByte(),y=s.readInt(!0);switch(p){case ge.PATH_POSITION:case ge.PATH_SPACING:{let x,_=1;p==ge.PATH_SPACING?(x=new ib(y),(f.spacingMode==ds.Length||f.spacingMode==ds.Fixed)&&(_=n)):(x=new qr(y),f.positionMode==Ve.Fixed&&(_=n)),x.pathConstraintIndex=d;for(let A=0;A<y;A++)x.setFrame(A,s.readFloat(),s.readFloat()*_),A<y-1&&this.readCurve(s,A,x);r.push(x),i=Math.max(i,x.frames[(y-1)*qr.ENTRIES]);break}case ge.PATH_MIX:{const x=new Ir(y);x.pathConstraintIndex=d;for(let _=0;_<y;_++)x.setFrame(_,s.readFloat(),s.readFloat(),s.readFloat()),_<y-1&&this.readCurve(s,_,x);r.push(x),i=Math.max(i,x.frames[(y-1)*Ir.ENTRIES]);break}}}}for(let c=0,u=s.readInt(!0);c<u;c++){const d=e.skins[s.readInt(!0)];for(let f=0,m=s.readInt(!0);f<m;f++){const g=s.readInt(!0);for(let p=0,y=s.readInt(!0);p<y;p++){const x=d.getAttachment(g,s.readStringRef()),_=x.bones!=null,A=x.vertices,b=_?A.length/3*2:A.length,w=s.readInt(!0),v=new sb(w);v.slotIndex=g,v.attachment=x;for(let R=0;R<w;R++){const P=s.readFloat();let F,B=s.readInt(!0);if(B==0)F=_?J.newFloatArray(b):A;else{F=J.newFloatArray(b);const L=s.readInt(!0);if(B+=L,n==1)for(let Y=L;Y<B;Y++)F[Y]=s.readFloat();else for(let Y=L;Y<B;Y++)F[Y]=s.readFloat()*n;if(!_)for(let Y=0,Z=F.length;Y<Z;Y++)F[Y]+=A[Y]}v.setFrame(R,P,F),R<w-1&&this.readCurve(s,R,v)}r.push(v),i=Math.max(i,v.frames[w-1])}}}const a=s.readInt(!0);if(a>0){const c=new nb(a),u=e.slots.length;for(let d=0;d<a;d++){const f=s.readFloat(),m=s.readInt(!0),g=J.newArray(u,0);for(let _=u-1;_>=0;_--)g[_]=-1;const p=J.newArray(u-m,0);let y=0,x=0;for(let _=0;_<m;_++){const A=s.readInt(!0);for(;y!=A;)p[x++]=y++;g[y+s.readInt(!0)]=y++}for(;y<u;)p[x++]=y++;for(let _=u-1;_>=0;_--)g[_]==-1&&(g[_]=p[--x]);c.setFrame(d,f,g)}r.push(c),i=Math.max(i,c.frames[a-1])}const h=s.readInt(!0);if(h>0){const c=new rb(h);for(let u=0;u<h;u++){const d=s.readFloat(),f=e.events[s.readInt(!0)],m=new lb(d,f);m.intValue=s.readInt(!1),m.floatValue=s.readFloat(),m.stringValue=s.readBoolean()?s.readString():f.stringValue,m.data.audioPath!=null&&(m.volume=s.readFloat(),m.balance=s.readFloat()),c.setFrame(u,m)}r.push(c),i=Math.max(i,c.frames[h-1])}return new je(t,r,i)}readCurve(s,t,e){switch(s.readByte()){case ge.CURVE_STEPPED:e.setStepped(t);break;case ge.CURVE_BEZIER:this.setCurve(e,t,s.readFloat(),s.readFloat(),s.readFloat(),s.readFloat());break}}setCurve(s,t,e,r,n,i){s.setCurve(t,e,r,n,i)}};let ke=ge;ke.AttachmentTypeValues=[0,1,2,3,4,5,6];ke.TransformModeValues=[Re.Normal,Re.OnlyTranslation,Re.NoRotationOrReflection,Re.NoScale,Re.NoScaleOrReflection];ke.PositionModeValues=[Ve.Fixed,Ve.Percent];ke.SpacingModeValues=[ds.Length,ds.Fixed,ds.Percent];ke.RotateModeValues=[Xs.Tangent,Xs.Chain,Xs.ChainScale];ke.BlendModeValues=[ft.NORMAL,ft.ADD,ft.MULTIPLY,ft.SCREEN];ke.BONE_ROTATE=0;ke.BONE_TRANSLATE=1;ke.BONE_SCALE=2;ke.BONE_SHEAR=3;ke.SLOT_ATTACHMENT=0;ke.SLOT_COLOR=1;ke.SLOT_TWO_COLOR=2;ke.PATH_POSITION=0;ke.PATH_SPACING=1;ke.PATH_MIX=2;ke.CURVE_LINEAR=0;ke.CURVE_STEPPED=1;ke.CURVE_BEZIER=2;let wB=class{constructor(t,e,r,n,i){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritDeform=i}},EB=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},SB=class Pi{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new db,n=typeof t=="string"?JSON.parse(t):t,i=n.skeleton;if(i!=null){if(r.hash=i.hash,r.version=i.spine,r.version.substr(0,3)!=="3.8"){const o=`Spine 3.8 loader cant load version ${i.spine}. Please configure your pixi-spine bundle`;console.error(o)}r.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height,r.fps=i.fps,r.imagesPath=i.images}if(n.bones)for(let o=0;o<n.bones.length;o++){const l=n.bones[o];let a=null;const h=this.getValue(l,"parent",null);if(h!=null&&(a=r.findBone(h),a==null))throw new Error(`Parent bone not found: ${h}`);const c=new ob(r.bones.length,l.name,a);c.length=this.getValue(l,"length",0)*e,c.x=this.getValue(l,"x",0)*e,c.y=this.getValue(l,"y",0)*e,c.rotation=this.getValue(l,"rotation",0),c.scaleX=this.getValue(l,"scaleX",1),c.scaleY=this.getValue(l,"scaleY",1),c.shearX=this.getValue(l,"shearX",0),c.shearY=this.getValue(l,"shearY",0),c.transformMode=Pi.transformModeFromString(this.getValue(l,"transform","normal")),c.skinRequired=this.getValue(l,"skin",!1),r.bones.push(c)}if(n.slots)for(let o=0;o<n.slots.length;o++){const l=n.slots[o],a=l.name,h=l.bone,c=r.findBone(h);if(c==null)throw new Error(`Slot bone not found: ${h}`);const u=new fb(r.slots.length,a,c),d=this.getValue(l,"color",null);d!=null&&u.color.setFromString(d);const f=this.getValue(l,"dark",null);f!=null&&(u.darkColor=new lt(1,1,1,1),u.darkColor.setFromString(f)),u.attachmentName=this.getValue(l,"attachment",null),u.blendMode=Pi.blendModeFromString(this.getValue(l,"blend","normal")),r.slots.push(u)}if(n.ik)for(let o=0;o<n.ik.length;o++){const l=n.ik[o],a=new cb(l.name);a.order=this.getValue(l,"order",0),a.skinRequired=this.getValue(l,"skin",!1);for(let c=0;c<l.bones.length;c++){const u=l.bones[c],d=r.findBone(u);if(d==null)throw new Error(`IK bone not found: ${u}`);a.bones.push(d)}const h=l.target;if(a.target=r.findBone(h),a.target==null)throw new Error(`IK target bone not found: ${h}`);a.mix=this.getValue(l,"mix",1),a.softness=this.getValue(l,"softness",0)*e,a.bendDirection=this.getValue(l,"bendPositive",!0)?1:-1,a.compress=this.getValue(l,"compress",!1),a.stretch=this.getValue(l,"stretch",!1),a.uniform=this.getValue(l,"uniform",!1),r.ikConstraints.push(a)}if(n.transform)for(let o=0;o<n.transform.length;o++){const l=n.transform[o],a=new mb(l.name);a.order=this.getValue(l,"order",0),a.skinRequired=this.getValue(l,"skin",!1);for(let c=0;c<l.bones.length;c++){const u=l.bones[c],d=r.findBone(u);if(d==null)throw new Error(`Transform constraint bone not found: ${u}`);a.bones.push(d)}const h=l.target;if(a.target=r.findBone(h),a.target==null)throw new Error(`Transform constraint target bone not found: ${h}`);a.local=this.getValue(l,"local",!1),a.relative=this.getValue(l,"relative",!1),a.offsetRotation=this.getValue(l,"rotation",0),a.offsetX=this.getValue(l,"x",0)*e,a.offsetY=this.getValue(l,"y",0)*e,a.offsetScaleX=this.getValue(l,"scaleX",0),a.offsetScaleY=this.getValue(l,"scaleY",0),a.offsetShearY=this.getValue(l,"shearY",0),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),a.scaleMix=this.getValue(l,"scaleMix",1),a.shearMix=this.getValue(l,"shearMix",1),r.transformConstraints.push(a)}if(n.path)for(let o=0;o<n.path.length;o++){const l=n.path[o],a=new ub(l.name);a.order=this.getValue(l,"order",0),a.skinRequired=this.getValue(l,"skin",!1);for(let c=0;c<l.bones.length;c++){const u=l.bones[c],d=r.findBone(u);if(d==null)throw new Error(`Transform constraint bone not found: ${u}`);a.bones.push(d)}const h=l.target;if(a.target=r.findSlot(h),a.target==null)throw new Error(`Path target slot not found: ${h}`);a.positionMode=Pi.positionModeFromString(this.getValue(l,"positionMode","percent")),a.spacingMode=Pi.spacingModeFromString(this.getValue(l,"spacingMode","length")),a.rotateMode=Pi.rotateModeFromString(this.getValue(l,"rotateMode","tangent")),a.offsetRotation=this.getValue(l,"rotation",0),a.position=this.getValue(l,"position",0),a.positionMode==Ve.Fixed&&(a.position*=e),a.spacing=this.getValue(l,"spacing",0),(a.spacingMode==ds.Length||a.spacingMode==ds.Fixed)&&(a.spacing*=e),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),r.pathConstraints.push(a)}if(n.skins)for(let o=0;o<n.skins.length;o++){const l=n.skins[o],a=new Id(l.name);if(l.bones)for(let h=0;h<l.bones.length;h++){const c=r.findBone(l.bones[h]);if(c==null)throw new Error(`Skin bone not found: ${l.bones[o]}`);a.bones.push(c)}if(l.ik)for(let h=0;h<l.ik.length;h++){const c=r.findIkConstraint(l.ik[h]);if(c==null)throw new Error(`Skin IK constraint not found: ${l.ik[o]}`);a.constraints.push(c)}if(l.transform)for(let h=0;h<l.transform.length;h++){const c=r.findTransformConstraint(l.transform[h]);if(c==null)throw new Error(`Skin transform constraint not found: ${l.transform[o]}`);a.constraints.push(c)}if(l.path)for(let h=0;h<l.path.length;h++){const c=r.findPathConstraint(l.path[h]);if(c==null)throw new Error(`Skin path constraint not found: ${l.path[o]}`);a.constraints.push(c)}for(const h in l.attachments){const c=r.findSlot(h);if(c==null)throw new Error(`Slot not found: ${h}`);const u=l.attachments[h];for(const d in u){const f=this.readAttachment(u[d],a,c.index,d,r);f!=null&&a.setAttachment(c.index,d,f)}}r.skins.push(a),a.name=="default"&&(r.defaultSkin=a)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){const a=this.linkedMeshes[o],h=a.skin==null?r.defaultSkin:r.findSkin(a.skin);if(h==null)throw new Error(`Skin not found: ${a.skin}`);const c=h.getAttachment(a.slotIndex,a.parent);if(c==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.deformAttachment=a.inheritDeform?c:a.mesh,a.mesh.setParentMesh(c)}if(this.linkedMeshes.length=0,n.events)for(const o in n.events){const l=n.events[o],a=new hb(o);a.intValue=this.getValue(l,"int",0),a.floatValue=this.getValue(l,"float",0),a.stringValue=this.getValue(l,"string",""),a.audioPath=this.getValue(l,"audio",null),a.audioPath!=null&&(a.volume=this.getValue(l,"volume",1),a.balance=this.getValue(l,"balance",0)),r.events.push(a)}if(n.animations)for(const o in n.animations){const l=n.animations[o];this.readAnimation(l,o,r)}return r}readAttachment(t,e,r,n,i){const o=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":{const a=this.getValue(t,"path",n),h=this.attachmentLoader.newRegionAttachment(e,n,a);if(h==null)return null;h.path=a,h.x=this.getValue(t,"x",0)*o,h.y=this.getValue(t,"y",0)*o,h.scaleX=this.getValue(t,"scaleX",1),h.scaleY=this.getValue(t,"scaleY",1),h.rotation=this.getValue(t,"rotation",0),h.width=t.width*o,h.height=t.height*o;const c=this.getValue(t,"color",null);return c!=null&&h.color.setFromString(c),h}case"boundingbox":{const a=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(a==null)return null;this.readVertices(t,a,t.vertexCount<<1);const h=this.getValue(t,"color",null);return h!=null&&a.color.setFromString(h),a}case"mesh":case"linkedmesh":{const a=this.getValue(t,"path",n),h=this.attachmentLoader.newMeshAttachment(e,n,a);if(h==null)return null;h.path=a;const c=this.getValue(t,"color",null);c!=null&&h.color.setFromString(c),h.width=this.getValue(t,"width",0)*o,h.height=this.getValue(t,"height",0)*o;const u=this.getValue(t,"parent",null);if(u!=null)return this.linkedMeshes.push(new TB(h,this.getValue(t,"skin",null),r,u,this.getValue(t,"deform",!0))),h;const d=t.uvs;return this.readVertices(t,h,d.length),h.triangles=t.triangles,h.regionUVs=new Float32Array(d),h.edges=this.getValue(t,"edges",null),h.hullLength=this.getValue(t,"hull",0)*2,h}case"path":{const a=this.attachmentLoader.newPathAttachment(e,n);if(a==null)return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);const h=t.vertexCount;this.readVertices(t,a,h<<1);const c=J.newArray(h/3,0);for(let d=0;d<t.lengths.length;d++)c[d]=t.lengths[d]*o;a.lengths=c;const u=this.getValue(t,"color",null);return u!=null&&a.color.setFromString(u),a}case"point":{const a=this.attachmentLoader.newPointAttachment(e,n);if(a==null)return null;a.x=this.getValue(t,"x",0)*o,a.y=this.getValue(t,"y",0)*o,a.rotation=this.getValue(t,"rotation",0);const h=this.getValue(t,"color",null);return h!=null&&a.color.setFromString(h),a}case"clipping":{const a=this.attachmentLoader.newClippingAttachment(e,n);if(a==null)return null;const h=this.getValue(t,"end",null);if(h!=null){const d=i.findSlot(h);if(d==null)throw new Error(`Clipping end slot not found: ${h}`);a.endSlot=d}const c=t.vertexCount;this.readVertices(t,a,c<<1);const u=this.getValue(t,"color",null);return u!=null&&a.color.setFromString(u),a}}return null}readVertices(t,e,r){const n=this.scale;e.worldVerticesLength=r;const i=t.vertices;if(r==i.length){const a=J.toFloatArray(i);if(n!=1)for(let h=0,c=i.length;h<c;h++)a[h]*=n;e.vertices=a;return}const o=new Array,l=new Array;for(let a=0,h=i.length;a<h;){const c=i[a++];l.push(c);for(let u=a+c*4;a<u;a+=4)l.push(i[a]),o.push(i[a+1]*n),o.push(i[a+2]*n),o.push(i[a+3])}e.bones=l,e.vertices=J.toFloatArray(o)}readAnimation(t,e,r){const n=this.scale,i=new Array;let o=0;if(t.slots)for(const a in t.slots){const h=t.slots[a],c=r.findSlotIndex(a);if(c==-1)throw new Error(`Slot not found: ${a}`);for(const u in h){const d=h[u];if(u=="attachment"){const f=new eb(d.length);f.slotIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g];f.setFrame(m++,this.getValue(p,"time",0),p.name)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}else if(u=="color"){const f=new As(d.length);f.slotIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g],y=new lt;y.setFromString(p.color||"ffffffff"),f.setFrame(m,this.getValue(p,"time",0),y.r,y.g,y.b,y.a),this.readCurve(p,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*As.ENTRIES])}else if(u=="twoColor"){const f=new Fe(d.length);f.slotIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g],y=new lt,x=new lt;y.setFromString(p.light),x.setFromString(p.dark),f.setFrame(m,this.getValue(p,"time",0),y.r,y.g,y.b,y.a,x.r,x.g,x.b),this.readCurve(p,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Fe.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${u} (${a})`)}}if(t.bones)for(const a in t.bones){const h=t.bones[a],c=r.findBoneIndex(a);if(c==-1)throw new Error(`Bone not found: ${a}`);for(const u in h){const d=h[u];if(u==="rotate"){const f=new En(d.length);f.boneIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g];f.setFrame(m,this.getValue(p,"time",0),this.getValue(p,"angle",0)),this.readCurve(p,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*En.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){let f=null,m=1,g=0;u==="scale"?(f=new JA(d.length),g=1):u==="shear"?f=new tb(d.length):(f=new Ys(d.length),m=n),f.boneIndex=c;let p=0;for(let y=0;y<d.length;y++){const x=d[y],_=this.getValue(x,"x",g),A=this.getValue(x,"y",g);f.setFrame(p,this.getValue(x,"time",0),_*m,A*m),this.readCurve(x,f,p),p++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Ys.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${u} (${a})`)}}if(t.ik)for(const a in t.ik){const h=t.ik[a],c=r.findIkConstraint(a),u=new as(h.length);u.ikConstraintIndex=r.ikConstraints.indexOf(c);let d=0;for(let f=0;f<h.length;f++){const m=h[f];u.setFrame(d,this.getValue(m,"time",0),this.getValue(m,"mix",1),this.getValue(m,"softness",0)*n,this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,u,d),d++}i.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*as.ENTRIES])}if(t.transform)for(const a in t.transform){const h=t.transform[a],c=r.findTransformConstraint(a),u=new bs(h.length);u.transformConstraintIndex=r.transformConstraints.indexOf(c);let d=0;for(let f=0;f<h.length;f++){const m=h[f];u.setFrame(d,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,u,d),d++}i.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*bs.ENTRIES])}if(t.path)for(const a in t.path){const h=t.path[a],c=r.findPathConstraintIndex(a);if(c==-1)throw new Error(`Path constraint not found: ${a}`);const u=r.pathConstraints[c];for(const d in h){const f=h[d];if(d==="position"||d==="spacing"){let m=null,g=1;d==="spacing"?(m=new ib(f.length),(u.spacingMode==ds.Length||u.spacingMode==ds.Fixed)&&(g=n)):(m=new qr(f.length),u.positionMode==Ve.Fixed&&(g=n)),m.pathConstraintIndex=c;let p=0;for(let y=0;y<f.length;y++){const x=f[y];m.setFrame(p,this.getValue(x,"time",0),this.getValue(x,d,0)*g),this.readCurve(x,m,p),p++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*qr.ENTRIES])}else if(d==="mix"){const m=new Ir(f.length);m.pathConstraintIndex=c;let g=0;for(let p=0;p<f.length;p++){const y=f[p];m.setFrame(g,this.getValue(y,"time",0),this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1)),this.readCurve(y,m,g),g++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*Ir.ENTRIES])}}}if(t.deform)for(const a in t.deform){const h=t.deform[a],c=r.findSkin(a);if(c!=null)for(const u in h){const d=h[u],f=r.findSlotIndex(u);if(f==-1)throw new Error(`Slot not found: ${d.name}`);for(const m in d){const g=d[m],p=c.getAttachment(f,m);if(p==null)throw new Error(`Deform attachment not found: ${g.name}`);const y=p.bones!=null,x=p.vertices,_=y?x.length/3*2:x.length,A=new sb(g.length);A.slotIndex=f,A.attachment=p;let b=0;for(let w=0;w<g.length;w++){const v=g[w];let R;const P=this.getValue(v,"vertices",null);if(P==null)R=y?J.newFloatArray(_):x;else{R=J.newFloatArray(_);const F=this.getValue(v,"offset",0);if(J.arrayCopy(P,0,R,F,P.length),n!=1)for(let B=F,L=B+P.length;B<L;B++)R[B]*=n;if(!y)for(let B=0;B<_;B++)R[B]+=x[B]}A.setFrame(b,this.getValue(v,"time",0),R),this.readCurve(v,A,b),b++}i.push(A),o=Math.max(o,A.frames[A.getFrameCount()-1])}}}let l=t.drawOrder;if(l==null&&(l=t.draworder),l!=null){const a=new nb(l.length),h=r.slots.length;let c=0;for(let u=0;u<l.length;u++){const d=l[u];let f=null;const m=this.getValue(d,"offsets",null);if(m!=null){f=J.newArray(h,-1);const g=J.newArray(h-m.length,0);let p=0,y=0;for(let x=0;x<m.length;x++){const _=m[x],A=r.findSlotIndex(_.slot);if(A==-1)throw new Error(`Slot not found: ${_.slot}`);for(;p!=A;)g[y++]=p++;f[p+_.offset]=p++}for(;p<h;)g[y++]=p++;for(let x=h-1;x>=0;x--)f[x]==-1&&(f[x]=g[--y])}a.setFrame(c++,this.getValue(d,"time",0),f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(t.events){const a=new rb(t.events.length);let h=0;for(let c=0;c<t.events.length;c++){const u=t.events[c],d=r.findEvent(u.name);if(d==null)throw new Error(`Event not found: ${u.name}`);const f=new lb(J.toSinglePrecision(this.getValue(u,"time",0)),d);f.intValue=this.getValue(u,"int",d.intValue),f.floatValue=this.getValue(u,"float",d.floatValue),f.stringValue=this.getValue(u,"string",d.stringValue),f.data.audioPath!=null&&(f.volume=this.getValue(u,"volume",1),f.balance=this.getValue(u,"balance",0)),a.setFrame(h++,f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new je(e,i,o))}readCurve(t,e,r){if(t.hasOwnProperty("curve"))if(t.curve==="stepped")e.setStepped(r);else{const n=t.curve;e.setCurve(r,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}}getValue(t,e,r){return t[e]!==void 0?t[e]:r}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ft.NORMAL;if(t=="additive")return ft.ADD;if(t=="multiply")return ft.MULTIPLY;if(t=="screen")return ft.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}static positionModeFromString(t){if(t=t.toLowerCase(),t=="fixed")return Ve.Fixed;if(t=="percent")return Ve.Percent;throw new Error(`Unknown position mode: ${t}`)}static spacingModeFromString(t){if(t=t.toLowerCase(),t=="length")return ds.Length;if(t=="fixed")return ds.Fixed;if(t=="percent")return ds.Percent;throw new Error(`Unknown position mode: ${t}`)}static rotateModeFromString(t){if(t=t.toLowerCase(),t=="tangent")return Xs.Tangent;if(t=="chain")return Xs.Chain;if(t=="chainscale")return Xs.ChainScale;throw new Error(`Unknown rotate mode: ${t}`)}static transformModeFromString(t){if(t=t.toLowerCase(),t=="normal")return Re.Normal;if(t=="onlytranslation")return Re.OnlyTranslation;if(t=="norotationorreflection")return Re.NoRotationOrReflection;if(t=="noscale")return Re.NoScale;if(t=="noscaleorreflection")return Re.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${t}`)}},TB=class{constructor(t,e,r,n,i){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritDeform=i}},pb=class{constructor(t){if(t==null)throw new Error("name cannot be null.");this.name=t}};const gb=class extends pb{constructor(t){super(t),this.id=(gb.nextID++&65535)<<11,this.worldVerticesLength=0}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,r,n,i,o){r=i+(r>>1)*o;const l=t.bone.skeleton,a=t.attachmentVertices;let h=this.vertices;const c=this.bones;if(c==null){a.length>0&&(h=a);const m=t.bone.matrix,g=m.tx,p=m.ty,y=m.a,x=m.c,_=m.b,A=m.d;for(let b=e,w=i;w<r;b+=2,w+=o){const v=h[b],R=h[b+1];n[w]=v*y+R*x+g,n[w+1]=v*_+R*A+p}return}let u=0,d=0;for(let m=0;m<e;m+=2){const g=c[u];u+=g+1,d+=g}const f=l.bones;if(a.length==0)for(let m=i,g=d*3;m<r;m+=o){let p=0,y=0,x=c[u++];for(x+=u;u<x;u++,g+=3){const _=f[c[u]].matrix,A=h[g],b=h[g+1],w=h[g+2];p+=(A*_.a+b*_.c+_.tx)*w,y+=(A*_.b+b*_.d+_.ty)*w}n[m]=p,n[m+1]=y}else{const m=a;for(let g=i,p=d*3,y=d<<1;g<r;g+=o){let x=0,_=0,A=c[u++];for(A+=u;u<A;u++,p+=3,y+=2){const b=f[c[u]].matrix,w=h[p]+m[y],v=h[p+1]+m[y+1],R=h[p+2];x+=(w*b.a+v*b.c+b.tx)*R,_+=(w*b.b+v*b.d+b.ty)*R}n[g]=x,n[g+1]=_}}}applyDeform(t){return this==t}};let fi=gb;fi.nextID=0;let CB=class extends fi{constructor(t){super(t),this.type=Bt.BoundingBox,this.color=new lt(1,1,1,1)}},RB=class extends fi{constructor(t){super(t),this.type=Bt.Clipping,this.color=new lt(.2275,.2275,.8078,1)}},IB=class extends fi{constructor(t){super(t),this.type=Bt.Mesh,this.color=new lt(1,1,1,1),this.inheritDeform=!1,this.tempColor=new lt(0,0,0,0)}applyDeform(t){return this==t||this.inheritDeform&&this.parentMesh==t}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},MB=class extends fi{constructor(t){super(t),this.type=Bt.Path,this.closed=!1,this.constantSpeed=!1,this.color=new lt(1,1,1,1)}},PB=class extends fi{constructor(t){super(t),this.type=Bt.Point,this.color=new lt(.38,.94,0,1)}computeWorldPosition(t,e){const r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,r=xt.cosDeg(this.rotation),n=xt.sinDeg(this.rotation),i=r*e.a+n*e.c,o=r*e.b+n*e.d;return Math.atan2(o,i)*xt.radDeg}};class FB{constructor(t,e){if(this.attachmentVertices=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new lt,this.darkColor=t.darkColor==null?null:new lt,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}}const ze=class extends pb{constructor(t){super(t),this.type=Bt.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new lt(1,1,1,1),this.offset=J.newFloatArray(8),this.uvs=J.newFloatArray(8),this.tempColor=new lt(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,i=r+this.region.width*t,o=n+this.region.height*e,l=this.rotation*Math.PI/180,a=Math.cos(l),h=Math.sin(l),c=r*a+this.x,u=r*h,d=n*a+this.y,f=n*h,m=i*a+this.x,g=i*h,p=o*a+this.y,y=o*h,x=this.offset;x[ze.OX1]=c-f,x[ze.OY1]=d+u,x[ze.OX2]=c-y,x[ze.OY2]=p+u,x[ze.OX3]=m-y,x[ze.OY3]=p+g,x[ze.OX4]=m-f,x[ze.OY4]=d+g}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,r,n){const i=this.offset,o=t instanceof FB?t.bone.matrix:t.matrix,l=o.tx,a=o.ty,h=o.a,c=o.c,u=o.b,d=o.d;let f=0,m=0;f=i[ze.OX1],m=i[ze.OY1],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a,r+=n,f=i[ze.OX2],m=i[ze.OY2],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a,r+=n,f=i[ze.OX3],m=i[ze.OY3],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a,r+=n,f=i[ze.OX4],m=i[ze.OY4],e[r]=f*h+m*c+l,e[r+1]=f*u+m*d+a}};let Mt=ze;Mt.OX1=0;Mt.OY1=1;Mt.OX2=2;Mt.OY2=3;Mt.OX3=4;Mt.OY3=5;Mt.OX4=6;Mt.OY4=7;Mt.X1=0;Mt.Y1=1;Mt.C1R=2;Mt.C1G=3;Mt.C1B=4;Mt.C1A=5;Mt.U1=6;Mt.V1=7;Mt.X2=8;Mt.Y2=9;Mt.C2R=10;Mt.C2G=11;Mt.C2B=12;Mt.C2A=13;Mt.U2=14;Mt.V2=15;Mt.X3=16;Mt.Y3=17;Mt.C3R=18;Mt.C3G=19;Mt.C3B=20;Mt.C3A=21;Mt.U3=22;Mt.V3=23;Mt.X4=24;Mt.Y4=25;Mt.C4R=26;Mt.C4G=27;Mt.C4B=28;Mt.C4A=29;Mt.U4=30;Mt.V4=31;new BA(2);let Qe=class{constructor(t,e,r){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=r}apply(t,e,r,n,i,o,l,a){if(t==null)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));const h=this.timelines;for(let c=0,u=h.length;c<u;c++)h[c].apply(t,e,r,i,o,l,a)}static binarySearch(t,e,r=1){let n=0,i=t.length/r-2;if(i==0)return r;let o=i>>>1;for(;;){if(t[(o+1)*r]<=e?n=o+1:i=o,n==i)return(n+1)*r;o=n+i>>>1}}static linearSearch(t,e,r){for(let n=0,i=t.length-r;n<=i;n+=r)if(t[n]>e)return n;return-1}};const ve=class{constructor(s){if(s<=0)throw new Error(`frameCount must be > 0: ${s}`);this.curves=J.newFloatArray((s-1)*ve.BEZIER_SIZE)}getFrameCount(){return this.curves.length/ve.BEZIER_SIZE+1}setLinear(s){this.curves[s*ve.BEZIER_SIZE]=ve.LINEAR}setStepped(s){this.curves[s*ve.BEZIER_SIZE]=ve.STEPPED}getCurveType(s){const t=s*ve.BEZIER_SIZE;if(t==this.curves.length)return ve.LINEAR;const e=this.curves[t];return e==ve.LINEAR?ve.LINEAR:e==ve.STEPPED?ve.STEPPED:ve.BEZIER}setCurve(s,t,e,r,n){const i=(-t*2+r)*.03,o=(-e*2+n)*.03,l=((t-r)*3+1)*.006,a=((e-n)*3+1)*.006;let h=i*2+l,c=o*2+a,u=t*.3+i+l*.16666667,d=e*.3+o+a*.16666667,f=s*ve.BEZIER_SIZE;const m=this.curves;m[f++]=ve.BEZIER;let g=u,p=d;for(let y=f+ve.BEZIER_SIZE-1;f<y;f+=2)m[f]=g,m[f+1]=p,u+=h,d+=c,h+=l,c+=a,g+=u,p+=d}getCurvePercent(s,t){t=xt.clamp(t,0,1);const e=this.curves;let r=s*ve.BEZIER_SIZE;const n=e[r];if(n==ve.LINEAR)return t;if(n==ve.STEPPED)return 0;r++;let i=0;for(let l=r,a=r+ve.BEZIER_SIZE-1;r<a;r+=2)if(i=e[r],i>=t){let h,c;return r==l?(h=0,c=0):(h=e[r-2],c=e[r-1]),c+(e[r+1]-c)*(t-h)/(i-h)}const o=e[r-1];return o+(1-o)*(t-i)/(1-i)}};let Ps=ve;Ps.LINEAR=0;Ps.STEPPED=1;Ps.BEZIER=2;Ps.BEZIER_SIZE=10*2-1;const an=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(s,t,e){s<<=1,this.frames[s]=t,this.frames[s+an.ROTATION]=e}apply(s,t,e,r,n,i,o){const l=this.frames,a=s.bones[this.boneIndex];if(e<l[0]){switch(i){case M.setup:a.rotation=a.data.rotation;return;case M.first:const m=a.data.rotation-a.rotation;a.rotation+=(m-(16384-(16384.499999999996-m/360|0))*360)*n}return}if(e>=l[l.length-an.ENTRIES]){let m=l[l.length+an.PREV_ROTATION];switch(i){case M.setup:a.rotation=a.data.rotation+m*n;break;case M.first:case M.replace:m+=a.data.rotation-a.rotation,m-=(16384-(16384.499999999996-m/360|0))*360;case M.add:a.rotation+=m*n}return}const h=Qe.binarySearch(l,e,an.ENTRIES),c=l[h+an.PREV_ROTATION],u=l[h],d=this.getCurvePercent((h>>1)-1,1-(e-u)/(l[h+an.PREV_TIME]-u));let f=l[h+an.ROTATION]-c;switch(f=c+(f-(16384-(16384.499999999996-f/360|0))*360)*d,i){case M.setup:a.rotation=a.data.rotation+(f-(16384-(16384.499999999996-f/360|0))*360)*n;break;case M.first:case M.replace:f+=a.data.rotation-a.rotation;case M.add:a.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*n}}};let ra=an;ra.ENTRIES=2;ra.PREV_TIME=-2;ra.PREV_ROTATION=-1;ra.ROTATION=1;const cs=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*cs.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(s,t,e,r){s*=cs.ENTRIES,this.frames[s]=t,this.frames[s+cs.X]=e,this.frames[s+cs.Y]=r}apply(s,t,e,r,n,i,o){const l=this.frames,a=s.bones[this.boneIndex];if(e<l[0]){switch(i){case M.setup:a.x=a.data.x,a.y=a.data.y;return;case M.first:a.x+=(a.data.x-a.x)*n,a.y+=(a.data.y-a.y)*n}return}let h=0,c=0;if(e>=l[l.length-cs.ENTRIES])h=l[l.length+cs.PREV_X],c=l[l.length+cs.PREV_Y];else{const u=Qe.binarySearch(l,e,cs.ENTRIES);h=l[u+cs.PREV_X],c=l[u+cs.PREV_Y];const d=l[u],f=this.getCurvePercent(u/cs.ENTRIES-1,1-(e-d)/(l[u+cs.PREV_TIME]-d));h+=(l[u+cs.X]-h)*f,c+=(l[u+cs.Y]-c)*f}switch(i){case M.setup:a.x=a.data.x+h*n,a.y=a.data.y+c*n;break;case M.first:case M.replace:a.x+=(a.data.x+h-a.x)*n,a.y+=(a.data.y+c-a.y)*n;break;case M.add:a.x+=h*n,a.y+=c*n}}};let Mr=cs;Mr.ENTRIES=3;Mr.PREV_TIME=-3;Mr.PREV_X=-2;Mr.PREV_Y=-1;Mr.X=1;Mr.Y=2;let BB=class sr extends Mr{constructor(t){super(t)}getPropertyId(){return(2<<24)+this.boneIndex}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.bones[this.boneIndex];if(r<a[0]){switch(o){case M.setup:h.scaleX=h.data.scaleX,h.scaleY=h.data.scaleY;return;case M.first:h.scaleX+=(h.data.scaleX-h.scaleX)*i,h.scaleY+=(h.data.scaleY-h.scaleY)*i}return}let c=0,u=0;if(r>=a[a.length-sr.ENTRIES])c=a[a.length+sr.PREV_X]*h.data.scaleX,u=a[a.length+sr.PREV_Y]*h.data.scaleY;else{const d=Qe.binarySearch(a,r,sr.ENTRIES);c=a[d+sr.PREV_X],u=a[d+sr.PREV_Y];const f=a[d],m=this.getCurvePercent(d/sr.ENTRIES-1,1-(r-f)/(a[d+sr.PREV_TIME]-f));c=(c+(a[d+sr.X]-c)*m)*h.data.scaleX,u=(u+(a[d+sr.Y]-u)*m)*h.data.scaleY}if(i==1)o==M.add?(h.scaleX+=c-h.data.scaleX,h.scaleY+=u-h.data.scaleY):(h.scaleX=c,h.scaleY=u);else{let d=0,f=0;if(l==_e.mixOut)switch(o){case M.setup:d=h.data.scaleX,f=h.data.scaleY,h.scaleX=d+(Math.abs(c)*xt.signum(d)-d)*i,h.scaleY=f+(Math.abs(u)*xt.signum(f)-f)*i;break;case M.first:case M.replace:d=h.scaleX,f=h.scaleY,h.scaleX=d+(Math.abs(c)*xt.signum(d)-d)*i,h.scaleY=f+(Math.abs(u)*xt.signum(f)-f)*i;break;case M.add:d=h.scaleX,f=h.scaleY,h.scaleX=d+(Math.abs(c)*xt.signum(d)-h.data.scaleX)*i,h.scaleY=f+(Math.abs(u)*xt.signum(f)-h.data.scaleY)*i}else switch(o){case M.setup:d=Math.abs(h.data.scaleX)*xt.signum(c),f=Math.abs(h.data.scaleY)*xt.signum(u),h.scaleX=d+(c-d)*i,h.scaleY=f+(u-f)*i;break;case M.first:case M.replace:d=Math.abs(h.scaleX)*xt.signum(c),f=Math.abs(h.scaleY)*xt.signum(u),h.scaleX=d+(c-d)*i,h.scaleY=f+(u-f)*i;break;case M.add:d=xt.signum(c),f=xt.signum(u),h.scaleX=Math.abs(h.scaleX)*d+(c-Math.abs(h.data.scaleX)*d)*i,h.scaleY=Math.abs(h.scaleY)*f+(u-Math.abs(h.data.scaleY)*f)*i}}}},kB=class rr extends Mr{constructor(t){super(t)}getPropertyId(){return(3<<24)+this.boneIndex}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.bones[this.boneIndex];if(r<a[0]){switch(o){case M.setup:h.shearX=h.data.shearX,h.shearY=h.data.shearY;return;case M.first:h.shearX+=(h.data.shearX-h.shearX)*i,h.shearY+=(h.data.shearY-h.shearY)*i}return}let c=0,u=0;if(r>=a[a.length-rr.ENTRIES])c=a[a.length+rr.PREV_X],u=a[a.length+rr.PREV_Y];else{const d=Qe.binarySearch(a,r,rr.ENTRIES);c=a[d+rr.PREV_X],u=a[d+rr.PREV_Y];const f=a[d],m=this.getCurvePercent(d/rr.ENTRIES-1,1-(r-f)/(a[d+rr.PREV_TIME]-f));c=c+(a[d+rr.X]-c)*m,u=u+(a[d+rr.Y]-u)*m}switch(o){case M.setup:h.shearX=h.data.shearX+c*i,h.shearY=h.data.shearY+u*i;break;case M.first:case M.replace:h.shearX+=(h.data.shearX+c-h.shearX)*i,h.shearY+=(h.data.shearY+u-h.shearY)*i;break;case M.add:h.shearX+=c*i,h.shearY+=u*i}}};const ue=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*ue.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(s,t,e,r,n,i){s*=ue.ENTRIES,this.frames[s]=t,this.frames[s+ue.R]=e,this.frames[s+ue.G]=r,this.frames[s+ue.B]=n,this.frames[s+ue.A]=i}apply(s,t,e,r,n,i,o){const l=s.slots[this.slotIndex],a=this.frames;if(e<a[0]){switch(i){case M.setup:l.color.setFromColor(l.data.color);return;case M.first:const f=l.color,m=l.data.color;f.add((m.r-f.r)*n,(m.g-f.g)*n,(m.b-f.b)*n,(m.a-f.a)*n)}return}let h=0,c=0,u=0,d=0;if(e>=a[a.length-ue.ENTRIES]){const f=a.length;h=a[f+ue.PREV_R],c=a[f+ue.PREV_G],u=a[f+ue.PREV_B],d=a[f+ue.PREV_A]}else{const f=Qe.binarySearch(a,e,ue.ENTRIES);h=a[f+ue.PREV_R],c=a[f+ue.PREV_G],u=a[f+ue.PREV_B],d=a[f+ue.PREV_A];const m=a[f],g=this.getCurvePercent(f/ue.ENTRIES-1,1-(e-m)/(a[f+ue.PREV_TIME]-m));h+=(a[f+ue.R]-h)*g,c+=(a[f+ue.G]-c)*g,u+=(a[f+ue.B]-u)*g,d+=(a[f+ue.A]-d)*g}if(n==1)l.color.set(h,c,u,d);else{const f=l.color;i==M.setup&&f.setFromColor(l.data.color),f.add((h-f.r)*n,(c-f.g)*n,(u-f.b)*n,(d-f.a)*n)}}};let js=ue;js.ENTRIES=5;js.PREV_TIME=-5;js.PREV_R=-4;js.PREV_G=-3;js.PREV_B=-2;js.PREV_A=-1;js.R=1;js.G=2;js.B=3;js.A=4;const Lt=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*Lt.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(s,t,e,r,n,i,o,l,a){s*=Lt.ENTRIES,this.frames[s]=t,this.frames[s+Lt.R]=e,this.frames[s+Lt.G]=r,this.frames[s+Lt.B]=n,this.frames[s+Lt.A]=i,this.frames[s+Lt.R2]=o,this.frames[s+Lt.G2]=l,this.frames[s+Lt.B2]=a}apply(s,t,e,r,n,i,o){const l=s.slots[this.slotIndex],a=this.frames;if(e<a[0]){switch(i){case M.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case M.first:const p=l.color,y=l.darkColor,x=l.data.color,_=l.data.darkColor;p.add((x.r-p.r)*n,(x.g-p.g)*n,(x.b-p.b)*n,(x.a-p.a)*n),y.add((_.r-y.r)*n,(_.g-y.g)*n,(_.b-y.b)*n,0)}return}let h=0,c=0,u=0,d=0,f=0,m=0,g=0;if(e>=a[a.length-Lt.ENTRIES]){const p=a.length;h=a[p+Lt.PREV_R],c=a[p+Lt.PREV_G],u=a[p+Lt.PREV_B],d=a[p+Lt.PREV_A],f=a[p+Lt.PREV_R2],m=a[p+Lt.PREV_G2],g=a[p+Lt.PREV_B2]}else{const p=Qe.binarySearch(a,e,Lt.ENTRIES);h=a[p+Lt.PREV_R],c=a[p+Lt.PREV_G],u=a[p+Lt.PREV_B],d=a[p+Lt.PREV_A],f=a[p+Lt.PREV_R2],m=a[p+Lt.PREV_G2],g=a[p+Lt.PREV_B2];const y=a[p],x=this.getCurvePercent(p/Lt.ENTRIES-1,1-(e-y)/(a[p+Lt.PREV_TIME]-y));h+=(a[p+Lt.R]-h)*x,c+=(a[p+Lt.G]-c)*x,u+=(a[p+Lt.B]-u)*x,d+=(a[p+Lt.A]-d)*x,f+=(a[p+Lt.R2]-f)*x,m+=(a[p+Lt.G2]-m)*x,g+=(a[p+Lt.B2]-g)*x}if(n==1)l.color.set(h,c,u,d),l.darkColor.set(f,m,g,1);else{const p=l.color,y=l.darkColor;i==M.setup&&(p.setFromColor(l.data.color),y.setFromColor(l.data.darkColor)),p.add((h-p.r)*n,(c-p.g)*n,(u-p.b)*n,(d-p.a)*n),y.add((f-y.r)*n,(m-y.g)*n,(g-y.b)*n,0)}}};let Ye=Lt;Ye.ENTRIES=8;Ye.PREV_TIME=-8;Ye.PREV_R=-7;Ye.PREV_G=-6;Ye.PREV_B=-5;Ye.PREV_A=-4;Ye.PREV_R2=-3;Ye.PREV_G2=-2;Ye.PREV_B2=-1;Ye.R=1;Ye.G=2;Ye.B=3;Ye.A=4;Ye.R2=5;Ye.G2=6;Ye.B2=7;let NB=class{constructor(t){this.frames=J.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(l==_e.mixOut&&o==M.setup){const d=a.data.attachmentName;a.setAttachment(d==null?null:t.getAttachment(this.slotIndex,d));return}const h=this.frames;if(r<h[0]){if(o==M.setup||o==M.first){const d=a.data.attachmentName;a.setAttachment(d==null?null:t.getAttachment(this.slotIndex,d))}return}let c=0;r>=h[h.length-1]?c=h.length-1:c=Qe.binarySearch(h,r,1)-1;const u=this.attachmentNames[c];t.slots[this.slotIndex].setAttachment(u==null?null:t.getAttachment(this.slotIndex,u))}},ky=null,OB=class extends Ps{constructor(t){super(t),this.frames=J.newFloatArray(t),this.frameVertices=new Array(t),ky==null&&(ky=J.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(t,e,r){this.frames[t]=e,this.frameVertices[t]=r}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex],h=a.getAttachment();if(!(h instanceof fi)||!h.applyDeform(this.attachment))return;const c=a.attachmentVertices;c.length==0&&(o=M.setup);const u=this.frameVertices,d=u[0].length,f=this.frames;if(r<f[0]){const A=h;switch(o){case M.setup:c.length=0;return;case M.first:if(i==1){c.length=0;break}const b=J.setArraySize(c,d);if(A.bones==null){const w=A.vertices;for(let v=0;v<d;v++)b[v]+=(w[v]-b[v])*i}else{i=1-i;for(let w=0;w<d;w++)b[w]*=i}}return}const m=J.setArraySize(c,d);if(r>=f[f.length-1]){const A=u[f.length-1];if(i==1)if(o==M.add){const b=h;if(b.bones==null){const w=b.vertices;for(let v=0;v<d;v++)m[v]+=A[v]-w[v]}else for(let w=0;w<d;w++)m[w]+=A[w]}else J.arrayCopy(A,0,m,0,d);else switch(o){case M.setup:{const w=h;if(w.bones==null){const v=w.vertices;for(let R=0;R<d;R++){const P=v[R];m[R]=P+(A[R]-P)*i}}else for(let v=0;v<d;v++)m[v]=A[v]*i;break}case M.first:case M.replace:for(let w=0;w<d;w++)m[w]+=(A[w]-m[w])*i;case M.add:const b=h;if(b.bones==null){const w=b.vertices;for(let v=0;v<d;v++)m[v]+=(A[v]-w[v])*i}else for(let w=0;w<d;w++)m[w]+=A[w]*i}return}const g=Qe.binarySearch(f,r),p=u[g-1],y=u[g],x=f[g],_=this.getCurvePercent(g-1,1-(r-x)/(f[g-1]-x));if(i==1)if(o==M.add){const A=h;if(A.bones==null){const b=A.vertices;for(let w=0;w<d;w++){const v=p[w];m[w]+=v+(y[w]-v)*_-b[w]}}else for(let b=0;b<d;b++){const w=p[b];m[b]+=w+(y[b]-w)*_}}else for(let A=0;A<d;A++){const b=p[A];m[A]=b+(y[A]-b)*_}else switch(o){case M.setup:{const b=h;if(b.bones==null){const w=b.vertices;for(let v=0;v<d;v++){const R=p[v],P=w[v];m[v]=P+(R+(y[v]-R)*_-P)*i}}else for(let w=0;w<d;w++){const v=p[w];m[w]=(v+(y[w]-v)*_)*i}break}case M.first:case M.replace:for(let b=0;b<d;b++){const w=p[b];m[b]+=(w+(y[b]-w)*_-m[b])*i}break;case M.add:const A=h;if(A.bones==null){const b=A.vertices;for(let w=0;w<d;w++){const v=p[w];m[w]+=(v+(y[w]-v)*_-b[w])*i}}else for(let b=0;b<d;b++){const w=p[b];m[b]+=(w+(y[b]-w)*_)*i}}}},LB=class{constructor(t){this.frames=J.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,r,n,i,o,l){if(n==null)return;const a=this.frames,h=this.frames.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,i,o,l),e=-1;else if(e>=a[h-1])return;if(r<a[0])return;let c=0;if(e<a[0])c=0;else{c=Qe.binarySearch(a,e);const u=a[c];for(;c>0&&a[c-1]==u;)c--}for(;c<h&&r>=a[c];c++)n.push(this.events[c])}},VB=class{constructor(t){this.frames=J.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.drawOrders[t]=r}apply(t,e,r,n,i,o,l){const a=t.drawOrder,h=t.slots;if(l==_e.mixOut&&o==M.setup){J.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}const c=this.frames;if(r<c[0]){(o==M.setup||o==M.first)&&J.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let u=0;r>=c[c.length-1]?u=c.length-1:u=Qe.binarySearch(c,r)-1;const d=this.drawOrders[u];if(d==null)J.arrayCopy(h,0,a,0,h.length);else for(let f=0,m=d.length;f<m;f++)a[f]=h[d[f]]}};const te=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*te.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(s,t,e,r,n,i){s*=te.ENTRIES,this.frames[s]=t,this.frames[s+te.MIX]=e,this.frames[s+te.BEND_DIRECTION]=r,this.frames[s+te.COMPRESS]=n?1:0,this.frames[s+te.STRETCH]=i?1:0}apply(s,t,e,r,n,i,o){const l=this.frames,a=s.ikConstraints[this.ikConstraintIndex];if(e<l[0]){switch(i){case M.setup:a.mix=a.data.mix,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;return;case M.first:a.mix+=(a.data.mix-a.mix)*n,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}if(e>=l[l.length-te.ENTRIES]){i==M.setup?(a.mix=a.data.mix+(l[l.length+te.PREV_MIX]-a.data.mix)*n,o==_e.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=l[l.length+te.PREV_BEND_DIRECTION],a.compress=l[l.length+te.PREV_COMPRESS]!=0,a.stretch=l[l.length+te.PREV_STRETCH]!=0)):(a.mix+=(l[l.length+te.PREV_MIX]-a.mix)*n,o==_e.mixIn&&(a.bendDirection=l[l.length+te.PREV_BEND_DIRECTION],a.compress=l[l.length+te.PREV_COMPRESS]!=0,a.stretch=l[l.length+te.PREV_STRETCH]!=0));return}const h=Qe.binarySearch(l,e,te.ENTRIES),c=l[h+te.PREV_MIX],u=l[h],d=this.getCurvePercent(h/te.ENTRIES-1,1-(e-u)/(l[h+te.PREV_TIME]-u));i==M.setup?(a.mix=a.data.mix+(c+(l[h+te.MIX]-c)*d-a.data.mix)*n,o==_e.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=l[h+te.PREV_BEND_DIRECTION],a.compress=l[h+te.PREV_COMPRESS]!=0,a.stretch=l[h+te.PREV_STRETCH]!=0)):(a.mix+=(c+(l[h+te.MIX]-c)*d-a.mix)*n,o==_e.mixIn&&(a.bendDirection=l[h+te.PREV_BEND_DIRECTION],a.compress=l[h+te.PREV_COMPRESS]!=0,a.stretch=l[h+te.PREV_STRETCH]!=0))}};let zs=te;zs.ENTRIES=5;zs.PREV_TIME=-5;zs.PREV_MIX=-4;zs.PREV_BEND_DIRECTION=-3;zs.PREV_COMPRESS=-2;zs.PREV_STRETCH=-1;zs.MIX=1;zs.BEND_DIRECTION=2;zs.COMPRESS=3;zs.STRETCH=4;const de=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*de.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(s,t,e,r,n,i){s*=de.ENTRIES,this.frames[s]=t,this.frames[s+de.ROTATE]=e,this.frames[s+de.TRANSLATE]=r,this.frames[s+de.SCALE]=n,this.frames[s+de.SHEAR]=i}apply(s,t,e,r,n,i,o){const l=this.frames,a=s.transformConstraints[this.transformConstraintIndex];if(e<l[0]){const f=a.data;switch(i){case M.setup:a.rotateMix=f.rotateMix,a.translateMix=f.translateMix,a.scaleMix=f.scaleMix,a.shearMix=f.shearMix;return;case M.first:a.rotateMix+=(f.rotateMix-a.rotateMix)*n,a.translateMix+=(f.translateMix-a.translateMix)*n,a.scaleMix+=(f.scaleMix-a.scaleMix)*n,a.shearMix+=(f.shearMix-a.shearMix)*n}return}let h=0,c=0,u=0,d=0;if(e>=l[l.length-de.ENTRIES]){const f=l.length;h=l[f+de.PREV_ROTATE],c=l[f+de.PREV_TRANSLATE],u=l[f+de.PREV_SCALE],d=l[f+de.PREV_SHEAR]}else{const f=Qe.binarySearch(l,e,de.ENTRIES);h=l[f+de.PREV_ROTATE],c=l[f+de.PREV_TRANSLATE],u=l[f+de.PREV_SCALE],d=l[f+de.PREV_SHEAR];const m=l[f],g=this.getCurvePercent(f/de.ENTRIES-1,1-(e-m)/(l[f+de.PREV_TIME]-m));h+=(l[f+de.ROTATE]-h)*g,c+=(l[f+de.TRANSLATE]-c)*g,u+=(l[f+de.SCALE]-u)*g,d+=(l[f+de.SHEAR]-d)*g}if(i==M.setup){const f=a.data;a.rotateMix=f.rotateMix+(h-f.rotateMix)*n,a.translateMix=f.translateMix+(c-f.translateMix)*n,a.scaleMix=f.scaleMix+(u-f.scaleMix)*n,a.shearMix=f.shearMix+(d-f.shearMix)*n}else a.rotateMix+=(h-a.rotateMix)*n,a.translateMix+=(c-a.translateMix)*n,a.scaleMix+=(u-a.scaleMix)*n,a.shearMix+=(d-a.shearMix)*n}};let Ws=de;Ws.ENTRIES=5;Ws.PREV_TIME=-5;Ws.PREV_ROTATE=-4;Ws.PREV_TRANSLATE=-3;Ws.PREV_SCALE=-2;Ws.PREV_SHEAR=-1;Ws.ROTATE=1;Ws.TRANSLATE=2;Ws.SCALE=3;Ws.SHEAR=4;const nr=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*nr.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(s,t,e){s*=nr.ENTRIES,this.frames[s]=t,this.frames[s+nr.VALUE]=e}apply(s,t,e,r,n,i,o){const l=this.frames,a=s.pathConstraints[this.pathConstraintIndex];if(e<l[0]){switch(i){case M.setup:a.position=a.data.position;return;case M.first:a.position+=(a.data.position-a.position)*n}return}let h=0;if(e>=l[l.length-nr.ENTRIES])h=l[l.length+nr.PREV_VALUE];else{const c=Qe.binarySearch(l,e,nr.ENTRIES);h=l[c+nr.PREV_VALUE];const u=l[c],d=this.getCurvePercent(c/nr.ENTRIES-1,1-(e-u)/(l[c+nr.PREV_TIME]-u));h+=(l[c+nr.VALUE]-h)*d}i==M.setup?a.position=a.data.position+(h-a.data.position)*n:a.position+=(h-a.position)*n}};let oi=nr;oi.ENTRIES=2;oi.PREV_TIME=-2;oi.PREV_VALUE=-1;oi.VALUE=1;let UB=class on extends oi{constructor(t){super(t)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(t,e,r,n,i,o,l){const a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(r<a[0]){switch(o){case M.setup:h.spacing=h.data.spacing;return;case M.first:h.spacing+=(h.data.spacing-h.spacing)*i}return}let c=0;if(r>=a[a.length-on.ENTRIES])c=a[a.length+on.PREV_VALUE];else{const u=Qe.binarySearch(a,r,on.ENTRIES);c=a[u+on.PREV_VALUE];const d=a[u],f=this.getCurvePercent(u/on.ENTRIES-1,1-(r-d)/(a[u+on.PREV_TIME]-d));c+=(a[u+on.VALUE]-c)*f}o==M.setup?h.spacing=h.data.spacing+(c-h.data.spacing)*i:h.spacing+=(c-h.spacing)*i}};const us=class extends Ps{constructor(s){super(s),this.frames=J.newFloatArray(s*us.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(s,t,e,r){s*=us.ENTRIES,this.frames[s]=t,this.frames[s+us.ROTATE]=e,this.frames[s+us.TRANSLATE]=r}apply(s,t,e,r,n,i,o){const l=this.frames,a=s.pathConstraints[this.pathConstraintIndex];if(e<l[0]){switch(i){case M.setup:a.rotateMix=a.data.rotateMix,a.translateMix=a.data.translateMix;return;case M.first:a.rotateMix+=(a.data.rotateMix-a.rotateMix)*n,a.translateMix+=(a.data.translateMix-a.translateMix)*n}return}let h=0,c=0;if(e>=l[l.length-us.ENTRIES])h=l[l.length+us.PREV_ROTATE],c=l[l.length+us.PREV_TRANSLATE];else{const u=Qe.binarySearch(l,e,us.ENTRIES);h=l[u+us.PREV_ROTATE],c=l[u+us.PREV_TRANSLATE];const d=l[u],f=this.getCurvePercent(u/us.ENTRIES-1,1-(e-d)/(l[u+us.PREV_TIME]-d));h+=(l[u+us.ROTATE]-h)*f,c+=(l[u+us.TRANSLATE]-c)*f}i==M.setup?(a.rotateMix=a.data.rotateMix+(h-a.data.rotateMix)*n,a.translateMix=a.data.translateMix+(c-a.data.translateMix)*n):(a.rotateMix+=(h-a.rotateMix)*n,a.translateMix+=(c-a.translateMix)*n)}};let Sn=us;Sn.ENTRIES=3;Sn.PREV_TIME=-3;Sn.PREV_ROTATE=-2;Sn.PREV_TRANSLATE=-1;Sn.ROTATE=1;Sn.TRANSLATE=2;new Qe("<empty>",[],0);let DB=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (region attachment: ${e})`);const i=new Mt(e);return i.region=n,i}newMeshAttachment(t,e,r){const n=this.atlas.findRegion(r);if(n==null)throw new Error(`Region not found in atlas: ${r} (mesh attachment: ${e})`);const i=new IB(e);return i.region=n,i}newBoundingBoxAttachment(t,e){return new CB(e)}newPathAttachment(t,e){return new MB(e)}newPointAttachment(t,e){return new PB(e)}newClippingAttachment(t,e){return new RB(e)}},GB=class{constructor(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Re.Normal,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}},$B=class{constructor(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}},XB=class{constructor(t){this.name=t}},HB=class{constructor(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t}},YB=class{constructor(t){this.order=0,this.bones=new Array,this.name=t}};var ln=(s=>(s[s.Length=0]="Length",s[s.Fixed=1]="Fixed",s[s.Percent=2]="Percent",s))(ln||{});let jB=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSkin(t){if(t==null)throw new Error("skinName cannot be null.");const e=this.skins;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findEvent(t){if(t==null)throw new Error("eventDataName cannot be null.");const e=this.events;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findAnimation(t){if(t==null)throw new Error("animationName cannot be null.");const e=this.animations;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}},zB=class{constructor(t,e,r){if(this.color=new lt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(r==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}},WB=class{constructor(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,t==null)throw new Error("name cannot be null.");this.name=t}},qB=class{constructor(t){if(this.attachments=new Array,t==null)throw new Error("name cannot be null.");this.name=t}addAttachment(t,e,r){if(r==null)throw new Error("attachment cannot be null.");const n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r}getAttachment(t,e){const r=this.attachments[t];return r?r[e]:null}attachAll(t,e){let r=0;for(let n=0;n<t.slots.length;n++){const i=t.slots[n],o=i.getAttachment();if(o&&r<e.attachments.length){const l=e.attachments[r];for(const a in l){const h=l[a];if(o==h){const c=this.getAttachment(r,a);c!=null&&i.setAttachment(c);break}}}r++}}},KB=class Fi{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new jB,n=typeof t=="string"?JSON.parse(t):t,i=n.skeleton;if(i!=null&&(r.hash=i.hash,r.version=i.spine,r.width=i.width,r.height=i.height,r.fps=i.fps,r.imagesPath=i.images),n.bones)for(let o=0;o<n.bones.length;o++){const l=n.bones[o];let a=null;const h=this.getValue(l,"parent",null);if(h!=null&&(a=r.findBone(h),a==null))throw new Error(`Parent bone not found: ${h}`);const c=new GB(r.bones.length,l.name,a);c.length=this.getValue(l,"length",0)*e,c.x=this.getValue(l,"x",0)*e,c.y=this.getValue(l,"y",0)*e,c.rotation=this.getValue(l,"rotation",0),c.scaleX=this.getValue(l,"scaleX",1),c.scaleY=this.getValue(l,"scaleY",1),c.shearX=this.getValue(l,"shearX",0),c.shearY=this.getValue(l,"shearY",0),c.transformMode=Fi.transformModeFromString(this.getValue(l,"transform","normal")),r.bones.push(c)}if(n.slots)for(let o=0;o<n.slots.length;o++){const l=n.slots[o],a=l.name,h=l.bone,c=r.findBone(h);if(c==null)throw new Error(`Slot bone not found: ${h}`);const u=new zB(r.slots.length,a,c),d=this.getValue(l,"color",null);d!=null&&u.color.setFromString(d);const f=this.getValue(l,"dark",null);f!=null&&(u.darkColor=new lt(1,1,1,1),u.darkColor.setFromString(f)),u.attachmentName=this.getValue(l,"attachment",null),u.blendMode=Fi.blendModeFromString(this.getValue(l,"blend","normal")),r.slots.push(u)}if(n.ik)for(let o=0;o<n.ik.length;o++){const l=n.ik[o],a=new HB(l.name);a.order=this.getValue(l,"order",0);for(let c=0;c<l.bones.length;c++){const u=l.bones[c],d=r.findBone(u);if(d==null)throw new Error(`IK bone not found: ${u}`);a.bones.push(d)}const h=l.target;if(a.target=r.findBone(h),a.target==null)throw new Error(`IK target bone not found: ${h}`);a.bendDirection=this.getValue(l,"bendPositive",!0)?1:-1,a.mix=this.getValue(l,"mix",1),r.ikConstraints.push(a)}if(n.transform)for(let o=0;o<n.transform.length;o++){const l=n.transform[o],a=new WB(l.name);a.order=this.getValue(l,"order",0);for(let c=0;c<l.bones.length;c++){const u=l.bones[c],d=r.findBone(u);if(d==null)throw new Error(`Transform constraint bone not found: ${u}`);a.bones.push(d)}const h=l.target;if(a.target=r.findBone(h),a.target==null)throw new Error(`Transform constraint target bone not found: ${h}`);a.local=this.getValue(l,"local",!1),a.relative=this.getValue(l,"relative",!1),a.offsetRotation=this.getValue(l,"rotation",0),a.offsetX=this.getValue(l,"x",0)*e,a.offsetY=this.getValue(l,"y",0)*e,a.offsetScaleX=this.getValue(l,"scaleX",0),a.offsetScaleY=this.getValue(l,"scaleY",0),a.offsetShearY=this.getValue(l,"shearY",0),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),a.scaleMix=this.getValue(l,"scaleMix",1),a.shearMix=this.getValue(l,"shearMix",1),r.transformConstraints.push(a)}if(n.path)for(let o=0;o<n.path.length;o++){const l=n.path[o],a=new YB(l.name);a.order=this.getValue(l,"order",0);for(let c=0;c<l.bones.length;c++){const u=l.bones[c],d=r.findBone(u);if(d==null)throw new Error(`Transform constraint bone not found: ${u}`);a.bones.push(d)}const h=l.target;if(a.target=r.findSlot(h),a.target==null)throw new Error(`Path target slot not found: ${h}`);a.positionMode=Fi.positionModeFromString(this.getValue(l,"positionMode","percent")),a.spacingMode=Fi.spacingModeFromString(this.getValue(l,"spacingMode","length")),a.rotateMode=Fi.rotateModeFromString(this.getValue(l,"rotateMode","tangent")),a.offsetRotation=this.getValue(l,"rotation",0),a.position=this.getValue(l,"position",0),a.positionMode==Ve.Fixed&&(a.position*=e),a.spacing=this.getValue(l,"spacing",0),(a.spacingMode==ln.Length||a.spacingMode==ln.Fixed)&&(a.spacing*=e),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),r.pathConstraints.push(a)}if(n.skins)for(const o in n.skins){const l=n.skins[o],a=new qB(o);for(const h in l){const c=r.findSlotIndex(h);if(c==-1)throw new Error(`Slot not found: ${h}`);const u=l[h];for(const d in u){const f=this.readAttachment(u[d],a,c,d,r);f!=null&&a.addAttachment(c,d,f)}}r.skins.push(a),a.name=="default"&&(r.defaultSkin=a)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){const a=this.linkedMeshes[o],h=a.skin==null?r.defaultSkin:r.findSkin(a.skin);if(h==null)throw new Error(`Skin not found: ${a.skin}`);const c=h.getAttachment(a.slotIndex,a.parent);if(c==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.setParentMesh(c)}if(this.linkedMeshes.length=0,n.events)for(const o in n.events){const l=n.events[o],a=new XB(o);a.intValue=this.getValue(l,"int",0),a.floatValue=this.getValue(l,"float",0),a.stringValue=this.getValue(l,"string",""),a.audioPath=this.getValue(l,"audio",null),a.audioPath!=null&&(a.volume=this.getValue(l,"volume",1),a.balance=this.getValue(l,"balance",0)),r.events.push(a)}if(n.animations)for(const o in n.animations){const l=n.animations[o];this.readAnimation(l,o,r)}return r}readAttachment(t,e,r,n,i){const o=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":{const a=this.getValue(t,"path",n),h=this.attachmentLoader.newRegionAttachment(e,n,a);if(h==null)return null;h.path=a,h.x=this.getValue(t,"x",0)*o,h.y=this.getValue(t,"y",0)*o,h.scaleX=this.getValue(t,"scaleX",1),h.scaleY=this.getValue(t,"scaleY",1),h.rotation=this.getValue(t,"rotation",0),h.width=t.width*o,h.height=t.height*o;const c=this.getValue(t,"color",null);return c!=null&&h.color.setFromString(c),h}case"boundingbox":{const a=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(a==null)return null;this.readVertices(t,a,t.vertexCount<<1);const h=this.getValue(t,"color",null);return h!=null&&a.color.setFromString(h),a}case"mesh":case"linkedmesh":{const a=this.getValue(t,"path",n),h=this.attachmentLoader.newMeshAttachment(e,n,a);if(h==null)return null;h.path=a;const c=this.getValue(t,"color",null);c!=null&&h.color.setFromString(c);const u=this.getValue(t,"parent",null);if(u!=null)return h.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new ZB(h,this.getValue(t,"skin",null),r,u)),h;const d=t.uvs;return this.readVertices(t,h,d.length),h.triangles=t.triangles,h.regionUVs=new Float32Array(d),h.hullLength=this.getValue(t,"hull",0)*2,h}case"path":{const a=this.attachmentLoader.newPathAttachment(e,n);if(a==null)return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);const h=t.vertexCount;this.readVertices(t,a,h<<1);const c=J.newArray(h/3,0);for(let d=0;d<t.lengths.length;d++)c[d]=t.lengths[d]*o;a.lengths=c;const u=this.getValue(t,"color",null);return u!=null&&a.color.setFromString(u),a}case"point":{const a=this.attachmentLoader.newPointAttachment(e,n);if(a==null)return null;a.x=this.getValue(t,"x",0)*o,a.y=this.getValue(t,"y",0)*o,a.rotation=this.getValue(t,"rotation",0);const h=this.getValue(t,"color",null);return h!=null&&a.color.setFromString(h),a}case"clipping":{const a=this.attachmentLoader.newClippingAttachment(e,n);if(a==null)return null;const h=this.getValue(t,"end",null);if(h!=null){const d=i.findSlot(h);if(d==null)throw new Error(`Clipping end slot not found: ${h}`);a.endSlot=d}const c=t.vertexCount;this.readVertices(t,a,c<<1);const u=this.getValue(t,"color",null);return u!=null&&a.color.setFromString(u),a}}return null}readVertices(t,e,r){const n=this.scale;e.worldVerticesLength=r;const i=t.vertices;if(r==i.length){const a=J.toFloatArray(i);if(n!=1)for(let h=0,c=i.length;h<c;h++)a[h]*=n;e.vertices=a;return}const o=new Array,l=new Array;for(let a=0,h=i.length;a<h;){const c=i[a++];l.push(c);for(let u=a+c*4;a<u;a+=4)l.push(i[a]),o.push(i[a+1]*n),o.push(i[a+2]*n),o.push(i[a+3])}e.bones=l,e.vertices=J.toFloatArray(o)}readAnimation(t,e,r){const n=this.scale,i=new Array;let o=0;if(t.slots)for(const a in t.slots){const h=t.slots[a],c=r.findSlotIndex(a);if(c==-1)throw new Error(`Slot not found: ${a}`);for(const u in h){const d=h[u];if(u=="attachment"){const f=new NB(d.length);f.slotIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g];f.setFrame(m++,p.time,p.name)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}else if(u=="color"){const f=new js(d.length);f.slotIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g],y=new lt;y.setFromString(p.color||"ffffffff"),f.setFrame(m,p.time,y.r,y.g,y.b,y.a),this.readCurve(p,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*js.ENTRIES])}else if(u=="twoColor"){const f=new Ye(d.length);f.slotIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g],y=new lt,x=new lt;y.setFromString(p.light),x.setFromString(p.dark),f.setFrame(m,p.time,y.r,y.g,y.b,y.a,x.r,x.g,x.b),this.readCurve(p,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Ye.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${u} (${a})`)}}if(t.bones)for(const a in t.bones){const h=t.bones[a],c=r.findBoneIndex(a);if(c==-1)throw new Error(`Bone not found: ${a}`);for(const u in h){const d=h[u];if(u==="rotate"){const f=new ra(d.length);f.boneIndex=c;let m=0;for(let g=0;g<d.length;g++){const p=d[g];f.setFrame(m,p.time,p.angle),this.readCurve(p,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*ra.ENTRIES])}else if(u==="translate"||u==="scale"||u==="shear"){let f=null,m=1;u==="scale"?f=new BB(d.length):u==="shear"?f=new kB(d.length):(f=new Mr(d.length),m=n),f.boneIndex=c;let g=0;for(let p=0;p<d.length;p++){const y=d[p],x=this.getValue(y,"x",0),_=this.getValue(y,"y",0);f.setFrame(g,y.time,x*m,_*m),this.readCurve(y,f,g),g++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Mr.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${u} (${a})`)}}if(t.ik)for(const a in t.ik){const h=t.ik[a],c=r.findIkConstraint(a),u=new zs(h.length);u.ikConstraintIndex=r.ikConstraints.indexOf(c);let d=0;for(let f=0;f<h.length;f++){const m=h[f];u.setFrame(d,m.time,this.getValue(m,"mix",1),this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,u,d),d++}i.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*zs.ENTRIES])}if(t.transform)for(const a in t.transform){const h=t.transform[a],c=r.findTransformConstraint(a),u=new Ws(h.length);u.transformConstraintIndex=r.transformConstraints.indexOf(c);let d=0;for(let f=0;f<h.length;f++){const m=h[f];u.setFrame(d,m.time,this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,u,d),d++}i.push(u),o=Math.max(o,u.frames[(u.getFrameCount()-1)*Ws.ENTRIES])}if(t.paths)for(const a in t.paths){const h=t.paths[a],c=r.findPathConstraintIndex(a);if(c==-1)throw new Error(`Path constraint not found: ${a}`);const u=r.pathConstraints[c];for(const d in h){const f=h[d];if(d==="position"||d==="spacing"){let m=null,g=1;d==="spacing"?(m=new UB(f.length),(u.spacingMode==ln.Length||u.spacingMode==ln.Fixed)&&(g=n)):(m=new oi(f.length),u.positionMode==Ve.Fixed&&(g=n)),m.pathConstraintIndex=c;let p=0;for(let y=0;y<f.length;y++){const x=f[y];m.setFrame(p,x.time,this.getValue(x,d,0)*g),this.readCurve(x,m,p),p++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*oi.ENTRIES])}else if(d==="mix"){const m=new Sn(f.length);m.pathConstraintIndex=c;let g=0;for(let p=0;p<f.length;p++){const y=f[p];m.setFrame(g,y.time,this.getValue(y,"rotateMix",1),this.getValue(y,"translateMix",1)),this.readCurve(y,m,g),g++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*Sn.ENTRIES])}}}if(t.deform)for(const a in t.deform){const h=t.deform[a],c=r.findSkin(a);if(c!=null)for(const u in h){const d=h[u],f=r.findSlotIndex(u);if(f==-1)throw new Error(`Slot not found: ${d.name}`);for(const m in d){const g=d[m],p=c.getAttachment(f,m);if(p==null)throw new Error(`Deform attachment not found: ${g.name}`);const y=p.bones!=null,x=p.vertices,_=y?x.length/3*2:x.length,A=new OB(g.length);A.slotIndex=f,A.attachment=p;let b=0;for(let w=0;w<g.length;w++){const v=g[w];let R;const P=this.getValue(v,"vertices",null);if(P==null)R=y?J.newFloatArray(_):x;else{R=J.newFloatArray(_);const F=this.getValue(v,"offset",0);if(J.arrayCopy(P,0,R,F,P.length),n!=1)for(let B=F,L=B+P.length;B<L;B++)R[B]*=n;if(!y)for(let B=0;B<_;B++)R[B]+=x[B]}A.setFrame(b,v.time,R),this.readCurve(v,A,b),b++}i.push(A),o=Math.max(o,A.frames[A.getFrameCount()-1])}}}let l=t.drawOrder;if(l==null&&(l=t.draworder),l!=null){const a=new VB(l.length),h=r.slots.length;let c=0;for(let u=0;u<l.length;u++){const d=l[u];let f=null;const m=this.getValue(d,"offsets",null);if(m!=null){f=J.newArray(h,-1);const g=J.newArray(h-m.length,0);let p=0,y=0;for(let x=0;x<m.length;x++){const _=m[x],A=r.findSlotIndex(_.slot);if(A==-1)throw new Error(`Slot not found: ${_.slot}`);for(;p!=A;)g[y++]=p++;f[p+_.offset]=p++}for(;p<h;)g[y++]=p++;for(let x=h-1;x>=0;x--)f[x]==-1&&(f[x]=g[--y])}a.setFrame(c++,d.time,f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(t.events){const a=new LB(t.events.length);let h=0;for(let c=0;c<t.events.length;c++){const u=t.events[c],d=r.findEvent(u.name);if(d==null)throw new Error(`Event not found: ${u.name}`);const f=new $B(J.toSinglePrecision(u.time),d);f.intValue=this.getValue(u,"int",d.intValue),f.floatValue=this.getValue(u,"float",d.floatValue),f.stringValue=this.getValue(u,"string",d.stringValue),f.data.audioPath!=null&&(f.volume=this.getValue(u,"volume",1),f.balance=this.getValue(u,"balance",0)),a.setFrame(h++,f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Qe(e,i,o))}readCurve(t,e,r){if(t.curve){if(t.curve==="stepped")e.setStepped(r);else if(Object.prototype.toString.call(t.curve)==="[object Array]"){const n=t.curve;e.setCurve(r,n[0],n[1],n[2],n[3])}}}getValue(t,e,r){return t[e]!==void 0?t[e]:r}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ft.NORMAL;if(t=="additive")return ft.ADD;if(t=="multiply")return ft.MULTIPLY;if(t=="screen")return ft.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}static positionModeFromString(t){if(t=t.toLowerCase(),t=="fixed")return Ve.Fixed;if(t=="percent")return Ve.Percent;throw new Error(`Unknown position mode: ${t}`)}static spacingModeFromString(t){if(t=t.toLowerCase(),t=="length")return ln.Length;if(t=="fixed")return ln.Fixed;if(t=="percent")return ln.Percent;throw new Error(`Unknown position mode: ${t}`)}static rotateModeFromString(t){if(t=t.toLowerCase(),t=="tangent")return Xs.Tangent;if(t=="chain")return Xs.Chain;if(t=="chainscale")return Xs.ChainScale;throw new Error(`Unknown rotate mode: ${t}`)}static transformModeFromString(t){if(t=t.toLowerCase(),t=="normal")return Re.Normal;if(t=="onlytranslation")return Re.OnlyTranslation;if(t=="norotationorreflection")return Re.NoRotationOrReflection;if(t=="noscale")return Re.NoScale;if(t=="noscaleorreflection")return Re.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${t}`)}},ZB=class{constructor(t,e,r,n){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n}};class yb{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}const xb=class extends yb{constructor(s){super(s),this.id=xb.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVerticesOld(s,t){this.computeWorldVertices(s,0,this.worldVerticesLength,t,0,2)}computeWorldVertices(s,t,e,r,n,i){e=n+(e>>1)*i;const o=s.bone.skeleton,l=s.deform;let a=this.vertices;const h=this.bones;if(!h){l.length>0&&(a=l);const f=s.bone.matrix,m=f.tx,g=f.ty,p=f.a,y=f.c,x=f.b,_=f.d;for(let A=t,b=n;b<e;A+=2,b+=i){const w=a[A],v=a[A+1];r[b]=w*p+v*y+m,r[b+1]=w*x+v*_+g}return}let c=0,u=0;for(let f=0;f<t;f+=2){const m=h[c];c+=m+1,u+=m}const d=o.bones;if(l.length==0)for(let f=n,m=u*3;f<e;f+=i){let g=0,p=0,y=h[c++];for(y+=c;c<y;c++,m+=3){const x=d[h[c]].matrix,_=a[m],A=a[m+1],b=a[m+2];g+=(_*x.a+A*x.c+x.tx)*b,p+=(_*x.b+A*x.d+x.ty)*b}r[f]=g,r[f+1]=p}else{const f=l;for(let m=n,g=u*3,p=u<<1;m<e;m+=i){let y=0,x=0,_=h[c++];for(_+=c;c<_;c++,g+=3,p+=2){const A=d[h[c]].matrix,b=a[g]+f[p],w=a[g+1]+f[p+1],v=a[g+2];y+=(b*A.a+w*A.c+A.tx)*v,x+=(b*A.b+w*A.d+A.ty)*v}r[m]=y,r[m+1]=x}}}copyTo(s){this.bones?(s.bones=new Array(this.bones.length),J.arrayCopy(this.bones,0,s.bones,0,this.bones.length)):s.bones=null,this.vertices&&(s.vertices=J.newFloatArray(this.vertices.length),J.arrayCopy(this.vertices,0,s.vertices,0,this.vertices.length)),s.worldVerticesLength=this.worldVerticesLength,s.timelineAttachment=this.timelineAttachment}};let Pn=xb;Pn.nextID=0;class Tf extends Pn{constructor(t){super(t),this.type=Bt.BoundingBox,this.color=new lt(1,1,1,1)}copy(){const t=new Tf(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Cf extends Pn{constructor(t){super(t),this.type=Bt.Clipping,this.endSlot=null,this.color=new lt(.2275,.2275,.8078,1)}copy(){const t=new Cf(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class ao extends Pn{constructor(t,e){super(t),this.type=Bt.Mesh,this.region=null,this.triangles=[],this.color=new lt(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new lt(0,0,0,0),this.path=e}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const t=new ao(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),J.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),J.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),J.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,r,n,i,o){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,r,n,i,o)}newLinkedMesh(){const t=new ao(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t}}class Rf extends Pn{constructor(t){super(t),this.type=Bt.Path,this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new lt(1,1,1,1)}copy(){const t=new Rf(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),J.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class If extends Pn{constructor(t){super(t),this.type=Bt.Point,this.x=0,this.y=0,this.rotation=0,this.color=new lt(.38,.94,0,1)}computeWorldPosition(t,e){const r=t.matrix;return e.x=this.x*r.a+this.y*r.c+t.worldX,e.y=this.x*r.b+this.y*r.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,r=xt.cosDeg(this.rotation),n=xt.sinDeg(this.rotation),i=r*e.a+n*e.c,o=r*e.b+n*e.d;return Math.atan2(o,i)*xt.radDeg}copy(){const t=new If(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}const _b=class extends yb{constructor(s,t){super(s),this.type=Bt.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new lt(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=J.newFloatArray(8),this.uvs=J.newFloatArray(8),this.tempColor=new lt(1,1,1,1),this.path=t}updateRegion(){if(!this.region)throw new Error("Region not set.");const s=this.region,t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,i=r+this.region.width*t,o=n+this.region.height*e,l=this.rotation*Math.PI/180,a=Math.cos(l),h=Math.sin(l),c=this.x,u=this.y,d=r*a+c,f=r*h,m=n*a+u,g=n*h,p=i*a+c,y=i*h,x=o*a+u,_=o*h,A=this.offset;A[0]=d-g,A[1]=m+f,A[2]=d-_,A[3]=x+f,A[4]=p-_,A[5]=x+y,A[6]=p-g,A[7]=m+y;const b=this.uvs;s.degrees==90?(b[2]=s.u,b[3]=s.v2,b[4]=s.u,b[5]=s.v,b[6]=s.u2,b[7]=s.v,b[0]=s.u2,b[1]=s.v2):(b[0]=s.u,b[1]=s.v2,b[2]=s.u,b[3]=s.v,b[4]=s.u2,b[5]=s.v,b[6]=s.u2,b[7]=s.v2)}computeWorldVertices(s,t,e,r){this.sequence!=null&&this.sequence.apply(s,this);const n=s.bone,i=this.offset,o=n.matrix,l=o.tx,a=o.ty,h=o.a,c=o.c,u=o.b,d=o.d;let f=0,m=0;f=i[0],m=i[1],t[e]=f*h+m*c+l,t[e+1]=f*u+m*d+a,e+=r,f=i[2],m=i[3],t[e]=f*h+m*c+l,t[e+1]=f*u+m*d+a,e+=r,f=i[4],m=i[5],t[e]=f*h+m*c+l,t[e+1]=f*u+m*d+a,e+=r,f=i[6],m=i[7],t[e]=f*h+m*c+l,t[e+1]=f*u+m*d+a}copy(){const s=new _b(this.name,this.path);return s.region=this.region,s.rendererObject=this.rendererObject,s.x=this.x,s.y=this.y,s.scaleX=this.scaleX,s.scaleY=this.scaleY,s.rotation=this.rotation,s.width=this.width,s.height=this.height,J.arrayCopy(this.uvs,0,s.uvs,0,8),J.arrayCopy(this.offset,0,s.offset,0,8),s.color.setFromColor(this.color),s.sequence=this.sequence!=null?this.sequence.copy():null,s}};let Yt=_b;Yt.X1=0;Yt.Y1=1;Yt.C1R=2;Yt.C1G=3;Yt.C1B=4;Yt.C1A=5;Yt.U1=6;Yt.V1=7;Yt.X2=8;Yt.Y2=9;Yt.C2R=10;Yt.C2G=11;Yt.C2B=12;Yt.C2A=13;Yt.U2=14;Yt.V2=15;Yt.X3=16;Yt.Y3=17;Yt.C3R=18;Yt.C3G=19;Yt.C3B=20;Yt.C3A=21;Yt.U3=22;Yt.V3=23;Yt.X4=24;Yt.Y4=25;Yt.C4R=26;Yt.C4G=27;Yt.C4B=28;Yt.C4A=29;Yt.U4=30;Yt.V4=31;const ml=class{constructor(s){this.id=ml.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(s)}copy(){const s=new ml(this.regions.length);return J.arrayCopy(this.regions,0,s.regions,0,this.regions.length),s.start=this.start,s.digits=this.digits,s.setupIndex=this.setupIndex,s}apply(s,t){let e=s.sequenceIndex;e==-1&&(e=this.setupIndex),e>=this.regions.length&&(e=this.regions.length-1);const r=this.regions[e];t.region!=r&&(t.region=r)}getPath(s,t){let e=s;const r=(this.start+t).toString();for(let n=this.digits-r.length;n>0;n--)e+="0";return e+=r,e}static nextID(){return ml._nextID++}};let Mf=ml;Mf._nextID=0;var Gr=(s=>(s[s.hold=0]="hold",s[s.once=1]="once",s[s.loop=2]="loop",s[s.pingpong=3]="pingpong",s[s.onceReverse=4]="onceReverse",s[s.loopReverse=5]="loopReverse",s[s.pingpongReverse=6]="pingpongReverse",s))(Gr||{});const Ab=[0,1,2,3,4,5,6];class Pf{constructor(t,e,r){if(this.timelines=[],this.timelineIds=new n2,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=r}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(let e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,r,n,i,o,l,a){if(!t)throw new Error("skeleton cannot be null.");n&&this.duration!=0&&(r%=this.duration,e>0&&(e%=this.duration));const h=this.timelines;for(let c=0,u=h.length;c<u;c++)h[c].apply(t,e,r,i,o,l,a)}}const jt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19};class Be{constructor(t,e){this.propertyIds=e,this.frames=J.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){const r=t.length;for(let n=1;n<r;n++)if(t[n]>e)return n-1;return r-1}static search(t,e,r){const n=t.length;for(let i=r;i<n;i+=r)if(t[i]>e)return i-r;return n-r}}class Br extends Be{constructor(t,e,r){super(t,r),this.curves=J.newFloatArray(t+e*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){const e=this.getFrameCount()+t*18;if(this.curves.length>e){const r=J.newFloatArray(e);J.arrayCopy(this.curves,0,r,0,e),this.curves=r}}setBezier(t,e,r,n,i,o,l,a,h,c,u){const d=this.curves;let f=this.getFrameCount()+t*18;r==0&&(d[e]=2+f);const m=(n-o*2+a)*.03,g=(i-l*2+h)*.03,p=((o-a)*3-n+c)*.006,y=((l-h)*3-i+u)*.006;let x=m*2+p,_=g*2+y,A=(o-n)*.3+m+p*.16666667,b=(l-i)*.3+g+y*.16666667,w=n+A,v=i+b;for(let R=f+18;f<R;f+=2)d[f]=w,d[f+1]=v,A+=x,b+=_,x+=p,_+=y,w+=A,v+=b}getBezierValue(t,e,r,n){const i=this.curves;if(i[n]>t){const h=this.frames[e],c=this.frames[e+r];return c+(t-h)/(i[n]-h)*(i[n+1]-c)}const o=n+18;for(n+=2;n<o;n+=2)if(i[n]>=t){const h=i[n-2],c=i[n-1];return c+(t-h)/(i[n]-h)*(i[n+1]-c)}e+=this.getFrameEntries();const l=i[o-2],a=i[o-1];return a+(t-l)/(this.frames[e]-l)*(this.frames[e+r]-a)}}class kr extends Br{constructor(t,e,r){super(t,e,[r])}getFrameEntries(){return 2}setFrame(t,e,r){t<<=1,this.frames[t]=e,this.frames[t+1]=r}getCurveValue(t){const e=this.frames;let r=e.length-2;for(let i=2;i<=r;i+=2)if(e[i]>t){r=i-2;break}const n=this.curves[r>>1];switch(n){case 0:const i=e[r],o=e[r+1];return o+(t-i)/(e[r+2]-i)*(e[r+2+1]-o);case 1:return e[r+1]}return this.getBezierValue(t,r,1,n-2)}}class Ff extends Br{constructor(t,e,r,n){super(t,e,[r,n])}getFrameEntries(){return 3}setFrame(t,e,r,n){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n}}class bb extends kr{constructor(t,e,r){super(t,e,`${jt.rotate}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.rotation=a.data.rotation;return;case M.first:a.rotation+=(a.data.rotation-a.rotation)*i}return}let c=this.getCurveValue(r);switch(o){case M.setup:a.rotation=a.data.rotation+c*i;break;case M.first:case M.replace:c+=a.data.rotation-a.rotation;case M.add:a.rotation+=c*i}}}class vb extends Ff{constructor(t,e,r){super(t,e,`${jt.x}|${r}`,`${jt.y}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.x=a.data.x,a.y=a.data.y;return;case M.first:a.x+=(a.data.x-a.x)*i,a.y+=(a.data.y-a.y)*i}return}let c=0,u=0;const d=Be.search(h,r,3),f=this.curves[d/3];switch(f){case 0:const m=h[d];c=h[d+1],u=h[d+2];const g=(r-m)/(h[d+3]-m);c+=(h[d+3+1]-c)*g,u+=(h[d+3+2]-u)*g;break;case 1:c=h[d+1],u=h[d+2];break;default:c=this.getBezierValue(r,d,1,f-2),u=this.getBezierValue(r,d,2,f+18-2)}switch(o){case M.setup:a.x=a.data.x+c*i,a.y=a.data.y+u*i;break;case M.first:case M.replace:a.x+=(a.data.x+c-a.x)*i,a.y+=(a.data.y+u-a.y)*i;break;case M.add:a.x+=c*i,a.y+=u*i}}}class wb extends kr{constructor(t,e,r){super(t,e,`${jt.x}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.x=a.data.x;return;case M.first:a.x+=(a.data.x-a.x)*i}return}const c=this.getCurveValue(r);switch(o){case M.setup:a.x=a.data.x+c*i;break;case M.first:case M.replace:a.x+=(a.data.x+c-a.x)*i;break;case M.add:a.x+=c*i}}}class Eb extends kr{constructor(t,e,r){super(t,e,`${jt.y}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.y=a.data.y;return;case M.first:a.y+=(a.data.y-a.y)*i}return}const c=this.getCurveValue(r);switch(o){case M.setup:a.y=a.data.y+c*i;break;case M.first:case M.replace:a.y+=(a.data.y+c-a.y)*i;break;case M.add:a.y+=c*i}}}class Sb extends Ff{constructor(t,e,r){super(t,e,`${jt.scaleX}|${r}`,`${jt.scaleY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.scaleX=a.data.scaleX,a.scaleY=a.data.scaleY;return;case M.first:a.scaleX+=(a.data.scaleX-a.scaleX)*i,a.scaleY+=(a.data.scaleY-a.scaleY)*i}return}let c,u;const d=Be.search(h,r,3),f=this.curves[d/3];switch(f){case 0:const m=h[d];c=h[d+1],u=h[d+2];const g=(r-m)/(h[d+3]-m);c+=(h[d+3+1]-c)*g,u+=(h[d+3+2]-u)*g;break;case 1:c=h[d+1],u=h[d+2];break;default:c=this.getBezierValue(r,d,1,f-2),u=this.getBezierValue(r,d,2,f+18-2)}if(c*=a.data.scaleX,u*=a.data.scaleY,i==1)o==M.add?(a.scaleX+=c-a.data.scaleX,a.scaleY+=u-a.data.scaleY):(a.scaleX=c,a.scaleY=u);else{let m=0,g=0;if(l==_e.mixOut)switch(o){case M.setup:m=a.data.scaleX,g=a.data.scaleY,a.scaleX=m+(Math.abs(c)*xt.signum(m)-m)*i,a.scaleY=g+(Math.abs(u)*xt.signum(g)-g)*i;break;case M.first:case M.replace:m=a.scaleX,g=a.scaleY,a.scaleX=m+(Math.abs(c)*xt.signum(m)-m)*i,a.scaleY=g+(Math.abs(u)*xt.signum(g)-g)*i;break;case M.add:a.scaleX+=(c-a.data.scaleX)*i,a.scaleY+=(u-a.data.scaleY)*i}else switch(o){case M.setup:m=Math.abs(a.data.scaleX)*xt.signum(c),g=Math.abs(a.data.scaleY)*xt.signum(u),a.scaleX=m+(c-m)*i,a.scaleY=g+(u-g)*i;break;case M.first:case M.replace:m=Math.abs(a.scaleX)*xt.signum(c),g=Math.abs(a.scaleY)*xt.signum(u),a.scaleX=m+(c-m)*i,a.scaleY=g+(u-g)*i;break;case M.add:a.scaleX+=(c-a.data.scaleX)*i,a.scaleY+=(u-a.data.scaleY)*i}}}}class Tb extends kr{constructor(t,e,r){super(t,e,`${jt.scaleX}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.scaleX=a.data.scaleX;return;case M.first:a.scaleX+=(a.data.scaleX-a.scaleX)*i}return}const c=this.getCurveValue(r)*a.data.scaleX;if(i==1)o==M.add?a.scaleX+=c-a.data.scaleX:a.scaleX=c;else{let u=0;if(l==_e.mixOut)switch(o){case M.setup:u=a.data.scaleX,a.scaleX=u+(Math.abs(c)*xt.signum(u)-u)*i;break;case M.first:case M.replace:u=a.scaleX,a.scaleX=u+(Math.abs(c)*xt.signum(u)-u)*i;break;case M.add:a.scaleX+=(c-a.data.scaleX)*i}else switch(o){case M.setup:u=Math.abs(a.data.scaleX)*xt.signum(c),a.scaleX=u+(c-u)*i;break;case M.first:case M.replace:u=Math.abs(a.scaleX)*xt.signum(c),a.scaleX=u+(c-u)*i;break;case M.add:a.scaleX+=(c-a.data.scaleX)*i}}}}class Cb extends kr{constructor(t,e,r){super(t,e,`${jt.scaleY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.scaleY=a.data.scaleY;return;case M.first:a.scaleY+=(a.data.scaleY-a.scaleY)*i}return}const c=this.getCurveValue(r)*a.data.scaleY;if(i==1)o==M.add?a.scaleY+=c-a.data.scaleY:a.scaleY=c;else{let u=0;if(l==_e.mixOut)switch(o){case M.setup:u=a.data.scaleY,a.scaleY=u+(Math.abs(c)*xt.signum(u)-u)*i;break;case M.first:case M.replace:u=a.scaleY,a.scaleY=u+(Math.abs(c)*xt.signum(u)-u)*i;break;case M.add:a.scaleY+=(c-a.data.scaleY)*i}else switch(o){case M.setup:u=Math.abs(a.data.scaleY)*xt.signum(c),a.scaleY=u+(c-u)*i;break;case M.first:case M.replace:u=Math.abs(a.scaleY)*xt.signum(c),a.scaleY=u+(c-u)*i;break;case M.add:a.scaleY+=(c-a.data.scaleY)*i}}}}class Rb extends Ff{constructor(t,e,r){super(t,e,`${jt.shearX}|${r}`,`${jt.shearY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.shearX=a.data.shearX,a.shearY=a.data.shearY;return;case M.first:a.shearX+=(a.data.shearX-a.shearX)*i,a.shearY+=(a.data.shearY-a.shearY)*i}return}let c=0,u=0;const d=Be.search(h,r,3),f=this.curves[d/3];switch(f){case 0:const m=h[d];c=h[d+1],u=h[d+2];const g=(r-m)/(h[d+3]-m);c+=(h[d+3+1]-c)*g,u+=(h[d+3+2]-u)*g;break;case 1:c=h[d+1],u=h[d+2];break;default:c=this.getBezierValue(r,d,1,f-2),u=this.getBezierValue(r,d,2,f+18-2)}switch(o){case M.setup:a.shearX=a.data.shearX+c*i,a.shearY=a.data.shearY+u*i;break;case M.first:case M.replace:a.shearX+=(a.data.shearX+c-a.shearX)*i,a.shearY+=(a.data.shearY+u-a.shearY)*i;break;case M.add:a.shearX+=c*i,a.shearY+=u*i}}}class Ib extends kr{constructor(t,e,r){super(t,e,`${jt.shearX}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.shearX=a.data.shearX;return;case M.first:a.shearX+=(a.data.shearX-a.shearX)*i}return}const c=this.getCurveValue(r);switch(o){case M.setup:a.shearX=a.data.shearX+c*i;break;case M.first:case M.replace:a.shearX+=(a.data.shearX+c-a.shearX)*i;break;case M.add:a.shearX+=c*i}}}class Mb extends kr{constructor(t,e,r){super(t,e,`${jt.shearY}|${r}`),this.boneIndex=0,this.boneIndex=r}apply(t,e,r,n,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.shearY=a.data.shearY;return;case M.first:a.shearY+=(a.data.shearY-a.shearY)*i}return}const c=this.getCurveValue(r);switch(o){case M.setup:a.shearY=a.data.shearY+c*i;break;case M.first:case M.replace:a.shearY+=(a.data.shearY+c-a.shearY)*i;break;case M.add:a.shearY+=c*i}}}class Pb extends Br{constructor(t,e,r){super(t,e,[`${jt.rgb}|${r}`,`${jt.alpha}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 5}setFrame(t,e,r,n,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i,this.frames[t+4]=o}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,c=a.color;if(r<h[0]){const y=a.data.color;switch(o){case M.setup:c.setFromColor(y);return;case M.first:c.add((y.r-c.r)*i,(y.g-c.g)*i,(y.b-c.b)*i,(y.a-c.a)*i)}return}let u=0,d=0,f=0,m=0;const g=Be.search(h,r,5),p=this.curves[g/5];switch(p){case 0:const y=h[g];u=h[g+1],d=h[g+2],f=h[g+3],m=h[g+4];const x=(r-y)/(h[g+5]-y);u+=(h[g+5+1]-u)*x,d+=(h[g+5+2]-d)*x,f+=(h[g+5+3]-f)*x,m+=(h[g+5+4]-m)*x;break;case 1:u=h[g+1],d=h[g+2],f=h[g+3],m=h[g+4];break;default:u=this.getBezierValue(r,g,1,p-2),d=this.getBezierValue(r,g,2,p+18-2),f=this.getBezierValue(r,g,3,p+18*2-2),m=this.getBezierValue(r,g,4,p+18*3-2)}i==1?c.set(u,d,f,m):(o==M.setup&&c.setFromColor(a.data.color),c.add((u-c.r)*i,(d-c.g)*i,(f-c.b)*i,(m-c.a)*i))}}class Fb extends Br{constructor(t,e,r){super(t,e,[`${jt.rgb}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 4}setFrame(t,e,r,n,i){t<<=2,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,c=a.color;if(r<h[0]){const p=a.data.color;switch(o){case M.setup:c.r=p.r,c.g=p.g,c.b=p.b;return;case M.first:c.r+=(p.r-c.r)*i,c.g+=(p.g-c.g)*i,c.b+=(p.b-c.b)*i}return}let u=0,d=0,f=0;const m=Be.search(h,r,4),g=this.curves[m>>2];switch(g){case 0:const p=h[m];u=h[m+1],d=h[m+2],f=h[m+3];const y=(r-p)/(h[m+4]-p);u+=(h[m+4+1]-u)*y,d+=(h[m+4+2]-d)*y,f+=(h[m+4+3]-f)*y;break;case 1:u=h[m+1],d=h[m+2],f=h[m+3];break;default:u=this.getBezierValue(r,m,1,g-2),d=this.getBezierValue(r,m,2,g+18-2),f=this.getBezierValue(r,m,3,g+18*2-2)}if(i==1)c.r=u,c.g=d,c.b=f;else{if(o==M.setup){const p=a.data.color;c.r=p.r,c.g=p.g,c.b=p.b}c.r+=(u-c.r)*i,c.g+=(d-c.g)*i,c.b+=(f-c.b)*i}}}class Bb extends kr{constructor(t,e,r){super(t,e,`${jt.alpha}|${r}`),this.slotIndex=0,this.slotIndex=r}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.color;if(r<this.frames[0]){const u=a.data.color;switch(o){case M.setup:h.a=u.a;return;case M.first:h.a+=(u.a-h.a)*i}return}const c=this.getCurveValue(r);i==1?h.a=c:(o==M.setup&&(h.a=a.data.color.a),h.a+=(c-h.a)*i)}}class kb extends Br{constructor(t,e,r){super(t,e,[`${jt.rgb}|${r}`,`${jt.alpha}|${r}`,`${jt.rgb2}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 8}setFrame(t,e,r,n,i,o,l,a,h){t<<=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i,this.frames[t+4]=o,this.frames[t+5]=l,this.frames[t+6]=a,this.frames[t+7]=h}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,c=a.color,u=a.darkColor;if(r<h[0]){const b=a.data.color,w=a.data.darkColor;switch(o){case M.setup:c.setFromColor(b),u.r=w.r,u.g=w.g,u.b=w.b;return;case M.first:c.add((b.r-c.r)*i,(b.g-c.g)*i,(b.b-c.b)*i,(b.a-c.a)*i),u.r+=(w.r-u.r)*i,u.g+=(w.g-u.g)*i,u.b+=(w.b-u.b)*i}return}let d=0,f=0,m=0,g=0,p=0,y=0,x=0;const _=Be.search(h,r,8),A=this.curves[_>>3];switch(A){case 0:const b=h[_];d=h[_+1],f=h[_+2],m=h[_+3],g=h[_+4],p=h[_+5],y=h[_+6],x=h[_+7];const w=(r-b)/(h[_+8]-b);d+=(h[_+8+1]-d)*w,f+=(h[_+8+2]-f)*w,m+=(h[_+8+3]-m)*w,g+=(h[_+8+4]-g)*w,p+=(h[_+8+5]-p)*w,y+=(h[_+8+6]-y)*w,x+=(h[_+8+7]-x)*w;break;case 1:d=h[_+1],f=h[_+2],m=h[_+3],g=h[_+4],p=h[_+5],y=h[_+6],x=h[_+7];break;default:d=this.getBezierValue(r,_,1,A-2),f=this.getBezierValue(r,_,2,A+18-2),m=this.getBezierValue(r,_,3,A+18*2-2),g=this.getBezierValue(r,_,4,A+18*3-2),p=this.getBezierValue(r,_,5,A+18*4-2),y=this.getBezierValue(r,_,6,A+18*5-2),x=this.getBezierValue(r,_,7,A+18*6-2)}if(i==1)c.set(d,f,m,g),u.r=p,u.g=y,u.b=x;else{if(o==M.setup){c.setFromColor(a.data.color);const b=a.data.darkColor;u.r=b.r,u.g=b.g,u.b=b.b}c.add((d-c.r)*i,(f-c.g)*i,(m-c.b)*i,(g-c.a)*i),u.r+=(p-u.r)*i,u.g+=(y-u.g)*i,u.b+=(x-u.b)*i}}}class Nb extends Br{constructor(t,e,r){super(t,e,[`${jt.rgb}|${r}`,`${jt.rgb2}|${r}`]),this.slotIndex=0,this.slotIndex=r}getFrameEntries(){return 7}setFrame(t,e,r,n,i,o,l,a){t*=7,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i,this.frames[t+4]=o,this.frames[t+5]=l,this.frames[t+6]=a}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=this.frames,c=a.color,u=a.darkColor;if(r<h[0]){const A=a.data.color,b=a.data.darkColor;switch(o){case M.setup:c.r=A.r,c.g=A.g,c.b=A.b,u.r=b.r,u.g=b.g,u.b=b.b;return;case M.first:c.r+=(A.r-c.r)*i,c.g+=(A.g-c.g)*i,c.b+=(A.b-c.b)*i,u.r+=(b.r-u.r)*i,u.g+=(b.g-u.g)*i,u.b+=(b.b-u.b)*i}return}let d=0,f=0,m=0,g=0,p=0,y=0;const x=Be.search(h,r,7),_=this.curves[x/7];switch(_){case 0:const A=h[x];d=h[x+1],f=h[x+2],m=h[x+3],g=h[x+4],p=h[x+5],y=h[x+6];const b=(r-A)/(h[x+7]-A);d+=(h[x+7+1]-d)*b,f+=(h[x+7+2]-f)*b,m+=(h[x+7+3]-m)*b,g+=(h[x+7+4]-g)*b,p+=(h[x+7+5]-p)*b,y+=(h[x+7+6]-y)*b;break;case 1:d=h[x+1],f=h[x+2],m=h[x+3],g=h[x+4],p=h[x+5],y=h[x+6];break;default:d=this.getBezierValue(r,x,1,_-2),f=this.getBezierValue(r,x,2,_+18-2),m=this.getBezierValue(r,x,3,_+18*2-2),g=this.getBezierValue(r,x,4,_+18*3-2),p=this.getBezierValue(r,x,5,_+18*4-2),y=this.getBezierValue(r,x,6,_+18*5-2)}if(i==1)c.r=d,c.g=f,c.b=m,u.r=g,u.g=p,u.b=y;else{if(o==M.setup){const A=a.data.color,b=a.data.darkColor;c.r=A.r,c.g=A.g,c.b=A.b,u.r=b.r,u.g=b.g,u.b=b.b}c.r+=(d-c.r)*i,c.g+=(f-c.g)*i,c.b+=(m-c.b)*i,u.r+=(g-u.r)*i,u.g+=(p-u.g)*i,u.b+=(y-u.b)*i}}}class Ob extends Be{constructor(t,e){super(t,[`${jt.attachment}|${e}`]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(a.bone.active){if(l==_e.mixOut){o==M.setup&&this.setAttachment(t,a,a.data.attachmentName);return}if(r<this.frames[0]){(o==M.setup||o==M.first)&&this.setAttachment(t,a,a.data.attachmentName);return}this.setAttachment(t,a,this.attachmentNames[Be.search1(this.frames,r)])}}setAttachment(t,e,r){e.setAttachment(r?t.getAttachment(this.slotIndex,r):null)}}class Lb extends Br{constructor(t,e,r,n){super(t,e,[`${jt.deform}|${r}|${n.id}`]),this.slotIndex=0,this.slotIndex=r,this.attachment=n,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,r){this.frames[t]=e,this.vertices[t]=r}setBezier(t,e,r,n,i,o,l,a,h,c,u){const d=this.curves;let f=this.getFrameCount()+t*18;r==0&&(d[e]=2+f);const m=(n-o*2+a)*.03,g=h*.03-l*.06,p=((o-a)*3-n+c)*.006,y=(l-h+.33333333)*.018;let x=m*2+p,_=g*2+y,A=(o-n)*.3+m+p*.16666667,b=l*.3+g+y*.16666667,w=n+A,v=b;for(let R=f+18;f<R;f+=2)d[f]=w,d[f+1]=v,A+=x,b+=_,x+=p,_+=y,w+=A,v+=b}getCurvePercent(t,e){const r=this.curves;let n=r[e];switch(n){case 0:const a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(n-=2,r[n]>t){const a=this.frames[e];return r[n+1]*(t-a)/(r[n]-a)}const i=n+18;for(n+=2;n<i;n+=2)if(r[n]>=t){const a=r[n-2],h=r[n-1];return h+(t-a)/(r[n]-a)*(r[n+1]-h)}const o=r[i-2],l=r[i-1];return l+(1-l)*(t-o)/(this.frames[e+this.getFrameEntries()]-o)}apply(t,e,r,n,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const h=a.getAttachment();if(!h||!(h instanceof Pn)||h.timelineAttachment!=this.attachment)return;const c=a.deform;c.length==0&&(o=M.setup);const u=this.vertices,d=u[0].length,f=this.frames;if(r<f[0]){switch(o){case M.setup:c.length=0;return;case M.first:if(i==1){c.length=0;return}c.length=d;const x=h;if(x.bones){i=1-i;for(let _=0;_<d;_++)c[_]*=i}else{const _=x.vertices;for(let A=0;A<d;A++)c[A]+=(_[A]-c[A])*i}}return}if(c.length=d,r>=f[f.length-1]){const x=u[f.length-1];if(i==1)if(o==M.add){const _=h;if(_.bones)for(let A=0;A<d;A++)c[A]+=x[A];else{const A=_.vertices;for(let b=0;b<d;b++)c[b]+=x[b]-A[b]}}else J.arrayCopy(x,0,c,0,d);else switch(o){case M.setup:{const A=h;if(A.bones)for(let b=0;b<d;b++)c[b]=x[b]*i;else{const b=A.vertices;for(let w=0;w<d;w++){const v=b[w];c[w]=v+(x[w]-v)*i}}break}case M.first:case M.replace:for(let A=0;A<d;A++)c[A]+=(x[A]-c[A])*i;break;case M.add:const _=h;if(_.bones)for(let A=0;A<d;A++)c[A]+=x[A]*i;else{const A=_.vertices;for(let b=0;b<d;b++)c[b]+=(x[b]-A[b])*i}}return}const m=Be.search1(f,r),g=this.getCurvePercent(r,m),p=u[m],y=u[m+1];if(i==1)if(o==M.add){const x=h;if(x.bones)for(let _=0;_<d;_++){const A=p[_];c[_]+=A+(y[_]-A)*g}else{const _=x.vertices;for(let A=0;A<d;A++){const b=p[A];c[A]+=b+(y[A]-b)*g-_[A]}}}else for(let x=0;x<d;x++){const _=p[x];c[x]=_+(y[x]-_)*g}else switch(o){case M.setup:{const _=h;if(_.bones)for(let A=0;A<d;A++){const b=p[A];c[A]=(b+(y[A]-b)*g)*i}else{const A=_.vertices;for(let b=0;b<d;b++){const w=p[b],v=A[b];c[b]=v+(w+(y[b]-w)*g-v)*i}}break}case M.first:case M.replace:for(let _=0;_<d;_++){const A=p[_];c[_]+=(A+(y[_]-A)*g-c[_])*i}break;case M.add:const x=h;if(x.bones)for(let _=0;_<d;_++){const A=p[_];c[_]+=(A+(y[_]-A)*g)*i}else{const _=x.vertices;for(let A=0;A<d;A++){const b=p[A];c[A]+=(b+(y[A]-b)*g-_[A])*i}}}}}const Vb=class extends Be{constructor(s){super(s,Vb.propertyIds),this.events=new Array(s)}getFrameCount(){return this.frames.length}setFrame(s,t){this.frames[s]=t.time,this.events[s]=t}apply(s,t,e,r,n,i,o){if(!r)return;const l=this.frames,a=this.frames.length;if(t>e)this.apply(s,t,Number.MAX_VALUE,r,n,i,o),t=-1;else if(t>=l[a-1])return;if(e<l[0])return;let h=0;if(t<l[0])h=0;else{h=Be.search1(l,t)+1;const c=l[h];for(;h>0&&l[h-1]==c;)h--}for(;h<a&&e>=l[h];h++)r.push(this.events[h])}};let Bf=Vb;Bf.propertyIds=[`${jt.event}`];const Ub=class extends Be{constructor(s){super(s,Ub.propertyIds),this.drawOrders=new Array(s)}getFrameCount(){return this.frames.length}setFrame(s,t,e){this.frames[s]=t,this.drawOrders[s]=e}apply(s,t,e,r,n,i,o){if(o==_e.mixOut){i==M.setup&&J.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length);return}if(e<this.frames[0]){(i==M.setup||i==M.first)&&J.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length);return}const l=Be.search1(this.frames,e),a=this.drawOrders[l];if(!a)J.arrayCopy(s.slots,0,s.drawOrder,0,s.slots.length);else{const h=s.drawOrder,c=s.slots;for(let u=0,d=a.length;u<d;u++)h[u]=c[a[u]]}}};let kf=Ub;kf.propertyIds=[`${jt.drawOrder}`];class Db extends Br{constructor(t,e,r){super(t,e,[`${jt.ikConstraint}|${r}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=r}getFrameEntries(){return 6}setFrame(t,e,r,n,i,o,l){t*=6,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=n,this.frames[t+3]=i,this.frames[t+4]=o?1:0,this.frames[t+5]=l?1:0}apply(t,e,r,n,i,o,l){const a=t.ikConstraints[this.ikConstraintIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;return;case M.first:a.mix+=(a.data.mix-a.mix)*i,a.softness+=(a.data.softness-a.softness)*i,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}let c=0,u=0;const d=Be.search(h,r,6),f=this.curves[d/6];switch(f){case 0:const m=h[d];c=h[d+1],u=h[d+2];const g=(r-m)/(h[d+6]-m);c+=(h[d+6+1]-c)*g,u+=(h[d+6+2]-u)*g;break;case 1:c=h[d+1],u=h[d+2];break;default:c=this.getBezierValue(r,d,1,f-2),u=this.getBezierValue(r,d,2,f+18-2)}o==M.setup?(a.mix=a.data.mix+(c-a.data.mix)*i,a.softness=a.data.softness+(u-a.data.softness)*i,l==_e.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=h[d+3],a.compress=h[d+4]!=0,a.stretch=h[d+5]!=0)):(a.mix+=(c-a.mix)*i,a.softness+=(u-a.softness)*i,l==_e.mixIn&&(a.bendDirection=h[d+3],a.compress=h[d+4]!=0,a.stretch=h[d+5]!=0))}}class Gb extends Br{constructor(t,e,r){super(t,e,[`${jt.transformConstraint}|${r}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=r}getFrameEntries(){return 7}setFrame(t,e,r,n,i,o,l,a){const h=this.frames;t*=7,h[t]=e,h[t+1]=r,h[t+2]=n,h[t+3]=i,h[t+4]=o,h[t+5]=l,h[t+6]=a}apply(t,e,r,n,i,o,l){const a=t.transformConstraints[this.transformConstraintIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){const x=a.data;switch(o){case M.setup:a.mixRotate=x.mixRotate,a.mixX=x.mixX,a.mixY=x.mixY,a.mixScaleX=x.mixScaleX,a.mixScaleY=x.mixScaleY,a.mixShearY=x.mixShearY;return;case M.first:a.mixRotate+=(x.mixRotate-a.mixRotate)*i,a.mixX+=(x.mixX-a.mixX)*i,a.mixY+=(x.mixY-a.mixY)*i,a.mixScaleX+=(x.mixScaleX-a.mixScaleX)*i,a.mixScaleY+=(x.mixScaleY-a.mixScaleY)*i,a.mixShearY+=(x.mixShearY-a.mixShearY)*i}return}let c,u,d,f,m,g;const p=Be.search(h,r,7),y=this.curves[p/7];switch(y){case 0:const x=h[p];c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4],m=h[p+5],g=h[p+6];const _=(r-x)/(h[p+7]-x);c+=(h[p+7+1]-c)*_,u+=(h[p+7+2]-u)*_,d+=(h[p+7+3]-d)*_,f+=(h[p+7+4]-f)*_,m+=(h[p+7+5]-m)*_,g+=(h[p+7+6]-g)*_;break;case 1:c=h[p+1],u=h[p+2],d=h[p+3],f=h[p+4],m=h[p+5],g=h[p+6];break;default:c=this.getBezierValue(r,p,1,y-2),u=this.getBezierValue(r,p,2,y+18-2),d=this.getBezierValue(r,p,3,y+18*2-2),f=this.getBezierValue(r,p,4,y+18*3-2),m=this.getBezierValue(r,p,5,y+18*4-2),g=this.getBezierValue(r,p,6,y+18*5-2)}if(o==M.setup){const x=a.data;a.mixRotate=x.mixRotate+(c-x.mixRotate)*i,a.mixX=x.mixX+(u-x.mixX)*i,a.mixY=x.mixY+(d-x.mixY)*i,a.mixScaleX=x.mixScaleX+(f-x.mixScaleX)*i,a.mixScaleY=x.mixScaleY+(m-x.mixScaleY)*i,a.mixShearY=x.mixShearY+(g-x.mixShearY)*i}else a.mixRotate+=(c-a.mixRotate)*i,a.mixX+=(u-a.mixX)*i,a.mixY+=(d-a.mixY)*i,a.mixScaleX+=(f-a.mixScaleX)*i,a.mixScaleY+=(m-a.mixScaleY)*i,a.mixShearY+=(g-a.mixShearY)*i}}class $b extends kr{constructor(t,e,r){super(t,e,`${jt.pathConstraintPosition}|${r}`),this.pathConstraintIndex=0,this.pathConstraintIndex=r}apply(t,e,r,n,i,o,l){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.position=a.data.position;return;case M.first:a.position+=(a.data.position-a.position)*i}return}const c=this.getCurveValue(r);o==M.setup?a.position=a.data.position+(c-a.data.position)*i:a.position+=(c-a.position)*i}}class Xb extends kr{constructor(t,e,r){super(t,e,`${jt.pathConstraintSpacing}|${r}`),this.pathConstraintIndex=0,this.pathConstraintIndex=r}apply(t,e,r,n,i,o,l){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.spacing=a.data.spacing;return;case M.first:a.spacing+=(a.data.spacing-a.spacing)*i}return}const c=this.getCurveValue(r);o==M.setup?a.spacing=a.data.spacing+(c-a.data.spacing)*i:a.spacing+=(c-a.spacing)*i}}class Hb extends Br{constructor(t,e,r){super(t,e,[`${jt.pathConstraintMix}|${r}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=r}getFrameEntries(){return 4}setFrame(t,e,r,n,i){const o=this.frames;t<<=2,o[t]=e,o[t+1]=r,o[t+2]=n,o[t+3]=i}apply(t,e,r,n,i,o,l){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const h=this.frames;if(r<h[0]){switch(o){case M.setup:a.mixRotate=a.data.mixRotate,a.mixX=a.data.mixX,a.mixY=a.data.mixY;return;case M.first:a.mixRotate+=(a.data.mixRotate-a.mixRotate)*i,a.mixX+=(a.data.mixX-a.mixX)*i,a.mixY+=(a.data.mixY-a.mixY)*i}return}let c,u,d;const f=Be.search(h,r,4),m=this.curves[f>>2];switch(m){case 0:const g=h[f];c=h[f+1],u=h[f+2],d=h[f+3];const p=(r-g)/(h[f+4]-g);c+=(h[f+4+1]-c)*p,u+=(h[f+4+2]-u)*p,d+=(h[f+4+3]-d)*p;break;case 1:c=h[f+1],u=h[f+2],d=h[f+3];break;default:c=this.getBezierValue(r,f,1,m-2),u=this.getBezierValue(r,f,2,m+18-2),d=this.getBezierValue(r,f,3,m+18*2-2)}if(o==M.setup){const g=a.data;a.mixRotate=g.mixRotate+(c-g.mixRotate)*i,a.mixX=g.mixX+(u-g.mixX)*i,a.mixY=g.mixY+(d-g.mixY)*i}else a.mixRotate+=(c-a.mixRotate)*i,a.mixX+=(u-a.mixX)*i,a.mixY+=(d-a.mixY)*i}}const hn=class extends Be{constructor(s,t,e){super(s,[`${jt.sequence}|${t}|${e.sequence.id}`]),this.slotIndex=t,this.attachment=e}getFrameEntries(){return hn.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(s,t,e,r,n){const i=this.frames;s*=hn.ENTRIES,i[s]=t,i[s+hn.MODE]=e|r<<4,i[s+hn.DELAY]=n}apply(s,t,e,r,n,i,o){const l=s.slots[this.slotIndex];if(!l.bone.active)return;const a=l.attachment,h=this.attachment;if(a!=h&&(!(a instanceof Pn)||a.timelineAttachment!=h))return;const c=this.frames;if(e<c[0]){(i==M.setup||i==M.first)&&(l.sequenceIndex=-1);return}const u=Be.search(c,e,hn.ENTRIES),d=c[u],f=c[u+hn.MODE],m=c[u+hn.DELAY];if(!this.attachment.sequence)return;let g=f>>4;const p=this.attachment.sequence.regions.length,y=Ab[f&15];if(y!=Gr.hold)switch(g+=(e-d)/m+1e-5|0,y){case Gr.once:g=Math.min(p-1,g);break;case Gr.loop:g%=p;break;case Gr.pingpong:{const x=(p<<1)-2;g=x==0?0:g%x,g>=p&&(g=x-g);break}case Gr.onceReverse:g=Math.max(p-1-g,0);break;case Gr.loopReverse:g=p-1-g%p;break;case Gr.pingpongReverse:{const x=(p<<1)-2;g=x==0?0:(g+p-1)%x,g>=p&&(g=x-g)}}l.sequenceIndex=g}};let Ao=hn;Ao.ENTRIES=3;Ao.MODE=1;Ao.DELAY=2;new Pf("<empty>",[],0);class Yb{constructor(t){this.atlas=t}loadSequence(t,e,r){const n=r.regions;for(let i=0,o=n.length;i<o;i++){const l=r.getPath(e,i),a=this.atlas.findRegion(l);if(a==null)throw new Error(`Region not found in atlas: ${l} (sequence: ${t})`);n[i]=a,n[i].renderObject=n[i]}}newRegionAttachment(t,e,r,n){const i=new Yt(e,r);if(n!=null)this.loadSequence(e,r,n);else{const o=this.atlas.findRegion(r);if(!o)throw new Error(`Region not found in atlas: ${r} (region attachment: ${e})`);o.renderObject=o,i.region=o}return i}newMeshAttachment(t,e,r,n){const i=new ao(e,r);if(n!=null)this.loadSequence(e,r,n);else{const o=this.atlas.findRegion(r);if(!o)throw new Error(`Region not found in atlas: ${r} (mesh attachment: ${e})`);o.renderObject=o,i.region=o}return i}newBoundingBoxAttachment(t,e){return new Tf(e)}newPathAttachment(t,e){return new Rf(e)}newPointAttachment(t,e){return new If(e)}newClippingAttachment(t,e){return new Cf(e)}}class jb{constructor(t,e,r){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=Re.Normal,this.skinRequired=!1,this.color=new lt,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}}class Nf{constructor(t,e,r){this.name=t,this.order=e,this.skinRequired=r}}let zb=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}};class Wb{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}}class qb extends Nf{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class Kb extends Nf{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=Ve.Fixed,this.spacingMode=ur.Fixed,this.rotateMode=Xs.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var ur=(s=>(s[s.Length=0]="Length",s[s.Fixed=1]="Fixed",s[s.Percent=2]="Percent",s[s.Proportional=3]="Proportional",s))(ur||{});class Zb{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findBoneIndex(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findSlotIndex(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}findSkin(t){if(!t)throw new Error("skinName cannot be null.");const e=this.skins;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");const e=this.events;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");const e=this.animations;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++){const i=e[r];if(i.name==t)return i}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let r=0,n=e.length;r<n;r++)if(e[r].name==t)return r;return-1}}class Qb{constructor(t,e,r){if(this.index=0,this.color=new lt(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ft.NORMAL,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!r)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=r}}class Jb extends Nf{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class Ny{constructor(t,e,r){this.slotIndex=t,this.name=e,this.attachment=r}}class Md{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,r){if(!r)throw new Error("attachment cannot be null.");const n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=r}addSkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){i=!0;break}i||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){i=!0;break}i||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(t){for(let r=0;r<t.bones.length;r++){const n=t.bones[r];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==n){i=!0;break}i||this.bones.push(n)}for(let r=0;r<t.constraints.length;r++){const n=t.constraints[r];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==n){i=!0;break}i||this.constraints.push(n)}const e=t.getAttachments();for(let r=0;r<e.length;r++){const n=e[r];n.attachment&&(n.attachment instanceof ao?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(t,e){const r=this.attachments[t];return r?r[e]:null}removeAttachment(t,e){const r=this.attachments[t];r&&delete r[e]}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const r=this.attachments[e];if(r)for(const n in r){const i=r[n];i&&t.push(new Ny(e,n,i))}}return t}getAttachmentsForSlot(t,e){const r=this.attachments[t];if(r)for(const n in r){const i=r[n];i&&e.push(new Ny(t,n,i))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let r=0;for(let n=0;n<t.slots.length;n++){const i=t.slots[n],o=i.getAttachment();if(o&&r<e.attachments.length){const l=e.attachments[r];for(const a in l){const h=l[a];if(o==h){const c=this.getAttachment(r,a);c&&i.setAttachment(c);break}}}r++}}}class tv{constructor(t){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new Zb;r.name="";const n=new Rl(t),i=n.readInt32(),o=n.readInt32();r.hash=o==0&&i==0?null:o.toString(16)+i.toString(16),r.version=n.readString();const l=r.version.substr(0,3);if(l!=="4.0"&&l!=="4.1"){const u=`Spine 4.1 loader cant load version ${r.version}. Please configure your pixi-spine bundle`;console.error(u)}this.ver40=l==="4.0",r.x=n.readFloat(),r.y=n.readFloat(),r.width=n.readFloat(),r.height=n.readFloat();const a=n.readBoolean();a&&(r.fps=n.readFloat(),r.imagesPath=n.readString(),r.audioPath=n.readString());let h=0;h=n.readInt(!0);for(let u=0;u<h;u++){const d=n.readString();if(!d)throw new Error("String in string table must not be null.");n.strings.push(d)}h=n.readInt(!0);for(let u=0;u<h;u++){const d=n.readString();if(!d)throw new Error("Bone name must not be null.");const f=u==0?null:r.bones[n.readInt(!0)],m=new jb(u,d,f);m.rotation=n.readFloat(),m.x=n.readFloat()*e,m.y=n.readFloat()*e,m.scaleX=n.readFloat(),m.scaleY=n.readFloat(),m.shearX=n.readFloat(),m.shearY=n.readFloat(),m.length=n.readFloat()*e,m.transformMode=n.readInt(!0),m.skinRequired=n.readBoolean(),a&&lt.rgba8888ToColor(m.color,n.readInt32()),r.bones.push(m)}h=n.readInt(!0);for(let u=0;u<h;u++){const d=n.readString();if(!d)throw new Error("Slot name must not be null.");const f=r.bones[n.readInt(!0)],m=new Qb(u,d,f);lt.rgba8888ToColor(m.color,n.readInt32());const g=n.readInt32();g!=-1&&lt.rgb888ToColor(m.darkColor=new lt,g),m.attachmentName=n.readStringRef(),m.blendMode=n.readInt(!0),r.slots.push(m)}h=n.readInt(!0);for(let u=0,d;u<h;u++){const f=n.readString();if(!f)throw new Error("IK constraint data name must not be null.");const m=new qb(f);m.order=n.readInt(!0),m.skinRequired=n.readBoolean(),d=n.readInt(!0);for(let g=0;g<d;g++)m.bones.push(r.bones[n.readInt(!0)]);m.target=r.bones[n.readInt(!0)],m.mix=n.readFloat(),m.softness=n.readFloat()*e,m.bendDirection=n.readByte(),m.compress=n.readBoolean(),m.stretch=n.readBoolean(),m.uniform=n.readBoolean(),r.ikConstraints.push(m)}h=n.readInt(!0);for(let u=0,d;u<h;u++){const f=n.readString();if(!f)throw new Error("Transform constraint data name must not be null.");const m=new Jb(f);m.order=n.readInt(!0),m.skinRequired=n.readBoolean(),d=n.readInt(!0);for(let g=0;g<d;g++)m.bones.push(r.bones[n.readInt(!0)]);m.target=r.bones[n.readInt(!0)],m.local=n.readBoolean(),m.relative=n.readBoolean(),m.offsetRotation=n.readFloat(),m.offsetX=n.readFloat()*e,m.offsetY=n.readFloat()*e,m.offsetScaleX=n.readFloat(),m.offsetScaleY=n.readFloat(),m.offsetShearY=n.readFloat(),m.mixRotate=n.readFloat(),m.mixX=n.readFloat(),m.mixY=n.readFloat(),m.mixScaleX=n.readFloat(),m.mixScaleY=n.readFloat(),m.mixShearY=n.readFloat(),r.transformConstraints.push(m)}h=n.readInt(!0);for(let u=0,d;u<h;u++){const f=n.readString();if(!f)throw new Error("Path constraint data name must not be null.");const m=new Kb(f);m.order=n.readInt(!0),m.skinRequired=n.readBoolean(),d=n.readInt(!0);for(let g=0;g<d;g++)m.bones.push(r.bones[n.readInt(!0)]);m.target=r.slots[n.readInt(!0)],m.positionMode=n.readInt(!0),m.spacingMode=n.readInt(!0),m.rotateMode=n.readInt(!0),m.offsetRotation=n.readFloat(),m.position=n.readFloat(),m.positionMode==Ve.Fixed&&(m.position*=e),m.spacing=n.readFloat(),(m.spacingMode==ur.Length||m.spacingMode==ur.Fixed)&&(m.spacing*=e),m.mixRotate=n.readFloat(),m.mixX=n.readFloat(),m.mixY=n.readFloat(),r.pathConstraints.push(m)}const c=this.readSkin(n,r,!0,a);c&&(r.defaultSkin=c,r.skins.push(c));{let u=r.skins.length;for(J.setArraySize(r.skins,h=u+n.readInt(!0));u<h;u++){const d=this.readSkin(n,r,!1,a);if(!d)throw new Error("readSkin() should not have returned null.");r.skins[u]=d}}h=this.linkedMeshes.length;for(let u=0;u<h;u++){const d=this.linkedMeshes[u],f=d.skin?r.findSkin(d.skin):r.defaultSkin;if(!f)throw new Error("Not skin found for linked mesh.");if(!d.parent)throw new Error("Linked mesh parent must not be null");const m=f.getAttachment(d.slotIndex,d.parent);if(!m)throw new Error(`Parent mesh not found: ${d.parent}`);d.mesh.timelineAttachment=d.inheritTimeline?m:d.mesh,d.mesh.setParentMesh(m)}this.linkedMeshes.length=0,h=n.readInt(!0);for(let u=0;u<h;u++){const d=n.readStringRef();if(!d)throw new Error;const f=new Wb(d);f.intValue=n.readInt(!1),f.floatValue=n.readFloat(),f.stringValue=n.readString(),f.audioPath=n.readString(),f.audioPath&&(f.volume=n.readFloat(),f.balance=n.readFloat()),r.events.push(f)}h=n.readInt(!0);for(let u=0;u<h;u++){const d=n.readString();if(!d)throw new Error("Animatio name must not be null.");r.animations.push(this.readAnimation(n,d,r))}return r}readSkin(t,e,r,n){let i=null,o=0;if(r){if(o=t.readInt(!0),o==0)return null;i=new Md("default")}else{const l=t.readStringRef();if(!l)throw new Error("Skin name must not be null.");i=new Md(l),i.bones.length=t.readInt(!0);for(let a=0,h=i.bones.length;a<h;a++)i.bones[a]=e.bones[t.readInt(!0)];for(let a=0,h=t.readInt(!0);a<h;a++)i.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let a=0,h=t.readInt(!0);a<h;a++)i.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let a=0,h=t.readInt(!0);a<h;a++)i.constraints.push(e.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(let l=0;l<o;l++){const a=t.readInt(!0);for(let h=0,c=t.readInt(!0);h<c;h++){const u=t.readStringRef();if(!u)throw new Error("Attachment name must not be null");const d=this.readAttachment(t,e,i,a,u,n);d&&i.setAttachment(a,u,d)}}return i}readAttachment(t,e,r,n,i,o){const l=this.scale;let a=t.readStringRef();switch(a||(a=i),t.readByte()){case Bt.Region:{let h=t.readStringRef();const c=t.readFloat(),u=t.readFloat(),d=t.readFloat(),f=t.readFloat(),m=t.readFloat(),g=t.readFloat(),p=t.readFloat(),y=t.readInt32(),x=this.readSequence(t);h||(h=a);const _=this.attachmentLoader.newRegionAttachment(r,a,h,x);return _?(_.path=h,_.x=u*l,_.y=d*l,_.scaleX=f,_.scaleY=m,_.rotation=c,_.width=g*l,_.height=p*l,lt.rgba8888ToColor(_.color,y),_.sequence=x,x==null&&_.updateRegion(),_):null}case Bt.BoundingBox:{const h=t.readInt(!0),c=this.readVertices(t,h),u=o?t.readInt32():0,d=this.attachmentLoader.newBoundingBoxAttachment(r,a);return d?(d.worldVerticesLength=h<<1,d.vertices=c.vertices,d.bones=c.bones,o&&lt.rgba8888ToColor(d.color,u),d):null}case Bt.Mesh:{let h=t.readStringRef();const c=t.readInt32(),u=t.readInt(!0),d=this.readFloatArray(t,u<<1,1),f=this.readShortArray(t),m=this.readVertices(t,u),g=t.readInt(!0),p=this.readSequence(t);let y=[],x=0,_=0;o&&(y=this.readShortArray(t),x=t.readFloat(),_=t.readFloat()),h||(h=a);const A=this.attachmentLoader.newMeshAttachment(r,a,h,p);return A?(A.path=h,lt.rgba8888ToColor(A.color,c),A.bones=m.bones,A.vertices=m.vertices,A.worldVerticesLength=u<<1,A.triangles=f,A.regionUVs=new Float32Array(d),A.hullLength=g<<1,A.sequence=p,o&&(A.edges=y,A.width=x*l,A.height=_*l),A):null}case Bt.LinkedMesh:{let h=t.readStringRef();const c=t.readInt32(),u=t.readStringRef(),d=t.readStringRef(),f=t.readBoolean(),m=this.readSequence(t);let g=0,p=0;o&&(g=t.readFloat(),p=t.readFloat()),h||(h=a);const y=this.attachmentLoader.newMeshAttachment(r,a,h,m);return y?(y.path=h,lt.rgba8888ToColor(y.color,c),y.sequence=m,o&&(y.width=g*l,y.height=p*l),this.linkedMeshes.push(new QB(y,u,n,d,f)),y):null}case Bt.Path:{const h=t.readBoolean(),c=t.readBoolean(),u=t.readInt(!0),d=this.readVertices(t,u),f=J.newArray(u/3,0);for(let p=0,y=f.length;p<y;p++)f[p]=t.readFloat()*l;const m=o?t.readInt32():0,g=this.attachmentLoader.newPathAttachment(r,a);return g?(g.closed=h,g.constantSpeed=c,g.worldVerticesLength=u<<1,g.vertices=d.vertices,g.bones=d.bones,g.lengths=f,o&&lt.rgba8888ToColor(g.color,m),g):null}case Bt.Point:{const h=t.readFloat(),c=t.readFloat(),u=t.readFloat(),d=o?t.readInt32():0,f=this.attachmentLoader.newPointAttachment(r,a);return f?(f.x=c*l,f.y=u*l,f.rotation=h,o&&lt.rgba8888ToColor(f.color,d),f):null}case Bt.Clipping:{const h=t.readInt(!0),c=t.readInt(!0),u=this.readVertices(t,c),d=o?t.readInt32():0,f=this.attachmentLoader.newClippingAttachment(r,a);return f?(f.endSlot=e.slots[h],f.worldVerticesLength=c<<1,f.vertices=u.vertices,f.bones=u.bones,o&&lt.rgba8888ToColor(f.color,d),f):null}}return null}readSequence(t){if(this.ver40||!t.readBoolean())return null;const e=new Mf(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readDeformTimelineType(t){return this.ver40?Oy:t.readByte()}readVertices(t,e){const r=this.scale,n=e<<1,i=new JB;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,n,r),i;const o=new Array,l=new Array;for(let a=0;a<e;a++){const h=t.readInt(!0);l.push(h);for(let c=0;c<h;c++)l.push(t.readInt(!0)),o.push(t.readFloat()*r),o.push(t.readFloat()*r),o.push(t.readFloat())}return i.vertices=J.toFloatArray(o),i.bones=l,i}readFloatArray(t,e,r){const n=new Array(e);if(r==1)for(let i=0;i<e;i++)n[i]=t.readFloat();else for(let i=0;i<e;i++)n[i]=t.readFloat()*r;return n}readShortArray(t){const e=t.readInt(!0),r=new Array(e);for(let n=0;n<e;n++)r[n]=t.readShort();return r}readAnimation(t,e,r){t.readInt(!0);const n=new Array,i=this.scale;for(let h=0,c=t.readInt(!0);h<c;h++){const u=t.readInt(!0);for(let d=0,f=t.readInt(!0);d<f;d++){const m=t.readByte(),g=t.readInt(!0),p=g-1;switch(m){case ck:{const y=new Ob(g,u);for(let x=0;x<g;x++)y.setFrame(x,t.readFloat(),t.readStringRef());n.push(y);break}case uk:{const y=t.readInt(!0),x=new Pb(g,y,u);let _=t.readFloat(),A=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255;for(let R=0,P=0;x.setFrame(R,_,A,b,w,v),R!=p;R++){const F=t.readFloat(),B=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,Y=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255;switch(t.readByte()){case ar:x.setStepped(R);break;case or:Nt(t,x,P++,R,0,_,F,A,B,1),Nt(t,x,P++,R,1,_,F,b,L,1),Nt(t,x,P++,R,2,_,F,w,Y,1),Nt(t,x,P++,R,3,_,F,v,Z,1)}_=F,A=B,b=L,w=Y,v=Z}n.push(x);break}case dk:{const y=t.readInt(!0),x=new Fb(g,y,u);let _=t.readFloat(),A=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255;for(let v=0,R=0;x.setFrame(v,_,A,b,w),v!=p;v++){const P=t.readFloat(),F=t.readUnsignedByte()/255,B=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255;switch(t.readByte()){case ar:x.setStepped(v);break;case or:Nt(t,x,R++,v,0,_,P,A,F,1),Nt(t,x,R++,v,1,_,P,b,B,1),Nt(t,x,R++,v,2,_,P,w,L,1)}_=P,A=F,b=B,w=L}n.push(x);break}case fk:{const y=t.readInt(!0),x=new kb(g,y,u);let _=t.readFloat(),A=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255;for(let B=0,L=0;x.setFrame(B,_,A,b,w,v,R,P,F),B!=p;B++){const Y=t.readFloat(),Z=t.readUnsignedByte()/255,pt=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case ar:x.setStepped(B);break;case or:Nt(t,x,L++,B,0,_,Y,A,Z,1),Nt(t,x,L++,B,1,_,Y,b,pt,1),Nt(t,x,L++,B,2,_,Y,w,E,1),Nt(t,x,L++,B,3,_,Y,v,T,1),Nt(t,x,L++,B,4,_,Y,R,C,1),Nt(t,x,L++,B,5,_,Y,P,O,1),Nt(t,x,L++,B,6,_,Y,F,N,1)}_=Y,A=Z,b=pt,w=E,v=T,R=C,P=O,F=N}n.push(x);break}case mk:{const y=t.readInt(!0),x=new Nb(g,y,u);let _=t.readFloat(),A=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;for(let F=0,B=0;x.setFrame(F,_,A,b,w,v,R,P),F!=p;F++){const L=t.readFloat(),Y=t.readUnsignedByte()/255,Z=t.readUnsignedByte()/255,pt=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255;switch(t.readByte()){case ar:x.setStepped(F);break;case or:Nt(t,x,B++,F,0,_,L,A,Y,1),Nt(t,x,B++,F,1,_,L,b,Z,1),Nt(t,x,B++,F,2,_,L,w,pt,1),Nt(t,x,B++,F,3,_,L,v,E,1),Nt(t,x,B++,F,4,_,L,R,T,1),Nt(t,x,B++,F,5,_,L,P,C,1)}_=L,A=Y,b=Z,w=pt,v=E,R=T,P=C}n.push(x);break}case pk:{const y=new Bb(g,t.readInt(!0),u);let x=t.readFloat(),_=t.readUnsignedByte()/255;for(let A=0,b=0;y.setFrame(A,x,_),A!=p;A++){const w=t.readFloat(),v=t.readUnsignedByte()/255;switch(t.readByte()){case ar:y.setStepped(A);break;case or:Nt(t,y,b++,A,0,x,w,_,v,1)}x=w,_=v}n.push(y)}}}}for(let h=0,c=t.readInt(!0);h<c;h++){const u=t.readInt(!0);for(let d=0,f=t.readInt(!0);d<f;d++){const m=t.readByte(),g=t.readInt(!0),p=t.readInt(!0);switch(m){case tk:n.push(Ur(t,new bb(g,p,u),1));break;case ek:n.push(wu(t,new vb(g,p,u),i));break;case sk:n.push(Ur(t,new wb(g,p,u),i));break;case rk:n.push(Ur(t,new Eb(g,p,u),i));break;case nk:n.push(wu(t,new Sb(g,p,u),1));break;case ik:n.push(Ur(t,new Tb(g,p,u),1));break;case ak:n.push(Ur(t,new Cb(g,p,u),1));break;case ok:n.push(wu(t,new Rb(g,p,u),1));break;case lk:n.push(Ur(t,new Ib(g,p,u),1));break;case hk:n.push(Ur(t,new Mb(g,p,u),1))}}}for(let h=0,c=t.readInt(!0);h<c;h++){const u=t.readInt(!0),d=t.readInt(!0),f=d-1,m=new Db(d,t.readInt(!0),u);let g=t.readFloat(),p=t.readFloat(),y=t.readFloat()*i;for(let x=0,_=0;m.setFrame(x,g,p,y,t.readByte(),t.readBoolean(),t.readBoolean()),x!=f;x++){const A=t.readFloat(),b=t.readFloat(),w=t.readFloat()*i;switch(t.readByte()){case ar:m.setStepped(x);break;case or:Nt(t,m,_++,x,0,g,A,p,b,1),Nt(t,m,_++,x,1,g,A,y,w,i)}g=A,p=b,y=w}n.push(m)}for(let h=0,c=t.readInt(!0);h<c;h++){const u=t.readInt(!0),d=t.readInt(!0),f=d-1,m=new Gb(d,t.readInt(!0),u);let g=t.readFloat(),p=t.readFloat(),y=t.readFloat(),x=t.readFloat(),_=t.readFloat(),A=t.readFloat(),b=t.readFloat();for(let w=0,v=0;m.setFrame(w,g,p,y,x,_,A,b),w!=f;w++){const R=t.readFloat(),P=t.readFloat(),F=t.readFloat(),B=t.readFloat(),L=t.readFloat(),Y=t.readFloat(),Z=t.readFloat();switch(t.readByte()){case ar:m.setStepped(w);break;case or:Nt(t,m,v++,w,0,g,R,p,P,1),Nt(t,m,v++,w,1,g,R,y,F,1),Nt(t,m,v++,w,2,g,R,x,B,1),Nt(t,m,v++,w,3,g,R,_,L,1),Nt(t,m,v++,w,4,g,R,A,Y,1),Nt(t,m,v++,w,5,g,R,b,Z,1)}g=R,p=P,y=F,x=B,_=L,A=Y,b=Z}n.push(m)}for(let h=0,c=t.readInt(!0);h<c;h++){const u=t.readInt(!0),d=r.pathConstraints[u];for(let f=0,m=t.readInt(!0);f<m;f++)switch(t.readByte()){case yk:n.push(Ur(t,new $b(t.readInt(!0),t.readInt(!0),u),d.positionMode==Ve.Fixed?i:1));break;case xk:n.push(Ur(t,new Xb(t.readInt(!0),t.readInt(!0),u),d.spacingMode==ur.Length||d.spacingMode==ur.Fixed?i:1));break;case _k:const g=new Hb(t.readInt(!0),t.readInt(!0),u);let p=t.readFloat(),y=t.readFloat(),x=t.readFloat(),_=t.readFloat();for(let A=0,b=0,w=g.getFrameCount()-1;g.setFrame(A,p,y,x,_),A!=w;A++){const v=t.readFloat(),R=t.readFloat(),P=t.readFloat(),F=t.readFloat();switch(t.readByte()){case ar:g.setStepped(A);break;case or:Nt(t,g,b++,A,0,p,v,y,R,1),Nt(t,g,b++,A,1,p,v,x,P,1),Nt(t,g,b++,A,2,p,v,_,F,1)}p=v,y=R,x=P,_=F}n.push(g)}}for(let h=0,c=t.readInt(!0);h<c;h++){const u=r.skins[t.readInt(!0)];for(let d=0,f=t.readInt(!0);d<f;d++){const m=t.readInt(!0);for(let g=0,p=t.readInt(!0);g<p;g++){const y=t.readStringRef();if(!y)throw new Error("attachmentName must not be null.");const x=u.getAttachment(m,y),_=this.readDeformTimelineType(t),A=t.readInt(!0),b=A-1;switch(_){case Oy:{const w=x,v=w.bones,R=w.vertices,P=v?R.length/3*2:R.length,F=t.readInt(!0),B=new Lb(A,F,m,w);let L=t.readFloat();for(let Y=0,Z=0;;Y++){let pt,E=t.readInt(!0);if(E==0)pt=v?J.newFloatArray(P):R;else{pt=J.newFloatArray(P);const C=t.readInt(!0);if(E+=C,i==1)for(let O=C;O<E;O++)pt[O]=t.readFloat();else for(let O=C;O<E;O++)pt[O]=t.readFloat()*i;if(!v)for(let O=0,N=pt.length;O<N;O++)pt[O]+=R[O]}if(B.setFrame(Y,L,pt),Y==b)break;const T=t.readFloat();switch(t.readByte()){case ar:B.setStepped(Y);break;case or:Nt(t,B,Z++,Y,0,L,T,0,1,1)}L=T}n.push(B);break}case gk:{const w=new Ao(A,m,x);for(let v=0;v<A;v++){const R=t.readFloat(),P=t.readInt32();w.setFrame(v,R,Ab[P&15],P>>4,t.readFloat())}n.push(w);break}}}}}const o=t.readInt(!0);if(o>0){const h=new kf(o),c=r.slots.length;for(let u=0;u<o;u++){const d=t.readFloat(),f=t.readInt(!0),m=J.newArray(c,0);for(let x=c-1;x>=0;x--)m[x]=-1;const g=J.newArray(c-f,0);let p=0,y=0;for(let x=0;x<f;x++){const _=t.readInt(!0);for(;p!=_;)g[y++]=p++;m[p+t.readInt(!0)]=p++}for(;p<c;)g[y++]=p++;for(let x=c-1;x>=0;x--)m[x]==-1&&(m[x]=g[--y]);h.setFrame(u,d,m)}n.push(h)}const l=t.readInt(!0);if(l>0){const h=new Bf(l);for(let c=0;c<l;c++){const u=t.readFloat(),d=r.events[t.readInt(!0)],f=new zb(u,d);f.intValue=t.readInt(!1),f.floatValue=t.readFloat(),f.stringValue=t.readBoolean()?t.readString():d.stringValue,f.data.audioPath&&(f.volume=t.readFloat(),f.balance=t.readFloat()),h.setFrame(c,f)}n.push(h)}let a=0;for(let h=0,c=n.length;h<c;h++)a=Math.max(a,n[h].getDuration());return new Pf(e,n,a)}}tv.BlendModeValues=[ft.NORMAL,ft.ADD,ft.MULTIPLY,ft.SCREEN];let QB=class{constructor(t,e,r,n,i){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritTimeline=i}};class JB{constructor(t=null,e=null){this.bones=t,this.vertices=e}}function Ur(s,t,e){let r=s.readFloat(),n=s.readFloat()*e;for(let i=0,o=0,l=t.getFrameCount()-1;t.setFrame(i,r,n),i!=l;i++){const a=s.readFloat(),h=s.readFloat()*e;switch(s.readByte()){case ar:t.setStepped(i);break;case or:Nt(s,t,o++,i,0,r,a,n,h,e)}r=a,n=h}return t}function wu(s,t,e){let r=s.readFloat(),n=s.readFloat()*e,i=s.readFloat()*e;for(let o=0,l=0,a=t.getFrameCount()-1;t.setFrame(o,r,n,i),o!=a;o++){const h=s.readFloat(),c=s.readFloat()*e,u=s.readFloat()*e;switch(s.readByte()){case ar:t.setStepped(o);break;case or:Nt(s,t,l++,o,0,r,h,n,c,e),Nt(s,t,l++,o,1,r,h,i,u,e)}r=h,n=c,i=u}return t}function Nt(s,t,e,r,n,i,o,l,a,h){t.setBezier(e,r,n,i,l,s.readFloat(),s.readFloat()*h,s.readFloat(),s.readFloat()*h,o,a)}const tk=0,ek=1,sk=2,rk=3,nk=4,ik=5,ak=6,ok=7,lk=8,hk=9,ck=0,uk=1,dk=2,fk=3,mk=4,pk=5,Oy=0,gk=1,yk=0,xk=1,_k=2,ar=1,or=2;class Of{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,r=new Zb,n=typeof t=="string"?JSON.parse(t):t,i=n.skeleton;if(i){r.hash=i.hash,r.version=i.spine;const o=r.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){const l=`Spine 4.1 loader cant load version ${i.spine}. Please configure your pixi-spine bundle`;console.error(l)}r.x=i.x,r.y=i.y,r.width=i.width,r.height=i.height,r.fps=i.fps,r.imagesPath=i.images}if(n.bones)for(let o=0;o<n.bones.length;o++){const l=n.bones[o];let a=null;const h=j(l,"parent",null);if(h!=null&&(a=r.findBone(h),a==null))throw new Error(`Parent bone not found: ${h}`);const c=new jb(r.bones.length,l.name,a);c.length=j(l,"length",0)*e,c.x=j(l,"x",0)*e,c.y=j(l,"y",0)*e,c.rotation=j(l,"rotation",0),c.scaleX=j(l,"scaleX",1),c.scaleY=j(l,"scaleY",1),c.shearX=j(l,"shearX",0),c.shearY=j(l,"shearY",0),c.transformMode=J.enumValue(Re,j(l,"transform","Normal")),c.skinRequired=j(l,"skin",!1);const u=j(l,"color",null);u&&c.color.setFromString(u),r.bones.push(c)}if(n.slots)for(let o=0;o<n.slots.length;o++){const l=n.slots[o],a=r.findBone(l.bone);if(!a)throw new Error(`Couldn't find bone ${l.bone} for slot ${l.name}`);const h=new Qb(r.slots.length,l.name,a),c=j(l,"color",null);c&&h.color.setFromString(c);const u=j(l,"dark",null);u&&(h.darkColor=lt.fromString(u)),h.attachmentName=j(l,"attachment",null),h.blendMode=Of.blendModeFromString(j(l,"blend","normal")),r.slots.push(h)}if(n.ik)for(let o=0;o<n.ik.length;o++){const l=n.ik[o],a=new qb(l.name);a.order=j(l,"order",0),a.skinRequired=j(l,"skin",!1);for(let h=0;h<l.bones.length;h++){const c=l.bones[h],u=r.findBone(c);if(u==null)throw new Error(`IK bone not found: ${c}`);a.bones.push(u)}a.target=r.findBone(l.target),a.mix=j(l,"mix",1),a.softness=j(l,"softness",0)*e,a.bendDirection=j(l,"bendPositive",!0)?1:-1,a.compress=j(l,"compress",!1),a.stretch=j(l,"stretch",!1),a.uniform=j(l,"uniform",!1),r.ikConstraints.push(a)}if(n.transform)for(let o=0;o<n.transform.length;o++){const l=n.transform[o],a=new Jb(l.name);a.order=j(l,"order",0),a.skinRequired=j(l,"skin",!1);for(let u=0;u<l.bones.length;u++){const d=l.bones[u],f=r.findBone(d);if(!f)throw new Error(`Couldn't find bone ${d} for transform constraint ${l.name}.`);a.bones.push(f)}const h=l.target,c=r.findBone(h);if(!c)throw new Error(`Couldn't find target bone ${h} for transform constraint ${l.name}.`);a.target=c,a.local=j(l,"local",!1),a.relative=j(l,"relative",!1),a.offsetRotation=j(l,"rotation",0),a.offsetX=j(l,"x",0)*e,a.offsetY=j(l,"y",0)*e,a.offsetScaleX=j(l,"scaleX",0),a.offsetScaleY=j(l,"scaleY",0),a.offsetShearY=j(l,"shearY",0),a.mixRotate=j(l,"mixRotate",1),a.mixX=j(l,"mixX",1),a.mixY=j(l,"mixY",a.mixX),a.mixScaleX=j(l,"mixScaleX",1),a.mixScaleY=j(l,"mixScaleY",a.mixScaleX),a.mixShearY=j(l,"mixShearY",1),r.transformConstraints.push(a)}if(n.path)for(let o=0;o<n.path.length;o++){const l=n.path[o],a=new Kb(l.name);a.order=j(l,"order",0),a.skinRequired=j(l,"skin",!1);for(let u=0;u<l.bones.length;u++){const d=l.bones[u],f=r.findBone(d);if(!f)throw new Error(`Couldn't find bone ${d} for path constraint ${l.name}.`);a.bones.push(f)}const h=l.target,c=r.findSlot(h);if(!c)throw new Error(`Couldn't find target slot ${h} for path constraint ${l.name}.`);a.target=c,a.positionMode=J.enumValue(Ve,j(l,"positionMode","Percent")),a.spacingMode=J.enumValue(ur,j(l,"spacingMode","Length")),a.rotateMode=J.enumValue(Xs,j(l,"rotateMode","Tangent")),a.offsetRotation=j(l,"rotation",0),a.position=j(l,"position",0),a.positionMode==Ve.Fixed&&(a.position*=e),a.spacing=j(l,"spacing",0),(a.spacingMode==ur.Length||a.spacingMode==ur.Fixed)&&(a.spacing*=e),a.mixRotate=j(l,"mixRotate",1),a.mixX=j(l,"mixX",1),a.mixY=j(l,"mixY",a.mixX),r.pathConstraints.push(a)}if(n.skins)for(let o=0;o<n.skins.length;o++){const l=n.skins[o],a=new Md(l.name);if(l.bones)for(let h=0;h<l.bones.length;h++){const c=l.bones[h],u=r.findBone(c);if(!u)throw new Error(`Couldn't find bone ${c} for skin ${l.name}.`);a.bones.push(u)}if(l.ik)for(let h=0;h<l.ik.length;h++){const c=l.ik[h],u=r.findIkConstraint(c);if(!u)throw new Error(`Couldn't find IK constraint ${c} for skin ${l.name}.`);a.constraints.push(u)}if(l.transform)for(let h=0;h<l.transform.length;h++){const c=l.transform[h],u=r.findTransformConstraint(c);if(!u)throw new Error(`Couldn't find transform constraint ${c} for skin ${l.name}.`);a.constraints.push(u)}if(l.path)for(let h=0;h<l.path.length;h++){const c=l.path[h],u=r.findPathConstraint(c);if(!u)throw new Error(`Couldn't find path constraint ${c} for skin ${l.name}.`);a.constraints.push(u)}for(const h in l.attachments){const c=r.findSlot(h);if(!c)throw new Error(`Couldn't find slot ${h} for skin ${l.name}.`);const u=l.attachments[h];for(const d in u){const f=this.readAttachment(u[d],a,c.index,d,r);f&&a.setAttachment(c.index,d,f)}}r.skins.push(a),a.name=="default"&&(r.defaultSkin=a)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){const a=this.linkedMeshes[o],h=a.skin?r.findSkin(a.skin):r.defaultSkin;if(!h)throw new Error(`Skin not found: ${a.skin}`);const c=h.getAttachment(a.slotIndex,a.parent);if(!c)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.timelineAttachment=a.inheritTimeline?c:a.mesh,a.mesh.setParentMesh(c)}if(this.linkedMeshes.length=0,n.events)for(const o in n.events){const l=n.events[o],a=new Wb(o);a.intValue=j(l,"int",0),a.floatValue=j(l,"float",0),a.stringValue=j(l,"string",""),a.audioPath=j(l,"audio",null),a.audioPath&&(a.volume=j(l,"volume",1),a.balance=j(l,"balance",0)),r.events.push(a)}if(n.animations)for(const o in n.animations){const l=n.animations[o];this.readAnimation(l,o,r)}return r}readAttachment(t,e,r,n,i){const o=this.scale;switch(n=j(t,"name",n),j(t,"type","region")){case"region":{const l=j(t,"path",n),a=this.readSequence(j(t,"sequence",null)),h=this.attachmentLoader.newRegionAttachment(e,n,l,a);if(!h)return null;h.path=l,h.x=j(t,"x",0)*o,h.y=j(t,"y",0)*o,h.scaleX=j(t,"scaleX",1),h.scaleY=j(t,"scaleY",1),h.rotation=j(t,"rotation",0),h.width=t.width*o,h.height=t.height*o,h.sequence=a;const c=j(t,"color",null);return c&&h.color.setFromString(c),h}case"boundingbox":{const l=this.attachmentLoader.newBoundingBoxAttachment(e,n);if(!l)return null;this.readVertices(t,l,t.vertexCount<<1);const a=j(t,"color",null);return a&&l.color.setFromString(a),l}case"mesh":case"linkedmesh":{const l=j(t,"path",n),a=this.readSequence(j(t,"sequence",null)),h=this.attachmentLoader.newMeshAttachment(e,n,l,a);if(!h)return null;h.path=l;const c=j(t,"color",null);c&&h.color.setFromString(c),h.width=j(t,"width",0)*o,h.height=j(t,"height",0)*o,h.sequence=a;const u=j(t,"parent",null);if(u)return this.linkedMeshes.push(new Ak(h,j(t,"skin",null),r,u,j(t,"timelines",!0))),h;const d=t.uvs;return this.readVertices(t,h,d.length),h.triangles=t.triangles,h.regionUVs=new Float32Array(d),h.edges=j(t,"edges",null),h.hullLength=j(t,"hull",0)*2,h}case"path":{const l=this.attachmentLoader.newPathAttachment(e,n);if(!l)return null;l.closed=j(t,"closed",!1),l.constantSpeed=j(t,"constantSpeed",!0);const a=t.vertexCount;this.readVertices(t,l,a<<1);const h=J.newArray(a/3,0);for(let u=0;u<t.lengths.length;u++)h[u]=t.lengths[u]*o;l.lengths=h;const c=j(t,"color",null);return c&&l.color.setFromString(c),l}case"point":{const l=this.attachmentLoader.newPointAttachment(e,n);if(!l)return null;l.x=j(t,"x",0)*o,l.y=j(t,"y",0)*o,l.rotation=j(t,"rotation",0);const a=j(t,"color",null);return a&&l.color.setFromString(a),l}case"clipping":{const l=this.attachmentLoader.newClippingAttachment(e,n);if(!l)return null;const a=j(t,"end",null);if(a!=null){const u=i.findSlot(a);if(u==null)throw new Error(`Clipping end slot not found: ${a}`);l.endSlot=u}const h=t.vertexCount;this.readVertices(t,l,h<<1);const c=j(t,"color",null);return c&&l.color.setFromString(c),l}}return null}readSequence(t){if(t==null)return null;const e=new Mf(j(t,"count",0));return e.start=j(t,"start",1),e.digits=j(t,"digits",0),e.setupIndex=j(t,"setup",0),e}readVertices(t,e,r){const n=this.scale;e.worldVerticesLength=r;const i=t.vertices;if(r==i.length){const a=J.toFloatArray(i);if(n!=1)for(let h=0,c=i.length;h<c;h++)a[h]*=n;e.vertices=a;return}const o=new Array,l=new Array;for(let a=0,h=i.length;a<h;){const c=i[a++];l.push(c);for(let u=a+c*4;a<u;a+=4)l.push(i[a]),o.push(i[a+1]*n),o.push(i[a+2]*n),o.push(i[a+3])}e.bones=l,e.vertices=J.toFloatArray(o)}readAnimation(t,e,r){const n=this.scale,i=new Array;if(t.slots)for(const l in t.slots){const a=t.slots[l],h=r.findSlot(l);if(!h)throw new Error(`Slot not found: ${l}`);const c=h.index;for(const u in a){const d=a[u];if(!d)continue;const f=d.length;if(u=="attachment"){const m=new Ob(f,c);for(let g=0;g<f;g++){const p=d[g];m.setFrame(g,j(p,"time",0),j(p,"name",null))}i.push(m)}else if(u=="rgba"){const m=new Pb(f,f<<2,c);let g=d[0],p=j(g,"time",0),y=lt.fromString(g.color);for(let x=0,_=0;;x++){m.setFrame(x,p,y.r,y.g,y.b,y.a);const A=d[x+1];if(!A){m.shrink(_);break}const b=j(A,"time",0),w=lt.fromString(A.color),v=g.curve;v&&(_=Vt(v,m,_,x,0,p,b,y.r,w.r,1),_=Vt(v,m,_,x,1,p,b,y.g,w.g,1),_=Vt(v,m,_,x,2,p,b,y.b,w.b,1),_=Vt(v,m,_,x,3,p,b,y.a,w.a,1)),p=b,y=w,g=A}i.push(m)}else if(u=="rgb"){const m=new Fb(f,f*3,c);let g=d[0],p=j(g,"time",0),y=lt.fromString(g.color);for(let x=0,_=0;;x++){m.setFrame(x,p,y.r,y.g,y.b);const A=d[x+1];if(!A){m.shrink(_);break}const b=j(A,"time",0),w=lt.fromString(A.color),v=g.curve;v&&(_=Vt(v,m,_,x,0,p,b,y.r,w.r,1),_=Vt(v,m,_,x,1,p,b,y.g,w.g,1),_=Vt(v,m,_,x,2,p,b,y.b,w.b,1)),p=b,y=w,g=A}i.push(m)}else if(u=="alpha")i.push(Ar(d,new Bb(f,f,c),0,1));else if(u=="rgba2"){const m=new kb(f,f*7,c);let g=d[0],p=j(g,"time",0),y=lt.fromString(g.light),x=lt.fromString(g.dark);for(let _=0,A=0;;_++){m.setFrame(_,p,y.r,y.g,y.b,y.a,x.r,x.g,x.b);const b=d[_+1];if(!b){m.shrink(A);break}const w=j(b,"time",0),v=lt.fromString(b.light),R=lt.fromString(b.dark),P=g.curve;P&&(A=Vt(P,m,A,_,0,p,w,y.r,v.r,1),A=Vt(P,m,A,_,1,p,w,y.g,v.g,1),A=Vt(P,m,A,_,2,p,w,y.b,v.b,1),A=Vt(P,m,A,_,3,p,w,y.a,v.a,1),A=Vt(P,m,A,_,4,p,w,x.r,R.r,1),A=Vt(P,m,A,_,5,p,w,x.g,R.g,1),A=Vt(P,m,A,_,6,p,w,x.b,R.b,1)),p=w,y=v,x=R,g=b}i.push(m)}else if(u=="rgb2"){const m=new Nb(f,f*6,c);let g=d[0],p=j(g,"time",0),y=lt.fromString(g.light),x=lt.fromString(g.dark);for(let _=0,A=0;;_++){m.setFrame(_,p,y.r,y.g,y.b,x.r,x.g,x.b);const b=d[_+1];if(!b){m.shrink(A);break}const w=j(b,"time",0),v=lt.fromString(b.light),R=lt.fromString(b.dark),P=g.curve;P&&(A=Vt(P,m,A,_,0,p,w,y.r,v.r,1),A=Vt(P,m,A,_,1,p,w,y.g,v.g,1),A=Vt(P,m,A,_,2,p,w,y.b,v.b,1),A=Vt(P,m,A,_,3,p,w,x.r,R.r,1),A=Vt(P,m,A,_,4,p,w,x.g,R.g,1),A=Vt(P,m,A,_,5,p,w,x.b,R.b,1)),p=w,y=v,x=R,g=b}i.push(m)}}}if(t.bones)for(const l in t.bones){const a=t.bones[l],h=r.findBone(l);if(!h)throw new Error(`Bone not found: ${l}`);const c=h.index;for(const u in a){const d=a[u],f=d.length;if(f!=0){if(u==="rotate")i.push(Ar(d,new bb(f,f,c),0,1));else if(u==="translate"){const m=new vb(f,f<<1,c);i.push(Eu(d,m,"x","y",0,n))}else if(u==="translatex"){const m=new wb(f,f,c);i.push(Ar(d,m,0,n))}else if(u==="translatey"){const m=new Eb(f,f,c);i.push(Ar(d,m,0,n))}else if(u==="scale"){const m=new Sb(f,f<<1,c);i.push(Eu(d,m,"x","y",1,1))}else if(u==="scalex"){const m=new Tb(f,f,c);i.push(Ar(d,m,1,1))}else if(u==="scaley"){const m=new Cb(f,f,c);i.push(Ar(d,m,1,1))}else if(u==="shear"){const m=new Rb(f,f<<1,c);i.push(Eu(d,m,"x","y",0,1))}else if(u==="shearx"){const m=new Ib(f,f,c);i.push(Ar(d,m,0,1))}else if(u==="sheary"){const m=new Mb(f,f,c);i.push(Ar(d,m,0,1))}}}}if(t.ik)for(const l in t.ik){const a=t.ik[l];let h=a[0];if(!h)continue;const c=r.findIkConstraint(l);if(!c)throw new Error(`IK Constraint not found: ${l}`);const u=r.ikConstraints.indexOf(c),d=new Db(a.length,a.length<<1,u);let f=j(h,"time",0),m=j(h,"mix",1),g=j(h,"softness",0)*n;for(let p=0,y=0;;p++){d.setFrame(p,f,m,g,j(h,"bendPositive",!0)?1:-1,j(h,"compress",!1),j(h,"stretch",!1));const x=a[p+1];if(!x){d.shrink(y);break}const _=j(x,"time",0),A=j(x,"mix",1),b=j(x,"softness",0)*n,w=h.curve;w&&(y=Vt(w,d,y,p,0,f,_,m,A,1),y=Vt(w,d,y,p,1,f,_,g,b,n)),f=_,m=A,g=b,h=x}i.push(d)}if(t.transform)for(const l in t.transform){const a=t.transform[l];let h=a[0];if(!h)continue;const c=r.findTransformConstraint(l);if(!c)throw new Error(`Transform constraint not found: ${l}`);const u=r.transformConstraints.indexOf(c),d=new Gb(a.length,a.length*6,u);let f=j(h,"time",0),m=j(h,"mixRotate",1),g=j(h,"mixX",1),p=j(h,"mixY",g),y=j(h,"mixScaleX",1),x=j(h,"mixScaleY",y);const _=j(h,"mixShearY",1);for(let A=0,b=0;;A++){d.setFrame(A,f,m,g,p,y,x,_);const w=a[A+1];if(!w){d.shrink(b);break}const v=j(w,"time",0),R=j(w,"mixRotate",1),P=j(w,"mixX",1),F=j(w,"mixY",P),B=j(w,"mixScaleX",1),L=j(w,"mixScaleY",B),Y=j(w,"mixShearY",1),Z=h.curve;Z&&(b=Vt(Z,d,b,A,0,f,v,m,R,1),b=Vt(Z,d,b,A,1,f,v,g,P,1),b=Vt(Z,d,b,A,2,f,v,p,F,1),b=Vt(Z,d,b,A,3,f,v,y,B,1),b=Vt(Z,d,b,A,4,f,v,x,L,1),b=Vt(Z,d,b,A,5,f,v,_,Y,1)),f=v,m=R,g=P,p=F,y=B,x=L,y=B,h=w}i.push(d)}if(t.path)for(const l in t.path){const a=t.path[l],h=r.findPathConstraint(l);if(!h)throw new Error(`Path constraint not found: ${l}`);const c=r.pathConstraints.indexOf(h);for(const u in a){const d=a[u];let f=d[0];if(!f)continue;const m=d.length;if(u==="position"){const g=new $b(m,m,c);i.push(Ar(d,g,0,h.positionMode==Ve.Fixed?n:1))}else if(u==="spacing"){const g=new Xb(m,m,c);i.push(Ar(d,g,0,h.spacingMode==ur.Length||h.spacingMode==ur.Fixed?n:1))}else if(u==="mix"){const g=new Hb(m,m*3,c);let p=j(f,"time",0),y=j(f,"mixRotate",1),x=j(f,"mixX",1),_=j(f,"mixY",x);for(let A=0,b=0;;A++){g.setFrame(A,p,y,x,_);const w=d[A+1];if(!w){g.shrink(b);break}const v=j(w,"time",0),R=j(w,"mixRotate",1),P=j(w,"mixX",1),F=j(w,"mixY",P),B=f.curve;B&&(b=Vt(B,g,b,A,0,p,v,y,R,1),b=Vt(B,g,b,A,1,p,v,x,P,1),b=Vt(B,g,b,A,2,p,v,_,F,1)),p=v,y=R,x=P,_=F,f=w}i.push(g)}}}if(t.deform){t.attachments={};for(const l in t.deform){const a=t.deform[l],h=t.attachments[l]={};for(const c in a){const u=a[c],d=h[c]={};for(const f in u)d[f]={deform:u[f]}}}}if(t.attachments)for(const l in t.attachments){const a=t.attachments[l],h=r.findSkin(l);if(h!=null)for(const c in a){const u=a[c],d=r.findSlot(c);if(!d)throw new Error(`Slot not found: ${c}`);const f=d.index;for(const m in u){const g=u[m],p=h.getAttachment(f,m);for(const y in g){const x=g[y];let _=x[0];if(_){if(y=="deform"){const A=p.bones,b=p.vertices,w=A?b.length/3*2:b.length,v=new Lb(x.length,x.length,f,p);let R=j(_,"time",0);for(let P=0,F=0;;P++){let B;const L=j(_,"vertices",null);if(!L)B=A?J.newFloatArray(w):b;else{B=J.newFloatArray(w);const E=j(_,"offset",0);if(J.arrayCopy(L,0,B,E,L.length),n!=1)for(let T=E,C=T+L.length;T<C;T++)B[T]*=n;if(!A)for(let T=0;T<w;T++)B[T]+=b[T]}v.setFrame(P,R,B);const Y=x[P+1];if(!Y){v.shrink(F);break}const Z=j(Y,"time",0),pt=_.curve;pt&&(F=Vt(pt,v,F,P,0,R,Z,0,1,1)),R=Z,_=Y}i.push(v)}else if(y=="sequence"){const A=new Ao(x.length,f,p);let b=0;for(let w=0;w<x.length;w++){const v=j(_,"delay",b),R=j(_,"time",0),P=Gr[j(_,"mode","hold")],F=j(_,"index",0);A.setFrame(w,R,P,F,v),b=v,_=x[w+1]}i.push(A)}}}}}}if(t.drawOrder){const l=new kf(t.drawOrder.length),a=r.slots.length;let h=0;for(let c=0;c<t.drawOrder.length;c++,h++){const u=t.drawOrder[c];let d=null;const f=j(u,"offsets",null);if(f){d=J.newArray(a,-1);const m=J.newArray(a-f.length,0);let g=0,p=0;for(let y=0;y<f.length;y++){const x=f[y],_=r.findSlot(x.slot);if(!_)throw new Error(`Slot not found: ${_}`);const A=_.index;for(;g!=A;)m[p++]=g++;d[g+x.offset]=g++}for(;g<a;)m[p++]=g++;for(let y=a-1;y>=0;y--)d[y]==-1&&(d[y]=m[--p])}l.setFrame(h,j(u,"time",0),d)}i.push(l)}if(t.events){const l=new Bf(t.events.length);let a=0;for(let h=0;h<t.events.length;h++,a++){const c=t.events[h],u=r.findEvent(c.name);if(!u)throw new Error(`Event not found: ${c.name}`);const d=new zb(J.toSinglePrecision(j(c,"time",0)),u);d.intValue=j(c,"int",u.intValue),d.floatValue=j(c,"float",u.floatValue),d.stringValue=j(c,"string",u.stringValue),d.data.audioPath&&(d.volume=j(c,"volume",1),d.balance=j(c,"balance",0)),l.setFrame(a,d)}i.push(l)}let o=0;for(let l=0,a=i.length;l<a;l++)o=Math.max(o,i[l].getDuration());if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new Pf(e,i,o))}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ft.NORMAL;if(t=="additive")return ft.ADD;if(t=="multiply")return ft.MULTIPLY;if(t=="screen")return ft.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}}class Ak{constructor(t,e,r,n,i){this.mesh=t,this.skin=e,this.slotIndex=r,this.parent=n,this.inheritTimeline=i}}function Ar(s,t,e,r){let n=s[0],i=j(n,"time",0),o=j(n,"value",e)*r,l=0;for(let a=0;;a++){t.setFrame(a,i,o);const h=s[a+1];if(!h)return t.shrink(l),t;const c=j(h,"time",0),u=j(h,"value",e)*r;n.curve&&(l=Vt(n.curve,t,l,a,0,i,c,o,u,r)),i=c,o=u,n=h}}function Eu(s,t,e,r,n,i){let o=s[0],l=j(o,"time",0),a=j(o,e,n)*i,h=j(o,r,n)*i,c=0;for(let u=0;;u++){t.setFrame(u,l,a,h);const d=s[u+1];if(!d)return t.shrink(c),t;const f=j(d,"time",0),m=j(d,e,n)*i,g=j(d,r,n)*i,p=o.curve;p&&(c=Vt(p,t,c,u,0,l,f,a,m,i),c=Vt(p,t,c,u,1,l,f,h,g,i)),l=f,a=m,h=g,o=d}}function Vt(s,t,e,r,n,i,o,l,a,h){if(s=="stepped")return t.setStepped(r),e;const c=n<<2,u=s[c],d=s[c+1]*h,f=s[c+2],m=s[c+3]*h;return t.setBezier(e,r,n,i,l,u,d,f,m,o,a),e+1}function j(s,t,e){return s[t]!==void 0?s[t]:e}var _n=(s=>(s[s.UNKNOWN=0]="UNKNOWN",s[s.VER37=37]="VER37",s[s.VER38=38]="VER38",s[s.VER40=40]="VER40",s[s.VER41=41]="VER41",s))(_n||{});function Pd(s){const t=s.substr(0,3),e=Math.floor(Number(t)*10+.001);return t==="3.7"?37:t==="3.8"?38:t==="4.0"?40:t==="4.1"?41:e<37?37:0}class bk{constructor(){this.scale=1}readSkeletonData(t,e){let r=null,n=this.readVersionOldFormat(e),i=Pd(n);if(i===_n.VER38&&(r=new ke(new ab(t))),n=this.readVersionNewFormat(e),i=Pd(n),(i===_n.VER40||i===_n.VER41)&&(r=new tv(new Yb(t))),!r){const o=`Unsupported version of spine model ${n}, please update pixi-spine`;console.error(o)}return r.scale=this.scale,r.readSkeletonData(e)}readVersionOldFormat(t){const e=new Rl(t);let r;try{e.readString(),r=e.readString()}catch{r=""}return r||""}readVersionNewFormat(t){const e=new Rl(t);e.readInt32(),e.readInt32();let r;try{r=e.readString()}catch{r=""}return r||""}}class vk{constructor(){this.scale=1}readSkeletonData(t,e){const r=e.skeleton.spine,n=Pd(r);let i=null;if(n===_n.VER37&&(i=new KB(new DB(t))),n===_n.VER38&&(i=new SB(new ab(t))),(n===_n.VER40||n===_n.VER41)&&(i=new Of(new Yb(t))),!i){const o=`Unsupported version of spine model ${r}, please update pixi-spine`;console.error(o)}return i.scale=this.scale,i.readSkeletonData(e)}}class wk extends yB{createBinaryParser(){return new bk}createJsonParser(){return new vk}parseData(t,e,r){return{spineData:t.readSkeletonData(e,r),spineAtlas:e}}}new wk().installLoader();const Ek={__name:"game",setup(s){const t=$s(null);return Pr(async()=>{const e=new n_({width:600,height:600,backgroundAlpha:0});t.value.appendChild(e.view);const r={json:"daiyanren/spine/Anim1/Anim1.json",atlas:"daiyanren/spine/Anim1/Anim1.atlas",png:"daiyanren/spine/Anim1/Anim1.png"};Bi.add("spineHero",{alias:"hero",srcs:[r.json,r.atlas,r.png],loadParser:"spine"});const n=await Bi.load("spineHero"),i=new(void 0).Spine(n.spineData);i.x=e.screen.width/2,i.y=e.screen.height,i.scale.set(.5),i.state.setAnimation(0,"animation",!0),e.stage.addChild(i)}),(e,r)=>(At(),Jt("div",{ref_key:"container",ref:t,style:{width:"600px",height:"600px"}},null,512))}},Ly="/daiyanren/assets/promo_title1-BXoNnwsB.webp",Sk="/daiyanren/assets/promo_tab-CNGXdmsy.webp",Vy="/daiyanren/assets/promo_banner1-DlyWtbQS.webp",Tk="/daiyanren/assets/promo_games-_DmiEpLW.webp",Uy="/daiyanren/assets/promo_banner2-CV5ZoMBk.webp",Ck={class:"ico"},Rk={class:"pic"},Ik=["src"],Mk={class:"text"},Pk={__name:"promo_ico",props:{msg:String,pic:String},setup(s){return(t,e)=>(At(),Jt("div",Ck,[vt("div",Rk,[vt("img",{src:s.pic,width:"100%"},null,8,Ik)]),vt("div",Mk,Yl(s.msg),1)]))}},Zo=Ue(Pk,[["__scopeId","data-v-990926d0"]]),Fk="/daiyanren/assets/6888-Bm9AHMWh.webp",Bk="/daiyanren/assets/300k-Ccnj22GL.webp",kk="/daiyanren/assets/GTCC-yH1H9lOU.webp",Nk="/daiyanren/assets/VIP-RBo3Erce.webp",Ok={id:"wrap",class:"body"},Lk={class:"exclusive"},Vk={__name:"promo",setup(s){return(t,e)=>(At(),Jt("div",Ok,[ht(hi,{msg:"Hello World"}),e[0]||(e[0]=vt("div",{class:"promo_title1"},[vt("img",{src:Ly,width:"100%"})],-1)),vt("div",Lk,[vt("ul",null,[vt("li",null,[ht(Zo,{pic:ie(Fk),msg:"New Comers"},null,8,["pic"])]),vt("li",null,[ht(Zo,{pic:ie(Bk),msg:"Daily Bonus"},null,8,["pic"])]),vt("li",null,[ht(Zo,{pic:ie(Nk),msg:"VIP"},null,8,["pic"])]),vt("li",null,[ht(Zo,{pic:ie(kk),msg:"GTCC"},null,8,["pic"])])])]),e[1]||(e[1]=Jl('<div class="promo_title1" data-v-70b1f183><img src="'+Ly+'" width="100%" data-v-70b1f183></div><div class="promo_tab" data-v-70b1f183><img src="'+Sk+'" width="100%" data-v-70b1f183></div><div class="banners" data-v-70b1f183><ul data-v-70b1f183><li data-v-70b1f183><img src="'+Vy+'" width="100%" data-v-70b1f183></li><li data-v-70b1f183><img src="'+Tk+'" width="100%" data-v-70b1f183></li><li data-v-70b1f183><img src="'+Uy+'" width="100%" data-v-70b1f183></li><li data-v-70b1f183><img src="'+Vy+'" width="100%" data-v-70b1f183></li><li data-v-70b1f183><img src="'+Uy+'" width="100%" data-v-70b1f183></li></ul></div>',3))]))}},Uk=Ue(Vk,[["__scopeId","data-v-70b1f183"]]),Dk=[{path:"/",name:"Home",component:TS},{path:"/reward",name:"reward",component:eT},{path:"/tongits",name:"tongits",component:nT},{path:"/wallet",name:"wallet",component:oT},{path:"/promo",name:"promo",component:Uk},{path:"/account",name:"account",component:cT},{path:"/game_list",name:"game_list",component:QS},{path:"/game",name:"game",component:Ek}],Gk=vE({history:Z1("/daiyanren/"),routes:Dk,scrollBehavior(s,t,e){return{top:0}}});x1(RE).use(Gk).mount("#app");export{w0 as $,t_ as A,xs as B,_o as C,Ae as D,bt as E,A0 as F,rh as G,jr as H,sC as I,qm as J,tp as K,RC as L,Xt as M,VC as N,Me as O,_s as P,ss as Q,Ku as R,cR as S,Po as T,ju as U,GC as V,Zm as W,jh as X,Jm as Y,iC as Z,Pe as _,xr as a,e_ as a0,oe as a1,Le as a2,jC as a3,gR as a4,NR as a5,LR as a6,$R as a7,HR as a8,YR as a9,aC as aa,Yn as ab,eo as ac,$I as ad,A_ as ae,Tp as af,Ep as ag,TT as ah,eg as ai,WI as aj,xe as ak,RT as al,Zp as am,Sl as an,nd as ao,Jp as ap,w_ as aq,Ja as b,il as c,nf as d,Ze as e,Sp as f,oR as g,Z0 as h,mp as i,k0 as j,Fr as k,W0 as l,Kp as m,kR as n,OR as o,DR as p,XR as q,UT as r,c_ as s,OC as t,Gt as u,H0 as v,pe as w,CT as x,zR as y,Xr as z};
